import{a as zA,b as Rc,c as Tn,d as Lc,e as hn,f as GV,g as zV,h as rm,i as VA,j as VV,k as WV,l as XV,m as WA,n as KA,o as XA,p as YA,q as YV,r as JV,s as Ql,t as zb,v as rp,w as ip,x as e9}from"./chunk-YOD2J3DW.js";import{a as Ri}from"./chunk-2AZHYDTW.js";import{a as QV,d as im,f as ZV}from"./chunk-SVFCMH6D.js";import"./chunk-DSH42G32.js";import{a as Zl}from"./chunk-UWCEKXP6.js";import{a as jV,b as tm,d as Jl,g as HV,h as Pi,i as KV}from"./chunk-LGOX7XWM.js";import{a as Rr}from"./chunk-ZXLLDMKI.js";import{b as Yl,c as ui}from"./chunk-IZP5LMDC.js";import{a as qV,b as Er}from"./chunk-HKDEPBJK.js";import{b as GA,c as R,d as $V,f as BV}from"./chunk-DGJUBN33.js";var QA=R(JA=>{(function(){var t,e,r,n,i,a,s,o,c,l,f,g,m,y,x,I,A,F,X,de,N,H,z,Y,G,ie,fe,Ne,ye,He,Re,Ze,ce,tt,ft,pt,Ye,xt,Ut,Pt=function(Ke,Q){return function(){return Ke.apply(Q,arguments)}},tr=[].slice;t=jQuery,pt=0,Ye=1,xt=2,fe=13,ce=9,Y=46,z=8,ye=37,Ze=39,tt=38,G=40,Ne=36,ie=35,Re=33,He=34,l="jqconsole-",i=l+"cursor",a=l+"header",f=l+"prompt",g=f+"-text",c=l+"old-prompt",s=l+"input",o=l+"old-input",n=l+"blurred",N="keypress",F="<span/>",I="<div/>",A=":empty",ft=`
`,x=">>> ",y="... ",m=2,r=l+"ansi-",X="\x1B",de=/\[(\d*)(?:;(\d*))*m/,e=function(){Ke.prototype.COLORS=["black","red","green","yellow","blue","magenta","cyan","white"];function Ke(){this.stylize=Pt(this.stylize,this),this._closeSpan=Pt(this._closeSpan,this),this._openSpan=Pt(this._openSpan,this),this.getClasses=Pt(this.getClasses,this),this._style=Pt(this._style,this),this._color=Pt(this._color,this),this._remove=Pt(this._remove,this),this._append=Pt(this._append,this),this.klasses=[]}return Ke.prototype._append=function(Q){if(Q=""+r+Q,this.klasses.indexOf(Q)===-1)return this.klasses.push(Q)},Ke.prototype._remove=function(){var Q,pe,xe,_e,nt,_t;for(_e=1<=arguments.length?tr.call(arguments,0):[],_t=[],pe=0,nt=_e.length;pe<nt;pe++)xe=_e[pe],xe==="fonts"||xe==="color"||xe==="background-color"?_t.push(this.klasses=(function(){var bt,Se,Be,jt;for(Be=this.klasses,jt=[],bt=0,Se=Be.length;bt<Se;bt++)Q=Be[bt],Q.indexOf(xe)!==r.length&&jt.push(Q);return jt}).call(this)):(xe=""+r+xe,_t.push(this.klasses=(function(){var bt,Se,Be,jt;for(Be=this.klasses,jt=[],bt=0,Se=Be.length;bt<Se;bt++)Q=Be[bt],Q!==xe&&jt.push(Q);return jt}).call(this)));return _t},Ke.prototype._color=function(Q){return this.COLORS[Q]},Ke.prototype._style=function(Q){if(Q===""&&(Q=0),Q=parseInt(Q),!isNaN(Q))switch(Q){case 0:return this.klasses=[];case 1:return this._append("bold");case 2:return this._append("lighter");case 3:return this._append("italic");case 4:return this._append("underline");case 5:return this._append("blink");case 6:return this._append("blink-rapid");case 8:return this._append("hidden");case 9:return this._append("line-through");case 10:return this._remove("fonts");case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:return this._remove("fonts"),this._append("fonts-"+(Q-10));case 20:return this._append("fraktur");case 21:return this._remove("bold","lighter");case 22:return this._remove("bold","lighter");case 23:return this._remove("italic","fraktur");case 24:return this._remove("underline");case 25:return this._remove("blink","blink-rapid");case 28:return this._remove("hidden");case 29:return this._remove("line-through");case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:return this._remove("color"),this._append("color-"+this._color(Q-30));case 39:return this._remove("color");case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:return this._remove("background-color"),this._append("background-color-"+this._color(Q-40));case 49:return this._remove("background-color");case 51:return this._append("framed");case 53:return this._append("overline");case 54:return this._remove("framed");case 55:return this._remove("overline")}},Ke.prototype.getClasses=function(){return this.klasses.join(" ")},Ke.prototype._openSpan=function(Q){return'<span class="'+this.getClasses()+'">'+Q},Ke.prototype._closeSpan=function(Q){return Q+"</span>"},Ke.prototype.stylize=function(Q){var pe,xe,_e,nt,_t,bt;for(Q=this._openSpan(Q),_e=0;(_e=Q.indexOf(X,_e))&&_e!==-1;)if(xe=Q.slice(_e).match(de)){for(bt=xe.slice(1),nt=0,_t=bt.length;nt<_t;nt++)pe=bt[nt],this._style(pe);Q=this._closeSpan(Q.slice(0,_e))+this._openSpan(Q.slice(_e+1+xe[0].length))}else _e++;return this._closeSpan(Q)},Ke}(),Ut=function(Ke,Q){return'<span class="'+Ke+'">'+(Q||"")+"</span>"},H=function(){function Ke(Q,pe,xe,_e,nt){nt==null&&(nt=!1),this._HideComposition=Pt(this._HideComposition,this),this._ShowComposition=Pt(this._ShowComposition,this),this._UpdateComposition=Pt(this._UpdateComposition,this),this._EndComposition=Pt(this._EndComposition,this),this._StartComposition=Pt(this._StartComposition,this),this._CheckComposition=Pt(this._CheckComposition,this),this._ProcessMatch=Pt(this._ProcessMatch,this),this._HandleKey=Pt(this._HandleKey,this),this._HandleChar=Pt(this._HandleChar,this),this.isMobile=!!navigator.userAgent.match(/iPhone|iPad|iPod|Android/i),this.isIos=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),this.isAndroid=!!navigator.userAgent.match(/Android/i),this.auto_focus=!nt,this.$window=t(window),this.header=pe||"",this.prompt_label_main=typeof xe=="string"?xe:x,this.prompt_label_continue=_e||y,this.indent_width=m,this.state=Ye,this.input_queue=[],this.input_callback=null,this.multiline_callback=null,this.history=[],this.history_index=0,this.history_new="",this.history_active=!1,this.shortcuts={},this.$container=t("<div/>").appendTo(Q),this.$container.css({top:0,left:0,right:0,bottom:0,position:"absolute",overflow:"auto"}),this.$console=t('<pre class="jqconsole"/>').appendTo(this.$container),this.$console.css({margin:0,position:"relative","min-height":"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"}),this.$console_focused=!0,this.$input_container=t(I).appendTo(this.$container),this.$input_container.css({position:"absolute",width:1,height:0,overflow:"hidden"}),this.$input_source=this.isAndroid?t("<input/>"):t("<textarea/>"),this.$input_source.attr({wrap:"off",autocapitalize:"off",autocorrect:"off",spellcheck:"false",autocomplete:"off"}),this.$input_source.css({position:"absolute",width:2}),this.$input_source.appendTo(this.$input_container),this.$composition=t(I),this.$composition.addClass(l+"composition"),this.$composition.css({display:"inline",position:"relative"}),this.matchings={openings:{},closings:{},clss:[]},this.ansi=new e,this._InitPrompt(),this._SetupEvents(),this.Write(this.header,a),t(Q).data("jqconsole",this)}return Ke.prototype.ResetHistory=function(){return this.SetHistory([])},Ke.prototype.ResetShortcuts=function(){return this.shortcuts={}},Ke.prototype.ResetMatchings=function(){return this.matchings={openings:{},closings:{},clss:[]}},Ke.prototype.Reset=function(){this.state!==Ye&&this.ClearPromptText(!0),this.state=Ye,this.input_queue=[],this.input_callback=null,this.multiline_callback=null,this.custom_control_key_handler=null,this.custom_keypress_handler=null,this.ResetHistory(),this.ResetShortcuts(),this.ResetMatchings(),this.$prompt.detach(),this.$input_container.detach(),this.$console.html(""),this.$prompt.appendTo(this.$console),this.$input_container.appendTo(this.$container),this.Write(this.header,a)},Ke.prototype.GetHistory=function(){return this.history},Ke.prototype.SetHistory=function(Q){return this.history=Q.slice(),this.history_index=this.history.length},Ke.prototype._CheckKeyCode=function(Q){if(isNaN(Q)?Q=Q.charCodeAt(0):Q=parseInt(Q,10),!(0<Q&&Q<256)||isNaN(Q))throw new Error("Key code must be a number between 0 and 256 exclusive.");return Q},Ke.prototype._LetterCaseHelper=function(Q,pe){if(pe(Q),65<=Q&&Q<=90&&pe(Q+32),97<=Q&&Q<=122)return pe(Q-32)},Ke.prototype.RegisterShortcut=function(Q,pe){var xe;if(Q=this._CheckKeyCode(Q),typeof pe!="function")throw new Error("Callback must be a function, not "+pe+".");xe=function(_e){return function(nt){return nt in _e.shortcuts||(_e.shortcuts[nt]=[]),_e.shortcuts[nt].push(pe)}}(this),this._LetterCaseHelper(Q,xe)},Ke.prototype.UnRegisterShortcut=function(Q,pe){var xe;Q=this._CheckKeyCode(Q),xe=function(_e){return function(nt){if(nt in _e.shortcuts)return pe?_e.shortcuts[nt].splice(_e.shortcuts[nt].indexOf(pe),1):delete _e.shortcuts[nt]}}(this),this._LetterCaseHelper(Q,xe)},Ke.prototype.GetColumn=function(){var Q;return this.$prompt_right.detach(),this.$prompt_cursor.text(""),Q=this.$console.text().split(ft),this.$prompt_cursor.html("&nbsp;"),this.$prompt_cursor.after(this.$prompt_right),Q[Q.length-1].length},Ke.prototype.GetLine=function(){return this.$console.text().split(ft).length-1},Ke.prototype.ClearPromptText=function(Q){if(this.state===Ye)throw new Error("ClearPromptText() is not allowed in output state.");this.$prompt_before.html(""),this.$prompt_after.html(""),this.$prompt_label.text(Q?"":this._SelectPromptLabel(!1)),this.$prompt_left.text(""),this.$prompt_right.text("")},Ke.prototype.GetPromptText=function(Q){var pe,xe,_e,nt,_t;if(this.state===Ye)throw new Error("GetPromptText() is not allowed in output state.");return Q?(this.$prompt_cursor.text(""),_t=this.$prompt.text(),this.$prompt_cursor.html("&nbsp;"),_t):(nt=function(bt){var Se;return Se=[],bt.children().each(function(){return Se.push(t(this).children().last().text())}),Se.join(ft)},xe=nt(this.$prompt_before),xe&&(xe+=ft),_e=this.$prompt_left.text()+this.$prompt_right.text(),pe=nt(this.$prompt_after),pe&&(pe=ft+pe),xe+_e+pe)},Ke.prototype.SetPromptText=function(Q){if(this.state===Ye)throw new Error("SetPromptText() is not allowed in output state.");this.ClearPromptText(!1),this._AppendPromptText(Q),this._ScrollToEnd()},Ke.prototype.SetPromptLabel=function(Q,pe){this.prompt_label_main=Q,pe!=null&&(this.prompt_label_continue=pe)},Ke.prototype.UpdatePromptLabel=function(){var Q,pe;return pe=">span+span>span:first-child",Q="."+f+pe,this.$console.find(Q).text(this.prompt_label_main)},Ke.prototype.Write=function(Q,pe,xe){var _e;return xe==null&&(xe=!0),xe&&(Q=this.ansi.stylize(t(F).text(Q).html())),_e=t(F).html(Q),pe!=null&&_e.addClass(pe),this.Append(_e)},Ke.prototype.Append=function(Q){var pe;return pe=t(Q).insertBefore(this.$prompt),this._ScrollToEnd(),this.$prompt_cursor.detach().insertAfter(this.$prompt_left),pe},Ke.prototype.Input=function(Q){var pe,xe,_e,nt;if(this.state===xt)_e=this.input_callback,nt=this.multiline_callback,xe=this.history_active,pe=this.async_multiline,this.AbortPrompt(),this.input_queue.unshift(function(_t){return function(){return _t.Prompt(xe,_e,nt,pe)}}(this));else if(this.state!==Ye){this.input_queue.push(function(_t){return function(){return _t.Input(Q)}}(this));return}this.history_active=!1,this.input_callback=Q,this.multiline_callback=null,this.state=pt,this.$prompt.attr("class",s),this.$prompt_label.text(this._SelectPromptLabel(!1)),this.Focus(),this._ScrollToEnd()},Ke.prototype.Prompt=function(Q,pe,xe,_e){if(this.state!==Ye){this.input_queue.push(function(nt){return function(){return nt.Prompt(Q,pe,xe,_e)}}(this));return}this.history_active=Q,this.input_callback=pe,this.multiline_callback=xe,this.async_multiline=_e,this.state=xt,this.$prompt.attr("class",f+" "+this.ansi.getClasses()),this.$prompt_label.text(this._SelectPromptLabel(!1)),this.auto_focus&&this.Focus(),this._ScrollToEnd()},Ke.prototype.AbortPrompt=function(){var Q;if(this.state===Ye)throw new Error("Cannot abort prompt when not in prompt or input state.");Q=this.GetPromptText(!0),this.state===pt?Q.trim().length!==0&&this.Write(Q+ft,o):this.Write(Q+ft,c),this.ClearPromptText(!0),this.state=Ye,this.input_callback=this.multiline_callback=null,this._CheckInputQueue()},Ke.prototype.Focus=function(){this.IsDisabled()||this.$input_source.focus()},Ke.prototype.SetIndentWidth=function(Q){return this.indent_width=Q},Ke.prototype.GetIndentWidth=function(){return this.indent_width},Ke.prototype.RegisterMatching=function(Q,pe,xe){var _e;return _e={opening_char:Q,closing_char:pe,cls:xe},this.matchings.clss.push(xe),this.matchings.openings[Q]=_e,this.matchings.closings[pe]=_e},Ke.prototype.UnRegisterMatching=function(Q,pe){var xe;return xe=this.matchings.openings[Q].cls,delete this.matchings.openings[Q],delete this.matchings.closings[pe],this.matchings.clss.splice(this.matchings.clss.indexOf(xe),1)},Ke.prototype.Dump=function(){var Q,pe;return Q=this.$console.find("."+a).nextUntil("."+f).addBack(),function(){var xe,_e,nt;for(nt=[],xe=0,_e=Q.length;xe<_e;xe++)pe=Q[xe],t(pe).is("."+c)?nt.push(t(pe).text().replace(/^\s+/,">>> ")):nt.push(t(pe).text());return nt}().join("")},Ke.prototype.GetState=function(){return this.state===pt?"input":this.state===Ye?"output":"prompt"},Ke.prototype.Disable=function(){return this.$input_source.attr("disabled",!0),this.$input_source.blur()},Ke.prototype.Enable=function(){return this.$input_source.attr("disabled",!1)},Ke.prototype.IsDisabled=function(){return!!this.$input_source.attr("disabled")},Ke.prototype.MoveToStart=function(Q){this._MoveTo(Q,!0)},Ke.prototype.MoveToEnd=function(Q){this._MoveTo(Q,!1)},Ke.prototype.Clear=function(){var Q;return Q=this.state===pt?s:f,this.$console.find("."+a).nextUntil("."+Q).addBack().text(""),this.$prompt_cursor.detach(),this.$prompt_right.before(this.$prompt_cursor)},Ke.prototype._CheckInputQueue=function(){if(this.input_queue.length)return this.input_queue.shift()()},Ke.prototype._InitPrompt=function(){if(this.$prompt=t(Ut(s)).appendTo(this.$console),this.$prompt_before=t(F).appendTo(this.$prompt),this.$prompt_current=t(F).appendTo(this.$prompt),this.$prompt_after=t(F).appendTo(this.$prompt),this.$prompt_label=t(F).appendTo(this.$prompt_current),this.$prompt_left=t(F).appendTo(this.$prompt_current),this.$prompt_right=t(F).appendTo(this.$prompt_current),this.$prompt_right.css({position:"relative"}),this.$prompt_left.addClass(g),this.$prompt_cursor=t(Ut(i,"&nbsp;")),this.$prompt_cursor.insertBefore(this.$prompt_right),this.$prompt_cursor.css({color:"transparent",display:"inline",zIndex:0}),!this.isMobile)return this.$prompt_cursor.css("position","absolute")},Ke.prototype._SetupEvents=function(){return this.isMobile?this.$console.click(function(Q){return function(pe){return pe.preventDefault(),Q.Focus()}}(this)):this.$console.mouseup(function(Q){return function(pe){var xe;return pe.which===2?Q.Focus():(xe=function(){if(!window.getSelection().toString())return pe.preventDefault(),Q.Focus()},setTimeout(xe,0))}}(this)),this.$input_source.focus(function(Q){return function(){var pe,xe;return Q._ScrollToEnd(),Q.$console_focused=!0,Q.$console.removeClass(n),xe=function(){if(Q.$console_focused)return Q.$console.removeClass(n)},setTimeout(xe,100),pe=function(){if(Q.isIos&&Q.$console_focused)return Q.$input_source.hide()},setTimeout(pe,500)}}(this)),this.$input_source.blur(function(Q){return function(){var pe;return Q.$console_focused=!1,Q.isIos&&Q.$input_source.show(),pe=function(){if(!Q.$console_focused)return Q.$console.addClass(n)},setTimeout(pe,100)}}(this)),this.$input_source.bind("paste",function(Q){return function(){var pe;return pe=function(){if(!Q.in_composition)return Q._AppendPromptText(Q.$input_source.val()),Q.$input_source.val(""),Q.Focus()},setTimeout(pe,0)}}(this)),this.$input_source.keypress(this._HandleChar),this.$input_source.keydown(this._HandleKey),this.$input_source.keydown(this._CheckComposition),this.$input_source.bind("compositionstart",this._StartComposition),this.$input_source.bind("compositionend",function(Q){return function(pe){return setTimeout(function(){return Q._EndComposition(pe)},0)}}(this)),this.isAndroid?(this.$input_source.bind("input",this._StartComposition),this.$input_source.bind("input",this._UpdateComposition)):this.$input_source.bind("text",this._UpdateComposition)},Ke.prototype.SetKeyPressHandler=function(Q){return this.custom_keypress_handler=Q},Ke.prototype.SetControlKeyHandler=function(Q){return this.custom_control_key_handler=Q},Ke.prototype._HandleChar=function(Q){var pe;return this.state===Ye||Q.metaKey||Q.ctrlKey?!0:(pe=Q.which,pe===8||pe===9||pe===13||this.custom_keypress_handler!=null&&this.custom_keypress_handler.call(this,Q)===!1||(this.$prompt_left.text(this.$prompt_left.text()+String.fromCharCode(pe)),this._ScrollToEnd()),!1)},Ke.prototype._HandleKey=function(Q){var pe;if(this.state===Ye)return!0;if(pe=Q.keyCode||Q.which,setTimeout(t.proxy(this._CheckMatchings,this),0),this.custom_control_key_handler!=null&&this.custom_control_key_handler.call(this,Q)===!1)return!1;if(Q.altKey)return!0;if(Q.ctrlKey||Q.metaKey)return this._HandleCtrlShortcut(pe);if(Q.shiftKey){switch(pe){case fe:this._HandleEnter(!0);break;case ce:this._Unindent();break;case tt:this._MoveUp();break;case G:this._MoveDown();break;case Re:this._ScrollPage("up");break;case He:this._ScrollPage("down");break;default:return!0}return!1}else{switch(pe){case fe:this._HandleEnter(!1);break;case ce:this._Indent();break;case Y:this._Delete(!1);break;case z:this._Backspace(!1);break;case ye:this._MoveLeft(!1);break;case Ze:this._MoveRight(!1);break;case tt:this._HistoryPrevious();break;case G:this._HistoryNext();break;case Ne:this.MoveToStart(!1);break;case ie:this.MoveToEnd(!1);break;case Re:this._ScrollPage("up");break;case He:this._ScrollPage("down");break;default:return!0}return!1}},Ke.prototype._HandleCtrlShortcut=function(Q){var pe,xe,_e,nt;switch(Q){case Y:this._Delete(!0);break;case z:this._Backspace(!0);break;case ye:this._MoveLeft(!0);break;case Ze:this._MoveRight(!0);break;case tt:this._MoveUp();break;case G:this._MoveDown();break;case ie:this.MoveToEnd(!0);break;case Ne:this.MoveToStart(!0);break;default:if(Q in this.shortcuts){for(nt=this.shortcuts[Q],xe=0,_e=nt.length;xe<_e;xe++)pe=nt[xe],pe.call(this);return!1}else return!0}return!1},Ke.prototype._HandleEnter=function(Q){var pe,xe;return this._EndComposition(),Q?this._InsertNewLine(!0):(xe=this.GetPromptText(),pe=function(_e){return function(nt){var _t,bt,Se,Be,jt,qe;if(nt!==!1){for(_e.MoveToEnd(!0),_e._InsertNewLine(!0),qe=[],_t=Be=0,jt=Math.abs(nt);0<=jt?Be<jt:Be>jt;_t=0<=jt?++Be:--Be)nt>0?qe.push(_e._Indent()):qe.push(_e._Unindent());return qe}else return Se=_e.state===pt?"input":"prompt",_e.Write(_e.GetPromptText(!0)+ft,l+"old-"+Se),_e.ClearPromptText(!0),_e.history_active&&((!_e.history.length||_e.history[_e.history.length-1]!==xe)&&_e.history.push(xe),_e.history_index=_e.history.length),_e.state=Ye,bt=_e.input_callback,_e.input_callback=null,bt&&bt(xe),_e._CheckInputQueue()}}(this),this.multiline_callback?this.async_multiline?this.multiline_callback(xe,pe):pe(this.multiline_callback(xe)):pe(!1))},Ke.prototype._GetDirectionals=function(Q){var pe,xe,_e,nt,_t,bt,Se,Be;return nt=Q?this.$prompt_left:this.$prompt_right,pe=Q?this.$prompt_right:this.$prompt_left,_e=Q?this.$prompt_before:this.$prompt_after,xe=Q?this.$prompt_after:this.$prompt_before,bt=Q?t.proxy(this.MoveToStart,this):t.proxy(this.MoveToEnd,this),_t=Q?t.proxy(this._MoveLeft,this):t.proxy(this._MoveRight,this),Be=Q?"last":"first",Se=Q?"prependTo":"appendTo",{$prompt_which:nt,$prompt_opposite:pe,$prompt_relative:_e,$prompt_rel_opposite:xe,MoveToLimit:bt,MoveDirection:_t,which_end:Be,where_append:Se}},Ke.prototype._VerticalMove=function(Q){var pe,xe,_e,nt,_t,bt,Se,Be;if(Se=this._GetDirectionals(Q),_e=Se.$prompt_which,pe=Se.$prompt_opposite,xe=Se.$prompt_relative,_t=Se.MoveToLimit,nt=Se.MoveDirection,!xe.is(A))return bt=this.$prompt_left.text().length,_t(),nt(),Be=_e.text(),pe.text(Q?Be.slice(bt):Be.slice(0,bt)),_e.text(Q?Be.slice(0,bt):Be.slice(bt))},Ke.prototype._MoveUp=function(){return this._VerticalMove(!0)},Ke.prototype._MoveDown=function(){return this._VerticalMove()},Ke.prototype._HorizontalMove=function(Q,pe){var xe,_e,nt,_t,bt,Se,Be,jt,qe,rt,je,Ae,lt,Nt;if(jt=this._GetDirectionals(pe),bt=jt.$prompt_which,_e=jt.$prompt_opposite,_t=jt.$prompt_relative,nt=jt.$prompt_rel_opposite,lt=jt.which_end,Ae=jt.where_append,qe=pe?/\w*\W*$/:/^\w*\W*/,rt=bt.text(),rt)return Q?(Nt=rt.match(qe),Nt?(Nt=Nt[0],je=_e.text(),_e.text(pe?Nt+je:je+Nt),Be=Nt.length,bt.text(pe?rt.slice(0,-Be):rt.slice(Be))):void 0):(je=_e.text(),_e.text(pe?rt.slice(-1)+je:je+rt[0]),bt.text(pe?rt.slice(0,-1):rt.slice(1)));if(!_t.is(A))return Se=t(F)[Ae](nt),Se.append(t(F).text(this.$prompt_label.text())),Se.append(t(F).text(_e.text())),xe=_t.children()[lt]().detach(),this.$prompt_label.text(xe.children().first().text()),bt.text(xe.children().last().text()),_e.text("")},Ke.prototype._MoveLeft=function(Q){return this._HorizontalMove(Q,!0)},Ke.prototype._MoveRight=function(Q){return this._HorizontalMove(Q)},Ke.prototype._MoveTo=function(Q,pe){var xe,_e,nt,_t,bt,Se,Be;if(Se=this._GetDirectionals(pe),nt=Se.$prompt_which,xe=Se.$prompt_opposite,_e=Se.$prompt_relative,bt=Se.MoveToLimit,_t=Se.MoveDirection,Q){for(Be=[];!(_e.is(A)&&nt.text()==="");)bt(!1),Be.push(_t(!1));return Be}else return xe.text(this.$prompt_left.text()+this.$prompt_right.text()),nt.text("")},Ke.prototype._Delete=function(Q){var pe,xe,_e;if(xe=this.$prompt_right.text(),xe)return Q?(_e=xe.match(/^\w*\W*/),_e?(_e=_e[0],this.$prompt_right.text(xe.slice(_e.length))):void 0):this.$prompt_right.text(xe.slice(1));if(!this.$prompt_after.is(A))return pe=this.$prompt_after.children().first().detach(),this.$prompt_right.text(pe.children().last().text())},Ke.prototype._Backspace=function(Q){var pe,xe,_e;if(setTimeout(t.proxy(this._ScrollToEnd,this),0),xe=this.$prompt_left.text(),xe)return Q?(_e=xe.match(/\w*\W*$/),_e?(_e=_e[0],this.$prompt_left.text(xe.slice(0,-_e.length))):void 0):this.$prompt_left.text(xe.slice(0,-1));if(!this.$prompt_before.is(A))return pe=this.$prompt_before.children().last().detach(),this.$prompt_label.text(pe.children().first().text()),this.$prompt_left.text(pe.children().last().text())},Ke.prototype._Indent=function(){var Q;return this.$prompt_left.prepend((function(){var pe,xe,_e;for(_e=[],Q=pe=1,xe=this.indent_width;1<=xe?pe<=xe:pe>=xe;Q=1<=xe?++pe:--pe)_e.push(" ");return _e}).call(this).join(""))},Ke.prototype._Unindent=function(){var Q,pe,xe,_e,nt;for(xe=this.$prompt_left.text()+this.$prompt_right.text(),nt=[],Q=pe=1,_e=this.indent_width;(1<=_e?pe<=_e:pe>=_e)&&/^ /.test(xe);Q=1<=_e?++pe:--pe)this.$prompt_left.text()?this.$prompt_left.text(this.$prompt_left.text().slice(1)):this.$prompt_right.text(this.$prompt_right.text().slice(1)),nt.push(xe=xe.slice(1));return nt},Ke.prototype._InsertNewLine=function(Q){var pe,xe,_e;return Q==null&&(Q=!1),_e=this._SelectPromptLabel(!this.$prompt_before.is(A)),pe=t(F).appendTo(this.$prompt_before),pe.append(t(F).text(_e)),pe.append(t(F).addClass(g).text(this.$prompt_left.text())),this.$prompt_label.text(this._SelectPromptLabel(!0)),Q&&(xe=this.$prompt_left.text().match(/^\s+/))?this.$prompt_left.text(xe[0]):this.$prompt_left.text(""),this._ScrollToEnd()},Ke.prototype._AppendPromptText=function(Q){var pe,xe,_e,nt,_t,bt;for(nt=Q.split(ft),this.$prompt_left.text(this.$prompt_left.text()+nt[0]),_t=nt.slice(1),bt=[],pe=0,xe=_t.length;pe<xe;pe++)_e=_t[pe],this._InsertNewLine(),bt.push(this.$prompt_left.text(_e));return bt},Ke.prototype._ScrollPage=function(Q){var pe;return pe=this.$container[0].scrollTop,Q==="up"?pe-=this.$container.height():pe+=this.$container.height(),this.$container.stop().animate({scrollTop:pe},"fast")},Ke.prototype._ScrollToEnd=function(){var Q;if(this.$container.scrollTop(this.$container[0].scrollHeight),Q=this.$prompt_cursor.position(),this.$input_container.css({left:Q.left,top:Q.top}),this.auto_focus)return setTimeout(this.ScrollWindowToPrompt.bind(this),50)},Ke.prototype.ScrollWindowToPrompt=function(){var Q,pe,xe,_e,nt,_t;if(pe=this.$prompt_cursor.height(),_t=this.$window.scrollTop(),nt=this.$window.scrollLeft(),Q=document.documentElement.clientHeight,_e=this.$prompt_cursor.offset(),xe=_e.top-2*pe,this.isMobile&&typeof orientation<"u"&&orientation!==null){if(_t<_e.top||_t>_e.top)return this.$window.scrollTop(xe)}else{if(_t+Q<_e.top)return this.$window.scrollTop(_e.top-Q+pe);if(_t>xe)return this.$window.scrollTop(_e.top)}},Ke.prototype._SelectPromptLabel=function(Q){return this.state===xt?Q?` 
`+this.prompt_label_continue:this.prompt_label_main:Q?`
 `:" "},Ke.prototype._Wrap=function(Q,pe,xe){var _e,nt;return nt=Q.html(),_e=nt.slice(0,pe)+Ut(xe,nt[pe])+nt.slice(pe+1),Q.html(_e)},Ke.prototype._WalkCharacters=function(Q,pe,xe,_e,nt){var _t,bt,Se;for(bt=nt?Q.length:0,Q=Q.split(""),Se=function(){var Be,jt,qe,rt;return nt?(jt=Q,Q=2<=jt.length?tr.call(jt,0,Be=jt.length-1):(Be=0,[]),rt=jt[Be++]):(qe=Q,rt=qe[0],Q=2<=qe.length?tr.call(qe,1):[]),rt&&(bt=bt+(nt?-1:1)),rt};_t=Se();)if(_t===pe?_e++:_t===xe&&_e--,_e===0)return{index:bt,current_count:_e};return{index:-1,current_count:_e}},Ke.prototype._ProcessMatch=function(Q,pe,xe){var _e,nt,_t,bt,Se,Be,jt,qe,rt,je,Ae,lt;return rt=pe?[Q.closing_char,Q.opening_char]:[Q.opening_char,Q.closing_char],bt=rt[0],qe=rt[1],je=this._GetDirectionals(pe),_t=je.$prompt_which,nt=je.$prompt_relative,Se=1,Be=!1,lt=_t.html(),pe||(lt=lt.slice(1)),xe&&pe&&(lt=lt.slice(0,-1)),Ae=this._WalkCharacters(lt,bt,qe,Se,pe),jt=Ae.index,Se=Ae.current_count,jt>-1?(this._Wrap(_t,jt,Q.cls),Be=!0):(_e=nt.children(),_e=pe?Array.prototype.reverse.call(_e):_e,_e.each(function(Nt){return function(ot,St){var te,ee;if(te=t(St).children().last(),lt=te.html(),ee=Nt._WalkCharacters(lt,bt,qe,Se,pe),jt=ee.index,Se=ee.current_count,jt>-1)return pe||jt--,Nt._Wrap(te,jt,Q.cls),Be=!0,!1}}(this))),Be},Ke.prototype._CheckMatchings=function(Q){var pe,xe,_e,nt,_t,bt,Se;for(_e=Q?this.$prompt_left.text().slice(this.$prompt_left.text().length-1):this.$prompt_right.text()[0],Se=this.matchings.clss,_t=0,bt=Se.length;_t<bt;_t++)pe=Se[_t],t("."+pe,this.$console).contents().unwrap();if((xe=this.matchings.closings[_e])?nt=this._ProcessMatch(xe,!0,Q):(xe=this.matchings.openings[_e])?nt=this._ProcessMatch(xe,!1,Q):Q||this._CheckMatchings(!0),Q){if(nt)return this._Wrap(this.$prompt_left,this.$prompt_left.html().length-1,xe.cls)}else if(nt)return this._Wrap(this.$prompt_right,0,xe.cls)},Ke.prototype._HistoryPrevious=function(){if(this.history_active&&!(this.history_index<=0))return this.history_index===this.history.length&&(this.history_new=this.GetPromptText()),this.SetPromptText(this.history[--this.history_index])},Ke.prototype._HistoryNext=function(){if(this.history_active&&!(this.history_index>=this.history.length))return this.history_index===this.history.length-1?(this.history_index++,this.SetPromptText(this.history_new)):this.SetPromptText(this.history[++this.history_index])},Ke.prototype._CheckComposition=function(Q){var pe;if(pe=Q.keyCode||Q.which,pe===229)return this.in_composition?this._UpdateComposition():this._StartComposition()},Ke.prototype._StartComposition=function(){if(!this.in_composition)return this.in_composition=!0,this._ShowComposition(),setTimeout(this._UpdateComposition,0)},Ke.prototype._EndComposition=function(){if(this.in_composition)return this._HideComposition(),this.$prompt_left.text(this.$prompt_left.text()+this.$composition.text()),this.$composition.text(""),this.$input_source.val(""),this.in_composition=!1},Ke.prototype._UpdateComposition=function(Q){var pe;return pe=function(xe){return function(){if(xe.in_composition)return xe.$composition.text(xe.$input_source.val())}}(this),setTimeout(pe,0)},Ke.prototype._ShowComposition=function(){return this.$composition.css("height",this.$prompt_cursor.height()),this.$composition.empty(),this.$composition.appendTo(this.$prompt_left)},Ke.prototype._HideComposition=function(){return this.$composition.detach()},Ke}(),t.fn.jqconsole=function(Ke,Q,pe,xe){return new H(this,Ke,Q,pe,xe)},t.fn.jqconsole.JQConsole=H,t.fn.jqconsole.Ansi=e}).call(JA)});var ZA=R(()=>{(function(t){"use strict";t(window.jQuery)})(function(t,e){"use strict";var r={beforeShow:y,move:y,change:y,show:y,hide:y,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},n=[],i=!!/msie/i.exec(window.navigator.userAgent),a=function(){function N(Y,G){return!!~(""+Y).indexOf(G)}var H=document.createElement("div"),z=H.style;return z.cssText="background-color:rgba(0,0,0,.5)",N(z.backgroundColor,"rgba")||N(z.backgroundColor,"hsla")}(),s=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),o=function(){var N="";if(i)for(var H=1;H<=6;H++)N+="<div class='sp-"+H+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",N,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function c(N,H,z,Y){for(var G=[],ie=0;ie<N.length;ie++){var fe=N[ie];if(fe){var Ne=tinycolor(fe),ye=Ne.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";ye+=tinycolor.equals(H,fe)?" sp-thumb-active":"";var He=Ne.toString(Y.preferredFormat||"rgb"),Re=a?"background-color:"+Ne.toRgbString():"filter:"+Ne.toFilter();G.push('<span title="'+He+'" data-color="'+Ne.toRgbString()+'" class="'+ye+'"><span class="sp-thumb-inner" style="'+Re+';" /></span>')}else{var Ze="sp-clear-display";G.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+Ze+'"></span>').attr("title",Y.noColorSelectedText)).html())}}return"<div class='sp-cf "+z+"'>"+G.join("")+"</div>"}function l(){for(var N=0;N<n.length;N++)n[N]&&n[N].hide()}function f(N,H){var z=t.extend({},r,N);return z.callbacks={move:I(z.move,H),change:I(z.change,H),show:I(z.show,H),hide:I(z.hide,H),beforeShow:I(z.beforeShow,H)},z}function g(N,H){var z=f(H,N),Y=z.flat,G=z.showSelectionPalette,ie=z.localStorageKey,fe=z.theme,Ne=z.callbacks,ye=F(Vr,10),He=!1,Re=!1,Ze=0,ce=0,tt=0,ft=0,pt=0,Ye=0,xt=0,Ut=0,Pt=0,tr=0,Ke=0,Q=1,pe=[],xe=[],_e={},nt=z.selectionPalette.slice(0),_t=z.maxSelectionSize,bt="sp-dragging",Se=null,Be=N.ownerDocument,jt=Be.body,qe=t(N),rt=!1,je=t(o,Be).addClass(fe),Ae=je.find(".sp-picker-container"),lt=je.find(".sp-color"),Nt=je.find(".sp-dragger"),ot=je.find(".sp-hue"),St=je.find(".sp-slider"),te=je.find(".sp-alpha-inner"),ee=je.find(".sp-alpha"),ge=je.find(".sp-alpha-handle"),De=je.find(".sp-input"),ut=je.find(".sp-palette"),q=je.find(".sp-initial"),re=je.find(".sp-cancel"),L=je.find(".sp-clear"),Ce=je.find(".sp-choose"),Ge=je.find(".sp-palette-toggle"),at=qe.is("input"),ht=at&&qe.attr("type")==="color"&&X(),Je=at&&!Y,Ee=Je?t(s).addClass(fe).addClass(z.className).addClass(z.replacerClassName):t([]),Kt=Je?Ee:qe,Ot=Ee.find(".sp-preview-inner"),kt=z.color||at&&qe.val(),Br=!1,Jt=z.preferredFormat,pi=!z.showButtons||z.clickoutFiresChange,hr=!kt,zr=z.allowEmpty&&!ht;function ki(){if(z.showPaletteOnly&&(z.showPalette=!0),Ge.text(z.showPaletteOnly?z.togglePaletteMoreText:z.togglePaletteLessText),z.palette){pe=z.palette.slice(0),xe=t.isArray(pe[0])?pe:[pe],_e={};for(var Rt=0;Rt<xe.length;Rt++)for(var qt=0;qt<xe[Rt].length;qt++){var lr=tinycolor(xe[Rt][qt]).toRgbString();_e[lr]=!0}}je.toggleClass("sp-flat",Y),je.toggleClass("sp-input-disabled",!z.showInput),je.toggleClass("sp-alpha-enabled",z.showAlpha),je.toggleClass("sp-clear-enabled",zr),je.toggleClass("sp-buttons-disabled",!z.showButtons),je.toggleClass("sp-palette-buttons-disabled",!z.togglePaletteOnly),je.toggleClass("sp-palette-disabled",!z.showPalette),je.toggleClass("sp-palette-only",z.showPaletteOnly),je.toggleClass("sp-initial-disabled",!z.showInitial),je.addClass(z.className).addClass(z.containerClassName),Vr()}function qr(){if(i&&je.find("*:not(input)").attr("unselectable","on"),ki(),Je&&qe.after(Ee).hide(),zr||L.hide(),Y)qe.after(je).hide();else{var Rt=z.appendTo==="parent"?qe.parent():t(z.appendTo);Rt.length!==1&&(Rt=t("body")),Rt.append(je)}en(),Kt.on("click.spectrum touchstart.spectrum",function(Gt){rt||Vt(),Gt.stopPropagation(),t(Gt.target).is("input")||Gt.preventDefault()}),(qe.is(":disabled")||z.disabled===!0)&&za(),je.click(x),De.change(jr),De.on("paste",function(){setTimeout(jr,1)}),De.keydown(function(Gt){Gt.keyCode==13&&jr()}),re.text(z.cancelText),re.on("click.spectrum",function(Gt){Gt.stopPropagation(),Gt.preventDefault(),da(),cn()}),L.attr("title",z.clearText),L.on("click.spectrum",function(Gt){Gt.stopPropagation(),Gt.preventDefault(),hr=!0,fa(),Y&&bn(!0)}),Ce.text(z.chooseText),Ce.on("click.spectrum",function(Gt){Gt.stopPropagation(),Gt.preventDefault(),i&&De.is(":focus")&&De.trigger("change"),mi()&&(bn(!0),cn())}),Ge.text(z.showPaletteOnly?z.togglePaletteMoreText:z.togglePaletteLessText),Ge.on("click.spectrum",function(Gt){Gt.stopPropagation(),Gt.preventDefault(),z.showPaletteOnly=!z.showPaletteOnly,!z.showPaletteOnly&&!Y&&je.css("left","-="+(Ae.outerWidth(!0)+5)),ki()}),A(ee,function(Gt,Ir,tn){Q=Gt/Ye,hr=!1,tn.shiftKey&&(Q=Math.round(Q*10)/10),fa()},Qt,Jr),A(ot,function(Gt,Ir){Pt=parseFloat(Ir/ft),hr=!1,z.showAlpha||(Q=1),fa()},Qt,Jr),A(lt,function(Gt,Ir,tn){if(!tn.shiftKey)Se=null;else if(!Se){var _n=tr*Ze,Pn=ce-Ke*ce,Zr=Math.abs(Gt-_n)>Math.abs(Ir-Pn);Se=Zr?"x":"y"}var vi=!Se||Se==="x",wn=!Se||Se==="y";vi&&(tr=parseFloat(Gt/Ze)),wn&&(Ke=parseFloat((ce-Ir)/ce)),hr=!1,z.showAlpha||(Q=1),fa()},Qt,Jr),kt?(fr(kt),Ga(),Jt=z.preferredFormat||tinycolor(kt).format,Yr(kt)):Ga(),Y&&Tr();function qt(Gt){return Gt.data&&Gt.data.ignore?(fr(t(Gt.target).closest(".sp-thumb-el").data("color")),fa()):(fr(t(Gt.target).closest(".sp-thumb-el").data("color")),fa(),z.hideAfterPaletteSelect?(bn(!0),cn()):bn()),!1}var lr=i?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ut.on(lr,".sp-thumb-el",qt),q.on(lr,".sp-thumb-el:nth-child(1)",{ignore:!0},qt)}function en(){if(ie&&window.localStorage){try{var Rt=window.localStorage[ie].split(",#");Rt.length>1&&(delete window.localStorage[ie],t.each(Rt,function(qt,lr){Yr(lr)}))}catch{}try{nt=window.localStorage[ie].split(";")}catch{}}}function Yr(Rt){if(G){var qt=tinycolor(Rt).toRgbString();if(!_e[qt]&&t.inArray(qt,nt)===-1)for(nt.push(qt);nt.length>_t;)nt.shift();if(ie&&window.localStorage)try{window.localStorage[ie]=nt.join(";")}catch{}}}function $t(){var Rt=[];if(z.showPalette)for(var qt=0;qt<nt.length;qt++){var lr=tinycolor(nt[qt]).toRgbString();_e[lr]||Rt.push(nt[qt])}return Rt.reverse().slice(0,z.maxSelectionSize)}function hi(){var Rt=gi(),qt=t.map(xe,function(lr,Gt){return c(lr,Rt,"sp-palette-row sp-palette-row-"+Gt,z)});en(),nt&&qt.push(c($t(),Rt,"sp-palette-row sp-palette-row-selection",z)),ut.html(qt.join(""))}function Ci(){if(z.showInitial){var Rt=Br,qt=gi();q.html(c([Rt,qt],qt,"sp-palette-row-initial",z))}}function Qt(){(ce<=0||Ze<=0||ft<=0)&&Vr(),Re=!0,je.addClass(bt),Se=null,qe.trigger("dragstart.spectrum",[gi()])}function Jr(){Re=!1,je.removeClass(bt),qe.trigger("dragstop.spectrum",[gi()])}function jr(){var Rt=De.val();if((Rt===null||Rt==="")&&zr)fr(null),fa(),bn();else{var qt=tinycolor(Rt);qt.isValid()?(fr(qt),fa(),bn()):De.addClass("sp-validation-error")}}function Vt(){He?cn():Tr()}function Tr(){var Rt=t.Event("beforeShow.spectrum");if(He){Vr();return}qe.trigger(Rt,[gi()]),!(Ne.beforeShow(gi())===!1||Rt.isDefaultPrevented())&&(l(),He=!0,t(Be).on("keydown.spectrum",un),t(Be).on("click.spectrum",Dn),t(window).on("resize.spectrum",ye),Ee.addClass("sp-active"),je.removeClass("sp-hidden"),Vr(),Ga(),Br=gi(),Ci(),Ne.show(Br),qe.trigger("show.spectrum",[Br]))}function un(Rt){Rt.keyCode===27&&cn()}function Dn(Rt){Rt.button!=2&&(Re||(pi?bn(!0):da(),cn()))}function cn(){!He||Y||(He=!1,t(Be).off("keydown.spectrum",un),t(Be).off("click.spectrum",Dn),t(window).off("resize.spectrum",ye),Ee.removeClass("sp-active"),je.addClass("sp-hidden"),Ne.hide(gi()),qe.trigger("hide.spectrum",[gi()]))}function da(){fr(Br,!0),bn(!0)}function fr(Rt,qt){if(tinycolor.equals(Rt,gi())){Ga();return}var lr,Gt;!Rt&&zr?hr=!0:(hr=!1,lr=tinycolor(Rt),Gt=lr.toHsv(),Pt=Gt.h%360/360,tr=Gt.s,Ke=Gt.v,Q=Gt.a),Ga(),lr&&lr.isValid()&&!qt&&(Jt=z.preferredFormat||lr.getFormat())}function gi(Rt){return Rt=Rt||{},zr&&hr?null:tinycolor.fromRatio({h:Pt,s:tr,v:Ke,a:Math.round(Q*1e3)/1e3},{format:Rt.format||Jt})}function mi(){return!De.hasClass("sp-validation-error")}function fa(){Ga(),Ne.move(gi()),qe.trigger("move.spectrum",[gi()])}function Ga(){De.removeClass("sp-validation-error"),Xs();var Rt=tinycolor.fromRatio({h:Pt,s:1,v:1});lt.css("background-color",Rt.toHexString());var qt=Jt;Q<1&&!(Q===0&&qt==="name")&&(qt==="hex"||qt==="hex3"||qt==="hex6"||qt==="name")&&(qt="rgb");var lr=gi({format:qt}),Gt="";if(Ot.removeClass("sp-clear-display"),Ot.css("background-color","transparent"),!lr&&zr)Ot.addClass("sp-clear-display");else{var Ir=lr.toHexString(),tn=lr.toRgbString();if(a||lr.alpha===1?Ot.css("background-color",tn):(Ot.css("background-color","transparent"),Ot.css("filter",lr.toFilter())),z.showAlpha){var _n=lr.toRgb();_n.a=0;var Pn=tinycolor(_n).toRgbString(),Zr="linear-gradient(left, "+Pn+", "+Ir+")";i?te.css("filter",tinycolor(Pn).toFilter({gradientType:1},Ir)):(te.css("background","-webkit-"+Zr),te.css("background","-moz-"+Zr),te.css("background","-ms-"+Zr),te.css("background","linear-gradient(to right, "+Pn+", "+Ir+")"))}Gt=lr.toString(qt)}z.showInput&&De.val(Gt),z.showPalette&&hi(),Ci()}function Xs(){var Rt=tr,qt=Ke;if(zr&&hr)ge.hide(),St.hide(),Nt.hide();else{ge.show(),St.show(),Nt.show();var lr=Rt*Ze,Gt=ce-qt*ce;lr=Math.max(-tt,Math.min(Ze-tt,lr-tt)),Gt=Math.max(-tt,Math.min(ce-tt,Gt-tt)),Nt.css({top:Gt+"px",left:lr+"px"});var Ir=Q*Ye;ge.css({left:Ir-xt/2+"px"});var tn=Pt*ft;St.css({top:tn-Ut+"px"})}}function bn(Rt){var qt=gi(),lr="",Gt=!tinycolor.equals(qt,Br);qt&&(lr=qt.toString(Jt),Yr(qt)),at&&qe.val(lr),Rt&&Gt&&(Ne.change(qt),qe.trigger("change",[qt]))}function Vr(){He&&(Ze=lt.width(),ce=lt.height(),tt=Nt.height(),pt=ot.width(),ft=ot.height(),Ut=St.height(),Ye=ee.width(),xt=ge.width(),Y||(je.css("position","absolute"),z.offset?je.offset(z.offset):je.offset(m(je,Kt))),Xs(),z.showPalette&&hi(),qe.trigger("reflow.spectrum"))}function Qr(){qe.show(),Kt.off("click.spectrum touchstart.spectrum"),je.remove(),Ee.remove(),n[On.id]=null}function Ei(Rt,qt){if(Rt===e)return t.extend({},z);if(qt===e)return z[Rt];z[Rt]=qt,Rt==="preferredFormat"&&(Jt=z.preferredFormat),ki()}function os(){rt=!1,qe.attr("disabled",!1),Kt.removeClass("sp-disabled")}function za(){cn(),rt=!0,qe.attr("disabled",!0),Kt.addClass("sp-disabled")}function or(Rt){z.offset=Rt,Vr()}qr();var On={show:Tr,hide:cn,toggle:Vt,reflow:Vr,option:Ei,enable:os,disable:za,offset:or,set:function(Rt){fr(Rt),bn()},get:gi,destroy:Qr,container:je};return On.id=n.push(On)-1,On}function m(N,H){var z=0,Y=N.outerWidth(),G=N.outerHeight(),ie=H.outerHeight(),fe=N[0].ownerDocument,Ne=fe.documentElement,ye=Ne.clientWidth+t(fe).scrollLeft(),He=Ne.clientHeight+t(fe).scrollTop(),Re=H.offset(),Ze=Re.left,ce=Re.top;return ce+=ie,Ze-=Math.min(Ze,Ze+Y>ye&&ye>Y?Math.abs(Ze+Y-ye):0),ce-=Math.min(ce,ce+G>He&&He>G?Math.abs(G+ie-z):z),{top:ce,bottom:Re.bottom,left:Ze,right:Re.right,width:Re.width,height:Re.height}}function y(){}function x(N){N.stopPropagation()}function I(N,H){var z=Array.prototype.slice,Y=z.call(arguments,2);return function(){return N.apply(H,Y.concat(z.call(arguments)))}}function A(N,H,z,Y){H=H||function(){},z=z||function(){},Y=Y||function(){};var G=document,ie=!1,fe={},Ne=0,ye=0,He="ontouchstart"in window,Re={};Re.selectstart=Ze,Re.dragstart=Ze,Re["touchmove mousemove"]=ce,Re["touchend mouseup"]=ft;function Ze(pt){pt.stopPropagation&&pt.stopPropagation(),pt.preventDefault&&pt.preventDefault(),pt.returnValue=!1}function ce(pt){if(ie){if(i&&G.documentMode<9&&!pt.button)return ft();var Ye=pt.originalEvent&&pt.originalEvent.touches&&pt.originalEvent.touches[0],xt=Ye&&Ye.pageX||pt.pageX,Ut=Ye&&Ye.pageY||pt.pageY,Pt=Math.max(0,Math.min(xt-fe.left,ye)),tr=Math.max(0,Math.min(Ut-fe.top,Ne));He&&Ze(pt),H.apply(N,[Pt,tr,pt])}}function tt(pt){var Ye=pt.which?pt.which==3:pt.button==2;!Ye&&!ie&&z.apply(N,arguments)!==!1&&(ie=!0,Ne=t(N).height(),ye=t(N).width(),fe=t(N).offset(),t(G).on(Re),t(G.body).addClass("sp-dragging"),ce(pt),Ze(pt))}function ft(){ie&&(t(G).off(Re),t(G.body).removeClass("sp-dragging"),setTimeout(function(){Y.apply(N,arguments)},0)),ie=!1}t(N).on("touchstart mousedown",tt)}function F(N,H,z){var Y;return function(){var G=this,ie=arguments,fe=function(){Y=null,N.apply(G,ie)};z&&clearTimeout(Y),(z||!Y)&&(Y=setTimeout(fe,H))}}function X(){return t.fn.spectrum.inputTypeColorSupport()}var de="spectrum.id";t.fn.spectrum=function(N,H){if(typeof N=="string"){var z=this,Y=Array.prototype.slice.call(arguments,1);return this.each(function(){var G=n[t(this).data(de)];if(G){var ie=G[N];if(!ie)throw new Error("Spectrum: no such method: '"+N+"'");N=="get"?z=G.get():N=="container"?z=G.container:N=="option"?z=G.option.apply(G,Y):N=="destroy"?(G.destroy(),t(this).removeData(de)):ie.apply(G,Y)}}),z}return this.spectrum("destroy").each(function(){var G=t.extend({},t(this).data(),N),ie=g(this,G);t(this).data(de,ie.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=A,t.fn.spectrum.defaults=r,t.fn.spectrum.inputTypeColorSupport=function N(){if(typeof N._cachedResult>"u"){var H=t("<input type='color'/>")[0];N._cachedResult=H.type==="color"&&H.value!==""}return N._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var N=t("input[type=color]");N.length&&!X()&&N.spectrum({preferredFormat:"hex6"})},function(){var N=/^[\s,#]+/,H=/\s+$/,z=0,Y=Math,G=Y.round,ie=Y.min,fe=Y.max,Ne=Y.random,ye=function(q,re){if(q=q||"",re=re||{},q instanceof ye)return q;if(!(this instanceof ye))return new ye(q,re);var L=He(q);this._originalInput=q,this._r=L.r,this._g=L.g,this._b=L.b,this._a=L.a,this._roundA=G(1e3*this._a)/1e3,this._format=re.format||L.format,this._gradientType=re.gradientType,this._r<1&&(this._r=G(this._r)),this._g<1&&(this._g=G(this._g)),this._b<1&&(this._b=G(this._b)),this._ok=L.ok,this._tc_id=z++};ye.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var q=this.toRgb();return(q.r*299+q.g*587+q.b*114)/1e3},setAlpha:function(q){return this._a=rt(q),this._roundA=G(1e3*this._a)/1e3,this},toHsv:function(){var q=tt(this._r,this._g,this._b);return{h:q.h*360,s:q.s,v:q.v,a:this._a}},toHsvString:function(){var q=tt(this._r,this._g,this._b),re=G(q.h*360),L=G(q.s*100),Ce=G(q.v*100);return this._a==1?"hsv("+re+", "+L+"%, "+Ce+"%)":"hsva("+re+", "+L+"%, "+Ce+"%, "+this._roundA+")"},toHsl:function(){var q=Ze(this._r,this._g,this._b);return{h:q.h*360,s:q.s,l:q.l,a:this._a}},toHslString:function(){var q=Ze(this._r,this._g,this._b),re=G(q.h*360),L=G(q.s*100),Ce=G(q.l*100);return this._a==1?"hsl("+re+", "+L+"%, "+Ce+"%)":"hsla("+re+", "+L+"%, "+Ce+"%, "+this._roundA+")"},toHex:function(q){return pt(this._r,this._g,this._b,q)},toHexString:function(q){return"#"+this.toHex(q)},toHex8:function(){return Ye(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:G(this._r),g:G(this._g),b:G(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+G(this._r)+", "+G(this._g)+", "+G(this._b)+")":"rgba("+G(this._r)+", "+G(this._g)+", "+G(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:G(je(this._r,255)*100)+"%",g:G(je(this._g,255)*100)+"%",b:G(je(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+G(je(this._r,255)*100)+"%, "+G(je(this._g,255)*100)+"%, "+G(je(this._b,255)*100)+"%)":"rgba("+G(je(this._r,255)*100)+"%, "+G(je(this._g,255)*100)+"%, "+G(je(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:jt[pt(this._r,this._g,this._b,!0)]||!1},toFilter:function(q){var re="#"+Ye(this._r,this._g,this._b,this._a),L=re,Ce=this._gradientType?"GradientType = 1, ":"";if(q){var Ge=ye(q);L=Ge.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+Ce+"startColorstr="+re+",endColorstr="+L+")"},toString:function(q){var re=!!q;q=q||this._format;var L=!1,Ce=this._a<1&&this._a>=0,Ge=!re&&Ce&&(q==="hex"||q==="hex6"||q==="hex3"||q==="name");return Ge?q==="name"&&this._a===0?this.toName():this.toRgbString():(q==="rgb"&&(L=this.toRgbString()),q==="prgb"&&(L=this.toPercentageRgbString()),(q==="hex"||q==="hex6")&&(L=this.toHexString()),q==="hex3"&&(L=this.toHexString(!0)),q==="hex8"&&(L=this.toHex8String()),q==="name"&&(L=this.toName()),q==="hsl"&&(L=this.toHslString()),q==="hsv"&&(L=this.toHsvString()),L||this.toHexString())},_applyModification:function(q,re){var L=q.apply(null,[this].concat([].slice.call(re)));return this._r=L._r,this._g=L._g,this._b=L._b,this.setAlpha(L._a),this},lighten:function(){return this._applyModification(tr,arguments)},brighten:function(){return this._applyModification(Ke,arguments)},darken:function(){return this._applyModification(Q,arguments)},desaturate:function(){return this._applyModification(xt,arguments)},saturate:function(){return this._applyModification(Ut,arguments)},greyscale:function(){return this._applyModification(Pt,arguments)},spin:function(){return this._applyModification(pe,arguments)},_applyCombination:function(q,re){return q.apply(null,[this].concat([].slice.call(re)))},analogous:function(){return this._applyCombination(bt,arguments)},complement:function(){return this._applyCombination(xe,arguments)},monochromatic:function(){return this._applyCombination(Se,arguments)},splitcomplement:function(){return this._applyCombination(_t,arguments)},triad:function(){return this._applyCombination(_e,arguments)},tetrad:function(){return this._applyCombination(nt,arguments)}},ye.fromRatio=function(q,re){if(typeof q=="object"){var L={};for(var Ce in q)q.hasOwnProperty(Ce)&&(Ce==="a"?L[Ce]=q[Ce]:L[Ce]=te(q[Ce]));q=L}return ye(q,re)};function He(q){var re={r:0,g:0,b:0},L=1,Ce=!1,Ge=!1;return typeof q=="string"&&(q=ut(q)),typeof q=="object"&&(q.hasOwnProperty("r")&&q.hasOwnProperty("g")&&q.hasOwnProperty("b")?(re=Re(q.r,q.g,q.b),Ce=!0,Ge=String(q.r).substr(-1)==="%"?"prgb":"rgb"):q.hasOwnProperty("h")&&q.hasOwnProperty("s")&&q.hasOwnProperty("v")?(q.s=te(q.s),q.v=te(q.v),re=ft(q.h,q.s,q.v),Ce=!0,Ge="hsv"):q.hasOwnProperty("h")&&q.hasOwnProperty("s")&&q.hasOwnProperty("l")&&(q.s=te(q.s),q.l=te(q.l),re=ce(q.h,q.s,q.l),Ce=!0,Ge="hsl"),q.hasOwnProperty("a")&&(L=q.a)),L=rt(L),{ok:Ce,format:q.format||Ge,r:ie(255,fe(re.r,0)),g:ie(255,fe(re.g,0)),b:ie(255,fe(re.b,0)),a:L}}function Re(q,re,L){return{r:je(q,255)*255,g:je(re,255)*255,b:je(L,255)*255}}function Ze(q,re,L){q=je(q,255),re=je(re,255),L=je(L,255);var Ce=fe(q,re,L),Ge=ie(q,re,L),at,ht,Je=(Ce+Ge)/2;if(Ce==Ge)at=ht=0;else{var Ee=Ce-Ge;switch(ht=Je>.5?Ee/(2-Ce-Ge):Ee/(Ce+Ge),Ce){case q:at=(re-L)/Ee+(re<L?6:0);break;case re:at=(L-q)/Ee+2;break;case L:at=(q-re)/Ee+4;break}at/=6}return{h:at,s:ht,l:Je}}function ce(q,re,L){var Ce,Ge,at;q=je(q,360),re=je(re,100),L=je(L,100);function ht(Kt,Ot,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?Kt+(Ot-Kt)*6*kt:kt<1/2?Ot:kt<2/3?Kt+(Ot-Kt)*(2/3-kt)*6:Kt}if(re===0)Ce=Ge=at=L;else{var Je=L<.5?L*(1+re):L+re-L*re,Ee=2*L-Je;Ce=ht(Ee,Je,q+1/3),Ge=ht(Ee,Je,q),at=ht(Ee,Je,q-1/3)}return{r:Ce*255,g:Ge*255,b:at*255}}function tt(q,re,L){q=je(q,255),re=je(re,255),L=je(L,255);var Ce=fe(q,re,L),Ge=ie(q,re,L),at,ht,Je=Ce,Ee=Ce-Ge;if(ht=Ce===0?0:Ee/Ce,Ce==Ge)at=0;else{switch(Ce){case q:at=(re-L)/Ee+(re<L?6:0);break;case re:at=(L-q)/Ee+2;break;case L:at=(q-re)/Ee+4;break}at/=6}return{h:at,s:ht,v:Je}}function ft(q,re,L){q=je(q,360)*6,re=je(re,100),L=je(L,100);var Ce=Y.floor(q),Ge=q-Ce,at=L*(1-re),ht=L*(1-Ge*re),Je=L*(1-(1-Ge)*re),Ee=Ce%6,Kt=[L,ht,at,at,Je,L][Ee],Ot=[Je,L,L,ht,at,at][Ee],kt=[at,at,Je,L,L,ht][Ee];return{r:Kt*255,g:Ot*255,b:kt*255}}function pt(q,re,L,Ce){var Ge=[St(G(q).toString(16)),St(G(re).toString(16)),St(G(L).toString(16))];return Ce&&Ge[0].charAt(0)==Ge[0].charAt(1)&&Ge[1].charAt(0)==Ge[1].charAt(1)&&Ge[2].charAt(0)==Ge[2].charAt(1)?Ge[0].charAt(0)+Ge[1].charAt(0)+Ge[2].charAt(0):Ge.join("")}function Ye(q,re,L,Ce){var Ge=[St(ee(Ce)),St(G(q).toString(16)),St(G(re).toString(16)),St(G(L).toString(16))];return Ge.join("")}ye.equals=function(q,re){return!q||!re?!1:ye(q).toRgbString()==ye(re).toRgbString()},ye.random=function(){return ye.fromRatio({r:Ne(),g:Ne(),b:Ne()})};function xt(q,re){re=re===0?0:re||10;var L=ye(q).toHsl();return L.s-=re/100,L.s=Ae(L.s),ye(L)}function Ut(q,re){re=re===0?0:re||10;var L=ye(q).toHsl();return L.s+=re/100,L.s=Ae(L.s),ye(L)}function Pt(q){return ye(q).desaturate(100)}function tr(q,re){re=re===0?0:re||10;var L=ye(q).toHsl();return L.l+=re/100,L.l=Ae(L.l),ye(L)}function Ke(q,re){re=re===0?0:re||10;var L=ye(q).toRgb();return L.r=fe(0,ie(255,L.r-G(255*-(re/100)))),L.g=fe(0,ie(255,L.g-G(255*-(re/100)))),L.b=fe(0,ie(255,L.b-G(255*-(re/100)))),ye(L)}function Q(q,re){re=re===0?0:re||10;var L=ye(q).toHsl();return L.l-=re/100,L.l=Ae(L.l),ye(L)}function pe(q,re){var L=ye(q).toHsl(),Ce=(G(L.h)+re)%360;return L.h=Ce<0?360+Ce:Ce,ye(L)}function xe(q){var re=ye(q).toHsl();return re.h=(re.h+180)%360,ye(re)}function _e(q){var re=ye(q).toHsl(),L=re.h;return[ye(q),ye({h:(L+120)%360,s:re.s,l:re.l}),ye({h:(L+240)%360,s:re.s,l:re.l})]}function nt(q){var re=ye(q).toHsl(),L=re.h;return[ye(q),ye({h:(L+90)%360,s:re.s,l:re.l}),ye({h:(L+180)%360,s:re.s,l:re.l}),ye({h:(L+270)%360,s:re.s,l:re.l})]}function _t(q){var re=ye(q).toHsl(),L=re.h;return[ye(q),ye({h:(L+72)%360,s:re.s,l:re.l}),ye({h:(L+216)%360,s:re.s,l:re.l})]}function bt(q,re,L){re=re||6,L=L||30;var Ce=ye(q).toHsl(),Ge=360/L,at=[ye(q)];for(Ce.h=(Ce.h-(Ge*re>>1)+720)%360;--re;)Ce.h=(Ce.h+Ge)%360,at.push(ye(Ce));return at}function Se(q,re){re=re||6;for(var L=ye(q).toHsv(),Ce=L.h,Ge=L.s,at=L.v,ht=[],Je=1/re;re--;)ht.push(ye({h:Ce,s:Ge,v:at})),at=(at+Je)%1;return ht}ye.mix=function(q,re,L){L=L===0?0:L||50;var Ce=ye(q).toRgb(),Ge=ye(re).toRgb(),at=L/100,ht=at*2-1,Je=Ge.a-Ce.a,Ee;ht*Je==-1?Ee=ht:Ee=(ht+Je)/(1+ht*Je),Ee=(Ee+1)/2;var Kt=1-Ee,Ot={r:Ge.r*Ee+Ce.r*Kt,g:Ge.g*Ee+Ce.g*Kt,b:Ge.b*Ee+Ce.b*Kt,a:Ge.a*at+Ce.a*(1-at)};return ye(Ot)},ye.readability=function(q,re){var L=ye(q),Ce=ye(re),Ge=L.toRgb(),at=Ce.toRgb(),ht=L.getBrightness(),Je=Ce.getBrightness(),Ee=Math.max(Ge.r,at.r)-Math.min(Ge.r,at.r)+Math.max(Ge.g,at.g)-Math.min(Ge.g,at.g)+Math.max(Ge.b,at.b)-Math.min(Ge.b,at.b);return{brightness:Math.abs(ht-Je),color:Ee}},ye.isReadable=function(q,re){var L=ye.readability(q,re);return L.brightness>125&&L.color>500},ye.mostReadable=function(q,re){for(var L=null,Ce=0,Ge=!1,at=0;at<re.length;at++){var ht=ye.readability(q,re[at]),Je=ht.brightness>125&&ht.color>500,Ee=3*(ht.brightness/125)+ht.color/500;(Je&&!Ge||Je&&Ge&&Ee>Ce||!Je&&!Ge&&Ee>Ce)&&(Ge=Je,Ce=Ee,L=ye(re[at]))}return L};var Be=ye.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},jt=ye.hexNames=qe(Be);function qe(q){var re={};for(var L in q)q.hasOwnProperty(L)&&(re[q[L]]=L);return re}function rt(q){return q=parseFloat(q),(isNaN(q)||q<0||q>1)&&(q=1),q}function je(q,re){Nt(q)&&(q="100%");var L=ot(q);return q=ie(re,fe(0,parseFloat(q))),L&&(q=parseInt(q*re,10)/100),Y.abs(q-re)<1e-6?1:q%re/parseFloat(re)}function Ae(q){return ie(1,fe(0,q))}function lt(q){return parseInt(q,16)}function Nt(q){return typeof q=="string"&&q.indexOf(".")!=-1&&parseFloat(q)===1}function ot(q){return typeof q=="string"&&q.indexOf("%")!=-1}function St(q){return q.length==1?"0"+q:""+q}function te(q){return q<=1&&(q=q*100+"%"),q}function ee(q){return Math.round(parseFloat(q)*255).toString(16)}function ge(q){return lt(q)/255}var De=function(){var q="[-\\+]?\\d+%?",re="[-\\+]?\\d*\\.\\d+%?",L="(?:"+re+")|(?:"+q+")",Ce="[\\s|\\(]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")\\s*\\)?",Ge="[\\s|\\(]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")\\s*\\)?";return{rgb:new RegExp("rgb"+Ce),rgba:new RegExp("rgba"+Ge),hsl:new RegExp("hsl"+Ce),hsla:new RegExp("hsla"+Ge),hsv:new RegExp("hsv"+Ce),hsva:new RegExp("hsva"+Ge),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ut(q){q=q.replace(N,"").replace(H,"").toLowerCase();var re=!1;if(Be[q])q=Be[q],re=!0;else if(q=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var L;return(L=De.rgb.exec(q))?{r:L[1],g:L[2],b:L[3]}:(L=De.rgba.exec(q))?{r:L[1],g:L[2],b:L[3],a:L[4]}:(L=De.hsl.exec(q))?{h:L[1],s:L[2],l:L[3]}:(L=De.hsla.exec(q))?{h:L[1],s:L[2],l:L[3],a:L[4]}:(L=De.hsv.exec(q))?{h:L[1],s:L[2],v:L[3]}:(L=De.hsva.exec(q))?{h:L[1],s:L[2],v:L[3],a:L[4]}:(L=De.hex8.exec(q))?{a:ge(L[1]),r:lt(L[2]),g:lt(L[3]),b:lt(L[4]),format:re?"name":"hex8"}:(L=De.hex6.exec(q))?{r:lt(L[1]),g:lt(L[2]),b:lt(L[3]),format:re?"name":"hex"}:(L=De.hex3.exec(q))?{r:lt(L[1]+""+L[1]),g:lt(L[2]+""+L[2]),b:lt(L[3]+""+L[3]),format:re?"name":"hex"}:!1}window.tinycolor=ye}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})})});var e1=R(()=>{function np(t){var e=t&&t.e?t.e:null,r=t?!!t.guess:!0,n=new np.implementation,i=n.run(e);return r?n.guessFunctions(i):i}np.implementation=function(){};np.implementation.prototype={run:function(t){t=t||function(){try{var r=__undef__<<1}catch(n){return n}}();var e=this._mode||this.mode(t);return e==="other"?this.other(arguments.callee):this[e](t)},mode:function(t){return t.arguments?this._mode="chrome":window.opera&&t.stacktrace?this._mode="opera10":t.stack?this._mode="firefox":window.opera&&!("stacktrace"in t)?this._mode="opera":this._mode="other"},instrumentFunction:function(t,e,r){t=t||window,t["_old"+e]=t[e],t[e]=function(){return r.call(this,np()),t["_old"+e].apply(this,arguments)},t[e]._instrumented=!0},deinstrumentFunction:function(t,e){t[e].constructor===Function&&t[e]._instrumented&&t["_old"+e].constructor===Function&&(t[e]=t["_old"+e])},chrome:function(t){return t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@").split(`
`)},firefox:function(t){return t.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split(`
`)},opera10:function(t){var e=t.stacktrace,r=e.split(`
`),n="{anonymous}",i=/.*line (\d+), column (\d+) in ((<anonymous function\:?\s*(\S+))|([^\(]+)\([^\)]*\))(?: in )?(.*)\s*$/i,a,s,o;for(a=2,s=0,o=r.length;a<o-2;a++)if(i.test(r[a])){var c=RegExp.$6+":"+RegExp.$1+":"+RegExp.$2,l=RegExp.$3;l=l.replace(/<anonymous function\:?\s?(\S+)?>/g,n),r[s++]=l+"@"+c}return r.splice(s,r.length-s),r},opera:function(t){var e=t.message.split(`
`),r="{anonymous}",n=/Line\s+(\d+).*script\s+(http\S+)(?:.*in\s+function\s+(\S+))?/i,i,a,s;for(i=4,a=0,s=e.length;i<s;i+=2)n.test(e[i])&&(e[a++]=(RegExp.$3?RegExp.$3+"()@"+RegExp.$2+RegExp.$1:r+"()@"+RegExp.$2+":"+RegExp.$1)+" -- "+e[i+1].replace(/^\s+/,""));return e.splice(a,e.length-a),e},other:function(t){for(var e="{anonymous}",r=/function\s*([\w\-$]+)?\s*\(/i,n=[],i=0,a,s,o=10;t&&n.length<o;)a=r.test(t.toString())&&RegExp.$1||e,s=Array.prototype.slice.call(t.arguments),n[i++]=a+"("+this.stringifyArguments(s)+")",t=t.caller;return n},stringifyArguments:function(t){for(var e=0;e<t.length;++e){var r=t[e];r===void 0?t[e]="undefined":r===null?t[e]="null":r.constructor&&(r.constructor===Array?r.length<3?t[e]="["+this.stringifyArguments(r)+"]":t[e]="["+this.stringifyArguments(Array.prototype.slice.call(r,0,1))+"..."+this.stringifyArguments(Array.prototype.slice.call(r,-1))+"]":r.constructor===Object?t[e]="#object":r.constructor===Function?t[e]="#function":r.constructor===String&&(t[e]='"'+r+'"'))}return t.join(",")},sourceCache:{},ajax:function(t){var e=this.createXMLHTTPObject();if(e)return e.open("GET",t,!1),e.setRequestHeader("User-Agent","XMLHTTP/1.0"),e.send(""),e.responseText},createXMLHTTPObject:function(){for(var t,e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],r=0;r<e.length;r++)try{return t=e[r](),this.createXMLHTTPObject=e[r],t}catch{}},isSameDomain:function(t){return t.indexOf(location.hostname)!==-1},getSource:function(t){return t in this.sourceCache||(this.sourceCache[t]=this.ajax(t).split(`
`)),this.sourceCache[t]},guessFunctions:function(t){for(var e=0;e<t.length;++e){var r=/\{anonymous\}\(.*\)@(\w+:\/\/([\-\w\.]+)+(:\d+)?[^:]+):(\d+):?(\d+)?/,n=t[e],i=r.exec(n);if(i){var a=i[1],s=i[4];if(a&&this.isSameDomain(a)&&s){var o=this.guessFunctionName(a,s);t[e]=n.replace("{anonymous}",o)}}}return t},guessFunctionName:function(t,e){try{return this.guessFunctionNameFromLines(e,this.getSource(t))}catch(r){return"getSource failed with url: "+t+", exception: "+r.toString()}},guessFunctionNameFromLines:function(t,e){for(var r=/function ([^(]*)\(([^)]*)\)/,n=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,i="",a=10,s=0;s<a;++s)if(i=e[t-s]+i,i!==void 0){var o=n.exec(i);if(o&&o[1])return o[1];if(o=r.exec(i),o&&o[1])return o[1]}return"(?)"}};window.printStackTrace=np});var t1=R(()=>{window.jslint=function(){"use strict";function e(){return Object.create(null)}function r(D,j,ae){j.forEach(function(Fe){D[Fe]=ae})}var n={bitwise:!0,browser:["Audio","clearInterval","clearTimeout","document","event","FormData","frames","history","Image","localStorage","location","name","navigator","Option","parent","screen","sessionStorage","setInterval","setTimeout","Storage","XMLHttpRequest"],couch:["emit","getRow","isArray","log","provides","registerType","require","send","start","sum","toJSON"],devel:["alert","confirm","console","Debug","opera","prompt","WSH"],es6:["ArrayBuffer","DataView","Float32Array","Float64Array","Generator","GeneratorFunction","Int8Array","Int16Array","Int32Array","Intl","Map","Promise","Proxy","Reflect","Set","Symbol","System","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","WeakSet"],eval:!0,for:!0,fudge:!0,maxerr:1e4,maxlen:1e4,node:["Buffer","clearImmediate","clearInterval","clearTimeout","console","exports","global","module","process","require","setImmediate","setInterval","setTimeout","__dirname","__filename"],this:!0,white:!0},i={"!=":!0,"!==":!0,"%":!0,"%=":!0,"^":!0,"^=":!0,"&":!0,"&=":!0,"&&":!0,"*":!0,"*=":!0,"-=":!0,"+=":!0,"=":!0,"=>":!0,"==":!0,"===":!0,"|":!0,"|=":!0,"||":!0,"<":!0,"<=":!0,"<<":!0,"<<=":!0,">":!0,">=":!0,">>":!0,">>=":!0,">>>":!0,">>>=":!0},a={"~":!0,"^":!0,"^=":!0,"&":!0,"&=":!0,"|":!0,"|=":!0,"<<":!0,"<<=":!0,">>":!0,">>=":!0,">>>":!0,">>>=":!0},s={"(":")","[":"]","{":"}","${":"}"},o={"!=":!0,"!==":!0,"==":!0,"===":!0,"<":!0,"<=":!0,">":!0,">=":!0},c=["Array","Boolean","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Error","EvalError","Function","isFinite","isNaN","JSON","Math","Number","Object","parseInt","parseFloat","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError"],l={and:"The '&&' subexpression should be wrapped in parens.",bad_assignment_a:"Bad assignment to '{a}'.",bad_character_number_a:"Bad character code: '{a}'",bad_get:"A get function takes no parameters.",bad_module_name_a:"Bad module name '{a}'.",bad_option_a:"Bad option '{a}'.",bad_property_a:"Bad property name '{a}'.",bad_set:"A set function takes one parameter.",duplicate_a:"Duplicate '{a}'.",empty_block:"Empty block.",es6:"Unexpected ES6 feature.",expected_a_at_b_c:"Expected '{a}' at column {b}, not column {c}.",expected_a_b:"Expected '{a}' and instead saw '{b}'.",expected_a_b_from_c_d:"Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.",expected_a_before_b:"Expected '{a}' before '{b}'.",expected_digits_after_a:"Expected digits after '{a}'.",expected_four_digits:"Expected four digits after '\\u'.",expected_identifier_a:"Expected an identifier and instead saw '{a}'.",expected_line_break_a_b:"Expected a line break between '{a}' and '{b}'.",expected_regexp_factor_a:"Expected a regexp factor and instead saw '{a}'.",expected_space_a_b:"Expected one space between '{a}' and '{b}'.",expected_string_a:"Expected a string and instead saw '{a}'.",expected_type_string_a:"Expected a type string and instead saw '{a}'.",function_in_loop:"Don't make functions within a loop.",infix_in:"Unexpected 'in'. Compare with undefined, or use the hasOwnProperty method instead.",isNaN:"Use the isNaN function to compare with NaN.",label_a:"'{a}' is a statement label.",misplaced_a:"Place '{a}' at the outermost level.",misplaced_directive_a:"Place the '/*{a}*/' directive before the first statement.",naked_block:"Naked block.",nested_comment:"Nested comment.",not_label_a:"'{a}' is not a label.",out_of_scope_a:"'{a}' is out of scope.",redefinition_a_b:"Redefinition of '{a}' from line {b}.",reserved_a:"Reserved name '{a}'.",slash_equal:"A regular expression literal can be confused with '/='.",stopping:"Stopping.",subscript_a:"['{a}'] is better written in dot notation.",todo_comment:"Unexpected TODO comment.",too_long:"Line too long.",too_many:"Too many warnings.",unclosed_comment:"Unclosed comment.",unclosed_mega:"Unclosed mega literal.",unclosed_string:"Unclosed string.",undeclared_a:"Undeclared '{a}'.",unexpected_a:"Unexpected '{a}'.",unexpected_a_after_b:"Unexpected '{a}' after '{b}'.",unexpected_at_top_level_a:"Unexpected '{a}' at top level.",unexpected_char_a:"Unexpected character '{a}'.",unexpected_comment:"Unexpected comment.",unexpected_directive_a:"When using modules, don't use directive '/*{a}'.",unexpected_expression_a:"Unexpected expression '{a}' in statement position.",unexpected_label_a:"Unexpected label '{a}'.",unexpected_quotes_a:"Quotes are not needed around '{a}'.",unexpected_parens:"Don't wrap function literals in parens.",unexpected_space_a_b:"Unexpected space between '{a}' and '{b}'.",unexpected_statement_a:"Unexpected statement '{a}' in expression position.",unexpected_trailing_space:"Unexpected trailing space.",unexpected_typeof_a:"Unexpected 'typeof'. Use '===' to compare directly with {a}.",uninitialized_a:"Uninitialized '{a}'.",unreachable_a:"Unreachable '{a}'.",unregistered_property_a:"Unregistered property name '{a}'.",unsafe:"Unsafe character '{a}'.",unused_a:"Unused '{a}'.",use_spaces:"Use spaces, not tabs.",var_loop:"Don't declare variables in a loop.",var_switch:"Don't declare variables in a switch.",weird_condition_a:"Weird condition '{a}'.",weird_expression_a:"Weird expression '{a}'.",weird_loop:"Weird loop.",weird_relation_a:"Weird relation '{a}'.",wrap_immediate:"Wrap an immediate function invocation in parentheses to assist the reader in understanding that the expression is the result of a function, and not the function itself.",wrap_regexp:"Wrap this regexp in parens to avoid confusion."},f=/\{([^{}]*)\}/g,g=/\n|\r\n?/,m=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,y=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/,x=/^_|\$|Sync$|_$/,I=/[a-zA-Z0-9]/,A=/\*\//,F=/\/\*/,X=/\/\*|\/$/,de=/\b(?:todo|TO\s?DO|HACK)\b/,N=/\t/g,H=/^(jslint|property|global)\s*(.*)$/,z=/^([a-zA-Z$_][a-zA-Z0-9$_]*)\s*(?::\s*(true|false|[0-9]+)\s*)?(?:,\s*)?(.*)$/,Y=/^((\s+)|([a-zA-Z_$][a-zA-Z0-9_$]*)|[(){}\[\]\?,:;'"~`]|=(?:==?|>)?|\.+|\/[=*\/]?|\*[\/=]?|\+(?:=|\++)?|-(?:=|-+)?|[\^%]=?|&[&=]?|\|[\|=]?|>{1,3}=?|<<?=?|!={0,2}|(0|[1-9][0-9]*))(.*)$/,G=/^([0-9]+)(.*)$/,ie=/^([0-9a-fA-F]+)(.*)$/,fe=/^([0-7]+)(.*)$/,Ne=/^([01]+)(.*)$/,ye=/`|\$\{/,He=/^(.*)\?([:.]*)$/,Re=/\.$/,Ze=/^-?\d+(?:\.\d*)?(?:e[\-+]?\d+)?$/i;function ce(D){return D>="a"&&D<="z\uFFFF"||D>="A"&&D<="Z\uFFFF"}function tt(D,j){return D.replace(f,function(ae,Fe){var ze=j[Fe];return ze!==void 0?ze:ae})}var ft="anonymous",pt,Ye,xt,Ut,Pt,tr,Ke,Q,pe,xe,_e,nt,_t,bt,Se,Be,jt,qe,rt,je,Ae,lt,Nt,ot,St,te,ee;function ge(D){return D===void 0&&(D=Se),D.id==="(string)"||D.id==="(number)"?String(D.value):D.id}function De(D){return D===void 0&&(D=Se),D.line+Ke}function ut(D){return D===void 0&&(D=Se),D.from+Ke}function q(D,j,ae,Fe,ze,gt,zt){var Dr={name:"JSLintError",column:ae,line:j,code:D};return Fe!==void 0&&(Dr.a=Fe),ze!==void 0&&(Dr.b=ze),gt!==void 0&&(Dr.c=gt),zt!==void 0&&(Dr.d=zt),Dr.message=tt(l[D]||D,Dr),ee.push(Dr),typeof Be.maxerr=="number"&&ee.length===Be.maxerr?re("too_many",j,ae):Dr}function re(D,j,ae,Fe,ze,gt,zt){throw q(D,j,ae,Fe,ze,gt,zt),q("stopping",j,ae)}function L(D,j,ae,Fe,ze,gt){if(j===void 0&&(j=Se),j.warning===void 0)return j.warning=q(D,j.line,j.from,ae||ge(j),Fe,ze,gt),j.warning}function Ce(D,j,ae,Fe,ze,gt){throw j===void 0&&(j=Se),j.warning=void 0,L(D,j,ae,Fe,ze,gt),j.warning=void 0,L("stopping",j,ae,Fe,ze,gt)}function Ge(D){_t=Array.isArray(D)?D:D.split(g),Nt=[];var j,ae=0,Fe,ze=-1,gt=xe,zt=xe,Dr,Ct,Yt,Lt;function zn(){var Bt;return ae=0,ze+=1,Lt=_t[ze],Lt!==void 0&&(Bt=Lt.search(N),Bt>=0&&(Be.white||q("use_spaces",ze,Bt+1),Lt=Lt.replace(N," ")),Bt=Lt.search(m),Bt>=0&&q("unsafe",ze,ae+Bt,"U+"+Lt.charCodeAt(Bt).toString(16)),Be.maxlen&&Be.maxlen<Lt.length?q("too_long",ze,Lt.length):!Be.white&&Lt.slice(-1)===" "&&q("unexpected_trailing_space",ze,Lt.length-1)),Lt}function ln(){Yt=Yt.slice(0,-1)}function rr(Bt){return Bt!==void 0&&j!==Bt?re("expected_a_b",ze,ae,Bt,j):(Lt?(j=Lt.charAt(0),Lt=Lt.slice(1),Yt+=j):(j="",Yt+=" "),ae+=1,j)}function Ln(){return Yt?(j=Yt.slice(-1),Lt=j+Lt,ae-=1,ln()):j="",j}function yi(Bt,dr){var gr=Lt.match(Bt);return gr?(j=gr[1],ae+=j.length,Lt=gr[2],Yt+=j):(j="",dr||q("expected_digits_after_a",ze,ae,Yt)),j.length}function oi(Bt){switch(rr("\\")){case"\\":case"'":case'"':case"/":case":":case"=":case"|":case"b":case"f":case"n":case"r":case"t":case" ":break;case"u":if(rr("u")==="{"){yi(ie)>5&&q("too_many_digits",ze,ae-1),Be.es6||q("es6",ze,ae),rr()!=="}"&&re("expected_a_before_b",ze,ae,"}",j);return}Ln(),yi(ie,!0)<4&&q("expected_four_digits",ze,ae-1);break;case"":return re("unclosed_string",ze,ae);default:Bt&&Bt.indexOf(j)<0&&q("unexpected_a_after_b",ze,ae,j,"\\")}rr()}function Hr(Bt,dr,gr){var ti={id:Bt,identifier:!!gr,from:Fe,thru:ae,line:ze};return Nt.push(ti),Bt!=="(comment)"&&(Ut=!1),dr!==void 0&&(ti.value=dr),gt.line===ze&&gt.thru===Fe&&(Bt==="(comment)"||Bt==="(regexp)"||Bt==="/")&&(gt.id==="(comment)"||gt.id==="(regexp)")&&L("expected_space_a_b",ti,ge(gt),ge(ti)),gt.id==="."&&Bt==="(number)"&&L("expected_a_before_b",gt,"0","."),zt.id==="."&&ti.identifier&&(ti.dot=!0),gt=ti,gt.id!=="(comment)"&&(zt=gt),ti}function Ui(Bt,dr){var gr=dr.match(z);if(gr){var ti,Cr=gr[1],Or=gr[2];switch(Bt.directive){case"jslint":switch(ti=n[Cr],typeof ti){case"boolean":switch(Or){case"true":case"":case void 0:Be[Cr]=!0;break;case"false":Be[Cr]=!1;break;default:L("bad_option_a",Bt,Cr+":"+Or)}break;case"number":isFinite(+Or)?Be[Cr]=+Or:L("bad_option_a",Bt,Cr+":"+Or);break;case"object":Be[Cr]=!0,r(xt,ti,!1);break;default:L("bad_option_a",Bt,Cr)}break;case"property":ot===void 0&&(ot=e()),ot[Cr]=!0;break;case"global":Or&&L("bad_option_a",Bt,Cr+":"+Or),xt[Cr]=!1,bt=Bt;break}return Ui(Bt,gr[3])}if(dr)return Ce("bad_directive_a",Bt,dr)}function xi(Bt){var dr=Hr("(comment)",Bt);nt&&L("unexpected_comment",dr),Array.isArray(Bt)&&(Bt=Bt.join(" ")),!Be.devel&&de.test(Bt)&&L("todo_comment",dr);var gr=Bt.match(H);return gr&&(Ut?(dr.directive=gr[1],Ui(dr,gr[2])):q("misplaced_directive_a",ze,Fe,gr[1])),dr}function Vi(){var Bt,dr=!1,gr;function ti(){switch(j){case"?":case"*":case"+":rr();break;case"{":yi(G,!0)===0&&q("expected_a",ze,ae,"0"),rr()===","&&(yi(G,!0),rr()),rr("}");break;default:return}j==="?"&&rr("?")}function Cr(){switch(j){case"\\":return oi(),!0;case"[":case"]":case"/":case"^":case"-":case"|":case"":return!1;case"`":return qe&&q("unexpected_a",ze,ae,"`"),rr(),!0;case" ":return q("expected_a_before_b",ze,ae,"\\"," "),rr(),!0;default:return rr(),!0}}function Or(){if(Cr())return j==="-"&&(rr("-"),!Cr())?re("unexpected_a",ze,ae-1,"-"):Or()}function Aa(){rr("["),j==="^"&&rr("^"),Or(),rr("]")}function fn(){function Ou(){if(rr("("),j==="?")switch(rr("?"),j){case":":case"=":case"!":rr();break;default:rr(":")}else j===":"&&q("expected_a_before_b",ze,ae,"?",":");fn(),rr(")")}function Do(){switch(j){case"[":return Aa(),!0;case"\\":return oi("BbDdSsWw^${}[]().|*+?"),!0;case"(":return Ou(),!0;case"/":case"|":case"]":case")":case"}":case"{":case"?":case"+":case"*":case"":return!1;case"`":qe&&q("unexpected_a",ze,ae,"`");break;case" ":q("expected_a_before_b",ze,ae,"\\"," ");break}return rr(),!0}function Pu(qf){if(Do())return ti(),Pu(!0);qf||q("expected_regexp_factor_a",ze,ae,j)}if(Pu(),j==="|")return rr("|"),fn()}Yt="",rr(),j==="="&&q("expected_a_before_b",ze,ae,"\\","="),fn(),ln(),gr=Yt,rr("/");var Io={g:!0,i:!0,m:!0,u:dr,y:Be.es6},Ii=e();return function Ou(){if(ce(j))return Io[j]!==!0&&q("unexpected_a",ze,ae,j),Io[j]=!1,Ii[j]=!0,rr(),Ou()}(),dr&&!Ii.u&&q("expected_a_before_b",ze,ae,"u",j),Ln(),j==="/"||j==="*"?re("unexpected_a",ze,Fe,j):(Bt=Hr("(regexp)",j),Bt.flag=Ii,Bt.value=gr,Bt)}function ei(Bt){var dr;return Yt="",rr(),function gr(){switch(j){case Bt:return ln(),dr=Hr("(string)",Yt),dr.quote=Bt,dr;case"\\":oi();break;case"":return re("unclosed_string",ze,ae);case"`":qe&&q("unexpected_a",ze,ae,"`"),rr("`");break;default:rr()}return gr()}()}function dn(){j==="."&&(yi(G),rr()),(j==="E"||j==="e")&&(rr(),j!=="+"&&j!=="-"&&Ln(),yi(G),rr())}function xc(){if(Yt==="0")switch(rr()){case".":dn();break;case"b":yi(Ne),rr();break;case"o":yi(fe),rr();break;case"x":yi(ie),rr();break}else rr(),dn();return j>="0"&&j<="9"||j>="a"&&j<="z"||j>="A"&&j<="Z"?re("unexpected_a_after_b",ze,ae-1,Yt.slice(-1),Yt.slice(0,-1)):(Ln(),Hr("(number)",Yt))}function ko(){var Bt,dr,gr,ti,Cr,Or;if(!Lt)return Lt=zn(),Fe=0,Lt===void 0?qe?re("unclosed_mega",Ct,Dr):Hr("(end)"):ko();if(Fe=ae,Cr=Lt.match(Y),!Cr)return re("unexpected_char_a",ze,ae,Lt.charAt(0));if(Yt=Cr[1],ae+=Yt.length,Lt=Cr[5],Cr[2])return ko();if(Cr[3])return Hr(Yt,void 0,!0);if(Cr[4])return xc(Yt);switch(Yt){case"'":return nt&&q("unexpected_a",ze,ae,"'"),ei("'");case'"':return ei('"');case"`":return qe?re("expected_a_b",ze,ae,"}","`"):(Yt="",Dr=Fe,Ct=ze,qe=!0,Hr("`"),Fe+=1,function Aa(){var fn=Lt.search(ye);if(fn<0)return Yt+=Lt+`
`,zn()===void 0?re("unclosed_mega",Ct,Dr):Aa();if(Yt+=Lt.slice(0,fn),ae+=fn,Lt=Lt.slice(fn),Hr("(string)",Yt).quote="`",Yt="",Lt.charAt(0)==="$")return ae+=2,Hr("${"),Lt=Lt.slice(2),function Io(){var Ii=ko().id;if(Ii==="{")return re("expected_a_b",ze,ae,"}","{");if(Ii!=="}")return Io()}(),Aa()}(),Lt=Lt.slice(1),ae+=1,qe=!1,Hr("`"));case"//":return Yt=Lt,Lt="",Or=xi(Yt),qe&&L("unexpected_comment",Or,"`"),Or;case"/*":return Bt=[],Lt.charAt(0)==="/"&&q("unexpected_a",ze,ae+dr,"/"),function Aa(){if(Lt>""){if(dr=Lt.search(A),dr>=0)return;gr=Lt.search(F),gr>=0&&q("nested_comment",ze,ae+gr)}return Bt.push(Lt),Lt=zn(),Lt===void 0?re("unclosed_comment",ze,ae):Aa()}(),Yt=Lt.slice(0,dr),gr=Yt.search(X),gr>=0&&q("nested_comment",ze,ae+gr),Bt.push(Yt),ae+=dr+2,Lt=Lt.slice(dr+2),xi(Bt);case"/":if(zt.identifier){if(!zt.dot)switch(zt.id){case"return":return Vi();case"(begin)":case"case":case"delete":case"in":case"instanceof":case"new":case"typeof":case"void":case"yield":return Or=Vi(),Ce("unexpected_a",Or)}}else{if(ti=zt.id.charAt(zt.id.length-1),"(,=:?[".indexOf(ti)>=0)return Vi();if("!&|{};~+-*%/^<>".indexOf(ti)>=0)return Or=Vi(),L("wrap_regexp",Or),Or}Lt.charAt(0)==="/"&&(ae+=1,Lt=Lt.slice(1),Yt="/=",q("unexpected_a",ze,ae,"/="));break}return Hr(Yt)}for(;ko().id!=="(end)";);}function at(D){var j=D.id;if(j==="(string)"){if(j=D.value,!y.test(j))return j;if(I.test(j))L("unexpected_quotes_a",D);else return j}else if(!D.identifier)return Ce("expected_identifier_a",D);return typeof jt[j]=="number"?jt[j]+=1:(ot!==void 0?ot[j]!==!0&&L("unregistered_property_a",D):D.identifier&&x.test(j)&&L("bad_property_a",D),jt[j]=1),j}function ht(){var D=Nt[lt];return lt+=1,D.id==="(comment)"?ht():D}function Je(){var D=lt,j=ht(!0);return lt=D,j}function Ee(D,j){if(Ae.identifier&&Ae.id!=="function"?ft=Ae.id:Ae.id==="(string)"&&y.test(Ae.value)&&(ft=Ae.value),D!==void 0&&Se.id!==D)return j===void 0?Ce("expected_a_b",Se,D,ge()):Ce("expected_a_b_from_c_d",Se,D,ge(j),De(j),ge(Se));Ae=Se,Se=ht(),Se.id==="(end)"&&(lt-=1)}function Kt(){function D(){var ae=Se,Fe=e();Ee("{"),Se.id!=="}"&&function ze(){if(Ee("(string)"),Fe[Ae.value]!==void 0?L("duplicate_a",Ae):Ae.value==="__proto__"?L("bad_property_name_a",Ae):Fe[Ae.value]=Ae,Ee(":"),Kt(),Se.id===",")return Ee(","),ze()}(),Ee("}",ae)}function j(){var ae=Se;Ee("["),Se.id!=="]"&&function Fe(){if(Kt(),Se.id===",")return Ee(","),Fe()}(),Ee("]",ae)}switch(Se.id){case"{":D();break;case"[":j();break;case"true":case"false":case"null":Ee();break;case"(number)":Ze.test(Se.value)||L("unexpected_a"),Ee();break;case"(string)":Ee();break;case"-":Ee("-"),Ee("(number)");break;default:Ce("unexpected_a")}}function Ot(D,j,ae){var Fe=D.id;if(je[Fe]!==void 0&&Fe!=="ignore")L("reserved_a",D);else{var ze=Q.context[Fe];ze?L("redefinition_a_b",D,D.id,ze.line+Ke):(rt.forEach(function(gt){var zt=gt.context[Fe];zt!==void 0&&(ze=zt)}),ze&&(Fe==="ignore"?ze.role==="variable"&&L("unexpected_a",D):(j!=="exception"||ze.role!=="exception")&&j!=="parameter"&&j!=="function"&&L("redefinition_a_b",D,D.id,ze.line+Ke)),Q.context[Fe]=D,D.dead=!0,D.function=Q,D.init=!1,D.role=j,D.used=0,D.writable=!ae)}}function kt(D,j){var ae,Fe;if(j||Ee(),Fe=je[Ae.id],Fe!==void 0&&Fe.nud!==void 0)ae=Fe.nud();else if(Ae.identifier)ae=Ae,ae.arity="variable";else return Ce("unexpected_a",Ae);return function ze(){if(Fe=je[Se.id],Fe!==void 0&&Fe.led!==void 0&&D<Fe.lbp)return Ee(),ae=Fe.led(ae),ze()}(),ae}function Br(){var D=Se,j;switch(D.free=!0,Ee("("),j=kt(0),Ee(")"),j.wrapped===!0&&L("unexpected_a",D),j.id){case"?":case"~":case"&":case"|":case"^":case"<<":case">>":case">>>":case"+":case"-":case"*":case"/":case"%":case"typeof":case"(number)":case"(string)":L("unexpected_a",j);break}return j}function Jt(){Se.id===";"?Ee(";"):q("expected_a_b",Ae.line,Ae.thru,";",ge(Se)),ft="anonymous"}function pi(){var D,j,ae,Fe;if(Ee(),Ae.identifier&&Se.id===":")switch(j=Ae,j.id==="ignore"&&L("unexpected_a",j),Ee(":"),Se.id){case"do":case"for":case"switch":case"while":return Ot(j,"label",!0),j.init=!0,j.dead=!1,ae=pi(),ae.label=j,ae.statement=!0,ae;default:Ee(),L("unexpected_label_a",j)}return D=Ae,D.statement=!0,Fe=je[D.id],Fe!==void 0&&Fe.fud!==void 0?(Fe.disrupt=!1,Fe.statement=!0,ae=Fe.fud()):(ae=kt(0,!0),ae.wrapped&&(ae.id!=="("||ae.expression[0].id!=="function")&&L("unexpected_a",D),Jt()),j!==void 0&&(j.dead=!0),ae}function hr(){var D=[];return function j(ae){var Fe;switch(Se.id){case"}":case"case":case"default":case"else":case"(end)":break;default:return Fe=pi(),D.push(Fe),ae&&L("unreachable_a",Fe),j(Fe.disrupt)}}(!1),D}function zr(D){Q===xe&&L("unexpected_at_top_level_a",D)}function ki(D){pt!==xe&&L("misplaced_a",D)}function qr(D){var j,ae;return D!=="naked"&&Ee("{"),ae=Ae,ae.arity="statement",ae.body=D==="body",ae.body&&rt.length<=1&&!xe.strict&&(Se.id==="(string)"||Se.value==="use strict"?(Se.statement=!0,Q.strict=!0,Ee("(string)"),Ee(";")):L("expected_a_before_b",Se,Se.id==="`"?"'":"use strict",ge(Se))),j=hr(),ae.block=j,j.length===0?(!Be.devel&&D!=="ignore"&&L("empty_block",ae),ae.disrupt=!1):ae.disrupt=j[j.length-1].disrupt,Ee("}"),ae}function en(D){return D.id!=="."&&(D.id!=="["||D.arity!=="binary")&&D.arity!=="variable"?(L("bad_assignment_a",D),!1):!0}function Yr(D,j){var ae=D.id;return!D.identifier&&(D.arity!=="binary"||ae!=="."&&ae!=="("&&ae!=="[")?(L("unexpected_a",j),!1):!0}function $t(D,j){var ae=je[D];return ae===void 0&&(ae=e(),ae.id=D,ae.lbp=j||0,je[D]=ae),ae}function hi(D){var j=$t(D,20);return j.led=function(ae){var Fe=Ae,ze;switch(Fe.arity="assignment",ze=kt(19),D==="="&&ae.arity==="variable"?(Fe.names=ae,Fe.expression=ze):Fe.expression=[ae,ze],ze.arity){case"assignment":case"pre":case"post":L("unexpected_a",ze);break}return Be.es6&&ae.arity==="unary"&&(ae.id==="["||ae.id==="{")?L("expected_a_before_b",ae,"const",ae.id):en(ae),Fe},j}function Ci(D,j,ae){var Fe=$t(D);return Fe.nud=typeof ae=="function"?ae:function(){return Ae.constant=!0,ae!==void 0&&(Ae.value=ae),Ae},Fe.type=j,Fe.value=ae,Fe}function Qt(D,j,ae){var Fe=$t(D,j);return Fe.led=function(ze){var gt=Ae;return gt.arity="binary",ae!==void 0?ae(ze):(gt.expression=[ze,kt(j)],gt)},Fe}function Jr(D){var j=$t(D,150);return j.led=function(ae){return Ae.expression=ae,Ae.arity="post",en(Ae.expression),Ae},j}function jr(D){var j=$t(D);return j.nud=function(){var ae=Ae;return ae.arity="pre",ae.expression=kt(150),en(ae.expression),ae},j}function Vt(D,j){var ae=$t(D);return ae.nud=function(){var Fe=Ae;return Fe.arity="unary",typeof j=="function"?j():(Fe.expression=kt(150),Fe)},ae}function Tr(D,j){var ae=$t(D);return ae.fud=function(){return Ae.arity="statement",j()},ae}function un(D,j){var ae=$t(D,30);return ae.led=function(Fe){var ze=Ae,gt=kt(20);return Ee(j),Ae.arity="ternary",ze.arity="ternary",ze.expression=[Fe,gt,kt(10)],ze},ae}je=e(),$t("}"),$t(")"),$t("]"),$t(","),$t(";"),$t(":"),$t("*/"),$t("await"),$t("case"),$t("catch"),$t("class"),$t("default"),$t("else"),$t("enum"),$t("finally"),$t("implements"),$t("interface"),$t("package"),$t("private"),$t("protected"),$t("public"),$t("static"),$t("super"),$t("void"),$t("with"),$t("yield"),Ci("(number)","number"),Ci("(regexp)","regexp"),Ci("(string)","string"),Ci("arguments","object",function(){return L("unexpected_a",Ae),Ae}),Ci("eval","function",function(){return Be.eval?Se.id!=="("&&L("expected_a_before_b",Se,"(",ge()):L("unexpected_a",Ae),Ae}),Ci("false","boolean",!1),Ci("ignore","undefined",function(){return L("unexpected_a",Ae),Ae}),Ci("Infinity","number",1/0),Ci("NaN","number",NaN),Ci("null","null",null),Ci("this","object",function(){return Be.this||L("unexpected_a",Ae),Ae}),Ci("true","boolean",!0),Ci("undefined","undefined"),hi("="),hi("+="),hi("-="),hi("*="),hi("/="),hi("%="),hi("&="),hi("|="),hi("^="),hi("<<="),hi(">>="),hi(">>>="),Qt("||",40),Qt("&&",50),Qt("|",70),Qt("^",80),Qt("&",90),Qt("==",100),Qt("===",100),Qt("!=",100),Qt("!==",100),Qt("<",110),Qt(">",110),Qt("<=",110),Qt(">=",110),Qt("in",110),Qt("instanceof",110),Qt("<<",120),Qt(">>",120),Qt(">>>",120),Qt("+",130),Qt("-",130),Qt("*",140),Qt("/",140),Qt("%",140),Qt("(",160,function(D){var j=Ae,ae;return D.id!=="function"&&Yr(D,j),j.free=!1,j.expression=[D],D.identifier&&(D.new?D.id.charAt(0)>"Z"||D.id==="Boolean"||D.id==="Number"||D.id==="String"||D.id==="Symbol"&&Be.es6?L("unexpected_a",D,"new"):D.id==="Function"?Be.eval||L("unexpected_a",D,"new Function"):D.id==="Array"?L("expected_a_b",D,"[]","new Array"):D.id==="Object"&&L("expected_a_b",D,"Object.create(null)","new Object"):(D.id.charAt(0)>="A"&&D.id.charAt(0)<="Z"&&D.id!=="Boolean"&&D.id!=="Number"&&D.id!=="String"&&D.id!=="Symbol"&&L("expected_a_before_b",D,"new",ge(D)),Q.arity==="statement"&&(Q.name.calls[D.id]=D))),Se.id!==")"&&function Fe(){if(ae=kt(10),j.expression.push(ae),Se.id===",")return Ee(","),Fe()}(),Ee(")",j),j.expression.length===2&&(ae.wrapped===!0&&L("unexpected_a",j),ae.id==="("&&(ae.wrapped=!0)),j}),Qt(".",170,function(D){var j=Ae,ae=Se;return(D.id!=="(string)"||ae.id!=="indexOf")&&(D.id!=="["||ae.id!=="concat"&&ae.id!=="forEach")&&(D.id!=="+"||ae.id!=="slice")&&(D.id!=="(regexp)"||ae.id!=="exec"&&ae.id!=="test")&&Yr(D,j),ae.identifier||Ce("expected_identifier_a"),Ee(),at(ae),j.name=ae,j.expression=D,j}),Qt("[",170,function(D){var j=Ae,ae=kt(0);return ae.id==="(string)"&&y.test(ae.value)?(L("subscript_a",ae),at(ae)):ae.id==="`"&&L("unexpected_a",ae),Yr(D,j),j.expression=[D,ae],Ee("]"),j}),Qt("=>",170,function(D){return Ce("expected_a_before_b",D,"(",ge(D))});function Dn(){var D=Ae;return Be.es6||L("es6",D),D.value=[],D.expression=[],Se.id!=="`"&&function j(){if(Ee("(string)"),D.value.push(Ae),Se.id==="${")return Ee("${"),D.expression.push(kt(0)),Ee("}"),j()}(),Ee("`"),D}Qt("`",160,function(D){var j=Dn();return Yr(D,j),j.expression=[D].concat(j.expression),j}),Jr("++"),Jr("--"),jr("++"),jr("--"),Vt("+"),Vt("-"),Vt("~"),Vt("!"),Vt("!!"),Vt("[",function(){var D=Ae;return D.expression=[],Se.id!=="]"&&function j(){if(D.expression.push(kt(10)),Se.id===",")return Ee(","),j()}(),Ee("]"),D}),Vt("/=",function(){Ce("expected_a_b",Ae,"/\\=","/=")}),Vt("=>",function(){return Ce("expected_a_before_b",Ae,"()","=>")}),Vt("new",function(){var D=Ae;return Se.new=!0,D.expression=kt(150),D.expression.id!=="("&&L("expected_a_before_b",Se,"()",ge(Se)),D}),Vt("typeof"),Vt("void",function(){var D=Ae;return L("unexpected_a",D),D.expression=kt(0),D});function cn(D,j){var ae=!1,Fe;if(Se.id==="{"){if(Be.es6||L("es6"),Fe=Se,Fe.names=[],Ee("{"),j.push("{"),function ze(){var gt=Se;if(!gt.identifier||(at(gt),Ee(),j.push(gt.id),Se.id===":"&&(Ee(":"),Ee(),Ae.label=gt,gt=Ae,!gt.identifier)))return Ce("expected_identifier_a");if(Fe.names.push(gt),Se.id===",")return Ee(","),j.push(", "),ze()}(),D.push(Fe),Ee("}"),j.push("}"),Se.id===",")return Ee(","),j.push(", "),cn(D,j)}else if(Se.id==="["){if(Be.es6||L("es6"),Fe=Se,Fe.names=[],Ee("["),j.push("[]"),function ze(){var gt=Se;if(!gt.identifier)return Ce("expected_identifier_a");if(Ee(),Fe.names.push(gt),Se.id===",")return Ee(","),ze()}(),D.push(Fe),Ee("]"),Se.id===",")return Ee(","),j.push(", "),cn(D,j)}else{if(Se.id==="..."&&(Be.es6||L("es6"),ae=!0,j.push("..."),Ee("...")),!Se.identifier)return Ce("expected_identifier_a");if(Fe=Se,D.push(Fe),Ee(),j.push(Fe.id),ae)Fe.ellipsis=!0;else if(Se.id==="="&&(Be.es6||L("es6"),Ee("="),Fe.expression=kt(0)),Se.id===",")return Ee(","),j.push(", "),cn(D,j)}}function da(){var D=[],j=["("];return Se.id!==")"&&Se.id!=="(end)"&&cn(D,j),Ee(")"),j.push(")"),[D,j.join("")]}function fr(D){var j;if(D===void 0)if(D=Ae,D.arity==="statement"){if(!Se.identifier)return Ce("expected_identifier_a",Se);j=Se,Ot(j,"variable",!0),D.name=j,j.init=!0,j.calls=e(),Ee()}else j===void 0&&(Se.identifier?(j=Se,D.name=j,Ee()):D.name=ft);else j=D.name;D.level=Q.level+1,qe&&L("unexpected_a",D),Q.loop>0&&L("function_in_loop",D),D.context=e(),D.loop=0,D.switch=0,rt.push(Q),pe.push(D),Q=D,D.arity!=="statement"&&j&&(Ot(j,"function",!0),j.dead=!1,j.init=!0,j.used=1),Ee("("),Ae.free=!1,Ae.arity="function";var ae=da();return Q.parameters=ae[0],Q.signature=ae[1],Q.parameters.forEach(function Fe(ze){ze.identifier?Ot(ze,"parameter",!1):ze.names.forEach(Fe)}),D.block=qr("body"),D.arity==="statement"&&Se.line===Ae.line?Ce("unexpected_a",Se):((Se.id==="."||Se.id==="[")&&L("unexpected_a"),Q=rt.pop(),D)}Vt("function",fr);function gi(D){Ee("=>");var j=Ae;return j.arity="binary",j.name="=>",j.level=Q.level+1,pe.push(j),Q.loop>0&&L("function_in_loop",j),j.context=e(),j.loop=0,j.switch=0,rt.push(Q),Q=j,j.parameters=D[0],j.signature=D[1],j.parameters.forEach(function(ae){Ot(ae,"parameter",!0)}),Be.es6||L("es6",j),Se.id==="{"?(L("expected_a_b",j,"function","=>"),j.block=qr("body")):j.expression=kt(0),Q=rt.pop(),j}Vt("(",function(){var D=Ae,j,ae=Je().id;return Se.id===")"||Se.id==="..."||Se.identifier&&(ae===","||ae==="=")?(D.free=!1,gi(da())):(D.free=!0,j=kt(0),j.wrapped===!0&&L("unexpected_a",D),j.wrapped=!0,Ee(")",D),Se.id==="=>"?j.arity!=="variable"?Ce("expected_identifier_a",j):(D.expression=[j],gi([D.expression,"("+j.id+")"])):j)}),Vt("`",Dn),Vt("{",function(){var D=Ae,j=e();return D.expression=[],Se.id!=="}"&&function ae(){var Fe=!0,ze,gt=Se,zt;if(Ee(),(gt.id==="get"||gt.id==="set")&&Se.identifier&&(Fe=gt.id,gt=Se,Ee()),ze=at(gt),j[ze]===!0?L("duplicate_a",gt):j[ze]==="get"&&Fe!=="set"&&L("expected_a_before_b",gt,"set",ge(gt)),j[ze]=Fe==="get"?"get":!0,gt.identifier){switch(Se.id){case"}":case",":Be.es6?Fe!==!0&&Ee(":"):L("es6"),gt.arity="variable",zt=gt;break;case"(":Be.es6||L("es6"),zt=fr({arity:"unary",from:gt.from,id:"function",line:gt.line,name:gt,thru:gt.from},gt);break;default:Ee(":"),zt=kt(0)}zt.label=gt,typeof Fe=="string"&&(zt.extra=Fe),D.expression.push(zt)}else Ee(":"),zt=kt(0),zt.label=gt,D.expression.push(zt);if(Se.id===",")return Ee(","),ae()}(),Ee("}"),D}),Tr(";",function(){return L("unexpected_a",Ae),Ae}),Tr("{",function(){return L("naked_block",Ae),qr("naked")}),Tr("break",function(){var D=Ae,j;return Q.loop<1&&Q.switch<1&&L("unexpected_a",D),D.disrupt=!0,Se.identifier&&Ae.line===Se.line&&(j=Q.context[Se.id],j===void 0||j.role!=="label"||j.dead?L(j!==void 0&&j.dead?"out_of_scope_a":"not_label_a"):j.used+=1,D.label=Se,Ee()),Ee(";"),D});function mi(){var D=Ae,j=D.id==="const";return D.names=[],j?Be.es6||L("es6",D):te===void 0?(te=D.id,!Be.es6&&te!=="var"&&L("es6",D)):D.id!==te&&L("expected_a_b",D,te,D.id),Q.switch>0&&L("var_switch",D),Q.loop>0&&D.id==="var"&&L("var_loop",D),function ae(){if(Se.id==="{"&&D.id!=="var"){var Fe=Se;Fe.names=[],Ee("{"),function zt(){if(!Se.identifier)return Ce("expected_identifier_a",Se);var Dr=Se;if(at(Dr),Ee(),Se.id===":"){if(Ee(":"),!Se.identifier)return Ce("expected_identifier_a",Se);Se.label=Dr,Fe.names.push(Se),Ot(Se,"variable",j),Ee()}else Fe.names.push(Dr),Ot(Dr,"variable",j);if(Se.id===",")return Ee(","),zt()}(),Ee("}"),Ee("="),Fe.expression=kt(0),D.names.push(Fe)}else if(Se.id==="["&&D.id!=="var"){var ze=Se;ze.names=[],Ee("["),function zt(){var Dr;if(Se.id==="..."&&(Dr=!0,Ee("...")),!Se.identifier)return Ce("expected_identifier_a",Se);var Ct=Se;if(Ee(),ze.names.push(Ct),Ot(Ct,"variable",D.id==="const"),Dr)Ct.ellipsis=!0;else if(Se.id===",")return Ee(","),zt()}(),Ee("]"),Ee("="),ze.expression=kt(0),D.names.push(ze)}else if(Se.identifier){var gt=Se;Ee(),gt.id==="ignore"&&L("unexpected_a",gt),Ot(gt,"variable",j),(Se.id==="="||j)&&(Ee("="),gt.expression=kt(0),gt.init=!0),D.names.push(gt)}else return Ce("expected_identifier_a",Se);if(Se.id===",")return Ee(","),ae()}(),D.open=D.names.length>1&&D.line!==D.names[1].line,Jt(),D}Tr("const",mi),Tr("continue",function(){var D=Ae;return Q.loop<1&&L("unexpected_a",D),zr(D),D.disrupt=!0,L("unexpected_a",D),Ee(";"),D}),Tr("debugger",function(){var D=Ae;return Be.devel||L("unexpected_a",D),Jt(),D}),Tr("delete",function(){var D=Ae,j=kt(0);return(j.id!=="."&&j.id!=="["||j.arity!=="binary")&&Ce("expected_a_b",j,".",ge(j)),D.expression=j,Jt(),D}),Tr("do",function(){var D=Ae;return zr(D),Q.loop+=1,D.block=qr(),Ee("while"),D.expression=Br(),Jt(),D.block.disrupt===!0&&L("weird_loop",D),Q.loop-=1,D}),Tr("export",function(){var D=Ae;return tr&&L("es6",D),Be.es6||L("es6",D),typeof bt=="object"&&L("unexpected_directive_a",bt,bt.directive),bt=!0,Ee("default"),D.expression=kt(0),Jt(),D}),Tr("for",function(){var D,j=Ae;return Be.for||L("unexpected_a",j),zr(j),Q.loop+=1,Ee("("),Ae.free=!0,Se.id===";"?Ce("expected_a_b",j,"while (","for (;"):Se.id==="var"||Se.id==="let"||Se.id==="const"?Ce("unexpected_a"):(D=kt(0),D.id==="in"?(D.expression[0].arity!=="variable"&&L("bad_assignment_a",D.expression[0]),j.name=D.expression[0],j.expression=D.expression[1],L("expected_a_b",j,"Object.keys","for in")):(j.initial=D,Ee(";"),j.expression=kt(0),Ee(";"),j.inc=kt(0),j.inc.id==="++"&&L("expected_a_b",j.inc,"+= 1","++")),Ee(")"),j.block=qr(),j.block.disrupt===!0&&L("weird_loop",j),Q.loop-=1,j)}),Tr("function",fr),Tr("if",function(){var D,j=Ae;return j.expression=Br(),j.block=qr(),Se.id==="else"&&(Ee("else"),D=Ae,j.else=Se.id==="if"?pi():qr(),j.block.disrupt===!0&&(j.else.disrupt===!0?j.disrupt=!0:L("unexpected_a",D))),j}),Tr("import",function(){var D=Ae;if(Be.es6?typeof bt=="object"&&L("unexpected_directive_a",bt,bt.directive):L("es6",D),bt=!0,!Se.identifier)return Ce("expected_identifier_a");var j=Se;return Ee(),j.id==="ignore"&&L("unexpected_a",j),Ot(j,"variable",!0),Ee("from"),Ee("(string)"),D.import=Ae,D.name=j,y.test(Ae.value)||L("bad_module_name_a",Ae),_e.push(Ae.value),Jt(),D}),Tr("let",mi),Tr("return",function(){var D=Ae;return zr(D),D.disrupt=!0,Se.id!==";"&&D.line===Se.line&&(D.expression=kt(10)),Ee(";"),D}),Tr("switch",function(){var D,j,ae=[],Fe=!0,ze=Ae;return zr(ze),Q.switch+=1,Ee("("),Ae.free=!0,ze.expression=kt(0),ze.block=ae,Ee(")"),Ee("{"),function gt(){var zt=Se;if(zt.arity="statement",zt.expression=[],function Dr(){if(Ee("case"),Ae.switch=!0,zt.expression.push(kt(0)),Ee(":"),Se.id==="case")return Dr()}(),j=hr(),zt.block=j,ae.push(zt),D=j[j.length-1],D.disrupt?D.id==="break"&&D.label===void 0&&(Fe=!1):L("expected_a_before_b",Se,"break;",ge(Se)),Se.id==="case")return gt()}(),Se.id==="default"?(Ee("default"),Ae.switch=!0,Ee(":"),ze.else=hr(),ze.else.length<1?(L("unexpected_a"),Fe=!1):Fe=Fe&&ze.else[ze.else.length-1].disrupt):Fe=!1,Ee("}",ze),Q.switch-=1,ze.disrupt=Fe,ze}),Tr("throw",function(){var D=Ae;return D.disrupt=!0,D.expression=kt(10),Jt(),D}),Tr("try",function(){var D=!1,j,ae,Fe=Ae;if(Fe.block=qr(),ae=Fe.block.disrupt,Se.id==="catch"){var ze="ignore";if(D=!0,j=Se,Fe.catch=j,Ee("catch"),Ee("("),!Se.identifier)return Ce("expected_identifier_a",Se);Se.id!=="ignore"&&(ze=void 0,j.name=Se,Ot(Se,"exception",!0)),Ee(),Ee(")"),j.block=qr(ze),j.block.disrupt!==!0&&(ae=!1)}return Se.id==="finally"&&(D=!0,Ee("finally"),Fe.else=qr(),ae=Fe.else.disrupt),Fe.disrupt=ae,D||L("expected_a_before_b",Se,"catch",ge(Se)),Fe}),Tr("var",mi),Tr("while",function(){var D=Ae;return zr(D),Q.loop+=1,D.expression=Br(),D.block=qr(),D.block.disrupt===!0&&L("weird_loop",D),Q.loop-=1,D}),un("?",":");function fa(D){return function(j,ae,Fe){var ze=D[j],gt;typeof ae!="string"&&(Fe=ae,ae="(all)"),ze===void 0&&(ze=e(),D[j]=ze),gt=ze[ae],gt===void 0&&(gt=[],ze[ae]=gt),gt.push(Fe)}}function Ga(D){return function(j){var ae=D[j.arity],Fe;ae!==void 0&&(Fe=ae[j.id],Fe!==void 0&&Fe.forEach(function(ze){return ze(j)}),Fe=ae["(all)"],Fe!==void 0&&Fe.forEach(function(ze){return ze(j)}))}}var Xs=e(),bn=e(),Vr=fa(bn),Qr=fa(Xs),Ei=Ga(bn),os=Ga(Xs);function za(D){if(D)if(Array.isArray(D))D.forEach(za);else{switch(Ei(D),za(D.expression),D.id==="function"&&or(D.block),D.arity){case"post":case"pre":L("unexpected_a",D);break;case"statement":case"assignment":L("unexpected_statement_a",D);break}os(D)}}function or(D){if(D)if(Array.isArray(D))D.forEach(or);else{switch(Ei(D),za(D.expression),D.arity){case"statement":case"assignment":break;case"binary":D.id!=="("&&L("unexpected_expression_a",D);break;default:L("unexpected_expression_a",D)}or(D.block),or(D.else),os(D)}}function On(D){if(D.arity==="variable"){var j=Q.context[D.id];if(j===void 0){if(rt.forEach(function(ae){var Fe=ae.context[D.id];Fe!==void 0&&Fe.role!=="label"&&(j=Fe)}),j===void 0){if(xt[D.id]===void 0){L("undeclared_a",D);return}j={dead:!1,function:xe,id:D.id,init:!0,role:"variable",used:0,writable:!1},xe.context[D.id]=j}j.closure=!0,Q.context[D.id]=j}else j.role==="label"&&L("label_a",D);return j.dead&&j.function===Q&&L("out_of_scope_a",D),j}}function Rt(D){switch(D.arity==="statement"&&pt.body!==!0&&L("unexpected_a",D),rt.push(Q),Ye.push(pt),Q=D,pt=D,D.live=[],typeof D.name=="object"&&(D.name.dead=!1,D.name.init=!0),D.extra){case"get":D.parameters.length!==0&&L("bad_get",D);break;case"set":D.parameters.length!==1&&L("bad_set",D);break}D.parameters.forEach(function(j){za(j.expression),j.id==="{"||j.id==="["?j.names.forEach(Gt):(j.dead=!1,j.init=!0)})}function qt(D){!Be.bitwise&&a[D.id]===!0&&L("unexpected_a",D)}function lr(){pt.live.forEach(function(D){D.dead=!0}),delete pt.live,pt=Ye.pop()}function Gt(D){D.init=!0,D.dead=!1,pt.live.push(D)}function Ir(D){D.expression!==void 0&&(za(D.expression),D.id==="{"||D.id==="["?D.names.forEach(Gt):D.init=!0),D.dead=!1,pt.live.push(D)}function tn(D){D.names.forEach(Ir)}Vr("assignment",qt),Vr("binary",qt),Vr("binary",function(D){if(o[D.id]===!0){if(D.expression[0].id==="NaN"||D.expression[1].id==="NaN")L("isNaN",D);else if(D.expression[0].id==="typeof")if(D.expression[1].id!=="(string)")D.expression[1].id!=="typeof"&&L("expected_string_a",kt[1]);else{var j=D.expression[1].value;j==="symbol"?Be.es6||L("es6",D.expression[1],j):j==="null"||j==="undefined"?L("unexpected_typeof_a",D.expression[1],j):j!=="boolean"&&j!=="function"&&j!=="number"&&j!=="object"&&j!=="string"&&L("expected_type_string_a",kt[1],j)}}}),Vr("binary","==",function(D){L("expected_a_b",D,"===","==")}),Vr("binary","!=",function(D){L("expected_a_b",D,"!==","!=")}),Vr("binary","=>",Rt),Vr("binary","||",function(D){D.expression.forEach(function(j){j.id==="&&"&&!j.wrapped&&L("and",j)})}),Vr("binary","(",function(D){var j=D.expression[0];if(j.identifier&&Q.context[j.id]===void 0&&typeof Q.name=="object"){var ae=Q.name.function;if(ae){var Fe=ae.context[j.id];Fe!==void 0&&Fe.dead&&Fe.function===ae&&Fe.calls!==void 0&&Fe.calls[Q.name.id]!==void 0&&(Fe.dead=!1)}}}),Vr("binary","in",function(D){L("infix_in",D)}),Vr("statement","{",function(D){Ye.push(pt),pt=D,D.live=[]}),Vr("statement","for",function(D){if(D.name!==void 0){var j=On(D.name);j!==void 0&&(j.init=!0,j.writable||L("bad_assignment_a",D.name))}or(D.initial)}),Vr("statement","function",Rt),Vr("unary","~",qt),Vr("unary","function",Rt),Vr("variable",function(D){var j=On(D);j!==void 0&&(D.variable=j,j.used+=1)});function _n(D){var j=On(D);if(j!==void 0&&j.writable){j.init=!0;return}L("bad_assignment_a",D)}Qr("assignment",function(D){if(D.id==="=")D.names!==void 0&&(Array.isArray(D.names)?D.names.forEach(_n):_n(D.names));else{var j=D.expression[0];j.arity==="variable"&&(!j.variable||j.variable.writable!==!0)&&L("bad_assignment_a",j)}});function Pn(D){return delete Q.loop,delete Q.switch,Q=rt.pop(),D.wrapped&&L("unexpected_parens",D),lr()}function Zr(D){return D.id==="(regexp)"||D.id==="{"||D.id==="=>"||D.id==="function"||D.id==="["&&D.arity==="unary"}function vi(D,j){if(D===j)return!0;if(Array.isArray(D))return Array.isArray(j)&&D.length===j.length&&D.every(function(ze,gt){return vi(ze,j[gt])});if(Array.isArray(j))return!1;if(D.id==="(number)"&&j.id==="(number)")return D.value===j.value;var ae,Fe;if(D.id==="(string)"?ae=D.value:D.id==="`"&&D.constant&&(ae=D.value[0]),j.id==="(string)"?Fe=j.value:j.id==="`"&&j.constant&&(Fe=j.value[0]),typeof ae=="string")return ae===Fe;if(Zr(D)||Zr(j))return!1;if(D.arity===j.arity&&D.id===j.id){if(D.id===".")return vi(D.expression,j.expression)&&vi(D.name,j.name);switch(D.arity){case"unary":return vi(D.expression,j.expression);case"binary":return D.id!=="("&&vi(D.expression[0],j.expression[0])&&vi(D.expression[1],j.expression[1]);case"ternary":return vi(D.expression[0],j.expression[0])&&vi(D.expression[1],j.expression[1])&&vi(D.expression[2],j.expression[2]);case"function":case"regexp":return!1;default:return!0}}return!1}Qr("binary",function(D){switch(o[D.id]&&(Zr(D.expression[0])||Zr(D.expression[1])||vi(D.expression[0],D.expression[1])||D.expression[0].constant===!0&&D.expression[1].constant===!0)&&L("weird_relation_a",D),D.id){case"=>":case"(":case".":break;default:D.expression[0].constant===!0&&D.expression[1].constant===!0&&(D.constant=!0)}}),Qr("binary","&&",function(D){(Zr(D.expression[0])||vi(D.expression[0],D.expression[1])||D.expression[0].constant===!0||D.expression[1].constant===!0)&&L("weird_condition_a",D)}),Qr("binary","||",function(D){(Zr(D.expression[0])||vi(D.expression[0],D.expression[1])||D.expression[0].constant===!0)&&L("weird_condition_a",D)}),Qr("binary","=>",Pn),Qr("binary","(",function(D){!D.wrapped&&D.expression[0].id==="function"&&L("wrap_immediate",D)}),Qr("binary","[",function(D){Zr(D.expression[1])&&L("weird_expression_a",D.expression[1])}),Qr("statement","{",lr),Qr("statement","const",tn),Qr("statement","export",ki),Qr("statement","for",function(D){or(D.inc)}),Qr("statement","function",Pn),Qr("statement","import",function(D){var j=D.name;return j.init=!0,j.dead=!1,pt.live.push(j),ki(D)}),Qr("statement","let",tn),Qr("statement","try",function(D){if(D.catch!==void 0){var j=D.catch.name;if(j!==void 0){var ae=Q.context[j.id];ae.dead=!1,ae.init=!0}or(D.catch.block)}}),Qr("statement","var",tn),Qr("ternary",function(D){Zr(D.expression[0])||D.expression[0].constant===!0||vi(D.expression[1],D.expression[2])?L("unexpected_a",D):vi(D.expression[0],D.expression[1])?L("expected_a_b",D,"||","?"):vi(D.expression[0],D.expression[2])?L("expected_a_b",D,"&&","?"):D.expression[1].id==="true"&&D.expression[2].id==="false"?L("expected_a_b",D,"!!","?"):D.expression[1].id==="false"&&D.expression[2].id==="true"&&L("expected_a_b",D,"!","?")}),Qr("unary",function(D){switch(D.id){case"[":case"{":case"function":case"new":break;case"`":D.expression.every(function(j){return j.constant})&&(D.constant=!0);break;default:D.expression.constant===!0&&(D.constant=!0)}}),Qr("unary","function",Pn);function wn(D){Object.keys(D.context).forEach(function(j){if(j!=="ignore"){var ae=D.context[j];ae.function===D&&(ae.used===0?L("unused_a",ae):ae.init||L("uninitialized_a",ae))}})}function Gn(){(bt===!0||Be.node)&&wn(xe),pe.forEach(wn)}function Rn(){var D="(end)",j=!1,ae=xe,Fe=0,ze=0,gt=!0,zt="",Dr,Ct;function Yt(oi){L("expected_a_at_b_c",Ct,ge(Ct),Ke+oi,ut(Ct))}function Lt(oi){var Hr=Fe+oi;if(Ct.from!==Hr)return Yt(Hr)}function zn(){(ae.line!==Ct.line||ae.thru!==Ct.from)&&L("unexpected_space_a_b",Ct,ge(ae),ge(Ct))}function ln(){if(ae.line===Ct.line)ae.thru!==Ct.from&&ze===0&&L("unexpected_space_a_b",Ct,ge(ae),ge(Ct));else if(gt){var oi=j?Fe:Fe+8;Ct.from<oi&&Yt(oi)}else Ct.from!==Fe+8&&Yt(Fe+8)}function rr(){(ae.line!==Ct.line||ae.thru+1!==Ct.from)&&L("expected_space_a_b",Ct,ge(ae),ge(Ct))}function Ln(){if(ae.line===Ct.line)ae.thru+1!==Ct.from&&ze===0&&L("expected_space_a_b",Ct,ge(ae),ge(Ct));else if(gt){var oi=j?Fe:Fe+8;Ct.from<oi&&Yt(oi)}else Ct.from!==Fe+8&&Yt(Fe+8)}function yi(){var oi=zt.length;oi>0&&(Fe-=oi*4),zt=""}rt=[],Nt.forEach(function(oi){if(Ct=oi,Ct.id==="(comment)"||Ct.id==="(end)")ze+=1;else{var Hr=s[ae.id];if(typeof Hr=="string")Hr!==Ct.id?(rt.push({closer:D,free:j,margin:Fe,open:gt,qmark:zt}),zt="",D=Hr,ae.line!==Ct.line?(j=D===")"&&ae.free||D==="]",gt=!0,Fe+=4,Ct.role==="label"?Ct.from!==0&&Yt(0):Ct.switch?(yi(),Lt(-4)):Lt(0)):((Ct.statement||Ct.role==="label")&&L("expected_line_break_a_b",Ct,ge(ae),ge(Ct)),j=!1,gt=!1,zn())):ae.line===Ct.line?ln():Lt(0);else if(Ct.id===D){var Ui=rt.pop();Fe=Ui.margin,gt&&Ct.id!==";"?Lt(0):zn(),D=Ui.closer,j=Ui.free,gt=Ui.open,zt=Ui.qmark}else Ct.switch?(yi(),Lt(-4)):Ct.role==="label"?Ct.from!==0&&Yt(0):ae.id===","?(yi(),!gt||j&&ae.line===Ct.line?Ln():Lt(0)):Ct.arity==="ternary"?(Ct.id==="?"?(Fe+=4,zt+="?"):(Dr=zt.match(He),zt=Dr[1]+":",Fe-=4*Dr[2].length),Lt(0)):ae.id==="..."||Ct.id===","||Ct.id===";"||Ct.id===":"||Ct.arity==="binary"&&(Ct.id==="("||Ct.id==="[")||Ct.arity==="function"&&ae.id!=="function"?zn():ae.id==="."?ln():Ct.id==="."?ae.line===Ct.line?ln():(Re.test(zt)||(zt+=".",Fe+=4),Lt(0)):ae.id===";"?(yi(),gt?Lt(0):Ln()):ae.arity==="ternary"||ae.id==="case"||ae.id==="catch"||ae.id==="else"||ae.id==="finally"||ae.id==="while"||Ct.id==="catch"||Ct.id==="else"||Ct.id==="finally"||Ct.id==="while"&&!Ct.statement||ae.id===")"&&Ct.id==="{"?rr():Ct.statement===!0?gt?Lt(0):Ln():ae.id==="var"||ae.id==="const"||ae.id==="let"?(rt.push({closer:D,free:j,margin:Fe,open:gt,qmark:zt}),D=";",j=!1,gt=ae.open,zt="",gt?(Fe=Fe+4,Lt(0)):rr()):i[ae.id]===!0||i[Ct.id]===!0||ae.arity==="binary"&&(ae.id==="+"||ae.id==="-")||Ct.arity==="binary"&&(Ct.id==="+"||Ct.id==="-")||ae.id==="function"||ae.id===":"||(ae.identifier||ae.id==="(string)"||ae.id==="(number)")&&(Ct.identifier||Ct.id==="(string)"||Ct.id==="(number)")||ae.arity==="statement"&&Ct.id!==";"?Ln():ae.arity==="unary"&&zn();ze=0,delete ae.calls,delete ae.dead,delete ae.free,delete ae.init,delete ae.open,delete ae.used,ae=Ct}})}return function(j,ae,Fe){try{ee=[],Be=ae||e(),ft="anonymous",Ye=[],xt=e(),Ut=!0,Pt=!0,tr=!0,Ke=Be.fudge?1:0,pe=[],xe={id:"(global)",body:!0,context:e(),from:0,level:0,line:0,live:[],loop:0,switch:0,thru:0},pt=xe,Q=xe,_e=[],nt=!1,qe=!1,bt=!1,Se=xe,jt=e(),rt=[],ot=void 0,Ae=xe,lt=0,te=void 0,r(xt,c,!1),Fe!==void 0&&r(xt,Fe,!1),Object.keys(Be).forEach(function(ze){if(Be[ze]===!0){var gt=n[ze];Array.isArray(gt)&&r(xt,gt,!1)}}),Ge(j),Ee(),Nt[0].id==="{"||Nt[0].id==="["?(nt=!0,St=Kt(),Ee("(end)")):(Be.browser?Se.id===";"&&Ee(";"):Se.id==="(string)"&&Se.value==="use strict"&&(Ee("(string)"),Ee(";"),xe.strict=!0),St=hr(),Ee("(end)"),Q=xe,or(St),Gn(),Be.white||Rn()),Pt=!1}catch(ze){ze.name!=="JSLintError"&&ee.push(ze)}return{edition:"2015-06-22",functions:pe,global:xe,id:"(JSLint)",imports:_e,json:nt,lines:_t,module:bt===!0,ok:ee.length===0&&!Pt,option:Be,property:jt,stop:Pt,tokens:Nt,tree:St,warnings:ee.sort(function(ze,gt){return ze.line-gt.line||ze.column-gt.column})}}}()});var s1=R((kEe,a1)=>{"use strict";var nm,Zt,r1={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Vb;function Uu(t){throw{name:"SyntaxError",message:t,at:nm,text:Vb}}function xr(t){return t&&t!==Zt&&Uu("Expected '"+t+"' instead of '"+Zt+"'"),Zt=Vb.charAt(nm),nm+=1,Zt}function i1(){var t,e="";for(Zt==="-"&&(e="-",xr("-"));Zt>="0"&&Zt<="9";)e+=Zt,xr();if(Zt===".")for(e+=".";xr()&&Zt>="0"&&Zt<="9";)e+=Zt;if(Zt==="e"||Zt==="E")for(e+=Zt,xr(),(Zt==="-"||Zt==="+")&&(e+=Zt,xr());Zt>="0"&&Zt<="9";)e+=Zt,xr();return t=Number(e),isFinite(t)||Uu("Bad number"),t}function n1(){var t,e,r="",n;if(Zt==='"')for(;xr();){if(Zt==='"')return xr(),r;if(Zt==="\\")if(xr(),Zt==="u"){for(n=0,e=0;e<4&&(t=parseInt(xr(),16),!!isFinite(t));e+=1)n=n*16+t;r+=String.fromCharCode(n)}else if(typeof r1[Zt]=="string")r+=r1[Zt];else break;else r+=Zt}Uu("Bad string")}function $o(){for(;Zt&&Zt<=" ";)xr()}function t9(){switch(Zt){case"t":return xr("t"),xr("r"),xr("u"),xr("e"),!0;case"f":return xr("f"),xr("a"),xr("l"),xr("s"),xr("e"),!1;case"n":return xr("n"),xr("u"),xr("l"),xr("l"),null;default:Uu("Unexpected '"+Zt+"'")}}function r9(){var t=[];if(Zt==="["){if(xr("["),$o(),Zt==="]")return xr("]"),t;for(;Zt;){if(t.push(am()),$o(),Zt==="]")return xr("]"),t;xr(","),$o()}}Uu("Bad array")}function i9(){var t,e={};if(Zt==="{"){if(xr("{"),$o(),Zt==="}")return xr("}"),e;for(;Zt;){if(t=n1(),$o(),xr(":"),Object.prototype.hasOwnProperty.call(e,t)&&Uu('Duplicate key "'+t+'"'),e[t]=am(),$o(),Zt==="}")return xr("}"),e;xr(","),$o()}}Uu("Bad object")}function am(){switch($o(),Zt){case"{":return i9();case"[":return r9();case'"':return n1();case"-":return i1();default:return Zt>="0"&&Zt<="9"?i1():t9()}}a1.exports=function(t,e){var r;return Vb=t,nm=0,Zt=" ",r=am(),$o(),Zt&&Uu("Syntax error"),typeof e=="function"?function n(i,a){var s,o,c=i[a];if(c&&typeof c=="object")for(s in am)Object.prototype.hasOwnProperty.call(c,s)&&(o=n(c,s),typeof o>"u"?delete c[s]:c[s]=o);return e.call(i,a,c)}({"":r},""):r}});var u1=R((IEe,o1)=>{"use strict";var Wb=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Wa,sm,n9={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},Nc;function Kb(t){return Wb.lastIndex=0,Wb.test(t)?'"'+t.replace(Wb,function(e){var r=n9[e];return typeof r=="string"?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function om(t,e){var r,n,i,a,s=Wa,o,c=e[t];switch(c&&typeof c=="object"&&typeof c.toJSON=="function"&&(c=c.toJSON(t)),typeof Nc=="function"&&(c=Nc.call(e,t,c)),typeof c){case"string":return Kb(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(Wa+=sm,o=[],Object.prototype.toString.apply(c)==="[object Array]"){for(a=c.length,r=0;r<a;r+=1)o[r]=om(r,c)||"null";return i=o.length===0?"[]":Wa?`[
`+Wa+o.join(`,
`+Wa)+`
`+s+"]":"["+o.join(",")+"]",Wa=s,i}if(Nc&&typeof Nc=="object")for(a=Nc.length,r=0;r<a;r+=1)n=Nc[r],typeof n=="string"&&(i=om(n,c),i&&o.push(Kb(n)+(Wa?": ":":")+i));else for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(i=om(n,c),i&&o.push(Kb(n)+(Wa?": ":":")+i));return i=o.length===0?"{}":Wa?`{
`+Wa+o.join(`,
`+Wa)+`
`+s+"}":"{"+o.join(",")+"}",Wa=s,i;default:}}o1.exports=function(t,e,r){var n;if(Wa="",sm="",typeof r=="number")for(n=0;n<r;n+=1)sm+=" ";else typeof r=="string"&&(sm=r);if(Nc=e,e&&typeof e!="function"&&(typeof e!="object"||typeof e.length!="number"))throw new Error("JSON.stringify");return om("",{"":t})}});var c1=R(Xb=>{"use strict";Xb.parse=s1();Xb.stringify=u1()});var d1=R((OEe,l1)=>{var a9={}.toString;l1.exports=Array.isArray||function(t){return a9.call(t)=="[object Array]"}});var Yb=R((PEe,p1)=>{"use strict";var f1=Object.prototype.toString;p1.exports=function(e){var r=f1.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&f1.call(e.callee)==="[object Function]"),n}});var S1=R((REe,w1)=>{"use strict";var _1;Object.keys||(ap=Object.prototype.hasOwnProperty,Jb=Object.prototype.toString,h1=Yb(),Qb=Object.prototype.propertyIsEnumerable,g1=!Qb.call({toString:null},"toString"),m1=Qb.call(function(){},"prototype"),sp=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],um=function(t){var e=t.constructor;return e&&e.prototype===t},v1={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},y1=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!v1["$"+t]&&ap.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{um(window[t])}catch{return!0}}catch{return!0}return!1}(),b1=function(t){if(typeof window>"u"||!y1)return um(t);try{return um(t)}catch{return!1}},_1=function(e){var r=e!==null&&typeof e=="object",n=Jb.call(e)==="[object Function]",i=h1(e),a=r&&Jb.call(e)==="[object String]",s=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var o=m1&&n;if(a&&e.length>0&&!ap.call(e,0))for(var c=0;c<e.length;++c)s.push(String(c));if(i&&e.length>0)for(var l=0;l<e.length;++l)s.push(String(l));else for(var f in e)!(o&&f==="prototype")&&ap.call(e,f)&&s.push(String(f));if(g1)for(var g=b1(e),m=0;m<sp.length;++m)!(g&&sp[m]==="constructor")&&ap.call(e,sp[m])&&s.push(sp[m]);return s});var ap,Jb,h1,Qb,g1,m1,sp,um,v1,y1,b1;w1.exports=_1});var x1=R((LEe,E1)=>{"use strict";var s9=Array.prototype.slice,o9=Yb(),T1=Object.keys,cm=T1?function(e){return T1(e)}:S1(),C1=Object.keys;cm.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return o9(n)?C1(s9.call(n)):C1(n)})}else Object.keys=cm;return Object.keys||cm};E1.exports=cm});var Zb=R((NEe,A1)=>{"use strict";A1.exports=Object});var I1=R((FEe,k1)=>{"use strict";k1.exports=Error});var O1=R((MEe,D1)=>{"use strict";D1.exports=EvalError});var R1=R((UEe,P1)=>{"use strict";P1.exports=RangeError});var N1=R(($Ee,L1)=>{"use strict";L1.exports=ReferenceError});var e_=R((BEe,F1)=>{"use strict";F1.exports=SyntaxError});var op=R((qEe,M1)=>{"use strict";M1.exports=TypeError});var $1=R((jEe,U1)=>{"use strict";U1.exports=URIError});var q1=R((HEe,B1)=>{"use strict";B1.exports=Math.abs});var H1=R((GEe,j1)=>{"use strict";j1.exports=Math.floor});var z1=R((zEe,G1)=>{"use strict";G1.exports=Math.max});var W1=R((VEe,V1)=>{"use strict";V1.exports=Math.min});var X1=R((WEe,K1)=>{"use strict";K1.exports=Math.pow});var J1=R((KEe,Y1)=>{"use strict";Y1.exports=Math.round});var Z1=R((XEe,Q1)=>{"use strict";Q1.exports=Number.isNaN||function(e){return e!==e}});var tk=R((YEe,ek)=>{"use strict";var u9=Z1();ek.exports=function(e){return u9(e)||e===0?e:e<0?-1:1}});var ik=R((JEe,rk)=>{"use strict";rk.exports=Object.getOwnPropertyDescriptor});var up=R((QEe,nk)=>{"use strict";var lm=ik();if(lm)try{lm([],"length")}catch{lm=null}nk.exports=lm});var cp=R((ZEe,ak)=>{"use strict";var dm=Object.defineProperty||!1;if(dm)try{dm({},"a",{value:1})}catch{dm=!1}ak.exports=dm});var ok=R((exe,sk)=>{"use strict";sk.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var lk=R((txe,ck)=>{"use strict";var uk=typeof Symbol<"u"&&Symbol,c9=ok();ck.exports=function(){return typeof uk!="function"||typeof Symbol!="function"||typeof uk("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:c9()}});var t_=R((rxe,dk)=>{"use strict";dk.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var r_=R((ixe,fk)=>{"use strict";var l9=Zb();fk.exports=l9.getPrototypeOf||null});var gk=R((nxe,hk)=>{"use strict";var d9="Function.prototype.bind called on incompatible ",f9=Object.prototype.toString,p9=Math.max,h9="[object Function]",pk=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var a=0;a<r.length;a+=1)n[a+e.length]=r[a];return n},g9=function(e,r){for(var n=[],i=r||0,a=0;i<e.length;i+=1,a+=1)n[a]=e[i];return n},m9=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};hk.exports=function(e){var r=this;if(typeof r!="function"||f9.apply(r)!==h9)throw new TypeError(d9+r);for(var n=g9(arguments,1),i,a=function(){if(this instanceof i){var f=r.apply(this,pk(n,arguments));return Object(f)===f?f:this}return r.apply(e,pk(n,arguments))},s=p9(0,r.length-n.length),o=[],c=0;c<s;c++)o[c]="$"+c;if(i=Function("binder","return function ("+m9(o,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i}});var ed=R((axe,mk)=>{"use strict";var v9=gk();mk.exports=Function.prototype.bind||v9});var fm=R((sxe,vk)=>{"use strict";vk.exports=Function.prototype.call});var pm=R((oxe,yk)=>{"use strict";yk.exports=Function.prototype.apply});var _k=R((uxe,bk)=>{"use strict";bk.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var i_=R((cxe,wk)=>{"use strict";var y9=ed(),b9=pm(),_9=fm(),w9=_k();wk.exports=w9||y9.call(_9,b9)});var hm=R((lxe,Tk)=>{"use strict";var S9=ed(),T9=op(),C9=fm(),E9=i_();Tk.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new T9("a function is required");return E9(S9,C9,e)}});var Ik=R((dxe,kk)=>{"use strict";var x9=hm(),Ck=up(),xk;try{xk=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var n_=!!xk&&Ck&&Ck(Object.prototype,"__proto__"),Ak=Object,Ek=Ak.getPrototypeOf;kk.exports=n_&&typeof n_.get=="function"?x9([n_.get]):typeof Ek=="function"?function(e){return Ek(e==null?e:Ak(e))}:!1});var Lk=R((fxe,Rk)=>{"use strict";var Dk=t_(),Ok=r_(),Pk=Ik();Rk.exports=Dk?function(e){return Dk(e)}:Ok?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return Ok(e)}:Pk?function(e){return Pk(e)}:null});var Fk=R((pxe,Nk)=>{"use strict";var A9=Function.prototype.call,k9=Object.prototype.hasOwnProperty,I9=ed();Nk.exports=I9.call(A9,k9)});var o_=R((hxe,jk)=>{"use strict";var pr,D9=Zb(),O9=I1(),P9=O1(),R9=R1(),L9=N1(),nd=e_(),id=op(),N9=$1(),F9=q1(),M9=H1(),U9=z1(),$9=W1(),B9=X1(),q9=J1(),j9=tk(),Bk=Function,a_=function(t){try{return Bk('"use strict"; return ('+t+").constructor;")()}catch{}},lp=up(),H9=cp(),s_=function(){throw new id},G9=lp?function(){try{return arguments.callee,s_}catch{try{return lp(arguments,"callee").get}catch{return s_}}}():s_,td=lk()(),Cn=Lk(),z9=r_(),V9=t_(),qk=pm(),dp=fm(),rd={},W9=typeof Uint8Array>"u"||!Cn?pr:Cn(Uint8Array),Fc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?pr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?pr:ArrayBuffer,"%ArrayIteratorPrototype%":td&&Cn?Cn([][Symbol.iterator]()):pr,"%AsyncFromSyncIteratorPrototype%":pr,"%AsyncFunction%":rd,"%AsyncGenerator%":rd,"%AsyncGeneratorFunction%":rd,"%AsyncIteratorPrototype%":rd,"%Atomics%":typeof Atomics>"u"?pr:Atomics,"%BigInt%":typeof BigInt>"u"?pr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?pr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?pr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?pr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":O9,"%eval%":eval,"%EvalError%":P9,"%Float16Array%":typeof Float16Array>"u"?pr:Float16Array,"%Float32Array%":typeof Float32Array>"u"?pr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?pr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?pr:FinalizationRegistry,"%Function%":Bk,"%GeneratorFunction%":rd,"%Int8Array%":typeof Int8Array>"u"?pr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?pr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?pr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":td&&Cn?Cn(Cn([][Symbol.iterator]())):pr,"%JSON%":typeof JSON=="object"?JSON:pr,"%Map%":typeof Map>"u"?pr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!td||!Cn?pr:Cn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":D9,"%Object.getOwnPropertyDescriptor%":lp,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?pr:Promise,"%Proxy%":typeof Proxy>"u"?pr:Proxy,"%RangeError%":R9,"%ReferenceError%":L9,"%Reflect%":typeof Reflect>"u"?pr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?pr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!td||!Cn?pr:Cn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?pr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":td&&Cn?Cn(""[Symbol.iterator]()):pr,"%Symbol%":td?Symbol:pr,"%SyntaxError%":nd,"%ThrowTypeError%":G9,"%TypedArray%":W9,"%TypeError%":id,"%Uint8Array%":typeof Uint8Array>"u"?pr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?pr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?pr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?pr:Uint32Array,"%URIError%":N9,"%WeakMap%":typeof WeakMap>"u"?pr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?pr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?pr:WeakSet,"%Function.prototype.call%":dp,"%Function.prototype.apply%":qk,"%Object.defineProperty%":H9,"%Object.getPrototypeOf%":z9,"%Math.abs%":F9,"%Math.floor%":M9,"%Math.max%":U9,"%Math.min%":$9,"%Math.pow%":B9,"%Math.round%":q9,"%Math.sign%":j9,"%Reflect.getPrototypeOf%":V9};if(Cn)try{null.error}catch(t){Mk=Cn(Cn(t)),Fc["%Error.prototype%"]=Mk}var Mk,K9=function t(e){var r;if(e==="%AsyncFunction%")r=a_("async function () {}");else if(e==="%GeneratorFunction%")r=a_("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=a_("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Cn&&(r=Cn(i.prototype))}return Fc[e]=r,r},Uk={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},fp=ed(),gm=Fk(),X9=fp.call(dp,Array.prototype.concat),Y9=fp.call(qk,Array.prototype.splice),$k=fp.call(dp,String.prototype.replace),mm=fp.call(dp,String.prototype.slice),J9=fp.call(dp,RegExp.prototype.exec),Q9=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Z9=/\\(\\)?/g,eW=function(e){var r=mm(e,0,1),n=mm(e,-1);if(r==="%"&&n!=="%")throw new nd("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new nd("invalid intrinsic syntax, expected opening `%`");var i=[];return $k(e,Q9,function(a,s,o,c){i[i.length]=o?$k(c,Z9,"$1"):s||a}),i},tW=function(e,r){var n=e,i;if(gm(Uk,n)&&(i=Uk[n],n="%"+i[0]+"%"),gm(Fc,n)){var a=Fc[n];if(a===rd&&(a=K9(n)),typeof a>"u"&&!r)throw new id("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new nd("intrinsic "+e+" does not exist!")};jk.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new id("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new id('"allowMissing" argument must be a boolean');if(J9(/^%?[^%]*%?$/,e)===null)throw new nd("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=eW(e),i=n.length>0?n[0]:"",a=tW("%"+i+"%",r),s=a.name,o=a.value,c=!1,l=a.alias;l&&(i=l[0],Y9(n,X9([0,1],l)));for(var f=1,g=!0;f<n.length;f+=1){var m=n[f],y=mm(m,0,1),x=mm(m,-1);if((y==='"'||y==="'"||y==="`"||x==='"'||x==="'"||x==="`")&&y!==x)throw new nd("property names with quotes must have matching quotes");if((m==="constructor"||!g)&&(c=!0),i+="."+m,s="%"+i+"%",gm(Fc,s))o=Fc[s];else if(o!=null){if(!(m in o)){if(!r)throw new id("base intrinsic for "+e+" exists, but the property is not available.");return}if(lp&&f+1>=n.length){var I=lp(o,m);g=!!I,g&&"get"in I&&!("originalValue"in I.get)?o=I.get:o=o[m]}else g=gm(o,m),o=o[m];g&&!c&&(Fc[s]=o)}}return o}});var Vk=R((gxe,zk)=>{"use strict";var Hk=cp(),rW=e_(),ad=op(),Gk=up();zk.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new ad("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new ad("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ad("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ad("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ad("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ad("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,c=!!Gk&&Gk(e,r);if(Hk)Hk(e,r,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:a===null&&c?c.writable:!a});else if(o||!i&&!a&&!s)e[r]=n;else throw new rW("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Xk=R((mxe,Kk)=>{"use strict";var u_=cp(),Wk=function(){return!!u_};Wk.hasArrayLengthDefineBug=function(){if(!u_)return null;try{return u_([],"length",{value:1}).length!==1}catch{return!0}};Kk.exports=Wk});var eI=R((vxe,Zk)=>{"use strict";var iW=o_(),Yk=Vk(),nW=Xk()(),Jk=up(),Qk=op(),aW=iW("%Math.floor%");Zk.exports=function(e,r){if(typeof e!="function")throw new Qk("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||aW(r)!==r)throw new Qk("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in e&&Jk){var s=Jk(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(a=!1)}return(i||a||!n)&&(nW?Yk(e,"length",r,!0,!0):Yk(e,"length",r)),e}});var rI=R((yxe,tI)=>{"use strict";var sW=ed(),oW=pm(),uW=i_();tI.exports=function(){return uW(sW,oW,arguments)}});var aI=R((bxe,vm)=>{"use strict";var cW=eI(),iI=cp(),lW=hm(),nI=rI();vm.exports=function(e){var r=lW(arguments),n=e.length-(arguments.length-1);return cW(r,1+(n>0?n:0),!0)};iI?iI(vm.exports,"apply",{value:nI}):vm.exports.apply=nI});var cI=R((_xe,uI)=>{"use strict";var sI=o_(),oI=hm(),dW=oI([sI("%String.prototype.indexOf%")]);uI.exports=function(e,r){var n=sI(e,!!r);return typeof n=="function"&&dW(e,".prototype.")>-1?oI([n]):n}});var pI=R((wxe,fI)=>{"use strict";var ym=(typeof JSON<"u"?JSON:c1()).stringify,fW=d1(),pW=x1(),hW=aI(),bm=cI(),gW=bm("Array.prototype.join"),lI=bm("Array.prototype.indexOf"),mW=bm("Array.prototype.splice"),vW=bm("Array.prototype.sort"),dI=function(e,r){for(var n="",i=0;i<e;i+=1)n+=r;return n},yW=function(t,e,r){return r};fI.exports=function(e){var r=arguments.length>1?arguments[1]:void 0,n=r&&r.space||"";typeof n=="number"&&(n=dI(n," "));var i=!!r&&typeof r.cycles=="boolean"&&r.cycles,a=r&&r.replacer?hW(r.replacer):yW;if(r&&typeof r.collapseEmpty<"u"&&typeof r.collapseEmpty!="boolean")throw new TypeError("`collapseEmpty` must be a boolean, if provided");var s=!!r&&r.collapseEmpty,o=typeof r=="function"?r:r&&r.cmp,c=o&&function(f){var g=o.length>2&&function(y){return f[y]};return function(m,y){return o({key:m,value:f[m]},{key:y,value:f[y]},g?{__proto__:null,get:g}:void 0)}},l=[];return function f(g,m,y,x){var I=n?`
`+dI(x,n):"",A=n?": ":":";if(y&&y.toJSON&&typeof y.toJSON=="function"&&(y=y.toJSON()),y=a(g,m,y),y!==void 0){if(typeof y!="object"||y===null)return ym(y);var F=function(G,ie){return s&&G.length===0?ie:(ie==="[]"?"[":"{")+gW(G,",")+I+(ie==="[]"?"]":"}")};if(fW(y)){for(var H=[],X=0;X<y.length;X++){var de=f(y,X,y[X],x+1)||ym(null);H[H.length]=I+n+de}return F(H,"[]")}if(lI(l,y)!==-1){if(i)return ym("__cycle__");throw new TypeError("Converting circular structure to JSON")}else l[l.length]=y;for(var N=vW(pW(y),c&&c(y)),H=[],X=0;X<N.length;X++){var m=N[X],z=f(y,m,y[m],x+1);if(z){var Y=ym(m)+A+z;H[H.length]=I+n+Y}}return mW(l,lI(l,y),1),F(H,"{}")}}({"":e},"",e,0)}});var no=R((Sxe,hI)=>{var pp;typeof window<"u"||typeof window<"u"?pp=window:typeof self<"u"?pp=self:pp={};hI.exports=pp});var gI=R(()=>{});var c_=R((Exe,vI)=>{var mI=typeof window<"u"||typeof window<"u"?window:{},bW=gI(),hp;typeof document<"u"?hp=document:(hp=mI["__GLOBAL_DOCUMENT_CACHE@4"],hp||(hp=mI["__GLOBAL_DOCUMENT_CACHE@4"]=bW));vI.exports=hp});var _m=R((xxe,Bo)=>{function l_(){return Bo.exports=l_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bo.exports.__esModule=!0,Bo.exports.default=Bo.exports,l_.apply(null,arguments)}Bo.exports=l_,Bo.exports.__esModule=!0,Bo.exports.default=Bo.exports});var wI=R((Mc,_I)=>{function yI(t){if(t&&typeof t=="object"){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if(typeof t=="number")return bI[t];var r=String(t),n=qo[r.toLowerCase()];if(n)return n;var n=wm[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}yI.isEventKey=function(e,r){if(e&&typeof e=="object"){var n=e.which||e.keyCode||e.charCode;if(n==null)return!1;if(typeof r=="string"){var i=qo[r.toLowerCase()];if(i)return i===n;var i=wm[r.toLowerCase()];if(i)return i===n}else if(typeof r=="number")return r===n;return!1}};Mc=_I.exports=yI;var qo=Mc.code=Mc.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},wm=Mc.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(Li=97;Li<123;Li++)qo[String.fromCharCode(Li)]=Li-32;for(Li=48;Li<58;Li++)qo[Li-48]=Li;var Li;for(Li=1;Li<13;Li++)qo["f"+Li]=Li+111;for(Li=0;Li<10;Li++)qo["numpad "+Li]=Li+96;var bI=Mc.names=Mc.title={};for(Li in qo)bI[qo[Li]]=Li;for(d_ in wm)qo[d_]=wm[d_];var d_});var f_=R((Axe,gp)=>{function _W(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}gp.exports=_W,gp.exports.__esModule=!0,gp.exports.default=gp.exports});var mp=R((kxe,jo)=>{function p_(t,e){return jo.exports=p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},jo.exports.__esModule=!0,jo.exports.default=jo.exports,p_(t,e)}jo.exports=p_,jo.exports.__esModule=!0,jo.exports.default=jo.exports});var h_=R((Ixe,vp)=>{var wW=mp();function SW(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,wW(t,e)}vp.exports=SW,vp.exports.__esModule=!0,vp.exports.default=vp.exports});var TI=R((Dxe,SI)=>{SI.exports=TW;function TW(t,e){var r,n=null;try{r=JSON.parse(t,e)}catch(i){n=i}return[n,r]}});var EI=R((Oxe,CI)=>{CI.exports=EW;var CW=Object.prototype.toString;function EW(t){if(!t)return!1;var e=CW.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}});var AI=R((Pxe,xI)=>{"use strict";var xW=no(),AW=function(e,r){return r===void 0&&(r=!1),function(n,i,a){if(n){e(n);return}if(i.statusCode>=400&&i.statusCode<=599){var s=a;if(r)if(xW.TextDecoder){var o=kW(i.headers&&i.headers["content-type"]);try{s=new TextDecoder(o).decode(a)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s});return}e(null,a)}};function kW(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,r){var n=r.split("="),i=n[0],a=n[1];return i.trim()==="charset"?a.trim():e},"utf-8")}xI.exports=AW});var OI=R((Rxe,g_)=>{"use strict";var kI=no(),IW=_m(),DW=EI();ao.httpHandler=AI();var OW=function(e){var r={};return e&&e.trim().split(`
`).forEach(function(n){var i=n.indexOf(":"),a=n.slice(0,i).trim().toLowerCase(),s=n.slice(i+1).trim();typeof r[a]>"u"?r[a]=s:Array.isArray(r[a])?r[a].push(s):r[a]=[r[a],s]}),r};g_.exports=ao;g_.exports.default=ao;ao.XMLHttpRequest=kI.XMLHttpRequest||NW;ao.XDomainRequest="withCredentials"in new ao.XMLHttpRequest?ao.XMLHttpRequest:kI.XDomainRequest;PW(["get","put","post","patch","head","delete"],function(t){ao[t==="delete"?"del":t]=function(e,r,n){return r=II(e,r,n),r.method=t.toUpperCase(),DI(r)}});function PW(t,e){for(var r=0;r<t.length;r++)e(t[r])}function RW(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function II(t,e,r){var n=t;return DW(e)?(r=e,typeof t=="string"&&(n={uri:t})):n=IW({},e,{uri:t}),n.callback=r,n}function ao(t,e,r){return e=II(t,e,r),DI(e)}function DI(t){if(typeof t.callback>"u")throw new Error("callback argument missing");var e=!1,r=function(de,N,H){e||(e=!0,t.callback(de,N,H))};function n(){o.readyState===4&&setTimeout(s,0)}function i(){var X=void 0;if(o.response?X=o.response:X=o.responseText||LW(o),I)try{X=JSON.parse(X)}catch{}return X}function a(X){return clearTimeout(A),X instanceof Error||(X=new Error(""+(X||"Unknown XMLHttpRequest Error"))),X.statusCode=0,r(X,F)}function s(){if(!l){var X;clearTimeout(A),t.useXDR&&o.status===void 0?X=200:X=o.status===1223?204:o.status;var de=F,N=null;return X!==0?(de={body:i(),statusCode:X,method:g,headers:{},url:f,rawRequest:o},o.getAllResponseHeaders&&(de.headers=OW(o.getAllResponseHeaders()))):N=new Error("Internal XMLHttpRequest Error"),r(N,de,de.body)}}var o=t.xhr||null;o||(t.cors||t.useXDR?o=new ao.XDomainRequest:o=new ao.XMLHttpRequest);var c,l,f=o.url=t.uri||t.url,g=o.method=t.method||"GET",m=t.body||t.data,y=o.headers=t.headers||{},x=!!t.sync,I=!1,A,F={body:void 0,headers:{},statusCode:0,method:g,url:f,rawRequest:o};if("json"in t&&t.json!==!1&&(I=!0,y.accept||y.Accept||(y.Accept="application/json"),g!=="GET"&&g!=="HEAD"&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),m=JSON.stringify(t.json===!0?m:t.json))),o.onreadystatechange=n,o.onload=s,o.onerror=a,o.onprogress=function(){},o.onabort=function(){l=!0},o.ontimeout=a,o.open(g,f,!x,t.username,t.password),x||(o.withCredentials=!!t.withCredentials),!x&&t.timeout>0&&(A=setTimeout(function(){if(!l){l=!0,o.abort("timeout");var X=new Error("XMLHttpRequest timeout");X.code="ETIMEDOUT",a(X)}},t.timeout)),o.setRequestHeader)for(c in y)y.hasOwnProperty(c)&&o.setRequestHeader(c,y[c]);else if(t.headers&&!RW(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(o.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(o),o.send(m||null),o}function LW(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function NW(){}});var UI=R((Lxe,MI)=>{var PI=c_(),v_=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function Ka(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}Ka.prototype=v_(Error.prototype);Ka.prototype.constructor=Ka;Ka.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function y_(t){function e(n,i,a,s){return(n|0)*3600+(i|0)*60+(a|0)+(s|0)/1e3}var r=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function bp(){this.values=v_(null)}bp.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){var r;return(r=e.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function yp(t,e,r,n){var i=n?t.split(n):[t];for(var a in i)if(typeof i[a]=="string"){var s=i[a].split(r);if(s.length===2){var o=s[0].trim(),c=s[1].trim();e(o,c)}}}function FW(t,e,r){var n=t;function i(){var o=y_(t);if(o===null)throw new Ka(Ka.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,c){var l=new bp;yp(o,function(f,g){switch(f){case"region":for(var m=r.length-1;m>=0;m--)if(r[m].id===g){l.set(f,r[m].region);break}break;case"vertical":l.alt(f,g,["rl","lr"]);break;case"line":var y=g.split(","),x=y[0];l.integer(f,x),l.percent(f,x)&&l.set("snapToLines",!1),l.alt(f,x,["auto"]),y.length===2&&l.alt("lineAlign",y[1],["start","center","end"]);break;case"position":y=g.split(","),l.percent(f,y[0]),y.length===2&&l.alt("positionAlign",y[1],["start","center","end"]);break;case"size":l.percent(f,g);break;case"align":l.alt(f,g,["start","center","end","left","right"]);break}},/:/,/\s/),c.region=l.get("region",null),c.vertical=l.get("vertical","");try{c.line=l.get("line","auto")}catch{}c.lineAlign=l.get("lineAlign","start"),c.snapToLines=l.get("snapToLines",!0),c.size=l.get("size",100);try{c.align=l.get("align","center")}catch{c.align=l.get("align","middle")}try{c.position=l.get("position","auto")}catch{c.position=l.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},c.align)}c.positionAlign=l.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},c.align)}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),t.substr(0,3)!=="-->")throw new Ka(Ka.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.substr(3),s(),e.endTime=i(),s(),a(t,e)}var m_=PI.createElement&&PI.createElement("textarea"),MW={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},RI={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},UW={v:"title",lang:"lang"},LI={rt:"ruby"};function FI(t,e){function r(){if(!e)return null;function x(A){return e=e.substr(A.length),A}var I=e.match(/^([^<]*)(<[^>]*>?)?/);return x(I[1]?I[1]:I[2])}function n(x){return m_.innerHTML=x,x=m_.textContent,m_.textContent="",x}function i(x,I){return!LI[I.localName]||LI[I.localName]===x.localName}function a(x,I){var A=MW[x];if(!A)return null;var F=t.document.createElement(A),X=UW[x];return X&&I&&(F[X]=I.trim()),F}for(var s=t.document.createElement("div"),o=s,c,l=[];(c=r())!==null;){if(c[0]==="<"){if(c[1]==="/"){l.length&&l[l.length-1]===c.substr(2).replace(">","")&&(l.pop(),o=o.parentNode);continue}var f=y_(c.substr(1,c.length-2)),g;if(f){g=t.document.createProcessingInstruction("timestamp",f),o.appendChild(g);continue}var m=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m||(g=a(m[1],m[3]),!g)||!i(o,g))continue;if(m[2]){var y=m[2].split(".");y.forEach(function(x){var I=/^bg_/.test(x),A=I?x.slice(3):x;if(RI.hasOwnProperty(A)){var F=I?"background-color":"color",X=RI[A];g.style[F]=X}}),g.className=y.join(" ")}l.push(m[1]),o.appendChild(g),o=g;continue}o.appendChild(t.document.createTextNode(n(c)))}return s}var NI=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function $W(t){for(var e=0;e<NI.length;e++){var r=NI[e];if(t>=r[0]&&t<=r[1])return!0}return!1}function BW(t){var e=[],r="",n;if(!t||!t.childNodes)return"ltr";function i(o,c){for(var l=c.childNodes.length-1;l>=0;l--)o.push(c.childNodes[l])}function a(o){if(!o||!o.length)return null;var c=o.pop(),l=c.textContent||c.innerText;if(l){var f=l.match(/^.*(\n|\r)/);return f?(o.length=0,f[0]):l}if(c.tagName==="ruby")return a(o);if(c.childNodes)return i(o,c),a(o)}for(i(e,t);r=a(e);)for(var s=0;s<r.length;s++)if(n=r.charCodeAt(s),$W(n))return"rtl";return"ltr"}function qW(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,r=e.textTrackList,n=0,i=0;i<r.length&&r[i]!==e;i++)r[i].mode==="showing"&&n++;return++n*-1}function Tm(){}Tm.prototype.applyStyles=function(t,e){e=e||this.div;for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])};Tm.prototype.formatStyle=function(t,e){return t===0?0:t+e};function Sm(t,e,r){Tm.call(this),this.cue=e,this.cueDiv=FI(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:BW(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var i=0;switch(e.positionAlign){case"start":case"line-left":i=e.position;break;case"center":i=e.position-e.size/2;break;case"end":case"line-right":i=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}Sm.prototype=v_(Tm.prototype);Sm.prototype.constructor=Sm;function pa(t){var e,r,n,i;if(t.div){r=t.div.offsetHeight,n=t.div.offsetWidth,i=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||r,this.bottom=t.bottom||i+(t.height||r),this.width=t.width||n,this.lineHeight=e!==void 0?e:t.lineHeight}pa.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};pa.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};pa.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};pa.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};pa.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};pa.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),r=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),n=e*r;return n/(this.height*this.width)};pa.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};pa.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,r=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var i={left:t.left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||r};return i};function jW(t,e,r,n){function i(A,F){for(var X,de=new pa(A),N=1,H=0;H<F.length;H++){for(;A.overlapsOppositeAxis(r,F[H])||A.within(r)&&A.overlapsAny(n);)A.move(F[H]);if(A.within(r))return A;var z=A.intersectPercentage(r);N>z&&(X=new pa(A),N=z),A=new pa(de)}return X||de}var a=new pa(e),s=e.cue,o=qW(s),c=[];if(s.snapToLines){var l;switch(s.vertical){case"":c=["+y","-y"],l="height";break;case"rl":c=["+x","-x"],l="width";break;case"lr":c=["-x","+x"],l="width";break}var f=a.lineHeight,g=f*Math.round(o),m=r[l]+f,y=c[0];Math.abs(g)>m&&(g=g<0?-1:1,g*=Math.ceil(m/f)*f),o<0&&(g+=s.vertical===""?r.height:r.width,c=c.reverse()),a.move(y,g)}else{var x=a.lineHeight/r.height*100;switch(s.lineAlign){case"center":o-=x/2;break;case"end":o-=x;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}c=["+y","-x","+x","-y"],a=new pa(e)}var I=i(a,c);e.move(I.toCSSCompatValues(r))}function sd(){}sd.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};sd.convertCueToDOMTree=function(t,e){return!t||!e?null:FI(t,e)};var HW=.05,GW="sans-serif",zW="1.5%";sd.processCues=function(t,e,r){if(!t||!e||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=t.document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=zW,r.appendChild(n);function i(f){for(var g=0;g<f.length;g++)if(f[g].hasBeenReset||!f[g].displayState)return!0;return!1}if(!i(e)){for(var a=0;a<e.length;a++)n.appendChild(e[a].displayState);return}var s=[],o=pa.getSimpleBoxPosition(n),c=Math.round(o.height*HW*100)/100,l={font:c+"px "+GW};(function(){for(var f,g,m=0;m<e.length;m++)g=e[m],f=new Sm(t,g,l),n.appendChild(f.div),jW(t,f,o,s),g.displayState=f.div,s.push(pa.getSimpleBoxPosition(f))})()};sd.Parser=function(t,e,r){r||(r=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]};sd.Parser.prototype={reportOrThrowError:function(t){if(t instanceof Ka)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function r(){for(var f=e.buffer,g=0;g<f.length&&f[g]!=="\r"&&f[g]!==`
`;)++g;var m=f.substr(0,g);return f[g]==="\r"&&++g,f[g]===`
`&&++g,e.buffer=f.substr(g),m}function n(f){var g=new bp;if(yp(f,function(y,x){switch(y){case"id":g.set(y,x);break;case"width":g.percent(y,x);break;case"lines":g.integer(y,x);break;case"regionanchor":case"viewportanchor":var I=x.split(",");if(I.length!==2)break;var A=new bp;if(A.percent("x",I[0]),A.percent("y",I[1]),!A.has("x")||!A.has("y"))break;g.set(y+"X",A.get("x")),g.set(y+"Y",A.get("y"));break;case"scroll":g.alt(y,x,["up"]);break}},/=/,/\s/),g.has("id")){var m=new(e.vttjs.VTTRegion||e.window.VTTRegion);m.width=g.get("width",100),m.lines=g.get("lines",3),m.regionAnchorX=g.get("regionanchorX",0),m.regionAnchorY=g.get("regionanchorY",100),m.viewportAnchorX=g.get("viewportanchorX",0),m.viewportAnchorY=g.get("viewportanchorY",100),m.scroll=g.get("scroll",""),e.onregion&&e.onregion(m),e.regionList.push({id:g.get("id"),region:m})}}function i(f){var g=new bp;yp(f,function(m,y){switch(m){case"MPEGT":g.integer(m+"S",y);break;case"LOCA":g.set(m+"L",y_(y));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:g.get("MPEGTS"),LOCAL:g.get("LOCAL")})}function a(f){f.match(/X-TIMESTAMP-MAP/)?yp(f,function(g,m){switch(g){case"X-TIMESTAMP-MAP":i(m);break}},/=/):yp(f,function(g,m){switch(g){case"Region":n(m);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=r();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Ka(Ka.Errors.BadSignature);e.state="HEADER"}for(var c=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(c?c=!1:s=r(),e.state){case"HEADER":/:/.test(s)?a(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{FW(s,e.cue,e.regionList)}catch(f){e.reportOrThrowError(f),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var l=s.indexOf("-->")!==-1;if(!s||l&&(c=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(f){e.reportOrThrowError(f),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new Ka(Ka.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};MI.exports=sd});var qI=R((Nxe,BI)=>{var VW="auto",WW={"":1,lr:1,rl:1},KW={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function XW(t){if(typeof t!="string")return!1;var e=WW[t.toLowerCase()];return e?t.toLowerCase():!1}function b_(t){if(typeof t!="string")return!1;var e=KW[t.toLowerCase()];return e?t.toLowerCase():!1}function $I(t,e,r){this.hasBeenReset=!1;var n="",i=!1,a=t,s=e,o=r,c=null,l="",f=!0,g="auto",m="start",y="auto",x="auto",I=100,A="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(F){n=""+F}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(F){i=!!F}},startTime:{enumerable:!0,get:function(){return a},set:function(F){if(typeof F!="number")throw new TypeError("Start time must be set to a number.");a=F,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(F){if(typeof F!="number")throw new TypeError("End time must be set to a number.");s=F,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(F){o=""+F,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(F){c=F,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(F){var X=XW(F);if(X===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=X,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return f},set:function(F){f=!!F,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return g},set:function(F){if(typeof F!="number"&&F!==VW)throw new SyntaxError("Line: an invalid number or illegal string was specified.");g=F,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(F){var X=b_(F);X?(m=X,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return y},set:function(F){if(F<0||F>100)throw new Error("Position must be between 0 and 100.");y=F,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return x},set:function(F){var X=b_(F);X?(x=X,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return I},set:function(F){if(F<0||F>100)throw new Error("Size must be between 0 and 100.");I=F,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return A},set:function(F){var X=b_(F);if(!X)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");A=X,this.hasBeenReset=!0}}}),this.displayState=void 0}$I.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};BI.exports=$I});var HI=R((Fxe,jI)=>{var YW={"":!0,up:!0};function JW(t){if(typeof t!="string")return!1;var e=YW[t.toLowerCase()];return e?t.toLowerCase():!1}function _p(t){return typeof t=="number"&&t>=0&&t<=100}function QW(){var t=100,e=3,r=0,n=100,i=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(o){if(!_p(o))throw new Error("Width must be between 0 and 100.");t=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(o){if(!_p(o))throw new Error("RegionAnchorX must be between 0 and 100.");n=o}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!_p(o))throw new Error("RegionAnchorY must be between 0 and 100.");r=o}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(o){if(!_p(o))throw new Error("ViewportAnchorY must be between 0 and 100.");a=o}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!_p(o))throw new Error("ViewportAnchorX must be between 0 and 100.");i=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var c=JW(o);c===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=c}}})}jI.exports=QW});var zI=R((Mxe,GI)=>{var Ho=no(),Uc=GI.exports={WebVTT:UI(),VTTCue:qI(),VTTRegion:HI()};Ho.vttjs=Uc;Ho.WebVTT=Uc.WebVTT;var ZW=Uc.VTTCue,eK=Uc.VTTRegion,tK=Ho.VTTCue,rK=Ho.VTTRegion;Uc.shim=function(){Ho.VTTCue=ZW,Ho.VTTRegion=eK};Uc.restore=function(){Ho.VTTCue=tK,Ho.VTTRegion=rK};Ho.VTTCue||Uc.shim()});var WI=R((Uxe,Go)=>{function VI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Go.exports=VI=function(){return!!t},Go.exports.__esModule=!0,Go.exports.default=Go.exports)()}Go.exports=VI,Go.exports.__esModule=!0,Go.exports.default=Go.exports});var __=R(($xe,wp)=>{var iK=WI(),nK=mp();function aK(t,e,r){if(iK())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&nK(i,r.prototype),i}wp.exports=aK,wp.exports.__esModule=!0,wp.exports.default=wp.exports});var KI=R((Bxe,Sp)=>{var sK=mp();function oK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sK(t,e)}Sp.exports=oK,Sp.exports.__esModule=!0,Sp.exports.default=Sp.exports});var Cp=R((qxe,Tp)=>{function uK(t){return t&&t.__esModule?t:{default:t}}Tp.exports=uK,Tp.exports.__esModule=!0,Tp.exports.default=Tp.exports});var XI=R((Ep,w_)=>{(function(t){var e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(s,o,c){if(c=c||{},s=s.trim(),o=o.trim(),!o){if(!c.alwaysNormalize)return s;var l=a.parseURL(s);if(!l)throw new Error("Error trying to parse base URL.");return l.path=a.normalizePath(l.path),a.buildURLFromParts(l)}var f=a.parseURL(o);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):o;var g=a.parseURL(s);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var m=r.exec(g.path);g.netLoc=m[1],g.path=m[2]}g.netLoc&&!g.path&&(g.path="/");var y={scheme:g.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(y.netLoc=g.netLoc,f.path[0]!=="/"))if(!f.path)y.path=g.path,f.params||(y.params=g.params,f.query||(y.query=g.query));else{var x=g.path,I=x.substring(0,x.lastIndexOf("/")+1)+f.path;y.path=a.normalizePath(I)}return y.path===null&&(y.path=c.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(y)},parseURL:function(s){var o=e.exec(s);return o?{scheme:o[1]||"",netLoc:o[2]||"",path:o[3]||"",params:o[4]||"",query:o[5]||"",fragment:o[6]||""}:null},normalizePath:function(s){for(s=s.split("").reverse().join("").replace(n,"");s.length!==(s=s.replace(i,"")).length;);return s.split("").reverse().join("")},buildURLFromParts:function(s){return s.scheme+s.netLoc+s.path+s.params+s.query+s.fragment}};typeof Ep=="object"&&typeof w_=="object"?w_.exports=a:typeof define=="function"&&define.amd?define([],function(){return a}):typeof Ep=="object"?Ep.URLToolkit=a:t.URLToolkit=a})(Ep)});var S_=R((xp,ZI)=>{"use strict";var QI=Cp();Object.defineProperty(xp,"__esModule",{value:!0});xp.default=void 0;var YI=QI(XI()),$u=QI(no()),JI="http://example.com",cK=function(e,r){if(/^[a-z]+:/i.test(r))return r;/^data:/.test(e)&&(e=$u.default.location&&$u.default.location.href||"");var n=typeof $u.default.URL=="function",i=/^\/\//.test(e),a=!$u.default.location&&!/\/\//i.test(e);if(n?e=new $u.default.URL(e,$u.default.location||JI):/\/\//i.test(e)||(e=YI.default.buildAbsoluteURL($u.default.location&&$u.default.location.href||"",e)),n){var s=new URL(r,e);return a?s.href.slice(JI.length):i?s.href.slice(s.protocol.length):s.href}return YI.default.buildAbsoluteURL(e,r)},lK=cK;xp.default=lK;ZI.exports=xp.default});var tD=R((Ap,eD)=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.default=void 0;var dK=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(n,i){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(i)},e.off=function(n,i){if(!this.listeners[n])return!1;var a=this.listeners[n].indexOf(i);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(a,1),a>-1},e.trigger=function(n){var i=this.listeners[n];if(i)if(arguments.length===2)for(var a=i.length,s=0;s<a;++s)i[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),c=i.length,l=0;l<c;++l)i[l].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(i){n.push(i)})},t}();Ap.default=dK;eD.exports=Ap.default});var T_=R((Cm,iD)=>{"use strict";var fK=Cp();Object.defineProperty(Cm,"__esModule",{value:!0});Cm.default=hK;var rD=fK(no()),pK=function(e){return rD.default.atob?rD.default.atob(e):Buffer.from(e,"base64").toString("binary")};function hK(t){for(var e=pK(t),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}iD.exports=Cm.default});var oD=R(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});var gK=h_(),mK=tD(),vK=_m(),yK=f_(),bK=T_();function kp(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var x_=kp(gK),A_=kp(mK),nD=kp(vK),_K=kp(yK),wK=kp(bK),aD=function(t){x_.default(e,t);function e(){var n;return n=t.call(this)||this,n.buffer="",n}var r=e.prototype;return r.push=function(i){var a;for(this.buffer+=i,a=this.buffer.indexOf(`
`);a>-1;a=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)},e}(A_.default),SK="	",C_=function(e){var r=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return r[1]&&(n.length=parseInt(r[1],10)),r[2]&&(n.offset=parseInt(r[2],10)),n},TK=function(){var e="[^=]*",r='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+r+")";return new RegExp("(?:^|,)("+n+")")},As=function(e){for(var r=e.split(TK()),n={},i=r.length,a;i--;)r[i]!==""&&(a=/([^=]*)=(.*)/.exec(r[i]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),n[a[0]]=a[1]);return n},sD=function(t){x_.default(e,t);function e(){var n;return n=t.call(this)||this,n.customParsers=[],n.tagMappers=[],n}var r=e.prototype;return r.push=function(i){var a=this,s,o;if(i=i.trim(),i.length!==0){if(i[0]!=="#"){this.trigger("data",{type:"uri",uri:i});return}var c=this.tagMappers.reduce(function(l,f){var g=f(i);return g===i?l:l.concat([g])},[i]);c.forEach(function(l){for(var f=0;f<a.customParsers.length;f++)if(a.customParsers[f].call(a,l))return;if(l.indexOf("#EXT")!==0){a.trigger("data",{type:"comment",text:l.slice(1)});return}if(l=l.replace("\r",""),s=/^#EXTM3U/.exec(l),s){a.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(l),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),a.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),a.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(l),s){o=nD.default(C_(s[1]),{type:"tag",tagType:"byterange"}),a.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(l),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(l),s){if(o={type:"tag",tagType:"map"},s[1]){var g=As(s[1]);g.URI&&(o.uri=g.URI),g.BYTERANGE&&(o.byterange=C_(g.BYTERANGE))}a.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(l),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=As(s[1]),o.attributes.RESOLUTION){var m=o.attributes.RESOLUTION.split("x"),y={};m[0]&&(y.width=parseInt(m[0],10)),m[1]&&(y.height=parseInt(m[1],10)),o.attributes.RESOLUTION=y}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(l),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=As(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(l),s){a.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(l),s){a.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(l),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(l),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=As(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),a.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(l),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=As(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=As(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(SK)),a.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=As(s[1]),["DURATION"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=parseFloat(o.attributes[x]))}),["INDEPENDENT","GAP"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=/YES/.test(o.attributes[x]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=C_(o.attributes.BYTERANGE)),a.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=As(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=parseFloat(o.attributes[x]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=/YES/.test(o.attributes[x]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=As(s[1]),["PART-TARGET"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=parseFloat(o.attributes[x]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=As(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(x){if(o.attributes.hasOwnProperty(x)){o.attributes[x]=parseInt(o.attributes[x],10);var I=x==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[I]=o.attributes[x],delete o.attributes[x]}}),a.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=As(s[1]),["LAST-MSN","LAST-PART"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=parseInt(o.attributes[x],10))}),a.trigger("data",o);return}a.trigger("data",{type:"tag",data:l.slice(4)})})}},r.addParser=function(i){var a=this,s=i.expression,o=i.customType,c=i.dataParser,l=i.segment;typeof c!="function"&&(c=function(g){return g}),this.customParsers.push(function(f){var g=s.exec(f);if(g)return a.trigger("data",{type:"custom",data:c(f),customType:o,segment:l}),!0})},r.addTagMapper=function(i){var a=i.expression,s=i.map,o=function(l){return a.test(l)?s(l):l};this.tagMappers.push(o)},e}(A_.default),CK=function(e){return e.toLowerCase().replace(/-(\w)/g,function(r){return r[1].toUpperCase()})},od=function(e){var r={};return Object.keys(e).forEach(function(n){r[CK(n)]=e[n]}),r},E_=function(e){var r=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(r){var a="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",c=n&&n*3,l=i&&i*2;n&&!r.hasOwnProperty(s)&&(r[s]=c,this.trigger("info",{message:a+" defaulting HOLD-BACK to targetDuration * 3 ("+c+")."})),c&&r[s]<c&&(this.trigger("warn",{message:a+" clamping HOLD-BACK ("+r[s]+") to targetDuration * 3 ("+c+")"}),r[s]=c),i&&!r.hasOwnProperty(o)&&(r[o]=i*3,this.trigger("info",{message:a+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+r[o]+")."})),i&&r[o]<l&&(this.trigger("warn",{message:a+" clamping PART-HOLD-BACK ("+r[o]+") to partTargetDuration * 2 ("+l+")."}),r[o]=l)}},EK=function(t){x_.default(e,t);function e(){var n;n=t.call(this)||this,n.lineStream=new aD,n.parseStream=new sD,n.lineStream.pipe(n.parseStream);var i=_K.default(n),a=[],s={},o,c,l=!1,f=function(){},g={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},m="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",y=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var x=0,I=0;return n.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&c&&(s.key=c),!s.timeline&&typeof y=="number"&&(s.timeline=y),n.manifest.preloadSegment=s)}),n.parseStream.on("data",function(A){var F,X;({tag:function(){({version:function(){A.version&&(this.manifest.version=A.version)},"allow-cache":function(){this.manifest.allowCache=A.allowed,"allowed"in A||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var H={};"length"in A&&(s.byterange=H,H.length=A.length,"offset"in A||(A.offset=x)),"offset"in A&&(s.byterange=H,H.offset=A.offset),x=H.offset+H.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),A.duration>0&&(s.duration=A.duration),A.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(!A.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(A.attributes.METHOD==="NONE"){c=null;return}if(!A.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(A.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:A.attributes};return}if(A.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:A.attributes.URI};return}if(A.attributes.KEYFORMAT===m){var H=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(H.indexOf(A.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(A.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),A.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(A.attributes.KEYID&&A.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:A.attributes.KEYFORMAT,keyId:A.attributes.KEYID.substring(2)},pssh:wK.default(A.attributes.URI.split(",")[1])};return}A.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),c={method:A.attributes.METHOD||"AES-128",uri:A.attributes.URI},typeof A.attributes.IV<"u"&&(c.iv=A.attributes.IV)},"media-sequence":function(){if(!isFinite(A.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+A.number});return}this.manifest.mediaSequence=A.number},"discontinuity-sequence":function(){if(!isFinite(A.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+A.number});return}this.manifest.discontinuitySequence=A.number,y=A.number},"playlist-type":function(){if(!/VOD|EVENT/.test(A.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+A.playlist});return}this.manifest.playlistType=A.playlistType},map:function(){o={},A.uri&&(o.uri=A.uri),A.byterange&&(o.byterange=A.byterange),c&&(o.key=c)},"stream-inf":function(){if(this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||g,!A.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),nD.default(s.attributes,A.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||g,!(A.attributes&&A.attributes.TYPE&&A.attributes["GROUP-ID"]&&A.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var H=this.manifest.mediaGroups[A.attributes.TYPE];H[A.attributes["GROUP-ID"]]=H[A.attributes["GROUP-ID"]]||{},F=H[A.attributes["GROUP-ID"]],X={default:/yes/i.test(A.attributes.DEFAULT)},X.default?X.autoselect=!0:X.autoselect=/yes/i.test(A.attributes.AUTOSELECT),A.attributes.LANGUAGE&&(X.language=A.attributes.LANGUAGE),A.attributes.URI&&(X.uri=A.attributes.URI),A.attributes["INSTREAM-ID"]&&(X.instreamId=A.attributes["INSTREAM-ID"]),A.attributes.CHARACTERISTICS&&(X.characteristics=A.attributes.CHARACTERISTICS),A.attributes.FORCED&&(X.forced=/yes/i.test(A.attributes.FORCED)),F[A.attributes.NAME]=X},discontinuity:function(){y+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=A.dateTimeString,this.manifest.dateTimeObject=A.dateTimeObject),s.dateTimeString=A.dateTimeString,s.dateTimeObject=A.dateTimeObject},targetduration:function(){if(!isFinite(A.duration)||A.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+A.duration});return}this.manifest.targetDuration=A.duration,E_.call(this,this.manifest)},start:function(){if(!A.attributes||isNaN(A.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:A.attributes["TIME-OFFSET"],precise:A.attributes.PRECISE}},"cue-out":function(){s.cueOut=A.data},"cue-out-cont":function(){s.cueOutCont=A.data},"cue-in":function(){s.cueIn=A.data},skip:function(){this.manifest.skip=od(A.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",A.attributes,["SKIPPED-SEGMENTS"])},part:function(){var H=this;l=!0;var z=this.manifest.segments.length,Y=od(A.attributes);s.parts=s.parts||[],s.parts.push(Y),Y.byterange&&(Y.byterange.hasOwnProperty("offset")||(Y.byterange.offset=I),I=Y.byterange.offset+Y.byterange.length);var G=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+G+" for segment #"+z,A.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(ie,fe){ie.hasOwnProperty("lastPart")||H.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+fe+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var H=this.manifest.serverControl=od(A.attributes);H.hasOwnProperty("canBlockReload")||(H.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),E_.call(this,this.manifest),H.canSkipDateranges&&!H.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var H=this.manifest.segments.length,z=od(A.attributes),Y=z.type&&z.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(z),z.byterange&&(z.byterange.hasOwnProperty("offset")||(z.byterange.offset=Y?I:0,Y&&(I=z.byterange.offset+z.byterange.length)));var G=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+G+" for segment #"+H,A.attributes,["TYPE","URI"]),!!z.type)for(var ie=0;ie<s.preloadHints.length-1;ie++){var fe=s.preloadHints[ie];fe.type&&fe.type===z.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+G+" for segment #"+H+" has the same TYPE "+z.type+" as preload hint #"+ie})}},"rendition-report":function(){var H=od(A.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(H);var z=this.manifest.renditionReports.length-1,Y=["LAST-MSN","URI"];l&&Y.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+z,A.attributes,Y)},"part-inf":function(){this.manifest.partInf=od(A.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",A.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),E_.call(this,this.manifest)}}[A.tagType]||f).call(i)},uri:function(){s.uri=A.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),c&&(s.key=c),s.timeline=y,o&&(s.map=o),I=0,s={}},comment:function(){},custom:function(){A.segment?(s.custom=s.custom||{},s.custom[A.customType]=A.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[A.customType]=A.data)}})[A.type].call(i)}),n}var r=e.prototype;return r.warnOnMissingAttributes_=function(i,a,s){var o=[];s.forEach(function(c){a.hasOwnProperty(c)||o.push(c)}),o.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+o.join(", ")})},r.push=function(i){this.lineStream.push(i)},r.end=function(){this.lineStream.push(`
`),this.trigger("end")},r.addParser=function(i){this.parseStream.addParser(i)},r.addTagMapper=function(i){this.parseStream.addTagMapper(i)},e}(A_.default);Ip.LineStream=aD;Ip.ParseStream=sD;Ip.Parser=EK});var hD=R(Wr=>{"use strict";var xK=Cp();Object.defineProperty(Wr,"__esModule",{value:!0});Wr.DEFAULT_VIDEO_CODEC=Wr.DEFAULT_AUDIO_CODEC=Wr.muxerSupportsCodec=Wr.browserSupportsCodec=Wr.getMimeForCodec=Wr.isTextCodec=Wr.isAudioCodec=Wr.isVideoCodec=Wr.codecsFromDefault=Wr.parseCodecs=Wr.mapLegacyAvcCodecs=Wr.translateLegacyCodecs=Wr.translateLegacyCodec=void 0;var k_=xK(no()),Bu={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},AK=["video","audio","text"],uD=["Video","Audio","Text"],I_=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(r,n,i){var a=("00"+Number(n).toString(16)).slice(-2),s=("00"+Number(i).toString(16)).slice(-2);return"avc1."+a+"00"+s})};Wr.translateLegacyCodec=I_;var cD=function(e){return e.map(I_)};Wr.translateLegacyCodecs=cD;var kK=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(r){return cD([r])[0]})};Wr.mapLegacyAvcCodecs=kK;var lD=function(e){e===void 0&&(e="");var r=e.split(","),n=[];return r.forEach(function(i){i=i.trim();var a;AK.forEach(function(s){var o=Bu[s].exec(i.toLowerCase());if(!(!o||o.length<=1)){a=s;var c=i.substring(0,o[1].length),l=i.replace(c,"");n.push({type:c,details:l,mediaType:s})}}),a||n.push({type:i,details:"",mediaType:"unknown"})}),n};Wr.parseCodecs=lD;var IK=function(e,r){if(!e.mediaGroups.AUDIO||!r)return null;var n=e.mediaGroups.AUDIO[r];if(!n)return null;for(var i in n){var a=n[i];if(a.default&&a.playlists)return lD(a.playlists[0].attributes.CODECS)}return null};Wr.codecsFromDefault=IK;var DK=function(e){return e===void 0&&(e=""),Bu.video.test(e.trim().toLowerCase())};Wr.isVideoCodec=DK;var dD=function(e){return e===void 0&&(e=""),Bu.audio.test(e.trim().toLowerCase())};Wr.isAudioCodec=dD;var fD=function(e){return e===void 0&&(e=""),Bu.text.test(e.trim().toLowerCase())};Wr.isTextCodec=fD;var pD=function(e){if(!(!e||typeof e!="string")){var r=e.toLowerCase().split(",").map(function(a){return I_(a.trim())}),n="video";r.length===1&&dD(r[0])?n="audio":r.length===1&&fD(r[0])&&(n="application");var i="mp4";return r.every(function(a){return Bu.mp4.test(a)})?i="mp4":r.every(function(a){return Bu.webm.test(a)})?i="webm":r.every(function(a){return Bu.ogg.test(a)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}};Wr.getMimeForCodec=pD;var OK=function(e){return e===void 0&&(e=""),k_.default.MediaSource&&k_.default.MediaSource.isTypeSupported&&k_.default.MediaSource.isTypeSupported(pD(e))||!1};Wr.browserSupportsCodec=OK;var PK=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(r){r=r.trim();for(var n=0;n<uD.length;n++){var i=uD[n];if(Bu["muxer"+i].test(r))return!0}return!1})};Wr.muxerSupportsCodec=PK;var RK="mp4a.40.2";Wr.DEFAULT_AUDIO_CODEC=RK;var LK="avc1.4d400d";Wr.DEFAULT_VIDEO_CODEC=LK});var gD=R(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});Em.simpleTypeFromSourceType=void 0;var NK=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,FK=/^application\/dash\+xml/i,MK=function(e){return NK.test(e)?"hls":FK.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null};Em.simpleTypeFromSourceType=MK});var qu=R(ur=>{"use strict";var UK=Cp();Object.defineProperty(ur,"__esModule",{value:!0});ur.reverseBytes=ur.sliceBytes=ur.bytesMatch=ur.concatTypedArrays=ur.stringToBytes=ur.bytesToString=ur.numberToBytes=ur.bytesToNumber=ur.IS_LITTLE_ENDIAN=ur.IS_BIG_ENDIAN=ur.ENDIANNESS=ur.toBinaryString=ur.toHexString=ur.toUint8=ur.isTypedArray=ur.isArrayBufferView=ur.padStart=ur.countBytes=ur.countBits=void 0;var $K=UK(no()),BK=function(e,r){for(var n="";r--;)n+=e;return n},mD=function(e){return e.toString(2).length};ur.countBits=mD;var vD=function(e){return Math.ceil(mD(e)/8)};ur.countBytes=vD;var O_=function(e,r,n){return n===void 0&&(n=" "),(BK(n,r)+e.toString()).slice(-r)};ur.padStart=O_;var yD=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer};ur.isArrayBufferView=yD;var bD=function(e){return yD(e)};ur.isTypedArray=bD;var zo=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!bD(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))};ur.toUint8=zo;var qK=function(e){e=zo(e);for(var r="",n=0;n<e.length;n++)r+=O_(e[n].toString(16),2,"0");return r};ur.toHexString=qK;var jK=function(e){e=zo(e);for(var r="",n=0;n<e.length;n++)r+=O_(e[n].toString(2),8,"0");return r};ur.toBinaryString=jK;var Fn=$K.default.BigInt||Number,D_=[Fn("0x1"),Fn("0x100"),Fn("0x10000"),Fn("0x1000000"),Fn("0x100000000"),Fn("0x10000000000"),Fn("0x1000000000000"),Fn("0x100000000000000"),Fn("0x10000000000000000")],P_=function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"}();ur.ENDIANNESS=P_;var HK=P_==="big";ur.IS_BIG_ENDIAN=HK;var GK=P_==="little";ur.IS_LITTLE_ENDIAN=GK;var zK=function(e,r){var n=r===void 0?{}:r,i=n.signed,a=i===void 0?!1:i,s=n.le,o=s===void 0?!1:s;e=zo(e);var c=o?"reduce":"reduceRight",l=e[c]?e[c]:Array.prototype[c],f=l.call(e,function(m,y,x){var I=o?x:Math.abs(x+1-e.length);return m+Fn(y)*D_[I]},Fn(0));if(a){var g=D_[e.length]/Fn(2)-Fn(1);f=Fn(f),f>g&&(f-=g,f-=g,f-=Fn(2))}return Number(f)};ur.bytesToNumber=zK;var VK=function(e,r){var n=r===void 0?{}:r,i=n.le,a=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Fn(e);for(var s=vD(e),o=new Uint8Array(new ArrayBuffer(s)),c=0;c<s;c++){var l=a?c:Math.abs(c+1-o.length);o[l]=Number(e/D_[c]&Fn(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=c===0?1:2)}return o};ur.numberToBytes=VK;var WK=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var r=String.fromCharCode.apply(null,zo(e));try{return decodeURIComponent(escape(r))}catch{}return r};ur.bytesToString=WK;var KK=function(e,r){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;r||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n};ur.stringToBytes=KK;var XK=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r=r.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),r.length<=1)return zo(r[0]);var i=r.reduce(function(o,c,l){return o+(c.byteLength||c.length)},0),a=new Uint8Array(i),s=0;return r.forEach(function(o){o=zo(o),a.set(o,s),s+=o.byteLength}),a};ur.concatTypedArrays=XK;var YK=function(e,r,n){var i=n===void 0?{}:n,a=i.offset,s=a===void 0?0:a,o=i.mask,c=o===void 0?[]:o;e=zo(e),r=zo(r);var l=r.every?r.every:Array.prototype.every;return r.length&&e.length-s>=r.length&&l.call(r,function(f,g){var m=c[g]?c[g]&e[s+g]:e[s+g];return f===m})};ur.bytesMatch=YK;var JK=function(e,r,n){return Uint8Array.prototype.slice?Uint8Array.prototype.slice.call(e,r,n):new Uint8Array(Array.prototype.slice.call(e,r,n))};ur.sliceBytes=JK;var QK=function(e){return e.reverse?e.reverse():Array.prototype.reverse.call(e)};ur.reverseBytes=QK});var _D=R(xm=>{"use strict";Object.defineProperty(xm,"__esModule",{value:!0});xm.forEachMediaGroup=void 0;var ZK=function(e,r,n){r.forEach(function(i){for(var a in e.mediaGroups[i])for(var s in e.mediaGroups[i][a]){var o=e.mediaGroups[i][a][s];n(o,i,a,s)}})};xm.forEachMediaGroup=ZK});var Dp=R(ud=>{"use strict";function e7(t,e,r){if(r===void 0&&(r=Array.prototype),t&&typeof r.find=="function")return r.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];if(e.call(void 0,i,n,t))return i}}function R_(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}function t7(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}var wD=R_({HTML:"text/html",isHTML:function(t){return t===wD.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),SD=R_({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===SD.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ud.assign=t7;ud.find=e7;ud.freeze=R_;ud.MIME_TYPE=wD;ud.NAMESPACE=SD});var G_=R(ju=>{var DD=Dp(),so=DD.find,Op=DD.NAMESPACE;function r7(t){return t!==""}function i7(t){return t?t.split(/[\t\n\f\r ]+/).filter(r7):[]}function n7(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function TD(t){if(!t)return[];var e=i7(t);return Object.keys(e.reduce(n7,{}))}function a7(t){return function(e){return t&&t.indexOf(e)!==-1}}function Lp(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function Oa(t,e){var r=t.prototype;if(!(r instanceof e)){let i=function(){};var n=i;i.prototype=e.prototype,i=new i,Lp(r,i),t.prototype=r=i}r.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),r.constructor=t)}var Pa={},ls=Pa.ELEMENT_NODE=1,ld=Pa.ATTRIBUTE_NODE=2,Am=Pa.TEXT_NODE=3,OD=Pa.CDATA_SECTION_NODE=4,PD=Pa.ENTITY_REFERENCE_NODE=5,s7=Pa.ENTITY_NODE=6,RD=Pa.PROCESSING_INSTRUCTION_NODE=7,LD=Pa.COMMENT_NODE=8,ND=Pa.DOCUMENT_NODE=9,FD=Pa.DOCUMENT_TYPE_NODE=10,Wo=Pa.DOCUMENT_FRAGMENT_NODE=11,o7=Pa.NOTATION_NODE=12,Kn={},En={},Kxe=Kn.INDEX_SIZE_ERR=(En[1]="Index size error",1),Xxe=Kn.DOMSTRING_SIZE_ERR=(En[2]="DOMString size error",2),Da=Kn.HIERARCHY_REQUEST_ERR=(En[3]="Hierarchy request error",3),Yxe=Kn.WRONG_DOCUMENT_ERR=(En[4]="Wrong document",4),Jxe=Kn.INVALID_CHARACTER_ERR=(En[5]="Invalid character",5),Qxe=Kn.NO_DATA_ALLOWED_ERR=(En[6]="No data allowed",6),Zxe=Kn.NO_MODIFICATION_ALLOWED_ERR=(En[7]="No modification allowed",7),MD=Kn.NOT_FOUND_ERR=(En[8]="Not found",8),eAe=Kn.NOT_SUPPORTED_ERR=(En[9]="Not supported",9),CD=Kn.INUSE_ATTRIBUTE_ERR=(En[10]="Attribute in use",10),tAe=Kn.INVALID_STATE_ERR=(En[11]="Invalid state",11),rAe=Kn.SYNTAX_ERR=(En[12]="Syntax error",12),iAe=Kn.INVALID_MODIFICATION_ERR=(En[13]="Invalid modification",13),nAe=Kn.NAMESPACE_ERR=(En[14]="Invalid namespace",14),aAe=Kn.INVALID_ACCESS_ERR=(En[15]="Invalid access",15);function Xi(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,En[t]),this.message=En[t],Error.captureStackTrace&&Error.captureStackTrace(this,Xi);return r.code=t,e&&(this.message=this.message+": "+e),r}Xi.prototype=Error.prototype;Lp(Kn,Xi);function Vo(){}Vo.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)cd(this[n],r,t,e);return r.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function dd(t,e){this._node=t,this._refresh=e,F_(this)}function F_(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var r=t._refresh(t._node);if(XD(t,"length",r.length),!t.$$length||r.length<t.$$length)for(var n=r.length;n in t;n++)Object.prototype.hasOwnProperty.call(t,n)&&delete t[n];Lp(r,t),t._inc=e}}dd.prototype.item=function(t){return F_(this),this[t]||null};Oa(dd,Vo);function km(){}function UD(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function ED(t,e,r,n){if(n?e[UD(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var i=t.ownerDocument;i&&(n&&qD(i,t,n),u7(i,t,r))}}function xD(t,e,r){var n=UD(e,r);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,t){var a=t.ownerDocument;a&&(qD(a,t,r),r.ownerElement=null)}}else throw new Xi(MD,new Error(t.tagName+"@"+r))}km.prototype={length:0,item:Vo.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Xi(CD);var r=this.getNamedItem(t.nodeName);return ED(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e=t.ownerElement,r;if(e&&e!=this._ownerElement)throw new Xi(CD);return r=this.getNamedItemNS(t.namespaceURI,t.localName),ED(this._ownerElement,this,t,r),r},removeNamedItem:function(t){var e=this.getNamedItem(t);return xD(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return xD(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}};function $D(){}$D.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,r){var n=new Np;if(n.implementation=this,n.childNodes=new Vo,n.doctype=r||null,r&&n.appendChild(r),e){var i=n.createElementNS(t,e);n.appendChild(i)}return n},createDocumentType:function(t,e,r){var n=new Om;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=r||"",n}};function Gr(){}Gr.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Im(this,t,e)},replaceChild:function(t,e){Im(this,t,e,HD),e&&this.removeChild(e)},removeChild:function(t){return jD(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return N_(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==Am&&t.nodeType==Am?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===t)return n}e=e.nodeType==ld?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];e=e.nodeType==ld?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function BD(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Lp(Pa,Gr);Lp(Pa,Gr.prototype);function Pp(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Pp(t,e))return!0;while(t=t.nextSibling)}function Np(){this.ownerDocument=this}function u7(t,e,r){t&&t._inc++;var n=r.namespaceURI;n===Op.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function qD(t,e,r,n){t&&t._inc++;var i=r.namespaceURI;i===Op.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function M_(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var i=e.firstChild,a=0;i;)n[a++]=i,i=i.nextSibling;n.length=a,delete n[n.length]}}}function jD(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,M_(t.ownerDocument,t),e}function c7(t){return t&&(t.nodeType===Gr.DOCUMENT_NODE||t.nodeType===Gr.DOCUMENT_FRAGMENT_NODE||t.nodeType===Gr.ELEMENT_NODE)}function l7(t){return t&&(oo(t)||U_(t)||Ko(t)||t.nodeType===Gr.DOCUMENT_FRAGMENT_NODE||t.nodeType===Gr.COMMENT_NODE||t.nodeType===Gr.PROCESSING_INSTRUCTION_NODE)}function Ko(t){return t&&t.nodeType===Gr.DOCUMENT_TYPE_NODE}function oo(t){return t&&t.nodeType===Gr.ELEMENT_NODE}function U_(t){return t&&t.nodeType===Gr.TEXT_NODE}function AD(t,e){var r=t.childNodes||[];if(so(r,oo)||Ko(e))return!1;var n=so(r,Ko);return!(e&&n&&r.indexOf(n)>r.indexOf(e))}function kD(t,e){var r=t.childNodes||[];function n(a){return oo(a)&&a!==e}if(so(r,n))return!1;var i=so(r,Ko);return!(e&&i&&r.indexOf(i)>r.indexOf(e))}function d7(t,e,r){if(!c7(t))throw new Xi(Da,"Unexpected parent node type "+t.nodeType);if(r&&r.parentNode!==t)throw new Xi(MD,"child not in parent");if(!l7(e)||Ko(e)&&t.nodeType!==Gr.DOCUMENT_NODE)throw new Xi(Da,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function f7(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===Gr.DOCUMENT_FRAGMENT_NODE){var a=i.filter(oo);if(a.length>1||so(i,U_))throw new Xi(Da,"More than one element or text in fragment");if(a.length===1&&!AD(t,r))throw new Xi(Da,"Element in fragment can not be inserted before doctype")}if(oo(e)&&!AD(t,r))throw new Xi(Da,"Only one element can be added and only after doctype");if(Ko(e)){if(so(n,Ko))throw new Xi(Da,"Only one doctype is allowed");var s=so(n,oo);if(r&&n.indexOf(s)<n.indexOf(r))throw new Xi(Da,"Doctype can only be inserted before an element");if(!r&&s)throw new Xi(Da,"Doctype can not be appended since element is present")}}function HD(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===Gr.DOCUMENT_FRAGMENT_NODE){var a=i.filter(oo);if(a.length>1||so(i,U_))throw new Xi(Da,"More than one element or text in fragment");if(a.length===1&&!kD(t,r))throw new Xi(Da,"Element in fragment can not be inserted before doctype")}if(oo(e)&&!kD(t,r))throw new Xi(Da,"Only one element can be added and only after doctype");if(Ko(e)){let c=function(l){return Ko(l)&&l!==r};var o=c;if(so(n,c))throw new Xi(Da,"Only one doctype is allowed");var s=so(n,oo);if(r&&n.indexOf(s)<n.indexOf(r))throw new Xi(Da,"Doctype can only be inserted before an element")}}function Im(t,e,r,n){d7(t,e,r),t.nodeType===Gr.DOCUMENT_NODE&&(n||f7)(t,e,r);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===Wo){var a=e.firstChild;if(a==null)return e;var s=e.lastChild}else a=s=e;var o=r?r.previousSibling:t.lastChild;a.previousSibling=o,s.nextSibling=r,o?o.nextSibling=a:t.firstChild=a,r==null?t.lastChild=s:r.previousSibling=s;do{a.parentNode=t;var c=t.ownerDocument||t;Rp(a,c)}while(a!==s&&(a=a.nextSibling));return M_(t.ownerDocument||t,t),e.nodeType==Wo&&(e.firstChild=e.lastChild=null),e}function Rp(t,e){if(t.ownerDocument!==e){if(t.ownerDocument=e,t.nodeType===ls&&t.attributes)for(var r=0;r<t.attributes.length;r++){var n=t.attributes.item(r);n&&(n.ownerDocument=e)}for(var i=t.firstChild;i;)Rp(i,e),i=i.nextSibling}}function p7(t,e){e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,M_(t.ownerDocument,t,e);var r=t.ownerDocument||t;return Rp(e,r),e}Np.prototype={nodeName:"#document",nodeType:ND,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Wo){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return Im(this,t,e),Rp(t,this),this.documentElement===null&&t.nodeType===ls&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),jD(this,t)},replaceChild:function(t,e){Im(this,t,e,HD),Rp(t,this),e&&this.removeChild(e),oo(t)&&(this.documentElement=t)},importNode:function(t,e){return KD(this,t,e)},getElementById:function(t){var e=null;return Pp(this.documentElement,function(r){if(r.nodeType==ls&&r.getAttribute("id")==t)return e=r,!0}),e},getElementsByClassName:function(t){var e=TD(t);return new dd(this,function(r){var n=[];return e.length>0&&Pp(r.documentElement,function(i){if(i!==r&&i.nodeType===ls){var a=i.getAttribute("class");if(a){var s=t===a;if(!s){var o=TD(a);s=e.every(a7(o))}s&&n.push(i)}}}),n})},createElement:function(t){var e=new $c;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new Vo;var r=e.attributes=new km;return r._ownerElement=e,e},createDocumentFragment:function(){var t=new Pm;return t.ownerDocument=this,t.childNodes=new Vo,t},createTextNode:function(t){var e=new $_;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new B_;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new q_;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new H_;return r.ownerDocument=this,r.tagName=r.nodeName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new Dm;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new j_;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new $c,n=e.split(":"),i=r.attributes=new km;return r.childNodes=new Vo,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,i._ownerElement=r,r},createAttributeNS:function(t,e){var r=new Dm,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}};Oa(Np,Gr);function $c(){this._nsMap={}}$c.prototype={nodeType:ls,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Wo?this.insertBefore(t,null):p7(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new dd(this,function(e){var r=[];return Pp(e,function(n){n!==e&&n.nodeType==ls&&(t==="*"||n.tagName==t)&&r.push(n)}),r})},getElementsByTagNameNS:function(t,e){return new dd(this,function(r){var n=[];return Pp(r,function(i){i!==r&&i.nodeType===ls&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};Np.prototype.getElementsByTagName=$c.prototype.getElementsByTagName;Np.prototype.getElementsByTagNameNS=$c.prototype.getElementsByTagNameNS;Oa($c,Gr);function Dm(){}Dm.prototype.nodeType=ld;Oa(Dm,Gr);function Fp(){}Fp.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(En[Da])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){var n=this.data.substring(0,t),i=this.data.substring(t+e);r=n+r+i,this.nodeValue=this.data=r,this.length=r.length}};Oa(Fp,Gr);function $_(){}$_.prototype={nodeName:"#text",nodeType:Am,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Oa($_,Fp);function B_(){}B_.prototype={nodeName:"#comment",nodeType:LD};Oa(B_,Fp);function q_(){}q_.prototype={nodeName:"#cdata-section",nodeType:OD};Oa(q_,Fp);function Om(){}Om.prototype.nodeType=FD;Oa(Om,Gr);function GD(){}GD.prototype.nodeType=o7;Oa(GD,Gr);function zD(){}zD.prototype.nodeType=s7;Oa(zD,Gr);function j_(){}j_.prototype.nodeType=PD;Oa(j_,Gr);function Pm(){}Pm.prototype.nodeName="#document-fragment";Pm.prototype.nodeType=Wo;Oa(Pm,Gr);function H_(){}H_.prototype.nodeType=RD;Oa(H_,Gr);function VD(){}VD.prototype.serializeToString=function(t,e,r){return WD.call(t,e,r)};Gr.prototype.toString=WD;function WD(t,e){var r=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,a=n.namespaceURI;if(a&&i==null){var i=n.lookupPrefix(a);if(i==null)var s=[{namespace:a,prefix:null}]}return cd(this,r,t,e,s),r.join("")}function ID(t,e,r){var n=t.prefix||"",i=t.namespaceURI;if(!i||n==="xml"&&i===Op.XML||i===Op.XMLNS)return!1;for(var a=r.length;a--;){var s=r[a];if(s.prefix===n)return s.namespace!==i}return!0}function L_(t,e,r){t.push(" ",e,'="',r.replace(/[<>&"\t\n\r]/g,BD),'"')}function cd(t,e,r,n,i){if(i||(i=[]),n)if(t=n(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case ls:var a=t.attributes,s=a.length,F=t.firstChild,o=t.tagName;r=Op.isHTML(t.namespaceURI)||r;var c=o;if(!r&&!t.prefix&&t.namespaceURI){for(var l,f=0;f<a.length;f++)if(a.item(f).name==="xmlns"){l=a.item(f).value;break}if(!l)for(var g=i.length-1;g>=0;g--){var m=i[g];if(m.prefix===""&&m.namespace===t.namespaceURI){l=m.namespace;break}}if(l!==t.namespaceURI)for(var g=i.length-1;g>=0;g--){var m=i[g];if(m.namespace===t.namespaceURI){m.prefix&&(c=m.prefix+":"+o);break}}}e.push("<",c);for(var y=0;y<s;y++){var x=a.item(y);x.prefix=="xmlns"?i.push({prefix:x.localName,namespace:x.value}):x.nodeName=="xmlns"&&i.push({prefix:"",namespace:x.value})}for(var y=0;y<s;y++){var x=a.item(y);if(ID(x,r,i)){var I=x.prefix||"",A=x.namespaceURI;L_(e,I?"xmlns:"+I:"xmlns",A),i.push({prefix:I,namespace:A})}cd(x,e,r,n,i)}if(o===c&&ID(t,r,i)){var I=t.prefix||"",A=t.namespaceURI;L_(e,I?"xmlns:"+I:"xmlns",A),i.push({prefix:I,namespace:A})}if(F||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),r&&/^script$/i.test(o))for(;F;)F.data?e.push(F.data):cd(F,e,r,n,i.slice()),F=F.nextSibling;else for(;F;)cd(F,e,r,n,i.slice()),F=F.nextSibling;e.push("</",c,">")}else e.push("/>");return;case ND:case Wo:for(var F=t.firstChild;F;)cd(F,e,r,n,i.slice()),F=F.nextSibling;return;case ld:return L_(e,t.name,t.value);case Am:return e.push(t.data.replace(/[<&>]/g,BD));case OD:return e.push("<![CDATA[",t.data,"]]>");case LD:return e.push("<!--",t.data,"-->");case FD:var X=t.publicId,de=t.systemId;if(e.push("<!DOCTYPE ",t.name),X)e.push(" PUBLIC ",X),de&&de!="."&&e.push(" ",de),e.push(">");else if(de&&de!=".")e.push(" SYSTEM ",de,">");else{var N=t.internalSubset;N&&e.push(" [",N,"]"),e.push(">")}return;case RD:return e.push("<?",t.target," ",t.data,"?>");case PD:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function KD(t,e,r){var n;switch(e.nodeType){case ls:n=e.cloneNode(!1),n.ownerDocument=t;case Wo:break;case ld:r=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,r)for(var i=e.firstChild;i;)n.appendChild(KD(t,i,r)),i=i.nextSibling;return n}function N_(t,e,r){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];typeof a!="object"&&a!=n[i]&&(n[i]=a)}switch(e.childNodes&&(n.childNodes=new Vo),n.ownerDocument=t,n.nodeType){case ls:var s=e.attributes,o=n.attributes=new km,c=s.length;o._ownerElement=n;for(var l=0;l<c;l++)n.setAttributeNode(N_(t,s.item(l),!0));break;case ld:r=!0}if(r)for(var f=e.firstChild;f;)n.appendChild(N_(t,f,r)),f=f.nextSibling;return n}function XD(t,e,r){t[e]=r}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case ls:case Wo:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};h7=t,Object.defineProperty(dd.prototype,"length",{get:function(){return F_(this),this.$$length}}),Object.defineProperty(Gr.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case ls:case Wo:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),XD=function(e,r,n){e["$$"+r]=n}}}catch{}var h7;ju.DocumentType=Om;ju.DOMException=Xi;ju.DOMImplementation=$D;ju.Element=$c;ju.Node=Gr;ju.NodeList=Vo;ju.XMLSerializer=VD});var JD=R(Mp=>{"use strict";var YD=Dp().freeze;Mp.XML_ENTITIES=YD({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});Mp.HTML_ENTITIES=YD({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"});Mp.entityMap=Mp.HTML_ENTITIES});var aO=R(V_=>{var qp=Dp().NAMESPACE,z_=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,QD=new RegExp("[\\-\\.0-9"+z_.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ZD=new RegExp("^"+z_.source+QD.source+"*(?::"+z_.source+QD.source+"*)?$"),Up=0,Hu=1,fd=2,$p=3,pd=4,hd=5,Bp=6,Rm=7;function gd(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,gd)}gd.prototype=new Error;gd.prototype.name=gd.name;function rO(){}rO.prototype={parse:function(t,e,r){var n=this.domBuilder;n.startDocument(),iO(e,e={}),g7(t,e,r,n,this.errorHandler),n.endDocument()}};function g7(t,e,r,n,i){function a(ce){if(ce>65535){ce-=65536;var tt=55296+(ce>>10),ft=56320+(ce&1023);return String.fromCharCode(tt,ft)}else return String.fromCharCode(ce)}function s(ce){var tt=ce.slice(1,-1);return Object.hasOwnProperty.call(r,tt)?r[tt]:tt.charAt(0)==="#"?a(parseInt(tt.substr(1).replace("x","0x"))):(i.error("entity not found:"+ce),ce)}function o(ce){if(ce>I){var tt=t.substring(I,ce).replace(/&#?\w+;/g,s);m&&c(I),n.characters(tt,0,ce-I),I=ce}}function c(ce,tt){for(;ce>=f&&(tt=g.exec(t));)l=tt.index,f=l+tt[0].length,m.lineNumber++;m.columnNumber=ce-l+1}for(var l=0,f=0,g=/.*(?:\r\n?|\n)|.*$/g,m=n.locator,y=[{currentNSMap:e}],x={},I=0;;){try{var A=t.indexOf("<",I);if(A<0){if(!t.substr(I).match(/^\s*$/)){var F=n.doc,X=F.createTextNode(t.substr(I));F.appendChild(X),n.currentElement=X}return}switch(A>I&&o(A),t.charAt(A+1)){case"/":var Ne=t.indexOf(">",A+3),de=t.substring(A+2,Ne).replace(/[ \t\n\r]+$/g,""),N=y.pop();Ne<0?(de=t.substring(A+2).replace(/[\s<].*/,""),i.error("end tag name: "+de+" is not complete:"+N.tagName),Ne=A+1+de.length):de.match(/\s</)&&(de=de.replace(/[\s<].*/,""),i.error("end tag name: "+de+" maybe not complete"),Ne=A+1+de.length);var H=N.localNSMap,z=N.tagName==de,Y=z||N.tagName&&N.tagName.toLowerCase()==de.toLowerCase();if(Y){if(n.endElement(N.uri,N.localName,de),H)for(var G in H)Object.prototype.hasOwnProperty.call(H,G)&&n.endPrefixMapping(G);z||i.fatalError("end tag name: "+de+" is not match the current start tagName:"+N.tagName)}else y.push(N);Ne++;break;case"?":m&&c(A),Ne=_7(t,A,n);break;case"!":m&&c(A),Ne=b7(t,A,n,i);break;default:m&&c(A);var ie=new nO,fe=y[y.length-1].currentNSMap,Ne=m7(t,A,ie,fe,s,i),ye=ie.length;if(!ie.closed&&y7(t,Ne,ie.tagName,x)&&(ie.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),m&&ye){for(var He=eO(m,{}),Re=0;Re<ye;Re++){var Ze=ie[Re];c(Ze.offset),Ze.locator=eO(m,{})}n.locator=He,tO(ie,n,fe)&&y.push(ie),n.locator=m}else tO(ie,n,fe)&&y.push(ie);qp.isHTML(ie.uri)&&!ie.closed?Ne=v7(t,Ne,ie.tagName,s,n):Ne++}}catch(ce){if(ce instanceof gd)throw ce;i.error("element parse error: "+ce),Ne=-1}Ne>I?I=Ne:o(Math.max(A,I)+1)}}function eO(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function m7(t,e,r,n,i,a){function s(y,x,I){r.attributeNames.hasOwnProperty(y)&&a.fatalError("Attribute "+y+" redefined"),r.addValue(y,x.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),I)}for(var o,c,l=++e,f=Up;;){var g=t.charAt(l);switch(g){case"=":if(f===Hu)o=t.slice(e,l),f=$p;else if(f===fd)f=$p;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===$p||f===Hu)if(f===Hu&&(a.warning('attribute value must after "="'),o=t.slice(e,l)),e=l+1,l=t.indexOf(g,e),l>0)c=t.slice(e,l),s(o,c,e-1),f=hd;else throw new Error("attribute value no end '"+g+"' match");else if(f==pd)c=t.slice(e,l),s(o,c,e),a.warning('attribute "'+o+'" missed start quot('+g+")!!"),e=l+1,f=hd;else throw new Error('attribute value must after "="');break;case"/":switch(f){case Up:r.setTagName(t.slice(e,l));case hd:case Bp:case Rm:f=Rm,r.closed=!0;case pd:case Hu:break;case fd:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),f==Up&&r.setTagName(t.slice(e,l)),l;case">":switch(f){case Up:r.setTagName(t.slice(e,l));case hd:case Bp:case Rm:break;case pd:case Hu:c=t.slice(e,l),c.slice(-1)==="/"&&(r.closed=!0,c=c.slice(0,-1));case fd:f===fd&&(c=o),f==pd?(a.warning('attribute "'+c+'" missed quot(")!'),s(o,c,e)):((!qp.isHTML(n[""])||!c.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),s(c,c,e));break;case $p:throw new Error("attribute value missed!!")}return l;case"\x80":g=" ";default:if(g<=" ")switch(f){case Up:r.setTagName(t.slice(e,l)),f=Bp;break;case Hu:o=t.slice(e,l),f=fd;break;case pd:var c=t.slice(e,l);a.warning('attribute "'+c+'" missed quot(")!!'),s(o,c,e);case hd:f=Bp;break}else switch(f){case fd:var m=r.tagName;(!qp.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,e),e=l,f=Hu;break;case hd:a.warning('attribute space is required"'+o+'"!!');case Bp:f=Hu,e=l;break;case $p:f=pd,e=l;break;case Rm:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function tO(t,e,r){for(var n=t.tagName,i=null,g=t.length;g--;){var a=t[g],s=a.qName,o=a.value,m=s.indexOf(":");if(m>0)var c=a.prefix=s.slice(0,m),l=s.slice(m+1),f=c==="xmlns"&&l;else l=s,c=null,f=s==="xmlns"&&"";a.localName=l,f!==!1&&(i==null&&(i={},iO(r,r={})),r[f]=i[f]=o,a.uri=qp.XMLNS,e.startPrefixMapping(f,o))}for(var g=t.length;g--;){a=t[g];var c=a.prefix;c&&(c==="xml"&&(a.uri=qp.XML),c!=="xmlns"&&(a.uri=r[c||""]))}var m=n.indexOf(":");m>0?(c=t.prefix=n.slice(0,m),l=t.localName=n.slice(m+1)):(c=null,l=t.localName=n);var y=t.uri=r[c||""];if(e.startElement(y,l,n,t),t.closed){if(e.endElement(y,l,n),i)for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&e.endPrefixMapping(c)}else return t.currentNSMap=r,t.localNSMap=i,!0}function v7(t,e,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var a=t.indexOf("</"+r+">",e),s=t.substring(e+1,a);if(/[&<]/.test(s))return/^script$/i.test(r)?(i.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),a)}return e+1}function y7(t,e,r,n){var i=n[r];return i==null&&(i=t.lastIndexOf("</"+r+">"),i<e&&(i=t.lastIndexOf("</"+r)),n[r]=i),i<e}function iO(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function b7(t,e,r,n){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var a=t.indexOf("-->",e+4);return a>e?(r.comment(t,e+4,a-e-4),a+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var a=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,a-e-9),r.endCDATA(),a+3}var s=w7(t,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var c=s[1][0],l=!1,f=!1;o>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],f=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(f=s[3][0]));var g=s[o-1];return r.startDTD(c,l,f),r.endDTD(),g.index+g[0].length}}return-1}function _7(t,e,r){var n=t.indexOf("?>",e);if(n){var i=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){var a=i[0].length;return r.processingInstruction(i[1],i[2]),n+2}else return-1}return-1}function nO(){this.attributeNames={}}nO.prototype={setTagName:function(t){if(!ZD.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!ZD.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function w7(t,e){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);r=i.exec(t);)if(n.push(r),r[1])return n}V_.XMLReader=rO;V_.ParseError=gd});var fO=R(Nm=>{var S7=Dp(),T7=G_(),sO=JD(),cO=aO(),C7=T7.DOMImplementation,oO=S7.NAMESPACE,E7=cO.ParseError,x7=cO.XMLReader;function lO(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function dO(t){this.options=t||{locator:{}}}dO.prototype.parseFromString=function(t,e){var r=this.options,n=new x7,i=r.domBuilder||new jp,a=r.errorHandler,s=r.locator,o=r.xmlns||{},c=/\/x?html?$/.test(e),l=c?sO.HTML_ENTITIES:sO.XML_ENTITIES;s&&i.setDocumentLocator(s),n.errorHandler=A7(a,i,s),n.domBuilder=r.domBuilder||i,c&&(o[""]=oO.HTML),o.xml=o.xml||oO.XML;var f=r.normalizeLineEndings||lO;return t&&typeof t=="string"?n.parse(f(t),o,l):n.errorHandler.error("invalid doc source"),i.doc};function A7(t,e,r){if(!t){if(e instanceof jp)return e;t=e}var n={},i=t instanceof Function;r=r||{};function a(s){var o=t[s];!o&&i&&(o=t.length==2?function(c){t(s,c)}:t),n[s]=o&&function(c){o("[xmldom "+s+"]	"+c+W_(r))}||function(){}}return a("warning"),a("error"),a("fatalError"),n}function jp(){this.cdata=!1}function md(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}jp.prototype={startDocument:function(){this.doc=new C7().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var i=this.doc,a=i.createElementNS(t,r||e),s=n.length;Lm(this,a),this.currentElement=a,this.locator&&md(this.locator,a);for(var o=0;o<s;o++){var t=n.getURI(o),c=n.getValue(o),r=n.getQName(o),l=i.createAttributeNS(t,r);this.locator&&md(n.getLocator(o),l),l.value=l.nodeValue=c,a.setAttributeNode(l)}},endElement:function(t,e,r){var n=this.currentElement,i=n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&md(this.locator,r),Lm(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=uO.apply(this,arguments),t){if(this.cdata)var n=this.doc.createCDATASection(t);else var n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&md(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=uO.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&md(this.locator,n),Lm(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(t,e,r);this.locator&&md(this.locator,i),Lm(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,W_(this.locator))},error:function(t){console.error("[xmldom error]	"+t,W_(this.locator))},fatalError:function(t){throw new E7(t,this.locator)}};function W_(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function uO(t,e,r){return typeof t=="string"?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){jp.prototype[t]=function(){return null}});function Lm(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}Nm.__DOMHandler=jp;Nm.normalizeLineEndings=lO;Nm.DOMParser=dO});var hO=R(Fm=>{var pO=G_();Fm.DOMImplementation=pO.DOMImplementation;Fm.XMLSerializer=pO.XMLSerializer;Fm.DOMParser=fO().DOMParser});var PO=R(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});var k7=S_(),I7=no(),D7=_D(),O7=T_(),P7=hO();function Y_(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var J_=Y_(k7),Ra=Y_(I7),R7=Y_(O7),L7="0.22.1",gO=function(e){return!!e&&typeof e=="object"},ha=function t(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(i,a){return typeof a!="object"||Object.keys(a).forEach(function(s){Array.isArray(i[s])&&Array.isArray(a[s])?i[s]=i[s].concat(a[s]):gO(i[s])&&gO(a[s])?i[s]=t(i[s],a[s]):i[s]=a[s]}),i},{})},SO=function(e){return Object.keys(e).map(function(r){return e[r]})},N7=function(e,r){for(var n=[],i=e;i<r;i++)n.push(i);return n},Mm=function(e){return e.reduce(function(r,n){return r.concat(n)},[])},TO=function(e){if(!e.length)return[];for(var r=[],n=0;n<e.length;n++)r.push(e[n]);return r},F7=function(e,r){return e.reduce(function(n,i,a){return i[r]&&n.push(a),n},[])},X_=function(e,r){for(var n=0;n<e.length;n++)if(r(e[n]))return n;return-1},M7=function(e,r){return SO(e.reduce(function(n,i){return i.forEach(function(a){n[r(a)]=a}),n},{}))},yd={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Hp=function(e){var r=e.baseUrl,n=r===void 0?"":r,i=e.source,a=i===void 0?"":i,s=e.range,o=s===void 0?"":s,c=e.indexRange,l=c===void 0?"":c,f={uri:a,resolvedUri:J_.default(n||"",a)};if(o||l){var g=o||l,m=g.split("-"),y=Ra.default.BigInt?Ra.default.BigInt(m[0]):parseInt(m[0],10),x=Ra.default.BigInt?Ra.default.BigInt(m[1]):parseInt(m[1],10);y<Number.MAX_SAFE_INTEGER&&typeof y=="bigint"&&(y=Number(y)),x<Number.MAX_SAFE_INTEGER&&typeof x=="bigint"&&(x=Number(x));var I;typeof x=="bigint"||typeof y=="bigint"?I=Ra.default.BigInt(x)-Ra.default.BigInt(y)+Ra.default.BigInt(1):I=x-y+1,typeof I=="bigint"&&I<Number.MAX_SAFE_INTEGER&&(I=Number(I)),f.byterange={length:I,offset:y}}return f},U7=function(e){var r;return typeof e.offset=="bigint"||typeof e.length=="bigint"?r=Ra.default.BigInt(e.offset)+Ra.default.BigInt(e.length)-Ra.default.BigInt(1):r=e.offset+e.length-1,e.offset+"-"+r},mO=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},$7={static:function(e){var r=e.duration,n=e.timescale,i=n===void 0?1:n,a=e.sourceDuration,s=e.periodDuration,o=mO(e.endNumber),c=r/i;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/c}:{start:0,end:a/c}},dynamic:function(e){var r=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,a=e.timescale,s=a===void 0?1:a,o=e.duration,c=e.periodStart,l=c===void 0?0:c,f=e.minimumUpdatePeriod,g=f===void 0?0:f,m=e.timeShiftBufferDepth,y=m===void 0?1/0:m,x=mO(e.endNumber),I=(r+n)/1e3,A=i+l,F=I+g,X=F-A,de=Math.ceil(X*s/o),N=Math.floor((I-A-y)*s/o),H=Math.floor((I-A)*s/o);return{start:Math.max(0,N),end:typeof x=="number"?x:Math.min(de,H)}}},B7=function(e){return function(r){var n=e.duration,i=e.timescale,a=i===void 0?1:i,s=e.periodStart,o=e.startNumber,c=o===void 0?1:o;return{number:c+r,duration:n/a,timeline:s,time:r*n}}},Q_=function(e){var r=e.type,n=e.duration,i=e.timescale,a=i===void 0?1:i,s=e.periodDuration,o=e.sourceDuration,c=$7[r](e),l=c.start,f=c.end,g=N7(l,f).map(B7(e));if(r==="static"){var m=g.length-1,y=typeof s=="number"?s:o;g[m].duration=y-n/a*m}return g},CO=function(e){var r=e.baseUrl,n=e.initialization,i=n===void 0?{}:n,a=e.sourceDuration,s=e.indexRange,o=s===void 0?"":s,c=e.periodStart,l=e.presentationTime,f=e.number,g=f===void 0?0:f,m=e.duration;if(!r)throw new Error(yd.NO_BASE_URL);var y=Hp({baseUrl:r,source:i.sourceURL,range:i.range}),x=Hp({baseUrl:r,source:r,indexRange:o});if(x.map=y,m){var I=Q_(e);I.length&&(x.duration=I[0].duration,x.timeline=I[0].timeline)}else a&&(x.duration=a,x.timeline=c);return x.presentationTime=l||c,x.number=g,[x]},EO=function(e,r,n){var i=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,c=o.offset+o.length,l=r.timescale,f=r.references.filter(function(ie){return ie.referenceType!==1}),g=[],m=e.endList?"static":"dynamic",y=e.sidx.timeline,x=y,I=e.mediaSequence||0,A;typeof r.firstOffset=="bigint"?A=Ra.default.BigInt(c)+r.firstOffset:A=c+r.firstOffset;for(var F=0;F<f.length;F++){var X=r.references[F],de=X.referencedSize,N=X.subsegmentDuration,H=void 0;typeof A=="bigint"?H=A+Ra.default.BigInt(de)-Ra.default.BigInt(1):H=A+de-1;var z=A+"-"+H,Y={baseUrl:n,timescale:l,timeline:s,periodStart:y,presentationTime:x,number:I,duration:N,sourceDuration:a,indexRange:z,type:m},G=CO(Y)[0];i&&(G.map=i),g.push(G),typeof A=="bigint"?A+=Ra.default.BigInt(de):A+=de,x+=N/l,I++}return e.segments=g,e},q7=["AUDIO","SUBTITLES"],j7=1/60,xO=function(e){return M7(e,function(r){var n=r.timeline;return n}).sort(function(r,n){return r.timeline>n.timeline?1:-1})},H7=function(e,r){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===r)return e[n];return null},vO=function(e){var r=[];return D7.forEachMediaGroup(e,q7,function(n,i,a,s){r=r.concat(n.playlists||[])}),r},yO=function(e){var r=e.playlist,n=e.mediaSequence;r.mediaSequence=n,r.segments.forEach(function(i,a){i.number=r.mediaSequence+a})},G7=function(e){var r=e.oldPlaylists,n=e.newPlaylists,i=e.timelineStarts;n.forEach(function(a){a.discontinuitySequence=X_(i,function(f){var g=f.timeline;return g===a.timeline});var s=H7(r,a.attributes.NAME);if(s&&!a.sidx){var o=a.segments[0],c=X_(s.segments,function(f){return Math.abs(f.presentationTime-o.presentationTime)<j7});if(c===-1){yO({playlist:a,mediaSequence:s.mediaSequence+s.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),(!s.segments.length&&a.timeline>s.timeline||s.segments.length&&a.timeline>s.segments[s.segments.length-1].timeline)&&a.discontinuitySequence--;return}var l=s.segments[c];l.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),yO({playlist:a,mediaSequence:s.segments[c].number})}})},z7=function(e){var r=e.oldManifest,n=e.newManifest,i=r.playlists.concat(vO(r)),a=n.playlists.concat(vO(n));return n.timelineStarts=xO([r.timelineStarts,n.timelineStarts]),G7({oldPlaylists:i,newPlaylists:a,timelineStarts:n.timelineStarts}),n},AO=function(e){return e&&e.uri+"-"+U7(e.byterange)},K_=function(e){var r=SO(e.reduce(function(n,i){var a=i.attributes.id+(i.attributes.lang||"");if(!n[a])n[a]=i,n[a].attributes.timelineStarts=[];else{if(i.segments){var s;i.segments[0]&&(i.segments[0].discontinuity=!0),(s=n[a].segments).push.apply(s,i.segments)}i.attributes.contentProtection&&(n[a].attributes.contentProtection=i.attributes.contentProtection)}return n[a].attributes.timelineStarts.push({start:i.attributes.periodStart,timeline:i.attributes.periodStart}),n},{}));return r.map(function(n){return n.discontinuityStarts=F7(n.segments||[],"discontinuity"),n})},Z_=function(e,r){var n=AO(e.sidx),i=n&&r[n]&&r[n].sidx;return i&&EO(e,i,e.sidx.resolvedUri),e},V7=function(e,r){if(r===void 0&&(r={}),!Object.keys(r).length)return e;for(var n in e)e[n]=Z_(e[n],r);return e},W7=function(e,r){var n,i=e.attributes,a=e.segments,s=e.sidx,o=e.mediaSequence,c=e.discontinuitySequence,l=e.discontinuityStarts,f={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:c,discontinuityStarts:l,timelineStarts:i.timelineStarts,mediaSequence:o,segments:a};return i.contentProtection&&(f.contentProtection=i.contentProtection),s&&(f.sidx=s),r&&(f.attributes.AUDIO="audio",f.attributes.SUBTITLES="subs"),f},K7=function(e){var r,n=e.attributes,i=e.segments,a=e.mediaSequence,s=e.discontinuityStarts,o=e.discontinuitySequence;typeof i>"u"&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var c=(r={NAME:n.id,BANDWIDTH:n.bandwidth},r["PROGRAM-ID"]=1,r);return n.codecs&&(c.CODECS=n.codecs),{attributes:c,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:a,segments:i}},X7=function(e,r,n){r===void 0&&(r={}),n===void 0&&(n=!1);var i,a=e.reduce(function(o,c){var l=c.attributes.role&&c.attributes.role.value||"",f=c.attributes.lang||"",g=c.attributes.label||"main";if(f&&!c.attributes.label){var m=l?" ("+l+")":"";g=""+c.attributes.lang+m}o[g]||(o[g]={language:f,autoselect:!0,default:l==="main",playlists:[],uri:""});var y=Z_(W7(c,n),r);return o[g].playlists.push(y),typeof i>"u"&&l==="main"&&(i=c,i.default=!0),o},{});if(!i){var s=Object.keys(a)[0];a[s].default=!0}return a},Y7=function(e,r){return r===void 0&&(r={}),e.reduce(function(n,i){var a=i.attributes.lang||"text";return n[a]||(n[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),n[a].playlists.push(Z_(K7(i),r)),n},{})},J7=function(e){return e.reduce(function(r,n){return n&&n.forEach(function(i){var a=i.channel,s=i.language;r[s]={autoselect:!1,default:!1,instreamId:a,language:s},i.hasOwnProperty("aspectRatio")&&(r[s].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(r[s].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(r[s]["3D"]=i["3D"])}),r},{})},Q7=function(e){var r,n=e.attributes,i=e.segments,a=e.sidx,s=e.discontinuityStarts,o={attributes:(r={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:s,timelineStarts:n.timelineStarts,segments:i};return n.frameRate&&(o.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(o.contentProtection=n.contentProtection),a&&(o.sidx=a),o},Z7=function(e){var r=e.attributes;return r.mimeType==="video/mp4"||r.mimeType==="video/webm"||r.contentType==="video"},eX=function(e){var r=e.attributes;return r.mimeType==="audio/mp4"||r.mimeType==="audio/webm"||r.contentType==="audio"},tX=function(e){var r=e.attributes;return r.mimeType==="text/vtt"||r.contentType==="text"},rX=function(e,r){e.forEach(function(n){n.mediaSequence=0,n.discontinuitySequence=X_(r,function(i){var a=i.timeline;return a===n.timeline}),n.segments&&n.segments.forEach(function(i,a){i.number=a})})},bO=function(e){return e?Object.keys(e).reduce(function(r,n){var i=e[n];return r.concat(i.playlists)},[]):[]},kO=function(e){var r,n=e.dashPlaylists,i=e.locations,a=e.sidxMapping,s=a===void 0?{}:a,o=e.previousManifest;if(!n.length)return{};var c=n[0].attributes,l=c.sourceDuration,f=c.type,g=c.suggestedPresentationDelay,m=c.minimumUpdatePeriod,y=K_(n.filter(Z7)).map(Q7),x=K_(n.filter(eX)),I=K_(n.filter(tX)),A=n.map(function(Y){return Y.attributes.captionServices}).filter(Boolean),F={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:l,playlists:V7(y,s)};m>=0&&(F.minimumUpdatePeriod=m*1e3),i&&(F.locations=i),f==="dynamic"&&(F.suggestedPresentationDelay=g);var X=F.playlists.length===0,de=x.length?X7(x,s,X):null,N=I.length?Y7(I,s):null,H=y.concat(bO(de),bO(N)),z=H.map(function(Y){var G=Y.timelineStarts;return G});return F.timelineStarts=xO(z),rX(H,F.timelineStarts),de&&(F.mediaGroups.AUDIO.audio=de),N&&(F.mediaGroups.SUBTITLES.subs=N),A.length&&(F.mediaGroups["CLOSED-CAPTIONS"].cc=J7(A)),o?z7({oldManifest:o,newManifest:F}):F},iX=function(e,r,n){var i=e.NOW,a=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,c=o===void 0?1:o,l=e.periodStart,f=l===void 0?0:l,g=e.minimumUpdatePeriod,m=g===void 0?0:g,y=(i+a)/1e3,x=s+f,I=y+m,A=I-x;return Math.ceil((A*c-r)/n)},IO=function(e,r){for(var n=e.type,i=e.minimumUpdatePeriod,a=i===void 0?0:i,s=e.media,o=s===void 0?"":s,c=e.sourceDuration,l=e.timescale,f=l===void 0?1:l,g=e.startNumber,m=g===void 0?1:g,y=e.periodStart,x=[],I=-1,A=0;A<r.length;A++){var F=r[A],X=F.d,de=F.r||0,N=F.t||0;I<0&&(I=N),N&&N>I&&(I=N);var H=void 0;if(de<0){var z=A+1;z===r.length?n==="dynamic"&&a>0&&o.indexOf("$Number$")>0?H=iX(e,I,X):H=(c*f-I)/X:H=(r[z].t-I)/X}else H=de+1;for(var Y=m+x.length+H,G=m+x.length;G<Y;)x.push({number:G,duration:X/f,time:I,timeline:y}),I+=X,G++}return x},nX=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,aX=function(e){return function(r,n,i,a){if(r==="$$")return"$";if(typeof e[n]>"u")return r;var s=""+e[n];return n==="RepresentationID"||(i?a=parseInt(a,10):a=1,s.length>=a)?s:""+new Array(a-s.length+1).join("0")+s}},_O=function(e,r){return e.replace(nX,aX(r))},sX=function(e,r){return!e.duration&&!r?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?Q_(e):IO(e,r)},oX=function(e,r){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,a=i===void 0?{sourceURL:"",range:""}:i,s=Hp({baseUrl:e.baseUrl,source:_O(a.sourceURL,n),range:a.range}),o=sX(e,r);return o.map(function(c){n.Number=c.number,n.Time=c.time;var l=_O(e.media||"",n),f=e.timescale||1,g=e.presentationTimeOffset||0,m=e.periodStart+(c.time-g)/f,y={uri:l,timeline:c.timeline,duration:c.duration,resolvedUri:J_.default(e.baseUrl||"",l),map:s,number:c.number,presentationTime:m};return y})},uX=function(e,r){var n=e.baseUrl,i=e.initialization,a=i===void 0?{}:i,s=Hp({baseUrl:n,source:a.sourceURL,range:a.range}),o=Hp({baseUrl:n,source:r.media,range:r.mediaRange});return o.map=s,o},cX=function(e,r){var n=e.duration,i=e.segmentUrls,a=i===void 0?[]:i,s=e.periodStart;if(!n&&!r||n&&r)throw new Error(yd.SEGMENT_TIME_UNSPECIFIED);var o=a.map(function(f){return uX(e,f)}),c;n&&(c=Q_(e)),r&&(c=IO(e,r));var l=c.map(function(f,g){if(o[g]){var m=o[g],y=e.timescale||1,x=e.presentationTimeOffset||0;return m.timeline=f.timeline,m.duration=f.duration,m.number=f.number,m.presentationTime=s+(f.time-x)/y,m}}).filter(function(f){return f});return l},lX=function(e){var r=e.attributes,n=e.segmentInfo,i,a;n.template?(a=oX,i=ha(r,n.template)):n.base?(a=CO,i=ha(r,n.base)):n.list&&(a=cX,i=ha(r,n.list));var s={attributes:r};if(!a)return s;var o=a(i,n.segmentTimeline);if(i.duration){var c=i,l=c.duration,f=c.timescale,g=f===void 0?1:f;i.duration=l/g}else o.length?i.duration=o.reduce(function(m,y){return Math.max(m,Math.ceil(y.duration))},0):i.duration=0;return s.attributes=i,s.segments=o,n.base&&i.indexRange&&(s.sidx=o[0],s.segments=[]),s},DO=function(e){return e.map(lX)},Yi=function(e,r){return TO(e.childNodes).filter(function(n){var i=n.tagName;return i===r})},ew=function(e){return e.textContent.trim()},dX=function(e){return parseFloat(e.split("/").reduce(function(r,n){return r/n}))},vd=function(e){var r=31536e3,n=30*24*60*60,i=24*60*60,a=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,c=o.exec(e);if(!c)return 0;var l=c.slice(1),f=l[0],g=l[1],m=l[2],y=l[3],x=l[4],I=l[5];return parseFloat(f||0)*r+parseFloat(g||0)*n+parseFloat(m||0)*i+parseFloat(y||0)*a+parseFloat(x||0)*s+parseFloat(I||0)},fX=function(e){var r=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return r.test(e)&&(e+="Z"),Date.parse(e)},wO={mediaPresentationDuration:function(e){return vd(e)},availabilityStartTime:function(e){return fX(e)/1e3},minimumUpdatePeriod:function(e){return vd(e)},suggestedPresentationDelay:function(e){return vd(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return vd(e)},start:function(e){return vd(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return dX(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var r=parseInt(e,10);return isNaN(r)?vd(e):r},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Xn=function(e){return e&&e.attributes?TO(e.attributes).reduce(function(r,n){var i=wO[n.name]||wO.DEFAULT;return r[n.name]=i(n.value),r},{}):{}},pX={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Um=function(e,r){return r.length?Mm(e.map(function(n){return r.map(function(i){return J_.default(n,ew(i))})})):e},tw=function(e){var r=Yi(e,"SegmentTemplate")[0],n=Yi(e,"SegmentList")[0],i=n&&Yi(n,"SegmentURL").map(function(m){return ha({tag:"SegmentURL"},Xn(m))}),a=Yi(e,"SegmentBase")[0],s=n||r,o=s&&Yi(s,"SegmentTimeline")[0],c=n||a||r,l=c&&Yi(c,"Initialization")[0],f=r&&Xn(r);f&&l?f.initialization=l&&Xn(l):f&&f.initialization&&(f.initialization={sourceURL:f.initialization});var g={template:f,segmentTimeline:o&&Yi(o,"S").map(function(m){return Xn(m)}),list:n&&ha(Xn(n),{segmentUrls:i,initialization:Xn(l)}),base:a&&ha(Xn(a),{initialization:Xn(l)})};return Object.keys(g).forEach(function(m){g[m]||delete g[m]}),g},hX=function(e,r,n){return function(i){var a=Yi(i,"BaseURL"),s=Um(r,a),o=ha(e,Xn(i)),c=tw(i);return s.map(function(l){return{segmentInfo:ha(n,c),attributes:ha(o,{baseUrl:l})}})}},gX=function(e){return e.reduce(function(r,n){var i=Xn(n);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var a=pX[i.schemeIdUri];if(a){r[a]={attributes:i};var s=Yi(n,"cenc:pssh")[0];if(s){var o=ew(s);r[a].pssh=o&&R7.default(o)}}return r},{})},mX=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var r=typeof e.value!="string"?[]:e.value.split(";");return r.map(function(i){var a,s;if(s=i,/^CC\d=/.test(i)){var o=i.split("=");a=o[0],s=o[1]}else/^CC\d$/.test(i)&&(a=i);return{channel:a,language:s}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var n=typeof e.value!="string"?[]:e.value.split(";");return n.map(function(i){var a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var s=i.split("="),o=s[0],c=s[1],l=c===void 0?"":c;a.channel=o,a.language=i,l.split(",").forEach(function(f){var g=f.split(":"),m=g[0],y=g[1];m==="lang"?a.language=y:m==="er"?a.easyReader=Number(y):m==="war"?a.aspectRatio=Number(y):m==="3D"&&(a["3D"]=Number(y))})}else a.language=i;return a.channel&&(a.channel="SERVICE"+a.channel),a})}},vX=function(e,r,n){return function(i){var a=Xn(i),s=Um(r,Yi(i,"BaseURL")),o=Yi(i,"Role")[0],c={role:Xn(o)},l=ha(e,a,c),f=Yi(i,"Accessibility")[0],g=mX(Xn(f));g&&(l=ha(l,{captionServices:g}));var m=Yi(i,"Label")[0];if(m&&m.childNodes.length){var y=m.childNodes[0].nodeValue.trim();l=ha(l,{label:y})}var x=gX(Yi(i,"ContentProtection"));Object.keys(x).length&&(l=ha(l,{contentProtection:x}));var I=tw(i),A=Yi(i,"Representation"),F=ha(n,I);return Mm(A.map(hX(l,s,F)))}},yX=function(e,r){return function(n,i){var a=Um(r,Yi(n.node,"BaseURL")),s=ha(e,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(s.periodDuration=n.attributes.duration);var o=Yi(n.node,"AdaptationSet"),c=tw(n.node);return Mm(o.map(vX(s,a,c)))}},bX=function(e){var r=e.attributes,n=e.priorPeriodAttributes,i=e.mpdType;return typeof r.start=="number"?r.start:n&&typeof n.start=="number"&&typeof n.duration=="number"?n.start+n.duration:!n&&i==="static"?0:null},OO=function(e,r){r===void 0&&(r={});var n=r,i=n.manifestUri,a=i===void 0?"":i,s=n.NOW,o=s===void 0?Date.now():s,c=n.clientOffset,l=c===void 0?0:c,f=Yi(e,"Period");if(!f.length)throw new Error(yd.INVALID_NUMBER_OF_PERIOD);var g=Yi(e,"Location"),m=Xn(e),y=Um([a],Yi(e,"BaseURL"));m.type=m.type||"static",m.sourceDuration=m.mediaPresentationDuration||0,m.NOW=o,m.clientOffset=l,g.length&&(m.locations=g.map(ew));var x=[];return f.forEach(function(I,A){var F=Xn(I),X=x[A-1];F.start=bX({attributes:F,priorPeriodAttributes:X?X.attributes:null,mpdType:m.type}),x.push({node:I,attributes:F})}),{locations:m.locations,representationInfo:Mm(x.map(yX(m,y)))}},rw=function(e){if(e==="")throw new Error(yd.DASH_EMPTY_MANIFEST);var r=new P7.DOMParser,n,i;try{n=r.parseFromString(e,"application/xml"),i=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(yd.DASH_INVALID_XML);return i},_X=function(e){var r=Yi(e,"UTCTiming")[0];if(!r)return null;var n=Xn(r);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(yd.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},wX=L7,SX=function(e,r){r===void 0&&(r={});var n=OO(rw(e),r),i=DO(n.representationInfo);return kO({dashPlaylists:i,locations:n.locations,sidxMapping:r.sidxMapping,previousManifest:r.previousManifest})},TX=function(e){return _X(rw(e))};ks.VERSION=wX;ks.addSidxSegmentsToPlaylist=EO;ks.generateSidxKey=AO;ks.inheritAttributes=OO;ks.parse=SX;ks.parseUTCTiming=TX;ks.stringToMpdXml=rw;ks.toM3u8=kO;ks.toPlaylists=DO});var NO=R((fAe,LO)=>{var RO=Math.pow(2,32),CX=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r;return e.getBigUint64?(r=e.getBigUint64(0),r<Number.MAX_SAFE_INTEGER?Number(r):r):e.getUint32(0)*RO+e.getUint32(4)};LO.exports={getUint64:CX,MAX_UINT32:RO}});var UO=R((pAe,MO)=>{var FO=NO().getUint64,EX=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},n=12;r.version===0?(r.earliestPresentationTime=e.getUint32(n),r.firstOffset=e.getUint32(n+4),n+=8):(r.earliestPresentationTime=FO(t.subarray(n)),r.firstOffset=FO(t.subarray(n+8)),n+=16),n+=2;var i=e.getUint16(n);for(n+=2;i>0;n+=12,i--)r.references.push({referenceType:(t[n]&128)>>>7,referencedSize:e.getUint32(n)&2147483647,subsegmentDuration:e.getUint32(n+4),startsWithSap:!!(t[n+8]&128),sapType:(t[n+8]&112)>>>4,sapDeltaTime:e.getUint32(n+8)&268435455});return r};MO.exports=EX});var iw=R(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.getId3Offset=bd.getId3Size=void 0;var $m=qu(),xX=(0,$m.toUint8)([73,68,51]),$O=function(e,r){r===void 0&&(r=0),e=(0,$m.toUint8)(e);var n=e[r+5],i=e[r+6]<<21|e[r+7]<<14|e[r+8]<<7|e[r+9],a=(n&16)>>4;return a?i+20:i+10};bd.getId3Size=$O;var AX=function t(e,r){return r===void 0&&(r=0),e=(0,$m.toUint8)(e),e.length-r<10||!(0,$m.bytesMatch)(e,xX,{offset:r})?r:(r+=$O(e,r),t(e,r))};bd.getId3Offset=AX});var nw=R(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.getHvcCodec=Gu.getAvcCodec=Gu.getAv1Codec=void 0;var Bc=qu(),kX=function(e){var r="",n=e[1]>>>3,i=e[1]&31,a=e[2]>>>7,s=(e[2]&64)>>6,o=(e[2]&32)>>5,c=(e[2]&16)>>4,l=(e[2]&8)>>3,f=(e[2]&4)>>2,g=e[2]&3;r+=n+"."+(0,Bc.padStart)(i,2,"0"),a===0?r+="M":a===1&&(r+="H");var m;return n===2&&s?m=o?12:10:m=s?10:8,r+="."+(0,Bc.padStart)(m,2,"0"),r+="."+c,r+="."+l+f+g,r};Gu.getAv1Codec=kX;var IX=function(e){var r=(0,Bc.toHexString)(e[1]),n=(0,Bc.toHexString)(e[2]&252),i=(0,Bc.toHexString)(e[3]);return""+r+n+i};Gu.getAvcCodec=IX;var DX=function(e){var r="",n=e[1]>>6,i=e[1]&31,a=(e[1]&32)>>5,s=e.subarray(2,6),o=e.subarray(6,12),c=e[12];n===1?r+="A":n===2?r+="B":n===3&&(r+="C"),r+=i+".";var l=parseInt((0,Bc.toBinaryString)(s).split("").reverse().join(""),2);l>255&&(l=parseInt((0,Bc.toBinaryString)(s),2)),r+=l.toString(16)+".",a===0?r+="L":r+="H",r+=c;for(var f="",g=0;g<o.length;g++){var m=o[g];m&&(f&&(f+="."),f+=m.toString(16))}return f&&(r+="."+f),r};Gu.getHvcCodec=DX});var BO=R(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.setOpusHead=zu.parseOpusHead=zu.OPUS_HEAD=void 0;var OX=new Uint8Array([79,112,117,115,72,101,97,100]);zu.OPUS_HEAD=OX;var PX=function(e){var r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=r.getUint8(0),i=n!==0,a={version:n,channels:r.getUint8(1),preSkip:r.getUint16(2,i),sampleRate:r.getUint32(4,i),outputGain:r.getUint16(8,i),channelMappingFamily:r.getUint8(10)};if(a.channelMappingFamily>0&&e.length>10){a.streamCount=r.getUint8(11),a.twoChannelStreamCount=r.getUint8(12),a.channelMapping=[];for(var s=0;s<a.channels;s++)a.channelMapping.push(r.getUint8(13+s))}return a};zu.parseOpusHead=PX;var RX=function(e){var r=e.channelMappingFamily<=0?11:12+e.channels,n=new DataView(new ArrayBuffer(r)),i=e.version!==0;return n.setUint8(0,e.version),n.setUint8(1,e.channels),n.setUint16(2,e.preSkip,i),n.setUint32(4,e.sampleRate,i),n.setUint16(8,e.outputGain,i),n.setUint8(10,e.channelMappingFamily),e.channelMappingFamily>0&&(n.setUint8(11,e.streamCount),e.channelMapping.foreach(function(a,s){n.setUint8(12+s,a)})),new Uint8Array(n.buffer)};zu.setOpusHead=RX});var HO=R(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.parseMediaInfo=Yn.parseTracks=Yn.addSampleDescription=Yn.buildFrameTable=Yn.findNamedBox=Yn.findBox=Yn.parseDescriptors=void 0;var Lr=qu(),aw=nw(),LX=BO(),sw=function(e){return typeof e=="string"?(0,Lr.stringToBytes)(e):e},NX=function(e){return Array.isArray(e)?e.map(function(r){return sw(r)}):[sw(e)]},ow,Bm=function(e){e=(0,Lr.toUint8)(e);for(var r=[],n=0;e.length>n;){var i=e[n],a=0,s=0;s++;var o=e[s];for(s++;o&128;)a=(o&127)<<7,o=e[s],s++;a+=o&127;for(var c=0;c<ow.length;c++){var l=ow[c],f=l.id,g=l.parser;if(i===f){r.push(g(e.subarray(s,s+a)));break}}n+=a+s}return r};Yn.parseDescriptors=Bm;ow=[{id:3,parser:function(e){var r={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(r.flags&128&&(r.dependsOnEsId=e[r.size]<<8|e[r.size+1],r.size+=2),r.flags&64){var n=e[r.size];r.url=(0,Lr.bytesToString)(e.subarray(r.size+1,r.size+1+n)),r.size+=n}return r.flags&32&&(r.ocrEsId=e[r.size]<<8|e[r.size+1],r.size+=2),r.descriptors=Bm(e.subarray(r.size))||[],r}},{id:4,parser:function(e){var r={tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:Bm(e.subarray(13))};return r}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var La=function t(e,r,n){n===void 0&&(n=!1),r=NX(r),e=(0,Lr.toUint8)(e);var i=[];if(!r.length)return i;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(s===0)break;var c=a+s;if(c>e.length){if(n)break;c=e.length}var l=e.subarray(a+8,c);(0,Lr.bytesMatch)(o,r[0])&&(r.length===1?i.push(l):i.push.apply(i,t(l,r.slice(1),n))),a=c}return i};Yn.findBox=La;var qc=function(e,r){if(r=sw(r),!r.length)return e.subarray(e.length);for(var n=0;n<e.length;){if((0,Lr.bytesMatch)(e.subarray(n,n+r.length),r)){var i=(e[n-4]<<24|e[n-3]<<16|e[n-2]<<8|e[n-1])>>>0,a=i>1?n+i:e.byteLength;return e.subarray(n+4,a)}n++}return e.subarray(e.length)};Yn.findNamedBox=qc;var Gp=function(e,r,n){r===void 0&&(r=4),n===void 0&&(n=function(c){return(0,Lr.bytesToNumber)(c)});var i=[];if(!e||!e.length)return i;for(var a=(0,Lr.bytesToNumber)(e.subarray(4,8)),s=8;a;s+=r,a--)i.push(n(e.subarray(s,s+r)));return i},qO=function(e,r){for(var n=Gp(La(e,["stss"])[0]),i=Gp(La(e,["stco"])[0]),a=Gp(La(e,["stts"])[0],8,function(ie){return{sampleCount:(0,Lr.bytesToNumber)(ie.subarray(0,4)),sampleDelta:(0,Lr.bytesToNumber)(ie.subarray(4,8))}}),s=Gp(La(e,["stsc"])[0],12,function(ie){return{firstChunk:(0,Lr.bytesToNumber)(ie.subarray(0,4)),samplesPerChunk:(0,Lr.bytesToNumber)(ie.subarray(4,8)),sampleDescriptionIndex:(0,Lr.bytesToNumber)(ie.subarray(8,12))}}),o=La(e,["stsz"])[0],c=Gp(o&&o.length&&o.subarray(4)||null),l=[],f=0;f<i.length;f++){for(var g=void 0,m=0;m<s.length;m++){var y=s[m],x=f+1>=y.firstChunk&&(m+1>=s.length||f+1<s[m+1].firstChunk);if(x){g=y.samplesPerChunk;break}}for(var I=i[f],A=0;A<g;A++){var F=c[l.length],X=!n.length;n.length&&n.indexOf(l.length+1)!==-1&&(X=!0);for(var de={keyframe:X,start:I,end:I+F},N=0;N<a.length;N++){var H=a[N],z=H.sampleCount,Y=H.sampleDelta;if(l.length<=z){var G=l.length?l[l.length-1].timestamp:0;de.timestamp=G+Y/r*1e3,de.duration=Y;break}}l.push(de),I+=F}}return l};Yn.buildFrameTable=qO;var jO=function(e,r){var n=(0,Lr.bytesToString)(r.subarray(0,4));if(e.type==="video"?(e.info=e.info||{},e.info.width=r[28]<<8|r[29],e.info.height=r[30]<<8|r[31]):e.type==="audio"&&(e.info=e.info||{},e.info.channels=r[20]<<8|r[21],e.info.bitDepth=r[22]<<8|r[23],e.info.sampleRate=r[28]<<8|r[29]),n==="avc1"){var i=qc(r,"avcC");n+="."+(0,aw.getAvcCodec)(i),e.info.avcC=i}else if(n==="hvc1"||n==="hev1")n+="."+(0,aw.getHvcCodec)(qc(r,"hvcC"));else if(n==="mp4a"||n==="mp4v"){var a=qc(r,"esds"),s=Bm(a.subarray(4))[0],o=s&&s.descriptors.filter(function(X){var de=X.tag;return de===4})[0];o?(n+="."+(0,Lr.toHexString)(o.oti),o.oti===64?n+="."+(o.descriptors[0].bytes[0]>>3).toString():o.oti===32?n+="."+o.descriptors[0].bytes[4].toString():o.oti===221&&(n="vorbis")):e.type==="audio"?n+=".40.2":n+=".20.9"}else if(n==="av01")n+="."+(0,aw.getAv1Codec)(qc(r,"av1C"));else if(n==="vp09"){var c=qc(r,"vpcC"),l=c[0],f=c[1],g=c[2]>>4,m=(c[2]&15)>>1,y=(c[2]&15)>>3,x=c[3],I=c[4],A=c[5];n+="."+(0,Lr.padStart)(l,2,"0"),n+="."+(0,Lr.padStart)(f,2,"0"),n+="."+(0,Lr.padStart)(g,2,"0"),n+="."+(0,Lr.padStart)(m,2,"0"),n+="."+(0,Lr.padStart)(x,2,"0"),n+="."+(0,Lr.padStart)(I,2,"0"),n+="."+(0,Lr.padStart)(A,2,"0"),n+="."+(0,Lr.padStart)(y,2,"0")}else if(n==="theo")n="theora";else if(n==="spex")n="speex";else if(n===".mp3")n="mp4a.40.34";else if(n==="msVo")n="vorbis";else if(n==="Opus"){n="opus";var F=qc(r,"dOps");e.info.opus=(0,LX.parseOpusHead)(F),e.info.codecDelay=65e5}else n=n.toLowerCase();e.codec=n};Yn.addSampleDescription=jO;var FX=function(e,r){r===void 0&&(r=!0),e=(0,Lr.toUint8)(e);var n=La(e,["moov","trak"],!0),i=[];return n.forEach(function(a){var s={bytes:a},o=La(a,["mdia"])[0],c=La(o,["hdlr"])[0],l=(0,Lr.bytesToString)(c.subarray(8,12));l==="soun"?s.type="audio":l==="vide"?s.type="video":s.type=l;var f=La(a,["tkhd"])[0];if(f){var g=new DataView(f.buffer,f.byteOffset,f.byteLength),m=g.getUint8(0);s.number=m===0?g.getUint32(12):g.getUint32(20)}var y=La(o,["mdhd"])[0];if(y){var x=y[0],I=x===0?12:20;s.timescale=(y[I]<<24|y[I+1]<<16|y[I+2]<<8|y[I+3])>>>0}for(var A=La(o,["minf","stbl"])[0],F=La(A,["stsd"])[0],X=(0,Lr.bytesToNumber)(F.subarray(4,8)),de=8;X--;){var N=(0,Lr.bytesToNumber)(F.subarray(de,de+4)),H=F.subarray(de+4,de+4+N);jO(s,H),de+=4+N}r&&(s.frameTable=qO(A,s.timescale)),i.push(s)}),i};Yn.parseTracks=FX;var MX=function(e){var r=La(e,["moov","mvhd"],!0)[0];if(!(!r||!r.length)){var n={};return r[0]===1?(n.timestampScale=(0,Lr.bytesToNumber)(r.subarray(20,24)),n.duration=(0,Lr.bytesToNumber)(r.subarray(24,32))):(n.timestampScale=(0,Lr.bytesToNumber)(r.subarray(12,16)),n.duration=(0,Lr.bytesToNumber)(r.subarray(16,20))),n.bytes=r,n}};Yn.parseMediaInfo=MX});var WO=R(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.parseData=ds.parseTracks=ds.decodeBlock=ds.findEbml=ds.EBML_TAGS=void 0;var ar=qu(),uw=nw(),ji={EBML:(0,ar.toUint8)([26,69,223,163]),DocType:(0,ar.toUint8)([66,130]),Segment:(0,ar.toUint8)([24,83,128,103]),SegmentInfo:(0,ar.toUint8)([21,73,169,102]),Tracks:(0,ar.toUint8)([22,84,174,107]),Track:(0,ar.toUint8)([174]),TrackNumber:(0,ar.toUint8)([215]),DefaultDuration:(0,ar.toUint8)([35,227,131]),TrackEntry:(0,ar.toUint8)([174]),TrackType:(0,ar.toUint8)([131]),FlagDefault:(0,ar.toUint8)([136]),CodecID:(0,ar.toUint8)([134]),CodecPrivate:(0,ar.toUint8)([99,162]),VideoTrack:(0,ar.toUint8)([224]),AudioTrack:(0,ar.toUint8)([225]),Cluster:(0,ar.toUint8)([31,67,182,117]),Timestamp:(0,ar.toUint8)([231]),TimestampScale:(0,ar.toUint8)([42,215,177]),BlockGroup:(0,ar.toUint8)([160]),BlockDuration:(0,ar.toUint8)([155]),Block:(0,ar.toUint8)([161]),SimpleBlock:(0,ar.toUint8)([163])};ds.EBML_TAGS=ji;var cw=[128,64,32,16,8,4,2,1],UX=function(e){for(var r=1,n=0;n<cw.length&&!(e&cw[n]);n++)r++;return r},jc=function(e,r,n,i){n===void 0&&(n=!0),i===void 0&&(i=!1);var a=UX(e[r]),s=e.subarray(r,r+a);return n&&(s=Array.prototype.slice.call(e,r,r+a),s[0]^=cw[a-1]),{length:a,value:(0,ar.bytesToNumber)(s,{signed:i}),bytes:s}},GO=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(r){return t(r)}):typeof e=="number"?(0,ar.numberToBytes)(e):e},$X=function(e){return Array.isArray(e)?e.map(function(r){return GO(r)}):[GO(e)]},BX=function t(e,r,n){if(n>=r.length)return r.length;var i=jc(r,n,!1);if((0,ar.bytesMatch)(e.bytes,i.bytes))return n;var a=jc(r,n+i.length);return t(e,r,n+a.length+a.value+i.length)},qi=function t(e,r){r=$X(r),e=(0,ar.toUint8)(e);var n=[];if(!r.length)return n;for(var i=0;i<e.length;){var a=jc(e,i,!1),s=jc(e,i+a.length),o=i+a.length+s.length;s.value===127&&(s.value=BX(a,e,o),s.value!==e.length&&(s.value-=o));var c=o+s.value>e.length?e.length:o+s.value,l=e.subarray(o,c);(0,ar.bytesMatch)(r[0],a.bytes)&&(r.length===1?n.push(l):n=n.concat(t(l,r.slice(1))));var f=a.length+s.length+l.length;i+=f}return n};ds.findEbml=qi;var zO=function(e,r,n,i){var a;r==="group"&&(a=qi(e,[ji.BlockDuration])[0],a&&(a=(0,ar.bytesToNumber)(a),a=1/n*a*n/1e3),e=qi(e,[ji.Block])[0],r="block");var s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=jc(e,0),c=s.getInt16(o.length,!1),l=e[o.length+2],f=e.subarray(o.length+3),g=1/n*(i+c)*n/1e3,m={duration:a,trackNumber:o.value,keyframe:r==="simple"&&l>>7===1,invisible:(l&8)>>3===1,lacing:(l&6)>>1,discardable:r==="simple"&&(l&1)===1,frames:[],pts:g,dts:g,timestamp:c};if(!m.lacing)return m.frames.push(f),m;var y=f[0]+1,x=[],I=1;if(m.lacing===2)for(var A=(f.length-I)/y,F=0;F<y;F++)x.push(A);if(m.lacing===1)for(var X=0;X<y-1;X++){var de=0;do de+=f[I],I++;while(f[I-1]===255);x.push(de)}if(m.lacing===3)for(var N=0,H=0;H<y-1;H++){var z=H===0?jc(f,I):jc(f,I,!0,!0);N+=z.value,x.push(N),I+=z.length}return x.forEach(function(Y){m.frames.push(f.subarray(I,I+Y)),I+=Y}),m};ds.decodeBlock=zO;var qX=function(e){for(var r=0,n={};r<e.length;){var i=e[r]&127,a=e[r+1],s=void 0;a===1?s=e[r+2]:s=e.subarray(r+2,r+2+a),i===1?n.profile=s:i===2?n.level=s:i===3?n.bitDepth=s:i===4?n.chromaSubsampling=s:n[i]=s,r+=2+a}return n},VO=function(e){e=(0,ar.toUint8)(e);var r=[],n=qi(e,[ji.Segment,ji.Tracks,ji.Track]);return n.length||(n=qi(e,[ji.Tracks,ji.Track])),n.length||(n=qi(e,[ji.Track])),n.length?(n.forEach(function(i){var a=qi(i,ji.TrackType)[0];if(!(!a||!a.length)){if(a[0]===1)a="video";else if(a[0]===2)a="audio";else if(a[0]===17)a="subtitle";else return;var s={rawCodec:(0,ar.bytesToString)(qi(i,[ji.CodecID])[0]),type:a,codecPrivate:qi(i,[ji.CodecPrivate])[0],number:(0,ar.bytesToNumber)(qi(i,[ji.TrackNumber])[0]),defaultDuration:(0,ar.bytesToNumber)(qi(i,[ji.DefaultDuration])[0]),default:qi(i,[ji.FlagDefault])[0],rawData:i},o="";if(/V_MPEG4\/ISO\/AVC/.test(s.rawCodec))o="avc1."+(0,uw.getAvcCodec)(s.codecPrivate);else if(/V_MPEGH\/ISO\/HEVC/.test(s.rawCodec))o="hev1."+(0,uw.getHvcCodec)(s.codecPrivate);else if(/V_MPEG4\/ISO\/ASP/.test(s.rawCodec))s.codecPrivate?o="mp4v.20."+s.codecPrivate[4].toString():o="mp4v.20.9";else if(/^V_THEORA/.test(s.rawCodec))o="theora";else if(/^V_VP8/.test(s.rawCodec))o="vp8";else if(/^V_VP9/.test(s.rawCodec))if(s.codecPrivate){var c=qX(s.codecPrivate),l=c.profile,f=c.level,g=c.bitDepth,m=c.chromaSubsampling;o="vp09.",o+=(0,ar.padStart)(l,2,"0")+".",o+=(0,ar.padStart)(f,2,"0")+".",o+=(0,ar.padStart)(g,2,"0")+".",o+=""+(0,ar.padStart)(m,2,"0");var y=qi(i,[224,[85,176],[85,177]])[0]||[],x=qi(i,[224,[85,176],[85,185]])[0]||[],I=qi(i,[224,[85,176],[85,186]])[0]||[],A=qi(i,[224,[85,176],[85,187]])[0]||[];(y.length||x.length||I.length||A.length)&&(o+="."+(0,ar.padStart)(A[0],2,"0"),o+="."+(0,ar.padStart)(I[0],2,"0"),o+="."+(0,ar.padStart)(y[0],2,"0"),o+="."+(0,ar.padStart)(x[0],2,"0"))}else o="vp9";else/^V_AV1/.test(s.rawCodec)?o="av01."+(0,uw.getAv1Codec)(s.codecPrivate):/A_ALAC/.test(s.rawCodec)?o="alac":/A_MPEG\/L2/.test(s.rawCodec)?o="mp2":/A_MPEG\/L3/.test(s.rawCodec)?o="mp3":/^A_AAC/.test(s.rawCodec)?s.codecPrivate?o="mp4a.40."+(s.codecPrivate[0]>>>3).toString():o="mp4a.40.2":/^A_AC3/.test(s.rawCodec)?o="ac-3":/^A_PCM/.test(s.rawCodec)?o="pcm":/^A_MS\/ACM/.test(s.rawCodec)?o="speex":/^A_EAC3/.test(s.rawCodec)?o="ec-3":/^A_VORBIS/.test(s.rawCodec)?o="vorbis":/^A_FLAC/.test(s.rawCodec)?o="flac":/^A_OPUS/.test(s.rawCodec)&&(o="opus");s.codec=o,r.push(s)}}),r.sort(function(i,a){return i.number-a.number})):r};ds.parseTracks=VO;var jX=function(e,r){var n=[],i=qi(e,[ji.Segment])[0],a=qi(i,[ji.SegmentInfo,ji.TimestampScale])[0];a&&a.length?a=(0,ar.bytesToNumber)(a):a=1e6;var s=qi(i,[ji.Cluster]);return r||(r=VO(i)),s.forEach(function(o,c){var l=qi(o,[ji.SimpleBlock]).map(function(y){return{type:"simple",data:y}}),f=qi(o,[ji.BlockGroup]).map(function(y){return{type:"group",data:y}}),g=qi(o,[ji.Timestamp])[0]||0;g&&g.length&&(g=(0,ar.bytesToNumber)(g));var m=l.concat(f).sort(function(y,x){return y.data.byteOffset-x.data.byteOffset});m.forEach(function(y,x){var I=zO(y.data,y.type,a,g);n.push(I)})}),{tracks:r,blocks:n}};ds.parseData=jX});var QO=R(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.findH265Nal=Jn.findH264Nal=Jn.findNal=Jn.discardEmulationPreventionBytes=Jn.EMULATION_PREVENTION=Jn.NAL_TYPE_TWO=Jn.NAL_TYPE_ONE=void 0;var Hc=qu(),KO=(0,Hc.toUint8)([0,0,0,1]);Jn.NAL_TYPE_ONE=KO;var XO=(0,Hc.toUint8)([0,0,1]);Jn.NAL_TYPE_TWO=XO;var YO=(0,Hc.toUint8)([0,0,3]);Jn.EMULATION_PREVENTION=YO;var JO=function(e){for(var r=[],n=1;n<e.length-2;)(0,Hc.bytesMatch)(e.subarray(n,n+3),YO)&&(r.push(n+2),n++),n++;if(r.length===0)return e;var i=e.length-r.length,a=new Uint8Array(i),s=0;for(n=0;n<i;s++,n++)s===r[0]&&(s++,r.shift()),a[n]=e[s];return a};Jn.discardEmulationPreventionBytes=JO;var lw=function(e,r,n,i){i===void 0&&(i=1/0),e=(0,Hc.toUint8)(e),n=[].concat(n);for(var a=0,s,o=0;a<e.length&&(o<i||s);){var c=void 0;if((0,Hc.bytesMatch)(e.subarray(a),KO)?c=4:(0,Hc.bytesMatch)(e.subarray(a),XO)&&(c=3),!c){a++;continue}if(o++,s)return JO(e.subarray(s,a));var l=void 0;r==="h264"?l=e[a+c]&31:r==="h265"&&(l=e[a+c]>>1&63),n.indexOf(l)!==-1&&(s=a+c),a+=c+(r==="h264"?1:2)}return e.subarray(0,0)};Jn.findNal=lw;var HX=function(e,r,n){return lw(e,"h264",r,n)};Jn.findH264Nal=HX;var GX=function(e,r,n){return lw(e,"h265",r,n)};Jn.findH265Nal=GX});var tP=R(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.isLikelyFmp4MediaSegment=Vu.detectContainerForBytes=Vu.isLikely=void 0;var Ar=qu(),zX=HO(),_d=WO(),qm=iw(),ZO=QO(),ga={webm:(0,Ar.toUint8)([119,101,98,109]),matroska:(0,Ar.toUint8)([109,97,116,114,111,115,107,97]),flac:(0,Ar.toUint8)([102,76,97,67]),ogg:(0,Ar.toUint8)([79,103,103,83]),ac3:(0,Ar.toUint8)([11,119]),riff:(0,Ar.toUint8)([82,73,70,70]),avi:(0,Ar.toUint8)([65,86,73]),wav:(0,Ar.toUint8)([87,65,86,69]),"3gp":(0,Ar.toUint8)([102,116,121,112,51,103]),mp4:(0,Ar.toUint8)([102,116,121,112]),fmp4:(0,Ar.toUint8)([115,116,121,112]),mov:(0,Ar.toUint8)([102,116,121,112,113,116]),moov:(0,Ar.toUint8)([109,111,111,118]),moof:(0,Ar.toUint8)([109,111,111,102])},wd={aac:function(e){var r=(0,qm.getId3Offset)(e);return(0,Ar.bytesMatch)(e,[255,16],{offset:r,mask:[255,22]})},mp3:function(e){var r=(0,qm.getId3Offset)(e);return(0,Ar.bytesMatch)(e,[255,2],{offset:r,mask:[255,6]})},webm:function(e){var r=(0,_d.findEbml)(e,[_d.EBML_TAGS.EBML,_d.EBML_TAGS.DocType])[0];return(0,Ar.bytesMatch)(r,ga.webm)},mkv:function(e){var r=(0,_d.findEbml)(e,[_d.EBML_TAGS.EBML,_d.EBML_TAGS.DocType])[0];return(0,Ar.bytesMatch)(r,ga.matroska)},mp4:function(e){if(wd["3gp"](e)||wd.mov(e))return!1;if((0,Ar.bytesMatch)(e,ga.mp4,{offset:4})||(0,Ar.bytesMatch)(e,ga.fmp4,{offset:4})||(0,Ar.bytesMatch)(e,ga.moof,{offset:4})||(0,Ar.bytesMatch)(e,ga.moov,{offset:4}))return!0},mov:function(e){return(0,Ar.bytesMatch)(e,ga.mov,{offset:4})},"3gp":function(e){return(0,Ar.bytesMatch)(e,ga["3gp"],{offset:4})},ac3:function(e){var r=(0,qm.getId3Offset)(e);return(0,Ar.bytesMatch)(e,ga.ac3,{offset:r})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var r=0;r+188<e.length&&r<188;){if(e[r]===71&&e[r+188]===71)return!0;r+=1}return!1},flac:function(e){var r=(0,qm.getId3Offset)(e);return(0,Ar.bytesMatch)(e,ga.flac,{offset:r})},ogg:function(e){return(0,Ar.bytesMatch)(e,ga.ogg)},avi:function(e){return(0,Ar.bytesMatch)(e,ga.riff)&&(0,Ar.bytesMatch)(e,ga.avi,{offset:8})},wav:function(e){return(0,Ar.bytesMatch)(e,ga.riff)&&(0,Ar.bytesMatch)(e,ga.wav,{offset:8})},h264:function(e){return(0,ZO.findH264Nal)(e,7,3).length},h265:function(e){return(0,ZO.findH265Nal)(e,[32,33],3).length}},dw=Object.keys(wd).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);dw.forEach(function(t){var e=wd[t];wd[t]=function(r){return e((0,Ar.toUint8)(r))}});var eP=wd;Vu.isLikely=eP;var VX=function(e){e=(0,Ar.toUint8)(e);for(var r=0;r<dw.length;r++){var n=dw[r];if(eP[n](e))return n}return""};Vu.detectContainerForBytes=VX;var WX=function(e){return(0,zX.findBox)(e,["moof"]).length>0};Vu.isLikelyFmp4MediaSegment=WX});var sP=R((wAe,aP)=>{var fw=9e4,pw,hw,jm,gw,rP,iP,nP;pw=function(t){return t*fw};hw=function(t,e){return t*e};jm=function(t){return t/fw};gw=function(t,e){return t/e};rP=function(t,e){return pw(gw(t,e))};iP=function(t,e){return hw(jm(t),e)};nP=function(t,e,r){return jm(r?t:t-e)};aP.exports={ONE_SECOND_IN_TS:fw,secondsToVideoTs:pw,secondsToAudioTs:hw,videoTsToSeconds:jm,audioTsToSeconds:gw,audioTsToVideoTs:rP,videoTsToAudioTs:iP,metadataTsToSeconds:nP}});var oP=R((SAe,Xo)=>{function mw(t){return Xo.exports=mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xo.exports.__esModule=!0,Xo.exports.default=Xo.exports,mw(t)}Xo.exports=mw,Xo.exports.__esModule=!0,Xo.exports.default=Xo.exports});var uP=R((TAe,zp)=>{function KX(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}zp.exports=KX,zp.exports.__esModule=!0,zp.exports.default=zp.exports});var cP=R((CAe,Yo)=>{var XX=oP(),YX=mp(),JX=uP(),QX=__();function vw(t){var e=typeof Map=="function"?new Map:void 0;return Yo.exports=vw=function(n){if(n===null||!JX(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return QX(n,arguments,XX(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),YX(i,n)},Yo.exports.__esModule=!0,Yo.exports.default=Yo.exports,vw(t)}Yo.exports=vw,Yo.exports.__esModule=!0,Yo.exports.default=Yo.exports});var uL=R((EAe,oL)=>{"use strict";var ZX=no(),eY=c_(),tY=_m(),rY=wI(),iY=f_(),nY=h_(),aY=TI(),sY=OI(),oY=zI(),uY=__(),cY=KI(),lY=S_(),dY=oD(),ci=hD(),s2=gD(),Zm=qu(),Xc=PO(),fY=UO(),pY=iw(),ev=tP(),tv=sP(),hY=cP();function Ma(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var Te=Ma(ZX),wt=Ma(eY),Zc=Ma(tY),ir=Ma(rY),er=Ma(iY),Et=Ma(nY),gY=Ma(aY),o2=Ma(sY),lP=Ma(oY),mY=Ma(uY),vY=Ma(cY),yY=Ma(lY),bY=Ma(fY),_Y=Ma(hY),u2="7.21.7",Zo={},Wu=function(e,r){return Zo[e]=Zo[e]||[],r&&(Zo[e]=Zo[e].concat(r)),Zo[e]},wY=function(e,r){Wu(e,r)},c2=function(e,r){var n=Wu(e).indexOf(r);return n<=-1?!1:(Zo[e]=Zo[e].slice(),Zo[e].splice(n,1),!0)},SY=function(e,r){Wu(e,[].concat(r).map(function(n){var i=function a(){return c2(e,a),n.apply(void 0,arguments)};return i}))},rv={prefixed:!0},Xm=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],dP=Xm[0],Qp;for(Vp=0;Vp<Xm.length;Vp++)if(Xm[Vp][1]in wt.default){Qp=Xm[Vp];break}var Vp;if(Qp){for(Wp=0;Wp<Qp.length;Wp++)rv[dP[Wp]]=Qp[Wp];rv.prefixed=Qp[0]!==dP[0]}var Wp,Na=[],TY=function(e,r){return function(n,i,a){var s=r.levels[i],o=new RegExp("^("+s+")$");if(n!=="log"&&a.unshift(n.toUpperCase()+":"),a.unshift(e+":"),Na){Na.push([].concat(a));var c=Na.length-1e3;Na.splice(0,c>0?c:0)}if(Te.default.console){var l=Te.default.console[n];!l&&n==="debug"&&(l=Te.default.console.info||Te.default.console.log),!(!l||!s||!o.test(n))&&l[Array.isArray(a)?"apply":"call"](Te.default.console,a)}}};function l2(t){var e="info",r,n=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];r("log",e,s)};return r=TY(t,n),n.createLogger=function(i){return l2(t+": "+i)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=function(i){if(typeof i=="string"){if(!n.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');e=i}return e},n.history=function(){return Na?[].concat(Na):[]},n.history.filter=function(i){return(Na||[]).filter(function(a){return new RegExp(".*"+i+".*").test(a[0])})},n.history.clear=function(){Na&&(Na.length=0)},n.history.disable=function(){Na!==null&&(Na.length=0,Na=null)},n.history.enable=function(){Na===null&&(Na=[])},n.error=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r("error",e,a)},n.warn=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r("warn",e,a)},n.debug=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r("debug",e,a)},n}var cr=l2("VIDEOJS"),d2=cr.createLogger,CY=Object.prototype.toString,f2=function(e){return iu(e)?Object.keys(e):[]};function xd(t,e){f2(t).forEach(function(r){return e(t[r],r)})}function EY(t,e,r){return r===void 0&&(r=0),f2(t).reduce(function(n,i){return e(n,t[i],i)},r)}function Hi(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Object.assign?Zc.default.apply(void 0,[t].concat(r)):(r.forEach(function(i){i&&xd(i,function(a,s){t[s]=a})}),t)}function iu(t){return!!t&&typeof t=="object"}function ih(t){return iu(t)&&CY.call(t)==="[object Object]"&&t.constructor===Object}function nh(t,e){if(!t||!e)return"";if(typeof Te.default.getComputedStyle=="function"){var r;try{r=Te.default.getComputedStyle(t)}catch{return""}return r?r.getPropertyValue(e)||r[e]:""}return""}var An=Te.default.navigator&&Te.default.navigator.userAgent||"",fP=/AppleWebKit\/([\d.]+)/i.exec(An),xY=fP?parseFloat(fP.pop()):null,p2=/iPod/i.test(An),AY=function(){var t=An.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),au=/Android/i.test(An),Zw=function(){var t=An.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return e&&r?parseFloat(t[1]+"."+t[2]):e||null}(),h2=au&&Zw<5&&xY<537,g2=/Firefox/i.test(An),uh=/Edg/i.test(An),su=!uh&&(/Chrome/i.test(An)||/CriOS/i.test(An)),m2=function(){var t=An.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),ch=function(){var t=/MSIE\s(\d+)\.\d/.exec(An),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(An)&&/rv:11.0/.test(An)&&(e=11),e}(),eS=/Safari/i.test(An)&&!su&&!au&&!uh,v2=/Windows/i.test(An),Id=!!(Nd()&&("ontouchstart"in Te.default||Te.default.navigator.maxTouchPoints||Te.default.DocumentTouch&&Te.default.document instanceof Te.default.DocumentTouch)),tS=/iPad/i.test(An)||eS&&Id&&!/iPhone/i.test(An),rS=/iPhone/i.test(An)&&!tS,ba=rS||tS||p2,bv=(eS||ba)&&!su,kY=Object.freeze({__proto__:null,IS_IPOD:p2,IOS_VERSION:AY,IS_ANDROID:au,ANDROID_VERSION:Zw,IS_NATIVE_ANDROID:h2,IS_FIREFOX:g2,IS_EDGE:uh,IS_CHROME:su,CHROME_VERSION:m2,IE_VERSION:ch,IS_SAFARI:eS,IS_WINDOWS:v2,TOUCH_ENABLED:Id,IS_IPAD:tS,IS_IPHONE:rS,IS_IOS:ba,IS_ANY_SAFARI:bv});function pP(t){return typeof t=="string"&&!!t.trim()}function y2(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function IY(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function Nd(){return wt.default===Te.default.document}function Fd(t){return iu(t)&&t.nodeType===1}function b2(){try{return Te.default.parent!==Te.default.self}catch{return!0}}function _2(t){return function(e,r){if(!pP(e))return wt.default[t](null);pP(r)&&(r=wt.default.querySelector(r));var n=Fd(r)?r:wt.default;return n[t]&&n[t](e)}}function _r(t,e,r,n){t===void 0&&(t="div"),e===void 0&&(e={}),r===void 0&&(r={});var i=wt.default.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(a){var s=e[a];a.indexOf("aria-")!==-1||a==="role"||a==="type"?(cr.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+a+" to "+s+".")),i.setAttribute(a,s)):a==="textContent"?el(i,s):(i[a]!==s||a==="tabIndex")&&(i[a]=s)}),Object.getOwnPropertyNames(r).forEach(function(a){i.setAttribute(a,r[a])}),n&&nS(i,n),i}function el(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function Rw(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function Yc(t,e){return y2(e),t.classList?t.classList.contains(e):IY(e).test(t.className)}function tu(t,e){return t.classList?t.classList.add(e):Yc(t,e)||(t.className=(t.className+" "+e).trim()),t}function lh(t,e){return t?(t.classList?t.classList.remove(e):(y2(e),t.className=t.className.split(/\s+/).filter(function(r){return r!==e}).join(" ")),t):(cr.warn("removeClass was called with an element that doesn't exist"),null)}function w2(t,e,r){var n=Yc(t,e);if(typeof r=="function"&&(r=r(t,e)),typeof r!="boolean"&&(r=!n),r!==n)return r?tu(t,e):lh(t,e),t}function S2(t,e){Object.getOwnPropertyNames(e).forEach(function(r){var n=e[r];n===null||typeof n>"u"||n===!1?t.removeAttribute(r):t.setAttribute(r,n===!0?"":n)})}function Qo(t){var e={},r=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var n=t.attributes,i=n.length-1;i>=0;i--){var a=n[i].name,s=n[i].value;(typeof t[a]=="boolean"||r.indexOf(","+a+",")!==-1)&&(s=s!==null),e[a]=s}return e}function T2(t,e){return t.getAttribute(e)}function Dd(t,e,r){t.setAttribute(e,r)}function _v(t,e){t.removeAttribute(e)}function C2(){wt.default.body.focus(),wt.default.onselectstart=function(){return!1}}function E2(){wt.default.onselectstart=function(){return!0}}function Od(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach(function(n){e[n]!==void 0&&(r[n]=e[n])}),r.height||(r.height=parseFloat(nh(t,"height"))),r.width||(r.width=parseFloat(nh(t,"width"))),r}}function ah(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=t.offsetWidth,r=t.offsetHeight,n=0,i=0;t.offsetParent&&t!==wt.default[rv.fullscreenElement];)n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{left:n,top:i,width:e,height:r}}function wv(t,e){var r={x:0,y:0};if(ba)for(var n=t;n&&n.nodeName.toLowerCase()!=="html";){var i=nh(n,"transform");if(/^matrix/.test(i)){var a=i.slice(7,-1).split(/,\s/).map(Number);r.x+=a[4],r.y+=a[5]}else if(/^matrix3d/.test(i)){var s=i.slice(9,-1).split(/,\s/).map(Number);r.x+=s[12],r.y+=s[13]}n=n.parentNode}var o={},c=ah(e.target),l=ah(t),f=l.width,g=l.height,m=e.offsetY-(l.top-c.top),y=e.offsetX-(l.left-c.left);return e.changedTouches&&(y=e.changedTouches[0].pageX-l.left,m=e.changedTouches[0].pageY+l.top,ba&&(y-=r.x,m-=r.y)),o.y=1-Math.max(0,Math.min(1,m/g)),o.x=Math.max(0,Math.min(1,y/f)),o}function x2(t){return iu(t)&&t.nodeType===3}function iS(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function A2(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(function(e){if(typeof e=="function"&&(e=e()),Fd(e)||x2(e))return e;if(typeof e=="string"&&/\S/.test(e))return wt.default.createTextNode(e)}).filter(function(e){return e})}function nS(t,e){return A2(e).forEach(function(r){return t.appendChild(r)}),t}function k2(t,e){return nS(iS(t),e)}function sh(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}var Ku=_2("querySelector"),I2=_2("querySelectorAll"),D2=Object.freeze({__proto__:null,isReal:Nd,isEl:Fd,isInFrame:b2,createEl:_r,textContent:el,prependTo:Rw,hasClass:Yc,addClass:tu,removeClass:lh,toggleClass:w2,setAttributes:S2,getAttributes:Qo,getAttribute:T2,setAttribute:Dd,removeAttribute:_v,blockTextSelection:C2,unblockTextSelection:E2,getBoundingClientRect:Od,findPosition:ah,getPointerPosition:wv,isTextNode:x2,emptyEl:iS,normalizeContent:A2,appendContent:nS,insertContent:k2,isSingleLeftClick:sh,$:Ku,$$:I2}),O2=!1,Lw,DY=function(){if(Lw.options.autoSetup!==!1){var e=Array.prototype.slice.call(wt.default.getElementsByTagName("video")),r=Array.prototype.slice.call(wt.default.getElementsByTagName("audio")),n=Array.prototype.slice.call(wt.default.getElementsByTagName("video-js")),i=e.concat(r,n);if(i&&i.length>0)for(var a=0,s=i.length;a<s;a++){var o=i[a];if(o&&o.getAttribute){if(o.player===void 0){var c=o.getAttribute("data-setup");c!==null&&Lw(o)}}else{Nw(1);break}}else O2||Nw(1)}};function Nw(t,e){Nd()&&(e&&(Lw=e),Te.default.setTimeout(DY,t))}function Fw(){O2=!0,Te.default.removeEventListener("load",Fw)}Nd()&&(wt.default.readyState==="complete"?Fw():Te.default.addEventListener("load",Fw));var P2=function(e){var r=wt.default.createElement("style");return r.className=e,r},R2=function(e,r){e.styleSheet?e.styleSheet.cssText=r:e.textContent=r},OY=3,PY=OY;function ou(){return PY++}var L2;Te.default.WeakMap||(L2=function(){function t(){this.vdata="vdata"+Math.floor(Te.default.performance&&Te.default.performance.now()||Date.now()),this.data={}}var e=t.prototype;return e.set=function(n,i){var a=n[this.vdata]||ou();return n[this.vdata]||(n[this.vdata]=a),this.data[a]=i,this},e.get=function(n){var i=n[this.vdata];if(i)return this.data[i];cr("We have no data for this element",n)},e.has=function(n){var i=n[this.vdata];return i in this.data},e.delete=function(n){var i=n[this.vdata];i&&(delete this.data[i],delete n[this.vdata])},t}());var va=Te.default.WeakMap?new WeakMap:new L2;function hP(t,e){if(va.has(t)){var r=va.get(t);r.handlers[e].length===0&&(delete r.handlers[e],t.removeEventListener?t.removeEventListener(e,r.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),Object.getOwnPropertyNames(r).length===0&&va.delete(t)}}function aS(t,e,r,n){r.forEach(function(i){t(e,i,n)})}function Sv(t){if(t.fixed_)return t;function e(){return!0}function r(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){var n=t||Te.default.event;t={};for(var i in n)i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"&&i!=="path"&&(i==="returnValue"&&n.preventDefault||(t[i]=n[i]));if(t.target||(t.target=t.srcElement||wt.default),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=r,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=r,t.clientX!==null&&t.clientX!==void 0){var a=wt.default.documentElement,s=wt.default.body;t.pageX=t.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),t.pageY=t.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}var Hm,RY=function(){if(typeof Hm!="boolean"){Hm=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Hm=!0}});Te.default.addEventListener("test",null,e),Te.default.removeEventListener("test",null,e)}catch{}}return Hm},LY=["touchstart","touchmove"];function Ja(t,e,r){if(Array.isArray(e))return aS(Ja,t,e,r);va.has(t)||va.set(t,{});var n=va.get(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),r.guid||(r.guid=ou()),n.handlers[e].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(a,s){if(!n.disabled){a=Sv(a);var o=n.handlers[a.type];if(o)for(var c=o.slice(0),l=0,f=c.length;l<f&&!a.isImmediatePropagationStopped();l++)try{c[l].call(t,a,s)}catch(g){cr.error(g)}}}),n.handlers[e].length===1)if(t.addEventListener){var i=!1;RY()&&LY.indexOf(e)>-1&&(i={passive:!0}),t.addEventListener(e,n.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function Qn(t,e,r){if(va.has(t)){var n=va.get(t);if(n.handlers){if(Array.isArray(e))return aS(Qn,t,e,r);var i=function(l,f){n.handlers[f]=[],hP(l,f)};if(e===void 0){for(var a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&i(t,a);return}var s=n.handlers[e];if(s){if(!r){i(t,e);return}if(r.guid)for(var o=0;o<s.length;o++)s[o].guid===r.guid&&s.splice(o--,1);hP(t,e)}}}}function Md(t,e,r){var n=va.has(t)?va.get(t):{},i=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=Sv(e),n.dispatcher&&n.dispatcher.call(t,e,r),i&&!e.isPropagationStopped()&&e.bubbles===!0)Md.call(null,i,e,r);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){va.has(e.target)||va.set(e.target,{});var a=va.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function Tv(t,e,r){if(Array.isArray(e))return aS(Tv,t,e,r);var n=function i(){Qn(t,e,i),r.apply(this,arguments)};n.guid=r.guid=r.guid||ou(),Ja(t,e,n)}function N2(t,e,r){var n=function i(){Qn(t,e,i),r.apply(this,arguments)};n.guid=r.guid=r.guid||ou(),Ja(t,e,n)}var NY=Object.freeze({__proto__:null,fixEvent:Sv,on:Ja,off:Qn,trigger:Md,one:Tv,any:N2}),Os=30,_i=function(e,r,n){r.guid||(r.guid=ou());var i=r.bind(e);return i.guid=n?n+"_"+r.guid:r.guid,i},nu=function(e,r){var n=Te.default.performance.now(),i=function(){var s=Te.default.performance.now();s-n>=r&&(e.apply(void 0,arguments),n=s)};return i},FY=function(e,r,n,i){i===void 0&&(i=Te.default);var a,s=function(){i.clearTimeout(a),a=null},o=function(){var l=this,f=arguments,g=function(){a=null,g=null,n||e.apply(l,f)};!a&&n&&e.apply(l,f),i.clearTimeout(a),a=i.setTimeout(g,r)};return o.cancel=s,o},kn=function(){};kn.prototype.allowedEvents_={};kn.prototype.on=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},Ja(this,t,e),this.addEventListener=r};kn.prototype.addEventListener=kn.prototype.on;kn.prototype.off=function(t,e){Qn(this,t,e)};kn.prototype.removeEventListener=kn.prototype.off;kn.prototype.one=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},Tv(this,t,e),this.addEventListener=r};kn.prototype.any=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},N2(this,t,e),this.addEventListener=r};kn.prototype.trigger=function(t){var e=t.type||t;typeof t=="string"&&(t={type:e}),t=Sv(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),Md(this,t)};kn.prototype.dispatchEvent=kn.prototype.trigger;var Kp;kn.prototype.queueTrigger=function(t){var e=this;Kp||(Kp=new Map);var r=t.type||t,n=Kp.get(this);n||(n=new Map,Kp.set(this,n));var i=n.get(r);n.delete(r),Te.default.clearTimeout(i);var a=Te.default.setTimeout(function(){n.delete(r),n.size===0&&(n=null,Kp.delete(e)),e.trigger(t)},0);n.set(r,a)};var Cv=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},ru=function(e){return e instanceof kn||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(r){return typeof e[r]=="function"})},MY=function(e,r){ru(e)?r():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(r))},Mw=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},iv=function(e,r,n){if(!e||!e.nodeName&&!ru(e))throw new Error("Invalid target for "+Cv(r)+"#"+n+"; must be a DOM node or evented object.")},F2=function(e,r,n){if(!Mw(e))throw new Error("Invalid event type for "+Cv(r)+"#"+n+"; must be a non-empty string or array.")},M2=function(e,r,n){if(typeof e!="function")throw new Error("Invalid listener for "+Cv(r)+"#"+n+"; must be a function.")},yw=function(e,r,n){var i=r.length<3||r[0]===e||r[0]===e.eventBusEl_,a,s,o;return i?(a=e.eventBusEl_,r.length>=3&&r.shift(),s=r[0],o=r[1]):(a=r[0],s=r[1],o=r[2]),iv(a,e,n),F2(s,e,n),M2(o,e,n),o=_i(e,o),{isTargetingSelf:i,target:a,type:s,listener:o}},Gc=function(e,r,n,i){iv(e,e,r),e.nodeName?NY[r](e,n,i):e[r](n,i)},UY={on:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=yw(this,n,"on"),s=a.isTargetingSelf,o=a.target,c=a.type,l=a.listener;if(Gc(o,"on",c,l),!s){var f=function(){return e.off(o,c,l)};f.guid=l.guid;var g=function(){return e.off("dispose",f)};g.guid=l.guid,Gc(this,"on","dispose",f),Gc(o,"on","dispose",g)}},one:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=yw(this,n,"one"),s=a.isTargetingSelf,o=a.target,c=a.type,l=a.listener;if(s)Gc(o,"one",c,l);else{var f=function g(){e.off(o,c,g);for(var m=arguments.length,y=new Array(m),x=0;x<m;x++)y[x]=arguments[x];l.apply(null,y)};f.guid=l.guid,Gc(o,"one",c,f)}},any:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=yw(this,n,"any"),s=a.isTargetingSelf,o=a.target,c=a.type,l=a.listener;if(s)Gc(o,"any",c,l);else{var f=function g(){e.off(o,c,g);for(var m=arguments.length,y=new Array(m),x=0;x<m;x++)y[x]=arguments[x];l.apply(null,y)};f.guid=l.guid,Gc(o,"any",c,f)}},off:function(e,r,n){if(!e||Mw(e))Qn(this.eventBusEl_,e,r);else{var i=e,a=r;iv(i,this,"off"),F2(a,this,"off"),M2(n,this,"off"),n=_i(this,n),this.off("dispose",n),i.nodeName?(Qn(i,a,n),Qn(i,"dispose",n)):ru(i)&&(i.off(a,n),i.off("dispose",n))}},trigger:function(e,r){iv(this.eventBusEl_,this,"trigger");var n=e&&typeof e!="string"?e.type:e;if(!Mw(n)){var i="Invalid event type for "+Cv(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||cr).error(i);else throw new Error(i)}return Md(this.eventBusEl_,e,r)}};function sS(t,e){e===void 0&&(e={});var r=e,n=r.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=_r("span",{className:"vjs-event-bus"});return Hi(t,UY),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(i){i()}),t.on("dispose",function(){t.off(),[t,t.el_,t.eventBusEl_].forEach(function(i){i&&va.has(i)&&va.delete(i)}),Te.default.setTimeout(function(){t.eventBusEl_=null},0)}),t}var $Y={state:{},setState:function(e){var r=this;typeof e=="function"&&(e=e());var n;return xd(e,function(i,a){r.state[a]!==i&&(n=n||{},n[a]={from:r.state[a],to:i}),r.state[a]=i}),n&&ru(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function U2(t,e){return Hi(t,$Y),t.state=Hi({},t.state,e),typeof t.handleStateChanged=="function"&&ru(t)&&t.on("statechanged",t.handleStateChanged),t}var Ym=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toLowerCase()})},Ji=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toUpperCase()})},BY=function(e,r){return Ji(e)===Ji(r)};function bi(){for(var t={},e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach(function(i){i&&xd(i,function(a,s){if(!ih(a)){t[s]=a;return}ih(t[s])||(t[s]={}),t[s]=bi(t[s],a)})}),t}var qY=function(){function t(){this.map_={}}var e=t.prototype;return e.has=function(n){return n in this.map_},e.delete=function(n){var i=this.has(n);return delete this.map_[n],i},e.set=function(n,i){return this.map_[n]=i,this},e.forEach=function(n,i){for(var a in this.map_)n.call(i,this.map_[a],a,this)},t}(),jY=Te.default.Map?Te.default.Map:qY,HY=function(){function t(){this.set_={}}var e=t.prototype;return e.has=function(n){return n in this.set_},e.delete=function(n){var i=this.has(n);return delete this.set_[n],i},e.add=function(n){return this.set_[n]=1,this},e.forEach=function(n,i){for(var a in this.set_)n.call(i,a,a,this)},t}(),bw=Te.default.Set?Te.default.Set:HY,mt=function(){function t(r,n,i){var a=this;if(!r&&this.play?this.player_=r=this:this.player_=r,this.isDisposed_=!1,this.parentComponent_=null,this.options_=bi({},this.options_),n=this.options_=bi(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var s=r&&r.id&&r.id()||"no_player";this.id_=s+"_component_"+ou()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(function(o){return a.addClass(o)}),n.evented!==!1&&(sS(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),U2(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new bw,this.setIntervalIds_=new bw,this.rafIds_=new bw,this.namedRafs_=new jY,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(i),n.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=t.prototype;return e.dispose=function(n){if(n===void 0&&(n={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(n.restoreEl?this.el_.parentNode.replaceChild(n.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return!!this.isDisposed_},e.player=function(){return this.player_},e.options=function(n){return n?(this.options_=bi(this.options_,n),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(n,i,a){return _r(n,i,a)},e.localize=function(n,i,a){a===void 0&&(a=n);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),c=o&&o[s],l=s&&s.split("-")[0],f=o&&o[l],g=a;return c&&c[n]?g=c[n]:f&&f[n]&&(g=f[n]),i&&(g=g.replace(/\{(\d+)\}/g,function(m,y){var x=i[y-1],I=x;return typeof x>"u"&&(I=m),I})),g},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(n){return this.childIndex_[n]},e.getChild=function(n){if(n)return this.childNameIndex_[n]},e.getDescendant=function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];i=i.reduce(function(c,l){return c.concat(l)},[]);for(var s=this,o=0;o<i.length;o++)if(s=s.getChild(i[o]),!s||!s.getChild)return;return s},e.addChild=function(n,i,a){i===void 0&&(i={}),a===void 0&&(a=this.children_.length);var s,o;if(typeof n=="string"){o=Ji(n);var c=i.componentClass||o;i.name=o;var l=t.getComponent(c);if(!l)throw new Error("Component "+c+" does not exist");if(typeof l!="function")return null;s=new l(this.player_||this,i)}else s=n;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(a,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&Ji(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[Ym(o)]=s),typeof s.el=="function"&&s.el()){var f=null;this.children_[a+1]&&(this.children_[a+1].el_?f=this.children_[a+1].el_:Fd(this.children_[a+1])&&(f=this.children_[a+1])),this.contentEl().insertBefore(s.el(),f)}return s},e.removeChild=function(n){if(typeof n=="string"&&(n=this.getChild(n)),!(!n||!this.children_)){for(var i=!1,a=this.children_.length-1;a>=0;a--)if(this.children_[a]===n){i=!0,this.children_.splice(a,1);break}if(i){n.parentComponent_=null,this.childIndex_[n.id()]=null,this.childNameIndex_[Ji(n.name())]=null,this.childNameIndex_[Ym(n.name())]=null;var s=n.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},e.initChildren=function(){var n=this,i=this.options_.children;if(i){var a=this.options_,s=function(f){var g=f.name,m=f.opts;if(a[g]!==void 0&&(m=a[g]),m!==!1){m===!0&&(m={}),m.playerOptions=n.options_.playerOptions;var y=n.addChild(g,m);y&&(n[g]=y)}},o,c=t.getComponent("Tech");Array.isArray(i)?o=i:o=Object.keys(i),o.concat(Object.keys(this.options_).filter(function(l){return!o.some(function(f){return typeof f=="string"?l===f:l===f.name})})).map(function(l){var f,g;return typeof l=="string"?(f=l,g=i[f]||n.options_[f]||{}):(f=l.name,g=l),{name:f,opts:g}}).filter(function(l){var f=t.getComponent(l.opts.componentClass||Ji(l.name));return f&&!c.isTech(f)}).forEach(s)}},e.buildCSSClass=function(){return""},e.ready=function(n,i){if(i===void 0&&(i=!1),!!n){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(n);return}i?n.call(this):this.setTimeout(n,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)},e.$=function(n,i){return Ku(n,i||this.contentEl())},e.$$=function(n,i){return I2(n,i||this.contentEl())},e.hasClass=function(n){return Yc(this.el_,n)},e.addClass=function(n){tu(this.el_,n)},e.removeClass=function(n){lh(this.el_,n)},e.toggleClass=function(n,i){w2(this.el_,n,i)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(n){return T2(this.el_,n)},e.setAttribute=function(n,i){Dd(this.el_,n,i)},e.removeAttribute=function(n){_v(this.el_,n)},e.width=function(n,i){return this.dimension("width",n,i)},e.height=function(n,i){return this.dimension("height",n,i)},e.dimensions=function(n,i){this.width(n,!0),this.height(i)},e.dimension=function(n,i,a){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[n]=i:i==="auto"?this.el_.style[n]="":this.el_.style[n]=i+"px",a||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[n],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+Ji(n)],10)},e.currentDimension=function(n){var i=0;if(n!=="width"&&n!=="height")throw new Error("currentDimension only accepts width or height value");if(i=nh(this.el_,n),i=parseFloat(i),i===0||isNaN(i)){var a="offset"+Ji(n);i=this.el_[a]}return i},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(n){this.player_&&(ir.default.isEventKey(n,"Tab")||n.stopPropagation(),this.player_.handleKeyDown(n))},e.handleKeyPress=function(n){this.handleKeyDown(n)},e.emitTapEvents=function(){var n=0,i=null,a=10,s=200,o;this.on("touchstart",function(l){l.touches.length===1&&(i={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},n=Te.default.performance.now(),o=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)o=!1;else if(i){var f=l.touches[0].pageX-i.pageX,g=l.touches[0].pageY-i.pageY,m=Math.sqrt(f*f+g*g);m>a&&(o=!1)}});var c=function(){o=!1};this.on("touchleave",c),this.on("touchcancel",c),this.on("touchend",function(l){if(i=null,o===!0){var f=Te.default.performance.now()-n;f<s&&(l.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var n=_i(this.player(),this.player().reportUserActivity),i;this.on("touchstart",function(){n(),this.clearInterval(i),i=this.setInterval(n,250)});var a=function(o){n(),this.clearInterval(i)};this.on("touchmove",n),this.on("touchend",a),this.on("touchcancel",a)}},e.setTimeout=function(n,i){var a=this,s;return n=_i(this,n),this.clearTimersOnDispose_(),s=Te.default.setTimeout(function(){a.setTimeoutIds_.has(s)&&a.setTimeoutIds_.delete(s),n()},i),this.setTimeoutIds_.add(s),s},e.clearTimeout=function(n){return this.setTimeoutIds_.has(n)&&(this.setTimeoutIds_.delete(n),Te.default.clearTimeout(n)),n},e.setInterval=function(n,i){n=_i(this,n),this.clearTimersOnDispose_();var a=Te.default.setInterval(n,i);return this.setIntervalIds_.add(a),a},e.clearInterval=function(n){return this.setIntervalIds_.has(n)&&(this.setIntervalIds_.delete(n),Te.default.clearInterval(n)),n},e.requestAnimationFrame=function(n){var i=this;if(!this.supportsRaf_)return this.setTimeout(n,1e3/60);this.clearTimersOnDispose_();var a;return n=_i(this,n),a=Te.default.requestAnimationFrame(function(){i.rafIds_.has(a)&&i.rafIds_.delete(a),n()}),this.rafIds_.add(a),a},e.requestNamedAnimationFrame=function(n,i){var a=this;if(!this.namedRafs_.has(n)){this.clearTimersOnDispose_(),i=_i(this,i);var s=this.requestAnimationFrame(function(){i(),a.namedRafs_.has(n)&&a.namedRafs_.delete(n)});return this.namedRafs_.set(n,s),n}},e.cancelNamedAnimationFrame=function(n){this.namedRafs_.has(n)&&(this.cancelAnimationFrame(this.namedRafs_.get(n)),this.namedRafs_.delete(n))},e.cancelAnimationFrame=function(n){return this.supportsRaf_?(this.rafIds_.has(n)&&(this.rafIds_.delete(n),Te.default.cancelAnimationFrame(n)),n):this.clearTimeout(n)},e.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(i){var a=i[0],s=i[1];n[a].forEach(function(o,c){return n[s](c)})}),n.clearingTimersOnDispose_=!1}))},t.registerComponent=function(n,i){if(typeof n!="string"||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var a=t.getComponent("Tech"),s=a&&a.isTech(i),o=t===i||t.prototype.isPrototypeOf(i.prototype);if(s||!o){var c;throw s?c="techs must be registered using Tech.registerTech()":c="must be a Component subclass",new Error('Illegal component, "'+n+'"; '+c+".")}n=Ji(n),t.components_||(t.components_={});var l=t.getComponent("Player");if(n==="Player"&&l&&l.players){var f=l.players,g=Object.keys(f);if(f&&g.length>0&&g.map(function(m){return f[m]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[n]=i,t.components_[Ym(n)]=i,i},t.getComponent=function(n){if(!(!n||!t.components_))return t.components_[n]},t}();mt.prototype.supportsRaf_=typeof Te.default.requestAnimationFrame=="function"&&typeof Te.default.cancelAnimationFrame=="function";mt.registerComponent("Component",mt);function GY(t,e,r){if(typeof e!="number"||e<0||e>r)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+r+").")}function gP(t,e,r,n){return GY(t,n,r.length-1),r[n][e]}function _w(t){var e;return t===void 0||t.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:gP.bind(null,"start",0,t),end:gP.bind(null,"end",1,t)},Te.default.Symbol&&Te.default.Symbol.iterator&&(e[Te.default.Symbol.iterator]=function(){return(t||[]).values()}),e}function Jc(t,e){return Array.isArray(t)?_w(t):t===void 0||e===void 0?_w():_w([[t,e]])}function $2(t,e){var r=0,n,i;if(!e)return 0;(!t||!t.length)&&(t=Jc(0,0));for(var a=0;a<t.length;a++)n=t.start(a),i=t.end(a),i>e&&(i=e),r+=i-n;return r/e}function ya(t){if(t instanceof ya)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:iu(t)&&(typeof t.code=="number"&&(this.code=t.code),Hi(this,t)),this.message||(this.message=ya.defaultMessages[this.code]||"")}ya.prototype.code=0;ya.prototype.message="";ya.prototype.status=null;ya.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];ya.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(zc=0;zc<ya.errorTypes.length;zc++)ya[ya.errorTypes[zc]]=zc,ya.prototype[ya.errorTypes[zc]]=zc;var zc;function eh(t){return t!=null&&typeof t.then=="function"}function co(t){eh(t)&&t.then(null,function(e){})}var Uw=function(e){var r=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(n,i,a){return e[i]&&(n[i]=e[i]),n},{cues:e.cues&&Array.prototype.map.call(e.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})});return r},zY=function(e){var r=e.$$("track"),n=Array.prototype.map.call(r,function(a){return a.track}),i=Array.prototype.map.call(r,function(a){var s=Uw(a.track);return a.src&&(s.src=a.src),s});return i.concat(Array.prototype.filter.call(e.textTracks(),function(a){return n.indexOf(a)===-1}).map(Uw))},VY=function(e,r){return e.forEach(function(n){var i=r.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(a){return i.addCue(a)})}),r.textTracks()},mP={textTracksToJson:zY,jsonToTextTracks:VY,trackToJson_:Uw},ww="vjs-modal-dialog",Ud=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.close_=function(s){return a.close(s)},a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=_r("div",{className:ww+"-content"},{role:"document"}),a.descEl_=_r("p",{className:ww+"-description vjs-control-text",id:a.el().getAttribute("aria-describedby")}),el(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},r.buildCSSClass=function(){return ww+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},r.open=function(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(i){return typeof i=="boolean"&&this[i?"open":"close"](),this.opened_},r.close=function(){if(this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(i){if(typeof i=="boolean"){var a=this.closeable_=!!i,s=this.getChild("closeButton");if(a&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(i){var a=this.contentEl(),s=a.parentNode,o=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),k2(a,i),this.trigger("modalfill"),o?s.insertBefore(a,o):s.appendChild(a);var c=this.getChild("closeButton");c&&s.appendChild(c.el_)},r.empty=function(){this.trigger("beforemodalempty"),iS(this.contentEl()),this.trigger("modalempty")},r.content=function(i){return typeof i<"u"&&(this.content_=i),this.content_},r.conditionalFocus_=function(){var i=wt.default.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(i)||a===i)&&(this.previouslyActiveEl_=i,this.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(i){if(i.stopPropagation(),ir.default.isEventKey(i,"Escape")&&this.closeable()){i.preventDefault(),this.close();return}if(ir.default.isEventKey(i,"Tab")){for(var a=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,c=0;c<a.length;c++)if(s===a[c]){o=c;break}wt.default.activeElement===this.el_&&(o=0),i.shiftKey&&o===0?(a[a.length-1].focus(),i.preventDefault()):!i.shiftKey&&o===a.length-1&&(a[0].focus(),i.preventDefault())}},r.focusableEls_=function(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(a){return(a instanceof Te.default.HTMLAnchorElement||a instanceof Te.default.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof Te.default.HTMLInputElement||a instanceof Te.default.HTMLSelectElement||a instanceof Te.default.HTMLTextAreaElement||a instanceof Te.default.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof Te.default.HTMLIFrameElement||a instanceof Te.default.HTMLObjectElement||a instanceof Te.default.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},e}(mt);Ud.prototype.options_={pauseOnOpen:!0,temporary:!0};mt.registerComponent("ModalDialog",Ud);var Pd=function(t){Et.default(e,t);function e(n){var i;n===void 0&&(n=[]),i=t.call(this)||this,i.tracks_=[],Object.defineProperty(er.default(i),"length",{get:function(){return this.tracks_.length}});for(var a=0;a<n.length;a++)i.addTrack(n[a]);return i}var r=e.prototype;return r.addTrack=function(i){var a=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(i)===-1&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){a.trigger({track:i,type:"labelchange",target:a})},ru(i)&&i.addEventListener("labelchange",i.labelchange_)},r.removeTrack=function(i){for(var a,s=0,o=this.length;s<o;s++)if(this[s]===i){a=this[s],a.off&&a.off(),this.tracks_.splice(s,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})},r.getTrackById=function(i){for(var a=null,s=0,o=this.length;s<o;s++){var c=this[s];if(c.id===i){a=c;break}}return a},e}(kn);Pd.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(vP in Pd.prototype.allowedEvents_)Pd.prototype["on"+vP]=null;var vP,Sw=function(e,r){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||r.id===e[n].id||(e[n].enabled=!1)},WY=function(t){Et.default(e,t);function e(n){var i;n===void 0&&(n=[]);for(var a=n.length-1;a>=0;a--)if(n[a].enabled){Sw(n,n[a]);break}return i=t.call(this,n)||this,i.changing_=!1,i}var r=e.prototype;return r.addTrack=function(i){var a=this;i.enabled&&Sw(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&(i.enabledChange_=function(){a.changing_||(a.changing_=!0,Sw(a,i),a.changing_=!1,a.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))},r.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)},e}(Pd),Tw=function(e,r){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||r.id===e[n].id||(e[n].selected=!1)},KY=function(t){Et.default(e,t);function e(n){var i;n===void 0&&(n=[]);for(var a=n.length-1;a>=0;a--)if(n[a].selected){Tw(n,n[a]);break}return i=t.call(this,n)||this,i.changing_=!1,Object.defineProperty(er.default(i),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),i}var r=e.prototype;return r.addTrack=function(i){var a=this;i.selected&&Tw(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&(i.selectedChange_=function(){a.changing_||(a.changing_=!0,Tw(a,i),a.changing_=!1,a.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))},r.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)},e}(Pd),B2=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.addTrack=function(i){var a=this;t.prototype.addTrack.call(this,i),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")}),i.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(i.kind)===-1&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)},r.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Pd),XY=function(){function t(r){r===void 0&&(r=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=r.length;n<i;n++)this.addTrackElement_(r[n])}var e=t.prototype;return e.addTrackElement_=function(n){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.trackElements_[i]}}),this.trackElements_.indexOf(n)===-1&&this.trackElements_.push(n)},e.getTrackElementByTrack_=function(n){for(var i,a=0,s=this.trackElements_.length;a<s;a++)if(n===this.trackElements_[a].track){i=this.trackElements_[a];break}return i},e.removeTrackElement_=function(n){for(var i=0,a=this.trackElements_.length;i<a;i++)if(n===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}},t}(),yP=function(){function t(r){t.prototype.setCues_.call(this,r),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(n){var i=this.length||0,a=0,s=n.length;this.cues_=n,this.length_=n.length;var o=function(l){""+l in this||Object.defineProperty(this,""+l,{get:function(){return this.cues_[l]}})};if(i<s)for(a=i;a<s;a++)o.call(this,a)},e.getCueById=function(n){for(var i=null,a=0,s=this.length;a<s;a++){var o=this[a];if(o.id===n){i=o;break}}return i},t}(),YY={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},JY={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},QY={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},bP={disabled:"disabled",hidden:"hidden",showing:"showing"},oS=function(t){Et.default(e,t);function e(r){var n;r===void 0&&(r={}),n=t.call(this)||this;var i={id:r.id||"vjs_track_"+ou(),kind:r.kind||"",language:r.language||""},a=r.label||"",s=function(l){Object.defineProperty(er.default(n),l,{get:function(){return i[l]},set:function(){}})};for(var o in i)s(o);return Object.defineProperty(er.default(n),"label",{get:function(){return a},set:function(l){l!==a&&(a=l,this.trigger("labelchange"))}}),n}return e}(kn),uS=function(e){var r=["protocol","hostname","port","pathname","search","hash","host"],n=wt.default.createElement("a");n.href=e;for(var i={},a=0;a<r.length;a++)i[r[a]]=n[r[a]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=Te.default.location.protocol),i.host||(i.host=Te.default.location.host),i},q2=function(e){if(!e.match(/^https?:\/\//)){var r=wt.default.createElement("a");r.href=e,e=r.href}return e},cS=function(e){if(typeof e=="string"){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,n=r.exec(e);if(n)return n.pop().toLowerCase()}return""},Ev=function(e,r){r===void 0&&(r=Te.default.location);var n=uS(e),i=n.protocol===":"?r.protocol:n.protocol,a=i+n.host!==r.protocol+r.host;return a},ZY=Object.freeze({__proto__:null,parseUrl:uS,getAbsoluteURL:q2,getFileExtension:cS,isCrossOrigin:Ev}),_P=function(e,r){var n=new Te.default.WebVTT.Parser(Te.default,Te.default.vttjs,Te.default.WebVTT.StringDecoder()),i=[];n.oncue=function(a){r.addCue(a)},n.onparsingerror=function(a){i.push(a)},n.onflush=function(){r.trigger({type:"loadeddata",target:r})},n.parse(e),i.length>0&&(Te.default.console&&Te.default.console.groupCollapsed&&Te.default.console.groupCollapsed("Text Track parsing errors for "+r.src),i.forEach(function(a){return cr.error(a)}),Te.default.console&&Te.default.console.groupEnd&&Te.default.console.groupEnd()),n.flush()},wP=function(e,r){var n={uri:e},i=Ev(e);i&&(n.cors=i);var a=r.tech_.crossOrigin()==="use-credentials";a&&(n.withCredentials=a),o2.default(n,_i(this,function(s,o,c){if(s)return cr.error(s,o);r.loaded_=!0,typeof Te.default.WebVTT!="function"?r.tech_&&r.tech_.any(["vttjsloaded","vttjserror"],function(l){if(l.type==="vttjserror"){cr.error("vttjs failed to load, stopping trying to process "+r.src);return}return _P(c,r)}):_P(c,r)}))},dh=function(t){Et.default(e,t);function e(n){var i;if(n===void 0&&(n={}),!n.tech)throw new Error("A tech was not provided.");var a=bi(n,{kind:QY[n.kind]||"subtitles",language:n.language||n.srclang||""}),s=bP[a.mode]||"disabled",o=a.default;(a.kind==="metadata"||a.kind==="chapters")&&(s="hidden"),i=t.call(this,a)||this,i.tech_=a.tech,i.cues_=[],i.activeCues_=[],i.preload_=i.tech_.preloadTextTracks!==!1;var c=new yP(i.cues_),l=new yP(i.activeCues_),f=!1;i.timeupdateHandler=_i(er.default(i),function(m){if(m===void 0&&(m={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,f&&(this.trigger("cuechange"),f=!1),m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var g=function(){i.stopTracking()};return i.tech_.one("dispose",g),s!=="disabled"&&i.startTracking(),Object.defineProperties(er.default(i),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(y){bP[y]&&s!==y&&(s=y,!this.preload_&&s!=="disabled"&&this.cues.length===0&&wP(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?c:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return l;for(var y=this.tech_.currentTime(),x=[],I=0,A=this.cues.length;I<A;I++){var F=this.cues[I];(F.startTime<=y&&F.endTime>=y||F.startTime===F.endTime&&F.startTime<=y&&F.startTime+.5>=y)&&x.push(F)}if(f=!1,x.length!==this.activeCues_.length)f=!0;else for(var X=0;X<x.length;X++)this.activeCues_.indexOf(x[X])===-1&&(f=!0);return this.activeCues_=x,l.setCues_(this.activeCues_),l},set:function(){}}}),a.src?(i.src=a.src,i.preload_||(i.loaded_=!0),(i.preload_||a.kind!=="subtitles"&&a.kind!=="captions")&&wP(i.src,er.default(i))):i.loaded_=!0,i}var r=e.prototype;return r.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},r.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},r.addCue=function(i){var a=i;if(!("getCueAsHTML"in a)){a=new Te.default.vttjs.VTTCue(i.startTime,i.endTime,i.text);for(var s in i)s in a||(a[s]=i[s]);a.id=i.id,a.originalCue_=i}for(var o=this.tech_.textTracks(),c=0;c<o.length;c++)o[c]!==this&&o[c].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},r.removeCue=function(i){for(var a=this.cues_.length;a--;){var s=this.cues_[a];if(s===i||s.originalCue_&&s.originalCue_===i){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},e}(oS);dh.prototype.allowedEvents_={cuechange:"cuechange"};var j2=function(t){Et.default(e,t);function e(r){var n;r===void 0&&(r={});var i=bi(r,{kind:JY[r.kind]||""});n=t.call(this,i)||this;var a=!1;return Object.defineProperty(er.default(n),"enabled",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return e}(oS),H2=function(t){Et.default(e,t);function e(r){var n;r===void 0&&(r={});var i=bi(r,{kind:YY[r.kind]||""});n=t.call(this,i)||this;var a=!1;return Object.defineProperty(er.default(n),"selected",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return e}(oS),G2=0,eJ=1,z2=2,tJ=3,$d=function(t){Et.default(e,t);function e(r){var n;r===void 0&&(r={}),n=t.call(this)||this;var i,a=new dh(r);return n.kind=a.kind,n.src=a.src,n.srclang=a.language,n.label=a.label,n.default=a.default,Object.defineProperties(er.default(n),{readyState:{get:function(){return i}},track:{get:function(){return a}}}),i=G2,a.addEventListener("loadeddata",function(){i=z2,n.trigger({type:"load",target:er.default(n)})}),n}return e}(kn);$d.prototype.allowedEvents_={load:"load"};$d.NONE=G2;$d.LOADING=eJ;$d.LOADED=z2;$d.ERROR=tJ;var ps={audio:{ListClass:WY,TrackClass:j2,capitalName:"Audio"},video:{ListClass:KY,TrackClass:H2,capitalName:"Video"},text:{ListClass:B2,TrackClass:dh,capitalName:"Text"}};Object.keys(ps).forEach(function(t){ps[t].getterName=t+"Tracks",ps[t].privateName=t+"Tracks_"});var Rd={remoteText:{ListClass:B2,TrackClass:dh,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:XY,TrackClass:$d,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ma=Zc.default({},ps,Rd);Rd.names=Object.keys(Rd);ps.names=Object.keys(ps);ma.names=[].concat(Rd.names).concat(ps.names);function rJ(t,e,r,n,i){i===void 0&&(i={});var a=t.textTracks();i.kind=e,r&&(i.label=r),n&&(i.language=n),i.tech=t;var s=new ma.text.TrackClass(i);return a.addTrack(s),s}var ii=function(t){Et.default(e,t);function e(n,i){var a;return n===void 0&&(n={}),i===void 0&&(i=function(){}),n.reportTouchActivity=!1,a=t.call(this,null,n,i)||this,a.onDurationChange_=function(s){return a.onDurationChange(s)},a.trackProgress_=function(s){return a.trackProgress(s)},a.trackCurrentTime_=function(s){return a.trackCurrentTime(s)},a.stopTrackingCurrentTime_=function(s){return a.stopTrackingCurrentTime(s)},a.disposeSourceHandler_=function(s){return a.disposeSourceHandler(s)},a.queuedHanders_=new Set,a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),ma.names.forEach(function(s){var o=ma[s];n&&n[o.getterName]&&(a[o.privateName]=n[o.getterName])}),a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){n["native"+s+"Tracks"]===!1&&(a["featuresNative"+s+"Tracks"]=!1)}),n.nativeCaptions===!1||n.nativeTextTracks===!1?a.featuresNativeTextTracks=!1:(n.nativeCaptions===!0||n.nativeTextTracks===!0)&&(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.preloadTextTracks=n.preloadTextTracks!==!1,a.autoRemoteTextTracks_=new ma.text.ListClass,a.initTrackListeners(),n.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}var r=e.prototype;return r.triggerSourceset=function(i){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(i)},1)}),this.trigger({src:i,type:"sourceset"})},r.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},r.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},r.trackProgress=function(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(_i(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,a===1&&this.stopTrackingProgress()}),500)},r.onDurationChange=function(i){this.duration_=this.duration()},r.buffered=function(){return Jc(0,0)},r.bufferedPercent=function(){return $2(this.buffered(),this.duration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},r.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},r.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.dispose=function(){this.clearTracks(ps.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},r.clearTracks=function(i){var a=this;i=[].concat(i),i.forEach(function(s){for(var o=a[s+"Tracks"]()||[],c=o.length;c--;){var l=o[c];s==="text"&&a.removeRemoteTextTrack(l),o.removeTrack(l)}})},r.cleanupAutoTextTracks=function(){for(var i=this.autoRemoteTextTracks_||[],a=i.length;a--;){var s=i[a];this.removeRemoteTextTrack(s)}},r.reset=function(){},r.crossOrigin=function(){},r.setCrossOrigin=function(){},r.error=function(i){return i!==void 0&&(this.error_=new ya(i),this.trigger("error")),this.error_},r.played=function(){return this.hasStarted_?Jc(0,0):Jc()},r.play=function(){},r.setScrubbing=function(){},r.scrubbing=function(){},r.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.initTrackListeners=function(){var i=this;ps.names.forEach(function(a){var s=ps[a],o=function(){i.trigger(a+"trackchange")},c=i[s.getterName]();c.addEventListener("removetrack",o),c.addEventListener("addtrack",o),i.on("dispose",function(){c.removeEventListener("removetrack",o),c.removeEventListener("addtrack",o)})})},r.addWebVttScript_=function(){var i=this;if(!Te.default.WebVTT)if(wt.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&ih(lP.default)&&Object.keys(lP.default).length>0){this.trigger("vttjsloaded");return}var a=wt.default.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=function(){i.trigger("vttjsloaded")},a.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){a.onload=null,a.onerror=null}),Te.default.WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)},r.emulateTextTracks=function(){var i=this,a=this.textTracks(),s=this.remoteTextTracks(),o=function(m){return a.addTrack(m.track)},c=function(m){return a.removeTrack(m.track)};s.on("addtrack",o),s.on("removetrack",c),this.addWebVttScript_();var l=function(){return i.trigger("texttrackchange")},f=function(){l();for(var m=0;m<a.length;m++){var y=a[m];y.removeEventListener("cuechange",l),y.mode==="showing"&&y.addEventListener("cuechange",l)}};f(),a.addEventListener("change",f),a.addEventListener("addtrack",f),a.addEventListener("removetrack",f),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",c),a.removeEventListener("change",f),a.removeEventListener("addtrack",f),a.removeEventListener("removetrack",f);for(var g=0;g<a.length;g++){var m=a[g];m.removeEventListener("cuechange",l)}})},r.addTextTrack=function(i,a,s){if(!i)throw new Error("TextTrack kind is required but was not provided");return rJ(this,i,a,s)},r.createRemoteTextTrack=function(i){var a=bi(i,{tech:this});return new Rd.remoteTextEl.TrackClass(a)},r.addRemoteTextTrack=function(i,a){var s=this;i===void 0&&(i={});var o=this.createRemoteTextTrack(i);return a!==!0&&a!==!1&&(cr.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),a!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},r.removeRemoteTextTrack=function(i){var a=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},r.getVideoPlaybackQuality=function(){return{}},r.requestPictureInPicture=function(){var i=this.options_.Promise||Te.default.Promise;if(i)return i.reject()},r.disablePictureInPicture=function(){return!0},r.setDisablePictureInPicture=function(){},r.requestVideoFrameCallback=function(i){var a=this,s=ou();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){a.queuedHanders_.has(s)&&(a.queuedHanders_.delete(s),i())})):this.requestNamedAnimationFrame(s,i),s},r.cancelVideoFrameCallback=function(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(i,a){return e.canPlayType(i.type)},e.isTech=function(i){return i.prototype instanceof e||i instanceof e||i===e},e.registerTech=function(i,a){if(e.techs_||(e.techs_={}),!e.isTech(a))throw new Error("Tech "+i+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=Ji(i),e.techs_[i]=a,e.techs_[Ym(i)]=a,i!=="Tech"&&e.defaultTechOrder_.push(i),a},e.getTech=function(i){if(i){if(e.techs_&&e.techs_[i])return e.techs_[i];if(i=Ji(i),Te.default&&Te.default.videojs&&Te.default.videojs[i])return cr.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Te.default.videojs[i]}},e}(mt);ma.names.forEach(function(t){var e=ma[t];ii.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});ii.prototype.featuresVolumeControl=!0;ii.prototype.featuresMuteControl=!0;ii.prototype.featuresFullscreenResize=!1;ii.prototype.featuresPlaybackRate=!1;ii.prototype.featuresProgressEvents=!1;ii.prototype.featuresSourceset=!1;ii.prototype.featuresTimeupdateEvents=!1;ii.prototype.featuresNativeTextTracks=!1;ii.prototype.featuresVideoFrameCallback=!1;ii.withSourceHandlers=function(t){t.registerSourceHandler=function(r,n){var i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),n===void 0&&(n=i.length),i.splice(n,0,r)},t.canPlayType=function(r){for(var n=t.sourceHandlers||[],i,a=0;a<n.length;a++)if(i=n[a].canPlayType(r),i)return i;return""},t.selectSourceHandler=function(r,n){for(var i=t.sourceHandlers||[],a,s=0;s<i.length;s++)if(a=i[s].canHandleSource(r,n),a)return i[s];return null},t.canPlaySource=function(r,n){var i=t.selectSourceHandler(r,n);return i?i.canHandleSource(r,n):""};var e=["seekable","seeking","duration"];e.forEach(function(r){var n=this[r];typeof n=="function"&&(this[r]=function(){return this.sourceHandler_&&this.sourceHandler_[r]?this.sourceHandler_[r].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(r){var n=t.selectSourceHandler(r,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:cr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==t.nativeSourceHandler&&(this.currentSource_=r),this.sourceHandler_=n.handleSource(r,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};mt.registerComponent("Tech",ii);ii.registerTech("Tech",ii);ii.defaultTechOrder_=[];var Qc={},$w={},nv={};function iJ(t,e){Qc[t]=Qc[t]||[],Qc[t].push(e)}function nJ(t,e,r){t.setTimeout(function(){return Vc(e,Qc[e.type],r,t)},1)}function aJ(t,e){t.forEach(function(r){return r.setTech&&r.setTech(e)})}function sJ(t,e,r){return t.reduceRight(lS(r),e[r]())}function oJ(t,e,r,n){return e[r](t.reduce(lS(r),n))}function SP(t,e,r,n){n===void 0&&(n=null);var i="call"+Ji(r),a=t.reduce(lS(i),n),s=a===nv,o=s?null:e[r](a);return lJ(t,r,o,s),o}var uJ={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},cJ={setCurrentTime:1,setMuted:1,setVolume:1},TP={play:1,pause:1};function lS(t){return function(e,r){return e===nv?nv:r[t]?r[t](e):e}}function lJ(t,e,r,n){for(var i=t.length-1;i>=0;i--){var a=t[i];a[e]&&a[e](n,r)}}function dJ(t){$w[t.id()]=null}function fJ(t,e){var r=$w[t.id()],n=null;if(r==null)return n=e(t),$w[t.id()]=[[e,n]],n;for(var i=0;i<r.length;i++){var a=r[i],s=a[0],o=a[1];s===e&&(n=o)}return n===null&&(n=e(t),r.push([e,n])),n}function Vc(t,e,r,n,i,a){t===void 0&&(t={}),e===void 0&&(e=[]),i===void 0&&(i=[]),a===void 0&&(a=!1);var s=e,o=s[0],c=s.slice(1);if(typeof o=="string")Vc(t,Qc[o],r,n,i,a);else if(o){var l=fJ(n,o);if(!l.setSource)return i.push(l),Vc(t,c,r,n,i,a);l.setSource(Hi({},t),function(f,g){if(f)return Vc(t,c,r,n,i,a);i.push(l),Vc(g,t.type===g.type?c:Qc[g.type],r,n,i,a)})}else c.length?Vc(t,c,r,n,i,a):a?r(t,i):Vc(t,Qc["*"],r,n,i,!0)}var pJ={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},av=function(e){e===void 0&&(e="");var r=cS(e),n=pJ[r.toLowerCase()];return n||""},hJ=function(e,r){if(!r)return"";if(e.cache_.source.src===r&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(o){return o.src===r});if(n.length)return n[0].type;for(var i=e.$$("source"),a=0;a<i.length;a++){var s=i[a];if(s.type&&s.src&&s.src===r)return s.type}return av(r)},gJ=function t(e){if(Array.isArray(e)){var r=[];e.forEach(function(n){n=t(n),Array.isArray(n)?r=r.concat(n):iu(n)&&r.push(n)}),e=r}else typeof e=="string"&&e.trim()?e=[CP({src:e})]:iu(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[CP(e)]:e=[];return e};function CP(t){if(!t.type){var e=av(t.src);e&&(t.type=e)}return t}var mJ=function(t){Et.default(e,t);function e(r,n,i){var a,s=bi({createEl:!1},n);if(a=t.call(this,r,s,i)||this,!n.playerOptions.sources||n.playerOptions.sources.length===0)for(var o=0,c=n.playerOptions.techOrder;o<c.length;o++){var l=Ji(c[o]),f=ii.getTech(l);if(l||(f=mt.getComponent(l)),f&&f.isSupported()){r.loadTech_(l);break}}else r.src(n.playerOptions.sources);return a}return e}(mt);mt.registerComponent("MediaLoader",mJ);var xv=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.options_.controlText&&a.controlText(a.options_.controlText),a.handleMouseOver_=function(s){return a.handleMouseOver(s)},a.handleMouseOut_=function(s){return a.handleMouseOut(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.emitTapEvents(),a.enable(),a}var r=e.prototype;return r.createEl=function(i,a,s){i===void 0&&(i="div"),a===void 0&&(a={}),s===void 0&&(s={}),a=Hi({className:this.buildCSSClass(),tabIndex:0},a),i==="button"&&cr.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),s=Hi({role:"button"},s),this.tabIndex_=a.tabIndex;var o=_r(i,a,s);return o.appendChild(_r("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},r.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},r.createControlTextEl=function(i){return this.controlTextEl_=_r("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},r.controlText=function(i,a){if(a===void 0&&(a=this.el()),i===void 0)return this.controlText_||"Need Text";var s=this.localize(i);this.controlText_=i,el(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",s)},r.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},r.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},r.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},r.handleLanguagechange=function(){this.controlText(this.controlText_)},r.handleClick=function(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},r.handleKeyDown=function(i){ir.default.isEventKey(i,"Space")||ir.default.isEventKey(i,"Enter")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,i)},e}(mt);mt.registerComponent("ClickableComponent",xv);var vJ=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update(),a.update_=function(s){return a.update(s)},n.on("posterchange",a.update_),a}var r=e.prototype;return r.dispose=function(){this.player().off("posterchange",this.update_),t.prototype.dispose.call(this)},r.createEl=function(){var i=_r("div",{className:"vjs-poster",tabIndex:-1});return i},r.update=function(i){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},r.setSrc=function(i){var a="";i&&(a='url("'+i+'")'),this.el_.style.backgroundImage=a},r.handleClick=function(i){if(this.player_.controls()){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((ch||uh)&&a)&&this.player_.tech(!0).focus(),this.player_.paused()?co(this.player_.play()):this.player_.pause()}},e}(xv);mt.registerComponent("PosterImage",vJ);var fs="#222",EP="#ccc",yJ={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Cw(t,e){var r;if(t.length===4)r=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)r=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+e+")"}function Ew(t,e,r){try{t.style[e]=r}catch{return}}var bJ=function(t){Et.default(e,t);function e(n,i,a){var s;s=t.call(this,n,i,a)||this;var o=function(l){return s.updateDisplay(l)};return n.on("loadstart",function(c){return s.toggleDisplay(c)}),n.on("texttrackchange",o),n.on("loadedmetadata",function(c){return s.preselectTrack(c)}),n.ready(_i(er.default(s),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks){this.hide();return}n.on("fullscreenchange",o),n.on("playerresize",o),Te.default.addEventListener("orientationchange",o),n.on("dispose",function(){return Te.default.removeEventListener("orientationchange",o)});for(var c=this.options_.playerOptions.tracks||[],l=0;l<c.length;l++)this.player_.addRemoteTextTrack(c[l],!0);this.preselectTrack()})),s}var r=e.prototype;return r.preselectTrack=function(){for(var i={captions:1,subtitles:1},a=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,c,l,f=0;f<a.length;f++){var g=a[f];s&&s.enabled&&s.language&&s.language===g.language&&g.kind in i?g.kind===s.kind?l=g:l||(l=g):s&&!s.enabled?(l=null,o=null,c=null):g.default&&(g.kind==="descriptions"&&!o?o=g:g.kind in i&&!c&&(c=g))}l?l.mode="showing":c?c.mode="showing":o&&(o.mode="showing")},r.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},r.clearDisplay=function(){typeof Te.default.WebVTT=="function"&&Te.default.WebVTT.processCues(Te.default,[],this.el_)},r.updateDisplay=function(){var i=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var s=[],o=0;o<i.length;++o){var c=i[o];c.mode==="showing"&&s.push(c)}this.updateForTrack(s);return}for(var l=null,f=null,g=i.length;g--;){var m=i[g];m.mode==="showing"&&(m.kind==="descriptions"?l=m:f=m)}f?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(f)):l&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(l))},r.updateDisplayState=function(i){for(var a=this.player_.textTrackSettings.getValues(),s=i.activeCues,o=s.length;o--;){var c=s[o];if(c){var l=c.displayState;if(a.color&&(l.firstChild.style.color=a.color),a.textOpacity&&Ew(l.firstChild,"color",Cw(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(l.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&Ew(l.firstChild,"backgroundColor",Cw(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?Ew(l,"backgroundColor",Cw(a.windowColor,a.windowOpacity)):l.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?l.firstChild.style.textShadow="2px 2px 3px "+fs+", 2px 2px 4px "+fs+", 2px 2px 5px "+fs:a.edgeStyle==="raised"?l.firstChild.style.textShadow="1px 1px "+fs+", 2px 2px "+fs+", 3px 3px "+fs:a.edgeStyle==="depressed"?l.firstChild.style.textShadow="1px 1px "+EP+", 0 1px "+EP+", -1px -1px "+fs+", 0 -1px "+fs:a.edgeStyle==="uniform"&&(l.firstChild.style.textShadow="0 0 4px "+fs+", 0 0 4px "+fs+", 0 0 4px "+fs+", 0 0 4px "+fs)),a.fontPercent&&a.fontPercent!==1){var f=Te.default.parseFloat(l.style.fontSize);l.style.fontSize=f*a.fontPercent+"px",l.style.height="auto",l.style.top="auto"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=yJ[a.fontFamily])}}},r.updateForTrack=function(i){if(Array.isArray(i)||(i=[i]),!(typeof Te.default.WebVTT!="function"||i.every(function(y){return!y.activeCues}))){for(var a=[],s=0;s<i.length;++s)for(var o=i[s],c=0;c<o.activeCues.length;++c)a.push(o.activeCues[c]);Te.default.WebVTT.processCues(Te.default,a,this.el_);for(var l=0;l<i.length;++l){for(var f=i[l],g=0;g<f.activeCues.length;++g){var m=f.activeCues[g].displayState;tu(m,"vjs-text-track-cue"),tu(m,"vjs-text-track-cue-"+(f.language?f.language:l)),f.language&&Dd(m,"lang",f.language)}this.player_.textTrackSettings&&this.updateDisplayState(f)}}},e}(mt);mt.registerComponent("TextTrackDisplay",bJ);var _J=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var i=this.player_.isAudio(),a=this.localize(i?"Audio Player":"Video Player"),s=_r("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),o=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},e}(mt);mt.registerComponent("LoadingSpinner",_J);var Ds=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(i,a,s){a===void 0&&(a={}),s===void 0&&(s={}),i="button",a=Hi({className:this.buildCSSClass()},a),s=Hi({type:"button"},s);var o=_r(i,a,s);return o.appendChild(_r("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},r.addChild=function(i,a){a===void 0&&(a={});var s=this.constructor.name;return cr.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),mt.prototype.addChild.call(this,i,a)},r.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},r.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},r.handleKeyDown=function(i){if(ir.default.isEventKey(i,"Space")||ir.default.isEventKey(i,"Enter")){i.stopPropagation();return}t.prototype.handleKeyDown.call(this,i)},e}(xv);mt.registerComponent("Button",Ds);var V2=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.mouseused_=!1,a.on("mousedown",function(s){return a.handleMouseDown(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-big-play-button"},r.handleClick=function(i){var a=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;co(a),this.player_.tech(!0)&&!((ch||uh)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),c=o&&o.getChild("playToggle");if(!c){this.player_.tech(!0).focus();return}var l=function(){return c.focus()};eh(a)?a.then(l,function(){}):this.setTimeout(l,1)},r.handleKeyDown=function(i){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,i)},r.handleMouseDown=function(i){this.mouseused_=!0},e}(Ds);V2.prototype.controlText_="Play Video";mt.registerComponent("BigPlayButton",V2);var wJ=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.controlText(i&&i.controlText||a.localize("Close")),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},r.handleClick=function(i){this.trigger({type:"close",bubbles:!1})},r.handleKeyDown=function(i){ir.default.isEventKey(i,"Esc")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,i)},e}(Ds);mt.registerComponent("CloseButton",wJ);var W2=function(t){Et.default(e,t);function e(n,i){var a;return i===void 0&&(i={}),a=t.call(this,n,i)||this,i.replay=i.replay===void 0||i.replay,a.on(n,"play",function(s){return a.handlePlay(s)}),a.on(n,"pause",function(s){return a.handlePause(s)}),i.replay&&a.on(n,"ended",function(s){return a.handleEnded(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},r.handleClick=function(i){this.player_.paused()?co(this.player_.play()):this.player_.pause()},r.handleSeeked=function(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},r.handlePlay=function(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.handlePause=function(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r.handleEnded=function(i){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return a.handleSeeked(s)})},e}(Ds);W2.prototype.controlText_="Play";mt.registerComponent("PlayToggle",W2);var K2=function(e,r){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),a=Math.floor(e/3600),s=Math.floor(r/60%60),o=Math.floor(r/3600);return(isNaN(e)||e===1/0)&&(a=i=n="-"),a=a>0||o>0?a+":":"",i=((a||s>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,a+i+n},dS=K2;function SJ(t){dS=t}function TJ(){dS=K2}function Ld(t,e){return e===void 0&&(e=t),dS(t,e)}var Bd=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,["timeupdate","ended"],function(s){return a.updateContent(s)}),a.updateTextNode_(),a}var r=e.prototype;return r.createEl=function(){var i=this.buildCSSClass(),a=t.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control"}),s=_r("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});return a.appendChild(s),this.contentEl_=_r("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"}),a.appendChild(this.contentEl_),a},r.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},r.updateTextNode_=function(i){var a=this;i===void 0&&(i=0),i=Ld(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(a.contentEl_){var s=a.textNode_;s&&a.contentEl_.firstChild!==s&&(s=null,cr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=wt.default.createTextNode(a.formattedTime_),a.textNode_&&(s?a.contentEl_.replaceChild(a.textNode_,s):a.contentEl_.appendChild(a.textNode_))}}))},r.updateContent=function(i){},e}(mt);Bd.prototype.labelText_="Time";Bd.prototype.controlText_="Time";mt.registerComponent("TimeDisplay",Bd);var fS=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-current-time"},r.updateContent=function(i){var a;this.player_.ended()?a=this.player_.duration():a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)},e}(Bd);fS.prototype.labelText_="Current Time";fS.prototype.controlText_="Current Time";mt.registerComponent("CurrentTimeDisplay",fS);var pS=function(t){Et.default(e,t);function e(n,i){var a;a=t.call(this,n,i)||this;var s=function(c){return a.updateContent(c)};return a.on(n,"durationchange",s),a.on(n,"loadstart",s),a.on(n,"loadedmetadata",s),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-duration"},r.updateContent=function(i){var a=this.player_.duration();this.updateTextNode_(a)},e}(Bd);pS.prototype.labelText_="Duration";pS.prototype.controlText_="Duration";mt.registerComponent("DurationDisplay",pS);var CJ=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=t.prototype.createEl.call(this,"div"),s=t.prototype.createEl.call(this,"span",{textContent:"/"});return a.appendChild(s),i.appendChild(a),i},e}(mt);mt.registerComponent("TimeDivider",CJ);var hS=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,"durationchange",function(s){return a.updateContent(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-remaining-time"},r.createEl=function(){var i=t.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&i.insertBefore(_r("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i},r.updateContent=function(i){if(typeof this.player_.duration()=="number"){var a;this.player_.ended()?a=0:this.player_.remainingTimeDisplay?a=this.player_.remainingTimeDisplay():a=this.player_.remainingTime(),this.updateTextNode_(a)}},e}(Bd);hS.prototype.labelText_="Remaining Time";hS.prototype.controlText_="Remaining Time";mt.registerComponent("RemainingTimeDisplay",hS);var EJ=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.updateShowing(),a.on(a.player(),"durationchange",function(s){return a.updateShowing(s)}),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=_r("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(_r("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"})),this.contentEl_.appendChild(wt.default.createTextNode(this.localize("LIVE"))),i.appendChild(this.contentEl_),i},r.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},r.updateShowing=function(i){this.player().duration()===1/0?this.show():this.hide()},e}(mt);mt.registerComponent("LiveDisplay",EJ);var X2=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.updateLiveEdgeStatus(),a.player_.liveTracker&&(a.updateLiveEdgeStatusHandler_=function(s){return a.updateLiveEdgeStatus(s)},a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatusHandler_)),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=_r("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},r.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},r.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},r.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,t.prototype.dispose.call(this)},e}(Ds);X2.prototype.controlText_="Seek to live, currently playing live";mt.registerComponent("SeekToLive",X2);var Av=function(e,r,n){return e=Number(e),Math.min(n,Math.max(r,isNaN(e)?r:e))},gS=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.handleMouseDown_=function(s){return a.handleMouseDown(s)},a.handleMouseUp_=function(s){return a.handleMouseUp(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleMouseMove_=function(s){return a.handleMouseMove(s)},a.update_=function(s){return a.update(s)},a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.enable(),a}var r=e.prototype;return r.enabled=function(){return this.enabled_},r.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},r.disable=function(){if(this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},r.createEl=function(i,a,s){return a===void 0&&(a={}),s===void 0&&(s={}),a.className=a.className+" vjs-slider",a=Hi({tabIndex:0},a),s=Hi({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),t.prototype.createEl.call(this,i,a,s)},r.handleMouseDown=function(i){var a=this.bar.el_.ownerDocument;i.type==="mousedown"&&i.preventDefault(),i.type==="touchstart"&&!su&&i.preventDefault(),C2(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)},r.handleMouseMove=function(i){},r.handleMouseUp=function(){var i=this.bar.el_.ownerDocument;E2(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},r.update=function(){var i=this;if(!(!this.el_||!this.bar)){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var s=i.vertical()?"height":"width";i.bar.el().style[s]=(a*100).toFixed(2)+"%"})),a}},r.getProgress=function(){return Number(Av(this.getPercent(),0,1).toFixed(4))},r.calculateDistance=function(i){var a=wv(this.el_,i);return this.vertical()?a.y:a.x},r.handleKeyDown=function(i){ir.default.isEventKey(i,"Left")||ir.default.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepBack()):ir.default.isEventKey(i,"Right")||ir.default.isEventKey(i,"Up")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,i)},r.handleClick=function(i){i.stopPropagation(),i.preventDefault()},r.vertical=function(i){if(i===void 0)return this.vertical_||!1;this.vertical_=!!i,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(mt);mt.registerComponent("Slider",gS);var xw=function(e,r){return Av(e/r*100,0,100).toFixed(2)+"%"},xJ=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.partEls_=[],a.on(n,"progress",function(s){return a.update(s)}),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),a=_r("span",{className:"vjs-control-text"}),s=_r("span",{textContent:this.localize("Loaded")}),o=wt.default.createTextNode(": ");return this.percentageEl_=_r("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(a),a.appendChild(s),a.appendChild(o),a.appendChild(this.percentageEl_),i},r.dispose=function(){this.partEls_=null,this.percentageEl_=null,t.prototype.dispose.call(this)},r.update=function(i){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=a.player_.liveTracker,o=a.player_.buffered(),c=s&&s.isLive()?s.seekableEnd():a.player_.duration(),l=a.player_.bufferedEnd(),f=a.partEls_,g=xw(l,c);a.percent_!==g&&(a.el_.style.width=g,el(a.percentageEl_,g),a.percent_=g);for(var m=0;m<o.length;m++){var y=o.start(m),x=o.end(m),I=f[m];I||(I=a.el_.appendChild(_r()),f[m]=I),!(I.dataset.start===y&&I.dataset.end===x)&&(I.dataset.start=y,I.dataset.end=x,I.style.left=xw(y,l),I.style.width=xw(x-y,l))}for(var A=f.length;A>o.length;A--)a.el_.removeChild(f[A-1]);f.length=o.length})},e}(mt);mt.registerComponent("LoadProgressBar",xJ);var AJ=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=nu(_i(er.default(a),a.update),Os),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},r.update=function(i,a,s){var o=ah(this.el_),c=Od(this.player_.el()),l=i.width*a;if(!(!c||!o)){var f=i.left-c.left+l,g=i.width-l+(c.right-i.right),m=o.width/2;f<m?m+=m-f:g<m&&(m=g),m<0?m=0:m>o.width&&(m=o.width),m=Math.round(m),this.el_.style.right="-"+m+"px",this.write(s)}},r.write=function(i){el(this.el_,i)},r.updateTime=function(i,a,s,o){var c=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var l,f=c.player_.duration();if(c.player_.liveTracker&&c.player_.liveTracker.isLive()){var g=c.player_.liveTracker.liveWindow(),m=g-a*g;l=(m<1?"":"-")+Ld(m,g)}else l=Ld(s,f);c.update(i,a,l),o&&o()})},e}(mt);mt.registerComponent("TimeTooltip",AJ);var mS=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=nu(_i(er.default(a),a.update),Os),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},r.update=function(i,a){var s=this.getChild("timeTooltip");if(s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(i,a,o)}},e}(mt);mS.prototype.options_={children:[]};!ba&&!au&&mS.prototype.options_.children.push("timeTooltip");mt.registerComponent("PlayProgressBar",mS);var Y2=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=nu(_i(er.default(a),a.update),Os),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(i,a){var s=this,o=a*this.player_.duration();this.getChild("timeTooltip").updateTime(i,a,o,function(){s.el_.style.left=i.width*a+"px"})},e}(mt);Y2.prototype.options_={children:["timeTooltip"]};mt.registerComponent("MouseTimeDisplay",Y2);var Gm=5,xP=12,vS=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.setEventHandlers_(),a}var r=e.prototype;return r.setEventHandlers_=function(){var i=this;this.update_=_i(this,this.update),this.update=nu(this.update_,Os),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return i.enableInterval_(a)},this.disableIntervalHandler_=function(a){return i.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in wt.default&&"visibilityState"in wt.default&&this.on(wt.default,"visibilitychange",this.toggleVisibility_)},r.toggleVisibility_=function(i){wt.default.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},r.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Os))},r.disableInterval_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&i.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.update=function(i){var a=this;if(wt.default.visibilityState!=="hidden"){var s=t.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=a.player_.ended()?a.player_.duration():a.getCurrentTime_(),c=a.player_.liveTracker,l=a.player_.duration();c&&c.isLive()&&(l=a.player_.liveTracker.liveCurrentTime()),a.percent_!==s&&(a.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),a.percent_=s),(a.currentTime_!==o||a.duration_!==l)&&(a.el_.setAttribute("aria-valuetext",a.localize("progress bar timing: currentTime={1} duration={2}",[Ld(o,l),Ld(l,l)],"{1} of {2}")),a.currentTime_=o,a.duration_=l),a.bar&&a.bar.update(Od(a.el()),a.getProgress())}),s}},r.userSeek_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},r.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.getPercent=function(){var i=this.getCurrentTime_(),a,s=this.player_.liveTracker;return s&&s.isLive()?(a=(i-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(a=1)):a=i/this.player_.duration(),a},r.handleMouseDown=function(i){sh(i)&&(i.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,i))},r.handleMouseMove=function(i,a){if(a===void 0&&(a=!1),!!sh(i)){!a&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,o=this.calculateDistance(i),c=this.player_.liveTracker;if(!c||!c.isLive())s=o*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(o>=.99){c.seekToLiveEdge();return}var l=c.seekableStart(),f=c.liveCurrentTime();if(s=l+o*c.liveWindow(),s>=f&&(s=f),s<=l&&(s=l+.1),s===1/0)return}this.userSeek_(s)}},r.enable=function(){t.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.show()},r.disable=function(){t.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.hide()},r.handleMouseUp=function(i){t.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?co(this.player_.play()):this.update_()},r.stepForward=function(){this.userSeek_(this.player_.currentTime()+Gm)},r.stepBack=function(){this.userSeek_(this.player_.currentTime()-Gm)},r.handleAction=function(i){this.player_.paused()?this.player_.play():this.player_.pause()},r.handleKeyDown=function(i){var a=this.player_.liveTracker;if(ir.default.isEventKey(i,"Space")||ir.default.isEventKey(i,"Enter"))i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if(ir.default.isEventKey(i,"Home"))i.preventDefault(),i.stopPropagation(),this.userSeek_(0);else if(ir.default.isEventKey(i,"End"))i.preventDefault(),i.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(ir.default(i))){i.preventDefault(),i.stopPropagation();var s=(ir.default.codes[ir.default(i)]-ir.default.codes[0])*10/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else ir.default.isEventKey(i,"PgDn")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()-Gm*xP)):ir.default.isEventKey(i,"PgUp")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()+Gm*xP)):t.prototype.handleKeyDown.call(this,i)},r.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in wt.default&&"visibilityState"in wt.default&&this.off(wt.default,"visibilitychange",this.toggleVisibility_),t.prototype.dispose.call(this)},e}(gS);vS.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!ba&&!au&&vS.prototype.options_.children.splice(1,0,"mouseTimeDisplay");mt.registerComponent("SeekBar",vS);var J2=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.handleMouseMove=nu(_i(er.default(a),a.handleMouseMove),Os),a.throttledHandleMouseSeek=nu(_i(er.default(a),a.handleMouseSeek),Os),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.handleMouseDownHandler_=function(s){return a.handleMouseDown(s)},a.enable(),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.handleMouseMove=function(i){var a=this.getChild("seekBar");if(a){var s=a.getChild("playProgressBar"),o=a.getChild("mouseTimeDisplay");if(!(!s&&!o)){var c=a.el(),l=ah(c),f=wv(c,i).x;f=Av(f,0,1),o&&o.update(l,f),s&&s.update(l,a.getProgress())}}},r.handleMouseSeek=function(i){var a=this.getChild("seekBar");a&&a.handleMouseMove(i)},r.enabled=function(){return this.enabled_},r.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&co(this.player_.play())}},r.enable=function(){this.children().forEach(function(i){return i.enable&&i.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},r.removeListenersAddedOnMousedownAndTouchstart=function(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},r.handleMouseDown=function(i){var a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(i),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(i){var a=this.getChild("seekBar");a&&a.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},e}(mt);J2.prototype.options_={children:["seekBar"]};mt.registerComponent("ProgressControl",J2);var Q2=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,["enterpictureinpicture","leavepictureinpicture"],function(s){return a.handlePictureInPictureChange(s)}),a.on(n,["disablepictureinpicturechanged","loadedmetadata"],function(s){return a.handlePictureInPictureEnabledChange(s)}),a.on(n,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var s=n.currentType().substring(0,5)==="audio";s||n.audioPosterMode()||n.audioOnlyMode()?(n.isInPictureInPicture()&&n.exitPictureInPicture(),a.hide()):a.show()}),a.disable(),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},r.handlePictureInPictureEnabledChange=function(){wt.default.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},r.handlePictureInPictureChange=function(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},r.handleClick=function(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Ds);Q2.prototype.controlText_="Picture-in-Picture";mt.registerComponent("PictureInPictureToggle",Q2);var Z2=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,"fullscreenchange",function(s){return a.handleFullscreenChange(s)}),wt.default[n.fsApi_.fullscreenEnabled]===!1&&a.disable(),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},r.handleFullscreenChange=function(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.handleClick=function(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Ds);Z2.prototype.controlText_="Fullscreen";mt.registerComponent("FullscreenToggle",Z2);var kJ=function(e,r){r.tech_&&!r.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},IJ=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return i.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),i},e}(mt);mt.registerComponent("VolumeLevel",IJ);var DJ=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=nu(_i(er.default(a),a.update),Os),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},r.update=function(i,a,s,o){if(!s){var c=Od(this.el_),l=Od(this.player_.el()),f=i.width*a;if(!l||!c)return;var g=i.left-l.left+f,m=i.width-f+(l.right-i.right),y=c.width/2;g<y?y+=y-g:m<y&&(y=m),y<0?y=0:y>c.width&&(y=c.width),this.el_.style.right="-"+y+"px"}this.write(o+"%")},r.write=function(i){el(this.el_,i)},r.updateVolume=function(i,a,s,o,c){var l=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){l.update(i,a,s,o.toFixed(0)),c&&c()})},e}(mt);mt.registerComponent("VolumeLevelTooltip",DJ);var eR=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=nu(_i(er.default(a),a.update),Os),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(i,a,s){var o=this,c=100*a;this.getChild("volumeLevelTooltip").updateVolume(i,a,s,c,function(){s?o.el_.style.bottom=i.height*a+"px":o.el_.style.left=i.width*a+"px"})},e}(mt);eR.prototype.options_={children:["volumeLevelTooltip"]};mt.registerComponent("MouseVolumeLevelDisplay",eR);var kv=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on("slideractive",function(s){return a.updateLastVolume_(s)}),a.on(n,"volumechange",function(s){return a.updateARIAAttributes(s)}),n.ready(function(){return a.updateARIAAttributes()}),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},r.handleMouseDown=function(i){sh(i)&&t.prototype.handleMouseDown.call(this,i)},r.handleMouseMove=function(i){var a=this.getChild("mouseVolumeLevelDisplay");if(a){var s=this.el(),o=Od(s),c=this.vertical(),l=wv(s,i);l=c?l.y:l.x,l=Av(l,0,1),a.update(o,l,c)}sh(i)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},r.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.updateARIAAttributes=function(i){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},r.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},r.updateLastVolume_=function(){var i=this,a=this.player_.volume();this.one("sliderinactive",function(){i.player_.volume()===0&&i.player_.lastVolume_(a)})},e}(gS);kv.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!ba&&!au&&kv.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");kv.prototype.playerEvent="volumechange";mt.registerComponent("VolumeBar",kv);var tR=function(t){Et.default(e,t);function e(n,i){var a;return i===void 0&&(i={}),i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||ih(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),a=t.call(this,n,i)||this,kJ(er.default(a),n),a.throttledHandleMouseMove=nu(_i(er.default(a),a.handleMouseMove),Os),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.on("mousedown",function(s){return a.handleMouseDown(s)}),a.on("touchstart",function(s){return a.handleMouseDown(s)}),a.on("mousemove",function(s){return a.handleMouseMove(s)}),a.on(a.volumeBar,["focus","slideractive"],function(){a.volumeBar.addClass("vjs-slider-active"),a.addClass("vjs-slider-active"),a.trigger("slideractive")}),a.on(a.volumeBar,["blur","sliderinactive"],function(){a.volumeBar.removeClass("vjs-slider-active"),a.removeClass("vjs-slider-active"),a.trigger("sliderinactive")}),a}var r=e.prototype;return r.createEl=function(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},r.handleMouseDown=function(i){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(i){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},r.handleMouseMove=function(i){this.volumeBar.handleMouseMove(i)},e}(mt);tR.prototype.options_={children:["volumeBar"]};mt.registerComponent("VolumeControl",tR);var OJ=function(e,r){r.tech_&&!r.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(r,"loadstart",function(){r.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},rR=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,OJ(er.default(a),n),a.on(n,["loadstart","volumechange"],function(s){return a.update(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},r.handleClick=function(i){var a=this.player_.volume(),s=this.player_.lastVolume_();if(a===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},r.update=function(i){this.updateIcon_(),this.updateControlText_()},r.updateIcon_=function(){var i=this.player_.volume(),a=3;ba&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),i===0||this.player_.muted()?a=0:i<.33?a=1:i<.67&&(a=2);for(var s=0;s<4;s++)lh(this.el_,"vjs-vol-"+s);tu(this.el_,"vjs-vol-"+a)},r.updateControlText_=function(){var i=this.player_.muted()||this.player_.volume()===0,a=i?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},e}(Ds);rR.prototype.controlText_="Mute";mt.registerComponent("MuteToggle",rR);var iR=function(t){Et.default(e,t);function e(n,i){var a;return i===void 0&&(i={}),typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl>"u"||ih(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),a=t.call(this,n,i)||this,a.handleKeyPressHandler_=function(s){return a.handleKeyPress(s)},a.on(n,["loadstart"],function(s){return a.volumePanelState_(s)}),a.on(a.muteToggle,"keyup",function(s){return a.handleKeyPress(s)}),a.on(a.volumeControl,"keyup",function(s){return a.handleVolumeControlKeyUp(s)}),a.on("keydown",function(s){return a.handleKeyPress(s)}),a.on("mouseover",function(s){return a.handleMouseOver(s)}),a.on("mouseout",function(s){return a.handleMouseOut(s)}),a.on(a.volumeControl,["slideractive"],a.sliderActive_),a.on(a.volumeControl,["sliderinactive"],a.sliderInactive_),a}var r=e.prototype;return r.sliderActive_=function(){this.addClass("vjs-slider-active")},r.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},r.createEl=function(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},r.dispose=function(){this.handleMouseOut(),t.prototype.dispose.call(this)},r.handleVolumeControlKeyUp=function(i){ir.default.isEventKey(i,"Esc")&&this.muteToggle.focus()},r.handleMouseOver=function(i){this.addClass("vjs-hover"),Ja(wt.default,"keyup",this.handleKeyPressHandler_)},r.handleMouseOut=function(i){this.removeClass("vjs-hover"),Qn(wt.default,"keyup",this.handleKeyPressHandler_)},r.handleKeyPress=function(i){ir.default.isEventKey(i,"Esc")&&this.handleMouseOut()},e}(mt);iR.prototype.options_={children:["muteToggle","volumeControl"]};mt.registerComponent("VolumePanel",iR);var nR=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,i&&(a.menuButton_=i.menuButton),a.focusedChild_=-1,a.on("keydown",function(s){return a.handleKeyDown(s)}),a.boundHandleBlur_=function(s){return a.handleBlur(s)},a.boundHandleTapClick_=function(s){return a.handleTapClick(s)},a}var r=e.prototype;return r.addEventListenerForItem=function(i){i instanceof mt&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},r.removeEventListenerForItem=function(i){i instanceof mt&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},r.removeChild=function(i){typeof i=="string"&&(i=this.getChild(i)),this.removeEventListenerForItem(i),t.prototype.removeChild.call(this,i)},r.addItem=function(i){var a=this.addChild(i);a&&this.addEventListenerForItem(a)},r.createEl=function(){var i=this.options_.contentElType||"ul";this.contentEl_=_r(i,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var a=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),Ja(a,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),a},r.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},r.handleBlur=function(i){var a=i.relatedTarget||wt.default.activeElement;if(!this.children().some(function(o){return o.el()===a})){var s=this.menuButton_;s&&s.buttonPressed_&&a!==s.el().firstChild&&s.unpressButton()}},r.handleTapClick=function(i){if(this.menuButton_){this.menuButton_.unpressButton();var a=this.children();if(!Array.isArray(a))return;var s=a.filter(function(o){return o.el()===i.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},r.handleKeyDown=function(i){ir.default.isEventKey(i,"Left")||ir.default.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(ir.default.isEventKey(i,"Right")||ir.default.isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},r.stepForward=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_+1),this.focus(i)},r.stepBack=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_-1),this.focus(i)},r.focus=function(i){i===void 0&&(i=0);var a=this.children().slice(),s=a.length&&a[0].hasClass("vjs-menu-title");s&&a.shift(),a.length>0&&(i<0?i=0:i>=a.length&&(i=a.length-1),this.focusedChild_=i,a[i].el_.focus())},e}(mt);mt.registerComponent("Menu",nR);var yS=function(t){Et.default(e,t);function e(n,i){var a;i===void 0&&(i={}),a=t.call(this,n,i)||this,a.menuButton_=new Ds(n,i),a.menuButton_.controlText(a.controlText_),a.menuButton_.el_.setAttribute("aria-haspopup","true");var s=Ds.prototype.buildCSSClass();a.menuButton_.el_.className=a.buildCSSClass()+" "+s,a.menuButton_.removeClass("vjs-control"),a.addChild(a.menuButton_),a.update(),a.enabled_=!0;var o=function(l){return a.handleClick(l)};return a.handleMenuKeyUp_=function(c){return a.handleMenuKeyUp(c)},a.on(a.menuButton_,"tap",o),a.on(a.menuButton_,"click",o),a.on(a.menuButton_,"keydown",function(c){return a.handleKeyDown(c)}),a.on(a.menuButton_,"mouseenter",function(){a.addClass("vjs-hover"),a.menu.show(),Ja(wt.default,"keyup",a.handleMenuKeyUp_)}),a.on("mouseleave",function(c){return a.handleMouseLeave(c)}),a.on("keydown",function(c){return a.handleSubmenuKeyDown(c)}),a}var r=e.prototype;return r.update=function(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},r.createMenu=function(){var i=new nR(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var a=_r("li",{className:"vjs-menu-title",textContent:Ji(this.options_.title),tabIndex:-1}),s=new mt(this.player_,{el:a});i.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)i.addItem(this.items[o]);return i},r.createItems=function(){},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},r.buildWrapperCSSClass=function(){var i="vjs-menu-button";this.options_.inline===!0?i+="-inline":i+="-popup";var a=Ds.prototype.buildCSSClass();return"vjs-menu-button "+i+" "+a+" "+t.prototype.buildCSSClass.call(this)},r.buildCSSClass=function(){var i="vjs-menu-button";return this.options_.inline===!0?i+="-inline":i+="-popup","vjs-menu-button "+i+" "+t.prototype.buildCSSClass.call(this)},r.controlText=function(i,a){return a===void 0&&(a=this.menuButton_.el()),this.menuButton_.controlText(i,a)},r.dispose=function(){this.handleMouseLeave(),t.prototype.dispose.call(this)},r.handleClick=function(i){this.buttonPressed_?this.unpressButton():this.pressButton()},r.handleMouseLeave=function(i){this.removeClass("vjs-hover"),Qn(wt.default,"keyup",this.handleMenuKeyUp_)},r.focus=function(){this.menuButton_.focus()},r.blur=function(){this.menuButton_.blur()},r.handleKeyDown=function(i){ir.default.isEventKey(i,"Esc")||ir.default.isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),ir.default.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):(ir.default.isEventKey(i,"Up")||ir.default.isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},r.handleMenuKeyUp=function(i){(ir.default.isEventKey(i,"Esc")||ir.default.isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},r.handleSubmenuKeyPress=function(i){this.handleSubmenuKeyDown(i)},r.handleSubmenuKeyDown=function(i){(ir.default.isEventKey(i,"Esc")||ir.default.isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),ir.default.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},r.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ba&&b2())return;this.menu.focus()}},r.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},r.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},r.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(mt);mt.registerComponent("MenuButton",yS);var bS=function(t){Et.default(e,t);function e(r,n){var i,a=n.tracks;if(i=t.call(this,r,n)||this,i.items.length<=1&&i.hide(),!a)return er.default(i);var s=_i(er.default(i),i.update);return a.addEventListener("removetrack",s),a.addEventListener("addtrack",s),a.addEventListener("labelchange",s),i.player_.on("ready",s),i.player_.on("dispose",function(){a.removeEventListener("removetrack",s),a.removeEventListener("addtrack",s),a.removeEventListener("labelchange",s)}),i}return e}(yS);mt.registerComponent("TrackButton",bS);var PJ=["Tab","Esc","Up","Down","Right","Left"],fh=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.selectable=i.selectable,a.isSelected_=i.selected||!1,a.multiSelectable=i.multiSelectable,a.selected(a.isSelected_),a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem"),a}var r=e.prototype;return r.createEl=function(i,a,s){this.nonIconControl=!0;var o=t.prototype.createEl.call(this,"li",Hi({className:"vjs-menu-item",tabIndex:-1},a),s);return o.replaceChild(_r("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},r.handleKeyDown=function(i){PJ.some(function(a){return ir.default.isEventKey(i,a)})||t.prototype.handleKeyDown.call(this,i)},r.handleClick=function(i){this.selected(!0)},r.selected=function(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(xv);mt.registerComponent("MenuItem",fh);var ph=function(t){Et.default(e,t);function e(n,i){var a,s=i.track,o=n.textTracks();i.label=s.label||s.language||"Unknown",i.selected=s.mode==="showing",a=t.call(this,n,i)||this,a.track=s,a.kinds=(i.kinds||[i.kind||a.track.kind]).filter(Boolean);var c=function(){for(var m=arguments.length,y=new Array(m),x=0;x<m;x++)y[x]=arguments[x];a.handleTracksChange.apply(er.default(a),y)},l=function(){for(var m=arguments.length,y=new Array(m),x=0;x<m;x++)y[x]=arguments[x];a.handleSelectedLanguageChange.apply(er.default(a),y)};if(n.on(["loadstart","texttrackchange"],c),o.addEventListener("change",c),o.addEventListener("selectedlanguagechange",l),a.on("dispose",function(){n.off(["loadstart","texttrackchange"],c),o.removeEventListener("change",c),o.removeEventListener("selectedlanguagechange",l)}),o.onchange===void 0){var f;a.on(["tap","click"],function(){if(typeof Te.default.Event!="object")try{f=new Te.default.Event("change")}catch{}f||(f=wt.default.createEvent("Event"),f.initEvent("change",!0,!0)),o.dispatchEvent(f)})}return a.handleTracksChange(),a}var r=e.prototype;return r.handleClick=function(i){var a=this.track,s=this.player_.textTracks();if(t.prototype.handleClick.call(this,i),!!s)for(var o=0;o<s.length;o++){var c=s[o];this.kinds.indexOf(c.kind)!==-1&&(c===a?c.mode!=="showing"&&(c.mode="showing"):c.mode!=="disabled"&&(c.mode="disabled"))}},r.handleTracksChange=function(i){var a=this.track.mode==="showing";a!==this.isSelected_&&this.selected(a)},r.handleSelectedLanguageChange=function(i){if(this.track.mode==="showing"){var a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},r.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(fh);mt.registerComponent("TextTrackMenuItem",ph);var aR=function(t){Et.default(e,t);function e(n,i){return i.track={player:n,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,t.call(this,n,i)||this}var r=e.prototype;return r.handleTracksChange=function(i){for(var a=this.player().textTracks(),s=!0,o=0,c=a.length;o<c;o++){var l=a[o];if(this.options_.kinds.indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},r.handleSelectedLanguageChange=function(i){for(var a=this.player().textTracks(),s=!0,o=0,c=a.length;o<c;o++){var l=a[o];if(["captions","descriptions","subtitles"].indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(ph);mt.registerComponent("OffTextTrackMenuItem",aR);var qd=function(t){Et.default(e,t);function e(n,i){return i===void 0&&(i={}),i.tracks=n.textTracks(),t.call(this,n,i)||this}var r=e.prototype;return r.createItems=function(i,a){i===void 0&&(i=[]),a===void 0&&(a=ph);var s;this.label_&&(s=this.label_+" off"),i.push(new aR(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var c=0;c<o.length;c++){var l=o[c];if(this.kinds_.indexOf(l.kind)>-1){var f=new a(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});f.addClass("vjs-"+l.kind+"-menu-item"),i.push(f)}}return i},e}(bS);mt.registerComponent("TextTrackButton",qd);var sR=function(t){Et.default(e,t);function e(n,i){var a,s=i.track,o=i.cue,c=n.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=c&&c<o.endTime,a=t.call(this,n,i)||this,a.track=s,a.cue=o,a}var r=e.prototype;return r.handleClick=function(i){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(fh);mt.registerComponent("ChaptersTrackMenuItem",sR);var _S=function(t){Et.default(e,t);function e(n,i,a){var s;return s=t.call(this,n,i,a)||this,s.selectCurrentItem_=function(){s.items.forEach(function(o){o.selected(s.track_.activeCues[0]===o.cue)})},s}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},r.update=function(i){if(!(i&&i.track&&i.track.kind!=="chapters")){var a=this.findChaptersTrack();a!==this.track_?(this.setTrack(a),t.prototype.update.call(this)):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&t.prototype.update.call(this)}},r.setTrack=function(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},r.findChaptersTrack=function(){for(var i=this.player_.textTracks()||[],a=i.length-1;a>=0;a--){var s=i[a];if(s.kind===this.kind_)return s}},r.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ji(this.kind_))},r.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},r.createItems=function(){var i=[];if(!this.track_)return i;var a=this.track_.cues;if(!a)return i;for(var s=0,o=a.length;s<o;s++){var c=a[s],l=new sR(this.player_,{track:this.track_,cue:c});i.push(l)}return i},e}(qd);_S.prototype.kind_="chapters";_S.prototype.controlText_="Chapters";mt.registerComponent("ChaptersButton",_S);var wS=function(t){Et.default(e,t);function e(n,i,a){var s;s=t.call(this,n,i,a)||this;var o=n.textTracks(),c=_i(er.default(s),s.handleTracksChange);return o.addEventListener("change",c),s.on("dispose",function(){o.removeEventListener("change",c)}),s}var r=e.prototype;return r.handleTracksChange=function(i){for(var a=this.player().textTracks(),s=!1,o=0,c=a.length;o<c;o++){var l=a[o];if(l.kind!==this.kind_&&l.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},r.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(qd);wS.prototype.kind_="descriptions";wS.prototype.controlText_="Descriptions";mt.registerComponent("DescriptionsButton",wS);var SS=function(t){Et.default(e,t);function e(n,i,a){return t.call(this,n,i,a)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(qd);SS.prototype.kind_="subtitles";SS.prototype.controlText_="Subtitles";mt.registerComponent("SubtitlesButton",SS);var TS=function(t){Et.default(e,t);function e(n,i){var a;return i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",a=t.call(this,n,i)||this,a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+i.kind+" settings dialog"),a}var r=e.prototype;return r.handleClick=function(i){this.player().getChild("textTrackSettings").open()},e}(ph);mt.registerComponent("CaptionSettingsMenuItem",TS);var CS=function(t){Et.default(e,t);function e(n,i,a){return t.call(this,n,i,a)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new TS(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,i)},e}(qd);CS.prototype.kind_="captions";CS.prototype.controlText_="Captions";mt.registerComponent("CaptionsButton",CS);var oR=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(i,a,s){var o=t.prototype.createEl.call(this,i,a,s),c=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(c.appendChild(_r("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),c.appendChild(_r("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e}(ph);mt.registerComponent("SubsCapsMenuItem",oR);var ES=function(t){Et.default(e,t);function e(n,i){var a;return i===void 0&&(i={}),a=t.call(this,n,i)||this,a.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)>-1&&(a.label_="captions"),a.menuButton_.controlText(Ji(a.label_)),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new TS(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i=t.prototype.createItems.call(this,i,oR),i},e}(qd);ES.prototype.kinds_=["captions","subtitles"];ES.prototype.controlText_="Subtitles";mt.registerComponent("SubsCapsButton",ES);var uR=function(t){Et.default(e,t);function e(n,i){var a,s=i.track,o=n.audioTracks();i.label=s.label||s.language||"Unknown",i.selected=s.enabled,a=t.call(this,n,i)||this,a.track=s,a.addClass("vjs-"+s.kind+"-menu-item");var c=function(){for(var f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];a.handleTracksChange.apply(er.default(a),g)};return o.addEventListener("change",c),a.on("dispose",function(){o.removeEventListener("change",c)}),a}var r=e.prototype;return r.createEl=function(i,a,s){var o=t.prototype.createEl.call(this,i,a,s),c=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(c.appendChild(_r("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),c.appendChild(_r("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},r.handleClick=function(i){if(t.prototype.handleClick.call(this,i),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];o!==this.track&&(o.enabled=o===this.track)}},r.handleTracksChange=function(i){this.selected(this.track.enabled)},e}(fh);mt.registerComponent("AudioTrackMenuItem",uR);var cR=function(t){Et.default(e,t);function e(n,i){return i===void 0&&(i={}),i.tracks=n.audioTracks(),t.call(this,n,i)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(i){i===void 0&&(i=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];i.push(new uR(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return i},e}(bS);cR.prototype.controlText_="Audio Track";mt.registerComponent("AudioTrackButton",cR);var xS=function(t){Et.default(e,t);function e(n,i){var a,s=i.rate,o=parseFloat(s,10);return i.label=s,i.selected=o===n.playbackRate(),i.selectable=!0,i.multiSelectable=!1,a=t.call(this,n,i)||this,a.label=s,a.rate=o,a.on(n,"ratechange",function(c){return a.update(c)}),a}var r=e.prototype;return r.handleClick=function(i){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},r.update=function(i){this.selected(this.player().playbackRate()===this.rate)},e}(fh);xS.prototype.contentElType="button";mt.registerComponent("PlaybackRateMenuItem",xS);var lR=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.menuButton_.el_.setAttribute("aria-describedby",a.labelElId_),a.updateVisibility(),a.updateLabel(),a.on(n,"loadstart",function(s){return a.updateVisibility(s)}),a.on(n,"ratechange",function(s){return a.updateLabel(s)}),a.on(n,"playbackrateschange",function(s){return a.handlePlaybackRateschange(s)}),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=_r("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),i.appendChild(this.labelEl_),i},r.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},r.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){for(var i=this.playbackRates(),a=[],s=i.length-1;s>=0;s--)a.push(new xS(this.player(),{rate:i[s]+"x"}));return a},r.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.handleClick=function(i){var a=this.player().playbackRate(),s=this.playbackRates(),o=s.indexOf(a),c=(o+1)%s.length;this.player().playbackRate(s[c])},r.handlePlaybackRateschange=function(i){this.update()},r.playbackRates=function(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},r.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},r.updateVisibility=function(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.updateLabel=function(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(yS);lR.prototype.controlText_="Playback Rate";mt.registerComponent("PlaybackRateMenuButton",lR);var dR=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},r.createEl=function(i,a,s){return i===void 0&&(i="div"),a===void 0&&(a={}),s===void 0&&(s={}),a.className||(a.className=this.buildCSSClass()),t.prototype.createEl.call(this,i,a,s)},e}(mt);mt.registerComponent("Spacer",dR);var RJ=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"})},e}(dR);mt.registerComponent("CustomControlSpacer",RJ);var sv=function(t){Et.default(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(mt);sv.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in wt.default&&sv.prototype.options_.children.splice(sv.prototype.options_.children.length-1,0,"pictureInPictureToggle");mt.registerComponent("ControlBar",sv);var fR=function(t){Et.default(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,"error",function(s){return a.open(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},r.content=function(){var i=this.player().error();return i?this.localize(i.message):""},e}(Ud);fR.prototype.options_=Zc.default({},Ud.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});mt.registerComponent("ErrorDisplay",fR);var Aw="vjs-text-track-settings",AP=["#000","Black"],kP=["#00F","Blue"],IP=["#0FF","Cyan"],DP=["#0F0","Green"],OP=["#F0F","Magenta"],PP=["#F00","Red"],RP=["#FFF","White"],LP=["#FF0","Yellow"],kw=["1","Opaque"],Iw=["0.5","Semi-Transparent"],NP=["0","Transparent"],Wc={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[AP,RP,PP,DP,kP,LP,OP,IP]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[kw,Iw,NP]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[RP,AP,PP,DP,kP,LP,OP,IP]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[kw,Iw]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[NP,Iw,kw]}};Wc.windowColor.options=Wc.backgroundColor.options;function pR(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function LJ(t,e){var r=t.options[t.options.selectedIndex].value;return pR(r,e)}function NJ(t,e,r){if(e){for(var n=0;n<t.options.length;n++)if(pR(t.options[n].value,r)===e){t.selectedIndex=n;break}}}var FJ=function(t){Et.default(e,t);function e(n,i){var a;return i.temporary=!1,a=t.call(this,n,i)||this,a.updateDisplay=a.updateDisplay.bind(er.default(a)),a.fill(),a.hasBeenOpened_=a.hasBeenFilled_=!0,a.endDialog=_r("p",{className:"vjs-control-text",textContent:a.localize("End of dialog window.")}),a.el().appendChild(a.endDialog),a.setDefaults(),i.persistTextTrackSettings===void 0&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings(),a.close()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults(),a.updateDisplay()}),xd(Wc,function(s){a.on(a.$(s.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}var r=e.prototype;return r.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},r.createElSelect_=function(i,a,s){var o=this;a===void 0&&(a=""),s===void 0&&(s="label");var c=Wc[i],l=c.id.replace("%s",this.id_),f=[a,l].join(" ").trim();return["<"+s+' id="'+l+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(c.label),"</"+s+">",'<select aria-labelledby="'+f+'">'].concat(c.options.map(function(g){var m=l+"-"+g[1].replace(/\W+/g,"");return['<option id="'+m+'" value="'+g[0]+'" ','aria-labelledby="'+f+" "+m+'">',o.localize(g[1]),"</option>"].join("")})).concat("</select>").join("")},r.createElFgColor_=function(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},r.createElBgColor_=function(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},r.createElWinColor_=function(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},r.createElColors_=function(){return _r("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.createElFont_=function(){return _r("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.createElControls_=function(){var i=this.localize("restore all settings to the default values");return _r("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.label=function(){return this.localize("Caption Settings Dialog")},r.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.getValues=function(){var i=this;return EY(Wc,function(a,s,o){var c=LJ(i.$(s.selector),s.parser);return c!==void 0&&(a[o]=c),a},{})},r.setValues=function(i){var a=this;xd(Wc,function(s,o){NJ(a.$(s.selector),i[o],s.parser)})},r.setDefaults=function(){var i=this;xd(Wc,function(a){var s=a.hasOwnProperty("default")?a.default:0;i.$(a.selector).selectedIndex=s})},r.restoreSettings=function(){var i;try{i=JSON.parse(Te.default.localStorage.getItem(Aw))}catch(a){cr.warn(a)}i&&this.setValues(i)},r.saveSettings=function(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?Te.default.localStorage.setItem(Aw,JSON.stringify(i)):Te.default.localStorage.removeItem(Aw)}catch(a){cr.warn(a)}}},r.updateDisplay=function(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},r.conditionalBlur_=function(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,a=i&&i.subsCapsButton,s=i&&i.captionsButton;a?a.focus():s&&s.focus()},e}(Ud);mt.registerComponent("TextTrackSettings",FJ);var MJ=function(t){Et.default(e,t);function e(n,i){var a,s=i.ResizeObserver||Te.default.ResizeObserver;i.ResizeObserver===null&&(s=!1);var o=bi({createEl:!s,reportTouchActivity:!1},i);return a=t.call(this,n,o)||this,a.ResizeObserver=i.ResizeObserver||Te.default.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=FY(function(){a.resizeHandler()},100,!1,er.default(a)),s?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(n.el())):(a.loadListener_=function(){if(!(!a.el_||!a.el_.contentWindow)){var c=a.debouncedHandler_,l=a.unloadListener_=function(){Qn(this,"resize",c),Qn(this,"unload",l),l=null};Ja(a.el_.contentWindow,"unload",l),Ja(a.el_.contentWindow,"resize",c)}},a.one("load",a.loadListener_)),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},r.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},r.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},e}(mt);mt.registerComponent("ResizeManager",MJ);var UJ={trackingThreshold:20,liveTolerance:15},$J=function(t){Et.default(e,t);function e(n,i){var a,s=bi(UJ,i,{createEl:!1});return a=t.call(this,n,s)||this,a.handleVisibilityChange_=function(o){return a.handleVisibilityChange(o)},a.trackLiveHandler_=function(){return a.trackLive_()},a.handlePlay_=function(o){return a.handlePlay(o)},a.handleFirstTimeupdate_=function(o){return a.handleFirstTimeupdate(o)},a.handleSeeked_=function(o){return a.handleSeeked(o)},a.seekToLiveEdge_=function(o){return a.seekToLiveEdge(o)},a.reset_(),a.on(a.player_,"durationchange",function(o){return a.handleDurationchange(o)}),a.on(a.player_,"canplay",function(){return a.toggleTracking()}),ch&&"hidden"in wt.default&&"visibilityState"in wt.default&&a.on(wt.default,"visibilitychange",a.handleVisibilityChange_),a}var r=e.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(wt.default.hidden?this.stopTracking():this.startTracking())},r.trackLive_=function(){var i=this.player_.seekable();if(!(!i||!i.length)){var a=Number(Te.default.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),c=this.player_.currentTime(),l=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-c)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(l=!1),l!==this.behindLiveEdge_&&(this.behindLiveEdge_=l,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.toggleTracking()},r.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},r.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Os),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},r.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},r.handleSeeked=function(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},r.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},r.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},r.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},r.seekableEnd=function(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.end(s));return a.length?a.sort()[a.length-1]:1/0},r.seekableStart=function(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.start(s));return a.length?a.sort()[0]:0},r.liveWindow=function(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){var i=this.seekableEnd();return this.lastSeekEnd_!==-1&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return typeof this.trackingInterval_=="number"},r.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},r.dispose=function(){this.off(wt.default,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),t.prototype.dispose.call(this)},e}(mt);mt.registerComponent("LiveTracker",$J);var Bw=function(e){var r=e.el();if(r.hasAttribute("src"))return e.triggerSourceset(r.src),!0;var n=e.$$("source"),i=[],a="";if(!n.length)return!1;for(var s=0;s<n.length;s++){var o=n[s].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(a=i[0]),e.triggerSourceset(a),!0):!1},BJ=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var r=wt.default.createElement(this.nodeName.toLowerCase());r.innerHTML=e;for(var n=wt.default.createDocumentFragment();r.childNodes.length;)n.appendChild(r.childNodes[0]);return this.innerText="",Te.default.Element.prototype.appendChild.call(this,n),this.innerHTML}}),hR=function(e,r){for(var n={},i=0;i<e.length&&(n=Object.getOwnPropertyDescriptor(e[i],r),!(n&&n.set&&n.get));i++);return n.enumerable=!0,n.configurable=!0,n},qJ=function(e){return hR([e.el(),Te.default.HTMLMediaElement.prototype,Te.default.Element.prototype,BJ],"innerHTML")},FP=function(e){var r=e.el();if(!r.resetSourceWatch_){var n={},i=qJ(e),a=function(o){return function(){for(var c=arguments.length,l=new Array(c),f=0;f<c;f++)l[f]=arguments[f];var g=o.apply(r,l);return Bw(e),g}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){r[s]&&(n[s]=r[s],r[s]=a(n[s]))}),Object.defineProperty(r,"innerHTML",bi(i,{set:a(i.set)})),r.resetSourceWatch_=function(){r.resetSourceWatch_=null,Object.keys(n).forEach(function(s){r[s]=n[s]}),Object.defineProperty(r,"innerHTML",i)},e.one("sourceset",r.resetSourceWatch_)}},jJ=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?q2(Te.default.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Te.default.Element.prototype.setAttribute.call(this,"src",e),e}}),HJ=function(e){return hR([e.el(),Te.default.HTMLMediaElement.prototype,jJ],"src")},GJ=function(e){if(e.featuresSourceset){var r=e.el();if(!r.resetSourceset_){var n=HJ(e),i=r.setAttribute,a=r.load;Object.defineProperty(r,"src",bi(n,{set:function(o){var c=n.set.call(r,o);return e.triggerSourceset(r.src),c}})),r.setAttribute=function(s,o){var c=i.call(r,s,o);return/src/i.test(s)&&e.triggerSourceset(r.src),c},r.load=function(){var s=a.call(r);return Bw(e)||(e.triggerSourceset(""),FP(e)),s},r.currentSrc?e.triggerSourceset(r.currentSrc):Bw(e)||FP(e),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=a,r.setAttribute=i,Object.defineProperty(r,"src",n),r.resetSourceWatch_&&r.resetSourceWatch_()}}}},AS=function(e,r,n,i){i===void 0&&(i=!0);var a=function(c){return Object.defineProperty(e,r,{value:c,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var c=n();return a(c),c}};return i&&(s.set=a),Object.defineProperty(e,r,s)},At=function(t){Et.default(e,t);function e(n,i){var a;a=t.call(this,n,i)||this;var s=n.source,o=!1;if(a.featuresVideoFrameCallback=a.featuresVideoFrameCallback&&a.el_.tagName==="VIDEO",s&&(a.el_.currentSrc!==s.src||n.tag&&n.tag.initNetworkState_===3)?a.setSource(s):a.handleLateInit_(a.el_),n.enableSourceset&&a.setupSourcesetHandling_(),a.isScrubbing_=!1,a.el_.hasChildNodes()){for(var c=a.el_.childNodes,l=c.length,f=[];l--;){var g=c[l],m=g.nodeName.toLowerCase();m==="track"&&(a.featuresNativeTextTracks?(a.remoteTextTrackEls().addTrackElement_(g),a.remoteTextTracks().addTrack(g.track),a.textTracks().addTrack(g.track),!o&&!a.el_.hasAttribute("crossorigin")&&Ev(g.src)&&(o=!0)):f.push(g))}for(var y=0;y<f.length;y++)a.el_.removeChild(f[y])}return a.proxyNativeTracks_(),a.featuresNativeTextTracks&&o&&cr.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),a.restoreMetadataTracksInIOSNativePlayer_(),(Id||rS||h2)&&n.nativeControlsForTouch===!0&&a.setControls(!0),a.proxyWebkitFullscreen_(),a.triggerReady(),a}var r=e.prototype;return r.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},r.setupSourcesetHandling_=function(){GJ(this)},r.restoreMetadataTracksInIOSNativePlayer_=function(){var i=this.textTracks(),a,s=function(){a=[];for(var l=0;l<i.length;l++){var f=i[l];f.kind==="metadata"&&a.push({track:f,storedMode:f.mode})}};s(),i.addEventListener("change",s),this.on("dispose",function(){return i.removeEventListener("change",s)});var o=function c(){for(var l=0;l<a.length;l++){var f=a[l];f.track.mode==="disabled"&&f.track.mode!==f.storedMode&&(f.track.mode=f.storedMode)}i.removeEventListener("change",c)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",s),i.removeEventListener("change",o),i.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",s),i.addEventListener("change",s),i.removeEventListener("change",o)})},r.overrideNative_=function(i,a){var s=this;if(a===this["featuresNative"+i+"Tracks"]){var o=i.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(c){var l=s.el()[o+"Tracks"];l.removeEventListener(c,s[o+"TracksListeners_"][c])}),this["featuresNative"+i+"Tracks"]=!a,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},r.overrideNativeAudioTracks=function(i){this.overrideNative_("Audio",i)},r.overrideNativeVideoTracks=function(i){this.overrideNative_("Video",i)},r.proxyNativeTracksForType_=function(i){var a=this,s=ps[i],o=this.el()[s.getterName],c=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var l={change:function(m){var y={type:"change",target:c,currentTarget:c,srcElement:c};c.trigger(y),i==="text"&&a[Rd.remoteText.getterName]().trigger(y)},addtrack:function(m){c.addTrack(m.track)},removetrack:function(m){c.removeTrack(m.track)}},f=function(){for(var m=[],y=0;y<c.length;y++){for(var x=!1,I=0;I<o.length;I++)if(o[I]===c[y]){x=!0;break}x||m.push(c[y])}for(;m.length;)c.removeTrack(m.shift())};this[s.getterName+"Listeners_"]=l,Object.keys(l).forEach(function(g){var m=l[g];o.addEventListener(g,m),a.on("dispose",function(y){return o.removeEventListener(g,m)})}),this.on("loadstart",f),this.on("dispose",function(g){return a.off("loadstart",f)})}},r.proxyNativeTracks_=function(){var i=this;ps.names.forEach(function(a){i.proxyNativeTracksForType_(a)})},r.createEl=function(){var i=this.options_.tag;if(!i||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(i){var a=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(a,i),e.disposeMediaElement(i),i=a}else{i=wt.default.createElement("video");var s=this.options_.tag&&Qo(this.options_.tag),o=bi({},s);(!Id||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,S2(i,Hi(o,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Dd(i,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var c=["loop","muted","playsinline","autoplay"],l=0;l<c.length;l++){var f=c[l],g=this.options_[f];typeof g<"u"&&(g?Dd(i,f,f):_v(i,f),i[f]=g)}return i},r.handleLateInit_=function(i){if(!(i.networkState===0||i.networkState===3)){if(i.readyState===0){var a=!1,s=function(){a=!0};this.on("loadstart",s);var o=function(){a||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),a||this.trigger("loadstart")});return}var c=["loadstart"];c.push("loadedmetadata"),i.readyState>=2&&c.push("loadeddata"),i.readyState>=3&&c.push("canplay"),i.readyState>=4&&c.push("canplaythrough"),this.ready(function(){c.forEach(function(l){this.trigger(l)},this)})}},r.setScrubbing=function(i){this.isScrubbing_=i},r.scrubbing=function(){return this.isScrubbing_},r.setCurrentTime=function(i){try{this.isScrubbing_&&this.el_.fastSeek&&bv?this.el_.fastSeek(i):this.el_.currentTime=i}catch(a){cr(a,"Video is not ready. (Video.js)")}},r.duration=function(){var i=this;if(this.el_.duration===1/0&&au&&su&&this.el_.currentTime===0){var a=function s(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",s))};return this.on("timeupdate",a),NaN}return this.el_.duration||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFullscreen_=function(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){i.off("webkitbeginfullscreen",s),i.off("webkitendfullscreen",a)})}},r.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var i=Te.default.navigator&&Te.default.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},r.enterFullScreen=function(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)co(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},r.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},r.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},r.requestVideoFrameCallback=function(i){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(i):t.prototype.requestVideoFrameCallback.call(this,i)},r.cancelVideoFrameCallback=function(i){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(i):t.prototype.cancelVideoFrameCallback.call(this,i)},r.src=function(i){if(i===void 0)return this.el_.src;this.setSrc(i)},r.reset=function(){e.resetMediaElement(this.el_)},r.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},r.setControls=function(i){this.el_.controls=!!i},r.addTextTrack=function(i,a,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(i,a,s):t.prototype.addTextTrack.call(this,i,a,s)},r.createRemoteTextTrack=function(i){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,i);var a=wt.default.createElement("track");return i.kind&&(a.kind=i.kind),i.label&&(a.label=i.label),(i.language||i.srclang)&&(a.srclang=i.language||i.srclang),i.default&&(a.default=i.default),i.id&&(a.id=i.id),i.src&&(a.src=i.src),a},r.addRemoteTextTrack=function(i,a){var s=t.prototype.addRemoteTextTrack.call(this,i,a);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},r.removeRemoteTextTrack=function(i){if(t.prototype.removeRemoteTextTrack.call(this,i),this.featuresNativeTextTracks)for(var a=this.$$("track"),s=a.length;s--;)(i===a[s]||i===a[s].track)&&this.el().removeChild(a[s])},r.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var i={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),Te.default.performance&&typeof Te.default.performance.now=="function"?i.creationTime=Te.default.performance.now():Te.default.performance&&Te.default.performance.timing&&typeof Te.default.performance.timing.navigationStart=="number"&&(i.creationTime=Te.default.Date.now()-Te.default.performance.timing.navigationStart),i},e}(ii);AS(At,"TEST_VID",function(){if(Nd()){var t=wt.default.createElement("video"),e=wt.default.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}});At.isSupported=function(){try{At.TEST_VID.volume=.5}catch{return!1}return!!(At.TEST_VID&&At.TEST_VID.canPlayType)};At.canPlayType=function(t){return At.TEST_VID.canPlayType(t)};At.canPlaySource=function(t,e){return At.canPlayType(t.type)};At.canControlVolume=function(){try{var t=At.TEST_VID.volume;At.TEST_VID.volume=t/2+.1;var e=t!==At.TEST_VID.volume;return e&&ba?(Te.default.setTimeout(function(){At&&At.prototype&&(At.prototype.featuresVolumeControl=t!==At.TEST_VID.volume)}),!1):e}catch{return!1}};At.canMuteVolume=function(){try{var t=At.TEST_VID.muted;return At.TEST_VID.muted=!t,At.TEST_VID.muted?Dd(At.TEST_VID,"muted","muted"):_v(At.TEST_VID,"muted","muted"),t!==At.TEST_VID.muted}catch{return!1}};At.canControlPlaybackRate=function(){if(au&&su&&m2<58)return!1;try{var t=At.TEST_VID.playbackRate;return At.TEST_VID.playbackRate=t/2+.1,t!==At.TEST_VID.playbackRate}catch{return!1}};At.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(wt.default.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(wt.default.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(wt.default.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(wt.default.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};At.supportsNativeTextTracks=function(){return bv||ba&&su};At.supportsNativeVideoTracks=function(){return!!(At.TEST_VID&&At.TEST_VID.videoTracks)};At.supportsNativeAudioTracks=function(){return!!(At.TEST_VID&&At.TEST_VID.audioTracks)};At.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(t){var e=t[0],r=t[1];AS(At.prototype,e,function(){return At[r]()},!0)});At.prototype.featuresVolumeControl=At.canControlVolume();At.prototype.movingMediaElementInDOM=!ba;At.prototype.featuresFullscreenResize=!0;At.prototype.featuresProgressEvents=!0;At.prototype.featuresTimeupdateEvents=!0;At.prototype.featuresVideoFrameCallback=!!(At.TEST_VID&&At.TEST_VID.requestVideoFrameCallback);var ov;At.patchCanPlayType=function(){Zw>=4&&!g2&&!su&&(ov=At.TEST_VID&&At.TEST_VID.constructor.prototype.canPlayType,At.TEST_VID.constructor.prototype.canPlayType=function(t){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return t&&e.test(t)?"maybe":ov.call(this,t)})};At.unpatchCanPlayType=function(){var t=At.TEST_VID.constructor.prototype.canPlayType;return ov&&(At.TEST_VID.constructor.prototype.canPlayType=ov),t};At.patchCanPlayType();At.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};At.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),r=e.length;r--;)t.removeChild(e[r]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){At.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){At.prototype["set"+Ji(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){At.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){At.prototype["set"+Ji(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){At.prototype[t]=function(){return this.el_[t]()}});ii.withSourceHandlers(At);At.nativeSourceHandler={};At.nativeSourceHandler.canPlayType=function(t){try{return At.TEST_VID.canPlayType(t)}catch{return""}};At.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return At.nativeSourceHandler.canPlayType(t.type);if(t.src){var r=cS(t.src);return At.nativeSourceHandler.canPlayType("video/"+r)}return""};At.nativeSourceHandler.handleSource=function(t,e,r){e.setSrc(t.src)};At.nativeSourceHandler.dispose=function(){};At.registerSourceHandler(At.nativeSourceHandler);ii.registerTech("Html5",At);var gR=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Dw={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},qw=["tiny","xsmall","small","medium","large","xlarge","huge"],Jm={};qw.forEach(function(t){var e=t.charAt(0)==="x"?"x-"+t.substring(1):t;Jm[t]="vjs-layout-"+e});var zJ={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},rn=function(t){Et.default(e,t);function e(n,i,a){var s;if(n.id=n.id||i.id||"vjs_video_"+ou(),i=Hi(e.getTagSettings(n),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if(typeof n.closest=="function"){var o=n.closest("[lang]");o&&o.getAttribute&&(i.language=o.getAttribute("lang"))}else for(var c=n;c&&c.nodeType===1;){if(Qo(c).hasOwnProperty("lang")){i.language=c.getAttribute("lang");break}c=c.parentNode}if(s=t.call(this,null,i,a)||this,s.boundDocumentFullscreenChange_=function(m){return s.documentFullscreenChange_(m)},s.boundFullWindowOnEscKey_=function(m){return s.fullWindowOnEscKey(m)},s.boundUpdateStyleEl_=function(m){return s.updateStyleEl_(m)},s.boundApplyInitTime_=function(m){return s.applyInitTime_(m)},s.boundUpdateCurrentBreakpoint_=function(m){return s.updateCurrentBreakpoint_(m)},s.boundHandleTechClick_=function(m){return s.handleTechClick_(m)},s.boundHandleTechDoubleClick_=function(m){return s.handleTechDoubleClick_(m)},s.boundHandleTechTouchStart_=function(m){return s.handleTechTouchStart_(m)},s.boundHandleTechTouchMove_=function(m){return s.handleTechTouchMove_(m)},s.boundHandleTechTouchEnd_=function(m){return s.handleTechTouchEnd_(m)},s.boundHandleTechTap_=function(m){return s.handleTechTap_(m)},s.isFullscreen_=!1,s.log=d2(s.id_),s.fsApi_=rv,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=n,s.tagAttributes=n&&Qo(n),s.language(s.options_.language),i.languages){var l={};Object.getOwnPropertyNames(i.languages).forEach(function(m){l[m.toLowerCase()]=i.languages[m]}),s.languages_=l}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=i.poster||"",s.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],n.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(m){if(typeof s[m]!="function")throw new Error('plugin "'+m+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),sS(er.default(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(Ja(wt.default,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var f=bi(s.options_);i.plugins&&Object.keys(i.plugins).forEach(function(m){s[m](i.plugins[m])}),i.debug&&s.debug(!0),s.options_.playerOptions=f,s.middleware_=[],s.playbackRates(i.playbackRates),s.initChildren(),s.isAudio(n.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),Id&&s.addClass("vjs-touch-enabled"),ba||s.addClass("vjs-workinghover"),e.players[s.id_]=er.default(s);var g=u2.split(".")[0];return s.addClass("vjs-v"+g),s.userActive(!0),s.reportUserActivity(),s.one("play",function(m){return s.listenForUserActivity_(m)}),s.on("stageclick",function(m){return s.handleStageClick_(m)}),s.on("keydown",function(m){return s.handleKeyDown(m)}),s.on("languagechange",function(m){return s.handleLanguagechange(m)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}var r=e.prototype;return r.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),Qn(wt.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Qn(wt.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),dJ(this),ma.names.forEach(function(a){var s=ma[a],o=i[s.getterName]();o&&o.off&&o.off()}),t.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},r.createEl=function(){var i=this.tag,a,s=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?a=this.el_=i.parentNode:o||(a=this.el_=t.prototype.createEl.call(this,"div"));var c=Qo(i);if(o){for(a=this.el_=i,i=this.tag=wt.default.createElement("video");a.children.length;)i.appendChild(a.firstChild);Yc(a,"video-js")||tu(a,"video-js"),a.appendChild(i),s=this.playerElIngest_=a,Object.keys(a).forEach(function(x){try{i[x]=a[x]}catch{}})}if(i.setAttribute("tabindex","-1"),c.tabindex="-1",(ch||su&&v2)&&(i.setAttribute("role","application"),c.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in c&&delete c.width,"height"in c&&delete c.height,Object.getOwnPropertyNames(c).forEach(function(x){o&&x==="class"||a.setAttribute(x,c[x]),o&&i.setAttribute(x,c[x])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=a.player=this,this.addClass("vjs-paused"),Te.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=P2("vjs-styles-dimensions");var l=Ku(".vjs-styles-defaults"),f=Ku("head");f.insertBefore(this.styleEl_,l?l.nextSibling:f.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var g=i.getElementsByTagName("a"),m=0;m<g.length;m++){var y=g.item(m);tu(y,"vjs-hidden"),y.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!s&&i.parentNode.insertBefore(a,i),Rw(i,a),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a},r.crossOrigin=function(i){if(!i)return this.techGet_("crossOrigin");if(i!=="anonymous"&&i!=="use-credentials"){cr.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"');return}this.techCall_("setCrossOrigin",i)},r.width=function(i){return this.dimension("width",i)},r.height=function(i){return this.dimension("height",i)},r.dimension=function(i,a){var s=i+"_";if(a===void 0)return this[s]||0;if(a===""||a==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(a);if(isNaN(o)){cr.error('Improper value "'+a+'" supplied for for '+i);return}this[s]=o,this.updateStyleEl_()},r.fluid=function(i){var a=this;if(i===void 0)return!!this.fluid_;this.fluid_=!!i,ru(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),MY(this,function(){a.on(["playerreset","resize"],a.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},r.fill=function(i){if(i===void 0)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},r.aspectRatio=function(i){if(i===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},r.updateStyleEl_=function(){if(Te.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){var i=typeof this.width_=="number"?this.width_:this.options_.width,a=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(i>=0&&(s.width=i),a>=0&&(s.height=a));return}var o,c,l,f;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?l=this.aspectRatio_:this.videoWidth()>0?l=this.videoWidth()+":"+this.videoHeight():l="16:9";var g=l.split(":"),m=g[1]/g[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/m:o=this.videoWidth()||300,this.height_!==void 0?c=this.height_:c=o*m,/^[^a-zA-Z]/.test(this.id())?f="dimensions-"+this.id():f=this.id()+"-dimensions",this.addClass(f),R2(this.styleEl_,`
      .`+f+` {
        width: `+o+`px;
        height: `+c+`px;
      }

      .`+f+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+m*100+`%;
      }
    `)},r.loadTech_=function(i,a){var s=this;this.tech_&&this.unloadTech_();var o=Ji(i),c=i.charAt(0).toLowerCase()+i.slice(1);o!=="Html5"&&this.tag&&(ii.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var l=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(l=!1);var f={source:a,autoplay:l,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+c+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ma.names.forEach(function(m){var y=ma[m];f[y.getterName]=s[y.privateName]}),Hi(f,this.options_[o]),Hi(f,this.options_[c]),Hi(f,this.options_[i.toLowerCase()]),this.tag&&(f.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(f.startTime=this.cache_.currentTime);var g=ii.getTech(i);if(!g)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new g(f),this.tech_.ready(_i(this,this.handleTechReady_),!0),mP.jsonToTextTracks(this.textTracksJson_||[],this.tech_),gR.forEach(function(m){s.on(s.tech_,m,function(y){return s["handleTech"+Ji(m)+"_"](y)})}),Object.keys(Dw).forEach(function(m){s.on(s.tech_,m,function(y){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+Dw[m]+"_"].bind(s),event:y});return}s["handleTech"+Dw[m]+"_"](y)})}),this.on(this.tech_,"loadstart",function(m){return s.handleTechLoadStart_(m)}),this.on(this.tech_,"sourceset",function(m){return s.handleTechSourceset_(m)}),this.on(this.tech_,"waiting",function(m){return s.handleTechWaiting_(m)}),this.on(this.tech_,"ended",function(m){return s.handleTechEnded_(m)}),this.on(this.tech_,"seeking",function(m){return s.handleTechSeeking_(m)}),this.on(this.tech_,"play",function(m){return s.handleTechPlay_(m)}),this.on(this.tech_,"firstplay",function(m){return s.handleTechFirstPlay_(m)}),this.on(this.tech_,"pause",function(m){return s.handleTechPause_(m)}),this.on(this.tech_,"durationchange",function(m){return s.handleTechDurationChange_(m)}),this.on(this.tech_,"fullscreenchange",function(m,y){return s.handleTechFullscreenChange_(m,y)}),this.on(this.tech_,"fullscreenerror",function(m,y){return s.handleTechFullscreenError_(m,y)}),this.on(this.tech_,"enterpictureinpicture",function(m){return s.handleTechEnterPictureInPicture_(m)}),this.on(this.tech_,"leavepictureinpicture",function(m){return s.handleTechLeavePictureInPicture_(m)}),this.on(this.tech_,"error",function(m){return s.handleTechError_(m)}),this.on(this.tech_,"posterchange",function(m){return s.handleTechPosterChange_(m)}),this.on(this.tech_,"textdata",function(m){return s.handleTechTextData_(m)}),this.on(this.tech_,"ratechange",function(m){return s.handleTechRateChange_(m)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&Rw(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},r.unloadTech_=function(){var i=this;ma.names.forEach(function(a){var s=ma[a];i[s.privateName]=i[s.getterName]()}),this.textTracksJson_=mP.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},r.tech=function(i){return i===void 0&&cr.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},r.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},r.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},r.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},r.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},r.manualAutoplay_=function(i){var a=this;if(!(!this.tech_||typeof i!="string")){var s=function(){var l=a.muted();a.muted(!0);var f=function(){a.muted(l)};a.playTerminatedQueue_.push(f);var g=a.play();if(eh(g))return g.catch(function(m){throw f(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(m||""))})},o;if(i==="any"&&!this.muted()?(o=this.play(),eh(o)&&(o=o.catch(s))):i==="muted"&&!this.muted()?o=s():o=this.play(),!!eh(o))return o.then(function(){a.trigger({type:"autoplay-success",autoplay:i})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:i})})}},r.updateSourceCaches_=function(i){i===void 0&&(i="");var a=i,s="";typeof a!="string"&&(a=i.src,s=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=hJ(this,a)),this.cache_.source=bi({},i,{src:a,type:s});for(var o=this.cache_.sources.filter(function(y){return y.src&&y.src===a}),c=[],l=this.$$("source"),f=[],g=0;g<l.length;g++){var m=Qo(l[g]);c.push(m),m.src&&m.src===a&&f.push(m.src)}f.length&&!o.length?this.cache_.sources=c:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},r.handleTechSourceset_=function(i){var a=this;if(!this.changingSrc_){var s=function(f){return a.updateSourceCaches_(f)},o=this.currentSource().src,c=i.src;o&&!/^blob:/.test(o)&&/^blob:/.test(c)&&(!this.lastSource_||this.lastSource_.tech!==c&&this.lastSource_.player!==o)&&(s=function(){}),s(c),i.src||this.tech_.any(["sourceset","loadstart"],function(l){if(l.type!=="sourceset"){var f=a.techGet("currentSrc");a.lastSource_.tech=f,a.updateSourceCaches_(f)}})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},r.hasStarted=function(i){if(i===void 0)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},r.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},r.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(i){return i.callback(i.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},r.handleTechWaiting_=function(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime(),s=function o(){a!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",o))};this.on("timeupdate",s)},r.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},r.handleTechFirstPlay_=function(){this.options_.starttime&&(cr.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},r.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},r.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},r.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.handleTechClick_=function(i){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,i):this.paused()?co(this.play()):this.pause())},r.handleTechDoubleClick_=function(i){if(this.controls_){var a=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(i.target)});a||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},r.handleTechTap_=function(){this.userActive(!this.userActive())},r.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.handleTechTouchEnd_=function(i){i.cancelable&&i.preventDefault()},r.handleStageClick_=function(){this.reportUserActivity()},r.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.documentFullscreenChange_=function(i){var a=i.target.player;if(!(a&&a!==this)){var s=this.el(),o=wt.default[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},r.handleTechFullscreenChange_=function(i,a){var s=this;a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))},r.handleTechFullscreenError_=function(i,a){this.trigger("fullscreenerror",a)},r.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},r.handleTechEnterPictureInPicture_=function(i){this.isInPictureInPicture(!0)},r.handleTechLeavePictureInPicture_=function(i){this.isInPictureInPicture(!1)},r.handleTechError_=function(){var i=this.tech_.error();this.error(i)},r.handleTechTextData_=function(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},r.getCache=function(){return this.cache_},r.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},r.techCall_=function(i,a){this.ready(function(){if(i in cJ)return oJ(this.middleware_,this.tech_,i,a);if(i in TP)return SP(this.middleware_,this.tech_,i,a);try{this.tech_&&this.tech_[i](a)}catch(s){throw cr(s),s}},!0)},r.techGet_=function(i){if(!(!this.tech_||!this.tech_.isReady_)){if(i in uJ)return sJ(this.middleware_,this.tech_,i);if(i in TP)return SP(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(a){throw this.tech_[i]===void 0?(cr("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",a),a):a.name==="TypeError"?(cr("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",a),this.tech_.isReady_=!1,a):(cr(a),a)}}},r.play=function(){var i=this,a=this.options_.Promise||Te.default.Promise;return a?new a(function(s){i.play_(s)}):this.play_()},r.play_=function(i){var a=this;i===void 0&&(i=co),this.playCallbacks_.push(i);var s=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),o=!!(bv||ba);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(f){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&o&&this.load();return}var c=this.techGet_("play"),l=o&&this.hasClass("vjs-ended");l&&this.resetProgressBar_(),c===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(c)},r.runPlayTerminatedQueue_=function(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(a){a()})},r.runPlayCallbacks_=function(i){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(s){s(i)})},r.pause=function(){this.techCall_("pause")},r.paused=function(){return this.techGet_("paused")!==!1},r.played=function(){return this.techGet_("played")||Jc(0,0)},r.scrubbing=function(i){if(typeof i>"u")return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.currentTime=function(i){if(typeof i<"u"){if(i<0&&(i=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",i),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},r.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},r.duration=function(i){if(i===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;i=parseFloat(i),i<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},r.remainingTime=function(){return this.duration()-this.currentTime()},r.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.buffered=function(){var i=this.techGet_("buffered");return(!i||!i.length)&&(i=Jc(0,0)),i},r.bufferedPercent=function(){return $2(this.buffered(),this.duration())},r.bufferedEnd=function(){var i=this.buffered(),a=this.duration(),s=i.end(i.length-1);return s>a&&(s=a),s},r.volume=function(i){var a;if(i!==void 0){a=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=a,this.techCall_("setVolume",a),a>0&&this.lastVolume_(a);return}return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a},r.muted=function(i){if(i!==void 0){this.techCall_("setMuted",i);return}return this.techGet_("muted")||!1},r.defaultMuted=function(i){return i!==void 0?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},r.lastVolume_=function(i){if(i!==void 0&&i!==0){this.cache_.lastVolume=i;return}return this.cache_.lastVolume},r.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.isFullscreen=function(i){if(i!==void 0){var a=this.isFullscreen_;this.isFullscreen_=!!i,this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},r.requestFullscreen=function(i){var a=this.options_.Promise||Te.default.Promise;if(a){var s=this;return new a(function(o,c){function l(){s.off("fullscreenerror",g),s.off("fullscreenchange",f)}function f(){l(),o()}function g(y,x){l(),c(x)}s.one("fullscreenchange",f),s.one("fullscreenerror",g);var m=s.requestFullscreenHelper_(i);m&&(m.then(l,l),m.then(o,c))})}return this.requestFullscreenHelper_()},r.requestFullscreenHelper_=function(i){var a=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},i!==void 0&&(s=i)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return a.isFullscreen(!0)},function(){return a.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},r.exitFullscreen=function(){var i=this.options_.Promise||Te.default.Promise;if(i){var a=this;return new i(function(s,o){function c(){a.off("fullscreenerror",f),a.off("fullscreenchange",l)}function l(){c(),s()}function f(m,y){c(),o(y)}a.one("fullscreenchange",l),a.one("fullscreenerror",f);var g=a.exitFullscreenHelper_();g&&(g.then(c,c),g.then(s,o))})}return this.exitFullscreenHelper_()},r.exitFullscreenHelper_=function(){var i=this;if(this.fsApi_.requestFullscreen){var a=wt.default[this.fsApi_.exitFullscreen]();return a&&co(a.then(function(){return i.isFullscreen(!1)})),a}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},r.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=wt.default.documentElement.style.overflow,Ja(wt.default,"keydown",this.boundFullWindowOnEscKey_),wt.default.documentElement.style.overflow="hidden",tu(wt.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},r.fullWindowOnEscKey=function(i){ir.default.isEventKey(i,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},r.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Qn(wt.default,"keydown",this.boundFullWindowOnEscKey_),wt.default.documentElement.style.overflow=this.docOrigOverflow,lh(wt.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},r.disablePictureInPicture=function(i){if(i===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},r.isInPictureInPicture=function(i){if(i!==void 0){this.isInPictureInPicture_=!!i,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},r.requestPictureInPicture=function(){if("pictureInPictureEnabled"in wt.default&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},r.exitPictureInPicture=function(){if("pictureInPictureEnabled"in wt.default)return wt.default.exitPictureInPicture()},r.handleKeyDown=function(i){var a=this.options_.userActions;if(!(!a||!a.hotkeys)){var s=function(c){var l=c.tagName.toLowerCase();if(c.isContentEditable)return!0;var f=["button","checkbox","hidden","radio","reset","submit"];if(l==="input")return f.indexOf(c.type)===-1;var g=["textarea"];return g.indexOf(l)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof a.hotkeys=="function"?a.hotkeys.call(this,i):this.handleHotkeys(i))}},r.handleHotkeys=function(i){var a=this.options_.userActions?this.options_.userActions.hotkeys:{},s=a.fullscreenKey,o=s===void 0?function(I){return ir.default.isEventKey(I,"f")}:s,c=a.muteKey,l=c===void 0?function(I){return ir.default.isEventKey(I,"m")}:c,f=a.playPauseKey,g=f===void 0?function(I){return ir.default.isEventKey(I,"k")||ir.default.isEventKey(I,"Space")}:f;if(o.call(this,i)){i.preventDefault(),i.stopPropagation();var m=mt.getComponent("FullscreenToggle");wt.default[this.fsApi_.fullscreenEnabled]!==!1&&m.prototype.handleClick.call(this,i)}else if(l.call(this,i)){i.preventDefault(),i.stopPropagation();var y=mt.getComponent("MuteToggle");y.prototype.handleClick.call(this,i)}else if(g.call(this,i)){i.preventDefault(),i.stopPropagation();var x=mt.getComponent("PlayToggle");x.prototype.handleClick.call(this,i)}},r.canPlayType=function(i){for(var a,s=0,o=this.options_.techOrder;s<o.length;s++){var c=o[s],l=ii.getTech(c);if(l||(l=mt.getComponent(c)),!l){cr.error('The "'+c+'" tech is undefined. Skipped browser support check for that tech.');continue}if(l.isSupported()&&(a=l.canPlayType(i),a))return a}return""},r.selectSource=function(i){var a=this,s=this.options_.techOrder.map(function(g){return[g,ii.getTech(g)]}).filter(function(g){var m=g[0],y=g[1];return y?y.isSupported():(cr.error('The "'+m+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(m,y,x){var I;return m.some(function(A){return y.some(function(F){if(I=x(A,F),I)return!0})}),I},c,l=function(m){return function(y,x){return m(x,y)}},f=function(m,y){var x=m[0],I=m[1];if(I.canPlaySource(y,a.options_[x.toLowerCase()]))return{source:y,tech:x}};return this.options_.sourceOrder?c=o(i,s,l(f)):c=o(s,i,f),c||!1},r.handleSrc_=function(i,a){var s=this;if(typeof i>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=gJ(i);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,a||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),nJ(this,o[0],function(f,g){s.middleware_=g,a||(s.cache_.sources=o),s.updateSourceCaches_(f);var m=s.src_(f);if(m){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),s.triggerReady();return}aJ(g,s.tech_)}),this.options_.retryOnError&&o.length>1){var c=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},l=function(){s.off("error",c)};this.one("error",c),this.one("playing",l),this.resetRetryOnError_=function(){s.off("error",c),s.off("playing",l)}}},r.src=function(i){return this.handleSrc_(i,!1)},r.src_=function(i){var a=this,s=this.selectSource([i]);return s?BY(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){a.changingSrc_=!1}),!1):!0},r.load=function(){this.techCall_("load")},r.reset=function(){var i=this,a=this.options_.Promise||Te.default.Promise;if(this.paused()||!a)this.doReset_();else{var s=this.play();co(s.then(function(){return i.doReset_()}))}},r.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),ru(this)&&this.trigger("playerreset")},r.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},r.resetProgressBar_=function(){this.currentTime(0);var i=this.controlBar||{},a=i.durationDisplay,s=i.remainingTimeDisplay;a&&a.updateContent(),s&&s.updateContent()},r.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},r.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},r.currentSources=function(){var i=this.currentSource(),a=[];return Object.keys(i).length!==0&&a.push(i),this.cache_.sources||a},r.currentSource=function(){return this.cache_.source||{}},r.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.preload=function(i){if(i!==void 0){this.techCall_("setPreload",i),this.options_.preload=i;return}return this.techGet_("preload")},r.autoplay=function(i){if(i===void 0)return this.options_.autoplay||!1;var a;typeof i=="string"&&/(any|play|muted)/.test(i)||i===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_(typeof i=="string"?i:"play"),a=!1):i?this.options_.autoplay=!0:this.options_.autoplay=!1,a=typeof a>"u"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},r.playsinline=function(i){return i!==void 0?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},r.loop=function(i){if(i!==void 0){this.techCall_("setLoop",i),this.options_.loop=i;return}return this.techGet_("loop")},r.poster=function(i){if(i===void 0)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},r.controls=function(i){if(i===void 0)return!!this.controls_;i=!!i,this.controls_!==i&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.usingNativeControls=function(i){if(i===void 0)return!!this.usingNativeControls_;i=!!i,this.usingNativeControls_!==i&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.error=function(i){var a=this;if(i===void 0)return this.error_||null;if(Wu("beforeerror").forEach(function(o){var c=o(a,i);if(!(iu(c)&&!Array.isArray(c)||typeof c=="string"||typeof c=="number"||c===null)){a.log.error("please return a value that MediaError expects in beforeerror hooks");return}i=c}),this.options_.suppressNotSupportedError&&i&&i.code===4){var s=function(){this.error(i)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(i===null){this.error_=i,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new ya(i),this.addClass("vjs-error"),cr.error("(CODE:"+this.error_.code+" "+ya.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Wu("error").forEach(function(o){return o(a,a.error_)})},r.reportUserActivity=function(i){this.userActivity_=!0},r.userActive=function(i){if(i===void 0)return this.userActive_;if(i=!!i,i!==this.userActive_){if(this.userActive_=i,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},r.listenForUserActivity_=function(){var i,a,s,o=_i(this,this.reportUserActivity),c=function(x){(x.screenX!==a||x.screenY!==s)&&(a=x.screenX,s=x.screenY,o())},l=function(){o(),this.clearInterval(i),i=this.setInterval(o,250)},f=function(x){o(),this.clearInterval(i)};this.on("mousedown",l),this.on("mousemove",c),this.on("mouseup",f),this.on("mouseleave",f);var g=this.getChild("controlBar");g&&!ba&&!au&&(g.on("mouseenter",function(y){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),g.on("mouseleave",function(y){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var m;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(m);var y=this.options_.inactivityTimeout;y<=0||(m=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},y))}},250)},r.playbackRate=function(i){if(i!==void 0){this.techCall_("setPlaybackRate",i);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},r.defaultPlaybackRate=function(i){return i!==void 0?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.isAudio=function(i){if(i!==void 0){this.isAudio_=!!i;return}return!!this.isAudio_},r.enableAudioOnlyUI_=function(){var i=this;this.addClass("vjs-audio-only-mode");var a=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();a.forEach(function(c){c!==s&&c.el_&&!c.hasClass("vjs-hidden")&&(c.hide(),i.audioOnlyCache_.hiddenChildren.push(c))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},r.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(i){return i.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},r.audioOnlyMode=function(i){var a=this;if(typeof i!="boolean"||i===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=i;var s=this.options_.Promise||Te.default.Promise;if(s){if(i){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return a.enableAudioOnlyUI_()})}return s.resolve().then(function(){return a.disableAudioOnlyUI_()})}i?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},r.enablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.disablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.audioPosterMode=function(i){var a=this;if(typeof i!="boolean"||i===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=i;var s=this.options_.Promise||Te.default.Promise;if(s){if(i){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.disablePosterModeUI_()})}if(i){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},r.addTextTrack=function(i,a,s){if(this.tech_)return this.tech_.addTextTrack(i,a,s)},r.addRemoteTextTrack=function(i,a){if(this.tech_)return this.tech_.addRemoteTextTrack(i,a)},r.removeRemoteTextTrack=function(i){i===void 0&&(i={});var a=i,s=a.track;if(s||(s=i),this.tech_)return this.tech_.removeRemoteTextTrack(s)},r.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.language=function(i){if(i===void 0)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),ru(this)&&this.trigger("languagechange"))},r.languages=function(){return bi(e.prototype.options_.languages,this.languages_)},r.toJSON=function(){var i=bi(this.options_),a=i.tracks;i.tracks=[];for(var s=0;s<a.length;s++){var o=a[s];o=bi(o),o.player=void 0,i.tracks[s]=o}return i},r.createModal=function(i,a){var s=this;a=a||{},a.content=i||"";var o=new Ud(this,a);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},r.updateCurrentBreakpoint_=function(){if(this.responsive())for(var i=this.currentBreakpoint(),a=this.currentWidth(),s=0;s<qw.length;s++){var o=qw[s],c=this.breakpoints_[o];if(a<=c){if(i===o)return;i&&this.removeClass(Jm[i]),this.addClass(Jm[o]),this.breakpoint_=o;break}}},r.removeCurrentBreakpoint_=function(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},r.breakpoints=function(i){return i===void 0?Hi(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Hi({},zJ,i),this.updateCurrentBreakpoint_(),Hi(this.breakpoints_))},r.responsive=function(i){if(i===void 0)return this.responsive_;i=!!i;var a=this.responsive_;if(i!==a)return this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i},r.currentBreakpoint=function(){return this.breakpoint_},r.currentBreakpointClass=function(){return Jm[this.breakpoint_]||""},r.loadMedia=function(i,a){var s=this;if(!(!i||typeof i!="object")){this.reset(),this.cache_.media=bi(i);var o=this.cache_.media,c=o.artwork,l=o.poster,f=o.src,g=o.textTracks;!c&&l&&(this.cache_.media.artwork=[{src:l,type:av(l)}]),f&&this.src(f),l&&this.poster(l),Array.isArray(g)&&g.forEach(function(m){return s.addRemoteTextTrack(m,!1)}),this.ready(a)}},r.getMedia=function(){if(!this.cache_.media){var i=this.poster(),a=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(c){return{kind:c.kind,label:c.label,language:c.language,src:c.src}}),o={src:a,textTracks:s};return i&&(o.poster=i,o.artwork=[{src:o.poster,type:av(o.poster)}]),o}return bi(this.cache_.media)},e.getTagSettings=function(i){var a={sources:[],tracks:[]},s=Qo(i),o=s["data-setup"];if(Yc(i,"vjs-fill")&&(s.fill=!0),Yc(i,"vjs-fluid")&&(s.fluid=!0),o!==null){var c=gY.default(o||"{}"),l=c[0],f=c[1];l&&cr.error(l),Hi(s,f)}if(Hi(a,s),i.hasChildNodes())for(var g=i.childNodes,m=0,y=g.length;m<y;m++){var x=g[m],I=x.nodeName.toLowerCase();I==="source"?a.sources.push(Qo(x)):I==="track"&&a.tracks.push(Qo(x))}return a},r.flexNotSupported_=function(){var i=wt.default.createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},r.debug=function(i){if(i===void 0)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},r.playbackRates=function(i){if(i===void 0)return this.cache_.playbackRates;Array.isArray(i)&&i.every(function(a){return typeof a=="number"})&&(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},e}(mt);ma.names.forEach(function(t){var e=ma[t];rn.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});rn.prototype.crossorigin=rn.prototype.crossOrigin;rn.players={};var Xp=Te.default.navigator;rn.prototype.options_={techOrder:ii.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Xp&&(Xp.languages&&Xp.languages[0]||Xp.userLanguage||Xp.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(t){rn.prototype[t]=function(){return this.techGet_(t)}});gR.forEach(function(t){rn.prototype["handleTech"+Ji(t)+"_"]=function(){return this.trigger(t)}});mt.registerComponent("Player",rn);var uv="plugin",Ad="activePlugins_",Td={},cv=function(e){return Td.hasOwnProperty(e)},Qm=function(e){return cv(e)?Td[e]:void 0},mR=function(e,r){e[Ad]=e[Ad]||{},e[Ad][r]=!0},lv=function(e,r,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,r),e.trigger(i+":"+r.name,r)},VJ=function(e,r){var n=function(){lv(this,{name:e,plugin:r,instance:null},!0);var a=r.apply(this,arguments);return mR(this,e),lv(this,{name:e,plugin:r,instance:a}),a};return Object.keys(r).forEach(function(i){n[i]=r[i]}),n},MP=function(e,r){return r.prototype.name=e,function(){lv(this,{name:e,plugin:r,instance:null},!0);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=mY.default(r,[this].concat(i));return this[e]=function(){return s},lv(this,s.getEventHash()),s}},po=function(){function t(r){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=r,this.log||(this.log=this.player.log.createLogger(this.name)),sS(this),delete this.trigger,U2(this,this.constructor.defaultState),mR(r,this.name),this.dispose=this.dispose.bind(this),r.on("dispose",this.dispose)}var e=t.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(n){return n===void 0&&(n={}),n.name=this.name,n.plugin=this.constructor,n.instance=this,n},e.trigger=function(n,i){return i===void 0&&(i={}),Md(this.eventBusEl_,n,this.getEventHash(i))},e.handleStateChanged=function(n){},e.dispose=function(){var n=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[Ad][n]=!1,this.player=this.state=null,i[n]=MP(n,Td[n])},t.isBasic=function(n){var i=typeof n=="string"?Qm(n):n;return typeof i=="function"&&!t.prototype.isPrototypeOf(i.prototype)},t.registerPlugin=function(n,i){if(typeof n!="string")throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(cv(n))cr.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(rn.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if(typeof i!="function")throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof i+".");return Td[n]=i,n!==uv&&(t.isBasic(i)?rn.prototype[n]=VJ(n,i):rn.prototype[n]=MP(n,i)),i},t.deregisterPlugin=function(n){if(n===uv)throw new Error("Cannot de-register base plugin.");cv(n)&&(delete Td[n],delete rn.prototype[n])},t.getPlugins=function(n){n===void 0&&(n=Object.keys(Td));var i;return n.forEach(function(a){var s=Qm(a);s&&(i=i||{},i[a]=s)}),i},t.getPluginVersion=function(n){var i=Qm(n);return i&&i.VERSION||""},t}();po.getPlugin=Qm;po.BASE_PLUGIN_NAME=uv;po.registerPlugin(uv,po);rn.prototype.usingPlugin=function(t){return!!this[Ad]&&this[Ad][t]===!0};rn.prototype.hasPlugin=function(t){return!!cv(t)};var UP=!1,WJ=function(e,r){r===void 0&&(r={}),UP||(cr.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),UP=!0);var n=function(){e.apply(this,arguments)},i={};typeof r=="object"?(r.constructor!==Object.prototype.constructor&&(n=r.constructor),i=r):typeof r=="function"&&(n=r),vY.default(n,e),e&&(n.super_=e);for(var a in i)i.hasOwnProperty(a)&&(n.prototype[a]=i[a]);return n},vR=function(e){return e.indexOf("#")===0?e.slice(1):e};function Oe(t,e,r){var n=Oe.getPlayer(t);if(n)return e&&cr.warn('Player "'+t+'" is already initialised. Options will not be applied.'),r&&n.ready(r),n;var i=typeof t=="string"?Ku("#"+vR(t)):t;if(!Fd(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&cr.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Wu("beforesetup").forEach(function(s){var o=s(i,bi(e));if(!iu(o)||Array.isArray(o)){cr.error("please return an object in beforesetup hooks");return}e=bi(e,o)});var a=mt.getComponent("Player");return n=new a(i,e,r),Wu("setup").forEach(function(s){return s(n)}),n}Oe.hooks_=Zo;Oe.hooks=Wu;Oe.hook=wY;Oe.hookOnce=SY;Oe.removeHook=c2;Te.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Nd()&&(Yp=Ku(".vjs-styles-defaults"),Yp||(Yp=P2("vjs-styles-defaults"),zm=Ku("head"),zm&&zm.insertBefore(Yp,zm.firstChild),R2(Yp,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)));var Yp,zm;Nw(1,Oe);Oe.VERSION=u2;Oe.options=rn.prototype.options_;Oe.getPlayers=function(){return rn.players};Oe.getPlayer=function(t){var e=rn.players,r;if(typeof t=="string"){var n=vR(t),i=e[n];if(i)return i;r=Ku("#"+n)}else r=t;if(Fd(r)){var a=r,s=a.player,o=a.playerId;if(s||e[o])return s||e[o]}};Oe.getAllPlayers=function(){return Object.keys(rn.players).map(function(t){return rn.players[t]}).filter(Boolean)};Oe.players=rn.players;Oe.getComponent=mt.getComponent;Oe.registerComponent=function(t,e){ii.isTech(e)&&cr.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),mt.registerComponent.call(mt,t,e)};Oe.getTech=ii.getTech;Oe.registerTech=ii.registerTech;Oe.use=iJ;Object.defineProperty(Oe,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(Oe.middleware,"TERMINATOR",{value:nv,writeable:!1,enumerable:!0});Oe.browser=kY;Oe.TOUCH_ENABLED=Id;Oe.extend=WJ;Oe.mergeOptions=bi;Oe.bind=_i;Oe.registerPlugin=po.registerPlugin;Oe.deregisterPlugin=po.deregisterPlugin;Oe.plugin=function(t,e){return cr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),po.registerPlugin(t,e)};Oe.getPlugins=po.getPlugins;Oe.getPlugin=po.getPlugin;Oe.getPluginVersion=po.getPluginVersion;Oe.addLanguage=function(t,e){var r;return t=(""+t).toLowerCase(),Oe.options.languages=bi(Oe.options.languages,(r={},r[t]=e,r)),Oe.options.languages[t]};Oe.log=cr;Oe.createLogger=d2;Oe.createTimeRange=Oe.createTimeRanges=Jc;Oe.formatTime=Ld;Oe.setFormatTime=SJ;Oe.resetFormatTime=TJ;Oe.parseUrl=uS;Oe.isCrossOrigin=Ev;Oe.EventTarget=kn;Oe.on=Ja;Oe.one=Tv;Oe.off=Qn;Oe.trigger=Md;Oe.xhr=o2.default;Oe.TextTrack=dh;Oe.AudioTrack=j2;Oe.VideoTrack=H2;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){Oe[t]=function(){return cr.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),D2[t].apply(null,arguments)}});Oe.computedStyle=nh;Oe.dom=D2;Oe.url=ZY;Oe.defineLazyProperty=AS;Oe.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Is=yY.default,dv=function(e,r,n){return e&&n&&n.responseURL&&r!==n.responseURL?n.responseURL:r},Ps=function(e){return Oe.log.debug?Oe.log.debug.bind(Oe,"VHS:",e+" >"):function(){}},Xu=1/30,lo=Xu*3,yR=function(e,r){var n=[],i;if(e&&e.length)for(i=0;i<e.length;i++)r(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Oe.createTimeRanges(n)},Cd=function(e,r){return yR(e,function(n,i){return n-lo<=r&&i+lo>=r})},Vm=function(e,r){return yR(e,function(n){return n-Xu>=r})},KJ=function(e){if(e.length<2)return Oe.createTimeRanges();for(var r=[],n=1;n<e.length;n++){var i=e.end(n-1),a=e.start(n);r.push([i,a])}return Oe.createTimeRanges(r)},XJ=function(e,r){var n=null,i=null,a=0,s=[],o=[];if(!e||!e.length||!r||!r.length)return Oe.createTimeRange();for(var c=e.length;c--;)s.push({time:e.start(c),type:"start"}),s.push({time:e.end(c),type:"end"});for(c=r.length;c--;)s.push({time:r.start(c),type:"start"}),s.push({time:r.end(c),type:"end"});for(s.sort(function(l,f){return l.time-f.time}),c=0;c<s.length;c++)s[c].type==="start"?(a++,a===2&&(n=s[c].time)):s[c].type==="end"&&(a--,a===1&&(i=s[c].time)),n!==null&&i!==null&&(o.push([n,i]),n=null,i=null);return Oe.createTimeRanges(o)},bR=function(e){var r=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)r.push(e.start(n)+" => "+e.end(n));return r.join(", ")},YJ=function(e,r,n){n===void 0&&(n=1);var i=e.length?e.end(e.length-1):0;return(i-r)/n},Kc=function(e){for(var r=[],n=0;n<e.length;n++)r.push({start:e.start(n),end:e.end(n)});return r},JJ=function(e,r){if(e===r)return!1;if(!e&&r||!r&&e||e.length!==r.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==r.start(n)||e.end(n)!==r.end(n))return!0;return!1},$P=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},kS=function(e,r){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var a=e.start(i),s=e.end(i);if(!(r>s)){if(r>a&&r<=s){n+=s-r;continue}n+=s-a}}return n},BP=Oe.createTimeRange,IS=function(e,r){if(!r.preload)return r.duration;var n=0;return(r.parts||[]).forEach(function(i){n+=i.duration}),(r.preloadHints||[]).forEach(function(i){i.type==="PART"&&(n+=e.partTargetDuration)}),n},jw=function(e){return(e.segments||[]).reduce(function(r,n,i){return n.parts?n.parts.forEach(function(a,s){r.push({duration:a.duration,segmentIndex:i,partIndex:s,part:a,segment:n})}):r.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),r},[])},_R=function(e){var r=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return r&&r.parts||[]},wR=function(e){var r=e.preloadSegment;if(r){var n=r.parts,i=r.preloadHints,a=(i||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return a+=n&&n.length?n.length:0,a}},SR=function(e,r){if(r.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=_R(r).length>0;return n&&r.serverControl&&r.serverControl.partHoldBack?r.serverControl.partHoldBack:n&&r.partTargetDuration?r.partTargetDuration*3:r.serverControl&&r.serverControl.holdBack?r.serverControl.holdBack:r.targetDuration?r.targetDuration*3:0},QJ=function(e,r){var n=0,i=r-e.mediaSequence,a=e.segments[i];if(a){if(typeof a.start<"u")return{result:a.start,precise:!0};if(typeof a.end<"u")return{result:a.end-a.duration,precise:!0}}for(;i--;){if(a=e.segments[i],typeof a.end<"u")return{result:n+a.end,precise:!0};if(n+=IS(e,a),typeof a.start<"u")return{result:n+a.start,precise:!0}}return{result:n,precise:!1}},ZJ=function(e,r){for(var n=0,i,a=r-e.mediaSequence;a<e.segments.length;a++){if(i=e.segments[a],typeof i.start<"u")return{result:i.start-n,precise:!0};if(n+=IS(e,i),typeof i.end<"u")return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},TR=function(e,r,n){if(typeof r>"u"&&(r=e.mediaSequence+e.segments.length),r<e.mediaSequence)return 0;var i=QJ(e,r);if(i.precise)return i.result;var a=ZJ(e,r);return a.precise?a.result:i.result+n},CR=function(e,r,n){if(!e)return 0;if(typeof n!="number"&&(n=0),typeof r>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Te.default.Infinity}return TR(e,r,n)},th=function(e){var r=e.defaultDuration,n=e.durationList,i=e.startIndex,a=e.endIndex,s=0;if(i>a){var o=[a,i];i=o[0],a=o[1]}if(i<0){for(var c=i;c<Math.min(0,a);c++)s+=r;i=0}for(var l=i;l<a;l++)s+=n[l].duration;return s},ER=function(e,r,n,i){if(!e||!e.segments)return null;if(e.endList)return CR(e);if(r===null)return null;r=r||0;var a=TR(e,e.mediaSequence+e.segments.length,r);return n&&(i=typeof i=="number"?i:SR(null,e),a-=i),Math.max(0,a)},eQ=function(e,r,n){var i=!0,a=r||0,s=ER(e,r,i,n);return s===null?BP():BP(a,s)},tQ=function(e){for(var r=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,a=e.startingPartIndex,s=e.startTime,o=e.experimentalExactManifestTimings,c=n-s,l=jw(r),f=0,g=0;g<l.length;g++){var m=l[g];if(i===m.segmentIndex&&!(typeof a=="number"&&typeof m.partIndex=="number"&&a!==m.partIndex)){f=g;break}}if(c<0){if(f>0)for(var y=f-1;y>=0;y--){var x=l[y];if(c+=x.duration,o){if(c<0)continue}else if(c+Xu<=0)continue;return{partIndex:x.partIndex,segmentIndex:x.segmentIndex,startTime:s-th({defaultDuration:r.targetDuration,durationList:l,startIndex:f,endIndex:y})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n}}if(f<0){for(var I=f;I<0;I++)if(c-=r.targetDuration,c<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n};f=0}for(var A=f;A<l.length;A++){var F=l[A];if(c-=F.duration,o){if(c>0)continue}else if(c-Xu>=0)continue;return{partIndex:F.partIndex,segmentIndex:F.segmentIndex,startTime:s+th({defaultDuration:r.targetDuration,durationList:l,startIndex:f,endIndex:A})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:n}},xR=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},DS=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Iv=function(e){var r=xR(e);return!e.disabled&&!r},rQ=function(e){return e.disabled},iQ=function(e){for(var r=0;r<e.segments.length;r++)if(e.segments[r].key)return!0;return!1},AR=function(e,r){return r.attributes&&r.attributes[e]},nQ=function(e,r,n,i){if(i===void 0&&(i=0),!AR("BANDWIDTH",n))return NaN;var a=e*n.attributes.BANDWIDTH;return(a-i*8)/r},Hw=function(e,r){if(e.playlists.length===1)return!0;var n=r.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(i){return Iv(i)?(i.attributes.BANDWIDTH||0)<n:!1}).length===0},OS=function(e,r){return!e&&!r||!e&&r||e&&!r?!1:!!(e===r||e.id&&r.id&&e.id===r.id||e.resolvedUri&&r.resolvedUri&&e.resolvedUri===r.resolvedUri||e.uri&&r.uri&&e.uri===r.uri)},qP=function(e,r){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var a in n){for(var s in n[a])if(i=r(n[a][s]),i)break;if(i)break}return!!i},hh=function(e){if(!e||!e.playlists||!e.playlists.length){var r=qP(e,function(s){return s.playlists&&s.playlists.length||s.uri});return r}for(var n=function(o){var c=e.playlists[o],l=c.attributes&&c.attributes.CODECS;if(l&&l.split(",").every(function(g){return ci.isAudioCodec(g)}))return"continue";var f=qP(e,function(g){return OS(c,g)});return f?"continue":{v:!1}},i=0;i<e.playlists.length;i++){var a=n(i);if(a!=="continue"&&typeof a=="object")return a.v}return!0},Fa={liveEdgeDelay:SR,duration:CR,seekable:eQ,getMediaInfoForTime:tQ,isEnabled:Iv,isDisabled:rQ,isBlacklisted:xR,isIncompatible:DS,playlistEnd:ER,isAes:iQ,hasAttribute:AR,estimateSegmentRequestTime:nQ,isLowestEnabledRendition:Hw,isAudioOnly:hh,playlistMatch:OS,segmentDurationWithParts:IS},kR=Oe.log,PS=function(e,r){return e+"-"+r},aQ=function(e,r,n){return"placeholder-uri-"+e+"-"+r+"-"+n},sQ=function(e){var r=e.onwarn,n=e.oninfo,i=e.manifestString,a=e.customTagParsers,s=a===void 0?[]:a,o=e.customTagMappers,c=o===void 0?[]:o,l=e.experimentalLLHLS,f=new dY.Parser;r&&f.on("warn",r),n&&f.on("info",n),s.forEach(function(I){return f.addParser(I)}),c.forEach(function(I){return f.addTagMapper(I)}),f.push(i),f.end();var g=f.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(I){g.hasOwnProperty(I)&&delete g[I]}),g.segments&&g.segments.forEach(function(I){["parts","preloadHints"].forEach(function(A){I.hasOwnProperty(A)&&delete I[A]})})),!g.targetDuration){var m=10;g.segments&&g.segments.length&&(m=g.segments.reduce(function(I,A){return Math.max(I,A.duration)},0)),r&&r("manifest has no targetDuration defaulting to "+m),g.targetDuration=m}var y=_R(g);if(y.length&&!g.partTargetDuration){var x=y.reduce(function(I,A){return Math.max(I,A.duration)},0);r&&(r("manifest has no partTargetDuration defaulting to "+x),kR.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),g.partTargetDuration=x}return g},jd=function(e,r){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var a in e.mediaGroups[n][i]){var s=e.mediaGroups[n][i][a];r(s,n,i,a)}})},IR=function(e){var r=e.playlist,n=e.uri,i=e.id;r.id=i,r.playlistErrors_=0,n&&(r.uri=n),r.attributes=r.attributes||{}},oQ=function(e){for(var r=e.playlists.length;r--;){var n=e.playlists[r];IR({playlist:n,id:PS(r,n.uri)}),n.resolvedUri=Is(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||kR.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},uQ=function(e){jd(e,function(r){r.uri&&(r.resolvedUri=Is(e.uri,r.uri))})},cQ=function(e,r){var n=PS(0,r),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Te.default.location.href,resolvedUri:Te.default.location.href,playlists:[{uri:r,id:n,resolvedUri:r,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[r]=i.playlists[0],i},DR=function(e,r,n){n===void 0&&(n=aQ),e.uri=r;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var a="placeholder-uri-"+i;e.playlists[i].uri=a}var s=hh(e);jd(e,function(o,c,l,f){if(!o.playlists||!o.playlists.length){if(s&&c==="AUDIO"&&!o.uri)for(var g=0;g<e.playlists.length;g++){var m=e.playlists[g];if(m.attributes&&m.attributes.AUDIO&&m.attributes.AUDIO===l)return}o.playlists=[Zc.default({},o)]}o.playlists.forEach(function(y,x){var I=n(c,l,f,y),A=PS(x,I);y.uri?y.resolvedUri=y.resolvedUri||Is(e.uri,y.uri):(y.uri=x===0?I:A,y.resolvedUri=y.uri),y.id=y.id||A,y.attributes=y.attributes||{},e.playlists[y.id]=y,e.playlists[y.uri]=y})}),oQ(e),uQ(e)},fv=Oe.mergeOptions,lQ=Oe.EventTarget,dQ=function(e,r){if(r.endList||!r.serverControl)return e;var n={};if(r.serverControl.canBlockReload){var i=r.preloadSegment,a=r.mediaSequence+r.segments.length;if(i){var s=i.parts||[],o=wR(r)-1;o>-1&&o!==s.length-1&&(n._HLS_part=o),(o>-1||s.length)&&a--}n._HLS_msn=a}if(r.serverControl&&r.serverControl.canSkipUntil&&(n._HLS_skip=r.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var c=new Te.default.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(l){n.hasOwnProperty(l)&&c.searchParams.set(l,n[l])}),e=c.toString()}return e},fQ=function(e,r){if(!e)return r;var n=fv(e,r);if(e.preloadHints&&!r.preloadHints&&delete n.preloadHints,e.parts&&!r.parts)delete n.parts;else if(e.parts&&r.parts)for(var i=0;i<r.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=fv(e.parts[i],r.parts[i]));return!e.skipped&&r.skipped&&(n.skipped=!1),e.preload&&!r.preload&&(n.preload=!1),n},pQ=function(e,r,n){var i=e.slice(),a=r.slice();n=n||0;for(var s=[],o,c=0;c<a.length;c++){var l=i[c+n],f=a[c];l?(o=l.map||o,s.push(fQ(l,f))):(o&&!f.map&&(f.map=o),s.push(f))}return s},OR=function(e,r){!e.resolvedUri&&e.uri&&(e.resolvedUri=Is(r,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Is(r,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Is(r,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Is(r,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(n){n.resolvedUri||(n.resolvedUri=Is(r,n.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(n){n.resolvedUri||(n.resolvedUri=Is(r,n.uri))})},PR=function(e){var r=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(var i=0;i<n.preloadHints.length;i++)if(n.preloadHints[i].type==="MAP")return r}n.duration=e.targetDuration,n.preload=!0,r.push(n)}return r},RR=function(e,r){return e===r||e.segments&&r.segments&&e.segments.length===r.segments.length&&e.endList===r.endList&&e.mediaSequence===r.mediaSequence&&e.preloadSegment===r.preloadSegment},Gw=function(e,r,n){n===void 0&&(n=RR);var i=fv(e,{}),a=i.playlists[r.id];if(!a||n(a,r))return null;r.segments=PR(r);var s=fv(a,r);if(s.preloadSegment&&!r.preloadSegment&&delete s.preloadSegment,a.segments){if(r.skip){r.segments=r.segments||[];for(var o=0;o<r.skip.skippedSegments;o++)r.segments.unshift({skipped:!0})}s.segments=pQ(a.segments,r.segments,r.mediaSequence-a.mediaSequence)}s.segments.forEach(function(l){OR(l,s.resolvedUri)});for(var c=0;c<i.playlists.length;c++)i.playlists[c].id===r.id&&(i.playlists[c]=s);return i.playlists[r.id]=s,i.playlists[r.uri]=s,jd(e,function(l,f,g,m){if(l.playlists)for(var y=0;y<l.playlists.length;y++)r.id===l.playlists[y].id&&(l.playlists[y]=s)}),i},zw=function(e,r){var n=e.segments||[],i=n[n.length-1],a=i&&i.parts&&i.parts[i.parts.length-1],s=a&&a.duration||i&&i.duration;return r&&s?s*1e3:(e.partTargetDuration||e.targetDuration||10)*500},Ed=function(t){Et.default(e,t);function e(n,i,a){var s;if(a===void 0&&(a={}),s=t.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");s.logger_=Ps("PlaylistLoader");var o=a,c=o.withCredentials,l=c===void 0?!1:c,f=o.handleManifestRedirects,g=f===void 0?!1:f;s.src=n,s.vhs_=i,s.withCredentials=l,s.handleManifestRedirects=g;var m=i.options_;return s.customTagParsers=m&&m.customTagParsers||[],s.customTagMappers=m&&m.customTagMappers||[],s.experimentalLLHLS=m&&m.experimentalLLHLS||!1,Oe.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(er.default(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var r=e.prototype;return r.handleMediaupdatetimeout_=function(){var i=this;if(this.state==="HAVE_METADATA"){var a=this.media(),s=Is(this.master.uri,a.uri);this.experimentalLLHLS&&(s=dQ(s,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,c){if(i.request){if(o)return i.playlistRequestError(i.request,i.media(),"HAVE_METADATA");i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})}})}},r.playlistRequestError=function(i,a,s){var o=a.uri,c=a.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[c],status:i.status,message:"HLS playlist request error at URL: "+o+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},r.parseManifest_=function(i){var a=this,s=i.url,o=i.manifestString;return sQ({onwarn:function(l){var f=l.message;return a.logger_("m3u8-parser warn for "+s+": "+f)},oninfo:function(l){var f=l.message;return a.logger_("m3u8-parser info for "+s+": "+f)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},r.haveMetadata=function(i){var a=i.playlistString,s=i.playlistObject,o=i.url,c=i.id;this.request=null,this.state="HAVE_METADATA";var l=s||this.parseManifest_({url:o,manifestString:a});l.lastRequest=Date.now(),IR({playlist:l,uri:o,id:c});var f=Gw(this.master,l);this.targetDuration=l.partTargetDuration||l.targetDuration,this.pendingMedia_=null,f?(this.master=f,this.media_=this.master.playlists[c]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(zw(this.media(),!!f)),this.trigger("loadedplaylist")},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),Te.default.clearTimeout(this.mediaUpdateTimeout),Te.default.clearTimeout(this.finalRenditionTimeout),this.off()},r.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},r.media=function(i,a){var s=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof i=="string"){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(Te.default.clearTimeout(this.finalRenditionTimeout),a){var o=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Te.default.setTimeout(this.media.bind(this,i,!1),o);return}var c=this.state,l=!this.media_||i.id!==this.media_.id,f=this.master.playlists[i.id];if(f&&f.endList||i.endList&&i.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,l&&(this.trigger("mediachanging"),c==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(zw(i,!0)),!!l){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(g,m){if(s.request){if(i.lastRequest=Date.now(),i.resolvedUri=dv(s.handleManifestRedirects,i.resolvedUri,m),g)return s.playlistRequestError(s.request,i,c);s.haveMetadata({playlistString:m.responseText,url:i.uri,id:i.id}),c==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},r.pause=function(){this.mediaUpdateTimeout&&(Te.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},r.load=function(i){var a=this;this.mediaUpdateTimeout&&(Te.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(i){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Te.default.setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},r.updateMediaUpdateTimeout_=function(i){var a=this;this.mediaUpdateTimeout&&(Te.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=Te.default.setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(i)},i))},r.start=function(){var i=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=Te.default.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){i.setupInitialPlaylist(i.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,s){if(i.request){if(i.request=null,a)return i.error={status:s.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:s.responseText,code:2},i.state==="HAVE_NOTHING"&&(i.started=!1),i.trigger("error");i.src=dv(i.handleManifestRedirects,i.src,s);var o=i.parseManifest_({manifestString:s.responseText,url:i.src});i.setupInitialPlaylist(o)}})},r.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},r.setupInitialPlaylist=function(i){if(this.state="HAVE_MASTER",i.playlists){this.master=i,DR(this.master,this.srcUri()),i.playlists.forEach(function(s){s.segments=PR(s),s.segments.forEach(function(o){OR(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var a=this.srcUri()||Te.default.location.href;this.master=cQ(i,a),this.haveMetadata({playlistObject:i,url:a,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(lQ),hQ=Oe.xhr,gQ=Oe.mergeOptions,Vw=function(e,r,n,i){var a=e.responseType==="arraybuffer"?e.response:e.responseText;!r&&a&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=a.byteLength||a.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),r&&r.code==="ETIMEDOUT"&&(e.timedout=!0),!r&&!e.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(r=new Error("XHR Failed with a response of: "+(e&&(a||e.responseText)))),i(r,e)},LR=function(){var e=function r(n,i){n=gQ({timeout:45e3},n);var a=r.beforeRequest||Oe.Vhs.xhr.beforeRequest;if(a&&typeof a=="function"){var s=a(n);s&&(n=s)}var o=Oe.Vhs.xhr.original===!0?hQ:Oe.Vhs.xhr,c=o(n,function(f,g){return Vw(c,f,g,i)}),l=c.abort;return c.abort=function(){return c.aborted=!0,l.apply(c,arguments)},c.uri=n.uri,c.requestTime=Date.now(),c};return e.original=!0,e},mQ=function(e){var r,n=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?r=Te.default.BigInt(e.offset)+Te.default.BigInt(e.length)-Te.default.BigInt(1):r=e.offset+e.length-1,"bytes="+n+"-"+r},Ww=function(e){var r={};return e.byterange&&(r.Range=mQ(e.byterange)),r},vQ=function(e,r){return e.start(r)+"-"+e.end(r)},yQ=function(e,r){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(r%2?" ":"")},bQ=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},NR=function(e){var r={};return Object.keys(e).forEach(function(n){var i=e[n];Zm.isArrayBufferView(i)?r[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:r[n]=i}),r},pv=function(e){var r=e.byterange||{length:1/0,offset:0};return[r.length,r.offset,e.resolvedUri].join(",")},FR=function(e){return e.resolvedUri},MR=function(e){for(var r=Array.prototype.slice.call(e),n=16,i="",a,s,o=0;o<r.length/n;o++)a=r.slice(o*n,o*n+n).map(yQ).join(""),s=r.slice(o*n,o*n+n).map(bQ).join(""),i+=a+" "+s+`
`;return i},_Q=function(e){var r=e.bytes;return MR(r)},wQ=function(e){var r="",n;for(n=0;n<e.length;n++)r+=vQ(e,n)+" ";return r},SQ=Object.freeze({__proto__:null,createTransferableMessage:NR,initSegmentId:pv,segmentKeyId:FR,hexDump:MR,tagDump:_Q,textRanges:wQ}),UR=.25,TQ=function(e,r){if(!r.dateTimeObject)return null;var n=r.videoTimingInfo.transmuxerPrependedSeconds,i=r.videoTimingInfo.transmuxedPresentationStart,a=i+n,s=e-a;return new Date(r.dateTimeObject.getTime()+s*1e3)},CQ=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},EQ=function(e,r){var n;try{n=new Date(e)}catch{return null}if(!r||!r.segments||r.segments.length===0)return null;var i=r.segments[0];if(n<i.dateTimeObject)return null;for(var a=0;a<r.segments.length-1;a++){i=r.segments[a];var s=r.segments[a+1].dateTimeObject;if(n<s)break}var o=r.segments[r.segments.length-1],c=o.dateTimeObject,l=o.videoTimingInfo?CQ(o.videoTimingInfo):o.duration+o.duration*UR,f=new Date(c.getTime()+l*1e3);return n>f?null:(n>c&&(i=o),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Fa.duration(r,r.mediaSequence+r.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},xQ=function(e,r){if(!r||!r.segments||r.segments.length===0)return null;for(var n=0,i,a=0;a<r.segments.length&&(i=r.segments[a],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,!(e<=n));a++);var s=r.segments[r.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+s.duration*UR)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},AQ=function(e,r){var n,i;try{n=new Date(e),i=new Date(r)}catch{}var a=n.getTime(),s=i.getTime();return(s-a)/1e3},kQ=function(e){if(!e.segments||e.segments.length===0)return!1;for(var r=0;r<e.segments.length;r++){var n=e.segments[r];if(!n.dateTimeObject)return!1}return!0},IQ=function(e){var r=e.playlist,n=e.time,i=n===void 0?void 0:n,a=e.callback;if(!a)throw new Error("getProgramTime: callback must be provided");if(!r||i===void 0)return a({message:"getProgramTime: playlist and time must be provided"});var s=xQ(i,r);if(!s)return a({message:"valid programTime was not found"});if(s.type==="estimate")return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:i},c=TQ(i,s.segment);return c&&(o.programDateTime=c.toISOString()),a(null,o)},DQ=function t(e){var r=e.programTime,n=e.playlist,i=e.retryCount,a=i===void 0?2:i,s=e.seekTo,o=e.pauseAfterSeek,c=o===void 0?!0:o,l=e.tech,f=e.callback;if(!f)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!n||!s)return f({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!l.hasStarted_)return f({message:"player must be playing a live stream to start buffering"});if(!kQ(n))return f({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var g=EQ(r,n);if(!g)return f({message:r+" was not found in the stream"});var m=g.segment,y=AQ(m.dateTimeObject,r);if(g.type==="estimate"){if(a===0)return f({message:r+" is not buffered yet. Try again"});s(g.estimatedStart+y),l.one("seeked",function(){t({programTime:r,playlist:n,retryCount:a-1,seekTo:s,pauseAfterSeek:c,tech:l,callback:f})});return}var x=m.start+y,I=function(){return f(null,l.currentTime())};l.one("seeked",I),c&&l.pause(),s(x)},Ow=function(e,r){if(e.readyState===4)return r()},OQ=function(e,r,n){var i=[],a,s=!1,o=function(m,y,x,I){return y.abort(),s=!0,n(m,y,x,I)},c=function(m,y){if(!s){if(m)return o(m,y,"",i);var x=y.responseText.substring(i&&i.byteLength||0,y.responseText.length);if(i=Zm.concatTypedArrays(i,Zm.stringToBytes(x,!0)),a=a||pY.getId3Offset(i),i.length<10||a&&i.length<a+2)return Ow(y,function(){return o(m,y,"",i)});var I=ev.detectContainerForBytes(i);return I==="ts"&&i.length<188?Ow(y,function(){return o(m,y,"",i)}):!I&&i.length<376?Ow(y,function(){return o(m,y,"",i)}):o(null,y,I,i)}},l={uri:e,beforeSend:function(m){m.overrideMimeType("text/plain; charset=x-user-defined"),m.addEventListener("progress",function(y){return y.total,y.loaded,Vw(m,null,{statusCode:m.status},c)})}},f=r(l,function(g,m){return Vw(f,g,m,c)});return f},PQ=Oe.EventTarget,$R=Oe.mergeOptions,jP=function(e,r){if(!RR(e,r)||e.sidx&&r.sidx&&(e.sidx.offset!==r.sidx.offset||e.sidx.length!==r.sidx.length))return!1;if(!e.sidx&&r.sidx||e.sidx&&!r.sidx||e.segments&&!r.segments||!e.segments&&r.segments)return!1;if(!e.segments&&!r.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],a=r.segments[n];if(i.uri!==a.uri)return!1;if(!(!i.byterange&&!a.byterange)){var s=i.byterange,o=a.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},RQ=function(e,r,n,i){var a=i.attributes.NAME||n;return"placeholder-uri-"+e+"-"+r+"-"+a},LQ=function(e){var r=e.masterXml,n=e.srcUrl,i=e.clientOffset,a=e.sidxMapping,s=e.previousManifest,o=Xc.parse(r,{manifestUri:n,clientOffset:i,sidxMapping:a,previousManifest:s});return DR(o,n,RQ),o},NQ=function(e,r){jd(e,function(n,i,a,s){s in r.mediaGroups[i][a]||delete e.mediaGroups[i][a][s]})},FQ=function(e,r,n){for(var i=!0,a=$R(e,{duration:r.duration,minimumUpdatePeriod:r.minimumUpdatePeriod,timelineStarts:r.timelineStarts}),s=0;s<r.playlists.length;s++){var o=r.playlists[s];if(o.sidx){var c=Xc.generateSidxKey(o.sidx);n&&n[c]&&n[c].sidx&&Xc.addSidxSegmentsToPlaylist(o,n[c].sidx,o.sidx.resolvedUri)}var l=Gw(a,o,jP);l&&(a=l,i=!1)}return jd(r,function(f,g,m,y){if(f.playlists&&f.playlists.length){var x=f.playlists[0].id,I=Gw(a,f.playlists[0],jP);I&&(a=I,y in a.mediaGroups[g][m]||(a.mediaGroups[g][m][y]=f),a.mediaGroups[g][m][y].playlists[0]=a.playlists[x],i=!1)}}),NQ(a,r),r.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:a},MQ=function(e,r){var n=!e.map&&!r.map,i=n||!!(e.map&&r.map&&e.map.byterange.offset===r.map.byterange.offset&&e.map.byterange.length===r.map.byterange.length);return i&&e.uri===r.uri&&e.byterange.offset===r.byterange.offset&&e.byterange.length===r.byterange.length},HP=function(e,r){var n={};for(var i in e){var a=e[i],s=a.sidx;if(s){var o=Xc.generateSidxKey(s);if(!r[o])break;var c=r[o].sidxInfo;MQ(c,s)&&(n[o]=r[o])}}return n},UQ=function(e,r){var n=HP(e.playlists,r),i=n;return jd(e,function(a,s,o,c){if(a.playlists&&a.playlists.length){var l=a.playlists;i=$R(i,HP(l,r))}}),i},Kw=function(t){Et.default(e,t);function e(n,i,a,s){var o;a===void 0&&(a={}),o=t.call(this)||this,o.masterPlaylistLoader_=s||er.default(o),s||(o.isMaster_=!0);var c=a,l=c.withCredentials,f=l===void 0?!1:l,g=c.handleManifestRedirects,m=g===void 0?!1:g;if(o.vhs_=i,o.withCredentials=f,o.handleManifestRedirects=m,!n)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Ps("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=n,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=n,o}var r=e.prototype;return r.requestErrored_=function(i,a,s){if(!this.request)return!0;if(this.request=null,i)return this.error=typeof i=="object"&&!(i instanceof Error)?i:{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2},s&&(this.state=s),this.trigger("error"),!0},r.addSidxSegments_=function(i,a,s){var o=this,c=i.sidx&&Xc.generateSidxKey(i.sidx);if(!i.sidx||!c||this.masterPlaylistLoader_.sidxMapping_[c]){this.mediaRequest_=Te.default.setTimeout(function(){return s(!1)},0);return}var l=dv(this.handleManifestRedirects,i.sidx.resolvedUri),f=function(m,y){if(!o.requestErrored_(m,y,a)){var x=o.masterPlaylistLoader_.sidxMapping_,I;try{I=bY.default(Zm.toUint8(y.response).subarray(8))}catch(A){o.requestErrored_(A,y,a);return}return x[c]={sidxInfo:i.sidx,sidx:I},Xc.addSidxSegmentsToPlaylist(i,I,i.sidx.resolvedUri),s(!0)}};this.request=OQ(l,this.vhs_.xhr,function(g,m,y,x){if(g)return f(g,m);if(!y||y!=="mp4")return f({status:m.status,message:"Unsupported "+(y||"unknown")+" container type for sidx segment at URL: "+l,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},m);var I=i.sidx.byterange,A=I.offset,F=I.length;if(x.length>=F+A)return f(g,{response:x.subarray(A,A+F),status:m.status,uri:m.uri});o.request=o.vhs_.xhr({uri:l,responseType:"arraybuffer",headers:Ww({byterange:i.sidx.byterange})},f)})},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Te.default.clearTimeout(this.minimumUpdatePeriodTimeout_),Te.default.clearTimeout(this.mediaRequest_),Te.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},r.hasPendingRequest=function(){return this.request||this.mediaRequest_},r.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},r.media=function(i){var a=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof i=="string"){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var o=!this.media_||i.id!==this.media_.id;if(o&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList){this.state="HAVE_METADATA",this.media_=i,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,s,function(c){a.haveMetadata({startingState:s,playlist:i})}))},r.haveMetadata=function(i){var a=i.startingState,s=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),a==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},r.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Te.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Te.default.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},r.load=function(i){var a=this;Te.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(i){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Te.default.setTimeout(function(){return a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},r.start=function(){var i=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=Te.default.setTimeout(function(){return i.haveMaster_()},0);return}this.requestMaster_(function(a,s){i.haveMaster_(),!i.hasPendingRequest()&&!i.media_&&i.media(i.masterPlaylistLoader_.master.playlists[0])})},r.requestMaster_=function(i){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(a.requestErrored_(s,o)){a.state==="HAVE_NOTHING"&&(a.started=!1);return}var c=o.responseText!==a.masterPlaylistLoader_.masterXml_;if(a.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?a.masterLoaded_=Date.parse(o.responseHeaders.date):a.masterLoaded_=Date.now(),a.masterPlaylistLoader_.srcUrl=dv(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,o),c){a.handleMaster_(),a.syncClientServerClock_(function(){return i(o,c)});return}return i(o,c)})},r.syncClientServerClock_=function(i){var a=this,s=Xc.parseUTCTiming(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),i();this.request=this.vhs_.xhr({uri:Is(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,c){if(a.request){if(o)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),i();var l;s.method==="HEAD"?!c.responseHeaders||!c.responseHeaders.date?l=a.masterLoaded_:l=Date.parse(c.responseHeaders.date):l=Date.parse(c.responseText),a.masterPlaylistLoader_.clientOffset_=l-Date.now(),i()}})},r.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},r.handleMaster_=function(){this.mediaRequest_=null;var i=this.masterPlaylistLoader_.master,a=LQ({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i});i&&(a=FQ(i,a,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=a||i;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!i||a&&a.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!a},r.updateMinimumUpdatePeriodTimeout_=function(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(Te.default.clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var a=i.master&&i.master.minimumUpdatePeriod;if(a===0&&(i.media()?a=i.media().targetDuration*1e3:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),typeof a!="number"||a<=0){a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout");return}this.createMUPTimeout_(a)},r.createMUPTimeout_=function(i){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=Te.default.setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(i)},i)},r.refreshXml_=function(){var i=this;this.requestMaster_(function(a,s){s&&(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=UQ(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,function(o){i.refreshMedia_(i.media().id)}))})},r.refreshMedia_=function(i){var a=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[i];if(o?this.media_=s[i]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var c=function l(){a.media().endList||(a.mediaUpdateTimeout=Te.default.setTimeout(function(){a.trigger("mediaupdatetimeout"),l()},zw(a.media(),!!o)))};c()}this.trigger("loadedplaylist")},e}(PQ),xn={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},$Q=function(e){for(var r=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r.buffer},BR=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},BQ=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var r=new BlobBuilder;return r.append(e),URL.createObjectURL(r.getBlob())}},qR=function(e){return function(){var r=BQ(e),n=BR(new Worker(r));n.objURL=r;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(r),i.call(this)},n}},jR=function(e){return"var browserWorkerPolyFill = "+BR.toString()+`;
browserWorkerPolyFill(self);
`+e},HR=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},qQ=jR(HR(function(){var t=function(){this.init=function(){var b={};this.on=function(E,T){b[E]||(b[E]=[]),b[E]=b[E].concat(T)},this.off=function(E,T){var k;return b[E]?(k=b[E].indexOf(T),b[E]=b[E].slice(),b[E].splice(k,1),k>-1):!1},this.trigger=function(E){var T,k,P,M;if(T=b[E],!!T)if(arguments.length===2)for(P=T.length,k=0;k<P;++k)T[k].call(this,arguments[1]);else{for(M=[],k=arguments.length,k=1;k<arguments.length;++k)M.push(arguments[k]);for(P=T.length,k=0;k<P;++k)T[k].apply(this,M)}},this.dispose=function(){b={}}}};t.prototype.pipe=function(K){return this.on("data",function(b){K.push(b)}),this.on("done",function(b){K.flush(b)}),this.on("partialdone",function(b){K.partialFlush(b)}),this.on("endedtimeline",function(b){K.endTimeline(b)}),this.on("reset",function(b){K.reset(b)}),K},t.prototype.push=function(K){this.trigger("data",K)},t.prototype.flush=function(K){this.trigger("done",K)},t.prototype.partialFlush=function(K){this.trigger("partialdone",K)},t.prototype.endTimeline=function(K){this.trigger("endedtimeline",K)},t.prototype.reset=function(K){this.trigger("reset",K)};var e=t,r=Math.pow(2,32),n=function(b){var E=new DataView(b.buffer,b.byteOffset,b.byteLength),T;return E.getBigUint64?(T=E.getBigUint64(0),T<Number.MAX_SAFE_INTEGER?Number(T):T):E.getUint32(0)*r+E.getUint32(4)},i={getUint64:n,MAX_UINT32:r},a=i.MAX_UINT32,s,o,c,l,f,g,m,y,x,I,A,F,X,de,N,H,z,Y,G,ie,fe,Ne,ye,He,Re,Ze,ce,tt,ft,pt,Ye,xt,Ut,Pt,tr,Ke;(function(){var K;if(ye={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(K in ye)ye.hasOwnProperty(K)&&(ye[K]=[K.charCodeAt(0),K.charCodeAt(1),K.charCodeAt(2),K.charCodeAt(3)]);He=new Uint8Array([105,115,111,109]),Ze=new Uint8Array([97,118,99,49]),Re=new Uint8Array([0,0,0,1]),ce=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),tt=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ft={video:ce,audio:tt},xt=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Ye=new Uint8Array([0,0,0,0,0,0,0,0]),Ut=new Uint8Array([0,0,0,0,0,0,0,0]),Pt=Ut,tr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ke=Ut,pt=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(b){var E=[],T=0,k,P,M;for(k=1;k<arguments.length;k++)E.push(arguments[k]);for(k=E.length;k--;)T+=E[k].byteLength;for(P=new Uint8Array(T+8),M=new DataView(P.buffer,P.byteOffset,P.byteLength),M.setUint32(0,P.byteLength),P.set(b,4),k=0,T=8;k<E.length;k++)P.set(E[k],T),T+=E[k].byteLength;return P},o=function(){return s(ye.dinf,s(ye.dref,xt))},c=function(b){return s(ye.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,b.audioobjecttype<<3|b.samplingfrequencyindex>>>1,b.samplingfrequencyindex<<7|b.channelcount<<3,6,1,2]))},l=function(){return s(ye.ftyp,He,Re,He,Ze)},H=function(b){return s(ye.hdlr,ft[b])},f=function(b){return s(ye.mdat,b)},N=function(b){var E=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,b.duration>>>24&255,b.duration>>>16&255,b.duration>>>8&255,b.duration&255,85,196,0,0]);return b.samplerate&&(E[12]=b.samplerate>>>24&255,E[13]=b.samplerate>>>16&255,E[14]=b.samplerate>>>8&255,E[15]=b.samplerate&255),s(ye.mdhd,E)},de=function(b){return s(ye.mdia,N(b),H(b.type),m(b))},g=function(b){return s(ye.mfhd,new Uint8Array([0,0,0,0,(b&4278190080)>>24,(b&16711680)>>16,(b&65280)>>8,b&255]))},m=function(b){return s(ye.minf,b.type==="video"?s(ye.vmhd,pt):s(ye.smhd,Ye),o(),Y(b))},y=function(b,E){for(var T=[],k=E.length;k--;)T[k]=ie(E[k]);return s.apply(null,[ye.moof,g(b)].concat(T))},x=function(b){for(var E=b.length,T=[];E--;)T[E]=F(b[E]);return s.apply(null,[ye.moov,A(4294967295)].concat(T).concat(I(b)))},I=function(b){for(var E=b.length,T=[];E--;)T[E]=fe(b[E]);return s.apply(null,[ye.mvex].concat(T))},A=function(b){var E=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(b&4278190080)>>24,(b&16711680)>>16,(b&65280)>>8,b&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(ye.mvhd,E)},z=function(b){var E=b.samples||[],T=new Uint8Array(4+E.length),k,P;for(P=0;P<E.length;P++)k=E[P].flags,T[P+4]=k.dependsOn<<4|k.isDependedOn<<2|k.hasRedundancy;return s(ye.sdtp,T)},Y=function(b){return s(ye.stbl,G(b),s(ye.stts,Ke),s(ye.stsc,Pt),s(ye.stsz,tr),s(ye.stco,Ut))},function(){var K,b;G=function(T){return s(ye.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),T.type==="video"?K(T):b(T))},K=function(T){var k=T.sps||[],P=T.pps||[],M=[],Z=[],le,we;for(le=0;le<k.length;le++)M.push((k[le].byteLength&65280)>>>8),M.push(k[le].byteLength&255),M=M.concat(Array.prototype.slice.call(k[le]));for(le=0;le<P.length;le++)Z.push((P[le].byteLength&65280)>>>8),Z.push(P[le].byteLength&255),Z=Z.concat(Array.prototype.slice.call(P[le]));if(we=[ye.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(T.width&65280)>>8,T.width&255,(T.height&65280)>>8,T.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(ye.avcC,new Uint8Array([1,T.profileIdc,T.profileCompatibility,T.levelIdc,255].concat([k.length],M,[P.length],Z))),s(ye.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],T.sarRatio){var be=T.sarRatio[0],ke=T.sarRatio[1];we.push(s(ye.pasp,new Uint8Array([(be&4278190080)>>24,(be&16711680)>>16,(be&65280)>>8,be&255,(ke&4278190080)>>24,(ke&16711680)>>16,(ke&65280)>>8,ke&255])))}return s.apply(null,we)},b=function(T){return s(ye.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(T.channelcount&65280)>>8,T.channelcount&255,(T.samplesize&65280)>>8,T.samplesize&255,0,0,0,0,(T.samplerate&65280)>>8,T.samplerate&255,0,0]),c(T))}}(),X=function(b){var E=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(b.id&4278190080)>>24,(b.id&16711680)>>16,(b.id&65280)>>8,b.id&255,0,0,0,0,(b.duration&4278190080)>>24,(b.duration&16711680)>>16,(b.duration&65280)>>8,b.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(b.width&65280)>>8,b.width&255,0,0,(b.height&65280)>>8,b.height&255,0,0]);return s(ye.tkhd,E)},ie=function(b){var E,T,k,P,M,Z,le;return E=s(ye.tfhd,new Uint8Array([0,0,0,58,(b.id&4278190080)>>24,(b.id&16711680)>>16,(b.id&65280)>>8,b.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Z=Math.floor(b.baseMediaDecodeTime/a),le=Math.floor(b.baseMediaDecodeTime%a),T=s(ye.tfdt,new Uint8Array([1,0,0,0,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z&255,le>>>24&255,le>>>16&255,le>>>8&255,le&255])),M=92,b.type==="audio"?(k=Ne(b,M),s(ye.traf,E,T,k)):(P=z(b),k=Ne(b,P.length+M),s(ye.traf,E,T,k,P))},F=function(b){return b.duration=b.duration||4294967295,s(ye.trak,X(b),de(b))},fe=function(b){var E=new Uint8Array([0,0,0,0,(b.id&4278190080)>>24,(b.id&16711680)>>16,(b.id&65280)>>8,b.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return b.type!=="video"&&(E[E.length-1]=0),s(ye.trex,E)},function(){var K,b,E;E=function(k,P){var M=0,Z=0,le=0,we=0;return k.length&&(k[0].duration!==void 0&&(M=1),k[0].size!==void 0&&(Z=2),k[0].flags!==void 0&&(le=4),k[0].compositionTimeOffset!==void 0&&(we=8)),[0,0,M|Z|le|we,1,(k.length&4278190080)>>>24,(k.length&16711680)>>>16,(k.length&65280)>>>8,k.length&255,(P&4278190080)>>>24,(P&16711680)>>>16,(P&65280)>>>8,P&255]},b=function(k,P){var M,Z,le,we,be,ke;for(we=k.samples||[],P+=20+16*we.length,le=E(we,P),Z=new Uint8Array(le.length+we.length*16),Z.set(le),M=le.length,ke=0;ke<we.length;ke++)be=we[ke],Z[M++]=(be.duration&4278190080)>>>24,Z[M++]=(be.duration&16711680)>>>16,Z[M++]=(be.duration&65280)>>>8,Z[M++]=be.duration&255,Z[M++]=(be.size&4278190080)>>>24,Z[M++]=(be.size&16711680)>>>16,Z[M++]=(be.size&65280)>>>8,Z[M++]=be.size&255,Z[M++]=be.flags.isLeading<<2|be.flags.dependsOn,Z[M++]=be.flags.isDependedOn<<6|be.flags.hasRedundancy<<4|be.flags.paddingValue<<1|be.flags.isNonSyncSample,Z[M++]=be.flags.degradationPriority&61440,Z[M++]=be.flags.degradationPriority&15,Z[M++]=(be.compositionTimeOffset&4278190080)>>>24,Z[M++]=(be.compositionTimeOffset&16711680)>>>16,Z[M++]=(be.compositionTimeOffset&65280)>>>8,Z[M++]=be.compositionTimeOffset&255;return s(ye.trun,Z)},K=function(k,P){var M,Z,le,we,be,ke;for(we=k.samples||[],P+=20+8*we.length,le=E(we,P),M=new Uint8Array(le.length+we.length*8),M.set(le),Z=le.length,ke=0;ke<we.length;ke++)be=we[ke],M[Z++]=(be.duration&4278190080)>>>24,M[Z++]=(be.duration&16711680)>>>16,M[Z++]=(be.duration&65280)>>>8,M[Z++]=be.duration&255,M[Z++]=(be.size&4278190080)>>>24,M[Z++]=(be.size&16711680)>>>16,M[Z++]=(be.size&65280)>>>8,M[Z++]=be.size&255;return s(ye.trun,M)},Ne=function(k,P){return k.type==="audio"?K(k,P):b(k,P)}}();var Q={ftyp:l,mdat:f,moof:y,moov:x,initSegment:function(b){var E=l(),T=x(b),k;return k=new Uint8Array(E.byteLength+T.byteLength),k.set(E),k.set(T,E.byteLength),k}},pe=function(b){var E,T,k=[],P=[];for(P.byteLength=0,P.nalCount=0,P.duration=0,k.byteLength=0,E=0;E<b.length;E++)T=b[E],T.nalUnitType==="access_unit_delimiter_rbsp"?(k.length&&(k.duration=T.dts-k.dts,P.byteLength+=k.byteLength,P.nalCount+=k.length,P.duration+=k.duration,P.push(k)),k=[T],k.byteLength=T.data.byteLength,k.pts=T.pts,k.dts=T.dts):(T.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(k.keyFrame=!0),k.duration=T.dts-k.dts,k.byteLength+=T.data.byteLength,k.push(T));return P.length&&(!k.duration||k.duration<=0)&&(k.duration=P[P.length-1].duration),P.byteLength+=k.byteLength,P.nalCount+=k.length,P.duration+=k.duration,P.push(k),P},xe=function(b){var E,T,k=[],P=[];for(k.byteLength=0,k.nalCount=0,k.duration=0,k.pts=b[0].pts,k.dts=b[0].dts,P.byteLength=0,P.nalCount=0,P.duration=0,P.pts=b[0].pts,P.dts=b[0].dts,E=0;E<b.length;E++)T=b[E],T.keyFrame?(k.length&&(P.push(k),P.byteLength+=k.byteLength,P.nalCount+=k.nalCount,P.duration+=k.duration),k=[T],k.nalCount=T.length,k.byteLength=T.byteLength,k.pts=T.pts,k.dts=T.dts,k.duration=T.duration):(k.duration+=T.duration,k.nalCount+=T.length,k.byteLength+=T.byteLength,k.push(T));return P.length&&k.duration<=0&&(k.duration=P[P.length-1].duration),P.byteLength+=k.byteLength,P.nalCount+=k.nalCount,P.duration+=k.duration,P.push(k),P},_e=function(b){var E;return!b[0][0].keyFrame&&b.length>1&&(E=b.shift(),b.byteLength-=E.byteLength,b.nalCount-=E.nalCount,b[0][0].dts=E.dts,b[0][0].pts=E.pts,b[0][0].duration+=E.duration),b},nt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},_t=function(b,E){var T=nt();return T.dataOffset=E,T.compositionTimeOffset=b.pts-b.dts,T.duration=b.duration,T.size=4*b.length,T.size+=b.byteLength,b.keyFrame&&(T.flags.dependsOn=2,T.flags.isNonSyncSample=0),T},bt=function(b,E){var T,k,P,M,Z,le=E||0,we=[];for(T=0;T<b.length;T++)for(M=b[T],k=0;k<M.length;k++)Z=M[k],P=_t(Z,le),le+=P.size,we.push(P);return we},Se=function(b){var E,T,k,P,M,Z,le=0,we=b.byteLength,be=b.nalCount,ke=we+4*be,Xe=new Uint8Array(ke),Tt=new DataView(Xe.buffer);for(E=0;E<b.length;E++)for(P=b[E],T=0;T<P.length;T++)for(M=P[T],k=0;k<M.length;k++)Z=M[k],Tt.setUint32(le,Z.data.byteLength),le+=4,Xe.set(Z.data,le),le+=Z.data.byteLength;return Xe},Be=function(b,E){var T,k=E||0,P=[];return T=_t(b,k),P.push(T),P},jt=function(b){var E,T,k=0,P=b.byteLength,M=b.length,Z=P+4*M,le=new Uint8Array(Z),we=new DataView(le.buffer);for(E=0;E<b.length;E++)T=b[E],we.setUint32(k,T.data.byteLength),k+=4,le.set(T.data,k),k+=T.data.byteLength;return le},qe={groupNalsIntoFrames:pe,groupFramesIntoGops:xe,extendFirstKeyFrame:_e,generateSampleTable:bt,concatenateNalData:Se,generateSampleTableForFrame:Be,concatenateNalDataForFrame:jt},rt=[33,16,5,32,164,27],je=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ae=function(b){for(var E=[];b--;)E.push(0);return E},lt=function(b){return Object.keys(b).reduce(function(E,T){return E[T]=new Uint8Array(b[T].reduce(function(k,P){return k.concat(P)},[])),E},{})},Nt,ot=function(){if(!Nt){var b={96e3:[rt,[227,64],Ae(154),[56]],88200:[rt,[231],Ae(170),[56]],64e3:[rt,[248,192],Ae(240),[56]],48e3:[rt,[255,192],Ae(268),[55,148,128],Ae(54),[112]],44100:[rt,[255,192],Ae(268),[55,163,128],Ae(84),[112]],32e3:[rt,[255,192],Ae(268),[55,234],Ae(226),[112]],24e3:[rt,[255,192],Ae(268),[55,255,128],Ae(268),[111,112],Ae(126),[224]],16e3:[rt,[255,192],Ae(268),[55,255,128],Ae(268),[111,255],Ae(269),[223,108],Ae(195),[1,192]],12e3:[je,Ae(268),[3,127,248],Ae(268),[6,255,240],Ae(268),[13,255,224],Ae(268),[27,253,128],Ae(259),[56]],11025:[je,Ae(268),[3,127,248],Ae(268),[6,255,240],Ae(268),[13,255,224],Ae(268),[27,255,192],Ae(268),[55,175,128],Ae(108),[112]],8e3:[je,Ae(268),[3,121,16],Ae(47),[7]]};Nt=lt(b)}return Nt},St=9e4,te,ee,ge,De,ut,q,re;te=function(b){return b*St},ee=function(b,E){return b*E},ge=function(b){return b/St},De=function(b,E){return b/E},ut=function(b,E){return te(De(b,E))},q=function(b,E){return ee(ge(b),E)},re=function(b,E,T){return ge(T?b:b-E)};var L={ONE_SECOND_IN_TS:St,secondsToVideoTs:te,secondsToAudioTs:ee,videoTsToSeconds:ge,audioTsToSeconds:De,audioTsToVideoTs:ut,videoTsToAudioTs:q,metadataTsToSeconds:re},Ce=function(b){var E,T,k=0;for(E=0;E<b.length;E++)T=b[E],k+=T.data.byteLength;return k},Ge=function(b,E,T,k){var P,M=0,Z=0,le=0,we=0,be,ke,Xe;if(E.length&&(P=L.audioTsToVideoTs(b.baseMediaDecodeTime,b.samplerate),M=Math.ceil(L.ONE_SECOND_IN_TS/(b.samplerate/1024)),T&&k&&(Z=P-Math.max(T,k),le=Math.floor(Z/M),we=le*M),!(le<1||we>L.ONE_SECOND_IN_TS/2))){for(be=ot()[b.samplerate],be||(be=E[0].data),ke=0;ke<le;ke++)Xe=E[0],E.splice(0,0,{data:be,dts:Xe.dts-M,pts:Xe.pts-M});return b.baseMediaDecodeTime-=Math.floor(L.videoTsToAudioTs(we,b.samplerate)),we}},at=function(b,E,T){return E.minSegmentDts>=T?b:(E.minSegmentDts=1/0,b.filter(function(k){return k.dts>=T?(E.minSegmentDts=Math.min(E.minSegmentDts,k.dts),E.minSegmentPts=E.minSegmentDts,!0):!1}))},ht=function(b){var E,T,k=[];for(E=0;E<b.length;E++)T=b[E],k.push({size:T.data.byteLength,duration:1024});return k},Je=function(b){var E,T,k=0,P=new Uint8Array(Ce(b));for(E=0;E<b.length;E++)T=b[E],P.set(T.data,k),k+=T.data.byteLength;return P},Ee={prefixWithSilence:Ge,trimAdtsFramesByEarliestDts:at,generateSampleTable:ht,concatenateFrameData:Je},Kt=L.ONE_SECOND_IN_TS,Ot=function(b,E){typeof E.pts=="number"&&(b.timelineStartInfo.pts===void 0&&(b.timelineStartInfo.pts=E.pts),b.minSegmentPts===void 0?b.minSegmentPts=E.pts:b.minSegmentPts=Math.min(b.minSegmentPts,E.pts),b.maxSegmentPts===void 0?b.maxSegmentPts=E.pts:b.maxSegmentPts=Math.max(b.maxSegmentPts,E.pts)),typeof E.dts=="number"&&(b.timelineStartInfo.dts===void 0&&(b.timelineStartInfo.dts=E.dts),b.minSegmentDts===void 0?b.minSegmentDts=E.dts:b.minSegmentDts=Math.min(b.minSegmentDts,E.dts),b.maxSegmentDts===void 0?b.maxSegmentDts=E.dts:b.maxSegmentDts=Math.max(b.maxSegmentDts,E.dts))},kt=function(b){delete b.minSegmentDts,delete b.maxSegmentDts,delete b.minSegmentPts,delete b.maxSegmentPts},Br=function(b,E){var T,k,P=b.minSegmentDts;return E||(P-=b.timelineStartInfo.dts),T=b.timelineStartInfo.baseMediaDecodeTime,T+=P,T=Math.max(0,T),b.type==="audio"&&(k=b.samplerate/Kt,T*=k,T=Math.floor(T)),T},Jt={clearDtsInfo:kt,calculateTrackBaseMediaDecodeTime:Br,collectDtsInfo:Ot},pi=4,hr=128,zr=function(b){for(var E=0,T={payloadType:-1,payloadSize:0},k=0,P=0;E<b.byteLength&&b[E]!==hr;){for(;b[E]===255;)k+=255,E++;for(k+=b[E++];b[E]===255;)P+=255,E++;if(P+=b[E++],!T.payload&&k===pi){var M=String.fromCharCode(b[E+3],b[E+4],b[E+5],b[E+6]);if(M==="GA94"){T.payloadType=k,T.payloadSize=P,T.payload=b.subarray(E,E+P);break}else T.payload=void 0}E+=P,k=0,P=0}return T},ki=function(b){return b.payload[0]!==181||(b.payload[1]<<8|b.payload[2])!==49||String.fromCharCode(b.payload[3],b.payload[4],b.payload[5],b.payload[6])!=="GA94"||b.payload[7]!==3?null:b.payload.subarray(8,b.payload.length-1)},qr=function(b,E){var T=[],k,P,M,Z;if(!(E[0]&64))return T;for(P=E[0]&31,k=0;k<P;k++)M=k*3,Z={type:E[M+2]&3,pts:b},E[M+2]&4&&(Z.ccData=E[M+3]<<8|E[M+4],T.push(Z));return T},en=function(b){for(var E=b.byteLength,T=[],k=1,P,M;k<E-2;)b[k]===0&&b[k+1]===0&&b[k+2]===3?(T.push(k+2),k+=2):k++;if(T.length===0)return b;P=E-T.length,M=new Uint8Array(P);var Z=0;for(k=0;k<P;Z++,k++)Z===T[0]&&(Z++,T.shift()),M[k]=b[Z];return M},Yr={parseSei:zr,parseUserData:ki,parseCaptionPackets:qr,discardEmulationPreventionBytes:en,USER_DATA_REGISTERED_ITU_T_T35:pi},$t=function K(b){b=b||{},K.prototype.init.call(this),this.parse708captions_=typeof b.parse708captions=="boolean"?b.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new fr(0,0),new fr(0,1),new fr(1,0),new fr(1,1)],this.parse708captions_&&(this.cc708Stream_=new Vt({captionServices:b.captionServices})),this.reset(),this.ccStreams_.forEach(function(E){E.on("data",this.trigger.bind(this,"data")),E.on("partialdone",this.trigger.bind(this,"partialdone")),E.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};$t.prototype=new e,$t.prototype.push=function(K){var b,E,T;if(K.nalUnitType==="sei_rbsp"&&(b=Yr.parseSei(K.escapedRBSP),!!b.payload&&b.payloadType===Yr.USER_DATA_REGISTERED_ITU_T_T35&&(E=Yr.parseUserData(b),!!E))){if(K.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(K.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}T=Yr.parseCaptionPackets(K.pts,E),this.captionPackets_=this.captionPackets_.concat(T),this.latestDts_!==K.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=K.dts}},$t.prototype.flushCCStreams=function(K){this.ccStreams_.forEach(function(b){return K==="flush"?b.flush():b.partialFlush()},this)},$t.prototype.flushStream=function(K){if(!this.captionPackets_.length){this.flushCCStreams(K);return}this.captionPackets_.forEach(function(b,E){b.presortIndex=E}),this.captionPackets_.sort(function(b,E){return b.pts===E.pts?b.presortIndex-E.presortIndex:b.pts-E.pts}),this.captionPackets_.forEach(function(b){b.type<2?this.dispatchCea608Packet(b):this.dispatchCea708Packet(b)},this),this.captionPackets_.length=0,this.flushCCStreams(K)},$t.prototype.flush=function(){return this.flushStream("flush")},$t.prototype.partialFlush=function(){return this.flushStream("partialFlush")},$t.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(K){K.reset()})},$t.prototype.dispatchCea608Packet=function(K){this.setsTextOrXDSActive(K)?this.activeCea608Channel_[K.type]=null:this.setsChannel1Active(K)?this.activeCea608Channel_[K.type]=0:this.setsChannel2Active(K)&&(this.activeCea608Channel_[K.type]=1),this.activeCea608Channel_[K.type]!==null&&this.ccStreams_[(K.type<<1)+this.activeCea608Channel_[K.type]].push(K)},$t.prototype.setsChannel1Active=function(K){return(K.ccData&30720)===4096},$t.prototype.setsChannel2Active=function(K){return(K.ccData&30720)===6144},$t.prototype.setsTextOrXDSActive=function(K){return(K.ccData&28928)===256||(K.ccData&30974)===4138||(K.ccData&30974)===6186},$t.prototype.dispatchCea708Packet=function(K){this.parse708captions_&&this.cc708Stream_.push(K)};var hi={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Ci=function(b){var E=hi[b]||b;return b&4096&&b===E?"":String.fromCharCode(E)},Qt=function(b){return 32<=b&&b<=127||160<=b&&b<=255},Jr=function(b){this.windowNum=b,this.reset()};Jr.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Jr.prototype.getText=function(){return this.rows.join(`
`)},Jr.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Jr.prototype.newLine=function(K){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(K),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Jr.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Jr.prototype.addText=function(K){this.rows[this.rowIdx]+=K},Jr.prototype.backspace=function(){if(!this.isEmpty()){var K=this.rows[this.rowIdx];this.rows[this.rowIdx]=K.substr(0,K.length-1)}};var jr=function(b,E,T){this.serviceNum=b,this.text="",this.currentWindow=new Jr(-1),this.windows=[],this.stream=T,typeof E=="string"&&this.createTextDecoder(E)};jr.prototype.init=function(K,b){this.startPts=K;for(var E=0;E<8;E++)this.windows[E]=new Jr(E),typeof b=="function"&&(this.windows[E].beforeRowOverflow=b)},jr.prototype.setCurrentWindow=function(K){this.currentWindow=this.windows[K]},jr.prototype.createTextDecoder=function(K){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(K)}catch(b){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+K+" encoding. "+b})}};var Vt=function K(b){b=b||{},K.prototype.init.call(this);var E=this,T=b.captionServices||{},k={},P;Object.keys(T).forEach(function(M){P=T[M],/^SERVICE/.test(M)&&(k[M]=P.encoding)}),this.serviceEncodings=k,this.current708Packet=null,this.services={},this.push=function(M){M.type===3?(E.new708Packet(),E.add708Bytes(M)):(E.current708Packet===null&&E.new708Packet(),E.add708Bytes(M))}};Vt.prototype=new e,Vt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Vt.prototype.add708Bytes=function(K){var b=K.ccData,E=b>>>8,T=b&255;this.current708Packet.ptsVals.push(K.pts),this.current708Packet.data.push(E),this.current708Packet.data.push(T)},Vt.prototype.push708Packet=function(){var K=this.current708Packet,b=K.data,E=null,T=null,k=0,P=b[k++];for(K.seq=P>>6,K.sizeCode=P&63;k<b.length;k++)P=b[k++],E=P>>5,T=P&31,E===7&&T>0&&(P=b[k++],E=P),this.pushServiceBlock(E,k,T),T>0&&(k+=T-1)},Vt.prototype.pushServiceBlock=function(K,b,E){var T,k=b,P=this.current708Packet.data,M=this.services[K];for(M||(M=this.initService(K,k));k<b+E&&k<P.length;k++)T=P[k],Qt(T)?k=this.handleText(k,M):T===24?k=this.multiByteCharacter(k,M):T===16?k=this.extendedCommands(k,M):128<=T&&T<=135?k=this.setCurrentWindow(k,M):152<=T&&T<=159?k=this.defineWindow(k,M):T===136?k=this.clearWindows(k,M):T===140?k=this.deleteWindows(k,M):T===137?k=this.displayWindows(k,M):T===138?k=this.hideWindows(k,M):T===139?k=this.toggleWindows(k,M):T===151?k=this.setWindowAttributes(k,M):T===144?k=this.setPenAttributes(k,M):T===145?k=this.setPenColor(k,M):T===146?k=this.setPenLocation(k,M):T===143?M=this.reset(k,M):T===8?M.currentWindow.backspace():T===12?M.currentWindow.clearText():T===13?M.currentWindow.pendingNewLine=!0:T===14?M.currentWindow.clearText():T===141&&k++},Vt.prototype.extendedCommands=function(K,b){var E=this.current708Packet.data,T=E[++K];return Qt(T)&&(K=this.handleText(K,b,{isExtended:!0})),K},Vt.prototype.getPts=function(K){return this.current708Packet.ptsVals[Math.floor(K/2)]},Vt.prototype.initService=function(K,b){var T="SERVICE"+K,E=this,T,k;return T in this.serviceEncodings&&(k=this.serviceEncodings[T]),this.services[K]=new jr(K,k,E),this.services[K].init(this.getPts(b),function(P){E.flushDisplayed(P,E.services[K])}),this.services[K]},Vt.prototype.handleText=function(K,b,E){var T=E&&E.isExtended,k=E&&E.isMultiByte,P=this.current708Packet.data,M=T?4096:0,Z=P[K],le=P[K+1],we=b.currentWindow,be,ke;return b.textDecoder_&&!T?(k?(ke=[Z,le],K++):ke=[Z],be=b.textDecoder_.decode(new Uint8Array(ke))):be=Ci(M|Z),we.pendingNewLine&&!we.isEmpty()&&we.newLine(this.getPts(K)),we.pendingNewLine=!1,we.addText(be),K},Vt.prototype.multiByteCharacter=function(K,b){var E=this.current708Packet.data,T=E[K+1],k=E[K+2];return Qt(T)&&Qt(k)&&(K=this.handleText(++K,b,{isMultiByte:!0})),K},Vt.prototype.setCurrentWindow=function(K,b){var E=this.current708Packet.data,T=E[K],k=T&7;return b.setCurrentWindow(k),K},Vt.prototype.defineWindow=function(K,b){var E=this.current708Packet.data,T=E[K],k=T&7;b.setCurrentWindow(k);var P=b.currentWindow;return T=E[++K],P.visible=(T&32)>>5,P.rowLock=(T&16)>>4,P.columnLock=(T&8)>>3,P.priority=T&7,T=E[++K],P.relativePositioning=(T&128)>>7,P.anchorVertical=T&127,T=E[++K],P.anchorHorizontal=T,T=E[++K],P.anchorPoint=(T&240)>>4,P.rowCount=T&15,T=E[++K],P.columnCount=T&63,T=E[++K],P.windowStyle=(T&56)>>3,P.penStyle=T&7,P.virtualRowCount=P.rowCount+1,K},Vt.prototype.setWindowAttributes=function(K,b){var E=this.current708Packet.data,T=E[K],k=b.currentWindow.winAttr;return T=E[++K],k.fillOpacity=(T&192)>>6,k.fillRed=(T&48)>>4,k.fillGreen=(T&12)>>2,k.fillBlue=T&3,T=E[++K],k.borderType=(T&192)>>6,k.borderRed=(T&48)>>4,k.borderGreen=(T&12)>>2,k.borderBlue=T&3,T=E[++K],k.borderType+=(T&128)>>5,k.wordWrap=(T&64)>>6,k.printDirection=(T&48)>>4,k.scrollDirection=(T&12)>>2,k.justify=T&3,T=E[++K],k.effectSpeed=(T&240)>>4,k.effectDirection=(T&12)>>2,k.displayEffect=T&3,K},Vt.prototype.flushDisplayed=function(K,b){for(var E=[],T=0;T<8;T++)b.windows[T].visible&&!b.windows[T].isEmpty()&&E.push(b.windows[T].getText());b.endPts=K,b.text=E.join(`

`),this.pushCaption(b),b.startPts=K},Vt.prototype.pushCaption=function(K){K.text!==""&&(this.trigger("data",{startPts:K.startPts,endPts:K.endPts,text:K.text,stream:"cc708_"+K.serviceNum}),K.text="",K.startPts=K.endPts)},Vt.prototype.displayWindows=function(K,b){var E=this.current708Packet.data,T=E[++K],k=this.getPts(K);this.flushDisplayed(k,b);for(var P=0;P<8;P++)T&1<<P&&(b.windows[P].visible=1);return K},Vt.prototype.hideWindows=function(K,b){var E=this.current708Packet.data,T=E[++K],k=this.getPts(K);this.flushDisplayed(k,b);for(var P=0;P<8;P++)T&1<<P&&(b.windows[P].visible=0);return K},Vt.prototype.toggleWindows=function(K,b){var E=this.current708Packet.data,T=E[++K],k=this.getPts(K);this.flushDisplayed(k,b);for(var P=0;P<8;P++)T&1<<P&&(b.windows[P].visible^=1);return K},Vt.prototype.clearWindows=function(K,b){var E=this.current708Packet.data,T=E[++K],k=this.getPts(K);this.flushDisplayed(k,b);for(var P=0;P<8;P++)T&1<<P&&b.windows[P].clearText();return K},Vt.prototype.deleteWindows=function(K,b){var E=this.current708Packet.data,T=E[++K],k=this.getPts(K);this.flushDisplayed(k,b);for(var P=0;P<8;P++)T&1<<P&&b.windows[P].reset();return K},Vt.prototype.setPenAttributes=function(K,b){var E=this.current708Packet.data,T=E[K],k=b.currentWindow.penAttr;return T=E[++K],k.textTag=(T&240)>>4,k.offset=(T&12)>>2,k.penSize=T&3,T=E[++K],k.italics=(T&128)>>7,k.underline=(T&64)>>6,k.edgeType=(T&56)>>3,k.fontStyle=T&7,K},Vt.prototype.setPenColor=function(K,b){var E=this.current708Packet.data,T=E[K],k=b.currentWindow.penColor;return T=E[++K],k.fgOpacity=(T&192)>>6,k.fgRed=(T&48)>>4,k.fgGreen=(T&12)>>2,k.fgBlue=T&3,T=E[++K],k.bgOpacity=(T&192)>>6,k.bgRed=(T&48)>>4,k.bgGreen=(T&12)>>2,k.bgBlue=T&3,T=E[++K],k.edgeRed=(T&48)>>4,k.edgeGreen=(T&12)>>2,k.edgeBlue=T&3,K},Vt.prototype.setPenLocation=function(K,b){var E=this.current708Packet.data,T=E[K],k=b.currentWindow.penLoc;return b.currentWindow.pendingNewLine=!0,T=E[++K],k.row=T&15,T=E[++K],k.column=T&63,K},Vt.prototype.reset=function(K,b){var E=this.getPts(K);return this.flushDisplayed(E,b),this.initService(b.serviceNum,K)};var Tr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},un=function(b){return b===null?"":(b=Tr[b]||b,String.fromCharCode(b))},Dn=14,cn=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],da=function(){for(var b=[],E=Dn+1;E--;)b.push("");return b},fr=function K(b,E){K.prototype.init.call(this),this.field_=b||0,this.dataChannel_=E||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(T){var k,P,M,Z,le;if(k=T.ccData&32639,k===this.lastControlCode_){this.lastControlCode_=null;return}if((k&61440)===4096?this.lastControlCode_=k:k!==this.PADDING_&&(this.lastControlCode_=null),M=k>>>8,Z=k&255,k!==this.PADDING_)if(k===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(k===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(T.pts),this.flushDisplayed(T.pts),P=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=P,this.startPts_=T.pts;else if(k===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(T.pts);else if(k===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(T.pts);else if(k===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(T.pts);else if(k===this.CARRIAGE_RETURN_)this.clearFormatting(T.pts),this.flushDisplayed(T.pts),this.shiftRowsUp_(),this.startPts_=T.pts;else if(k===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(k===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(T.pts),this.displayed_=da();else if(k===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=da();else if(k===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(T.pts),this.displayed_=da()),this.mode_="paintOn",this.startPts_=T.pts;else if(this.isSpecialCharacter(M,Z))M=(M&3)<<8,le=un(M|Z),this[this.mode_](T.pts,le),this.column_++;else if(this.isExtCharacter(M,Z))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),M=(M&3)<<8,le=un(M|Z),this[this.mode_](T.pts,le),this.column_++;else if(this.isMidRowCode(M,Z))this.clearFormatting(T.pts),this[this.mode_](T.pts," "),this.column_++,(Z&14)===14&&this.addFormatting(T.pts,["i"]),(Z&1)===1&&this.addFormatting(T.pts,["u"]);else if(this.isOffsetControlCode(M,Z))this.column_+=Z&3;else if(this.isPAC(M,Z)){var we=cn.indexOf(k&7968);this.mode_==="rollUp"&&(we-this.rollUpRows_+1<0&&(we=this.rollUpRows_-1),this.setRollUp(T.pts,we)),we!==this.row_&&(this.clearFormatting(T.pts),this.row_=we),Z&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(T.pts,["u"]),(k&16)===16&&(this.column_=((k&14)>>1)*4),this.isColorPAC(Z)&&(Z&14)===14&&this.addFormatting(T.pts,["i"])}else this.isNormalChar(M)&&(Z===0&&(Z=null),le=un(M),le+=un(Z),this[this.mode_](T.pts,le),this.column_+=le.length)}};fr.prototype=new e,fr.prototype.flushDisplayed=function(K){var b=this.displayed_.map(function(E,T){try{return E.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+T+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:K,text:b,stream:this.name_})},fr.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=da(),this.nonDisplayed_=da(),this.lastControlCode_=null,this.column_=0,this.row_=Dn,this.rollUpRows_=2,this.formatting_=[]},fr.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},fr.prototype.isSpecialCharacter=function(K,b){return K===this.EXT_&&b>=48&&b<=63},fr.prototype.isExtCharacter=function(K,b){return(K===this.EXT_+1||K===this.EXT_+2)&&b>=32&&b<=63},fr.prototype.isMidRowCode=function(K,b){return K===this.EXT_&&b>=32&&b<=47},fr.prototype.isOffsetControlCode=function(K,b){return K===this.OFFSET_&&b>=33&&b<=35},fr.prototype.isPAC=function(K,b){return K>=this.BASE_&&K<this.BASE_+8&&b>=64&&b<=127},fr.prototype.isColorPAC=function(K){return K>=64&&K<=79||K>=96&&K<=127},fr.prototype.isNormalChar=function(K){return K>=32&&K<=127},fr.prototype.setRollUp=function(K,b){if(this.mode_!=="rollUp"&&(this.row_=Dn,this.mode_="rollUp",this.flushDisplayed(K),this.nonDisplayed_=da(),this.displayed_=da()),b!==void 0&&b!==this.row_)for(var E=0;E<this.rollUpRows_;E++)this.displayed_[b-E]=this.displayed_[this.row_-E],this.displayed_[this.row_-E]="";b===void 0&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},fr.prototype.addFormatting=function(K,b){this.formatting_=this.formatting_.concat(b);var E=b.reduce(function(T,k){return T+"<"+k+">"},"");this[this.mode_](K,E)},fr.prototype.clearFormatting=function(K){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(E,T){return E+"</"+T+">"},"");this.formatting_=[],this[this.mode_](K,b)}},fr.prototype.popOn=function(K,b){var E=this.nonDisplayed_[this.row_];E+=b,this.nonDisplayed_[this.row_]=E},fr.prototype.rollUp=function(K,b){var E=this.displayed_[this.row_];E+=b,this.displayed_[this.row_]=E},fr.prototype.shiftRowsUp_=function(){var K;for(K=0;K<this.topRow_;K++)this.displayed_[K]="";for(K=this.row_+1;K<Dn+1;K++)this.displayed_[K]="";for(K=this.topRow_;K<this.row_;K++)this.displayed_[K]=this.displayed_[K+1];this.displayed_[this.row_]=""},fr.prototype.paintOn=function(K,b){var E=this.displayed_[this.row_];E+=b,this.displayed_[this.row_]=E};var gi={CaptionStream:$t,Cea608Stream:fr,Cea708Stream:Vt},mi={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},fa=8589934592,Ga=4294967296,Xs="shared",bn=function(b,E){var T=1;for(b>E&&(T=-1);Math.abs(E-b)>Ga;)b+=T*fa;return b},Vr=function K(b){var E,T;K.prototype.init.call(this),this.type_=b||Xs,this.push=function(k){this.type_!==Xs&&k.type!==this.type_||(T===void 0&&(T=k.dts),k.dts=bn(k.dts,T),k.pts=bn(k.pts,T),E=k.dts,this.trigger("data",k))},this.flush=function(){T=E,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){T=void 0,E=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Vr.prototype=new e;var Qr={TimestampRolloverStream:Vr,handleRollover:bn},Ei=function(b,E,T){var k,P="";for(k=E;k<T;k++)P+="%"+("00"+b[k].toString(16)).slice(-2);return P},os=function(b,E,T){return decodeURIComponent(Ei(b,E,T))},za=function(b,E,T){return unescape(Ei(b,E,T))},or=function(b){return b[0]<<21|b[1]<<14|b[2]<<7|b[3]},On={TXXX:function(b){var E;if(b.data[0]===3){for(E=1;E<b.data.length;E++)if(b.data[E]===0){b.description=os(b.data,1,E),b.value=os(b.data,E+1,b.data.length).replace(/\0*$/,"");break}b.data=b.value}},WXXX:function(b){var E;if(b.data[0]===3){for(E=1;E<b.data.length;E++)if(b.data[E]===0){b.description=os(b.data,1,E),b.url=os(b.data,E+1,b.data.length);break}}},PRIV:function(b){var E;for(E=0;E<b.data.length;E++)if(b.data[E]===0){b.owner=za(b.data,0,E);break}b.privateData=b.data.subarray(E+1),b.data=b.privateData}},Rt;Rt=function(b){var E={descriptor:b&&b.descriptor},T=0,k=[],P=0,M;if(Rt.prototype.init.call(this),this.dispatchType=mi.METADATA_STREAM_TYPE.toString(16),E.descriptor)for(M=0;M<E.descriptor.length;M++)this.dispatchType+=("00"+E.descriptor[M].toString(16)).slice(-2);this.push=function(Z){var le,we,be,ke,Xe,Tt;if(Z.type==="timed-metadata"){if(Z.dataAlignmentIndicator&&(P=0,k.length=0),k.length===0&&(Z.data.length<10||Z.data[0]!==73||Z.data[1]!==68||Z.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(k.push(Z),P+=Z.data.byteLength,k.length===1&&(T=or(Z.data.subarray(6,10)),T+=10),!(P<T)){for(le={data:new Uint8Array(T),frames:[],pts:k[0].pts,dts:k[0].dts},Xe=0;Xe<T;)le.data.set(k[0].data.subarray(0,T-Xe),Xe),Xe+=k[0].data.byteLength,P-=k[0].data.byteLength,k.shift();we=10,le.data[5]&64&&(we+=4,we+=or(le.data.subarray(10,14)),T-=or(le.data.subarray(16,20)));do{if(be=or(le.data.subarray(we+4,we+8)),be<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(Tt=String.fromCharCode(le.data[we],le.data[we+1],le.data[we+2],le.data[we+3]),ke={id:Tt,data:le.data.subarray(we+10,we+be+10)},ke.key=ke.id,On[ke.id]&&(On[ke.id](ke),ke.owner==="com.apple.streaming.transportStreamTimestamp")){var It=ke.data,yt=(It[3]&1)<<30|It[4]<<22|It[5]<<14|It[6]<<6|It[7]>>>2;yt*=4,yt+=It[7]&3,ke.timeStamp=yt,le.pts===void 0&&le.dts===void 0&&(le.pts=ke.timeStamp,le.dts=ke.timeStamp),this.trigger("timestamp",ke)}le.frames.push(ke),we+=10,we+=be}while(we<T);this.trigger("data",le)}}}},Rt.prototype=new e;var qt=Rt,lr=Qr.TimestampRolloverStream,Gt,Ir,tn,_n=188,Pn=71;Gt=function(){var b=new Uint8Array(_n),E=0;Gt.prototype.init.call(this),this.push=function(T){var k=0,P=_n,M;for(E?(M=new Uint8Array(T.byteLength+E),M.set(b.subarray(0,E)),M.set(T,E),E=0):M=T;P<M.byteLength;){if(M[k]===Pn&&M[P]===Pn){this.trigger("data",M.subarray(k,P)),k+=_n,P+=_n;continue}k++,P++}k<M.byteLength&&(b.set(M.subarray(k),0),E=M.byteLength-k)},this.flush=function(){E===_n&&b[0]===Pn&&(this.trigger("data",b),E=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){E=0,this.trigger("reset")}},Gt.prototype=new e,Ir=function(){var b,E,T,k;Ir.prototype.init.call(this),k=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,b=function(M,Z){var le=0;Z.payloadUnitStartIndicator&&(le+=M[le]+1),Z.type==="pat"?E(M.subarray(le),Z):T(M.subarray(le),Z)},E=function(M,Z){Z.section_number=M[7],Z.last_section_number=M[8],k.pmtPid=(M[10]&31)<<8|M[11],Z.pmtPid=k.pmtPid},T=function(M,Z){var le,we,be,ke;if(M[5]&1){for(k.programMapTable={video:null,audio:null,"timed-metadata":{}},le=(M[1]&15)<<8|M[2],we=3+le-4,be=(M[10]&15)<<8|M[11],ke=12+be;ke<we;){var Xe=M[ke],Tt=(M[ke+1]&31)<<8|M[ke+2];Xe===mi.H264_STREAM_TYPE&&k.programMapTable.video===null?k.programMapTable.video=Tt:Xe===mi.ADTS_STREAM_TYPE&&k.programMapTable.audio===null?k.programMapTable.audio=Tt:Xe===mi.METADATA_STREAM_TYPE&&(k.programMapTable["timed-metadata"][Tt]=Xe),ke+=((M[ke+3]&15)<<8|M[ke+4])+5}Z.programMapTable=k.programMapTable}},this.push=function(P){var M={},Z=4;if(M.payloadUnitStartIndicator=!!(P[1]&64),M.pid=P[1]&31,M.pid<<=8,M.pid|=P[2],(P[3]&48)>>>4>1&&(Z+=P[Z]+1),M.pid===0)M.type="pat",b(P.subarray(Z),M),this.trigger("data",M);else if(M.pid===this.pmtPid)for(M.type="pmt",b(P.subarray(Z),M),this.trigger("data",M);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([P,Z,M]):this.processPes_(P,Z,M)},this.processPes_=function(P,M,Z){Z.pid===this.programMapTable.video?Z.streamType=mi.H264_STREAM_TYPE:Z.pid===this.programMapTable.audio?Z.streamType=mi.ADTS_STREAM_TYPE:Z.streamType=this.programMapTable["timed-metadata"][Z.pid],Z.type="pes",Z.data=P.subarray(M),this.trigger("data",Z)}},Ir.prototype=new e,Ir.STREAM_TYPES={h264:27,adts:15},tn=function(){var b=this,E=!1,T={data:[],size:0},k={data:[],size:0},P={data:[],size:0},M,Z=function(be,ke){var Xe,Tt=be[0]<<16|be[1]<<8|be[2];ke.data=new Uint8Array,Tt===1&&(ke.packetLength=6+(be[4]<<8|be[5]),ke.dataAlignmentIndicator=(be[6]&4)!==0,Xe=be[7],Xe&192&&(ke.pts=(be[9]&14)<<27|(be[10]&255)<<20|(be[11]&254)<<12|(be[12]&255)<<5|(be[13]&254)>>>3,ke.pts*=4,ke.pts+=(be[13]&6)>>>1,ke.dts=ke.pts,Xe&64&&(ke.dts=(be[14]&14)<<27|(be[15]&255)<<20|(be[16]&254)<<12|(be[17]&255)<<5|(be[18]&254)>>>3,ke.dts*=4,ke.dts+=(be[18]&6)>>>1)),ke.data=be.subarray(9+be[8]))},le=function(be,ke,Xe){var Tt=new Uint8Array(be.size),It={type:ke},yt=0,Ht=0,$i=!1,Ki;if(!(!be.data.length||be.size<9)){for(It.trackId=be.data[0].pid,yt=0;yt<be.data.length;yt++)Ki=be.data[yt],Tt.set(Ki.data,Ht),Ht+=Ki.data.byteLength;Z(Tt,It),$i=ke==="video"||It.packetLength<=be.size,(Xe||$i)&&(be.size=0,be.data.length=0),$i&&b.trigger("data",It)}};tn.prototype.init.call(this),this.push=function(we){({pat:function(){},pes:function(){var ke,Xe;switch(we.streamType){case mi.H264_STREAM_TYPE:ke=T,Xe="video";break;case mi.ADTS_STREAM_TYPE:ke=k,Xe="audio";break;case mi.METADATA_STREAM_TYPE:ke=P,Xe="timed-metadata";break;default:return}we.payloadUnitStartIndicator&&le(ke,Xe,!0),ke.data.push(we),ke.size+=we.data.byteLength},pmt:function(){var ke={type:"metadata",tracks:[]};M=we.programMapTable,M.video!==null&&ke.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+M.video,codec:"avc",type:"video"}),M.audio!==null&&ke.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+M.audio,codec:"adts",type:"audio"}),E=!0,b.trigger("data",ke)}})[we.type]()},this.reset=function(){T.size=0,T.data.length=0,k.size=0,k.data.length=0,this.trigger("reset")},this.flushStreams_=function(){le(T,"video"),le(k,"audio"),le(P,"timed-metadata")},this.flush=function(){if(!E&&M){var we={type:"metadata",tracks:[]};M.video!==null&&we.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+M.video,codec:"avc",type:"video"}),M.audio!==null&&we.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+M.audio,codec:"adts",type:"audio"}),b.trigger("data",we)}E=!1,this.flushStreams_(),this.trigger("done")}},tn.prototype=new e;var Zr={PAT_PID:0,MP2T_PACKET_LENGTH:_n,TransportPacketStream:Gt,TransportParseStream:Ir,ElementaryStream:tn,TimestampRolloverStream:lr,CaptionStream:gi.CaptionStream,Cea608Stream:gi.Cea608Stream,Cea708Stream:gi.Cea708Stream,MetadataStream:qt};for(var vi in mi)mi.hasOwnProperty(vi)&&(Zr[vi]=mi[vi]);var wn=Zr,Gn=L.ONE_SECOND_IN_TS,Rn,D=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Rn=function(b){var E,T=0;Rn.prototype.init.call(this),this.skipWarn_=function(k,P){this.trigger("log",{level:"warn",message:"adts skiping bytes "+k+" to "+P+" in frame "+T+" outside syncword"})},this.push=function(k){var P=0,M,Z,le,we,be;if(b||(T=0),k.type==="audio"){E&&E.length?(le=E,E=new Uint8Array(le.byteLength+k.data.byteLength),E.set(le),E.set(k.data,le.byteLength)):E=k.data;for(var ke;P+7<E.length;){if(E[P]!==255||(E[P+1]&246)!==240){typeof ke!="number"&&(ke=P),P++;continue}if(typeof ke=="number"&&(this.skipWarn_(ke,P),ke=null),Z=(~E[P+1]&1)*2,M=(E[P+3]&3)<<11|E[P+4]<<3|(E[P+5]&224)>>5,we=((E[P+6]&3)+1)*1024,be=we*Gn/D[(E[P+2]&60)>>>2],E.byteLength-P<M)break;this.trigger("data",{pts:k.pts+T*be,dts:k.dts+T*be,sampleCount:we,audioobjecttype:(E[P+2]>>>6&3)+1,channelcount:(E[P+2]&1)<<2|(E[P+3]&192)>>>6,samplerate:D[(E[P+2]&60)>>>2],samplingfrequencyindex:(E[P+2]&60)>>>2,samplesize:16,data:E.subarray(P+7+Z,P+M)}),T++,P+=M}typeof ke=="number"&&(this.skipWarn_(ke,P),ke=null),E=E.subarray(P)}},this.flush=function(){T=0,this.trigger("done")},this.reset=function(){E=void 0,this.trigger("reset")},this.endTimeline=function(){E=void 0,this.trigger("endedtimeline")}},Rn.prototype=new e;var j=Rn,ae;ae=function(b){var E=b.byteLength,T=0,k=0;this.length=function(){return 8*E},this.bitsAvailable=function(){return 8*E+k},this.loadWord=function(){var P=b.byteLength-E,M=new Uint8Array(4),Z=Math.min(4,E);if(Z===0)throw new Error("no bytes available");M.set(b.subarray(P,P+Z)),T=new DataView(M.buffer).getUint32(0),k=Z*8,E-=Z},this.skipBits=function(P){var M;k>P?(T<<=P,k-=P):(P-=k,M=Math.floor(P/8),P-=M*8,E-=M,this.loadWord(),T<<=P,k-=P)},this.readBits=function(P){var M=Math.min(k,P),Z=T>>>32-M;return k-=M,k>0?T<<=M:E>0&&this.loadWord(),M=P-M,M>0?Z<<M|this.readBits(M):Z},this.skipLeadingZeros=function(){var P;for(P=0;P<k;++P)if((T&2147483648>>>P)!==0)return T<<=P,k-=P,P;return this.loadWord(),P+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var P=this.skipLeadingZeros();return this.readBits(P+1)-1},this.readExpGolomb=function(){var P=this.readUnsignedExpGolomb();return 1&P?1+P>>>1:-1*(P>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Fe=ae,ze,gt,zt;gt=function(){var b=0,E,T;gt.prototype.init.call(this),this.push=function(k){var P;T?(P=new Uint8Array(T.byteLength+k.data.byteLength),P.set(T),P.set(k.data,T.byteLength),T=P):T=k.data;for(var M=T.byteLength;b<M-3;b++)if(T[b+2]===1){E=b+5;break}for(;E<M;)switch(T[E]){case 0:if(T[E-1]!==0){E+=2;break}else if(T[E-2]!==0){E++;break}b+3!==E-2&&this.trigger("data",T.subarray(b+3,E-2));do E++;while(T[E]!==1&&E<M);b=E-2,E+=3;break;case 1:if(T[E-1]!==0||T[E-2]!==0){E+=3;break}this.trigger("data",T.subarray(b+3,E-2)),b=E-2,E+=3;break;default:E+=3;break}T=T.subarray(b),E-=b,b=0},this.reset=function(){T=null,b=0,this.trigger("reset")},this.flush=function(){T&&T.byteLength>3&&this.trigger("data",T.subarray(b+3)),T=null,b=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},gt.prototype=new e,zt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ze=function(){var b=new gt,E,T,k,P,M,Z,le;ze.prototype.init.call(this),E=this,this.push=function(we){we.type==="video"&&(T=we.trackId,k=we.pts,P=we.dts,b.push(we))},b.on("data",function(we){var be={trackId:T,pts:k,dts:P,data:we,nalUnitTypeCode:we[0]&31};switch(be.nalUnitTypeCode){case 5:be.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:be.nalUnitType="sei_rbsp",be.escapedRBSP=M(we.subarray(1));break;case 7:be.nalUnitType="seq_parameter_set_rbsp",be.escapedRBSP=M(we.subarray(1)),be.config=Z(be.escapedRBSP);break;case 8:be.nalUnitType="pic_parameter_set_rbsp";break;case 9:be.nalUnitType="access_unit_delimiter_rbsp";break}E.trigger("data",be)}),b.on("done",function(){E.trigger("done")}),b.on("partialdone",function(){E.trigger("partialdone")}),b.on("reset",function(){E.trigger("reset")}),b.on("endedtimeline",function(){E.trigger("endedtimeline")}),this.flush=function(){b.flush()},this.partialFlush=function(){b.partialFlush()},this.reset=function(){b.reset()},this.endTimeline=function(){b.endTimeline()},le=function(be,ke){var Xe=8,Tt=8,It,yt;for(It=0;It<be;It++)Tt!==0&&(yt=ke.readExpGolomb(),Tt=(Xe+yt+256)%256),Xe=Tt===0?Xe:Tt},M=function(be){for(var ke=be.byteLength,Xe=[],Tt=1,It,yt;Tt<ke-2;)be[Tt]===0&&be[Tt+1]===0&&be[Tt+2]===3?(Xe.push(Tt+2),Tt+=2):Tt++;if(Xe.length===0)return be;It=ke-Xe.length,yt=new Uint8Array(It);var Ht=0;for(Tt=0;Tt<It;Ht++,Tt++)Ht===Xe[0]&&(Ht++,Xe.shift()),yt[Tt]=be[Ht];return yt},Z=function(be){var ke=0,Xe=0,Tt=0,It=0,yt,Ht,$i,Ki,Va,Gl,Gg,zg,Vg,Yf,zl,Fr=[1,1],Wg,Qs;if(yt=new Fe(be),Ht=yt.readUnsignedByte(),Ki=yt.readUnsignedByte(),$i=yt.readUnsignedByte(),yt.skipUnsignedExpGolomb(),zt[Ht]&&(Va=yt.readUnsignedExpGolomb(),Va===3&&yt.skipBits(1),yt.skipUnsignedExpGolomb(),yt.skipUnsignedExpGolomb(),yt.skipBits(1),yt.readBoolean()))for(zl=Va!==3?8:12,Qs=0;Qs<zl;Qs++)yt.readBoolean()&&(Qs<6?le(16,yt):le(64,yt));if(yt.skipUnsignedExpGolomb(),Gl=yt.readUnsignedExpGolomb(),Gl===0)yt.readUnsignedExpGolomb();else if(Gl===1)for(yt.skipBits(1),yt.skipExpGolomb(),yt.skipExpGolomb(),Gg=yt.readUnsignedExpGolomb(),Qs=0;Qs<Gg;Qs++)yt.skipExpGolomb();if(yt.skipUnsignedExpGolomb(),yt.skipBits(1),zg=yt.readUnsignedExpGolomb(),Vg=yt.readUnsignedExpGolomb(),Yf=yt.readBits(1),Yf===0&&yt.skipBits(1),yt.skipBits(1),yt.readBoolean()&&(ke=yt.readUnsignedExpGolomb(),Xe=yt.readUnsignedExpGolomb(),Tt=yt.readUnsignedExpGolomb(),It=yt.readUnsignedExpGolomb()),yt.readBoolean()&&yt.readBoolean()){switch(Wg=yt.readUnsignedByte(),Wg){case 1:Fr=[1,1];break;case 2:Fr=[12,11];break;case 3:Fr=[10,11];break;case 4:Fr=[16,11];break;case 5:Fr=[40,33];break;case 6:Fr=[24,11];break;case 7:Fr=[20,11];break;case 8:Fr=[32,11];break;case 9:Fr=[80,33];break;case 10:Fr=[18,11];break;case 11:Fr=[15,11];break;case 12:Fr=[64,33];break;case 13:Fr=[160,99];break;case 14:Fr=[4,3];break;case 15:Fr=[3,2];break;case 16:Fr=[2,1];break;case 255:{Fr=[yt.readUnsignedByte()<<8|yt.readUnsignedByte(),yt.readUnsignedByte()<<8|yt.readUnsignedByte()];break}}Fr&&Fr[0]/Fr[1]}return{profileIdc:Ht,levelIdc:$i,profileCompatibility:Ki,width:(zg+1)*16-ke*2-Xe*2,height:(2-Yf)*(Vg+1)*16-Tt*2-It*2,sarRatio:Fr}}},ze.prototype=new e;var Dr={H264Stream:ze,NalByteStream:gt},Ct=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Yt=function(b,E){var T=b[E+6]<<21|b[E+7]<<14|b[E+8]<<7|b[E+9],k=b[E+5],P=(k&16)>>4;return T=T>=0?T:0,P?T+20:T+10},Lt=function K(b,E){return b.length-E<10||b[E]!==73||b[E+1]!==68||b[E+2]!==51?E:(E+=Yt(b,E),K(b,E))},zn=function(b){var E=Lt(b,0);return b.length>=E+2&&(b[E]&255)===255&&(b[E+1]&240)===240&&(b[E+1]&22)===16},ln=function(b){return b[0]<<21|b[1]<<14|b[2]<<7|b[3]},rr=function(b,E,T){var k,P="";for(k=E;k<T;k++)P+="%"+("00"+b[k].toString(16)).slice(-2);return P},Ln=function(b,E,T){return unescape(rr(b,E,T))},yi=function(b,E){var T=(b[E+5]&224)>>5,k=b[E+4]<<3,P=b[E+3]&6144;return P|k|T},oi=function(b,E){return b[E]===73&&b[E+1]===68&&b[E+2]===51?"timed-metadata":b[E]&!0&&(b[E+1]&240)===240?"audio":null},Hr=function(b){for(var E=0;E+5<b.length;){if(b[E]!==255||(b[E+1]&246)!==240){E++;continue}return Ct[(b[E+2]&60)>>>2]}return null},Ui=function(b){var E,T,k,P;E=10,b[5]&64&&(E+=4,E+=ln(b.subarray(10,14)));do{if(T=ln(b.subarray(E+4,E+8)),T<1)return null;if(P=String.fromCharCode(b[E],b[E+1],b[E+2],b[E+3]),P==="PRIV"){k=b.subarray(E+10,E+T+10);for(var M=0;M<k.byteLength;M++)if(k[M]===0){var Z=Ln(k,0,M);if(Z==="com.apple.streaming.transportStreamTimestamp"){var le=k.subarray(M+1),we=(le[3]&1)<<30|le[4]<<22|le[5]<<14|le[6]<<6|le[7]>>>2;return we*=4,we+=le[7]&3,we}break}}E+=10,E+=T}while(E<b.byteLength);return null},xi={isLikelyAacData:zn,parseId3TagSize:Yt,parseAdtsSize:yi,parseType:oi,parseSampleRate:Hr,parseAacTimestamp:Ui},Vi;Vi=function(){var b=new Uint8Array,E=0;Vi.prototype.init.call(this),this.setTimestamp=function(T){E=T},this.push=function(T){var k=0,P=0,M,Z,le,we;for(b.length?(we=b.length,b=new Uint8Array(T.byteLength+we),b.set(b.subarray(0,we)),b.set(T,we)):b=T;b.length-P>=3;){if(b[P]===73&&b[P+1]===68&&b[P+2]===51){if(b.length-P<10||(k=xi.parseId3TagSize(b,P),P+k>b.length))break;Z={type:"timed-metadata",data:b.subarray(P,P+k)},this.trigger("data",Z),P+=k;continue}else if((b[P]&255)===255&&(b[P+1]&240)===240){if(b.length-P<7||(k=xi.parseAdtsSize(b,P),P+k>b.length))break;le={type:"audio",data:b.subarray(P,P+k),pts:E,dts:E},this.trigger("data",le),P+=k;continue}P++}M=b.length-P,M>0?b=b.subarray(P):b=new Uint8Array},this.reset=function(){b=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){b=new Uint8Array,this.trigger("endedtimeline")}},Vi.prototype=new e;var ei=Vi,dn=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],xc=dn,ko=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Bt=ko,dr=Dr.H264Stream,gr=xi.isLikelyAacData,ti=L.ONE_SECOND_IN_TS,Cr,Or,Aa,fn,Io=function(b,E){E.stream=b,this.trigger("log",E)},Ii=function(b,E){for(var T=Object.keys(E),k=0;k<T.length;k++){var P=T[k];P==="headOfPipeline"||!E[P].on||E[P].on("log",Io.bind(b,P))}},Ou=function(b,E){var T;if(b.length!==E.length)return!1;for(T=0;T<b.length;T++)if(b[T]!==E[T])return!1;return!0},Do=function(b,E,T,k,P,M){var Z=T-E,le=k-E,we=P-T;return{start:{dts:b,pts:b+Z},end:{dts:b+le,pts:b+we},prependedContentDuration:M,baseMediaDecodeTime:b}};Or=function(b,E){var T=[],k,P=0,M=0,Z=1/0;E=E||{},k=E.firstSequenceNumber||0,Or.prototype.init.call(this),this.push=function(le){Jt.collectDtsInfo(b,le),b&&xc.forEach(function(we){b[we]=le[we]}),T.push(le)},this.setEarliestDts=function(le){P=le},this.setVideoBaseMediaDecodeTime=function(le){Z=le},this.setAudioAppendStart=function(le){M=le},this.flush=function(){var le,we,be,ke,Xe,Tt,It;if(T.length===0){this.trigger("done","AudioSegmentStream");return}le=Ee.trimAdtsFramesByEarliestDts(T,b,P),b.baseMediaDecodeTime=Jt.calculateTrackBaseMediaDecodeTime(b,E.keepOriginalTimestamps),It=Ee.prefixWithSilence(b,le,M,Z),b.samples=Ee.generateSampleTable(le),be=Q.mdat(Ee.concatenateFrameData(le)),T=[],we=Q.moof(k,[b]),ke=new Uint8Array(we.byteLength+be.byteLength),k++,ke.set(we),ke.set(be,we.byteLength),Jt.clearDtsInfo(b),Xe=Math.ceil(ti*1024/b.samplerate),le.length&&(Tt=le.length*Xe,this.trigger("segmentTimingInfo",Do(L.audioTsToVideoTs(b.baseMediaDecodeTime,b.samplerate),le[0].dts,le[0].pts,le[0].dts+Tt,le[0].pts+Tt,It||0)),this.trigger("timingInfo",{start:le[0].pts,end:le[0].pts+Tt})),this.trigger("data",{track:b,boxes:ke}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Jt.clearDtsInfo(b),T=[],this.trigger("reset")}},Or.prototype=new e,Cr=function(b,E){var T,k=[],P=[],M,Z;E=E||{},T=E.firstSequenceNumber||0,Cr.prototype.init.call(this),delete b.minPTS,this.gopCache_=[],this.push=function(le){Jt.collectDtsInfo(b,le),le.nalUnitType==="seq_parameter_set_rbsp"&&!M&&(M=le.config,b.sps=[le.data],Bt.forEach(function(we){b[we]=M[we]},this)),le.nalUnitType==="pic_parameter_set_rbsp"&&!Z&&(Z=le.data,b.pps=[le.data]),k.push(le)},this.flush=function(){for(var le,we,be,ke,Xe,Tt,It=0,yt,Ht;k.length&&k[0].nalUnitType!=="access_unit_delimiter_rbsp";)k.shift();if(k.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(le=qe.groupNalsIntoFrames(k),be=qe.groupFramesIntoGops(le),be[0][0].keyFrame||(we=this.getGopForFusion_(k[0],b),we?(It=we.duration,be.unshift(we),be.byteLength+=we.byteLength,be.nalCount+=we.nalCount,be.pts=we.pts,be.dts=we.dts,be.duration+=we.duration):be=qe.extendFirstKeyFrame(be)),P.length){var $i;if(E.alignGopsAtEnd?$i=this.alignGopsAtEnd_(be):$i=this.alignGopsAtStart_(be),!$i){this.gopCache_.unshift({gop:be.pop(),pps:b.pps,sps:b.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),k=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Jt.clearDtsInfo(b),be=$i}Jt.collectDtsInfo(b,be),b.samples=qe.generateSampleTable(be),Xe=Q.mdat(qe.concatenateNalData(be)),b.baseMediaDecodeTime=Jt.calculateTrackBaseMediaDecodeTime(b,E.keepOriginalTimestamps),this.trigger("processedGopsInfo",be.map(function(Ki){return{pts:Ki.pts,dts:Ki.dts,byteLength:Ki.byteLength}})),yt=be[0],Ht=be[be.length-1],this.trigger("segmentTimingInfo",Do(b.baseMediaDecodeTime,yt.dts,yt.pts,Ht.dts+Ht.duration,Ht.pts+Ht.duration,It)),this.trigger("timingInfo",{start:be[0].pts,end:be[be.length-1].pts+be[be.length-1].duration}),this.gopCache_.unshift({gop:be.pop(),pps:b.pps,sps:b.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),k=[],this.trigger("baseMediaDecodeTime",b.baseMediaDecodeTime),this.trigger("timelineStartInfo",b.timelineStartInfo),ke=Q.moof(T,[b]),Tt=new Uint8Array(ke.byteLength+Xe.byteLength),T++,Tt.set(ke),Tt.set(Xe,ke.byteLength),this.trigger("data",{track:b,boxes:Tt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),k=[],this.gopCache_.length=0,P.length=0,this.trigger("reset")},this.resetStream_=function(){Jt.clearDtsInfo(b),M=void 0,Z=void 0},this.getGopForFusion_=function(le){var we=45e3,be=1e4,ke=1/0,Xe,Tt,It,yt,Ht;for(Ht=0;Ht<this.gopCache_.length;Ht++)yt=this.gopCache_[Ht],It=yt.gop,!(!(b.pps&&Ou(b.pps[0],yt.pps[0]))||!(b.sps&&Ou(b.sps[0],yt.sps[0])))&&(It.dts<b.timelineStartInfo.dts||(Xe=le.dts-It.dts-It.duration,Xe>=-be&&Xe<=we&&(!Tt||ke>Xe)&&(Tt=yt,ke=Xe)));return Tt?Tt.gop:null},this.alignGopsAtStart_=function(le){var we,be,ke,Xe,Tt,It,yt,Ht;for(Tt=le.byteLength,It=le.nalCount,yt=le.duration,we=be=0;we<P.length&&be<le.length&&(ke=P[we],Xe=le[be],ke.pts!==Xe.pts);){if(Xe.pts>ke.pts){we++;continue}be++,Tt-=Xe.byteLength,It-=Xe.nalCount,yt-=Xe.duration}return be===0?le:be===le.length?null:(Ht=le.slice(be),Ht.byteLength=Tt,Ht.duration=yt,Ht.nalCount=It,Ht.pts=Ht[0].pts,Ht.dts=Ht[0].dts,Ht)},this.alignGopsAtEnd_=function(le){var we,be,ke,Xe,Tt,It;for(we=P.length-1,be=le.length-1,Tt=null,It=!1;we>=0&&be>=0;){if(ke=P[we],Xe=le[be],ke.pts===Xe.pts){It=!0;break}if(ke.pts>Xe.pts){we--;continue}we===P.length-1&&(Tt=be),be--}if(!It&&Tt===null)return null;var yt;if(It?yt=be:yt=Tt,yt===0)return le;var Ht=le.slice(yt),$i=Ht.reduce(function(Ki,Va){return Ki.byteLength+=Va.byteLength,Ki.duration+=Va.duration,Ki.nalCount+=Va.nalCount,Ki},{byteLength:0,duration:0,nalCount:0});return Ht.byteLength=$i.byteLength,Ht.duration=$i.duration,Ht.nalCount=$i.nalCount,Ht.pts=Ht[0].pts,Ht.dts=Ht[0].dts,Ht},this.alignGopsWith=function(le){P=le}},Cr.prototype=new e,fn=function(b,E){this.numberOfTracks=0,this.metadataStream=E,b=b||{},typeof b.remux<"u"?this.remuxTracks=!!b.remux:this.remuxTracks=!0,typeof b.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=b.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,fn.prototype.init.call(this),this.push=function(T){if(T.text)return this.pendingCaptions.push(T);if(T.frames)return this.pendingMetadata.push(T);this.pendingTracks.push(T.track),this.pendingBytes+=T.boxes.byteLength,T.track.type==="video"&&(this.videoTrack=T.track,this.pendingBoxes.push(T.boxes)),T.track.type==="audio"&&(this.audioTrack=T.track,this.pendingBoxes.unshift(T.boxes))}},fn.prototype=new e,fn.prototype.flush=function(K){var b=0,E={captions:[],captionStreams:{},metadata:[],info:{}},T,k,P,M=0,Z;if(this.pendingTracks.length<this.numberOfTracks){if(K!=="VideoSegmentStream"&&K!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(M=this.videoTrack.timelineStartInfo.pts,Bt.forEach(function(le){E.info[le]=this.videoTrack[le]},this)):this.audioTrack&&(M=this.audioTrack.timelineStartInfo.pts,xc.forEach(function(le){E.info[le]=this.audioTrack[le]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?E.type=this.pendingTracks[0].type:E.type="combined",this.emittedTracks+=this.pendingTracks.length,P=Q.initSegment(this.pendingTracks),E.initSegment=new Uint8Array(P.byteLength),E.initSegment.set(P),E.data=new Uint8Array(this.pendingBytes),Z=0;Z<this.pendingBoxes.length;Z++)E.data.set(this.pendingBoxes[Z],b),b+=this.pendingBoxes[Z].byteLength;for(Z=0;Z<this.pendingCaptions.length;Z++)T=this.pendingCaptions[Z],T.startTime=L.metadataTsToSeconds(T.startPts,M,this.keepOriginalTimestamps),T.endTime=L.metadataTsToSeconds(T.endPts,M,this.keepOriginalTimestamps),E.captionStreams[T.stream]=!0,E.captions.push(T);for(Z=0;Z<this.pendingMetadata.length;Z++)k=this.pendingMetadata[Z],k.cueTime=L.metadataTsToSeconds(k.pts,M,this.keepOriginalTimestamps),E.metadata.push(k);for(E.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",E),Z=0;Z<E.captions.length;Z++)T=E.captions[Z],this.trigger("caption",T);for(Z=0;Z<E.metadata.length;Z++)k=E.metadata[Z],this.trigger("id3Frame",k)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},fn.prototype.setRemux=function(K){this.remuxTracks=K},Aa=function(b){var E=this,T=!0,k,P;Aa.prototype.init.call(this),b=b||{},this.baseMediaDecodeTime=b.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var M={};this.transmuxPipeline_=M,M.type="aac",M.metadataStream=new wn.MetadataStream,M.aacStream=new ei,M.audioTimestampRolloverStream=new wn.TimestampRolloverStream("audio"),M.timedMetadataTimestampRolloverStream=new wn.TimestampRolloverStream("timed-metadata"),M.adtsStream=new j,M.coalesceStream=new fn(b,M.metadataStream),M.headOfPipeline=M.aacStream,M.aacStream.pipe(M.audioTimestampRolloverStream).pipe(M.adtsStream),M.aacStream.pipe(M.timedMetadataTimestampRolloverStream).pipe(M.metadataStream).pipe(M.coalesceStream),M.metadataStream.on("timestamp",function(Z){M.aacStream.setTimestamp(Z.timeStamp)}),M.aacStream.on("data",function(Z){Z.type!=="timed-metadata"&&Z.type!=="audio"||M.audioSegmentStream||(P=P||{timelineStartInfo:{baseMediaDecodeTime:E.baseMediaDecodeTime},codec:"adts",type:"audio"},M.coalesceStream.numberOfTracks++,M.audioSegmentStream=new Or(P,b),M.audioSegmentStream.on("log",E.getLogTrigger_("audioSegmentStream")),M.audioSegmentStream.on("timingInfo",E.trigger.bind(E,"audioTimingInfo")),M.adtsStream.pipe(M.audioSegmentStream).pipe(M.coalesceStream),E.trigger("trackinfo",{hasAudio:!!P,hasVideo:!!k}))}),M.coalesceStream.on("data",this.trigger.bind(this,"data")),M.coalesceStream.on("done",this.trigger.bind(this,"done")),Ii(this,M)},this.setupTsPipeline=function(){var M={};this.transmuxPipeline_=M,M.type="ts",M.metadataStream=new wn.MetadataStream,M.packetStream=new wn.TransportPacketStream,M.parseStream=new wn.TransportParseStream,M.elementaryStream=new wn.ElementaryStream,M.timestampRolloverStream=new wn.TimestampRolloverStream,M.adtsStream=new j,M.h264Stream=new dr,M.captionStream=new wn.CaptionStream(b),M.coalesceStream=new fn(b,M.metadataStream),M.headOfPipeline=M.packetStream,M.packetStream.pipe(M.parseStream).pipe(M.elementaryStream).pipe(M.timestampRolloverStream),M.timestampRolloverStream.pipe(M.h264Stream),M.timestampRolloverStream.pipe(M.adtsStream),M.timestampRolloverStream.pipe(M.metadataStream).pipe(M.coalesceStream),M.h264Stream.pipe(M.captionStream).pipe(M.coalesceStream),M.elementaryStream.on("data",function(Z){var le;if(Z.type==="metadata"){for(le=Z.tracks.length;le--;)!k&&Z.tracks[le].type==="video"?(k=Z.tracks[le],k.timelineStartInfo.baseMediaDecodeTime=E.baseMediaDecodeTime):!P&&Z.tracks[le].type==="audio"&&(P=Z.tracks[le],P.timelineStartInfo.baseMediaDecodeTime=E.baseMediaDecodeTime);k&&!M.videoSegmentStream&&(M.coalesceStream.numberOfTracks++,M.videoSegmentStream=new Cr(k,b),M.videoSegmentStream.on("log",E.getLogTrigger_("videoSegmentStream")),M.videoSegmentStream.on("timelineStartInfo",function(we){P&&!b.keepOriginalTimestamps&&(P.timelineStartInfo=we,M.audioSegmentStream.setEarliestDts(we.dts-E.baseMediaDecodeTime))}),M.videoSegmentStream.on("processedGopsInfo",E.trigger.bind(E,"gopInfo")),M.videoSegmentStream.on("segmentTimingInfo",E.trigger.bind(E,"videoSegmentTimingInfo")),M.videoSegmentStream.on("baseMediaDecodeTime",function(we){P&&M.audioSegmentStream.setVideoBaseMediaDecodeTime(we)}),M.videoSegmentStream.on("timingInfo",E.trigger.bind(E,"videoTimingInfo")),M.h264Stream.pipe(M.videoSegmentStream).pipe(M.coalesceStream)),P&&!M.audioSegmentStream&&(M.coalesceStream.numberOfTracks++,M.audioSegmentStream=new Or(P,b),M.audioSegmentStream.on("log",E.getLogTrigger_("audioSegmentStream")),M.audioSegmentStream.on("timingInfo",E.trigger.bind(E,"audioTimingInfo")),M.audioSegmentStream.on("segmentTimingInfo",E.trigger.bind(E,"audioSegmentTimingInfo")),M.adtsStream.pipe(M.audioSegmentStream).pipe(M.coalesceStream)),E.trigger("trackinfo",{hasAudio:!!P,hasVideo:!!k})}}),M.coalesceStream.on("data",this.trigger.bind(this,"data")),M.coalesceStream.on("id3Frame",function(Z){Z.dispatchType=M.metadataStream.dispatchType,E.trigger("id3Frame",Z)}),M.coalesceStream.on("caption",this.trigger.bind(this,"caption")),M.coalesceStream.on("done",this.trigger.bind(this,"done")),Ii(this,M)},this.setBaseMediaDecodeTime=function(M){var Z=this.transmuxPipeline_;b.keepOriginalTimestamps||(this.baseMediaDecodeTime=M),P&&(P.timelineStartInfo.dts=void 0,P.timelineStartInfo.pts=void 0,Jt.clearDtsInfo(P),Z.audioTimestampRolloverStream&&Z.audioTimestampRolloverStream.discontinuity()),k&&(Z.videoSegmentStream&&(Z.videoSegmentStream.gopCache_=[]),k.timelineStartInfo.dts=void 0,k.timelineStartInfo.pts=void 0,Jt.clearDtsInfo(k),Z.captionStream.reset()),Z.timestampRolloverStream&&Z.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(M){P&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(M)},this.setRemux=function(M){var Z=this.transmuxPipeline_;b.remux=M,Z&&Z.coalesceStream&&Z.coalesceStream.setRemux(M)},this.alignGopsWith=function(M){k&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(M)},this.getLogTrigger_=function(M){var Z=this;return function(le){le.stream=M,Z.trigger("log",le)}},this.push=function(M){if(T){var Z=gr(M);Z&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!Z&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),T=!1}this.transmuxPipeline_.headOfPipeline.push(M)},this.flush=function(){T=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Aa.prototype=new e;var Pu={Transmuxer:Aa,VideoSegmentStream:Cr,AudioSegmentStream:Or,AUDIO_PROPERTIES:xc,VIDEO_PROPERTIES:Bt,generateSegmentTimingInfo:Do},qf=function(b){return b>>>0},us=function(b){return("00"+b.toString(16)).slice(-2)},ka={toUnsigned:qf,toHexString:us},Ru=function(b){var E="";return E+=String.fromCharCode(b[0]),E+=String.fromCharCode(b[1]),E+=String.fromCharCode(b[2]),E+=String.fromCharCode(b[3]),E},pn=Ru,Wi=ka.toUnsigned,Oo=function K(b,E){var T=[],k,P,M,Z,le;if(!E.length)return null;for(k=0;k<b.byteLength;)P=Wi(b[k]<<24|b[k+1]<<16|b[k+2]<<8|b[k+3]),M=pn(b.subarray(k+4,k+8)),Z=P>1?k+P:b.byteLength,M===E[0]&&(E.length===1?T.push(b.subarray(k+8,Z)):(le=K(b.subarray(k+8,Z),E.slice(1)),le.length&&(T=T.concat(le)))),k=Z;return T},ri=Oo,Og=ka.toUnsigned,db=i.getUint64,Pg=function(b){var E={version:b[0],flags:new Uint8Array(b.subarray(1,4))};return E.version===1?E.baseMediaDecodeTime=db(b.subarray(4)):E.baseMediaDecodeTime=Og(b[4]<<24|b[5]<<16|b[6]<<8|b[7]),E},jf=Pg,Fl=function(b){return{isLeading:(b[0]&12)>>>2,dependsOn:b[0]&3,isDependedOn:(b[1]&192)>>>6,hasRedundancy:(b[1]&48)>>>4,paddingValue:(b[1]&14)>>>1,isNonSyncSample:b[1]&1,degradationPriority:b[2]<<8|b[3]}},Rg=Fl,fb=function(b){var E={version:b[0],flags:new Uint8Array(b.subarray(1,4)),samples:[]},T=new DataView(b.buffer,b.byteOffset,b.byteLength),k=E.flags[2]&1,P=E.flags[2]&4,M=E.flags[1]&1,Z=E.flags[1]&2,le=E.flags[1]&4,we=E.flags[1]&8,be=T.getUint32(4),ke=8,Xe;for(k&&(E.dataOffset=T.getInt32(ke),ke+=4),P&&be&&(Xe={flags:Rg(b.subarray(ke,ke+4))},ke+=4,M&&(Xe.duration=T.getUint32(ke),ke+=4),Z&&(Xe.size=T.getUint32(ke),ke+=4),we&&(E.version===1?Xe.compositionTimeOffset=T.getInt32(ke):Xe.compositionTimeOffset=T.getUint32(ke),ke+=4),E.samples.push(Xe),be--);be--;)Xe={},M&&(Xe.duration=T.getUint32(ke),ke+=4),Z&&(Xe.size=T.getUint32(ke),ke+=4),le&&(Xe.flags=Rg(b.subarray(ke,ke+4)),ke+=4),we&&(E.version===1?Xe.compositionTimeOffset=T.getInt32(ke):Xe.compositionTimeOffset=T.getUint32(ke),ke+=4),E.samples.push(Xe);return E},Lg=fb,pb=function(b){var E=new DataView(b.buffer,b.byteOffset,b.byteLength),T={version:b[0],flags:new Uint8Array(b.subarray(1,4)),trackId:E.getUint32(4)},k=T.flags[2]&1,P=T.flags[2]&2,M=T.flags[2]&8,Z=T.flags[2]&16,le=T.flags[2]&32,we=T.flags[0]&65536,be=T.flags[0]&131072,ke;return ke=8,k&&(ke+=4,T.baseDataOffset=E.getUint32(12),ke+=4),P&&(T.sampleDescriptionIndex=E.getUint32(ke),ke+=4),M&&(T.defaultSampleDuration=E.getUint32(ke),ke+=4),Z&&(T.defaultSampleSize=E.getUint32(ke),ke+=4),le&&(T.defaultSampleFlags=E.getUint32(ke)),we&&(T.durationIsEmpty=!0),!k&&be&&(T.baseDataOffsetIsMoof=!0),T},Ng=pb,Fg=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{},Lu;typeof window<"u"?Lu=window:typeof Fg<"u"?Lu=Fg:typeof self<"u"?Lu=self:Lu={};var Ac=Lu,Hf=Yr.discardEmulationPreventionBytes,Mg=gi.CaptionStream,hb=function(b,E){for(var T=b,k=0;k<E.length;k++){var P=E[k];if(T<P.size)return P;T-=P.size}return null},Ml=function(b,E,T){var k=new DataView(b.buffer,b.byteOffset,b.byteLength),P={logs:[],seiNals:[]},M,Z,le,we;for(Z=0;Z+4<b.length;Z+=le)if(le=k.getUint32(Z),Z+=4,!(le<=0))switch(b[Z]&31){case 6:var be=b.subarray(Z+1,Z+1+le),ke=hb(Z,E);if(M={nalUnitType:"sei_rbsp",size:le,data:be,escapedRBSP:Hf(be),trackId:T},ke)M.pts=ke.pts,M.dts=ke.dts,we=ke;else if(we)M.pts=we.pts,M.dts=we.dts;else{P.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Z+" for trackId "+T+". See mux.js#223."});break}P.seiNals.push(M);break}return P},Ug=function(b,E,T){var k=E,P=T.defaultSampleDuration||0,M=T.defaultSampleSize||0,Z=T.trackId,le=[];return b.forEach(function(we){var be=Lg(we),ke=be.samples;ke.forEach(function(Xe){Xe.duration===void 0&&(Xe.duration=P),Xe.size===void 0&&(Xe.size=M),Xe.trackId=Z,Xe.dts=k,Xe.compositionTimeOffset===void 0&&(Xe.compositionTimeOffset=0),typeof k=="bigint"?(Xe.pts=k+Ac.BigInt(Xe.compositionTimeOffset),k+=Ac.BigInt(Xe.duration)):(Xe.pts=k+Xe.compositionTimeOffset,k+=Xe.duration)}),le=le.concat(ke)}),le},Po=function(b,E){var T=ri(b,["moof","traf"]),k=ri(b,["mdat"]),P={},M=[];return k.forEach(function(Z,le){var we=T[le];M.push({mdat:Z,traf:we})}),M.forEach(function(Z){var le=Z.mdat,we=Z.traf,be=ri(we,["tfhd"]),ke=Ng(be[0]),Xe=ke.trackId,Tt=ri(we,["tfdt"]),It=Tt.length>0?jf(Tt[0]).baseMediaDecodeTime:0,yt=ri(we,["trun"]),Ht,$i;E===Xe&&yt.length>0&&(Ht=Ug(yt,It,ke),$i=Ml(le,Ht,Xe),P[Xe]||(P[Xe]={seiNals:[],logs:[]}),P[Xe].seiNals=P[Xe].seiNals.concat($i.seiNals),P[Xe].logs=P[Xe].logs.concat($i.logs))}),P},Ro=function(b,E,T){var k;if(E===null)return null;k=Po(b,E);var P=k[E]||{};return{seiNals:P.seiNals,logs:P.logs,timescale:T}},$g=function(){var b=!1,E,T,k,P,M,Z;this.isInitialized=function(){return b},this.init=function(le){E=new Mg,b=!0,Z=le?le.isPartial:!1,E.on("data",function(we){we.startTime=we.startPts/P,we.endTime=we.endPts/P,M.captions.push(we),M.captionStreams[we.stream]=!0}),E.on("log",function(we){M.logs.push(we)})},this.isNewInit=function(le,we){return le&&le.length===0||we&&typeof we=="object"&&Object.keys(we).length===0?!1:k!==le[0]||P!==we[k]},this.parse=function(le,we,be){var ke;if(this.isInitialized()){if(!we||!be)return null;if(this.isNewInit(we,be))k=we[0],P=be[k];else if(k===null||!P)return T.push(le),null}else return null;for(;T.length>0;){var Xe=T.shift();this.parse(Xe,we,be)}return ke=Ro(le,k,P),ke&&ke.logs&&(M.logs=M.logs.concat(ke.logs)),ke===null||!ke.seiNals?M.logs.length?{logs:M.logs,captions:[],captionStreams:[]}:null:(this.pushNals(ke.seiNals),this.flushStream(),M)},this.pushNals=function(le){if(!this.isInitialized()||!le||le.length===0)return null;le.forEach(function(we){E.push(we)})},this.flushStream=function(){if(!this.isInitialized())return null;Z?E.partialFlush():E.flush()},this.clearParsedCaptions=function(){M.captions=[],M.captionStreams={},M.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;E.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){T=[],k=null,P=null,M?this.clearParsedCaptions():M={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},kc=$g,xs=ka.toUnsigned,Lo=ka.toHexString,gb=i.getUint64,Gf,Ul,zf,mr,Vf,Wf;Gf=function(b){var E={},T=ri(b,["moov","trak"]);return T.reduce(function(k,P){var M,Z,le,we,be;return M=ri(P,["tkhd"])[0],!M||(Z=M[0],le=Z===0?12:20,we=xs(M[le]<<24|M[le+1]<<16|M[le+2]<<8|M[le+3]),be=ri(P,["mdia","mdhd"])[0],!be)?null:(Z=be[0],le=Z===0?12:20,k[we]=xs(be[le]<<24|be[le+1]<<16|be[le+2]<<8|be[le+3]),k)},E)},Ul=function(b,E){var T;T=ri(E,["moof","traf"]);var k=T.reduce(function(P,M){var Z=ri(M,["tfhd"])[0],le=xs(Z[4]<<24|Z[5]<<16|Z[6]<<8|Z[7]),we=b[le]||9e4,be=ri(M,["tfdt"])[0],ke=new DataView(be.buffer,be.byteOffset,be.byteLength),Xe;be[0]===1?Xe=gb(be.subarray(4,12)):Xe=ke.getUint32(4);var Tt;return typeof Xe=="bigint"?Tt=Xe/Ac.BigInt(we):typeof Xe=="number"&&!isNaN(Xe)&&(Tt=Xe/we),Tt<Number.MAX_SAFE_INTEGER&&(Tt=Number(Tt)),Tt<P&&(P=Tt),P},1/0);return typeof k=="bigint"||isFinite(k)?k:0},zf=function(b,E){var T=ri(E,["moof","traf"]),k=0,P=0,M;if(T&&T.length){var Z=ri(T[0],["tfhd"])[0],le=ri(T[0],["trun"])[0],we=ri(T[0],["tfdt"])[0];if(Z){var be=Ng(Z);M=be.trackId}if(we){var ke=jf(we);k=ke.baseMediaDecodeTime}if(le){var Xe=Lg(le);Xe.samples&&Xe.samples.length&&(P=Xe.samples[0].compositionTimeOffset||0)}}var Tt=b[M]||9e4;typeof k=="bigint"&&(P=Ac.BigInt(P),Tt=Ac.BigInt(Tt));var It=(k+P)/Tt;return typeof It=="bigint"&&It<Number.MAX_SAFE_INTEGER&&(It=Number(It)),It},mr=function(b){var E=ri(b,["moov","trak"]),T=[];return E.forEach(function(k){var P=ri(k,["mdia","hdlr"]),M=ri(k,["tkhd"]);P.forEach(function(Z,le){var we=pn(Z.subarray(8,12)),be=M[le],ke,Xe,Tt;we==="vide"&&(ke=new DataView(be.buffer,be.byteOffset,be.byteLength),Xe=ke.getUint8(0),Tt=Xe===0?ke.getUint32(12):ke.getUint32(20),T.push(Tt))})}),T},Wf=function(b){var E=b[0],T=E===0?12:20;return xs(b[T]<<24|b[T+1]<<16|b[T+2]<<8|b[T+3])},Vf=function(b){var E=ri(b,["moov","trak"]),T=[];return E.forEach(function(k){var P={},M=ri(k,["tkhd"])[0],Z,le;M&&(Z=new DataView(M.buffer,M.byteOffset,M.byteLength),le=Z.getUint8(0),P.id=le===0?Z.getUint32(12):Z.getUint32(20));var we=ri(k,["mdia","hdlr"])[0];if(we){var be=pn(we.subarray(8,12));be==="vide"?P.type="video":be==="soun"?P.type="audio":P.type=be}var ke=ri(k,["mdia","minf","stbl","stsd"])[0];if(ke){var Xe=ke.subarray(8);P.codec=pn(Xe.subarray(4,8));var Tt=ri(Xe,[P.codec])[0],It,yt;Tt&&(/^[asm]vc[1-9]$/i.test(P.codec)?(It=Tt.subarray(78),yt=pn(It.subarray(4,8)),yt==="avcC"&&It.length>11?(P.codec+=".",P.codec+=Lo(It[9]),P.codec+=Lo(It[10]),P.codec+=Lo(It[11])):P.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(P.codec)?(It=Tt.subarray(28),yt=pn(It.subarray(4,8)),yt==="esds"&&It.length>20&&It[19]!==0?(P.codec+="."+Lo(It[19]),P.codec+="."+Lo(It[20]>>>2&63).replace(/^0/,"")):P.codec="mp4a.40.2"):P.codec=P.codec.toLowerCase())}var Ht=ri(k,["mdia","mdhd"])[0];Ht&&(P.timescale=Wf(Ht)),T.push(P)}),T};var Bg={findBox:ri,parseType:pn,timescale:Gf,startTime:Ul,compositionStartTime:zf,videoTrackIds:mr,tracks:Vf,getTimescaleFromMediaHeader:Wf},$l=function(b){var E=b[1]&31;return E<<=8,E|=b[2],E},Bl=function(b){return!!(b[1]&64)},ql=function(b){var E=0;return(b[3]&48)>>>4>1&&(E+=b[4]+1),E},mb=function(b,E){var T=$l(b);return T===0?"pat":T===E?"pmt":E?"pes":null},Kf=function(b){var E=Bl(b),T=4+ql(b);return E&&(T+=b[T]+1),(b[T+10]&31)<<8|b[T+11]},vb=function(b){var E={},T=Bl(b),k=4+ql(b);if(T&&(k+=b[k]+1),!!(b[k+5]&1)){var P,M,Z;P=(b[k+1]&15)<<8|b[k+2],M=3+P-4,Z=(b[k+10]&15)<<8|b[k+11];for(var le=12+Z;le<M;){var we=k+le;E[(b[we+1]&31)<<8|b[we+2]]=b[we],le+=((b[we+3]&15)<<8|b[we+4])+5}return E}},Ic=function(b,E){var T=$l(b),k=E[T];switch(k){case mi.H264_STREAM_TYPE:return"video";case mi.ADTS_STREAM_TYPE:return"audio";case mi.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},qg=function(b){var E=Bl(b);if(!E)return null;var T=4+ql(b);if(T>=b.byteLength)return null;var k=null,P;return P=b[T+7],P&192&&(k={},k.pts=(b[T+9]&14)<<27|(b[T+10]&255)<<20|(b[T+11]&254)<<12|(b[T+12]&255)<<5|(b[T+13]&254)>>>3,k.pts*=4,k.pts+=(b[T+13]&6)>>>1,k.dts=k.pts,P&64&&(k.dts=(b[T+14]&14)<<27|(b[T+15]&255)<<20|(b[T+16]&254)<<12|(b[T+17]&255)<<5|(b[T+18]&254)>>>3,k.dts*=4,k.dts+=(b[T+18]&6)>>>1)),k},Ys=function(b){switch(b){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Xf=function(b){for(var E=4+ql(b),T=b.subarray(E),k=0,P=0,M=!1,Z;P<T.byteLength-3;P++)if(T[P+2]===1){k=P+5;break}for(;k<T.byteLength;)switch(T[k]){case 0:if(T[k-1]!==0){k+=2;break}else if(T[k-2]!==0){k++;break}P+3!==k-2&&(Z=Ys(T[P+3]&31),Z==="slice_layer_without_partitioning_rbsp_idr"&&(M=!0));do k++;while(T[k]!==1&&k<T.length);P=k-2,k+=3;break;case 1:if(T[k-1]!==0||T[k-2]!==0){k+=3;break}Z=Ys(T[P+3]&31),Z==="slice_layer_without_partitioning_rbsp_idr"&&(M=!0),P=k-2,k+=3;break;default:k+=3;break}return T=T.subarray(P),k-=P,P=0,T&&T.byteLength>3&&(Z=Ys(T[P+3]&31),Z==="slice_layer_without_partitioning_rbsp_idr"&&(M=!0)),M},No={parseType:mb,parsePat:Kf,parsePmt:vb,parsePayloadUnitStartIndicator:Bl,parsePesType:Ic,parsePesTime:qg,videoPacketContainsKeyFrame:Xf},Js=Qr.handleRollover,Pr={};Pr.ts=No,Pr.aac=xi;var Ia=L.ONE_SECOND_IN_TS,Ai=188,Nn=71,yb=function(b,E){for(var T=0,k=Ai,P,M;k<b.byteLength;){if(b[T]===Nn&&b[k]===Nn){switch(P=b.subarray(T,k),M=Pr.ts.parseType(P,E.pid),M){case"pat":E.pid=Pr.ts.parsePat(P);break;case"pmt":var Z=Pr.ts.parsePmt(P);E.table=E.table||{},Object.keys(Z).forEach(function(le){E.table[le]=Z[le]});break}T+=Ai,k+=Ai;continue}T++,k++}},Fo=function(b,E,T){for(var k=0,P=Ai,M,Z,le,we,be,ke=!1;P<=b.byteLength;){if(b[k]===Nn&&(b[P]===Nn||P===b.byteLength)){switch(M=b.subarray(k,P),Z=Pr.ts.parseType(M,E.pid),Z){case"pes":le=Pr.ts.parsePesType(M,E.table),we=Pr.ts.parsePayloadUnitStartIndicator(M),le==="audio"&&we&&(be=Pr.ts.parsePesTime(M),be&&(be.type="audio",T.audio.push(be),ke=!0));break}if(ke)break;k+=Ai,P+=Ai;continue}k++,P++}for(P=b.byteLength,k=P-Ai,ke=!1;k>=0;){if(b[k]===Nn&&(b[P]===Nn||P===b.byteLength)){switch(M=b.subarray(k,P),Z=Pr.ts.parseType(M,E.pid),Z){case"pes":le=Pr.ts.parsePesType(M,E.table),we=Pr.ts.parsePayloadUnitStartIndicator(M),le==="audio"&&we&&(be=Pr.ts.parsePesTime(M),be&&(be.type="audio",T.audio.push(be),ke=!0));break}if(ke)break;k-=Ai,P-=Ai;continue}k--,P--}},bb=function(b,E,T){for(var k=0,P=Ai,M,Z,le,we,be,ke,Xe,Tt,It=!1,yt={data:[],size:0};P<b.byteLength;){if(b[k]===Nn&&b[P]===Nn){switch(M=b.subarray(k,P),Z=Pr.ts.parseType(M,E.pid),Z){case"pes":if(le=Pr.ts.parsePesType(M,E.table),we=Pr.ts.parsePayloadUnitStartIndicator(M),le==="video"&&(we&&!It&&(be=Pr.ts.parsePesTime(M),be&&(be.type="video",T.video.push(be),It=!0)),!T.firstKeyFrame)){if(we&&yt.size!==0){for(ke=new Uint8Array(yt.size),Xe=0;yt.data.length;)Tt=yt.data.shift(),ke.set(Tt,Xe),Xe+=Tt.byteLength;if(Pr.ts.videoPacketContainsKeyFrame(ke)){var Ht=Pr.ts.parsePesTime(ke);Ht?(T.firstKeyFrame=Ht,T.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}yt.size=0}yt.data.push(M),yt.size+=M.byteLength}break}if(It&&T.firstKeyFrame)break;k+=Ai,P+=Ai;continue}k++,P++}for(P=b.byteLength,k=P-Ai,It=!1;k>=0;){if(b[k]===Nn&&b[P]===Nn){switch(M=b.subarray(k,P),Z=Pr.ts.parseType(M,E.pid),Z){case"pes":le=Pr.ts.parsePesType(M,E.table),we=Pr.ts.parsePayloadUnitStartIndicator(M),le==="video"&&we&&(be=Pr.ts.parsePesTime(M),be&&(be.type="video",T.video.push(be),It=!0));break}if(It)break;k-=Ai,P-=Ai;continue}k--,P--}},jg=function(b,E){if(b.audio&&b.audio.length){var T=E;(typeof T>"u"||isNaN(T))&&(T=b.audio[0].dts),b.audio.forEach(function(M){M.dts=Js(M.dts,T),M.pts=Js(M.pts,T),M.dtsTime=M.dts/Ia,M.ptsTime=M.pts/Ia})}if(b.video&&b.video.length){var k=E;if((typeof k>"u"||isNaN(k))&&(k=b.video[0].dts),b.video.forEach(function(M){M.dts=Js(M.dts,k),M.pts=Js(M.pts,k),M.dtsTime=M.dts/Ia,M.ptsTime=M.pts/Ia}),b.firstKeyFrame){var P=b.firstKeyFrame;P.dts=Js(P.dts,k),P.pts=Js(P.pts,k),P.dtsTime=P.dts/Ia,P.ptsTime=P.pts/Ia}}},jl=function(b){for(var E=!1,T=0,k=null,P=null,M=0,Z=0,le;b.length-Z>=3;){var we=Pr.aac.parseType(b,Z);switch(we){case"timed-metadata":if(b.length-Z<10){E=!0;break}if(M=Pr.aac.parseId3TagSize(b,Z),M>b.length){E=!0;break}P===null&&(le=b.subarray(Z,Z+M),P=Pr.aac.parseAacTimestamp(le)),Z+=M;break;case"audio":if(b.length-Z<7){E=!0;break}if(M=Pr.aac.parseAdtsSize(b,Z),M>b.length){E=!0;break}k===null&&(le=b.subarray(Z,Z+M),k=Pr.aac.parseSampleRate(le)),T++,Z+=M;break;default:Z++;break}if(E)return null}if(k===null||P===null)return null;var be=Ia/k,ke={audio:[{type:"audio",dts:P,pts:P},{type:"audio",dts:P+T*1024*be,pts:P+T*1024*be}]};return ke},Hl=function(b){var E={pid:null,table:null},T={};yb(b,E);for(var k in E.table)if(E.table.hasOwnProperty(k)){var P=E.table[k];switch(P){case mi.H264_STREAM_TYPE:T.video=[],bb(b,E,T),T.video.length===0&&delete T.video;break;case mi.ADTS_STREAM_TYPE:T.audio=[],Fo(b,E,T),T.audio.length===0&&delete T.audio;break}}return T},_b=function(b,E){var T=Pr.aac.isLikelyAacData(b),k;return T?k=jl(b):k=Hl(b),!k||!k.audio&&!k.video?null:(jg(k,E),k)},wb={inspect:_b,parseAudioPes_:Fo},Hg=function(b,E){E.on("data",function(T){var k=T.initSegment;T.initSegment={data:k.buffer,byteOffset:k.byteOffset,byteLength:k.byteLength};var P=T.data;T.data=P.buffer,b.postMessage({action:"data",segment:T,byteOffset:P.byteOffset,byteLength:P.byteLength},[T.data])}),E.on("done",function(T){b.postMessage({action:"done"})}),E.on("gopInfo",function(T){b.postMessage({action:"gopInfo",gopInfo:T})}),E.on("videoSegmentTimingInfo",function(T){var k={start:{decode:L.videoTsToSeconds(T.start.dts),presentation:L.videoTsToSeconds(T.start.pts)},end:{decode:L.videoTsToSeconds(T.end.dts),presentation:L.videoTsToSeconds(T.end.pts)},baseMediaDecodeTime:L.videoTsToSeconds(T.baseMediaDecodeTime)};T.prependedContentDuration&&(k.prependedContentDuration=L.videoTsToSeconds(T.prependedContentDuration)),b.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:k})}),E.on("audioSegmentTimingInfo",function(T){var k={start:{decode:L.videoTsToSeconds(T.start.dts),presentation:L.videoTsToSeconds(T.start.pts)},end:{decode:L.videoTsToSeconds(T.end.dts),presentation:L.videoTsToSeconds(T.end.pts)},baseMediaDecodeTime:L.videoTsToSeconds(T.baseMediaDecodeTime)};T.prependedContentDuration&&(k.prependedContentDuration=L.videoTsToSeconds(T.prependedContentDuration)),b.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:k})}),E.on("id3Frame",function(T){b.postMessage({action:"id3Frame",id3Frame:T})}),E.on("caption",function(T){b.postMessage({action:"caption",caption:T})}),E.on("trackinfo",function(T){b.postMessage({action:"trackinfo",trackInfo:T})}),E.on("audioTimingInfo",function(T){b.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:L.videoTsToSeconds(T.start),end:L.videoTsToSeconds(T.end)}})}),E.on("videoTimingInfo",function(T){b.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:L.videoTsToSeconds(T.start),end:L.videoTsToSeconds(T.end)}})}),E.on("log",function(T){b.postMessage({action:"log",log:T})})},Dc=function(){function K(E,T){this.options=T||{},this.self=E,this.init()}var b=K.prototype;return b.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Pu.Transmuxer(this.options),Hg(this.self,this.transmuxer)},b.pushMp4Captions=function(T){this.captionParser||(this.captionParser=new kc,this.captionParser.init());var k=new Uint8Array(T.data,T.byteOffset,T.byteLength),P=this.captionParser.parse(k,T.trackIds,T.timescales);this.self.postMessage({action:"mp4Captions",captions:P&&P.captions||[],logs:P&&P.logs||[],data:k.buffer},[k.buffer])},b.probeMp4StartTime=function(T){var k=T.timescales,P=T.data,M=Bg.startTime(k,P);this.self.postMessage({action:"probeMp4StartTime",startTime:M,data:P},[P.buffer])},b.probeMp4Tracks=function(T){var k=T.data,P=Bg.tracks(k);this.self.postMessage({action:"probeMp4Tracks",tracks:P,data:k},[k.buffer])},b.probeTs=function(T){var k=T.data,P=T.baseStartTime,M=typeof P=="number"&&!isNaN(P)?P*L.ONE_SECOND_IN_TS:void 0,Z=wb.inspect(k,M),le=null;Z&&(le={hasVideo:Z.video&&Z.video.length===2||!1,hasAudio:Z.audio&&Z.audio.length===2||!1},le.hasVideo&&(le.videoStart=Z.video[0].ptsTime),le.hasAudio&&(le.audioStart=Z.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:le,data:k},[k.buffer])},b.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},b.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},b.push=function(T){var k=new Uint8Array(T.data,T.byteOffset,T.byteLength);this.transmuxer.push(k)},b.reset=function(){this.transmuxer.reset()},b.setTimestampOffset=function(T){var k=T.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(L.secondsToVideoTs(k)))},b.setAudioAppendStart=function(T){this.transmuxer.setAudioAppendStart(Math.ceil(L.secondsToVideoTs(T.appendStart)))},b.setRemux=function(T){this.transmuxer.setRemux(T.remux)},b.flush=function(T){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},b.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},b.alignGopsWith=function(T){this.transmuxer.alignGopsWith(T.gopsToAlignWith.slice())},K}();self.onmessage=function(K){if(K.data.action==="init"&&K.data.options){this.messageHandlers=new Dc(self,K.data.options);return}this.messageHandlers||(this.messageHandlers=new Dc(self)),K.data&&K.data.action&&K.data.action!=="init"&&this.messageHandlers[K.data.action]&&this.messageHandlers[K.data.action](K.data)}})),jQ=qR(qQ),HQ=function(e,r,n){var i=e.data.segment,a=i.type,s=i.initSegment,o=i.captions,c=i.captionStreams,l=i.metadata,f=i.videoFrameDtsTime,g=i.videoFramePtsTime;r.buffer.push({captions:o,captionStreams:c,metadata:l});var m=e.data.segment.boxes||{data:e.data.segment.data},y={type:a,data:new Uint8Array(m.data,m.data.byteOffset,m.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof f<"u"&&(y.videoFrameDtsTime=f),typeof g<"u"&&(y.videoFramePtsTime=g),n(y)},GQ=function(e){var r=e.transmuxedData,n=e.callback;r.buffer=[],n(r)},zQ=function(e,r){r.gopInfo=e.data.gopInfo},GR=function(e){var r=e.transmuxer,n=e.bytes,i=e.audioAppendStart,a=e.gopsToAlignWith,s=e.remux,o=e.onData,c=e.onTrackInfo,l=e.onAudioTimingInfo,f=e.onVideoTimingInfo,g=e.onVideoSegmentTimingInfo,m=e.onAudioSegmentTimingInfo,y=e.onId3,x=e.onCaptions,I=e.onDone,A=e.onEndedTimeline,F=e.onTransmuxerLog,X=e.isEndOfTimeline,de={buffer:[]},N=X,H=function(ie){r.currentTransmux===e&&(ie.data.action==="data"&&HQ(ie,de,o),ie.data.action==="trackinfo"&&c(ie.data.trackInfo),ie.data.action==="gopInfo"&&zQ(ie,de),ie.data.action==="audioTimingInfo"&&l(ie.data.audioTimingInfo),ie.data.action==="videoTimingInfo"&&f(ie.data.videoTimingInfo),ie.data.action==="videoSegmentTimingInfo"&&g(ie.data.videoSegmentTimingInfo),ie.data.action==="audioSegmentTimingInfo"&&m(ie.data.audioSegmentTimingInfo),ie.data.action==="id3Frame"&&y([ie.data.id3Frame],ie.data.id3Frame.dispatchType),ie.data.action==="caption"&&x(ie.data.caption),ie.data.action==="endedtimeline"&&(N=!1,A()),ie.data.action==="log"&&F(ie.data.log),ie.data.type==="transmuxed"&&(N||(r.onmessage=null,GQ({transmuxedData:de,callback:I}),zR(r))))};if(r.onmessage=H,i&&r.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(a)&&r.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof s<"u"&&r.postMessage({action:"setRemux",remux:s}),n.byteLength){var z=n instanceof ArrayBuffer?n:n.buffer,Y=n instanceof ArrayBuffer?0:n.byteOffset;r.postMessage({action:"push",data:z,byteOffset:Y,byteLength:n.byteLength},[z])}X&&r.postMessage({action:"endTimeline"}),r.postMessage({action:"flush"})},zR=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():GR(e.currentTransmux))},GP=function(e,r){e.postMessage({action:r}),zR(e)},VR=function(e,r){if(!r.currentTransmux){r.currentTransmux=e,GP(r,e);return}r.transmuxQueue.push(GP.bind(null,r,e))},VQ=function(e){VR("reset",e)},WQ=function(e){VR("endTimeline",e)},WR=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,GR(e);return}e.transmuxer.transmuxQueue.push(e)},KQ=function(e){var r=new jQ;r.currentTransmux=null,r.transmuxQueue=[];var n=r.terminate;return r.terminate=function(){return r.currentTransmux=null,r.transmuxQueue.length=0,n.call(r)},r.postMessage({action:"init",options:e}),r},Pw={reset:VQ,endTimeline:WQ,transmux:WR,createTransmuxer:KQ},hv=function(e){var r=e.transmuxer,n=e.endAction||e.action,i=e.callback,a=Zc.default({},e,{endAction:null,transmuxer:null,callback:null}),s=function l(f){f.data.action===n&&(r.removeEventListener("message",l),f.data.data&&(f.data.data=new Uint8Array(f.data.data,e.byteOffset||0,e.byteLength||f.data.data.byteLength),e.data&&(e.data=f.data.data)),i(f.data))};if(r.addEventListener("message",s),e.data){var o=e.data instanceof ArrayBuffer;a.byteOffset=o?0:e.data.byteOffset,a.byteLength=e.data.byteLength;var c=[o?e.data:e.data.buffer];r.postMessage(a,c)}else r.postMessage(a)},fo={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Xw=function(e){e.forEach(function(r){r.abort()})},XQ=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},YQ=function(e){var r=e.target,n=Date.now()-r.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:n||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},RS=function(e,r){return r.timedout?{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:fo.TIMEOUT,xhr:r}:r.aborted?{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:fo.ABORTED,xhr:r}:e?{status:r.status,message:"HLS request errored at URL: "+r.uri,code:fo.FAILURE,xhr:r}:r.responseType==="arraybuffer"&&r.response.byteLength===0?{status:r.status,message:"Empty HLS response at URL: "+r.uri,code:fo.FAILURE,xhr:r}:null},zP=function(e,r,n){return function(i,a){var s=a.response,o=RS(i,a);if(o)return n(o,e);if(s.byteLength!==16)return n({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:fo.FAILURE,xhr:a},e);for(var c=new DataView(s),l=new Uint32Array([c.getUint32(0),c.getUint32(4),c.getUint32(8),c.getUint32(12)]),f=0;f<r.length;f++)r[f].bytes=l;return n(null,e)}},KR=function(e,r){var n=ev.detectContainerForBytes(e.map.bytes);if(n!=="mp4"){var i=e.map.resolvedUri||e.map.uri;return r({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:fo.FAILURE})}hv({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(s){var o=s.tracks,c=s.data;return e.map.bytes=c,o.forEach(function(l){e.map.tracks=e.map.tracks||{},!e.map.tracks[l.type]&&(e.map.tracks[l.type]=l,typeof l.id=="number"&&l.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[l.id]=l.timescale))}),r(null)}})},JQ=function(e){var r=e.segment,n=e.finishProcessingFn;return function(i,a){var s=RS(i,a);if(s)return n(s,r);var o=new Uint8Array(a.response);if(r.map.key)return r.map.encryptedBytes=o,n(null,r);r.map.bytes=o,KR(r,function(c){if(c)return c.xhr=a,c.status=a.status,n(c,r);n(null,r)})}},QQ=function(e){var r=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(a,s){var o=RS(a,s);if(o)return n(o,r);var c=i==="arraybuffer"||!s.responseText?s.response:$Q(s.responseText.substring(r.lastReachedChar||0));return r.stats=XQ(s),r.key?r.encryptedBytes=new Uint8Array(c):r.bytes=new Uint8Array(c),n(null,r)}},ZQ=function(e){var r=e.segment,n=e.bytes,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,c=e.id3Fn,l=e.captionsFn,f=e.isEndOfTimeline,g=e.endedTimelineFn,m=e.dataFn,y=e.doneFn,x=e.onTransmuxerLog,I=r.map&&r.map.tracks||{},A=!!(I.audio&&I.video),F=a.bind(null,r,"audio","start"),X=a.bind(null,r,"audio","end"),de=a.bind(null,r,"video","start"),N=a.bind(null,r,"video","end"),H=function(){return WR({bytes:n,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:A,onData:function(G){G.type=G.type==="combined"?"video":G.type,m(r,G)},onTrackInfo:function(G){i&&(A&&(G.isMuxed=!0),i(r,G))},onAudioTimingInfo:function(G){F&&typeof G.start<"u"&&(F(G.start),F=null),X&&typeof G.end<"u"&&X(G.end)},onVideoTimingInfo:function(G){de&&typeof G.start<"u"&&(de(G.start),de=null),N&&typeof G.end<"u"&&N(G.end)},onVideoSegmentTimingInfo:function(G){s(G)},onAudioSegmentTimingInfo:function(G){o(G)},onId3:function(G,ie){c(r,G,ie)},onCaptions:function(G){l(r,[G])},isEndOfTimeline:f,onEndedTimeline:function(){g()},onTransmuxerLog:x,onDone:function(G){y&&(G.type=G.type==="combined"?"video":G.type,y(null,r,G))}})};hv({action:"probeTs",transmuxer:r.transmuxer,data:n,baseStartTime:r.baseStartTime,callback:function(Y){r.bytes=n=Y.data;var G=Y.result;G&&(i(r,{hasAudio:G.hasAudio,hasVideo:G.hasVideo,isMuxed:A}),i=null,G.hasAudio&&!A&&F(G.audioStart),G.hasVideo&&de(G.videoStart),F=null,de=null),H()}})},XR=function(e){var r=e.segment,n=e.bytes,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,c=e.id3Fn,l=e.captionsFn,f=e.isEndOfTimeline,g=e.endedTimelineFn,m=e.dataFn,y=e.doneFn,x=e.onTransmuxerLog,I=new Uint8Array(n);if(ev.isLikelyFmp4MediaSegment(I)){r.isFmp4=!0;var A=r.map.tracks,F={isFmp4:!0,hasVideo:!!A.video,hasAudio:!!A.audio};A.audio&&A.audio.codec&&A.audio.codec!=="enca"&&(F.audioCodec=A.audio.codec),A.video&&A.video.codec&&A.video.codec!=="encv"&&(F.videoCodec=A.video.codec),A.video&&A.audio&&(F.isMuxed=!0),i(r,F);var X=function(N){m(r,{data:I,type:F.hasAudio&&!F.isMuxed?"audio":"video"}),N&&N.length&&l(r,N),y(null,r,{})};hv({action:"probeMp4StartTime",timescales:r.map.timescales,data:I,transmuxer:r.transmuxer,callback:function(N){var H=N.data,z=N.startTime;if(n=H.buffer,r.bytes=I=H,F.hasAudio&&!F.isMuxed&&a(r,"audio","start",z),F.hasVideo&&a(r,"video","start",z),!A.video||!H.byteLength||!r.transmuxer){X();return}hv({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:I,timescales:r.map.timescales,trackIds:[A.video.id],callback:function(G){n=G.data.buffer,r.bytes=I=G.data,G.logs.forEach(function(ie){x(Oe.mergeOptions(ie,{stream:"mp4CaptionParser"}))}),X(G.captions)}})}});return}if(!r.transmuxer){y(null,r,{});return}if(typeof r.container>"u"&&(r.container=ev.detectContainerForBytes(I)),r.container!=="ts"&&r.container!=="aac"){i(r,{hasAudio:!1,hasVideo:!1}),y(null,r,{});return}ZQ({segment:r,bytes:n,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:c,captionsFn:l,isEndOfTimeline:f,endedTimelineFn:g,dataFn:m,doneFn:y,onTransmuxerLog:x})},YR=function(e,r){var n=e.id,i=e.key,a=e.encryptedBytes,s=e.decryptionWorker,o=function l(f){if(f.data.source===n){s.removeEventListener("message",l);var g=f.data.decrypted;r(new Uint8Array(g.bytes,g.byteOffset,g.byteLength))}};s.addEventListener("message",o);var c;i.bytes.slice?c=i.bytes.slice():c=new Uint32Array(Array.prototype.slice.call(i.bytes)),s.postMessage(NR({source:n,encrypted:a,key:c,iv:i.iv}),[a.buffer,c.buffer])},eZ=function(e){var r=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,c=e.id3Fn,l=e.captionsFn,f=e.isEndOfTimeline,g=e.endedTimelineFn,m=e.dataFn,y=e.doneFn,x=e.onTransmuxerLog;YR({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:r},function(I){n.bytes=I,XR({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:c,captionsFn:l,isEndOfTimeline:f,endedTimelineFn:g,dataFn:m,doneFn:y,onTransmuxerLog:x})})},tZ=function(e){var r=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,c=e.id3Fn,l=e.captionsFn,f=e.isEndOfTimeline,g=e.endedTimelineFn,m=e.dataFn,y=e.doneFn,x=e.onTransmuxerLog,I=0,A=!1;return function(F,X){if(!A){if(F)return A=!0,Xw(r),y(F,X);if(I+=1,I===r.length){var de=function(){if(X.encryptedBytes)return eZ({decryptionWorker:n,segment:X,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:c,captionsFn:l,isEndOfTimeline:f,endedTimelineFn:g,dataFn:m,doneFn:y,onTransmuxerLog:x});XR({segment:X,bytes:X.bytes,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:c,captionsFn:l,isEndOfTimeline:f,endedTimelineFn:g,dataFn:m,doneFn:y,onTransmuxerLog:x})};if(X.endOfAllRequests=Date.now(),X.map&&X.map.encryptedBytes&&!X.map.bytes)return YR({decryptionWorker:n,id:X.requestId+"-init",encryptedBytes:X.map.encryptedBytes,key:X.map.key},function(N){X.map.bytes=N,KR(X,function(H){if(H)return Xw(r),y(H,X);de()})});de()}}}},rZ=function(e){var r=e.loadendState,n=e.abortFn;return function(i){var a=i.target;a.aborted&&n&&!r.calledAbortFn&&(n(),r.calledAbortFn=!0)}},iZ=function(e){var r=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(i){var a=i.target;if(!a.aborted)return r.stats=Oe.mergeOptions(r.stats,YQ(i)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),n(i,r)}},nZ=function(e){var r=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,c=e.trackInfoFn,l=e.timingInfoFn,f=e.videoSegmentTimingInfoFn,g=e.audioSegmentTimingInfoFn,m=e.id3Fn,y=e.captionsFn,x=e.isEndOfTimeline,I=e.endedTimelineFn,A=e.dataFn,F=e.doneFn,X=e.onTransmuxerLog,de=[],N=tZ({activeXhrs:de,decryptionWorker:i,trackInfoFn:c,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:m,captionsFn:y,isEndOfTimeline:x,endedTimelineFn:I,dataFn:A,doneFn:F,onTransmuxerLog:X});if(a.key&&!a.key.bytes){var H=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&H.push(a.map.key);var z=Oe.mergeOptions(n,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),Y=zP(a,H,N),G=r(z,Y);de.push(G)}if(a.map&&!a.map.bytes){var ie=a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri);if(ie){var fe=Oe.mergeOptions(n,{uri:a.map.key.resolvedUri,responseType:"arraybuffer"}),Ne=zP(a,[a.map.key],N),ye=r(fe,Ne);de.push(ye)}var He=Oe.mergeOptions(n,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:Ww(a.map)}),Re=JQ({segment:a,finishProcessingFn:N}),Ze=r(He,Re);de.push(Ze)}var ce=Oe.mergeOptions(n,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:Ww(a)}),tt=QQ({segment:a,finishProcessingFn:N,responseType:ce.responseType}),ft=r(ce,tt);ft.addEventListener("progress",iZ({segment:a,progressFn:o,trackInfoFn:c,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:m,captionsFn:y,isEndOfTimeline:x,endedTimelineFn:I,dataFn:A})),de.push(ft);var pt={};return de.forEach(function(Ye){Ye.addEventListener("loadend",rZ({loadendState:pt,abortFn:s}))}),function(){return Xw(de)}},aZ=Ps("CodecUtils"),sZ=function(e){var r=e.attributes||{};if(r.CODECS)return ci.parseCodecs(r.CODECS)},JR=function(e,r){var n=r.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},oZ=function(e,r){if(!JR(e,r))return!0;var n=r.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(var a in i)if(!i[a].uri&&!i[a].playlists)return!0;return!1},gv=function(e){var r={};return e.forEach(function(n){var i=n.mediaType,a=n.type,s=n.details;r[i]=r[i]||[],r[i].push(ci.translateLegacyCodec(""+a+s))}),Object.keys(r).forEach(function(n){if(r[n].length>1){aZ("multiple "+n+" codecs found as attributes: "+r[n].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),r[n]=null;return}r[n]=r[n][0]}),r},VP=function(e){var r=0;return e.audio&&r++,e.video&&r++,r},rh=function(e,r){var n=r.attributes||{},i=gv(sZ(r)||[]);if(JR(e,r)&&!i.audio&&!oZ(e,r)){var a=gv(ci.codecsFromDefault(e,n.AUDIO)||[]);a.audio&&(i.audio=a.audio)}return i},Wm=Ps("PlaylistSelector"),WP=function(e){if(!(!e||!e.playlist)){var r=e.playlist;return JSON.stringify({id:r.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:r.attributes&&r.attributes.CODECS||""})}},mv=function(e,r){if(!e)return"";var n=Te.default.getComputedStyle(e);return n?n[r]:""},kd=function(e,r){var n=e.slice();e.sort(function(i,a){var s=r(i,a);return s===0?n.indexOf(i)-n.indexOf(a):s})},LS=function(e,r){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Te.default.Number.MAX_VALUE,r.attributes.BANDWIDTH&&(i=r.attributes.BANDWIDTH),i=i||Te.default.Number.MAX_VALUE,n-i},uZ=function(e,r){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Te.default.Number.MAX_VALUE,r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(i=r.attributes.RESOLUTION.width),i=i||Te.default.Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&r.attributes.BANDWIDTH?e.attributes.BANDWIDTH-r.attributes.BANDWIDTH:n-i},QR=function(e,r,n,i,a,s){if(e){var o={bandwidth:r,width:n,height:i,limitRenditionByPlayerDimensions:a},c=e.playlists;Fa.isAudioOnly(e)&&(c=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var l=c.map(function(fe){var Ne,ye=fe.attributes&&fe.attributes.RESOLUTION&&fe.attributes.RESOLUTION.width,He=fe.attributes&&fe.attributes.RESOLUTION&&fe.attributes.RESOLUTION.height;return Ne=fe.attributes&&fe.attributes.BANDWIDTH,Ne=Ne||Te.default.Number.MAX_VALUE,{bandwidth:Ne,width:ye,height:He,playlist:fe}});kd(l,function(fe,Ne){return fe.bandwidth-Ne.bandwidth}),l=l.filter(function(fe){return!Fa.isIncompatible(fe.playlist)});var f=l.filter(function(fe){return Fa.isEnabled(fe.playlist)});f.length||(f=l.filter(function(fe){return!Fa.isDisabled(fe.playlist)}));var g=f.filter(function(fe){return fe.bandwidth*xn.BANDWIDTH_VARIANCE<r}),m=g[g.length-1],y=g.filter(function(fe){return fe.bandwidth===m.bandwidth})[0];if(a===!1){var x=y||f[0]||l[0];if(x&&x.playlist){var I="sortedPlaylistReps";return y&&(I="bandwidthBestRep"),f[0]&&(I="enabledPlaylistReps"),Wm("choosing "+WP(x)+" using "+I+" with options",o),x.playlist}return Wm("could not choose a playlist with options",o),null}var A=g.filter(function(fe){return fe.width&&fe.height});kd(A,function(fe,Ne){return fe.width-Ne.width});var F=A.filter(function(fe){return fe.width===n&&fe.height===i});m=F[F.length-1];var X=F.filter(function(fe){return fe.bandwidth===m.bandwidth})[0],de,N,H;X||(de=A.filter(function(fe){return fe.width>n||fe.height>i}),N=de.filter(function(fe){return fe.width===de[0].width&&fe.height===de[0].height}),m=N[N.length-1],H=N.filter(function(fe){return fe.bandwidth===m.bandwidth})[0]);var z;if(s.experimentalLeastPixelDiffSelector){var Y=A.map(function(fe){return fe.pixelDiff=Math.abs(fe.width-n)+Math.abs(fe.height-i),fe});kd(Y,function(fe,Ne){return fe.pixelDiff===Ne.pixelDiff?Ne.bandwidth-fe.bandwidth:fe.pixelDiff-Ne.pixelDiff}),z=Y[0]}var G=z||H||X||y||f[0]||l[0];if(G&&G.playlist){var ie="sortedPlaylistReps";return z?ie="leastPixelDiffRep":H?ie="resolutionPlusOneRep":X?ie="resolutionBestRep":y?ie="bandwidthBestRep":f[0]&&(ie="enabledPlaylistReps"),Wm("choosing "+WP(G)+" using "+ie+" with options",o),G.playlist}return Wm("could not choose a playlist with options",o),null}},KP=function(){var e=this.useDevicePixelRatio&&Te.default.devicePixelRatio||1;return QR(this.playlists.master,this.systemBandwidth,parseInt(mv(this.tech_.el(),"width"),10)*e,parseInt(mv(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},cZ=function(e){var r=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&Te.default.devicePixelRatio||1;return r<0&&(r=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(r=e*this.systemBandwidth+(1-e)*r,n=this.systemBandwidth),QR(this.playlists.master,r,parseInt(mv(this.tech_.el(),"width"),10)*i,parseInt(mv(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},lZ=function(e){var r=e.master,n=e.currentTime,i=e.bandwidth,a=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,c=e.currentTimeline,l=e.syncController,f=r.playlists.filter(function(I){return!Fa.isIncompatible(I)}),g=f.filter(Fa.isEnabled);g.length||(g=f.filter(function(I){return!Fa.isDisabled(I)}));var m=g.filter(Fa.hasAttribute.bind(null,"BANDWIDTH")),y=m.map(function(I){var A=l.getSyncPoint(I,a,c,n),F=A?1:2,X=Fa.estimateSegmentRequestTime(s,i,I),de=X*F-o;return{playlist:I,rebufferingImpact:de}}),x=y.filter(function(I){return I.rebufferingImpact<=0});return kd(x,function(I,A){return LS(A.playlist,I.playlist)}),x.length?x[0]:(kd(y,function(I,A){return I.rebufferingImpact-A.rebufferingImpact}),y[0]||null)},dZ=function(){var e=this,r=this.playlists.master.playlists.filter(Fa.isEnabled);kd(r,function(i,a){return LS(i,a)});var n=r.filter(function(i){return!!rh(e.playlists.master,i).video});return n[0]||null},fZ=function(e){var r=0,n;return e.bytes&&(n=new Uint8Array(e.bytes),e.segments.forEach(function(i){n.set(i,r),r+=i.byteLength})),n},pZ=function(e,r,n){if(!e[n]){r.trigger({type:"usage",name:"vhs-608"}),r.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var a=r.textTracks().getTrackById(i);if(a)e[n]=a;else{var s=r.options_.vhs&&r.options_.vhs.captionServices||{},o=n,c=n,l=!1,f=s[i];f&&(o=f.label,c=f.language,l=f.default),e[n]=r.addRemoteTextTrack({kind:"captions",id:i,default:l,label:o,language:c},!1).track}}},hZ=function(e){var r=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var a=Te.default.WebKitDataCue||Te.default.VTTCue;n.forEach(function(s){var o=s.stream;r[o].addCue(new a(s.startTime+i,s.endTime+i,s.text))})}},gZ=function(e){Object.defineProperties(e.frame,{id:{get:function(){return Oe.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Oe.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Oe.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},mZ=function(e){var r=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,a=e.videoDuration;if(n){var s=Te.default.WebKitDataCue||Te.default.VTTCue,o=r.metadataTrack_;if(o&&(n.forEach(function(y){var x=y.cueTime+i;typeof x!="number"||Te.default.isNaN(x)||x<0||!(x<1/0)||y.frames.forEach(function(I){var A=new s(x,x,I.value||I.url||I.data||"");A.frame=I,A.value=I,gZ(A),o.addCue(A)})}),!(!o.cues||!o.cues.length))){for(var c=o.cues,l=[],f=0;f<c.length;f++)c[f]&&l.push(c[f]);var g=l.reduce(function(y,x){var I=y[x.startTime]||[];return I.push(x),y[x.startTime]=I,y},{}),m=Object.keys(g).sort(function(y,x){return Number(y)-Number(x)});m.forEach(function(y,x){var I=g[y],A=Number(m[x+1])||a;I.forEach(function(F){F.endTime=A})})}}},vZ=function(e,r,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=r)},Zp=function(e,r,n){var i,a;if(n&&n.cues)for(i=n.cues.length;i--;)a=n.cues[i],a.startTime>=e&&a.endTime<=r&&n.removeCue(a)},yZ=function(e){var r=e.cues;if(r)for(var n=0;n<r.length;n++){for(var i=[],a=0,s=0;s<r.length;s++)r[n].startTime===r[s].startTime&&r[n].endTime===r[s].endTime&&r[n].text===r[s].text&&(a++,a>1&&i.push(r[s]));i.length&&i.forEach(function(o){return e.removeCue(o)})}},bZ=function(e,r,n){if(typeof r>"u"||r===null||!e.length)return[];var i=Math.ceil((r-n+3)*tv.ONE_SECOND_IN_TS),a;for(a=0;a<e.length&&!(e[a].pts>i);a++);return e.slice(a)},_Z=function(e,r,n){if(!r.length)return e;if(n)return r.slice();var i=r[0].pts,a=0;for(a;a<e.length&&!(e[a].pts>=i);a++);return e.slice(0,a).concat(r)},wZ=function(e,r,n,i){for(var a=Math.ceil((r-i)*tv.ONE_SECOND_IN_TS),s=Math.ceil((n-i)*tv.ONE_SECOND_IN_TS),o=e.slice(),c=e.length;c--&&!(e[c].pts<=s););if(c===-1)return o;for(var l=c+1;l--&&!(e[l].pts<=a););return l=Math.max(l,0),o.splice(l,c-l+1),o},SZ=function(e,r){if(!e&&!r||!e&&r||e&&!r)return!1;if(e===r)return!0;var n=Object.keys(e).sort(),i=Object.keys(r).sort();if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++){var s=n[a];if(s!==i[a]||e[s]!==r[s])return!1}return!0},ZR=22,TZ=function(e,r,n){r=r||[];for(var i=[],a=0,s=0;s<r.length;s++){var o=r[s];if(e===o.timeline&&(i.push(s),a+=o.duration,a>n))return s}return i.length===0?0:i[i.length-1]},Jp=1,CZ=500,XP=function(e){return typeof e=="number"&&isFinite(e)},Km=1/60,EZ=function(e,r,n){return e!=="main"||!r||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":r.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},xZ=function(e,r,n){var i=r-xn.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var a=r-n;return Math.min(a,i)},Sd=function(e){var r=e.startOfSegment,n=e.duration,i=e.segment,a=e.part,s=e.playlist,o=s.mediaSequence,c=s.id,l=s.segments,f=l===void 0?[]:l,g=e.mediaIndex,m=e.partIndex,y=e.timeline,x=f.length-1,I="mediaIndex/partIndex increment";e.getMediaInfoForTime?I="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(I="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(I+=" with independent "+e.independent);var A=typeof m=="number",F=e.segment.uri?"segment":"pre-segment",X=A?wR({preloadSegment:i})-1:0;return F+" ["+(o+g)+"/"+(o+x)+"]"+(A?" part ["+m+"/"+X+"]":"")+(" segment start/end ["+i.start+" => "+i.end+"]")+(A?" part start/end ["+a.start+" => "+a.end+"]":"")+(" startOfSegment ["+r+"]")+(" duration ["+n+"]")+(" timeline ["+y+"]")+(" selected by ["+I+"]")+(" playlist ["+c+"]")},YP=function(e){return e+"TimingInfo"},AZ=function(e){var r=e.segmentTimeline,n=e.currentTimeline,i=e.startOfSegment,a=e.buffered,s=e.overrideCheck;return!s&&r===n?null:r<n?i:a.length?a.end(a.length-1):i},JP=function(e){var r=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,a=e.loaderType,s=e.audioDisabled;if(n===i)return!1;if(a==="audio"){var o=r.lastTimelineChange({type:"main"});return!o||o.to!==i}if(a==="main"&&s){var c=r.pendingTimelineChange({type:"audio"});return!(c&&c.to===i)}return!1},kZ=function(e){var r=0;return["video","audio"].forEach(function(n){var i=e[n+"TimingInfo"];if(i){var a=i.start,s=i.end,o;typeof a=="bigint"||typeof s=="bigint"?o=Te.default.BigInt(s)-Te.default.BigInt(a):typeof a=="number"&&typeof s=="number"&&(o=s-a),typeof o<"u"&&o>r&&(r=o)}}),typeof r=="bigint"&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r},QP=function(e){var r=e.segmentDuration,n=e.maxDuration;return r?Math.round(r)>n+Xu:!1},IZ=function(e,r){if(r!=="hls")return null;var n=kZ({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;var i=e.playlist.targetDuration,a=QP({segmentDuration:n,maxDuration:i*2}),s=QP({segmentDuration:n,maxDuration:i}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+n+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+i+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return a||s?{severity:a?"warn":"info",message:o}:null},Yw=function(t){Et.default(e,t);function e(n,i){var a;if(a=t.call(this)||this,!n)throw new TypeError("Initialization settings are required");if(typeof n.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return a.bandwidth=n.bandwidth,a.throughput={rate:0,count:0},a.roundTrip=NaN,a.resetStats_(),a.mediaIndex=null,a.partIndex=null,a.hasPlayed_=n.hasPlayed,a.currentTime_=n.currentTime,a.seekable_=n.seekable,a.seeking_=n.seeking,a.duration_=n.duration,a.mediaSource_=n.mediaSource,a.vhs_=n.vhs,a.loaderType_=n.loaderType,a.currentMediaInfo_=void 0,a.startingMediaInfo_=void 0,a.segmentMetadataTrack_=n.segmentMetadataTrack,a.goalBufferLength_=n.goalBufferLength,a.sourceType_=n.sourceType,a.sourceUpdater_=n.sourceUpdater,a.inbandTextTracks_=n.inbandTextTracks,a.state_="INIT",a.timelineChangeController_=n.timelineChangeController,a.shouldSaveSegmentTimingInfo_=!0,a.parse708captions_=n.parse708captions,a.useDtsForTimestampOffset_=n.useDtsForTimestampOffset,a.captionServices_=n.captionServices,a.experimentalExactManifestTimings=n.experimentalExactManifestTimings,a.checkBufferTimeout_=null,a.error_=void 0,a.currentTimeline_=-1,a.pendingSegment_=null,a.xhrOptions_=null,a.pendingSegments_=[],a.audioDisabled_=!1,a.isPendingTimestampOffset_=!1,a.gopBuffer_=[],a.timeMapping_=0,a.safeAppend_=Oe.browser.IE_VERSION>=11,a.appendInitSegment_={audio:!0,video:!0},a.playlistOfLastInitSegment_={audio:null,video:null},a.callQueue_=[],a.loadQueue_=[],a.metadataQueue_={id3:[],caption:[]},a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=null,a.activeInitSegmentId_=null,a.initSegments_={},a.cacheEncryptionKeys_=n.cacheEncryptionKeys,a.keyCache_={},a.decrypter_=n.decrypter,a.syncController_=n.syncController,a.syncPoint_={segmentIndex:0,time:0},a.transmuxer_=a.createTransmuxer_(),a.triggerSyncInfoUpdate_=function(){return a.trigger("syncinfoupdate")},a.syncController_.on("syncinfoupdate",a.triggerSyncInfoUpdate_),a.mediaSource_.addEventListener("sourceopen",function(){a.isEndOfStream_()||(a.ended_=!1)}),a.fetchAtBuffer_=!1,a.logger_=Ps("SegmentLoader["+a.loaderType_+"]"),Object.defineProperty(er.default(a),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),a.sourceUpdater_.on("ready",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="main"&&a.timelineChangeController_.on("pendingtimelinechange",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="audio"&&a.timelineChangeController_.on("timelinechange",function(){a.hasEnoughInfoToLoad_()&&a.processLoadQueue_(),a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a}var r=e.prototype;return r.createTransmuxer_=function(){return Pw.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},r.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},r.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Te.default.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},r.setAudio=function(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},r.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},r.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Te.default.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},r.checkForAbort_=function(i){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==i},r.error=function(i){return typeof i<"u"&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},r.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Pw.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},r.buffered_=function(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return Oe.createTimeRanges();if(this.loaderType_==="main"){var a=i.hasAudio,s=i.hasVideo,o=i.isMuxed;if(s&&a&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},r.initSegmentForMap=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=pv(i),o=this.initSegments_[s];return a&&!o&&i.bytes&&(this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),o||i},r.segmentKey=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=FR(i),o=this.keyCache_[s];this.cacheEncryptionKeys_&&a&&!o&&i.bytes&&(this.keyCache_[s]=o={resolvedUri:i.resolvedUri,bytes:i.bytes});var c={resolvedUri:(o||i).resolvedUri};return o&&(c.bytes=o.bytes),c},r.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},r.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.playlist=function(i,a){if(a===void 0&&(a={}),!!i){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=a,this.state==="INIT"&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(i));var c=null;if(s&&(s.id?c=s.id:s.uri&&(c=s.uri)),this.logger_("playlist update ["+c+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==i.uri){this.mediaIndex!==null&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var l=i.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+l+"]"),this.mediaIndex!==null)if(this.mediaIndex-=l,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var f=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!f.parts||!f.parts.length||!f.parts[this.partIndex])){var g=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=g}}o&&(o.mediaIndex-=l,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=i.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,i)}},r.pause=function(){this.checkBufferTimeout_&&(Te.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},r.paused=function(){return this.checkBufferTimeout_===null},r.resetEverything=function(i){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},r.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},r.resyncLoader=function(){this.transmuxer_&&Pw.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},r.remove=function(i,a,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),a===1/0&&(a=this.duration_()),a<=i){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var c=1,l=function(){c--,c===0&&s()};(o||!this.audioDisabled_)&&(c++,this.sourceUpdater_.removeAudio(i,a,l)),(o||this.loaderType_==="main")&&(this.gopBuffer_=wZ(this.gopBuffer_,i,a,this.timeMapping_),c++,this.sourceUpdater_.removeVideo(i,a,l));for(var f in this.inbandTextTracks_)Zp(i,a,this.inbandTextTracks_[f]);Zp(i,a,this.segmentMetadataTrack_),l()},r.monitorBuffer_=function(){this.checkBufferTimeout_&&Te.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Te.default.setTimeout(this.monitorBufferTick_.bind(this),1)},r.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&Te.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Te.default.setTimeout(this.monitorBufferTick_.bind(this),CZ)},r.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();i&&(typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},r.isEndOfStream_=function(i,a,s){if(i===void 0&&(i=this.mediaIndex),a===void 0&&(a=this.playlist_),s===void 0&&(s=this.partIndex),!a||!this.mediaSource_)return!1;var o=typeof i=="number"&&a.segments[i],c=i+1===a.segments.length,l=!o||!o.parts||s+1===o.parts.length;return a.endList&&this.mediaSource_.readyState==="open"&&c&&l},r.chooseNextRequest_=function(){var i=this.buffered_(),a=$P(i)||0,s=kS(i,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,c=s>=this.goalBufferLength_(),l=this.playlist_.segments;if(!l.length||o||c)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var f={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(f.isSyncRequest)f.mediaIndex=TZ(this.currentTimeline_,l,a);else if(this.mediaIndex!==null){var g=l[this.mediaIndex],m=typeof this.partIndex=="number"?this.partIndex:-1;f.startOfSegment=g.end?g.end:a,g.parts&&g.parts[m+1]?(f.mediaIndex=this.mediaIndex,f.partIndex=m+1):f.mediaIndex=this.mediaIndex+1}else{var y=Fa.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),x=y.segmentIndex,I=y.startTime,A=y.partIndex;f.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+a:"currentTime "+this.currentTime_(),f.mediaIndex=x,f.startOfSegment=I,f.partIndex=A}var F=l[f.mediaIndex],X=F&&typeof f.partIndex=="number"&&F.parts&&F.parts[f.partIndex];if(!F||typeof f.partIndex=="number"&&!X)return null;if(typeof f.partIndex!="number"&&F.parts&&(f.partIndex=0,X=F.parts[0]),!s&&X&&!X.independent)if(f.partIndex===0){var de=l[f.mediaIndex-1],N=de.parts&&de.parts.length&&de.parts[de.parts.length-1];N&&N.independent&&(f.mediaIndex-=1,f.partIndex=de.parts.length-1,f.independent="previous segment")}else F.parts[f.partIndex-1].independent&&(f.partIndex-=1,f.independent="previous part");var H=this.mediaSource_&&this.mediaSource_.readyState==="ended";return f.mediaIndex>=l.length-1&&H&&!this.seeking_()?null:this.generateSegmentInfo_(f)},r.generateSegmentInfo_=function(i){var a=i.independent,s=i.playlist,o=i.mediaIndex,c=i.startOfSegment,l=i.isSyncRequest,f=i.partIndex,g=i.forceTimestampOffset,m=i.getMediaInfoForTime,y=s.segments[o],x=typeof f=="number"&&y.parts[f],I={requestId:"segment-loader-"+Math.random(),uri:x&&x.resolvedUri||y.resolvedUri,mediaIndex:o,partIndex:x?f:null,isSyncRequest:l,startOfSegment:c,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:y.timeline,duration:x&&x.duration||y.duration,segment:y,part:x,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:m,independent:a},A=typeof g<"u"?g:this.isPendingTimestampOffset_;I.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:y.timeline,currentTimeline:this.currentTimeline_,startOfSegment:c,buffered:this.buffered_(),overrideCheck:A});var F=$P(this.sourceUpdater_.audioBuffered());return typeof F=="number"&&(I.audioAppendStart=F-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(I.gopsToAlignWith=bZ(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),I},r.timestampOffsetForSegment_=function(i){return AZ(i)},r.earlyAbortWhenNeeded_=function(i){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var a=this.currentTime_(),s=i.bandwidth,o=this.pendingSegment_.duration,c=Fa.estimateSegmentRequestTime(o,s,this.playlist_,i.bytesReceived),l=YJ(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(!(c<=l)){var f=lZ({master:this.vhs_.playlists.master,currentTime:a,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(f){var g=c-l,m=g-f.rebufferingImpact,y=.5;l<=Xu&&(y=1),!(!f.playlist||f.playlist.uri===this.playlist_.uri||m<y)&&(this.bandwidth=f.playlist.attributes.BANDWIDTH*xn.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},r.handleAbort_=function(i){this.logger_("Aborting "+Sd(i)),this.mediaRequestsAborted+=1},r.handleProgress_=function(i,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")},r.handleTrackInfo_=function(i,a){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&(this.checkForIllegalMediaSwitch(a)||(a=a||{},SZ(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(i.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},r.handleTimingInfo_=function(i,a,s,o){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var c=this.pendingSegment_,l=YP(a);c[l]=c[l]||{},c[l][s]=o,this.logger_("timinginfo: "+a+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},r.handleCaptions_=function(i,a){var s=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(a.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,a));return}var c=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),l={};a.forEach(function(f){l[f.stream]=l[f.stream]||{startTime:1/0,captions:[],endTime:0};var g=l[f.stream];g.startTime=Math.min(g.startTime,f.startTime+c),g.endTime=Math.max(g.endTime,f.endTime+c),g.captions.push(f)}),Object.keys(l).forEach(function(f){var g=l[f],m=g.startTime,y=g.endTime,x=g.captions,I=s.inbandTextTracks_;s.logger_("adding cues from "+m+" -> "+y+" for "+f),pZ(I,s.vhs_.tech_,f),Zp(m,y,I[f]),hZ({captionArray:x,inbandTextTracks:I,timestampOffset:c})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},r.handleId3_=function(i,a,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,a,s));return}var c=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();vZ(this.inbandTextTracks_,s,this.vhs_.tech_),mZ({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:c,videoDuration:this.duration_()})}},r.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(i){return i()}),this.metadataQueue_.caption.forEach(function(i){return i()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},r.processCallQueue_=function(){var i=this.callQueue_;this.callQueue_=[],i.forEach(function(a){return a()})},r.processLoadQueue_=function(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach(function(a){return a()})},r.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var i=this.pendingSegment_;return i?this.getCurrentMediaInfo_()?!JP({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},r.getCurrentMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},r.getMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},r.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},r.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!i||!a)return!1;var s=a.hasAudio,o=a.hasVideo,c=a.isMuxed;return!(o&&!i.videoTimingInfo||s&&!this.audioDisabled_&&!c&&!i.audioTimingInfo||JP({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.handleData_=function(i,a){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,i,a));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),s.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),s.isFmp4=i.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[YP(a.type)].start;else{var o=this.getCurrentMediaInfo_(),c=this.loaderType_==="main"&&o&&o.hasVideo,l;c&&(l=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:c,firstVideoFrameTimeForData:l,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,a.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var f=this.chooseNextRequest_();if(f.mediaIndex!==s.mediaIndex||f.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,a)}}},r.updateAppendInitSegmentStatus=function(i,a){this.loaderType_==="main"&&typeof i.timestampOffset=="number"&&!i.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==i.playlist&&(this.appendInitSegment_[a]=!0)},r.getInitSegmentAndUpdateState_=function(i){var a=i.type,s=i.initSegment,o=i.map,c=i.playlist;if(o){var l=pv(o);if(this.activeInitSegmentId_===l)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=l}return s&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=c,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,s):null},r.handleQuotaExceededError_=function(i,a){var s=this,o=i.segmentInfo,c=i.type,l=i.bytes,f=this.sourceUpdater_.audioBuffered(),g=this.sourceUpdater_.videoBuffered();f.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Kc(f).join(", ")),g.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Kc(g).join(", "));var m=f.length?f.start(0):0,y=f.length?f.end(f.length-1):0,x=g.length?g.start(0):0,I=g.length?g.end(g.length-1):0;if(y-m<=Jp&&I-x<=Jp){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+l.byteLength+", ")+("audio buffer: "+Kc(f).join(", ")+", ")+("video buffer: "+Kc(g).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:c,bytes:l}));var A=this.currentTime_(),F=A-Jp;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+F),this.remove(0,F,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+Jp+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=Te.default.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},Jp*1e3)},!0)},r.handleAppendError_=function(i,a){var s=i.segmentInfo,o=i.type,c=i.bytes;if(a){if(a.code===ZR){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:c});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(o+" append of "+c.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},r.appendToSourceBuffer_=function(i){var a=i.segmentInfo,s=i.type,o=i.initSegment,c=i.data,l=i.bytes;if(!l){var f=[c],g=c.byteLength;o&&(f.unshift(o),g+=o.byteLength),l=fZ({bytes:g,segments:f})}this.sourceUpdater_.appendBuffer({segmentInfo:a,type:s,bytes:l},this.handleAppendError_.bind(this,{segmentInfo:a,type:s,bytes:l}))},r.handleSegmentTimingInfo_=function(i,a,s){if(!(!this.pendingSegment_||a!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,c=i+"TimingInfo";o[c]||(o[c]={}),o[c].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[c].transmuxedPresentationStart=s.start.presentation,o[c].transmuxedDecodeStart=s.start.decode,o[c].transmuxedPresentationEnd=s.end.presentation,o[c].transmuxedDecodeEnd=s.end.decode,o[c].baseMediaDecodeTime=s.baseMediaDecodeTime}},r.appendData_=function(i,a){var s=a.type,o=a.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var c=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:s,initSegment:c,data:o})}},r.loadSegment_=function(i){var a=this;if(this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),typeof i.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=Zc.default({},i,{forceTimestampOffset:!0});Zc.default(i,a.generateSegmentInfo_(s)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(i)});return}this.updateTransmuxerAndRequestSegment_(i)},r.updateTransmuxerAndRequestSegment_=function(i){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var s=this.createSimplifiedSegmentObj_(i),o=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex),c=this.mediaIndex!==null,l=i.timeline!==this.currentTimeline_&&i.timeline>0,f=o||c&&l;this.logger_("Requesting "+Sd(i)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=nZ({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:f,endedTimelineFn:function(){a.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(m){var y=m.message,x=m.level,I=m.stream;a.logger_(Sd(i)+" logged from transmuxer stream "+I+" as a "+x+": "+y)}})},r.trimBackBuffer_=function(i){var a=xZ(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)},r.createSimplifiedSegmentObj_=function(i){var a=i.segment,s=i.part,o={resolvedUri:s?s.resolvedUri:a.resolvedUri,byterange:s?s.byterange:a.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},c=i.playlist.segments[i.mediaIndex-1];if(c&&c.timeline===a.timeline&&(c.videoTimingInfo?o.baseStartTime=c.videoTimingInfo.transmuxedDecodeEnd:c.audioTimingInfo&&(o.baseStartTime=c.audioTimingInfo.transmuxedDecodeEnd)),a.key){var l=a.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);o.key=this.segmentKey(a.key),o.key.iv=l}return a.map&&(o.map=this.initSegmentForMap(a.map)),o},r.saveTransferStats_=function(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},r.saveBandwidthRelatedStats_=function(i,a){if(this.pendingSegment_.byteLength=a.bytesReceived,i<Km){this.logger_("Ignoring segment's bandwidth because its duration of "+i+(" is less than the min to record "+Km));return}this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime},r.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},r.segmentRequestFinished_=function(i,a,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,a,s));return}if(this.saveTransferStats_(a.stats),!!this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",i.code===fo.ABORTED)return;if(this.pause(),i.code===fo.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(i),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,a.stats),o.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=_Z(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},r.setTimeMapping_=function(i){var a=this.syncController_.mappingForTimeline(i);a!==null&&(this.timeMapping_=a)},r.updateMediaSecondsLoaded_=function(i){typeof i.start=="number"&&typeof i.end=="number"?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration},r.shouldUpdateTransmuxerTimestampOffset_=function(i){return i===null?!1:this.loaderType_==="main"&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset()},r.trueSegmentStart_=function(i){var a=i.currentStart,s=i.playlist,o=i.mediaIndex,c=i.firstVideoFrameTimeForData,l=i.currentVideoTimestampOffset,f=i.useVideoTimingInfo,g=i.videoTimingInfo,m=i.audioTimingInfo;if(typeof a<"u")return a;if(!f)return m.start;var y=s.segments[o-1];return o===0||!y||typeof y.start>"u"||y.end!==c+l?c:g.start},r.waitForAppendsToComplete_=function(i){var a=this.getCurrentMediaInfo_(i);if(!a){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=a.hasAudio,o=a.hasVideo,c=a.isMuxed,l=this.loaderType_==="main"&&o,f=!this.audioDisabled_&&s&&!c;if(i.waitingOnAppends=0,!i.hasAppendedData_){!i.timingInfo&&typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),this.checkAppendsDone_(i);return}l&&i.waitingOnAppends++,f&&i.waitingOnAppends++,l&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),f&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},r.checkAppendsDone_=function(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,i.waitingOnAppends===0&&this.handleAppendsDone_())},r.checkForIllegalMediaSwitch=function(i){var a=EZ(this.loaderType_,this.getCurrentMediaInfo_(),i);return a?(this.error({message:a,blacklistDuration:1/0}),this.trigger("error"),!0):!1},r.updateSourceBufferTimestampOffset_=function(i){if(!(i.timestampOffset===null||typeof i.timingInfo.start!="number"||i.changedTimestampOffset||this.loaderType_!=="main")){var a=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),a=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}},r.getSegmentStartTimeForTimestampOffsetCalculation_=function(i){var a=i.videoTimingInfo,s=i.audioTimingInfo,o=i.timingInfo;return this.useDtsForTimestampOffset_?a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},r.updateTimingInfoEnd_=function(i){i.timingInfo=i.timingInfo||{};var a=this.getMediaInfo_(),s=this.loaderType_==="main"&&a&&a.hasVideo,o=s&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;o&&(i.timingInfo.end=typeof o.end=="number"?o.end:o.start+i.duration)},r.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});var a=IZ(i,this.sourceType_);if(a&&(a.severity==="warn"?Oe.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",i.isSyncRequest&&(this.trigger("syncinfoupdate"),!i.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+Sd(i));return}this.logger_("Appended "+Sd(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var s=i.segment,o=i.part,c=s.end&&this.currentTime_()-s.end>i.playlist.targetDuration*3,l=o&&o.end&&this.currentTime_()-o.end>i.playlist.partTargetDuration*3;if(c||l){this.logger_("bad "+(c?"segment":"part")+" "+Sd(i)),this.resetEverything();return}var f=this.mediaIndex!==null;f&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},r.recordThroughput_=function(i){if(i.duration<Km){this.logger_("Ignoring segment's throughput because its duration of "+i.duration+(" is less than the min to record "+Km));return}var a=this.throughput.rate,s=Date.now()-i.endOfAllRequests+1,o=Math.floor(i.byteLength/s*8*1e3);this.throughput.rate+=(o-a)/++this.throughput.count},r.addSegmentMetadataCue_=function(i){if(this.segmentMetadataTrack_){var a=i.segment,s=a.start,o=a.end;if(!(!XP(s)||!XP(o))){Zp(s,o,this.segmentMetadataTrack_);var c=Te.default.WebKitDataCue||Te.default.VTTCue,l={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:s,end:o},f=JSON.stringify(l),g=new c(s,o,f);g.value=l,this.segmentMetadataTrack_.addCue(g)}}},e}(Oe.EventTarget);function eu(){}var eL=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toUpperCase()})},DZ=["video","audio"],Jw=function(e,r){var n=r[e+"Buffer"];return n&&n.updating||r.queuePending[e]},OZ=function(e,r){for(var n=0;n<r.length;n++){var i=r[n];if(i.type==="mediaSource")return null;if(i.type===e)return n}return null},NS=function t(e,r){if(r.queue.length!==0){var n=0,i=r.queue[n];if(i.type==="mediaSource"){!r.updating()&&r.mediaSource.readyState!=="closed"&&(r.queue.shift(),i.action(r),i.doneFn&&i.doneFn(),t("audio",r),t("video",r));return}if(e!=="mediaSource"&&!(!r.ready()||r.mediaSource.readyState==="closed"||Jw(e,r))){if(i.type!==e){if(n=OZ(e,r.queue),n===null)return;i=r.queue[n]}if(r.queue.splice(n,1),r.queuePending[e]=i,i.action(e,r),!i.doneFn){r.queuePending[e]=null,t(e,r);return}}}},tL=function(e,r){var n=r[e+"Buffer"],i=eL(e);n&&(n.removeEventListener("updateend",r["on"+i+"UpdateEnd_"]),n.removeEventListener("error",r["on"+i+"Error_"]),r.codecs[e]=null,r[e+"Buffer"]=null)},uo=function(e,r){return e&&r&&Array.prototype.indexOf.call(e.sourceBuffers,r)!==-1},Xa={appendBuffer:function(e,r,n){return function(i,a){var s=a[i+"Buffer"];if(uo(a.mediaSource,s)){a.logger_("Appending segment "+r.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{s.appendBuffer(e)}catch(o){a.logger_("Error with code "+o.code+" "+(o.code===ZR?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+r.mediaIndex+" to "+i+"Buffer")),a.queuePending[i]=null,n(o)}}}},remove:function(e,r){return function(n,i){var a=i[n+"Buffer"];if(uo(i.mediaSource,a)){i.logger_("Removing "+e+" to "+r+" from "+n+"Buffer");try{a.remove(e,r)}catch{i.logger_("Remove "+e+" to "+r+" from "+n+"Buffer failed")}}}},timestampOffset:function(e){return function(r,n){var i=n[r+"Buffer"];uo(n.mediaSource,i)&&(n.logger_("Setting "+r+"timestampOffset to "+e),i.timestampOffset=e)}},callback:function(e){return function(r,n){e()}},endOfStream:function(e){return function(r){if(r.mediaSource.readyState==="open"){r.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{r.mediaSource.endOfStream(e)}catch(n){Oe.log.warn("Failed to call media source endOfStream",n)}}}},duration:function(e){return function(r){r.logger_("Setting mediaSource duration to "+e);try{r.mediaSource.duration=e}catch(n){Oe.log.warn("Failed to set media source duration",n)}}},abort:function(){return function(e,r){if(r.mediaSource.readyState==="open"){var n=r[e+"Buffer"];if(uo(r.mediaSource,n)){r.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(i){Oe.log.warn("Failed to abort on "+e+"Buffer",i)}}}}},addSourceBuffer:function(e,r){return function(n){var i=eL(e),a=ci.getMimeForCodec(r);n.logger_("Adding "+e+"Buffer with codec "+r+" to mediaSource");var s=n.mediaSource.addSourceBuffer(a);s.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),s.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=r,n[e+"Buffer"]=s}},removeSourceBuffer:function(e){return function(r){var n=r[e+"Buffer"];if(tL(e,r),!!uo(r.mediaSource,n)){r.logger_("Removing "+e+"Buffer with codec "+r.codecs[e]+" from mediaSource");try{r.mediaSource.removeSourceBuffer(n)}catch(i){Oe.log.warn("Failed to removeSourceBuffer "+e+"Buffer",i)}}}},changeType:function(e){return function(r,n){var i=n[r+"Buffer"],a=ci.getMimeForCodec(e);if(uo(n.mediaSource,i)&&n.codecs[r]!==e){n.logger_("changing "+r+"Buffer codec from "+n.codecs[r]+" to "+e);try{i.changeType(a),n.codecs[r]=e}catch(s){Oe.log.warn("Failed to changeType on "+r+"Buffer",s)}}}}},Ya=function(e){var r=e.type,n=e.sourceUpdater,i=e.action,a=e.doneFn,s=e.name;n.queue.push({type:r,action:i,doneFn:a,name:s}),NS(r,n)},ZP=function(e,r){return function(n){if(r.queuePending[e]){var i=r.queuePending[e].doneFn;r.queuePending[e]=null,i&&i(r[e+"Error_"])}NS(e,r)}},rL=function(t){Et.default(e,t);function e(n){var i;return i=t.call(this)||this,i.mediaSource=n,i.sourceopenListener_=function(){return NS("mediaSource",er.default(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Ps("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=ZP("video",er.default(i)),i.onAudioUpdateEnd_=ZP("audio",er.default(i)),i.onVideoError_=function(a){i.videoError_=a},i.onAudioError_=function(a){i.audioError_=a},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}var r=e.prototype;return r.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},r.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},r.hasInitializedAnyEme=function(){return this.initializedEme_},r.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},r.createSourceBuffers=function(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},r.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},r.addSourceBuffer=function(i,a){Ya({type:"mediaSource",sourceUpdater:this,action:Xa.addSourceBuffer(i,a),name:"addSourceBuffer"})},r.abort=function(i){Ya({type:i,sourceUpdater:this,action:Xa.abort(i),name:"abort"})},r.removeSourceBuffer=function(i){if(!this.canRemoveSourceBuffer()){Oe.log.error("removeSourceBuffer is not supported!");return}Ya({type:"mediaSource",sourceUpdater:this,action:Xa.removeSourceBuffer(i),name:"removeSourceBuffer"})},r.canRemoveSourceBuffer=function(){return!Oe.browser.IE_VERSION&&!Oe.browser.IS_FIREFOX&&Te.default.MediaSource&&Te.default.MediaSource.prototype&&typeof Te.default.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return Te.default.SourceBuffer&&Te.default.SourceBuffer.prototype&&typeof Te.default.SourceBuffer.prototype.changeType=="function"},r.canChangeType=function(){return this.constructor.canChangeType()},r.changeType=function(i,a){if(!this.canChangeType()){Oe.log.error("changeType is not supported!");return}Ya({type:i,sourceUpdater:this,action:Xa.changeType(a),name:"changeType"})},r.addOrChangeSourceBuffers=function(i){var a=this;if(!i||typeof i!="object"||Object.keys(i).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(s){var o=i[s];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(s,o);a.canChangeType()&&a.changeType(s,o)})},r.appendBuffer=function(i,a){var s=this,o=i.segmentInfo,c=i.type,l=i.bytes;if(this.processedAppend_=!0,c==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([i,a]),this.logger_("delayed audio append of "+l.length+" until video append");return}var f=a;if(Ya({type:c,sourceUpdater:this,action:Xa.appendBuffer(l,o||{mediaIndex:-1},f),doneFn:a,name:"appendBuffer"}),c==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var g=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+g.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,g.forEach(function(m){s.appendBuffer.apply(s,m)})}},r.audioBuffered=function(){return uo(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Oe.createTimeRange()},r.videoBuffered=function(){return uo(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Oe.createTimeRange()},r.buffered=function(){var i=uo(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=uo(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!i?this.audioBuffered():i&&!a?this.videoBuffered():XJ(this.audioBuffered(),this.videoBuffered())},r.setDuration=function(i,a){a===void 0&&(a=eu),Ya({type:"mediaSource",sourceUpdater:this,action:Xa.duration(i),name:"duration",doneFn:a})},r.endOfStream=function(i,a){i===void 0&&(i=null),a===void 0&&(a=eu),typeof i!="string"&&(i=void 0),Ya({type:"mediaSource",sourceUpdater:this,action:Xa.endOfStream(i),name:"endOfStream",doneFn:a})},r.removeAudio=function(i,a,s){if(s===void 0&&(s=eu),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}Ya({type:"audio",sourceUpdater:this,action:Xa.remove(i,a),doneFn:s,name:"remove"})},r.removeVideo=function(i,a,s){if(s===void 0&&(s=eu),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}Ya({type:"video",sourceUpdater:this,action:Xa.remove(i,a),doneFn:s,name:"remove"})},r.updating=function(){return!!(Jw("audio",this)||Jw("video",this))},r.audioTimestampOffset=function(i){return typeof i<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(Ya({type:"audio",sourceUpdater:this,action:Xa.timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},r.videoTimestampOffset=function(i){return typeof i<"u"&&this.videoBuffer&&this.videoTimestampOffset!==i&&(Ya({type:"video",sourceUpdater:this,action:Xa.timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},r.audioQueueCallback=function(i){this.audioBuffer&&Ya({type:"audio",sourceUpdater:this,action:Xa.callback(i),name:"callback"})},r.videoQueueCallback=function(i){this.videoBuffer&&Ya({type:"video",sourceUpdater:this,action:Xa.callback(i),name:"callback"})},r.dispose=function(){var i=this;this.trigger("dispose"),DZ.forEach(function(a){i.abort(a),i.canRemoveSourceBuffer()?i.removeSourceBuffer(a):i[a+"QueueCallback"](function(){return tL(a,i)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(Oe.EventTarget),e2=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},t2=new Uint8Array(`

`.split("").map(function(t){return t.charCodeAt(0)})),PZ=function(t){Et.default(e,t);function e(){return t.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return e}(_Y.default(Error)),RZ=function(t){Et.default(e,t);function e(n,i){var a;return i===void 0&&(i={}),a=t.call(this,n,i)||this,a.mediaSource_=null,a.subtitlesTrack_=null,a.loaderType_="subtitle",a.featuresNativeTextTracks_=n.featuresNativeTextTracks,a.loadVttJs=n.loadVttJs,a.shouldSaveSegmentTimingInfo_=!1,a}var r=e.prototype;return r.createTransmuxer_=function(){return null},r.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Oe.createTimeRanges();var i=this.subtitlesTrack_.cues,a=i[0].startTime,s=i[i.length-1].startTime;return Oe.createTimeRanges([[a,s]])},r.initSegmentForMap=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=pv(i),o=this.initSegments_[s];if(a&&!o&&i.bytes){var c=t2.byteLength+i.bytes.byteLength,l=new Uint8Array(c);l.set(i.bytes),l.set(t2,i.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:l}}return o||i},r.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.track=function(i){return typeof i>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=i,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},r.remove=function(i,a){Zp(i,a,this.subtitlesTrack_)},r.fillBuffer_=function(){var i=this,a=this.chooseNextRequest_();if(a){if(this.syncController_.timestampOffsetForTimeline(a.timeline)===null){var s=function(){i.state="READY",i.paused()||i.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(a)}},r.timestampOffsetForSegment_=function(){return null},r.chooseNextRequest_=function(){return this.skipEmptySegments_(t.prototype.chooseNextRequest_.call(this))},r.skipEmptySegments_=function(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},r.stopForError=function(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},r.segmentRequestFinished_=function(i,a,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(i){i.code===fo.TIMEOUT&&this.handleTimeout_(),i.code===fo.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(i);return}var c=this.pendingSegment_;this.saveBandwidthRelatedStats_(c.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");var l=c.segment;if(l.map&&(l.map.bytes=a.map.bytes),c.bytes=a.bytes,typeof Te.default.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(i,a,s)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}l.requested=!0;try{this.parseVTTCues_(c)}catch(f){this.stopForError({message:f.message});return}if(this.updateTimeMapping_(c,this.syncController_.timelines[c.timeline],this.playlist_),c.cues.length?c.timingInfo={start:c.cues[0].startTime,end:c.cues[c.cues.length-1].endTime}:c.timingInfo={start:c.startOfSegment,end:c.startOfSegment+c.duration},c.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}c.byteLength=c.bytes.byteLength,this.mediaSecondsLoaded+=l.duration,c.cues.forEach(function(f){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new Te.default.VTTCue(f.startTime,f.endTime,f.text):f)}),yZ(this.subtitlesTrack_),this.handleAppendsDone_()},r.handleData_=function(){},r.updateTimingInfoEnd_=function(){},r.parseVTTCues_=function(i){var a,s=!1;if(typeof Te.default.WebVTT!="function")throw new PZ;typeof Te.default.TextDecoder=="function"?a=new Te.default.TextDecoder("utf8"):(a=Te.default.WebVTT.StringDecoder(),s=!0);var o=new Te.default.WebVTT.Parser(Te.default,Te.default.vttjs,a);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=i.cues.push.bind(i.cues),o.ontimestampmap=function(f){i.timestampmap=f},o.onparsingerror=function(f){Oe.log.warn("Error encountered when parsing cues: "+f.message)},i.segment.map){var c=i.segment.map.bytes;s&&(c=e2(c)),o.parse(c)}var l=i.bytes;s&&(l=e2(l)),o.parse(l),o.flush()},r.updateTimeMapping_=function(i,a,s){var o=i.segment;if(a){if(!i.cues.length){o.empty=!0;return}var c=i.timestampmap,l=c.MPEGTS/tv.ONE_SECOND_IN_TS-c.LOCAL+a.mapping;if(i.cues.forEach(function(m){m.startTime+=l,m.endTime+=l}),!s.syncInfo){var f=i.cues[0].startTime,g=i.cues[i.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+i.mediaIndex,time:Math.min(f,g-o.duration)}}}},e}(Yw),LZ=function(e,r){for(var n=e.cues,i=0;i<n.length;i++){var a=n[i];if(r>=a.adStartTime&&r<=a.adEndTime)return a}return null},NZ=function(e,r,n){if(n===void 0&&(n=0),!!e.segments)for(var i=n,a,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a||(a=LZ(r,i+o.duration/2)),a){if("cueIn"in o){a.endTime=i,a.adEndTime=i,i+=o.duration,a=null;continue}if(i<a.endTime){i+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&(a=new Te.default.VTTCue(i,i+o.duration,o.cueOut),a.adStartTime=i,a.adEndTime=i+parseFloat(o.cueOut),r.addCue(a)),"cueOutCont"in o){var c=o.cueOutCont.split("/").map(parseFloat),l=c[0],f=c[1];a=new Te.default.VTTCue(i,i+o.duration,""),a.adStartTime=i-l,a.adEndTime=a.adStartTime+f,r.addCue(a)}i+=o.duration}},FZ=86400,r2=[{name:"VOD",run:function(e,r,n,i,a){if(n!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(e,r,n,i,a){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var s=null,o=null,c=jw(r);a=a||0;for(var l=0;l<c.length;l++){var f=r.endList||a===0?l:c.length-(l+1),g=c[f],m=g.segment,y=e.timelineToDatetimeMappings[m.timeline];if(!(!y||!m.dateTimeObject)){var x=m.dateTimeObject.getTime()/1e3,I=x+y;if(m.parts&&typeof g.partIndex=="number")for(var A=0;A<g.partIndex;A++)I+=m.parts[A].duration;var F=Math.abs(a-I);if(o!==null&&(F===0||o<F))break;o=F,s={time:I,segmentIndex:g.segmentIndex,partIndex:g.partIndex}}}return s}},{name:"Segment",run:function(e,r,n,i,a){var s=null,o=null;a=a||0;for(var c=jw(r),l=0;l<c.length;l++){var f=r.endList||a===0?l:c.length-(l+1),g=c[f],m=g.segment,y=g.part&&g.part.start||m&&m.start;if(m.timeline===i&&typeof y<"u"){var x=Math.abs(a-y);if(o!==null&&o<x)break;(!s||o===null||o>=x)&&(o=x,s={time:y,segmentIndex:g.segmentIndex,partIndex:g.partIndex})}}return s}},{name:"Discontinuity",run:function(e,r,n,i,a){var s=null;if(a=a||0,r.discontinuityStarts&&r.discontinuityStarts.length)for(var o=null,c=0;c<r.discontinuityStarts.length;c++){var l=r.discontinuityStarts[c],f=r.discontinuitySequence+c+1,g=e.discontinuities[f];if(g){var m=Math.abs(a-g.time);if(o!==null&&o<m)break;(!s||o===null||o>=m)&&(o=m,s={time:g.time,segmentIndex:l,partIndex:null})}}return s}},{name:"Playlist",run:function(e,r,n,i,a){if(r.syncInfo){var s={time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence,partIndex:null};return s}return null}}],MZ=function(t){Et.default(e,t);function e(n){var i;return i=t.call(this)||this,i.timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=Ps("SyncController"),i}var r=e.prototype;return r.getSyncPoint=function(i,a,s,o){var c=this.runStrategies_(i,a,s,o);return c.length?this.selectSyncPoint_(c,{key:"time",value:o}):null},r.getExpiredTime=function(i,a){if(!i||!i.segments)return null;var s=this.runStrategies_(i,a,i.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+th({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:o.segmentIndex,endIndex:0}))},r.runStrategies_=function(i,a,s,o){for(var c=[],l=0;l<r2.length;l++){var f=r2[l],g=f.run(this,i,a,s,o);g&&(g.strategy=f.name,c.push({strategy:f.name,syncPoint:g}))}return c},r.selectSyncPoint_=function(i,a){for(var s=i[0].syncPoint,o=Math.abs(i[0].syncPoint[a.key]-a.value),c=i[0].strategy,l=1;l<i.length;l++){var f=Math.abs(i[l].syncPoint[a.key]-a.value);f<o&&(o=f,s=i[l].syncPoint,c=i[l].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy"+(" ["+c+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},r.saveExpiredSegmentInfo=function(i,a){var s=a.mediaSequence-i.mediaSequence;if(s>FZ){Oe.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var c=i.segments[o];if(c&&typeof c.start<"u"){a.syncInfo={mediaSequence:i.mediaSequence+o,time:c.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+","+(" mediaSequence: "+a.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},r.setDateTimeMappingForStart=function(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var a=i.segments[0],s=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-s}},r.saveSegmentTimingInfo=function(i){var a=i.segmentInfo,s=i.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(a,a.timingInfo,s),c=a.segment;o&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:c.start}));var l=c.dateTimeObject;c.discontinuity&&s&&l&&(this.timelineToDatetimeMappings[c.timeline]=-(l.getTime()/1e3))},r.timestampOffsetForTimeline=function(i){return typeof this.timelines[i]>"u"?null:this.timelines[i].time},r.mappingForTimeline=function(i){return typeof this.timelines[i]>"u"?null:this.timelines[i].mapping},r.calculateSegmentTimeMapping_=function(i,a,s){var o=i.segment,c=i.part,l=this.timelines[i.timeline],f,g;if(typeof i.timestampOffset=="number")l={time:i.startOfSegment,mapping:i.startOfSegment-a.start},s&&(this.timelines[i.timeline]=l,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": "+("[time: "+l.time+"] [mapping: "+l.mapping+"]"))),f=i.startOfSegment,g=a.end+l.mapping;else if(l)f=a.start+l.mapping,g=a.end+l.mapping;else return!1;return c&&(c.start=f,c.end=g),(!o.start||f<o.start)&&(o.start=f),o.end=g,!0},r.saveDiscontinuitySyncInfo_=function(i){var a=i.playlist,s=i.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var o=0;o<a.discontinuityStarts.length;o++){var c=a.discontinuityStarts[o],l=a.discontinuitySequence+o+1,f=c-i.mediaIndex,g=Math.abs(f);if(!this.discontinuities[l]||this.discontinuities[l].accuracy>g){var m=void 0;f<0?m=s.start-th({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex,endIndex:c}):m=s.end+th({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex+1,endIndex:c}),this.discontinuities[l]={time:m,accuracy:g}}}},r.dispose=function(){this.trigger("dispose"),this.off()},e}(Oe.EventTarget),UZ=function(t){Et.default(e,t);function e(){var n;return n=t.call(this)||this,n.pendingTimelineChanges_={},n.lastTimelineChanges_={},n}var r=e.prototype;return r.clearPendingTimelineChange=function(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},r.pendingTimelineChange=function(i){var a=i.type,s=i.from,o=i.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[a]={type:a,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},r.lastTimelineChange=function(i){var a=i.type,s=i.from,o=i.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[a]={type:a,from:s,to:o},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},r.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(Oe.EventTarget),$Z=jR(HR(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function e(N,H,z){return z={path:H,exports:{},require:function(G,ie){return r(G,ie??z.path)}},N(z,z.exports),z.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var n=e(function(N){function H(Y,G){for(var ie=0;ie<G.length;ie++){var fe=G[ie];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(Y,fe.key,fe)}}function z(Y,G,ie){return G&&H(Y.prototype,G),ie&&H(Y,ie),Y}N.exports=z,N.exports.default=N.exports,N.exports.__esModule=!0}),i=e(function(N){function H(z,Y){return N.exports=H=Object.setPrototypeOf||function(ie,fe){return ie.__proto__=fe,ie},N.exports.default=N.exports,N.exports.__esModule=!0,H(z,Y)}N.exports=H,N.exports.default=N.exports,N.exports.__esModule=!0}),a=e(function(N){function H(z,Y){z.prototype=Object.create(Y.prototype),z.prototype.constructor=z,i(z,Y)}N.exports=H,N.exports.default=N.exports,N.exports.__esModule=!0}),s=function(){function N(){this.listeners={}}var H=N.prototype;return H.on=function(Y,G){this.listeners[Y]||(this.listeners[Y]=[]),this.listeners[Y].push(G)},H.off=function(Y,G){if(!this.listeners[Y])return!1;var ie=this.listeners[Y].indexOf(G);return this.listeners[Y]=this.listeners[Y].slice(0),this.listeners[Y].splice(ie,1),ie>-1},H.trigger=function(Y){var G=this.listeners[Y];if(G)if(arguments.length===2)for(var ie=G.length,fe=0;fe<ie;++fe)G[fe].call(this,arguments[1]);else for(var Ne=Array.prototype.slice.call(arguments,1),ye=G.length,He=0;He<ye;++He)G[He].apply(this,Ne)},H.dispose=function(){this.listeners={}},H.pipe=function(Y){this.on("data",function(G){Y.push(G)})},N}();function o(N){return N.subarray(0,N.byteLength-N[N.byteLength-1])}var c=function(){var H=[[[],[],[],[],[]],[[],[],[],[],[]]],z=H[0],Y=H[1],G=z[4],ie=Y[4],fe,Ne,ye,He=[],Re=[],Ze,ce,tt,ft,pt,Ye;for(fe=0;fe<256;fe++)Re[(He[fe]=fe<<1^(fe>>7)*283)^fe]=fe;for(Ne=ye=0;!G[Ne];Ne^=Ze||1,ye=Re[ye]||1)for(ft=ye^ye<<1^ye<<2^ye<<3^ye<<4,ft=ft>>8^ft&255^99,G[Ne]=ft,ie[ft]=Ne,tt=He[ce=He[Ze=He[Ne]]],Ye=tt*16843009^ce*65537^Ze*257^Ne*16843008,pt=He[ft]*257^ft*16843008,fe=0;fe<4;fe++)z[fe][Ne]=pt=pt<<24^pt>>>8,Y[fe][ft]=Ye=Ye<<24^Ye>>>8;for(fe=0;fe<5;fe++)z[fe]=z[fe].slice(0),Y[fe]=Y[fe].slice(0);return H},l=null,f=function(){function N(z){l||(l=c()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];var Y,G,ie,fe=this._tables[0][4],Ne=this._tables[1],ye=z.length,He=1;if(ye!==4&&ye!==6&&ye!==8)throw new Error("Invalid aes key size");var Re=z.slice(0),Ze=[];for(this._key=[Re,Ze],Y=ye;Y<4*ye+28;Y++)ie=Re[Y-1],(Y%ye===0||ye===8&&Y%ye===4)&&(ie=fe[ie>>>24]<<24^fe[ie>>16&255]<<16^fe[ie>>8&255]<<8^fe[ie&255],Y%ye===0&&(ie=ie<<8^ie>>>24^He<<24,He=He<<1^(He>>7)*283)),Re[Y]=Re[Y-ye]^ie;for(G=0;Y;G++,Y--)ie=Re[G&3?Y:Y-4],Y<=4||G<4?Ze[G]=ie:Ze[G]=Ne[0][fe[ie>>>24]]^Ne[1][fe[ie>>16&255]]^Ne[2][fe[ie>>8&255]]^Ne[3][fe[ie&255]]}var H=N.prototype;return H.decrypt=function(Y,G,ie,fe,Ne,ye){var He=this._key[1],Re=Y^He[0],Ze=fe^He[1],ce=ie^He[2],tt=G^He[3],ft,pt,Ye,xt=He.length/4-2,Ut,Pt=4,tr=this._tables[1],Ke=tr[0],Q=tr[1],pe=tr[2],xe=tr[3],_e=tr[4];for(Ut=0;Ut<xt;Ut++)ft=Ke[Re>>>24]^Q[Ze>>16&255]^pe[ce>>8&255]^xe[tt&255]^He[Pt],pt=Ke[Ze>>>24]^Q[ce>>16&255]^pe[tt>>8&255]^xe[Re&255]^He[Pt+1],Ye=Ke[ce>>>24]^Q[tt>>16&255]^pe[Re>>8&255]^xe[Ze&255]^He[Pt+2],tt=Ke[tt>>>24]^Q[Re>>16&255]^pe[Ze>>8&255]^xe[ce&255]^He[Pt+3],Pt+=4,Re=ft,Ze=pt,ce=Ye;for(Ut=0;Ut<4;Ut++)Ne[(3&-Ut)+ye]=_e[Re>>>24]<<24^_e[Ze>>16&255]<<16^_e[ce>>8&255]<<8^_e[tt&255]^He[Pt++],ft=Re,Re=Ze,Ze=ce,ce=tt,tt=ft},N}(),g=function(N){a(H,N);function H(){var Y;return Y=N.call(this,s)||this,Y.jobs=[],Y.delay=1,Y.timeout_=null,Y}var z=H.prototype;return z.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},z.push=function(G){this.jobs.push(G),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},H}(s),m=function(H){return H<<24|(H&65280)<<8|(H&16711680)>>8|H>>>24},y=function(H,z,Y){var G=new Int32Array(H.buffer,H.byteOffset,H.byteLength>>2),ie=new f(Array.prototype.slice.call(z)),fe=new Uint8Array(H.byteLength),Ne=new Int32Array(fe.buffer),ye,He,Re,Ze,ce,tt,ft,pt,Ye;for(ye=Y[0],He=Y[1],Re=Y[2],Ze=Y[3],Ye=0;Ye<G.length;Ye+=4)ce=m(G[Ye]),tt=m(G[Ye+1]),ft=m(G[Ye+2]),pt=m(G[Ye+3]),ie.decrypt(ce,tt,ft,pt,Ne,Ye),Ne[Ye]=m(Ne[Ye]^ye),Ne[Ye+1]=m(Ne[Ye+1]^He),Ne[Ye+2]=m(Ne[Ye+2]^Re),Ne[Ye+3]=m(Ne[Ye+3]^Ze),ye=ce,He=tt,Re=ft,Ze=pt;return fe},x=function(){function N(z,Y,G,ie){var fe=N.STEP,Ne=new Int32Array(z.buffer),ye=new Uint8Array(z.byteLength),He=0;for(this.asyncStream_=new g,this.asyncStream_.push(this.decryptChunk_(Ne.subarray(He,He+fe),Y,G,ye)),He=fe;He<Ne.length;He+=fe)G=new Uint32Array([m(Ne[He-4]),m(Ne[He-3]),m(Ne[He-2]),m(Ne[He-1])]),this.asyncStream_.push(this.decryptChunk_(Ne.subarray(He,He+fe),Y,G,ye));this.asyncStream_.push(function(){ie(null,o(ye))})}var H=N.prototype;return H.decryptChunk_=function(Y,G,ie,fe){return function(){var Ne=y(Y,G,ie);fe.set(Ne,Y.byteOffset)}},n(N,null,[{key:"STEP",get:function(){return 32e3}}]),N}(),I;typeof window<"u"?I=window:typeof t<"u"?I=t:typeof self<"u"?I=self:I={};var A=I,F=function(H){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(H):H&&H.buffer instanceof ArrayBuffer},X=A.BigInt||Number;X("0x1"),X("0x100"),X("0x10000"),X("0x1000000"),X("0x100000000"),X("0x10000000000"),X("0x1000000000000"),X("0x100000000000000"),X("0x10000000000000000");var de=function(H){var z={};return Object.keys(H).forEach(function(Y){var G=H[Y];F(G)?z[Y]={bytes:G.buffer,byteOffset:G.byteOffset,byteLength:G.byteLength}:z[Y]=G}),z};self.onmessage=function(N){var H=N.data,z=new Uint8Array(H.encrypted.bytes,H.encrypted.byteOffset,H.encrypted.byteLength),Y=new Uint32Array(H.key.bytes,H.key.byteOffset,H.key.byteLength/4),G=new Uint32Array(H.iv.bytes,H.iv.byteOffset,H.iv.byteLength/4);new x(z,Y,G,function(ie,fe){self.postMessage(de({source:H.source,decrypted:fe}),[fe.buffer])})}})),BZ=qR($Z),qZ=function(e){var r=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(r="main-desc"),r},vv=function(e,r){e.abort(),e.pause(),r&&r.activePlaylistLoader&&(r.activePlaylistLoader.pause(),r.activePlaylistLoader=null)},Qw=function(e,r){r.activePlaylistLoader=e,e.load()},jZ=function(e,r){return function(){var n=r.segmentLoaders,i=n[e],a=n.main,s=r.mediaTypes[e],o=s.activeTrack(),c=s.getActiveGroup(),l=s.activePlaylistLoader,f=s.lastGroup_;if(!(c&&f&&c.id===f.id)&&(s.lastGroup_=c,s.lastTrack_=o,vv(i,s),!(!c||c.isMasterPlaylist))){if(!c.playlistLoader){l&&a.resetEverything();return}i.resyncLoader(),Qw(c.playlistLoader,s)}}},HZ=function(e,r){return function(){var n=r.segmentLoaders[e],i=r.mediaTypes[e];i.lastGroup_=null,n.abort(),n.pause()}},GZ=function(e,r){return function(){var n=r.masterPlaylistLoader,i=r.segmentLoaders,a=i[e],s=i.main,o=r.mediaTypes[e],c=o.activeTrack(),l=o.getActiveGroup(),f=o.activePlaylistLoader,g=o.lastTrack_;if(!(g&&c&&g.id===c.id)&&(o.lastGroup_=l,o.lastTrack_=c,vv(a,o),!!l)){if(l.isMasterPlaylist){if(!c||!g||c.id===g.id)return;var m=r.vhs.masterPlaylistController_,y=m.selectPlaylist();if(m.media()===y)return;o.logger_("track change. Switching master audio from "+g.id+" to "+c.id),n.pause(),s.resetEverything(),m.fastQualityChange_(y);return}if(e==="AUDIO"){if(!l.playlistLoader){s.setAudio(!0),s.resetEverything();return}a.setAudio(!0),s.setAudio(!1)}if(f===l.playlistLoader){Qw(l.playlistLoader,o);return}a.track&&a.track(c),a.resetEverything(),Qw(l.playlistLoader,o)}}},yv={AUDIO:function(e,r){return function(){var n=r.segmentLoaders[e],i=r.mediaTypes[e],a=r.blacklistCurrentPlaylist;vv(n,i);var s=i.activeTrack(),o=i.activeGroup(),c=(o.filter(function(g){return g.default})[0]||o[0]).id,l=i.tracks[c];if(s===l){a({message:"Problem encountered loading the default audio track."});return}Oe.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var f in i.tracks)i.tracks[f].enabled=i.tracks[f]===l;i.onTrackChanged()}},SUBTITLES:function(e,r){return function(){var n=r.segmentLoaders[e],i=r.mediaTypes[e];Oe.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),vv(n,i);var a=i.activeTrack();a&&(a.mode="disabled"),i.onTrackChanged()}}},i2={AUDIO:function(e,r,n){if(r){var i=n.tech,a=n.requestOptions,s=n.segmentLoaders[e];r.on("loadedmetadata",function(){var o=r.media();s.playlist(o,a),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),a),i.paused()||s.load()}),r.on("error",yv[e](e,n))}},SUBTITLES:function(e,r,n){var i=n.tech,a=n.requestOptions,s=n.segmentLoaders[e],o=n.mediaTypes[e];r.on("loadedmetadata",function(){var c=r.media();s.playlist(c,a),s.track(o.activeTrack()),(!i.paused()||c.endList&&i.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),a),i.paused()||s.load()}),r.on("error",yv[e](e,n))}},zZ={AUDIO:function(e,r){var n=r.vhs,i=r.sourceType,a=r.segmentLoaders[e],s=r.requestOptions,o=r.master.mediaGroups,c=r.mediaTypes[e],l=c.groups,f=c.tracks,g=c.logger_,m=r.masterPlaylistLoader,y=hh(m.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},y&&(o[e].main.default.playlists=m.master.playlists));for(var x in o[e]){l[x]||(l[x]=[]);for(var I in o[e][x]){var A=o[e][x][I],F=void 0;if(y?(g("AUDIO group '"+x+"' label '"+I+"' is a master playlist"),A.isMasterPlaylist=!0,F=null):i==="vhs-json"&&A.playlists?F=new Ed(A.playlists[0],n,s):A.resolvedUri?F=new Ed(A.resolvedUri,n,s):A.playlists&&i==="dash"?F=new Kw(A.playlists[0],n,s,m):F=null,A=Oe.mergeOptions({id:I,playlistLoader:F},A),i2[e](e,A.playlistLoader,r),l[x].push(A),typeof f[I]>"u"){var X=new Oe.AudioTrack({id:I,kind:qZ(A),enabled:!1,language:A.language,default:A.default,label:I});f[I]=X}}}a.on("error",yv[e](e,r))},SUBTITLES:function(e,r){var n=r.tech,i=r.vhs,a=r.sourceType,s=r.segmentLoaders[e],o=r.requestOptions,c=r.master.mediaGroups,l=r.mediaTypes[e],f=l.groups,g=l.tracks,m=r.masterPlaylistLoader;for(var y in c[e]){f[y]||(f[y]=[]);for(var x in c[e][y])if(!c[e][y][x].forced){var I=c[e][y][x],A=void 0;if(a==="hls")A=new Ed(I.resolvedUri,i,o);else if(a==="dash"){var F=I.playlists.filter(function(de){return de.excludeUntil!==1/0});if(!F.length)return;A=new Kw(I.playlists[0],i,o,m)}else a==="vhs-json"&&(A=new Ed(I.playlists?I.playlists[0]:I.resolvedUri,i,o));if(I=Oe.mergeOptions({id:x,playlistLoader:A},I),i2[e](e,I.playlistLoader,r),f[y].push(I),typeof g[x]>"u"){var X=n.addRemoteTextTrack({id:x,kind:"subtitles",default:I.default&&I.autoselect,language:I.language,label:x},!1).track;g[x]=X}}}s.on("error",yv[e](e,r))},"CLOSED-CAPTIONS":function(e,r){var n=r.tech,i=r.master.mediaGroups,a=r.mediaTypes[e],s=a.groups,o=a.tracks;for(var c in i[e]){s[c]||(s[c]=[]);for(var l in i[e][c]){var f=i[e][c][l];if(/^(?:CC|SERVICE)/.test(f.instreamId)){var g=n.options_.vhs&&n.options_.vhs.captionServices||{},m={label:l,language:f.language,instreamId:f.instreamId,default:f.default&&f.autoselect};if(g[m.instreamId]&&(m=Oe.mergeOptions(m,g[m.instreamId])),m.default===void 0&&delete m.default,s[c].push(Oe.mergeOptions({id:l},f)),typeof o[l]>"u"){var y=n.addRemoteTextTrack({id:m.instreamId,kind:"captions",default:m.default,language:m.language,label:m.label},!1).track;o[l]=y}}}}}},VZ=function t(e,r){for(var n=0;n<e.length;n++)if(OS(r,e[n])||e[n].playlists&&t(e[n].playlists,r))return!0;return!1},WZ=function(e,r){return function(n){var i=r.masterPlaylistLoader,a=r.mediaTypes[e].groups,s=i.media();if(!s)return null;var o=null;s.attributes[e]&&(o=a[s.attributes[e]]);var c=Object.keys(a);if(!o)if(e==="AUDIO"&&c.length>1&&hh(r.master))for(var l=0;l<c.length;l++){var f=a[c[l]];if(VZ(f,s)){o=f;break}}else a.main?o=a.main:c.length===1&&(o=a[c[0]]);return typeof n>"u"?o:n===null||!o?null:o.filter(function(g){return g.id===n.id})[0]||null}},KZ={AUDIO:function(e,r){return function(){var n=r.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,r){return function(){var n=r.mediaTypes[e].tracks;for(var i in n)if(n[i].mode==="showing"||n[i].mode==="hidden")return n[i];return null}}},XZ=function(e,r){var n=r.mediaTypes;return function(){var i=n[e].activeTrack();return i?n[e].activeGroup(i):null}},YZ=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(x){zZ[x](x,e)});var r=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,a=e.vhs,s=e.segmentLoaders,o=s.AUDIO,c=s.main;["AUDIO","SUBTITLES"].forEach(function(x){r[x].activeGroup=WZ(x,e),r[x].activeTrack=KZ[x](x,e),r[x].onGroupChanged=jZ(x,e),r[x].onGroupChanging=HZ(x,e),r[x].onTrackChanged=GZ(x,e),r[x].getActiveGroup=XZ(x,e)});var l=r.AUDIO.activeGroup();if(l){var f=(l.filter(function(x){return x.default})[0]||l[0]).id;r.AUDIO.tracks[f].enabled=!0,r.AUDIO.onGroupChanged(),r.AUDIO.onTrackChanged();var g=r.AUDIO.getActiveGroup();g.playlistLoader?(c.setAudio(!1),o.setAudio(!0)):c.setAudio(!0)}n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(x){return r[x].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(x){return r[x].onGroupChanging()})});var m=function(){r.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",m),i.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged),a.on("dispose",function(){i.audioTracks().removeEventListener("change",m),i.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(var y in r.AUDIO.tracks)i.audioTracks().addTrack(r.AUDIO.tracks[y])},JZ=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(r){e[r]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:eu,activeTrack:eu,getActiveGroup:eu,onGroupChanged:eu,onTrackChanged:eu,lastTrack_:null,logger_:Ps("MediaGroups["+r+"]")}}),e},QZ=60*2,Jo,ZZ=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],eee=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},tee=function(e){var r=e.currentPlaylist,n=e.buffered,i=e.currentTime,a=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,c=e.duration,l=e.experimentalBufferBasedABR,f=e.log;if(!a)return Oe.log.warn("We received no playlist to switch to. Please check your stream."),!1;var g="allowing switch "+(r&&r.id||"null")+" -> "+a.id;if(!r)return f(g+" as current playlist is not set"),!0;if(a.id===r.id)return!1;var m=!!Cd(n,i).length;if(!r.endList)return!m&&typeof r.partTargetDuration=="number"?(f("not "+g+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(f(g+" as current playlist is live"),!0);var y=kS(n,i),x=l?xn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:xn.MAX_BUFFER_LOW_WATER_LINE;if(c<x)return f(g+" as duration < max low water line ("+c+" < "+x+")"),!0;var I=a.attributes.BANDWIDTH,A=r.attributes.BANDWIDTH;if(I<A&&(!l||y<o)){var F=g+" as next bandwidth < current bandwidth ("+I+" < "+A+")";return l&&(F+=" and forwardBuffer < bufferHighWaterLine ("+y+" < "+o+")"),f(F),!0}if((!l||I>A)&&y>=s){var X=g+" as forwardBuffer >= bufferLowWaterLine ("+y+" >= "+s+")";return l&&(X+=" and next bandwidth > current bandwidth ("+I+" > "+A+")"),f(X),!0}return f("not "+g+" as no switching criteria met"),!1},ree=function(t){Et.default(e,t);function e(n){var i;i=t.call(this)||this;var a=n.src,s=n.handleManifestRedirects,o=n.withCredentials,c=n.tech,l=n.bandwidth,f=n.externVhs,g=n.useCueTags,m=n.blacklistDuration,y=n.enableLowInitialPlaylist,x=n.sourceType,I=n.cacheEncryptionKeys,A=n.experimentalBufferBasedABR,F=n.experimentalLeastPixelDiffSelector,X=n.captionServices;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");var de=n.maxPlaylistRetries;(de===null||typeof de>"u")&&(de=1/0),Jo=f,i.experimentalBufferBasedABR=!!A,i.experimentalLeastPixelDiffSelector=!!F,i.withCredentials=o,i.tech_=c,i.vhs_=c.vhs,i.sourceType_=x,i.useCueTags_=g,i.blacklistDuration=m,i.maxPlaylistRetries=de,i.enableLowInitialPlaylist=y,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:de,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=JZ(),i.mediaSource=new Te.default.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(er.default(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(er.default(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(er.default(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=Oe.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new MZ(n),i.segmentMetadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new BZ,i.sourceUpdater_=new rL(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new UZ;var N={vhs:i.vhs_,parse708captions:n.parse708captions,useDtsForTimestampOffset:n.useDtsForTimestampOffset,captionServices:X,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:l,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:I,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};i.masterPlaylistLoader_=i.sourceType_==="dash"?new Kw(a,i.vhs_,i.requestOptions_):new Ed(a,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Yw(Oe.mergeOptions(N,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),n),i.audioSegmentLoader_=new Yw(Oe.mergeOptions(N,{loaderType:"audio"}),n),i.subtitleSegmentLoader_=new RZ(Oe.mergeOptions(N,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(Y,G){function ie(){c.off("vttjserror",fe),Y()}function fe(){c.off("vttjsloaded",ie),G()}c.one("vttjsloaded",ie),c.one("vttjserror",fe),c.addWebVttScript_()})}}),n),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),ZZ.forEach(function(z){i[z+"_"]=eee.bind(er.default(i),z)}),i.logger_=Ps("MPC"),i.triggeredFmp4Usage=!1,i.tech_.preload()==="none"?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var H=i.tech_.preload()==="none"?"play":"loadstart";return i.tech_.one(H,function(){var z=Date.now();i.tech_.one("loadeddata",function(){i.timeToLoadedData__=Date.now()-z,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends})}),i}var r=e.prototype;return r.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},r.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},r.appendsToLoadedData_=function(){var i=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return i===-1||a===-1?-1:i+a},r.timeToLoadedData_=function(){return this.timeToLoadedData__},r.checkABR_=function(i){i===void 0&&(i="abr");var a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,i)},r.switchMedia_=function(i,a,s){var o=this.media(),c=o&&(o.id||o.uri),l=i.id||i.uri;c&&c!==l&&(this.logger_("switch media "+c+" -> "+l+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(i,s)},r.startABRTimer_=function(){var i=this;this.stopABRTimer_(),this.abrTimer_=Te.default.setInterval(function(){return i.checkABR_()},250)},r.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Te.default.clearInterval(this.abrTimer_),this.abrTimer_=null)},r.getAudioTrackPlaylists_=function(){var i=this.master(),a=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return a;var s=i.mediaGroups.AUDIO,o=Object.keys(s),c;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)c=this.mediaTypes_.AUDIO.activeTrack();else{var l=s.main||o.length&&s[o[0]];for(var f in l)if(l[f].default){c={label:f};break}}if(!c)return a;var g=[];for(var m in s)if(s[m][c.label]){var y=s[m][c.label];if(y.playlists&&y.playlists.length)g.push.apply(g,y.playlists);else if(y.uri)g.push(y);else if(i.playlists.length)for(var x=0;x<i.playlists.length;x++){var I=i.playlists[x];I.attributes&&I.attributes.AUDIO&&I.attributes.AUDIO===m&&g.push(I)}}return g.length?g:a},r.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=i.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Hw(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,a.endList&&i.tech_.preload()!=="none"&&(i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load()),YZ({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),a),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var a=i.masterPlaylistLoader_.media();if(!a){i.excludeUnsupportedVariants_();var s;if(i.enableLowInitialPlaylist&&(s=i.selectInitialPlaylist()),s||(s=i.selectPlaylist()),!s||!i.shouldSwitchToMedia_(s))return;i.initialMedia_=s,i.switchMedia_(i.initialMedia_,"initial");var o=i.sourceType_==="vhs-json"&&i.initialMedia_.segments;if(!o)return;a=i.initialMedia_}i.handleUpdatedMediaPlaylist(a)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=i.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Hw(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,i.masterPlaylistLoader_.load(),i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=i.masterPlaylistLoader_.media();if(a.lastExcludeReason_!=="playlist-unchanged"){var s=i.stuckAtPlaylistEnd_(a);s&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},r.handleUpdatedMediaPlaylist=function(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},r.triggerPresenceUsage_=function(i,a){var s=i.mediaGroups||{},o=!0,c=Object.keys(s.AUDIO);for(var l in s.AUDIO)for(var f in s.AUDIO[l]){var g=s.AUDIO[l][f];g.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Jo.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),c.length&&Object.keys(s.AUDIO[c[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},r.shouldSwitchToMedia_=function(i){var a=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),c=this.bufferHighWaterLine(),l=this.tech_.buffered();return tee({buffered:l,currentTime:s,currentPlaylist:a,nextPlaylist:i,bufferLowWaterLine:o,bufferHighWaterLine:c,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},r.setupSegmentLoaderListeners_=function(){var i=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){i.checkABR_("bandwidthupdate"),i.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){i.experimentalBufferBasedABR&&i.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){i.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){i.logger_("main segment loader ended"),i.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},QZ))});var a=function(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var o=i.getCodecsOrExclude_();o&&i.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()})},r.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},r.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},r.smoothQualityChange_=function(i){i===void 0&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},r.fastQualityChange_=function(i){var a=this;if(i===void 0&&(i=this.selectPlaylist()),i===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){Oe.browser.IE_VERSION||Oe.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())})},r.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0))return this.tech_.setCurrentTime(i.end(i.length-1))}},r.setupFirstPlay=function(){var i=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var s=this.seekable();if(!s.length)return!1;if(Oe.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){i.trigger("firstplay"),i.tech_.setCurrentTime(s.end(0)),i.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},r.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();typeof i<"u"&&typeof i.then=="function"&&i.then(null,function(a){})}this.trigger("sourceopen")},r.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(!(!i||!i.length)){var a=this.duration();i[i.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}}},r.handleDurationChange_=function(){this.tech_.trigger("durationchange")},r.onEndOfStream=function(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var a=this.mainSegmentLoader_.getCurrentMediaInfo_();!a||a.hasVideo?i=i&&this.audioSegmentLoader_.ended_:i=this.audioSegmentLoader_.ended_}i&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},r.stuckAtPlaylistEnd_=function(i){var a=this.seekable();if(!a.length)return!1;var s=this.syncController_.getExpiredTime(i,this.duration());if(s===null)return!1;var o=Jo.Playlist.playlistEnd(i,s),c=this.tech_.currentTime(),l=this.tech_.buffered();if(!l.length)return o-c<=lo;var f=l.end(l.length-1);return f-c<=lo&&o-f<=lo},r.blacklistCurrentPlaylist=function(i,a){i===void 0&&(i={});var s=i.playlist||this.masterPlaylistLoader_.media();if(a=a||i.blacklistDuration||this.blacklistDuration,!s){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,c=o.filter(Iv),l=c.length===1&&c[0]===s;if(o.length===1&&a!==1/0)return Oe.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(l);if(l){var f=!1;o.forEach(function(F){if(F!==s){var X=F.excludeUntil;typeof X<"u"&&X!==1/0&&(f=!0,delete F.excludeUntil)}}),f&&(Oe.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var g;s.playlistErrors_>this.maxPlaylistRetries?g=1/0:g=Date.now()+a*1e3,s.excludeUntil=g,i.reason&&(s.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var m=this.selectPlaylist();if(!m){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var y=i.internal?this.logger_:Oe.log.warn,x=i.message?" "+i.message:"";y((i.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(x+" Switching to playlist "+m.id+".")),m.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),m.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var I=m.targetDuration/2*1e3||5*1e3,A=typeof m.lastRequest=="number"&&Date.now()-m.lastRequest<=I;return this.switchMedia_(m,"exclude",l||A)},r.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},r.delegateLoaders_=function(i,a){var s=this,o=[],c=i==="all";(c||i==="main")&&o.push(this.masterPlaylistLoader_);var l=[];(c||i==="audio")&&l.push("AUDIO"),(c||i==="subtitle")&&(l.push("CLOSED-CAPTIONS"),l.push("SUBTITLES")),l.forEach(function(f){var g=s.mediaTypes_[f]&&s.mediaTypes_[f].activePlaylistLoader;g&&o.push(g)}),["main","audio","subtitle"].forEach(function(f){var g=s[f+"SegmentLoader_"];g&&(i===f||i==="all")&&o.push(g)}),o.forEach(function(f){return a.forEach(function(g){typeof f[g]=="function"&&f[g]()})})},r.setCurrentTime=function(i){var a=Cd(this.tech_.buffered(),i);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(a&&a.length)return i;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},r.duration=function(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:Jo.Playlist.duration(i):1/0:0},r.seekable=function(){return this.seekable_},r.onSyncInfoUpdate_=function(){var i;if(this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(a){var s=this.syncController_.getExpiredTime(a,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,c=Jo.Playlist.seekable(a,s,Jo.Playlist.liveEdgeDelay(o,a));if(c.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(a,this.duration()),s===null||(i=Jo.Playlist.seekable(a,s,Jo.Playlist.liveEdgeDelay(o,a)),i.length===0)))){var l,f;this.seekable_&&this.seekable_.length&&(l=this.seekable_.end(0),f=this.seekable_.start(0)),i?i.start(0)>c.end(0)||c.start(0)>i.end(0)?this.seekable_=c:this.seekable_=Oe.createTimeRanges([[i.start(0)>c.start(0)?i.start(0):c.start(0),i.end(0)<c.end(0)?i.end(0):c.end(0)]]):this.seekable_=c,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===l&&this.seekable_.start(0)===f)&&(this.logger_("seekable updated ["+bR(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},r.updateDuration=function(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,i),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(i){var a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}var s=this.tech_.buffered(),o=Jo.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},r.dispose=function(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var s=i.mediaTypes_[a].groups;for(var o in s)s[o].forEach(function(c){c.playlistLoader&&c.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},r.master=function(){return this.masterPlaylistLoader_.master},r.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},r.areMediaTypesKnown_=function(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=i?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!a||!s)},r.getCodecsOrExclude_=function(){var i=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();a.video=a.main;var o=rh(this.master(),s),c={},l=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(c.video=o.video||a.main.videoCodec||ci.DEFAULT_VIDEO_CODEC),a.main.isMuxed&&(c.video+=","+(o.audio||a.main.audioCodec||ci.DEFAULT_AUDIO_CODEC)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||l)&&(c.audio=o.audio||a.main.audioCodec||a.audio.audioCodec||ci.DEFAULT_AUDIO_CODEC,a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4),!c.audio&&!c.video){this.blacklistCurrentPlaylist({playlist:s,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var f=function(F,X){return F?ci.browserSupportsCodec(X):ci.muxerSupportsCodec(X)},g={},m;if(["video","audio"].forEach(function(A){if(c.hasOwnProperty(A)&&!f(a[A].isFmp4,c[A])){var F=a[A].isFmp4?"browser":"muxer";g[F]=g[F]||[],g[F].push(c[A]),A==="audio"&&(m=F)}}),l&&m&&s.attributes.AUDIO){var y=s.attributes.AUDIO;this.master().playlists.forEach(function(A){var F=A.attributes&&A.attributes.AUDIO;F===y&&A!==s&&(A.excludeUntil=1/0)}),this.logger_("excluding audio group "+y+" as "+m+' does not support codec(s): "'+c.audio+'"')}if(Object.keys(g).length){var x=Object.keys(g).reduce(function(A,F){return A&&(A+=", "),A+=F+' does not support codec(s): "'+g[F].join(",")+'"',A},"")+".";this.blacklistCurrentPlaylist({playlist:s,internal:!0,message:x,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var I=[];if(["video","audio"].forEach(function(A){var F=(ci.parseCodecs(i.sourceUpdater_.codecs[A]||"")[0]||{}).type,X=(ci.parseCodecs(c[A]||"")[0]||{}).type;F&&X&&F.toLowerCase()!==X.toLowerCase()&&I.push('"'+i.sourceUpdater_.codecs[A]+'" -> "'+c[A]+'"')}),I.length){this.blacklistCurrentPlaylist({playlist:s,message:"Codec switching not supported: "+I.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return c},r.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(i){this.sourceUpdater_.createSourceBuffers(i);var a=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}}},r.excludeUnsupportedVariants_=function(){var i=this,a=this.master().playlists,s=[];Object.keys(a).forEach(function(o){var c=a[o];if(s.indexOf(c.id)===-1){s.push(c.id);var l=rh(i.master,c),f=[];l.audio&&!ci.muxerSupportsCodec(l.audio)&&!ci.browserSupportsCodec(l.audio)&&f.push("audio codec "+l.audio),l.video&&!ci.muxerSupportsCodec(l.video)&&!ci.browserSupportsCodec(l.video)&&f.push("video codec "+l.video),l.text&&l.text==="stpp.ttml.im1t"&&f.push("text codec "+l.text),f.length&&(c.excludeUntil=1/0,i.logger_("excluding "+c.id+" for unsupported: "+f.join(", ")))}})},r.excludeIncompatibleVariants_=function(i){var a=this,s=[],o=this.master().playlists,c=gv(ci.parseCodecs(i)),l=VP(c),f=c.video&&ci.parseCodecs(c.video)[0]||null,g=c.audio&&ci.parseCodecs(c.audio)[0]||null;Object.keys(o).forEach(function(m){var y=o[m];if(!(s.indexOf(y.id)!==-1||y.excludeUntil===1/0)){s.push(y.id);var x=[],I=rh(a.masterPlaylistLoader_.master,y),A=VP(I);if(!(!I.audio&&!I.video)){if(A!==l&&x.push('codec count "'+A+'" !== "'+l+'"'),!a.sourceUpdater_.canChangeType()){var F=I.video&&ci.parseCodecs(I.video)[0]||null,X=I.audio&&ci.parseCodecs(I.audio)[0]||null;F&&f&&F.type.toLowerCase()!==f.type.toLowerCase()&&x.push('video codec "'+F.type+'" !== "'+f.type+'"'),X&&g&&X.type.toLowerCase()!==g.type.toLowerCase()&&x.push('audio codec "'+X.type+'" !== "'+g.type+'"')}x.length&&(y.excludeUntil=1/0,a.logger_("blacklisting "+y.id+": "+x.join(" && ")))}}})},r.updateAdCues_=function(i){var a=0,s=this.seekable();s.length&&(a=s.start(0)),NZ(i,this.cueTagsTrack_,a)},r.goalBufferLength=function(){var i=this.tech_.currentTime(),a=xn.GOAL_BUFFER_LENGTH,s=xn.GOAL_BUFFER_LENGTH_RATE,o=Math.max(a,xn.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+i*s,o)},r.bufferLowWaterLine=function(){var i=this.tech_.currentTime(),a=xn.BUFFER_LOW_WATER_LINE,s=xn.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(a,xn.MAX_BUFFER_LOW_WATER_LINE),c=Math.max(a,xn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+i*s,this.experimentalBufferBasedABR?c:o)},r.bufferHighWaterLine=function(){return xn.BUFFER_HIGH_WATER_LINE},e}(Oe.EventTarget),iee=function(e,r,n){return function(i){var a=e.master.playlists[r],s=DS(a),o=Iv(a);return typeof i>"u"?o:(i?delete a.disabled:a.disabled=!0,i!==o&&!s&&(n(),i?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),i)}},nee=function(e,r,n){var i=e.masterPlaylistController_,a=e.options_.smoothQualityChange,s=a?"smooth":"fast",o=i[s+"QualityChange_"].bind(i);if(r.attributes){var c=r.attributes.RESOLUTION;this.width=c&&c.width,this.height=c&&c.height,this.bandwidth=r.attributes.BANDWIDTH,this.frameRate=r.attributes["FRAME-RATE"]}this.codecs=rh(i.master(),r),this.playlist=r,this.id=n,this.enabled=iee(e.playlists,r.id,o)},aee=function(e){e.representations=function(){var r=e.masterPlaylistController_.master(),n=hh(r)?e.masterPlaylistController_.getAudioTrackPlaylists_():r.playlists;return n?n.filter(function(i){return!DS(i)}).map(function(i,a){return new nee(e,i,i.id)}):[]}},n2=["seeking","seeked","pause","playing","error"],see=function(){function t(r){var n=this;this.masterPlaylistController_=r.masterPlaylistController,this.tech_=r.tech,this.seekable=r.seekable,this.allowSeeksWithinUnsafeLiveWindow=r.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=r.liveRangeSafeTimeDelta,this.media=r.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ps("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},a=function(){return n.monitorCurrentTime_()},s=function(){return n.techWaiting_()},o=function(){return n.cancelTimer_()},c=this.masterPlaylistController_,l=["main","subtitle","audio"],f={};l.forEach(function(m){f[m]={reset:function(){return n.resetSegmentDownloads_(m)},updateend:function(){return n.checkSegmentDownloads_(m)}},c[m+"SegmentLoader_"].on("appendsdone",f[m].updateend),c[m+"SegmentLoader_"].on("playlistupdate",f[m].reset),n.tech_.on(["seeked","seeking"],f[m].reset)});var g=function(y){["main","audio"].forEach(function(x){c[x+"SegmentLoader_"][y]("appended",n.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),g("off"))},this.clearSeekingAppendCheck_=function(){return g("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),g("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(n2,o),this.tech_.on("canplay",a),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",s),n.tech_.off(n2,o),n.tech_.off("canplay",a),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),l.forEach(function(m){c[m+"SegmentLoader_"].off("appendsdone",f[m].updateend),c[m+"SegmentLoader_"].off("playlistupdate",f[m].reset),n.tech_.off(["seeked","seeking"],f[m].reset)}),n.checkCurrentTimeTimeout_&&Te.default.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var e=t.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Te.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Te.default.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(n){var i=this.masterPlaylistController_[n+"SegmentLoader_"];this[n+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+n+" loader"),this[n+"StalledDownloads_"]=0,this[n+"Buffered_"]=i.buffered_()},e.checkSegmentDownloads_=function(n){var i=this.masterPlaylistController_,a=i[n+"SegmentLoader_"],s=a.buffered_(),o=JJ(this[n+"Buffered_"],s);if(this[n+"Buffered_"]=s,o){this.resetSegmentDownloads_(n);return}this[n+"StalledDownloads_"]++,this.logger_("found #"+this[n+"StalledDownloads_"]+" "+n+" appends that did not increase buffer (possible stalled download)",{playlistId:a.playlist_&&a.playlist_.id,buffered:Kc(s)}),!(this[n+"StalledDownloads_"]<10)&&(this.logger_(n+" loader stalled download exclusion"),this.resetSegmentDownloads_(n),this.tech_.trigger({type:"usage",name:"vhs-"+n+"-download-exclusion"}),n!=="subtitle"&&i.blacklistCurrentPlaylist({message:"Excessive "+n+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var n=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===n&&(!i.length||n+lo>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var n=this.tech_.seeking();if(!n)return!1;var i=this.seekable(),a=this.tech_.currentTime(),s=this.afterSeekableWindow_(i,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var c=i.end(i.length-1);o=c}if(this.beforeSeekableWindow_(i,a)){var l=i.start(0);o=l+(l===i.end(0)?0:lo)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+a+" with "+("seekable range "+bR(i)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var f=this.masterPlaylistController_.sourceUpdater_,g=this.tech_.buffered(),m=f.audioBuffer?f.audioBuffered():null,y=f.videoBuffer?f.videoBuffered():null,x=this.media(),I=x.partTargetDuration?x.partTargetDuration:(x.targetDuration-Xu)*2,A=[m,y],F=0;F<A.length;F++)if(A[F]){var X=kS(A[F],a);if(X<I)return!1}var de=Vm(g,a);return de.length===0?!1:(o=de.start(0)+lo,this.logger_("Buffered region starts ("+de.start(0)+") "+(" just beyond seek point ("+a+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),i=this.tech_.buffered(),a=Cd(i,n);if(a.length&&n+3<=a.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region "+("["+a.start(0)+" -> "+a.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var n=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(n,i)){var a=n.end(n.length-1);return this.logger_("Fell out of live window at time "+i+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),c=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:i});if(c)return this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var l=Vm(o,i);if(l.length>0){var f=l.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+f+", seeking "+("to "+l.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),f*1e3,i),!0}return!1},e.afterSeekableWindow_=function(n,i,a,s){if(s===void 0&&(s=!1),!n.length)return!1;var o=n.end(n.length-1)+lo,c=!a.endList;return c&&s&&(o=n.end(n.length-1)+a.targetDuration*3),i>o},e.beforeSeekableWindow_=function(n,i){return!!(n.length&&n.start(0)>0&&i<n.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(n){var i=n.videoBuffered,a=n.audioBuffered,s=n.currentTime;if(i){var o;if(i.length&&a.length){var c=Cd(i,s-3),l=Cd(i,s),f=Cd(a,s);f.length&&!l.length&&c.length&&(o={start:c.end(0),end:f.end(0)})}else{var g=Vm(i,s);g.length||(o=this.gapFromVideoUnderflow_(i,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},e.skipTheGap_=function(n){var i=this.tech_.buffered(),a=this.tech_.currentTime(),s=Vm(i,a);this.cancelTimer_(),!(s.length===0||a!==n)&&(this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",n,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Xu),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(n,i){for(var a=KJ(n),s=0;s<a.length;s++){var o=a.start(s),c=a.end(s);if(i-o<4&&i-o>2)return{start:o,end:c}}return null},t}(),oee={errorInterval:30,getSource:function(e){var r=this.tech({IWillNotUseThisInPlugins:!0}),n=r.currentSource_||this.currentSource();return e(n)}},uee=function t(e,r){var n=0,i=0,a=Oe.mergeOptions(oee,r);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){i&&e.currentTime(i)},o=function(m){m!=null&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(m),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},c=function(){if(Date.now()-n<a.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){Oe.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),a.getSource.call(e,o)},l=function g(){e.off("loadedmetadata",s),e.off("error",c),e.off("dispose",g)},f=function(m){l(),t(e,m)};e.on("error",c),e.on("dispose",l),e.reloadSourceOnError=f},cee=function(e){uee(this,e)},iL="2.16.3",lee="6.0.1",dee="0.22.1",fee="4.8.0",pee="3.1.3",Mn={PlaylistLoader:Ed,Playlist:Fa,utils:SQ,STANDARD_PLAYLIST_SELECTOR:KP,INITIAL_PLAYLIST_SELECTOR:dZ,lastBandwidthSelector:KP,movingAverageBandwidthSelector:cZ,comparePlaylistBandwidth:LS,comparePlaylistResolution:uZ,xhr:LR()};Object.keys(xn).forEach(function(t){Object.defineProperty(Mn,t,{get:function(){return Oe.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),xn[t]},set:function(r){if(Oe.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),typeof r!="number"||r<0){Oe.log.warn("value of Vhs."+t+" must be greater than or equal to 0");return}xn[t]=r}})});var nL="videojs-vhs",aL=function(e,r){for(var n=r.media(),i=-1,a=0;a<e.length;a++)if(e[a].id===n.id){i=a;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},hee=function(e,r){r.representations().forEach(function(n){e.addQualityLevel(n)}),aL(e,r.playlists)};Mn.canPlaySource=function(){return Oe.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var gee=function(e,r,n){if(!e)return e;var i={};r&&r.attributes&&r.attributes.CODECS&&(i=gv(ci.parseCodecs(r.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var a=ci.getMimeForCodec(i.video),s=ci.getMimeForCodec(i.audio),o={};for(var c in e)o[c]={},s&&(o[c].audioContentType=s),a&&(o[c].videoContentType=a),r.contentProtection&&r.contentProtection[c]&&r.contentProtection[c].pssh&&(o[c].pssh=r.contentProtection[c].pssh),typeof e[c]=="string"&&(o[c].url=e[c]);return Oe.mergeOptions(e,o)},mee=function(e,r){return e.reduce(function(n,i){if(!i.contentProtection)return n;var a=r.reduce(function(s,o){var c=i.contentProtection[o];return c&&c.pssh&&(s[o]={pssh:c.pssh}),s},{});return Object.keys(a).length&&n.push(a),n},[])},vee=function(e){var r=e.player,n=e.sourceKeySystems,i=e.audioMedia,a=e.mainPlaylists;if(!r.eme.initializeMediaKeys)return Promise.resolve();var s=i?a.concat([i]):a,o=mee(s,Object.keys(n)),c=[],l=[];return o.forEach(function(f){l.push(new Promise(function(g,m){r.tech_.one("keysessioncreated",g)})),c.push(new Promise(function(g,m){r.eme.initializeMediaKeys({keySystems:f},function(y){if(y){m(y);return}g()})}))}),Promise.race([Promise.all(c),Promise.race(l)])},yee=function(e){var r=e.player,n=e.sourceKeySystems,i=e.media,a=e.audioMedia,s=gee(n,i,a);return s?(r.currentSource().keySystems=s,s&&!r.eme?(Oe.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},sL=function(){if(!Te.default.localStorage)return null;var e=Te.default.localStorage.getItem(nL);if(!e)return null;try{return JSON.parse(e)}catch{return null}},bee=function(e){if(!Te.default.localStorage)return!1;var r=sL();r=r?Oe.mergeOptions(r,e):e;try{Te.default.localStorage.setItem(nL,JSON.stringify(r))}catch{return!1}return r},_ee=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};Mn.supportsNativeHls=function(){if(!wt.default||!wt.default.createElement)return!1;var t=wt.default.createElement("video");if(!Oe.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(r){return/maybe|probably/i.test(t.canPlayType(r))})}();Mn.supportsNativeDash=function(){return!wt.default||!wt.default.createElement||!Oe.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(wt.default.createElement("video").canPlayType("application/dash+xml"))}();Mn.supportsTypeNatively=function(t){return t==="hls"?Mn.supportsNativeHls:t==="dash"?Mn.supportsNativeDash:!1};Mn.isSupported=function(){return Oe.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var wee=Oe.getComponent("Component"),FS=function(t){Et.default(e,t);function e(n,i,a){var s;if(s=t.call(this,i,Oe.mergeOptions(a.hls,a.vhs))||this,a.hls&&Object.keys(a.hls).length&&Oe.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof a.initialBandwidth=="number"&&(s.options_.bandwidth=a.initialBandwidth),s.logger_=Ps("VhsHandler"),i.options_&&i.options_.playerId){var o=Oe(i.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return Oe.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),er.default(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return Oe.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),er.default(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return Oe.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),er.default(s)},configurable:!0}),s.player_=o}if(s.tech_=i,s.source_=n,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(wt.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(c){var l=wt.default.fullscreenElement||wt.default.webkitFullscreenElement||wt.default.mozFullScreenElement||wt.default.msFullscreenElement;l&&l.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var r=e.prototype;return r.setOptions_=function(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var a=sL();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=xn.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===xn.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof i.source_[s]<"u"&&(i.options_[s]=i.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},r.src=function(i,a){var s=this;if(i){this.setOptions_(),this.options_.src=_ee(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Mn,this.options_.sourceType=s2.simpleTypeFromSourceType(a),this.options_.seekTo=function(l){s.tech_.setCurrentTime(l)},this.options_.smoothQualityChange&&Oe.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new ree(this.options_);var o=Oe.mergeOptions({liveRangeSafeTimeDelta:lo},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new see(o),this.masterPlaylistController_.on("error",function(){var l=Oe.players[s.tech_.options_.playerId],f=s.masterPlaylistController_.error;typeof f=="object"&&!f.code?f.code=3:typeof f=="string"&&(f={message:f,code:3}),l.error(f)});var c=this.options_.experimentalBufferBasedABR?Mn.movingAverageBandwidthSelector(.55):Mn.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):c.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Mn.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(f){this.masterPlaylistController_.selectPlaylist=f.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(f){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=f,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var f=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,g=Te.default.navigator.connection||Te.default.navigator.mozConnection||Te.default.navigator.webkitConnection,m=1e7;if(this.options_.useNetworkInformationApi&&g){var y=g.downlink*1e3*1e3;y>=m&&f>=m?f=Math.max(f,y):f=y}return f},set:function(f){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=f,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var f=1/(this.bandwidth||1),g;this.throughput>0?g=1/this.throughput:g=0;var m=Math.floor(1/(f+g));return m},set:function(){Oe.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Kc(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Kc(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&bee({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){aee(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Te.default.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},r.createKeySessions_=function(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),vee({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){i.logger_("error while creating EME key session",s),i.player_.error({message:"Failed to initialize media keys for EME",code:3})})},r.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},r.setupEme_=function(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=yee({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var c=i.masterPlaylistController_.master();if(!(!c||!c.playlists)){var l=[];if(c.playlists.forEach(function(g){g&&g.attributes&&g.attributes.RESOLUTION&&g.attributes.RESOLUTION.height>=720&&(!g.excludeUntil||g.excludeUntil<1/0)&&(g.excludeUntil=1/0,l.push(g))}),l.length){var f;(f=Oe.log).warn.apply(f,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(l)),i.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),Oe.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},r.setupQualityLevels_=function(){var i=this,a=Oe.players[this.tech_.options_.playerId];!a||!a.qualityLevels||this.qualityLevels_||(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){hee(i.qualityLevels_,i)}),this.playlists.on("mediachange",function(){aL(i.qualityLevels_,i.playlists)}))},e.version=function(){return{"@videojs/http-streaming":iL,"mux.js":lee,"mpd-parser":dee,"m3u8-parser":fee,"aes-decrypter":pee}},r.version=function(){return this.constructor.version()},r.canChangeType=function(){return rL.canChangeType()},r.play=function(){this.masterPlaylistController_.play()},r.setCurrentTime=function(i){this.masterPlaylistController_.setCurrentTime(i)},r.duration=function(){return this.masterPlaylistController_.duration()},r.seekable=function(){return this.masterPlaylistController_.seekable()},r.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Te.default.URL.revokeObjectURL&&(Te.default.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),t.prototype.dispose.call(this)},r.convertToProgramTime=function(i,a){return IQ({playlist:this.masterPlaylistController_.media(),time:i,callback:a})},r.seekToProgramTime=function(i,a,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),DQ({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},e}(wee),oh={name:"videojs-http-streaming",VERSION:iL,canHandleSource:function(e,r){r===void 0&&(r={});var n=Oe.mergeOptions(Oe.options,r);return oh.canPlayType(e.type,n)},handleSource:function(e,r,n){n===void 0&&(n={});var i=Oe.mergeOptions(Oe.options,n);return r.vhs=new FS(e,r,i),Oe.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return Oe.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),r.vhs},configurable:!0}),r.vhs.xhr=LR(),r.vhs.src(e.src,e.type),r.vhs},canPlayType:function(e,r){var n=s2.simpleTypeFromSourceType(e);if(!n)return"";var i=oh.getOverrideNative(r),a=Mn.supportsTypeNatively(n),s=!a||i;return s?"maybe":""},getOverrideNative:function(e){e===void 0&&(e={});var r=e,n=r.vhs,i=n===void 0?{}:n,a=r.hls,s=a===void 0?{}:a,o=!(Oe.browser.IS_ANY_SAFARI||Oe.browser.IS_IOS),c=i.overrideNative,l=c===void 0?o:c,f=s.overrideNative,g=f===void 0?!1:f;return g||l}},See=function(){return ci.browserSupportsCodec("avc1.4d400d,mp4a.40.2")};See()&&Oe.getTech("Html5").registerSourceHandler(oh,0);Oe.VhsHandler=FS;Object.defineProperty(Oe,"HlsHandler",{get:function(){return Oe.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),FS},configurable:!0});Oe.VhsSourceHandler=oh;Object.defineProperty(Oe,"HlsSourceHandler",{get:function(){return Oe.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),oh},configurable:!0});Oe.Vhs=Mn;Object.defineProperty(Oe,"Hls",{get:function(){return Oe.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Mn},configurable:!0});Oe.use||(Oe.registerComponent("Hls",Mn),Oe.registerComponent("Vhs",Mn));Oe.options.vhs=Oe.options.vhs||{};Oe.options.hls=Oe.options.hls||{};(!Oe.getPlugin||!Oe.getPlugin("reloadSourceOnError"))&&(a2=Oe.registerPlugin||Oe.plugin,a2("reloadSourceOnError",cee));var a2;oL.exports=Oe});var wL=R((xAe,_L)=>{"use strict";var dL=Er(),Tee=ui(),Cee=Ql(),Eee=uL(),xee=Zl(),Aee="//youtube.com/favicon.ico",kee="//vimeo.com/favicon.ico",fL,pL=!0,gh,mh,Dv=!1,Ov=!1,nl,Hd,il,hL,gL,vh,hs,wi,rl,HS,tl;function cL(t,e){var r=new Image;r.onload=function(){e(!1)},r.onerror=function(){e(!0)},r.src=t}function uu(){if(Ov=!0,gL.fadeOut(750,function(){wi.fadeIn(750)}),wi==il&&(rl.play(),rl.on("ended",MS),rl.on("pause",function(){Yu(!0)}),rl.on("play",function(){Yu(!1)})),wi==nl){var t={autoplay:0,rel:0,showinfo:0};window.pageSpecific.humanLanguage==="es"&&(t.cc_lang_pref="es",t.cc_load_policy=1),window.pageSpecific.accessibilityMode&&(t.cc_load_policy=1),HS=new window.YT.Player("youtube-player",{height:"100%",width:"100%",videoId:fL,playerVars:t,events:{onStateChange:function(e){e.data==window.YT.PlayerState.PLAYING?Yu(!1):e.data==window.YT.PlayerState.ENDED?(Yu(!0),MS()):e.data==window.YT.PlayerState.PAUSED&&Yu(!0)},onReady:function(e){e.target.playVideo()}}})}wi==Hd&&(Yu(!0),tl=new window.Vimeo.Player("vimeo-video"),tl.ready().then(function(){tl.on("ended",function(){MS()}),tl.on("pause",function(){Yu(!0)}),tl.on("play",function(){Yu(!1)})}))}function lL(){Pv(),!(gh===void 0||mh===void 0||Dv===!0)&&(!gh&&!mh||!gh&&mh?(wi=nl,hs.youtube.addClass("selected")):gh&&!mh&&pL?(wi=Hd,hs.vimeo.addClass("selected")):(wi=il,hs.codehs.addClass("selected")))}function Iee(){hL.on("click",function(){uu()})}function MS(){if(document.fullscreenElement&&document.exitFullscreen(),wi.fadeOut(750),HS=null,tl=null,vh.fadeIn(750),window.pageSpecific.isOwnPage){var t={};window.pageSpecific.studentAssignmentID?t={student_assignment_id:window.pageSpecific.studentAssignmentID}:t={item_id:window.pageSpecific.CHS_CURRENT_ITEM_ID,module_id:window.pageSpecific.CHS_CURRENT_MODULE_ID,course_id:window.pageSpecific.CHS_CURRENT_COURSE_ID},Cee(t,self.goToNext)}}function Yu(t){t?($(".navbar").fadeIn(750),$("#editor-bottombar-nav").fadeIn(750),$("body").animate({"background-color":"#FFF"},750),$(".lti-launch-banner").fadeIn(750)):($(".navbar").fadeOut(750),$("#editor-bottombar-nav").fadeOut(750),$("body").animate({"background-color":"#000"},750),$(".lti-launch-banner").fadeOut(750))}function Pv(){hs.codehs.removeClass("selected"),hs.youtube.removeClass("selected"),hs.vimeo.removeClass("selected")}var $S=function(){Pv(),hs.codehs.addClass("selected"),Dv=!0,Ov?(wi.fadeOut(600),wi=il,wi.fadeIn(600),uu()):(wi=il,uu()),vh.hide()},BS=function(){Pv(),hs.youtube.addClass("selected"),Dv=!0,Ov?(wi.fadeOut(600),wi=nl,wi.fadeIn(600),uu()):(wi=nl,uu()),vh.hide()},qS=function(){Pv(),hs.vimeo.addClass("selected"),Dv=!0,Ov?(wi.fadeOut(600),wi=Hd,wi.fadeIn(600),uu()):(wi=Hd,uu()),vh.hide()},mL=function(t){fL=t},vL=function(){pL=!1};function Dee(){window.location.href=$("#done-button").attr("data-next")}var Oee=function(){$("#video-view").toggleClass("video-view-left video-view-full"),$("#video-view-notepad-container").toggle()},jS=function(t){Tee.send({method:"save_user_notes",app:"editor",data:{notes:t,item_id:window.pageSpecific.CHS_CURRENT_ITEM_ID},success:function(e){$("#save-status").text("Saved")},error:function(e){$("#save-status").text("Error! Please try again.")}})};function yL(t,e){var r=$(".slides-link-template").html();$(".navbar-left").append(r),$(".slides-link").on("click",function(){var n=new URLSearchParams(window.location.search),i=t;n.has("lock-override")&&(i+="&lock-override=1"),window.location.href=i}),$(".next-link").on("click",function(){window.location.href=e})}var bL=function(){yL(window.pageSpecific.slidesLink,window.pageSpecific.nextLink);var t=xee.createEditor("#notepad",window.pageSpecific.userNotes);if(hs={codehs:$(".codehsOption"),youtube:$(".youtubeOption"),vimeo:$(".vimeoOption")},hL=$(".play-button"),gL=$("#pre-video-container"),vh=$("#post-video-container"),nl=$("#youtube-video-container"),Hd=$("#vimeo-video-container"),il=$("#codehs-video-container"),rl=Eee("codehsvideo",{controls:!0,playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fill:!0}),HS=$(".youtube-video"),tl=$(".vimeo-video"),wi=il,hs.codehs.addClass("selected"),Iee(),cL(Aee,function(r){gh=r,lL()}),cL(kee,function(r){mh=r,lL()}),$("#done-button").on("click",function(r){r.preventDefault(),$(this).attr("disabled","disabled"),$("#replay-button").attr("disabled","disabled"),$("#replay-button").fadeOut(),$("#done-button").fadeOut(400,function(){$("#loading-div").fadeIn()}),Dee()}),$("#replay-button").on("click",function(r){r.preventDefault(),wi==il?$S():wi==nl?BS():wi==Hd&&qS()}),$(".codehsOption").on("click",function(){$S()}),$(".youtubeOption").on("click",function(){BS()}),$(".vimeoOption").on("click",function(){qS()}),mL(window.pageSpecific.youtubeID),window.pageSpecific.noVimeo&&vL(),$("#notepad-button").on("click",function(){Oee()}),!$("#video-notepad-save").length){var e=$('<button id="video-notepad-save" class="btn btn-main-blue btn-sm" type="button">Save</button>');$("#notepad").after(e),e.on("click",function(){$("#save-status").text("Saving...");var r=$("#notepad").find(".ql-editor").html();jS(r)})}$("#notepad").on("blur",".ql-editor",function(r){var n=r.relatedTarget;if(!(n&&n.id==="video-notepad-save")){$("#save-status").text("Saving...");var i=$(this).html();jS(i)}}),$(window).on("beforeunload",US),$(document).one("turbolinks:before-render",function(){US(),$(window).off("beforeunload",US)})},US=function(){rl&&rl.dispose()};dL.on("editor:newVideoPage:setup",bL);dL.on("editor:newVideoPage:playVideo",uu);_L.exports={setup:bL,setupNavButtons:yL,setPlayerCodeHS:$S,setPlayerYoutube:BS,setPlayerVimeo:qS,setYoutubeID:mL,noVimeoVideo:vL,playVideo:uu,saveNotes:jS}});var xL=R(()=>{"use strict";var Pee=ui(),TL=Er(),CL=Ql();function EL(){$(".googleSlidesOption").removeClass("selected"),$(".pdfOption").removeClass("selected"),$(".googleSlidesOption .chs-icon-check").css("display","none"),$(".pdfOption .chs-icon-check").css("display","none")}function SL(){if(EL(),$(".googleSlidesOption").addClass("selected"),$(".googleSlidesOption .chs-icon-check").css("display","inline-block"),window.pageSpecific.googleSlidesUrl){var t=$("#video-slides"),e=$(".slides"),r=$(".slides-pdf-object");if(r.remove(),e.length)e.attr("src",window.pageSpecific.googleSlidesUrl);else{var n=$("<iframe>").addClass("slides").attr("src",window.pageSpecific.googleSlidesUrl).attr("width","100%").attr("height","100%").attr("frameborder","0").attr("allowfullscreen","true").attr("mozallowfullscreen","true").attr("webkitallowfullscreen","true");t.prepend(n)}}}function Ree(){var t=$(".slides-link"),e=t.html();t.html('<i class="icon-spinner icon-spin spacing-top-sm"></i>'),Pee.send({method:"get_codehs_hosted_slides_pdf_link",app:"library",data:{item_id:window.pageSpecific.itemID},success:function(r){r.status=="ok"?Lee(r.pdfUrl):window.toastr.error("This presentation is not available as a PDF."),t.html(e)},error:function(r){window.toastr.error("This presentation is not available as a PDF."),t.html(e)}})}function Lee(t){EL(),$(".pdfOption").addClass("selected"),$(".pdfOption .chs-icon-check").css("display","inline-block");var e=$("#video-slides"),r=$(".slides"),n=$(".slides-pdf-object");r.remove(),n.remove();var i=$("<object>").addClass("slides-pdf-object").attr("data",t).attr("type","application/pdf").css({width:"100%",height:"100%"}),a=$("<a>").attr("href",t).attr("target","_blank").text("Your browser does not support PDFs. Click here to open the PDF in a new tab.");i.append(a),e.prepend(i)}function Nee(){var t=$(".slides-link-template").html();if($(".navbar-left").append(t),$(".video-link").on("click",function(){var r=new URLSearchParams(window.location.search),n=window.pageSpecific.videoLink;r.has("lock-override")&&(n+="?lock-override=1"),window.location.href=n}),$(".next-link").on("click",function(){window.location.href=window.pageSpecific.nextUrl}),$(".googleSlidesOption .chs-icon-check").css("display","none"),$(".pdfOption .chs-icon-check").css("display","none"),window.pageSpecific.googleSlidesUrl&&(SL(),$(".googleSlidesOption").on("click",function(r){r.preventDefault(),SL()})),$(".pdfOption").on("click",function(r){r.preventDefault(),r.stopPropagation(),Ree(),$(".slides-link.dropdown-toggle").closest(".btn-group").removeClass("open")}),!window.pageSpecific.previewOnly&&window.pageSpecific.isOwnPage){var e={};window.pageSpecific.studentAssignmentID?e={student_assignment_id:window.pageSpecific.studentAssignmentID}:e={item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID},CL(e,function(){})}}TL.on("slides:setup",Nee);TL.on("slides:novideo",function(){if(window.pageSpecific.isOwnPage){var t={};window.pageSpecific.studentAssignmentID?t={student_assignment_id:window.pageSpecific.studentAssignmentID}:t={item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID},CL(t,function(){})}})});var DL=R(()=>{"use strict";var Un=Rr(),GS=Er(),Fee=ui(),Mee=Jl(),al="#next-button",Rv,yh;function AL(t){var e=0;return t.each(function(){var r=parseInt($(this).data("qtype")),n=$(this).data("answered"),i;if(r==Un.SurveyQuestion.FREE_RESPONSE){var a=$(this).find("textarea");n=$(a).val()}else r==Un.SurveyQuestion.ONE_TO_TEN_AND_WHY?(i=$(this).find("textarea"),n=$(i).val()):r==Un.SurveyQuestion.ONE_TO_FIVE_AND_WHY&&(i=$(this).find("textarea"),n=$(i).val());(window._.isNumber(n)||n!==""&&n!=="None")&&e++}),e}function IL(t){var e=$(".question"),r=e.length,n=$(".question:not(.blocking)").length,i=AL(e);if(r===n)return i>0&&!t?($("#survey-questions").addClass("disabled"),$("#survey-questions").css({pointerEvents:"none"}),!0):i>0&&t?($("#survey-questions").addClass("disabled"),$("#survey-questions").css({pointerEvents:"none"}),$("#continue-no-answer-link").css("display","None"),$(al).text("Next"),!0):!1;var a=$(".question.blocking"),s=a.length,o=AL(a);return s===o&&!t?($("#survey-questions").addClass("disabled"),$("#survey-questions").css({pointerEvents:"none"}),!0):s===o&&t?($("#survey-questions").addClass("disabled"),$("#survey-questions").css({pointerEvents:"none"}),$("#continue-no-answer-link").css("display","None"),$(al).text("Next"),!0):!1}function Lv(t,e,r){var n=parseInt(e)-1,i=$("#q-"+t+" .answers tr.selected");i&&i.removeClass(r);var a=$("#q-"+t+" .answers tr")[n];$(a).addClass(r)}function kL(t,e){var r;if(e===Un.SurveyQuestion.MULTIPLE_CHOICE||e==Un.SurveyQuestion.ONE_TO_TEN||e==Un.SurveyQuestion.ONE_TO_TEN_AND_WHY||e==Un.SurveyQuestion.ONE_TO_FIVE_AND_WHY||e==Un.SurveyQuestion.ONE_TO_FIVE_AND_WHY){r=$("input[name=question"+t+"]:checked");var n=r.data("idx");return n+1}else return null}function Uee(t){$(".question").each(function(){var e=$(this).data("questionid"),r=$(this).data("answered"),n=$(this).data("qtype");if(r!="None"){if(n==Un.SurveyQuestion.FREE_RESPONSE)$(this).find("textarea").val(r);else if(n==Un.SurveyQuestion.ONE_TO_TEN_AND_WHY||n==Un.SurveyQuestion.ONE_TO_FIVE_AND_WHY){typeof r!="string"&&(r=JSON.stringify(r)),r=r.replace(/(\r\n|\n|\r)/gm,"1a2drc7d5f"),r=JSON.parse(r);var i=r.score,a=r.why;a=a.replace(/1a2drc7d5f/gm,`
`),$(this).find("textarea").val(a),Lv(e,i,"selected");var s=parseInt(i)-1,o=$("#q-"+e+" .answers .answer")[s];$(o).find("input:radio").prop("checked",!0)}else{Lv(e,r,"selected");var c=parseInt(r)-1,l=$("#q-"+e+" .answers .answer")[c];$(l).find("input:radio").prop("checked",!0)}$(this).find("input, textarea").attr("disabled",!0)}}),IL(!0)}function $ee(){var t=$(".question");t.each(function(){var e=$(this).data("questionid"),r=$(this).data("qtype");if(r==Un.SurveyQuestion.FREE_RESPONSE){var n=$(this).find("textarea"),i=n.val(),a=!$.trim($("#myTextArea").val());n.on("change",function(){!$.trim(n.val())!=a&&$("#q-"+e).data("answered",i)})}else if(r==Un.SurveyQuestion.ONE_TO_TEN_AND_WHY||r==Un.SurveyQuestion.ONE_TO_FIVE_AND_WHY){$(this).find(".answers .answer").on("click",function(){$(this).find("input:radio").prop("checked",!0);var l=parseInt($(this).data("questionid")),f=parseInt($(this).data("qtype")),g=kL(l,f);$("#q-"+l).data("answered",g),Lv(l,g,"selected")});var s=$("#freeresponse-answer-"+e),o=s.val(),c=!$.trim($("#myTextArea").val());s.on("change",function(){!$.trim(s.val())!=c&&(o=s.val(),s.data("why",o))})}else $(this).find(".answers .answer").on("click",function(){$(this).find("input:radio").prop("checked",!0);var l=parseInt($(this).data("questionid")),f=parseInt($(this).data("qtype")),g=kL(l,f);$("#q-"+l).data("answered",g),Lv(l,g,"selected")})})}function Bee(t){t=t||{},yh=t.numQuestions||0,Rv=t.pageUserID||0,Uee(yh),$ee(),$(al).on("click",function(e){GS.trigger("utils:disableButton",al),e.preventDefault();var r=IL(!1);if(r){var n=$(".question"),i={};n.each(function(){var a=parseInt($(this).data("qtype")),s=$(this).data("questionid"),o=$(this).data("answered");if(a==Un.SurveyQuestion.FREE_RESPONSE){var c=$(this).find("textarea"),l=$(c).val();l&&(i[s]={pageUserID:Rv,questionID:s,numQuestions:yh,questionType:a,answer:l})}else if((a==Un.SurveyQuestion.ONE_TO_TEN_AND_WHY||a==Un.SurveyQuestion.ONE_TO_FIVE_AND_WHY)&&o!="None"){var f=JSON.stringify({score:o,why:$(this).find("textarea").val()});i[s]={pageUserID:Rv,questionID:s,numQuestions:yh,questionType:a,answer:f}}else o!="None"&&(i[s]={pageUserID:Rv,questionID:s,numQuestions:yh,questionType:a,answer:o})}),Fee.send({method:"answer_survey_question",app:"editor",data:{questionAnswerData:JSON.stringify(i)},success:function(a){$("#survey-questions").addClass("disabled"),$("#survey-questions textarea").attr("readonly",!0),$("#survey-questions .multiple-choice-answers").css({pointerEvents:"none"}),$("#survey-questions input:checkbox:not(:checked)").attr("disabled","disabled")},contentType:"application/json; charset=utf-8"}),window.location.replace($(al).data("next"))}else Mee({message:"Please answer all of the required questions in order to submit",button:"OK",refocusTarget:al}),GS.trigger("utils:enableButton",al)})}function qee(){var t={numQuestions:window.pageSpecific.numQuestions,pageUserID:window.pageSpecific.pageUserID};Bee(t)}GS.on("editor:survey",qee)});var OL=R(()=>{"use strict";var jee=Yl(),Hee=Er();function Gee(){jee.warning("You can use the custom content tool to release it.","This exercise is not released.")}Hee.on("editor:showItemNotReleasedToast",Gee)});var PL=R((RAe,zee)=>{zee.exports=`<div class="container" style="height:400px; width:700px">
  <style>
    a.place.btn.btn-default{
      border-color: #FFFFFF;
      pointer-events: none;
    }
  </style>
  <h4>Binary (Base-2) Value:</h4>

  <div class="btn-group btn-group-justified" role="group" aria-label="binaryData">
      <a class="place128 bit btn btn-main-dark-blue" data-place="128" id="place128" role="button">0</a>
      <a class="place64 bit btn btn-main-dark-blue" data-place="64" id="place64" role="button">0</a>
      <a class="place32 bit btn btn-main-dark-blue" data-place="32" id="place32" role="button">0</a>
      <a class="place16 bit btn btn-main-dark-blue" data-place="16" id="place16" role="button">0</a>
      <a class="place8 bit btn btn-main-dark-blue" data-place="8" id="place8" role="button">0</a>
      <a class="place4 bit btn btn-main-dark-blue" data-place="4" id="place4" role="button">0</a>
      <a class="place2 bit btn btn-main-dark-blue" data-place="2" id="place2" role="button">0</a>
      <a class="place1 bit btn btn-main-dark-blue" data-place="1" id="place1" role="button">0</a>
  </div>

  <div class="btn-group btn-group-justified" role="group" aria-label="binaryLabels">
      <a class="place btn btn-default">128</a>
      <a class="place btn btn-default">64</a>
      <a class="place btn btn-default">32</a>
      <a class="place btn btn-default">16</a>
      <a class="place btn btn-default">8</a>
      <a class="place btn btn-default">4</a>
      <a class="place btn btn-default">2</a>
      <a class="place btn btn-default">1</a>
  </div>

  <div class="btn-group btn-group-justified" role="group" aria-label="binaryPowers">
      <a class="place btn btn-default">(2<sup>7</sup>)</a>
      <a class="place btn btn-default">(2<sup>6</sup>)</a>
      <a class="place btn btn-default">(2<sup>5</sup>)</a>
      <a class="place btn btn-default">(2<sup>4</sup>)</a>
      <a class="place btn btn-default">(2<sup>3</sup>)</a>
      <a class="place btn btn-default">(2<sup>2</sup>)</a>
      <a class="place btn btn-default">(2<sup>1</sup>)</a>
      <a class="place btn btn-default">(2<sup>0</sup>)</a>
  </div>

  <h4>Decimal (Base-10) Value:</h4>
  <center>
    <h2 id="binaryResult"></h2>
    <h2 id="decimalResult"></h2>
  </center>
</div>
`});var NL=R((LAe,LL)=>{var Vee=".bit",Wee="#decimalResult",Kee="#binaryResult",Xee=PL();function RL(){var t=$(Xee),e=t.find(Vee),r=t.find(Wee),n=t.find(Kee),i=e.get().sort(function(a,s){return parseInt($(a).attr("data-place"))>parseInt($(s).attr("data-place"))?-1:1});return e.on("click",function(){var a=$(this).html();a=="0"?$(this).html("1").addClass("on").addClass("btn-main-blue").removeClass("btn-main-dark-blue"):$(this).html("0").removeClass("on").addClass("btn-main-dark-blue").removeClass("btn-main-blue");var s="",o="",c=0;$.each(i,function(l,f){if(o=o+$(this).html(),$(f).hasClass("on")){var g=$(this).attr("data-place");s=s+" + "+g,c+=parseInt(g)}}),s.length===0?s="0<sub>10</sub> = 0<sub>10</sub>":s=s.substring(3)+"<sub>10</sub> = "+c.toString()+"<sub>10</sub>",o=o+"<sub>2</sub> = "+c.toString()+"<sub>10</sub>",r.html(s),n.html(o)}),t}LL.exports={dialog:function(t){RL().dialog(t)},jqueryElem:RL}});var FL=R(()=>{"use strict";var Yee=Er(),Jee=NL();function Qee(){$(".notes-section").append(Jee.jqueryElem())}Yee.on("notes:number-base-tool",Qee)});var VS=R((MAe,ML)=>{"use strict";var Zee=Ri().removeComments;function zS(t,e){if(e!="js")throw new Error("Can only translate karel to js karel.");if(t!="java"&&t!="python")throw new Error("Can only translate from java and python");this.fromLanguage="java",this.toLanguage="js"}zS.prototype.translateJavaToJavaScript=function(t,e){return e=typeof e<"u"?e:!0,e&&(t=Zee(t)),t=t.replace(/run\s*\(\s*\)/g,"start()"),t=t.replace(/((public|private)\s+)?class\s+\w+(\s+extends\s+\w+)?/,""),t=t.replace(/{/,""),t=t.replace(/}\s*(?:\/\/\s*[^}]*[\t\n\r]*)*$/,""),t=t.replace(/(\n\t|\n {4})/g,`
`),t=t.replace(/int *\[ *\] *(\w+) *= *new *int *\[ *(\w+) *\]/g,"var $1 = Array($2).fill(0)"),t=t.replace(/\bint/g,"var"),t=t.replace(/((public|private)\s+)?void/g,"function"),t};zS.prototype.translate=function(t){if(this.fromLanguage=="java"&&this.toLanguage=="js")return this.translateJavaToJavaScript(t)};ML.exports=zS});var UL=R((UAe,ete)=>{ete.exports=`<div class="modal" id="autograder-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="alert-close close" data-dismiss="modal">&times;</button>
                <h3>CodeHS</h3>
            </div>
            <div class="modal-body" style="max-height:60%;overflow-y:auto;">
                <h4>
                    {{#if aiGradingInProgress }}
                    <div class="full-width flex flex-align-center">
                        <div class="spinner icon-spinner icon-spin icon"></div>
                    </div>
                    <h3 class="center"> Running Autograder </h3>
                    {{else if passed }}
                        {{#if hasTests}}
                            {{#ifCond prefLang '===' 'es'}}
                                <span>\xA1Excelente!</span> {{#unless freeResponse}}Tu programa funciona.{{/unless}}
                            {{else}}
                                <span>Great job!</span> {{#unless freeResponse}}Your program works.{{/unless}}
                            {{/ifCond}}
                        {{else}}
                            <span>Thanks!</span> Your program has been submitted.
                        {{/if}}
                    {{else if blankFreeResponse}}
                        {{#ifCond prefLang '===' 'es'}}
                            <span>Parece que tu respuesta est\xE1 vac\xEDa.</span>
                            <br>
                            \xA1Revisa la pregunta y vuelve a intentarlo!
                        {{else}}
                            <span>It looks like your response is empty.</span>
                            <br>
                            Take another look at the question and give it a try!
                        {{/ifCond}}
                    {{else}}
                        {{#ifCond prefLang '===' 'es'}}
                            <span>Ups.</span> Parece que tienes algunos errores.
                        {{else}}
                            <span>Oops.</span> It looks like you have a few errors.
                        {{/ifCond}}
                            <br>
                        {{#if isUserLoggedIn }}
                            {{#unless isAbacus }}
                                {{#ifCond prefLang '===' 'es'}}
                                    Deber\xEDas seguir trabajando y volver a intentarlo
                                {{else}}
                                    You should keep working and try again.
                                {{/ifCond}}
                            {{/unless}}
                        {{/if}}
                    {{/if}}
                </h4>

                {{#if funcTests}}
                    <h5>
                        {{#ifCond prefLang '===' 'es'}}
                            Funcionalidad
                        {{else}}
                            Functionality
                        {{/ifCond}}
                    </h5>
                    {{#each funcTests}}
                        <div class="world-status">
                            <div class="status left{{#if success}} pass{{else}} fail{{/if}}">
                                <span class="chs-icon chs-icon-{{#if success}}check text-green{{else}}cancel text-red{{/if}}"></span>
                            </div>
                            <h4 class="left name">
                                {{#if isHiddenTest}}
                                    Hidden Test
                                {{else}}
                                    {{#if test}}
                                        {{{test}}}
                                    {{else}}
                                        {{{message}}}
                                    {{/if}}
                                {{/if}}
                            </h4>
                        </div>
                        <div class="clear"></div>
                    {{/each}}
                {{/if}}

                {{#if styleTests}}
                    <h5>
                        {{#ifCond prefLang '===' 'es'}}
                            Estilo
                        {{else}}
                            Style
                        {{/ifCond}}
                    </h5>
                    {{#each styleTests}}
                        <div class="world-status">
                            <div class="status left{{#if success}} pass{{else}} fail{{/if}}">
                                <span class="chs-icon chs-icon-{{#if success}}check text-green{{else}}cancel text-red{{/if}}"></span>
                            </div>
                            <h4 class="left name">
                                {{{message}}}
                            </h4>
                        </div>
                        <div class="clear"></div>
                    {{/each}}
                {{/if}}

                {{#if aiTests}}
                    <h5>AI Tests</h5>
                    {{#each aiTests}}
                        <div class="world-status">
                            <div class="status left{{#if success}} pass{{else}} fail{{/if}}">
                                <span class="chs-icon chs-icon-{{#if success}}check text-green{{else}}cancel text-red{{/if}}"></span>
                            </div>
                            <h4 class="left name">
                                {{#if test}}
                                    {{{test}}}
                                {{else}}
                                    {{{message}}}
                                {{/if}}
                            </h4>
                        </div>
                        <div class="clear"></div>
                    {{/each}}
                {{/if}}

                {{#if passed}}
                {{#if optionalTests}}
                    <h5>Heads up! Some optional tests didn't pass:</h5>
                    {{#each optionalTests}}
                        {{#unless success}}
                            <div class="world-status">
                                {{#ifCond verbosityLevel '===' 10}}
                                    <div class="status left flex flex-align-center" style="border-color: #fbaf3f;">
                                        <span class="chs-icon fa-solid fa-exclamation text-orange"></span>
                                    </div>
                                {{/ifCond}}
                                {{#ifCond verbosityLevel '===' 20}}
                                    <div class="status left flex flex-align-center" style="border-color: #27a9e1;">
                                        <span class="chs-icon fa-solid fa-info text-blue"></span>
                                    </div>
                                {{/ifCond}}
                                <h4 class="left name">
                                    {{#if isHiddenTest}}
                                        Hidden Test
                                    {{else}}
                                        {{#if test}}
                                            {{{test}}}
                                        {{else}}
                                            {{{message}}}
                                        {{/if}}
                                    {{/if}}
                                </h4>
                            </div>
                            <div class="clear"></div>
                        {{/unless}}
                    {{/each}}
                {{/if}}
                {{/if}}

                {{#if isHourOfCode}}
                {{#if passed}}
                <div id="autograder-signup">
                    <btn id="hoc-signup-autograder-btn" class="btn btn-main-green js-hoc-signup-modal alert-close">Sign Up to save your progress</btn>
                </div>
                {{/if}}
                {{/if}}
            </div>
            <div class="modal-footer">
                {{#if ownPage}}
                    {{#if passed}}
                        <a href="#" class="uppercase alert-close">
                            {{#ifCond prefLang '===' 'es'}}
                                Cerrar
                            {{else}}
                                Close
                            {{/ifCond}}
                        </a>
                        {{#if isPractice}}
                        <a href="{{practiceUrl}}" class="btn btn-main-dark-blue">Back to Practice</a>
                        {{/if}}
                        <a id="submit-correct" href="#" class="btn btn-main alert-close">
                            {{#ifCond prefLang '===' 'es'}}
                                Enviar + Continuar
                            {{else}}
                                Submit + Continue
                            {{/ifCond}}
                        </a>
                    {{else}}
                        {{#unless isPracticeLoggedOut}}
                        <a id="continue-anyways-btn" href="{{nextUrl}}">
                            {{#ifCond prefLang '===' 'es'}}
                                Continuar de todos modos
                            {{else}}
                                Continue Anyway
                            {{/ifCond}}
                        </a>
                        {{/unless}}
                        {{#if isPractice}}
                        <a href="{{practiceUrl}}" class="btn btn-main-dark-blue">Back to Practice</a>
                        {{/if}}
                        <a href="#" class="btn btn-main-transparent alert-close">
                            {{#ifCond prefLang '===' 'es'}}
                                Cerrar
                            {{else}}
                                Close
                            {{/ifCond}}
                        </a>
                    {{/if}}
                {{else}}
                    <a href="#" class="btn btn-main-transparent alert-close">
                        {{#ifCond prefLang '===' 'es'}}
                            Cerrar
                        {{else}}
                            Close
                        {{/ifCond}}
                    </a>
                {{/if}}
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
`});var YS=R(($Ae,zL)=>{"use strict";var Zn=tm(),Nv=ui(),bh=Rr(),Qa=Er(),WS=VV(),tte=Ri().removeComments,BL=VS(),rte="#submit-button",ite=UL(),cu={};function qL(t){function e(m){return m==" "||m==`
`||m=="	"}for(var r="",n="",i="",a=0,s=!1,o=!1,c=!1,l={},f=0;f<t.length;f++){var g=t[f];if(e(g)||g=="{"||g=="}"?(r="",g=="{"?a++:g=="}"&&a--):r+=g,o&&g=="}"&&a===0&&(l[n]=i,o=!1,r="",i="",n=""),o&&(i+=g),s&&g=="{")for(s=!1,o=!0;e(t[f+1]);)f++;s&&!e(g)&&!c&&g!="("&&g!=")"&&(n+=g),s&&g=="("?c=!0:s&&g==")"&&(c=!1),!o&&r=="function"&&e(t[f+1])&&(s=!0)}return l}function KS(t){var e={};return e.original=t,e.withoutComments=tte(e.original),e.functions=qL(e.withoutComments),e}var $L=["#ff99c6","#de5844","#8e3329","#fbaf3f","#ffdd17","#8cc63e","#00a79d","#2e3092","#9e1e62"];function nte(t){t.style.animation="particleBurst 1s ease-out forwards",setTimeout(function(){t.remove()},1e3)}function jL(t){if(t.length!==0){t[0].style.position="relative";for(var e=Math.random()*100+100,r=t[0].offsetWidth,n=t[0].offsetHeight,i=Math.max(r,n)/2,a=[],s=0;s<e;s++){var o=document.createElement("div");o.style.position="absolute",o.style.width=Math.random()*10+5+"px",o.style.height=Math.random()*10+5+"px",o.style.backgroundColor=$L[Math.floor(Math.random()*$L.length)],o.style.borderRadius="50%",o.style.left="50%",o.style.top="50%",o.style.transform="translate(-50%, -50%) scale(0)";var c=Math.random()*Math.PI*2,l=i+Math.random()*i,f=Math.cos(c)*l,g=Math.sin(c)*l;o.style.setProperty("--end-x",f+"px"),o.style.setProperty("--end-y",g+"px"),t.append(o),a.push(o)}setTimeout(function(){a.forEach(function(m){nte(m)})},250)}}function HL(t,e,r,n,i){if(n=n||{},n=Zn.defaults(n,{displayPopup:!0,editor:r}),cu={},i=i||[],cu.Additional=i,r.typeTester.isJavaKarel()){var a=!1;t=new BL("java","js").translateJavaToJavaScript(t,a)}e.grading=e.grading||{},e.prog_type=r.progTypeString,e.sqlSetup=r.sqlSetup;var s=KS(t),o=Zn.map(WS,function(c){if(c.shouldRun(n))try{return c.run(s,r)}catch(l){return l}});$.when.apply($,o).then(function(){var c=Zn.values(cu).concat(i),l=[].concat.apply([],c),f=l.length,g=l.filter(function(I){return I.success}).length;try{document.getElementById("score-text").innerHTML=g+"/"+f;var m=f>0?g/f*100:0,y=f>0?100-m:100;document.getElementById("green-bar").style.width=m+"%",document.getElementById("grey-bar").style.width=y+"%",m==100?document.getElementById("green-bar").style.borderRadius="10px":y==100?document.getElementById("grey-bar").style.borderRadius="10px":(document.getElementById("green-bar").style.borderRadius="10px 0 0 10px",document.getElementById("grey-bar").style.borderRadius="0 10px 10px 0")}catch{}var x=l.length===0&&Zn.some(o);window.pageSpecific.showJuice&&(g!==f||x?($("#grading-unit-test-run").addClass("shake btn-main-red"),setTimeout(function(){$("#grading-unit-test-run").removeClass("shake")},1e3)):($("#grading-unit-test-run").removeClass("btn-main-red"),setTimeout(function(){jL($("#autograder-modal .modal-dialog"))},250))),r.studentAssignmentID&&Nv.send({method:"track_autograder_results",app:"events",data:{student_assignment_id:r.studentAssignmentID,numTests:f,numPassed:g,allTests:JSON.stringify(l),hasError:x}}),n.displayPopup?Qa.trigger("autograder:testingComplete",{tests:cu,isOwnPage:r.isOwnPage(),isHourOfCode:r.isHourOfCode(),hasError:x}):Qa.trigger("gradingtab:unitTestsComplete",{tests:l,hasError:x,runsCompleted:o})})}function ate(t,e,r,n,i){if(n=n||{},n=Zn.defaults(n,{displayPopup:!0,editor:r}),cu={},i=i||[],n.displayPopup&&r.lastAutograderRun&&r.lastAutograderRun.code===t){Qa.trigger("autograder:testingComplete",{tests:r.lastAutograderRun.tests,isOwnPage:r.lastAutograderRun.isOwnPage,isHourOfCode:r.lastAutograderRun.isHourOfCode,hasError:r.lastAutograderRun.hasError}),Qa.trigger("gradingtab:unitTestsComplete",{tests:Zn.flatten(r.lastAutograderRun.tests)});return}if(r.typeTester.isJavaKarel()){var a=!1;t=new BL("java","js").translateJavaToJavaScript(t,a)}e.grading=e.grading||{},e.prog_type=r.progTypeString,e.sqlSetup=r.sqlSetup;var s=KS(t),o=window.pageSpecific.newAutograderSystem.tests.map(function(l){return function(){l.type===bh.EditorTestFormat.JSON_FILE_TREE?r.autograderCode=l.data:l.type===bh.EditorTestFormat.LEGACY_JSON_CONFIG&&(r.autograderConfig={},r.autograderConfig[l.title]=l.data,r.skipTestingKarelWorlds=l.title!=="karelWorlds"),r.visibleToStudents=l.visibleToStudents,r.verbosityLevel=l.verbosityLevel;var f=WS.map(function(g){if(g.shouldRun(n))try{var m=g.run(s,r);return m.then(function(){Qa.trigger("gradingtab:unitTestsProgress",{tests:Zn.flatten(Zn.values(cu))})}),m}catch(y){return y}});return Promise.all(f)}}),c=o.reduce(function(l,f){return l.then(f)},Promise.resolve());c.then(function(){var l=Zn.values(cu),f=l.length===0&&Zn.some(o),g=l.flat(),m=g.length,y=g.filter(function(A){return A.success}).length;try{document.getElementById("score-text").innerHTML=y+"/"+m;var x=y/m*100,I=100-x;document.getElementById("green-bar").style.width=x+"%",document.getElementById("grey-bar").style.width=I+"%",x==100?document.getElementById("green-bar").style.borderRadius="10px":I==100?document.getElementById("grey-bar").style.borderRadius="10px":(document.getElementById("green-bar").style.borderRadius="10px 0 0 10px",document.getElementById("grey-bar").style.borderRadius="0 10px 10px 0")}catch{}window.pageSpecific.showJuice&&(y!==m||f?($("#grading-unit-test-run").addClass("shake btn-main-red"),setTimeout(function(){$("#grading-unit-test-run").removeClass("shake")},1e3)):($("#grading-unit-test-run").removeClass("btn-main-red"),setTimeout(function(){jL($("#autograder-modal .modal-dialog"))},250))),r.studentAssignmentID&&Nv.send({method:"track_autograder_results",app:"events",data:{student_assignment_id:r.studentAssignmentID,numTests:m,numPassed:y,allTests:JSON.stringify(g),hasError:f}}),r.lastAutograderRun={tests:l.concat(i),isOwnPage:r.isOwnPage(),isHourOfCode:!1,hasError:f,code:t},n.displayPopup&&Qa.trigger("autograder:testingComplete",{tests:l.concat(i),isOwnPage:r.isOwnPage(),isHourOfCode:!1,hasError:f}),Qa.trigger("gradingtab:unitTestsComplete",{tests:Zn.flatten(l).concat(i)})})}Handlebars.registerHelper("ifCond",function(t,e,r,n){switch(e){case"==":return t==r?n.fn(this):n.inverse(this);case"===":return t===r?n.fn(this):n.inverse(this);case"!=":return t!=r?n.fn(this):n.inverse(this);case"!==":return t!==r?n.fn(this):n.inverse(this);case"<":return t<r?n.fn(this):n.inverse(this);case"<=":return t<=r?n.fn(this):n.inverse(this);case">":return t>r?n.fn(this):n.inverse(this);case">=":return t>=r?n.fn(this):n.inverse(this);case"&&":return t&&r?n.fn(this):n.inverse(this);case"||":return t||r?n.fn(this):n.inverse(this);default:return n.inverse(this)}});function GL(t,e){e=e||cu,Zn.has(t,"messagePass")&&(t.success?t.message=t.messagePass:t.message=t.messageFail,delete t.messagePass,delete t.messageFail);var r=t.category||"Functionality";e[r]?e[r].push(t):e[r]=[t]}var ste=function(t){return Zn.every(t,function(e){return e.success||e.verbosityLevel&&e.verbosityLevel>bh.EditorTestVerbosity.ERROR})},ote=function(t){return t.length},ute=function(t){return Zn.flatten(Zn.values(t))},cte=function(t){return t.filter(function(e){return e.aiTestCase})},lte=function(t){return t.filter(function(e){return!e.success&&[bh.EditorTestVerbosity.WARNING,bh.EditorTestVerbosity.INFO].includes(e.verbosityLevel)})};function XS(t){var e=window.Handlebars.compile(ite),r=t.tests,n=t.hasError||!1,i=ute(r),a=cte(i),s=lte(i),o=ote(i),c=ste(i)&&!n,l={funcTests:r.Functionality,styleTests:r.Style,aiTests:a,optionalTests:s,passed:c,hasTests:o,isUserLoggedIn:window.userData.isAuthenticated,ownPage:t.isOwnPage,isHourOfCode:t.isHourOfCode,isPractice:window.IS_PRACTICE,isPracticeLoggedOut:window.PRACTICE_LOGGED_OUT_EDITOR,isAbacus:window.pageSpecific.isAbacus||!1,prefLang:window.pageSpecific.preferredLang,freeResponse:window.pageSpecific.useFreeResponseAutograder||!1,blankFreeResponse:t.blankFreeResponse||!1,aiGradingInProgress:t.aiGradingInProgress||!1,nextUrl:$("#next-url").data("url")+"#",practiceUrl:$("#practice-url").data("url")+"#"};$("#autograder-modal").modal("hide"),$("#autograder-modal").remove();var f=e(l);$("body").append(f),$("#autograder-modal").modal({backdrop:"static"}),$(".alert-close").on("click",function(){Qa.trigger("utils:enableButton",rte),$("#autograder-modal").modal("hide"),$("#autograder-modal").remove()})}Qa.on("autograder:testingComplete",function(t){XS(t)});Qa.on("autograder:addTests",function(t){Zn.each(t.tests,function(e){GL(e,cu)})});Qa.on("autograder:run",function(t,e,r,n){var i=[];function a(){Qa.trigger("editor:sr:statusUpdate","Code saved succesfully, running tests now"),window.pageSpecific.newAutograderSystem?ate(t,e,r,n,i):HL(t,e,r,n,i),Nv.send({method:"track_autograder_run",app:"events",data:{item_id:r.itemID,user_id:r.codeUserID,code:t,student_assignment_id:r.studentAssignmentID,from_submit_button:n.displayPopup}})}n.aiTestCases!==void 0?(n.aiCacheOnly||XS({aiGradingInProgress:!0,tests:{}}),Nv.send({app:"ai",method:"ai_autograde",data:{item_id:r.itemID,student_id:r.codeUserID,student_assignment_id:r.studentAssignmentID,test_cases:n.aiTestCases,cache_only:n.aiCacheOnly},success:function(s){s.status==="ok"?(Qa.trigger("editor:sr:statusUpdate","Code Check has been Completed"),i=s.result.map(function(o){return{success:o.pass,message:o.reason||o.criteria,category:o.criteria,showDropdown:!1,showDiff:!1,solutionOutput:null,studentOutput:null,isHiddenTest:!1,aiTestCase:!0}}),a()):n.aiCacheOnly?a():window.toastr.error(s.message)},error:function(s){window.toastr.error("Something went wrong with the AI, please try again.")}})):a()});zL.exports={Components:WS,run:HL,addTest:GL,getCodeObject:KS,getFunctionContents:qL,displayModal:XS}});var WL=R((BAe,VL)=>{VL.exports=function(e){var r=String.prototype.split,n=/()??/.exec("")[1]===e,i;return i=function(a,g,o){if(Object.prototype.toString.call(g)!=="[object RegExp]")return r.call(a,g,o);var c=[],l=(g.ignoreCase?"i":"")+(g.multiline?"m":"")+(g.extended?"x":"")+(g.sticky?"y":""),f=0,g=new RegExp(g.source,l+"g"),m,y,x,I;for(a+="",n||(m=new RegExp("^"+g.source+"$(?!\\s)",l)),o=o===e?-1>>>0:o>>>0;(y=g.exec(a))&&(x=y.index+y[0].length,!(x>f&&(c.push(a.slice(f,y.index)),!n&&y.length>1&&y[0].replace(m,function(){for(var A=1;A<arguments.length-2;A++)arguments[A]===e&&(y[A]=e)}),y.length>1&&y.index<a.length&&Array.prototype.push.apply(c,y.slice(1)),I=y[0].length,f=x,c.length>=o)));)g.lastIndex===y.index&&g.lastIndex++;return f===a.length?(I||!g.test(""))&&c.push(""):c.push(a.slice(f)),c.length>o?c.slice(0,o):c},i}()});var Fv=R((qAe,KL)=>{var dte=[].indexOf;KL.exports=function(t,e){if(dte)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}});var YL=R((jAe,XL)=>{var JS=Fv();XL.exports=fte;function fte(t){var e=t.classList;if(e)return e;var r={add:n,remove:i,contains:a,toggle:s,toString:o,length:0,item:c};return r;function n(g){var m=l();JS(m,g)>-1||(m.push(g),f(m))}function i(g){var m=l(),y=JS(m,g);y!==-1&&(m.splice(y,1),f(m))}function a(g){return JS(l(),g)>-1}function s(g){return a(g)?(i(g),!1):(n(g),!0)}function o(){return t.className}function c(g){var m=l();return m[g]||null}function l(){var g=t.className;return pte(g.split(" "),hte)}function f(g){var m=g.length;t.className=g.join(" "),r.length=m;for(var y=0;y<g.length;y++)r[y]=g[y];delete g[m]}}function pte(t,e){for(var r=[],n=0;n<t.length;n++)e(t[n])&&r.push(t[n]);return r}function hte(t){return!!t}});var JL=R(()=>{});var rN=R((zAe,tN)=>{var gte=WL(),mte=YL(),ZL=typeof window>"u"?JL():window,_h=ZL.document,vte=ZL.Text;function eN(){var t=[];function e(){var r=[].slice.call(arguments),n=null;function i(a){var s;function o(g){var m=gte(g,/([\.#]?[^\s#.]+)/);/^\.|#/.test(m[1])&&(n=_h.createElement("div")),QL(m,function(y){var x=y.substring(1,y.length);y&&(n?y[0]==="."?mte(n).add(x):y[0]==="#"&&n.setAttribute("id",x):n=_h.createElement(y))})}if(a!=null){if(typeof a=="string")n?n.appendChild(s=_h.createTextNode(a)):o(a);else if(typeof a=="number"||typeof a=="boolean"||a instanceof Date||a instanceof RegExp)n.appendChild(s=_h.createTextNode(a.toString()));else if(bte(a))QL(a,i);else if(QS(a))n.appendChild(s=a);else if(a instanceof vte)n.appendChild(s=a);else if(typeof a=="object")for(var c in a)if(typeof a[c]=="function")/^on\w+/.test(c)?function(g,m){n.addEventListener?(n.addEventListener(g.substring(2),m[g],!1),t.push(function(){n.removeEventListener(g.substring(2),m[g],!1)})):(n.attachEvent(g,m[g]),t.push(function(){n.detachEvent(g,m[g])}))}(c,a):(n[c]=a[c](),t.push(a[c](function(g){n[c]=g})));else if(c==="style")if(typeof a[c]=="string")n.style.cssText=a[c];else for(var l in a[c])(function(g,m){if(typeof m=="function")n.style.setProperty(g,m()),t.push(m(function(x){n.style.setProperty(g,x)}));else var y=a[c][g].match(/(.*)\W+!important\W*$/);y?n.style.setProperty(g,y[1],"important"):n.style.setProperty(g,a[c][g])})(l,a[c][l]);else if(c==="attrs")for(var f in a[c])n.setAttribute(f,a[c][f]);else c.substr(0,5)==="data-"?n.setAttribute(c,a[c]):n[c]=a[c];else if(typeof a=="function"){var f=a();n.appendChild(s=QS(f)?f:_h.createTextNode(f)),t.push(a(function(m){QS(m)&&s.parentElement?(s.parentElement.replaceChild(m,s),s=m):s.textContent=m}))}}return s}for(;r.length;)i(r.shift());return n}return e.cleanup=function(){for(var r=0;r<t.length;r++)t[r]();t.length=0},e}var yte=tN.exports=eN();yte.context=eN;function QS(t){return t&&t.nodeName&&t.nodeType}function QL(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r++)e(t[r],r)}function bte(t){return Object.prototype.toString.call(t)=="[object Array]"}});var oN=R((Mv,sN)=>{"use strict";Object.defineProperty(Mv,"__esModule",{value:!0});var _te=function(e){return typeof e=="string"&&e.length>0},iN=function(e,r){return e[0]===r},aN=function(e){return _te(e)&&(iN(e,".")||iN(e,"#"))},wte=function(e){return function(r){return function(n){for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return aN(n)?e.apply(void 0,[r+n].concat(a)):typeof n>"u"?e(r):e.apply(void 0,[r,n].concat(a))}}},nN=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];Mv.default=function(t){var e=wte(t),r={TAG_NAMES:nN,isSelector:aN,createTag:e};return nN.forEach(function(n){r[n]=e(n)}),r};sN.exports=Mv.default});var pN=R((VAe,fN)=>{"use strict";var Ste=rp(),Tte=ui(),Cte=im(),uN=Rr(),Ete=Zl(),cN=".start-ex-button",lN="#directions-modal",dN=".program-demo-canvas",xte=".demo-run-button",Ate=".demo-stop-button",ZS=".dark-screen",kte=".modal-canvas";function ho(t){t.noInstructions&&$(ZS).hide(),this.info={itemType:t.itemType,itemID:t.itemID,isGraphics:t.isGraphics,isBlockly:t.isBlockly},this.setup(),this.demo_graphics,this.demo_solution}ho.prototype.needsPopup=function(){return this.info.itemType==uN.ItemType.EXERCISE||this.info.itemType==uN.ItemType.CHALLENGE};ho.prototype.usingGraphics=function(){return this.info.isGraphics&&this.needsPopup()&&$(dN).length};ho.prototype.setupLetsGoButton=function(){var t=this;$(cN).on("click",function(){$(lN).addClass("fly-out").on("animationend",function(){$(this).removeClass("fly-out").hide(),t.usingGraphics()&&t.demo_graphics.fullReset()}),$(ZS).fadeOut()})};ho.prototype.setupDemoRunButton=function(){var t=this;$(xte).on("click",function(){t.usingGraphics()&&t.demo_graphics.fullReset();var e=t.demo_solution;e=e.replace(/&gt;/g,">"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&amp;/g,"&"),e=e.replace(/&nbsp;/g,""),t.usingGraphics()&&t.demo_graphics.runCode(e)})};ho.prototype.setupDemoStopButton=function(){var t=this;$(Ate).on("click",function(){t.usingGraphics()&&t.demo_graphics.fullReset()})};ho.prototype.setupReShowPopup=function(){var t=this;$("#show-editor-instructions").on("click",function(){t.showInstructions()})};ho.prototype.showInstructions=function(){$(ZS).show(),$(lN).show().addClass("fly-in").on("animationend",function(){$(this).removeClass("fly-in").show()})};ho.prototype.modalHidden=function(){return $("#directions-modal").css("display")=="none"};ho.prototype.setup=function(){var t=this;if($(cN).exists()){Tte.send({type:"GET",method:"get_solution_code",app:"editor",data:{itemID:t.info.itemID,gulpUrl:CHS.GULP_URL},success:function(n){if(n.status==="ok"){var i=JSON.parse(n.solutionCodeJson.split("").map(function(a,s){var o=CHS.GULP_URL[s%CHS.GULP_URL.length],c=String.fromCharCode((a.charCodeAt(0)-o.charCodeAt(0))%256);return c}).join(""));t.demo_solution=i}else t.demo_solution=""}}),t.info.isBlockly&&$("div.result-end.result-single").css("display","none"),this.setupLetsGoButton(),this.setupDemoRunButton(),this.setupDemoStopButton(),this.setupReShowPopup(),$(kte).each(function(){Ste.quickDraw($(this),$(this).attr("data-world"),$(this).attr("data-width"),!0)}),this.usingGraphics()&&(this.demo_graphics=new Cte.CodeHSGraphics({canvas:$(dN)}));var e=window.pageSpecific.itemDescription,r=window.pageSpecific.isQuill;Ete.chooseEditor([{qlTarget:"#quill-description",mdTarget:"#markdown-description",content:e}],r),$(".directions a").attr("target","_blank")}};fN.exports=ho});var aT=R((WAe,TN)=>{"use strict";var li=ui(),Ite=Rr(),Uv=Yl(),lu=Er(),Dte=Pi().updateQueryString,Ote=Pi().alert,Pte="button.create-share-link",Rte=".new-domain",Ju="#share-program",hN="#share-tab-active-switch",Qu="#share-modal-active-switch",bN="#editable-switch",tT="#share-tab-show-code-switch",Zu="#share-modal-show-code-switch",_N="#show-file-tree-switch",rT="#share-tab-display-ide-switch",iT="#share-tab-forkable-switch",gN="#share-modal-display-ide-switch",mN="#share-modal-forkable-switch",Lte="#share-modal-ide-dropdown",Nte="#share-modal-display-mode-dropdown",nT="#share-modal-share-link",$v="#share-modal-edit-description",wN="#share-link",Fte=5e3,Rs="#share-modal",wh="#share-options",vN="#embed-options",Sh="#assign-options",eT="#collab-options",Mte=".submit-to-contest-container",Gd="#share-tab-submit-to-contest-button",Ute="#share-tab-contest-id-input",Ls="";function sl(){Ls=window.pageSpecific.shareBaseURL,this.setup()}sl.prototype.createShareDiv=function(t,e,r,n,i,a){var s=$(wN);s.text(i),s.attr("href",i),$(tT).attr("checked",e),$(_N).attr("checked",!0),$(bN).attr("checked",!0),$(rT).attr("checked",r),$(iT).attr("checked",n),$(Gd).data("share-id",t);var o="https://twitter.com/intent/tweet?text=Checkout%20this%20cool%20program%20I%20made%20on%20CodeHS%21&url=https%3A%2F%2Fcodehs.com%2Fshare%2F"+t+"&hashtags=ReadWriteCode&via=codehs",c="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fcodehs.com%2Fshare%2F"+t;$("#fb-share-link").attr("href",c),$("#twitter-share-link").attr("href",o),$("#share-tab-active-switch").prop("checked",a),$("#share-info-container").show(),$("#create-share-link-btn").hide()};sl.prototype.domainDiv=function(t,e){$(".create-domain").hasClass("gone")?$("#medomain-link").slideToggle("fast",function(){$(this).attr("href",e).text(t).slideToggle("fast")}):($("#medomain-link").attr("href",e).text(t),$(".create-domain").addClass("gone"),$(".show-domain").removeClass("gone"))};sl.prototype.setupDownloadAppFiles=function(){$("#download-app-files-button").on("click",function(){var t=window.pageSpecific.userProgramID,e=window.location.origin+"/editor/download_app_files/"+t;window.location=e})};function SN(t,e){$.ajax({url:"/core/ajax/upload_image",type:"POST",data:t,processData:!1,dataType:"JSON",contentType:!1}).then(function(r){var n=Ite.Uploads.UPLOADS_PROXY_BASE_URL+r.url;e&&e(n)})}function $te(t,e){for(var r=atob(t.split(",")[1]),n=[],i=0;i<r.length;i++)n.push(r.charCodeAt(i));var a=new Blob([new Uint8Array(n)],{type:e});return a}sl.prototype.uploadFile=function(){$("#file-name").html($(".img-upload")[0].files[0].name);var t=new FormData($("#upload-icon-form")[0]);SN(t,function(e){$("#icon-thumbnail").attr("src",e),$(".thumbnail-icon-container").removeClass("hidden"),$(".upload-icon-container").hide()})};function yN(){var t=$(".__abacus_runButton");t&&t.trigger("click"),setTimeout(function(){try{var e=document.querySelector("iframe#browser-runner").contentWindow;e.postMessage({type:"screenshot_data",data:{}},"*")}catch{return}},Fte)}sl.prototype.setup=function(){var t=this;$(Pte).on("click",function(){li.send({method:"get_or_create_share_info",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID},success:function(A){A.status=="ok"&&(Ls=A.shareURL,t.createShareDiv(A.shareIdentifier,A.canShowCode,A.displayIDE,A.forkable,A.shareURL,A.isActive),window.pageSpecific.isAbacus&&window.pageSpecific.shouldScreenshotOnShare&&!A.shareImageURL&&yN())}})}),$(Rs).find("#share-modal-create-share-link-btn").on("click",function(){var A=$(this);A.attr("disabled",!0),A.html("<i class='icon-spinner icon-spin'></i>"),li.send({method:"get_or_create_share_info",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID},success:function(F){F.status=="ok"?($("#share-modal-contents").removeClass("gone"),$("#share-modal-create-share-link-btn").addClass("gone"),document.querySelector(nT).value=F.shareURL,Ls=F.shareURL,t.createShareDiv(F.shareIdentifier,F.canShowCode,F.displayIDE,F.forkable,F.shareURL,F.isActive),window.pageSpecific.isAbacus&&window.pageSpecific.shouldScreenshotOnShare&&!F.shareImageURL&&yN()):(Uv.error("There was an error sharing your program. Try refreshing the page, and contact support@codehs.com if you continue to experience errors."),A.attr("disabled",!1),A.html("Create share link"))},error:function(F){Uv.error("There was an error sharing your program. Try refreshing the page, and contact support@codehs.com if you continue to experience errors."),A.attr("disabled",!1),A.html("Create share link")}})}),$(Rs).find("#share-public-copy").on("click",function(A){document.querySelector("#share-modal-public-link").select(),document.execCommand("copy"),window.toastr.success("Copied the URL")}),$(Rs).find("#share-code-copy").on("click",function(A){document.querySelector("#share-modal-copy-link").select(),document.execCommand("copy"),window.toastr.success("Copied the URL")}),$(Rs).find("#copy-collab-link-btn").on("click",function(A){document.querySelector("#share-modal-collab-link").select(),document.execCommand("copy"),window.toastr.success("Copied the URL")}),$($v).on("keyup",function(){var A=$($v).val();$("#preview-description-text").empty().attr("data-markdown",A),lu.trigger("CHS.Utils.markdown:setup")}),$($v).on("blur",f),g();var e="#embed-opt-display-type",r="#embed-opt-width",n="#embed-opt-height",i="#embed-opt-read-only",a="#embed-opt-show-tree";function s(){$(e).on("change",o),$(r).on("input",function(A){A.target.value=A.target.value.replace(/\D/g,""),o()}),$(n).on("input",function(A){A.target.value=A.target.value.replace(/\D/g,""),o()}),$(i).on("change",o),$(a).on("change",o)}function o(){var A=$(e).val(),F="850",X="500";$(r).val()&&(F=$(r).val()),$(n).val()&&(X=$(n).val());var de=$(i).prop("checked"),N=$(a).prop("checked"),H='width="'+F+'" height="'+X+'"',z="/?display_mode="+A;de&&(z+="&read_only=True"),N||(z+="&show_file_tree=False");var Y="<iframe "+H+' src="'+Ls+"/embed"+z+'" frameborder="0" allowfullscreen class="video-iframe"></iframe>';$(nT).val(Y)}function c(){if(window.pageSpecific.collaborateBlockedByDroplet){Ote({header:"Unable to collaborate",rawHtml:`<p>It looks like you're trying to collaborate on a Block coding program.
To collaborate, you need to switch this program to use text, not blocks.</p>
<a target="_blank" href="/toggling-block-coding">Learn more about blocks settings</a>`,cancelButton:!0,cancel_callback:function(){li.send({method:"toggle_shared_program_blocks_off",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID},success:function(F){F.status==="ok"?window.location.reload():window.toastr.error(F.msg)}})},cancelButtonText:"Switch to Text and Refresh",cancelButtonClass:"btn-main-blue",buttonClass:"btn-main-green",button:"Close"});return}(!window.Ed.firepad||!window.Ed.firepad.initialized)&&window.Ed.setupFirepad(),$(Qu).prop("checked",!0),$(Zu).prop("checked",!0),li.send({method:"set_share_active",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,activeStatus:!0}}),li.send({method:"set_share_code",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,showCodeStatus:!0}}),li.send({method:"set_share_ide",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,IDE:"original"}});var A="?collaborate="+window.Ed.firepad.firepadRef.key;$("#share-modal-collab-link").val(Ls+A),Dte({collaborate:window.Ed.firepad.firepadRef.key})}s(),I(Qu),I(Zu),window.pageSpecific.unauthenticated&&($(".sharing-option-checkbox").prop("disabled",!0),$("#share-modal-share-link").prop("disabled",!1),$("#share-modal-collab-link").addClass("hidden"),$("#copy-collab-link-btn").addClass("hidden"));function l(A){var F=A.value;F&&(A.classList.add("active"),$(A).siblings().each(function(X,de){de.classList.remove("active")}),$("#share-modal-contents").removeClass("hidden"),$("#logged-out-edit-warning").removeClass("hidden"),$("#logged-out-banner-message").text("change the share settings for this program."),$(wh).hasClass("hidden")&&($(wh).removeClass("hidden"),$(vN).addClass("hidden"),$(Sh).addClass("hidden"),$(eT).addClass("hidden")),F==="Code"?($(Sh).addClass("hidden"),I(Qu),I(Zu)):F==="Embed"?($(vN).removeClass("hidden"),$(wh).addClass("hidden"),$(Sh).addClass("hidden"),o()):F==="Collaborate"?($(eT).removeClass("hidden"),$(wh).addClass("hidden"),$(Sh).addClass("hidden"),$("#logged-out-edit-warning").addClass("hidden"),$("#logged-out-banner-message").text("use the collaborate feature."),!window.pageSpecific.unauthenticated&&!window.myAbacus&&(window.pageSpecific.collaborateBlockedByDroplet&&($("#share-tab-button").addClass("active"),$("#collab-tab-button").removeClass("active"),$(eT).addClass("hidden"),$(wh).removeClass("hidden")),c())):($(Sh).removeClass("hidden"),$("#share-modal-contents").addClass("hidden")))}$("#share-type-switch").on("click",function(A){var F=A.target;l(F)});function f(){var A=$($v).val();li.send({method:"save_item",app:"library",data:{itemId:window.pageSpecific.itemID,description:A},success:function(F){if(F.status=="ok"){var X=$(".description-label").find(".chs-icon");X.removeClass("hidden"),setTimeout(function(){X.addClass("hidden")},1e3)}else window.toastr.error(F.msg)}})}function g(){var A=$(".course-select option:selected");m(A),$(".course-select").on("change",function(){A=$(".course-select option:selected"),m(A)}),$("#share-modal-assign-btn").on("click",function(){y($(".course-select option:selected").val())})}function m(A){if(A.hasClass("assigned")){lu.trigger("utils:disableButton",$("#share-modal-assign-btn")),$("#share-modal-assign-btn").html("Assigned");var F=A.val(),X=A.data("assignment-id");x(F,X)}else lu.trigger("utils:enableButton",$("#share-modal-assign-btn")),$("#links-section").addClass("hidden"),$("#share-modal-assign-btn").html("Assign")}function y(A){lu.trigger("utils:disableButton",$("#share-modal-assign-btn"));var F={};F.assignmentType="activity",F.itemId=window.pageSpecific.itemID,F.itemType=$(".item-type-select option:selected").data("type"),F.teacherCourseId=A,F.addToLatestLesson=!0,li.send({method:"add_new_assignment",app:"lms",data:F,success:function(X){X.status=="ok"?($("#share-modal-assign-btn").html('<span class="chs-icon chs-icon-check"><span>'),$(".course-select option:selected").addClass("assigned"),$(".course-select option:selected").data("assignment-id",X.assignment.id),x(A,X.assignment.id)):window.toastr.error(X.msg)}})}function x(A,F){var X="/lms/assignments/"+A+"?activity="+F;$(".view-link").attr("href",X),$("#links-section").removeClass("hidden")}function I(A){A===Qu?$(Qu).is(":checked")?($("#share-public-container").removeClass("hidden"),$("#share-modal-public-link").val(Ls+"/run"),$("#share-modal-public-link").attr("href",Ls+"/run")):$("#share-public-container").addClass("hidden"):A===Zu&&($(Zu).is(":checked")?($("#share-code-container").removeClass("hidden"),$("#share-modal-copy-link").val(Ls),$("#share-modal-copy-link").attr("href",Ls)):$("#share-code-container").addClass("hidden"))}$(Gd).on("click",function(){lu.trigger("utils:disableButton",Gd),li.send({method:"submit",app:"contest",data:{shared_program_identifier:$(Gd).data("share-id"),contest_identifier:$(Ute).val()},success:function(A){lu.trigger("utils:enableButton",Gd),A.status=="ok"?$(Mte).html('<span>Successfully submitted to <a target="_blank" href="'+A.contest_url+'">'+A.contest_name+"</a></span>"):window.toastr.error(A.msg)},error:function(){lu.trigger("utils:enableButton",Gd),window.toastr.error("There was an error submitting to the contest. Please try again.")}})}),$(Rte).on("click",function(){li.send({method:"create_or_update_codehsme_domain",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID},success:function(A){A.status=="ok"?t.domainDiv(A.fullDomain,A.fullURL):Uv.error("There was an error creating your domain, please try again.")},error:function(){Uv.error("There was an error creating your domain, please try again.")}})}),$(Ju).on("change",hN,function(){var A=$(this).is(":checked");li.send({method:"set_share_active",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,activeStatus:A}}),$(Qu).prop("checked",A)}),$(Ju).on("change",tT,function(){var A=$(this).is(":checked");li.send({method:"set_share_code",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,showCodeStatus:A}}),$(Zu).prop("checked",A)}),$(Ju).on("change","#shared-width",function(){var A=$(this).val();li.send({method:"set_share_display_width",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,displayWidth:A}})}),$(Ju).on("change","#shared-height",function(){var A=$(this).val();li.send({method:"set_share_display_height",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,displayHeight:A}})}),$(Ju).on("change",_N,function(){var A=$(this).is(":checked");li.send({method:"set_share_show_file_tree",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,showFileTreeStatus:A}})}),$(Ju).on("change",bN,function(){var A=$(this).is(":checked");li.send({method:"set_share_editable",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,editableStatus:A}})}),$(Ju).on("change",rT,function(){var A=$(this).is(":checked");li.send({method:"set_share_display_ide",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,displayIDEStatus:A}}),$(gN).prop("checked",A)}),$(Ju).on("change",iT,function(){var A=$(this).is(":checked");li.send({method:"set_share_forkable",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,forkableStatus:A}}),$(mN).prop("checked",A)}),$(Rs).on("change",Qu,function(){var A=$(this).is(":checked");li.send({method:"set_share_active",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,activeStatus:A}}),$(hN).prop("checked",A),I(Qu)}),$(Rs).on("change",gN,function(){var A=$(this).is(":checked");li.send({method:"set_share_display_ide",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,displayIDEStatus:A}}),$(rT).prop("checked",A)}),$(Rs).on("change",Zu,function(){var A=$(this).is(":checked");li.send({method:"set_share_code",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,showCodeStatus:A}}),$(tT).prop("checked",A),I(Zu)}),$(Rs).on("change",mN,function(){var A=$(this).is(":checked");li.send({method:"set_share_forkable",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,forkableStatus:A}}),$(iT).prop("checked",A)}),$(Rs).on("change",Lte,function(){var A=$(this).val();li.send({method:"set_share_ide",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,sharedProgramID:window.pageSpecific.sharedProgramID,IDE:A}})}),$(Rs).on("change",Nte,function(){var A=$(this).val();li.send({method:"set_share_abacus_display_mode",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,displayMode:A}})}),$(Rs).on("click","#switch-to-abacus",function(A){A.preventDefault(),li.send({method:"set_share_ide",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,IDE:"abacus"},success:function(F){if(F.status==="ok"){$("#collab-editor-warning").html('Switching to the newer editor. The page will reload in <b id="reload-countdown">10</b> seconds.');var X=10,de=setInterval(function(){$("#reload-countdown").text(X),--X<0&&(clearInterval(de),location.reload())},1e3)}}})}),$("#upload-icon-btn").on("click",function(){$(".img-upload").trigger("click")}),$("#icon-thumbnail").on("click",function(){$(".img-upload").trigger("click")}),$(".img-upload").on("change",function(){t.uploadFile()}),t.setupDownloadAppFiles(),window.addEventListener("message",function(A){if(!(A.origin!=="https://codehs.com"&&A.origin!=="https://static1.codehs.com"&&A.origin!=="http://localhost:8000")){var F=A.data;if(F.type&&F.type=="screenshot_data"){var X=F.data,de=$te(X,"image/png"),N=new FormData;N.append("file",de),SN(N,function(H){li.send({method:"set_share_image",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,imageURL:H}})})}}})};lu.on("shareTab:setup",function(){Ls=window.pageSpecific.shareBaseURL,new sl});lu.on("editor:sandboxItemTitleChange",function(t){var e=t[0],r=t[1];Ls=e;var n=$(wN),i=$(nT);n.text(e),n.attr("href",e),i.text(e),i.attr("href",e),history.pushState({},r,e)});TN.exports=sl});var oT=R((KAe,EN)=>{"use strict";var zd=ui(),ol=Yl(),Th=XV(),Bte=Pi(),qte=KA(),jte=WA(),cl=Er(),ea="#finalize-btn, #needs-work-btn",ta="#submit-grade-full-credit",ra="#submit-grade-give-zero",ul="#ai-grade",Bv="#grading-tab-ai-hint",Hte="#assignment-submission-select",Gte="#snapshot-submission-",zte="#late-submission-message-",Vte="#time-spent-submission-message-",Wte=".late-message",Kte=".time-spent-message",Vd="#grade-score-input",du="#grade-message-input",jv="#grade-teacher-notes-input",Xte="#current-grade-status",sT="#assignment-grades-list",Yte=".feedback-content",qv="#add-custom-response-modal",CN="#custom-responses",Jte="#canned-responses",Qte=".add-response";function Ns(t){this.editor=t,this.setup()}Ns.prototype.setup=function(){var t=this;if($("#lms-grading-tab").length!==0){var e="grade_mode"in $.url().param();t.converter=window.Markdown.getSanitizingConverter(),window.Markdown.Extra.init(t.converter,{highlighter:"prettify"}),$(Hte).on("change",function(r){var n=$(this).val();ere(t,n)}),$(ea).on("click",function(r){r.preventDefault(),$(ea).attr("disabled","disabled"),$(ta).attr("disabled","disabled"),$(ra).attr("disabled","disabled"),$("#rubrics-table").addClass("hidden");var n=$(Vd).val(),i=$(du).val(),a=$(this).data("next-step"),s=$(jv).val(),o=t.editor.studentAssignmentID,c={student_assignment_id:o,score:n,message:i,teacher_notes:s,student_next_step:a,ai_request_id:$(ul).data("request-id")};e&&(c.grade_mode=!0,c.section=$.url().param().section),zd.send({app:"lms",method:"grade_assignment",data:c,success:function(l){if(l.status==="ok")if(t.reload({student_assignment_id:o}),l.next_url)window.useTurbolinks?window.Turbolinks.visit(l.next_url):window.location.href=l.next_url;else{$(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled");var f,g;a==window.CHS.C.GradingStatus.PASSED?(f="alert finalized",g='<span class="chs-icon chs-icon-check"></span><span>Status: Finalized</span>'):a==window.CHS.C.GradingStatus.NEEDS_WORK&&(f="alert bg-pink",g='<span class="chs-icon chs-icon-cancel"></span><span>Status: Reviewed</span>'),$("#status-message").removeClass(),$("#status-message").addClass(f),$("#status-message").html(g)}else ol.error(l.message),$(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled")},error:function(l){ol.error("There was an error grading this assignment! Please try again"),$(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled")}})}),$(ta).on("click",function(r){r.preventDefault(),$(ta).attr("disabled","disabled"),$(ra).attr("disabled","disabled"),$(ea).attr("disabled","disabled"),$("#rubrics-table").addClass("hidden");var n=$(jv).val(),i=t.editor.studentAssignmentID,a=$(du).val(),s={student_assignment_id:i,score:window.pageSpecific.assignmentMaxPoints,message:a,teacher_notes:n,student_next_step:window.CHS.C.GradingStatus.PASSED,ai_request_id:$(ul).data("request-id")};e&&(s.grade_mode=!0,s.section=$.url().param().section),zd.send({app:"lms",method:"grade_assignment",data:s,success:function(o){o.status==="ok"?(t.reload({student_assignment_id:i}),o.next_url?window.useTurbolinks?window.Turbolinks.visit(o.next_url):window.location.href=o.next_url:($(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled"),$("#status-message").removeClass(),$("#status-message").addClass("alert finalized"),$("#status-message").html('<span class="chs-icon chs-icon-check"></span><span>Status: Finalized</span>'))):(ol.error(o.message),$(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled"))},error:function(o){ol.error("There was an error grading this assignment! Please try again"),$(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled")}})}),$(ra).on("click",function(r){r.preventDefault(),$(ta).attr("disabled","disabled"),$(ra).attr("disabled","disabled"),$(ea).attr("disabled","disabled"),$("#rubrics-table").addClass("hidden");var n=$(jv).val(),i=t.editor.studentAssignmentID,a=$(du).val(),s={student_assignment_id:i,score:0,message:a,teacher_notes:n,student_next_step:window.CHS.C.GradingStatus.PASSED,ai_request_id:$(ul).data("request-id")};e&&(s.grade_mode=!0,s.section=$.url().param().section),zd.send({app:"lms",method:"grade_assignment",data:s,success:function(o){o.status==="ok"?(t.reload({student_assignment_id:i}),o.next_url?window.useTurbolinks?window.Turbolinks.visit(o.next_url):window.location.href=o.next_url:($(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled"),$("#status-message").removeClass(),$("#status-message").addClass("alert finalized"),$("#status-message").html('<span class="chs-icon chs-icon-check"></span><span>Status: Finalized</span>'))):(ol.error(o.message),$(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled"))},error:function(o){ol.error("There was an error grading this assignment! Please try again"),$(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled")}})}),$(Bv).on("click",function(r){return r.preventDefault(),$(".tooltip").remove(),cl.trigger("utils:disableButton",$(Bv)),Th.hideAIFeedback(),zd.send({app:"ai",method:"get_ai_hint",data:{student_assignment_id:t.editor.studentAssignmentID,location:"Grading Tab"},success:function(n){cl.trigger("utils:enableButton",$(Bv)),n.status==="ok"?($(du).val(n.hint),n.ai_request_id&&Th.setupAIFeedbackButtons(n.ai_request_id,"AI Hints")):window.toastr.error(n.message)},error:function(){window.toastr.error("There was an error generating your hint."),cl.trigger("utils:enableButton",$(Bv))}})}),$(ul).on("click",function(r){cl.trigger("ai:gradingOnboardModal:setup"),r.preventDefault();var n={student_assignment_id:t.editor.studentAssignmentID,strictness:1,location:"Grading Tab",version:$(this).data("version")};cl.trigger("utils:disableButton",ul),$(".tooltip").remove(),$(ta).attr("disabled","disabled"),$(ra).attr("disabled","disabled"),$(ea).attr("disabled","disabled"),zd.send({app:"lms",method:"ai_grade_assignment",data:n,success:function(i){cl.trigger("utils:enableButton",ul),$(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled"),$(ul).data("request-id",i.ai_request_id),Th.showAIGradeScore(i,window.pageSpecific.assignmentMaxPoints,$(Vd)),$(du).val(i.message),Th.setupAIFeedbackButtons(i.ai_request_id,"AI Grading"),i.rubric_table&&($("#rubrics-table").html(i.rubric_table),$("#rubrics-table").removeClass("hidden"),Th.setupRubricToggleHandlers($("#rubrics-table"),$(Vd),window.pageSpecific.assignmentMaxPoints,i.ai_request_id))},error:function(){$(ea).removeAttr("disabled"),$(ta).removeAttr("disabled"),$(ra).removeAttr("disabled"),ol.error("There was an error grading this assignment.")}})}),this.setupCannedResponses(),this.format(),t.reload({student_assignment_id:t.editor.studentAssignmentID}),$(window).on("beforeunload",t.cleanup),$(document).one("turbolinks:before-render",function(){t.cleanup(),$(window).off("beforeunload",t.cleanup)})}};Ns.prototype.reload=function(t){var e=this;$(Vd).val(0),$(du).val(""),$(jv).val(""),zd.send({app:"lms",method:"get_grading_history",data:t,type:"GET",success:function(r){if(r.status==="ok"){var n=r.data;if(n.length>0){$(sT).html("");for(var i=0;i<n.length;i++)$(sT).append(tre(n[i]));e.format(),cl.trigger("CHS.Utils.markdown:setup")}else $(sT).html("This assignment has not yet been graded");var a=r.current_status,s=$(Xte);s.removeClass().addClass(a.next_step_css),s.find(".grade-next-step").text(a.student_next_step),s.find(".grade-score").text(a.score),s.find(".grade-out-of").text(a.out_of);try{var o=parseFloat(a.score);isNaN(o)||$(Vd).val(o)}catch{$(Vd).val(0)}a.timestamp?(s.find(".grade-timestamp").text(a.timestamp).show(),s.find(".grade-timestamp").attr("data-original-title",a.longtime)):s.find(".grade-timestamp").hide()}}})};Ns.prototype.unhtmlEntityCode=function(t){return t=t.replace(/&amp;/g,"&"),t};Ns.prototype.format=function(){var t=this;$(Yte).each(function(){var e=$(this).html();e=e.replace(/&gt;/g,">");var r=t.converter.makeHtml(e);r=t.unhtmlEntityCode(r),r=qte.formatTerms(r),r=jte.linkItems(r),$(this).html(r),$(this).find("pre").each(function(){$(this).addClass("prettyprint")}),$('[rel="tooltip"]').tooltip()}),$("#wmd-input-second").length>0&&t.cannedResponseEditor.run(),window.prettyPrint()};Ns.prototype.getResponse=function(t){var e=$(".canned-responses").find("[data-resp="+t+"]").html();return e&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),e};Ns.prototype.getCannedResponseID=function(t){var e=$(".canned-responses").find("[data-resp="+t+"]");return e.data("id")};Ns.prototype.cannedResponse=function(t){var e=this,r=e.getResponse(t);if(r){var n=e.getCannedResponseID(t),i=$(du),a=i.val(),s=i.prop("selectionEnd"),o="";if(a.length>0){s>0&&!/\s/.test(a[s-1])&&(r=" "+r);var c=a.substring(0,s),l=a.substring(s);l.length>0&&!/\s/.test(l[0])&&(l=" "+l),o=c+r+l}else o=r;i.val(o);var f=$(du).data("cannedResponseIDs")||"";f!==""&&(f+=","),f+=n,i.data("cannedResponseIDs",f),$(du).trigger("focus"),i.prop("selectionStart",s+r.length),i.prop("selectionEnd",s+r.length)}};Ns.prototype.setupCannedResponses=function(){var t=this;t.cannedResponseEditor=new window.Markdown.Editor(t.converter,"-second"),t.cannedResponseEditor.hooks.chain("onPreviewRefresh",function(){$("#wmd-preview-second").find("pre").each(function(){$(this).addClass("prettyprint")}),window.prettyPrint()}),$("#add-response-btn").on("click",function(r){var n=$(this);n.attr("disabled","disabled");var i=$("#wmd-input-second").val();if(i.trim())Bte.Ajax.send({app:"help",method:"save_canned_response",data:{msg:$("#wmd-input-second").val(),msg_id:0,item_id:t.editor.getItemID(),is_global:$("#add-custom-canned-response-is-global").is(":checked")},success:function(a){if(a.status=="ok")if(a.resp)t.addResponseToList(a.resp),$("#wmd-input-second").val(""),$("#wmd-preview-second").html(""),$(qv).modal("hide");else{var s="You already have a response saved with that message";$(qv).find(".response-message").text(s)}else $(qv).find(".response-message").text("Sorry your response was not saved, please try again")}}),n.removeAttr("disabled");else{$(qv).find(".response-message").text("Please enter a response to save"),n.removeAttr("disabled");return}});for(var e=1;e<=9;e++)(function(r){var n="ctrl+"+r;$(document).bind("keypress",n,function(){t.cannedResponse(r)})})(e);$(".canned-responses").on("click",".canned-response",function(){var r=$(this),n=r.find(".resp").data("resp");t.cannedResponse(n)})};Ns.prototype.addResponseToList=function(t){function e(a){for(var s="",o;a>0;)o=(a-1)%26,a=Math.floor((a-1)/26),s=String.fromCharCode(97+o)+s;return s}var r=$(CN+" .canned-response").length,n=e(r+1),i=$('<div class="canned-response">');i.append($('<span class="count">').text("("+n+") ")),i.append($('<span class="resp" data-resp="'+n+'">').text(t)),$(Jte).removeClass("no-custom-responses"),$(CN+" "+Qte).before(i)};Ns.prototype.cleanup=function(){$(document).unbind("keypress")};function Zte(t){var e=$(Gte+t),r=e.html();r=r.replace(/&lt;/g,"<"),r=r.replace(/&gt;/g,">"),r=r.replace(/&amp;/g,"&");var n=JSON.parse(r);return n}function ere(t,e){$(Wte).addClass("hidden"),$(zte+e).removeClass("hidden"),$(Kte).addClass("hidden"),$(Vte+e).removeClass("hidden");for(var r=Zte(e),n=Object.keys(r),i=0;i<n.length;i++)t.editor.code[n[i]]=r[n[i]],t.editor.currentCode[n[i]]=r[n[i]];window.pageSpecific.isAbacus?t.editor.setCode(r):t.editor.setCode(r[t.editor.activeFile])}var tre=function(t){var e='<div class="wrap"><label style="display: inline-block">Score: </label><span> '+t.score+" out of "+t.out_of+'</span><br><label style="display: inline-block">Next Step: </label><span> '+t.student_next_step+'</span><br><label style="display: inline-block">Graded By: </label><span> '+t.graded_by+'</span><br><label style="display: inline-block">Timestamp: </label><span rel="tooltip" title="'+t.longtime+'" style="text-decoration: underline;">'+t.timestamp+"</span>",r=window.pageSpecific.viewerID===window.pageSpecific.codeUserID;return r||(e+='<br><label style="display: inline-block">Teacher Notes (not visible to student): </label><span data-markdown=" '+t.teacher_notes+'"></span>'),e+='<br><label style="display: inline-block">Feedback: </label><div class="feedback-content"> '+t.message.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>",e+="</div>",e};EN.exports=Ns});var dT=R((XAe,DN)=>{"use strict";var Wd=ui(),rre=WA(),ire=KA(),cT=Er(),uT=Pi(),xN=Rr(),fu=".send-message",tc=".help_question",nre="100px",are="#help-tab .message .comment-content",kN=".open_help",ec=".help-thread",Gv,lT="#rate-msg",sre=lT+" .msg-rating",IN=".message:last-of-type .msg-rating.student",ore=".flag-msg",ure=".hide-msg",cre=".save-canned",lre=".add-response",AN="#custom-responses",dre="#canned-responses",Hv="#add-custom-response-modal";function gn(t){this.editor=t,this.setup()}gn.prototype.messageBoxEmpty=function(){var t=$(tc).val();return $.trim(t).length===0};gn.prototype.sendMessage=function(t,e){var r=this,n=r.editor.getInfo();return n.sectionId=window.pageSpecific.sectionID,Wd.send({app:"help",method:"help_message",data:{info:n,content:t,cannedResponseIDs:e},success:function(i){$(tc).val(""),r.reload({checkHelpMode:!0})}})};gn.prototype.sendMessageAndReview=function(t,e,r){var n=this,i=n.sendMessage(t,e);return i.done(function(a){var s={info:n.editor.getInfo(),reviewGrade:r,messageId:a.messageId};return n.codeReview(s)})};gn.prototype.codeReview=function(t){var e=this;return Wd.send({app:"help",method:"code_review",data:t,success:function(r){e.reload({checkHelpMode:!0}),"grade_mode"in $.url().param()&&(window.location.href=e.gradeModeNext);var n=t.reviewGrade;if(n){var i,a;n==xN.GradingStatus.PASSED?(i="alert bg-green",a='<span class="chs-icon chs-icon-check"></span><span>Status: Passed!</span>'):n==xN.GradingStatus.NEEDS_WORK&&(i="alert bg-pink",a='<span class="chs-icon chs-icon-cancel"></span><span>Status: Needs Work</span>'),$("#status-message").removeClass(),$("#status-message").addClass(i),$("#status-message").html(a)}}})};gn.prototype.unhtmlEntityCode=function(t){return t=t.replace(/&amp;/g,"&"),t};gn.prototype.filterProfanity=function(t){for(var e=CHS.Constants.FilteredWords.BADWORDS,r=CHS.Constants.FilteredWords.BADWORDS_NOT_SUBSET,n=CHS.Constants.FilteredWords.EXCLUDED_WORDS,i=" ==== ",a,s,o="(?<!",c=0;c<n.length;c++)o+=n[c],c<n.length-1&&(o+="|");for(o+=")",c=0;c<e.length;c++)s="\\b\\w*"+e[c]+"\\w*\\b",a=new RegExp(s+o,"gi"),t=t.replace(a,i);for(c=0;c<r.length;c++)s="\\b"+r[c]+"\\b",a=new RegExp(s+o,"gi"),t=t.replace(a,i);return t};gn.prototype.reload=function(t){t=t||{};var e=t.checkHelpMode||!1,r=t.clearUnread||!1,n=this,i=this.editor.getInfo();i.clearUnread=r,Wd.send({method:"help_thread",app:"help",data:i,dataType:"HTML",type:"GET",success:function(a){var s=$(ec).html(),o=s.split('<div class="message').length,c=a.split('<div class="message').length;if(o!=c){$(ec).html(a),n.format();var l=c-1;$(Gv).html("Help ("+l+")")}(n.reloadCount>0||e)&&cT.trigger("utils:checkHelpMode"),n.reloadCount++,cT.trigger("Utils.Ratings:setup")}}),$(tc).css("height",nre)};gn.prototype.setupMsgMenu=function(){var t=this;$(ec).on("click",ore,function(e){e.preventDefault();var r=$(this),n=r.parents(".msg-dropdown"),i=n.data("id");Wd.send({method:"flag_message",app:"help",data:{msg_id:i},success:function(a){a.status=="ok"&&r.addClass("has-flag")}})}),$(ec).on("click",ure,function(e){e.preventDefault();var r=$(this).parents(".msg-dropdown"),n=r.data("id");Wd.send({method:"hide_message",app:"help",data:{msg_id:n},success:function(i){i.status=="ok"&&t.reload()}})}),$(ec).on("click",cre,function(e){e.preventDefault();var r=$(this),n=r.parents(".msg-dropdown"),i=n.data("id"),a=$(ec).data("itemId");Wd.send({method:"save_canned_response",app:"help",data:{msg_id:i,item_id:a},success:function(s){s.status=="ok"&&(r.addClass("is-saved"),s.resp&&t.addResponseToList(s.resp))}})})};gn.prototype.addResponseToList=function(t){function e(a){for(var s="",o;a>0;)o=(a-1)%26,a=Math.floor((a-1)/26),s=String.fromCharCode(97+o)+s;return s}var r=$(AN+" .canned-response").length,n=e(r+1),i=$('<div class="canned-response">');i.append($('<span class="count">').text("("+n+") ")),i.append($('<span class="resp" data-resp="'+n+'">').text(t)),$(dre).removeClass("no-custom-responses"),$(AN+" "+lre).before(i)};gn.prototype.format=function(){var t=this;$(are).each(function(){var e=$(this).html();e=t.filterProfanity(e),e=e.replace(/&gt;/g,">");var r=t.converter.makeHtml(e);r=t.unhtmlEntityCode(r),r=ire.formatTerms(r),r=rre.linkItems(r),$(this).html(r),$(this).find("pre").each(function(){$(this).addClass("prettyprint")}),$('[rel="tooltip"]').tooltip()}),$(tc).autogrow(),t.commentEditor.run(),$("#wmd-input-second").length>0&&t.cannedResponseEditor.run(),$("#wmd-preview").html(""),window.prettyPrint()};gn.prototype.hideRating=function(t){var e=t.children("input")[0].value;e&&($(lT).fadeOut("slow"),$(fu).removeAttr("disabled"),$("#wmd-input").removeClass("needs-rating"),$(IN).children("input")[0].value=e)};gn.prototype.setSendButtonText=function(){var t=this,e=$(fu),r=$("input[name=review-options]:checked").data("value"),n=t.messageBoxEmpty();r?n?e.text("Send Review Grade"):e.text("Send Grade with Message"):e.text("Send")};gn.prototype.setup=function(){var t=this;Gv=window.pageSpecific.isAbacus?'.__abacus_tab:contains("Help")':'a[href="#help-tab"]',$("#help-tab").length!==0&&(t.converter=window.Markdown.getSanitizingConverter(),window.Markdown.Extra.init(t.converter,{highlighter:"prettify"}),$(lT).length>0&&$(fu).attr("disabled","disabled"),$(sre).on("click",function(){t.hideRating($(this))}),$(ec).on("click",IN,function(){t.hideRating($(this))}),$("#item-code-review").length>0&&($(tc).on("input paste focus blur",function(){t.setSendButtonText()}),$("input[name=review-options]").on("change",function(){t.setSendButtonText()})),$(fu).on("click",function(e){e.preventDefault(),$(fu).attr("disabled","disabled");var r=$("input[name=review-options]:checked");if($("#item-code-review").length>0&&r.length===0){uT.alert({header:"Select a Grade",message:'Please select a grade or select "None" before sending a message.',close_callback:function(){$(fu).removeAttr("disabled")}});return}var n=$(tc).data("cannedResponseIDs")||"",i=$(tc).val(),a=r.data("value"),s;if(!$("#item-code-review").length||!a){if(t.messageBoxEmpty()){uT.alert({header:"Write a Message",message:"You cannot send a blank message.",close_callback:function(){$(fu).removeAttr("disabled")}});return}s=t.sendMessage(i,n)}else if(t.messageBoxEmpty()){var o={info:t.editor.getInfo(),reviewGrade:a};s=t.codeReview(o)}else s=t.sendMessageAndReview(i,n,a);s.always(function(){$(fu).removeAttr("disabled")})}),t.setupMsgMenu(),$("#add-response-btn").on("click",function(e){var r=$(this);r.attr("disabled","disabled");var n=$("#wmd-input-second").val();if(n.trim())uT.Ajax.send({app:"help",method:"save_canned_response",data:{msg:$("#wmd-input-second").val(),msg_id:0,item_id:$(ec).data("itemId")},success:function(i){if(i.status=="ok")if(i.resp)t.addResponseToList(i.resp),$("#wmd-input-second").val(""),$("#wmd-preview-second").html(""),$(Hv).modal("hide");else{var a="You already have a response saved with that message";$(Hv).find(".response-message").text(a)}else $(Hv).find(".response-message").text("Sorry your response was not saved, please try again")}}),r.removeAttr("disabled");else{$(Hv).find(".response-message").text("Please enter a response to save"),r.removeAttr("disabled");return}}),$(document).on("click",kN,function(e){e.preventDefault(),t.reload(),cT.trigger("utils:switchToTab","#help-tab",".right-col-tabs","editor-tab-content"),$("#wmd-input").trigger("focus"),$(Gv).removeClass("new-messages")}),$(Gv).on("click",function(){t.editor.stop(),$(this).removeClass("new-messages"),t.reload({clearUnread:!0})}),t.commentEditor=new window.Markdown.Editor(t.converter),t.commentEditor.hooks.chain("onPreviewRefresh",function(){$("#wmd-preview").find("pre").each(function(){$(this).addClass("prettyprint")}),window.prettyPrint()}),t.cannedResponseEditor=new window.Markdown.Editor(t.converter,"-second"),t.cannedResponseEditor.hooks.chain("onPreviewRefresh",function(){$("#wmd-preview-second").find("pre").each(function(){$(this).addClass("prettyprint")}),window.prettyPrint()}),t.format(),this.setupGrading(),$(window).on("beforeunload",t.cleanup),$(document).one("turbolinks:before-render",function(){t.cleanup(),$(window).off("beforeunload",t.cleanup)}))};var fre="#wmd-input",pre="#ask_question";gn.prototype.getResponse=function(t){var e=$(".canned-responses").find("[data-resp="+t+"]").html();return e&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),e};gn.prototype.getCannedResponseID=function(t){var e=$(".canned-responses").find("[data-resp="+t+"]");return e.data("id")};gn.prototype.cannedResponse=function(t){var e=this,r=e.getResponse(t);if(r){var n=e.getCannedResponseID(t),i=$(fre),a=i.val();a.length>0&&(a+=`

`),i.val(a+r);var s=$(tc).data("cannedResponseIDs")||"";s!==""&&(s+=","),s+=n,i.data("cannedResponseIDs",s),$(pre).trigger("focus");var o=$(fu),c=$("input[name=review-options]:checked").data("value");c?o.text("Send Grade with Message"):o.text("Send")}};gn.prototype.setupGrading=function(){for(var t=this,e=1;e<=9;e++)(function(r){var n="ctrl+"+r;$(document).bind("keypress",n,function(){t.cannedResponse(r)})})(e);$(".canned-responses").on("click",".canned-response",function(){var r=$(this),n=r.find(".resp").data("resp");t.cannedResponse(n)})};gn.prototype.cleanup=function(){$(document).unbind("keypress"),$(document).off("click",kN)};DN.exports=gn});var PN=R((ON,zv)=>{(function(t,e){var r=Object.prototype.toString;function n(N,H,z){if(Array.prototype.map)return Array.prototype.map.call(N,H,z);for(var Y=new Array(N.length),G=0,ie=N.length;G<ie;G++)Y[G]=H.call(z,N[G],G,N);return Y}function i(N){return{newPos:N.newPos,components:N.components.slice(0)}}function a(N){for(var H=[],z=0;z<N.length;z++)N[z]&&H.push(N[z]);return H}function s(N){var H=N;return H=H.replace(/&/g,"&amp;"),H=H.replace(/</g,"&lt;"),H=H.replace(/>/g,"&gt;"),H=H.replace(/"/g,"&quot;"),H}function o(N,H,z){H=H||[],z=z||[];var Y;for(Y=0;Y<H.length;Y+=1)if(H[Y]===N)return z[Y];var G;if(r.call(N)==="[object Array]"){for(H.push(N),G=new Array(N.length),z.push(G),Y=0;Y<N.length;Y+=1)G[Y]=o(N[Y],H,z);H.pop(),z.pop()}else if(typeof N=="object"&&N!==null){H.push(N),G={},z.push(G);var ie=[],fe;for(fe in N)ie.push(fe);for(ie.sort(),Y=0;Y<ie.length;Y+=1)fe=ie[Y],G[fe]=o(N[fe],H,z);H.pop(),z.pop()}else G=N;return G}function c(N,H,z,Y){for(var G=0,ie=N.length,fe=0,Ne=0;G<ie;G++){var ye=N[G];if(ye.removed){if(ye.value=z.slice(Ne,Ne+ye.count).join(""),Ne+=ye.count,G&&N[G-1].added){var Re=N[G-1];N[G-1]=N[G],N[G]=Re}}else{if(!ye.added&&Y){var He=H.slice(fe,fe+ye.count);He=n(He,function(Ze,ce){var tt=z[Ne+ce];return tt.length>Ze.length?tt:Ze}),ye.value=He.join("")}else ye.value=H.slice(fe,fe+ye.count).join("");fe+=ye.count,ye.added||(Ne+=ye.count)}}return N}function l(N){this.ignoreWhitespace=N}l.prototype={diff:function(N,H,z){var Y=this;function G(tt){return z?(setTimeout(function(){z(e,tt)},0),!0):tt}if(H===N)return G([{value:H}]);if(!H)return G([{value:N,removed:!0}]);if(!N)return G([{value:H,added:!0}]);H=this.tokenize(H),N=this.tokenize(N);var ie=H.length,fe=N.length,Ne=1,ye=ie+fe,He=[{newPos:-1,components:[]}],Re=this.extractCommon(He[0],H,N,0);if(He[0].newPos+1>=ie&&Re+1>=fe)return G([{value:H.join("")}]);function Ze(){for(var tt=-1*Ne;tt<=Ne;tt+=2){var ft,pt=He[tt-1],Ye=He[tt+1],xt=(Ye?Ye.newPos:0)-tt;pt&&(He[tt-1]=e);var Ut=pt&&pt.newPos+1<ie,Pt=Ye&&0<=xt&&xt<fe;if(!Ut&&!Pt){He[tt]=e;continue}if(!Ut||Pt&&pt.newPos<Ye.newPos?(ft=i(Ye),Y.pushComponent(ft.components,e,!0)):(ft=pt,ft.newPos++,Y.pushComponent(ft.components,!0,e)),xt=Y.extractCommon(ft,H,N,tt),ft.newPos+1>=ie&&xt+1>=fe)return G(c(ft.components,H,N,Y.useLongestToken));He[tt]=ft}Ne++}if(z)(function tt(){setTimeout(function(){if(Ne>ye)return z();Ze()||tt()},0)})();else for(;Ne<=ye;){var ce=Ze();if(ce)return ce}},pushComponent:function(N,H,z){var Y=N[N.length-1];Y&&Y.added===H&&Y.removed===z?N[N.length-1]={count:Y.count+1,added:H,removed:z}:N.push({count:1,added:H,removed:z})},extractCommon:function(N,H,z,Y){for(var G=H.length,ie=z.length,fe=N.newPos,Ne=fe-Y,ye=0;fe+1<G&&Ne+1<ie&&this.equals(H[fe+1],z[Ne+1]);)fe++,Ne++,ye++;return ye&&N.components.push({count:ye}),N.newPos=fe,Ne},equals:function(N,H){var z=/\S/;return N===H||this.ignoreWhitespace&&!z.test(N)&&!z.test(H)},tokenize:function(N){return N.split("")}};var f=new l,g=new l(!0),m=new l;g.tokenize=m.tokenize=function(N){return a(N.split(/(\s+|\b)/))};var y=new l(!0);y.tokenize=function(N){return a(N.split(/([{}:;,]|\s+)/))};var x=new l,I=new l;I.ignoreTrim=!0,x.tokenize=I.tokenize=function(N){for(var H=[],z=N.split(/^/m),Y=0;Y<z.length;Y++){var G=z[Y],ie=z[Y-1],fe=ie&&ie[ie.length-1];G===`
`&&fe==="\r"?H[H.length-1]=H[H.length-1].slice(0,-1)+`\r
`:(this.ignoreTrim&&(G=G.trim(),Y<z.length-1&&(G+=`
`)),H.push(G))}return H};var A=new l;A.tokenize=function(N){var H=[],z=N.split(/(\n|\r\n)/);z[z.length-1]||z.pop();for(var Y=0;Y<z.length;Y++){var G=z[Y];Y%2?H[H.length-1]+=G:H.push(G)}return H};var F=new l;F.tokenize=function(N){return a(N.split(/(\S.+?[.!?])(?=\s+|$)/))};var X=new l;X.useLongestToken=!0,X.tokenize=x.tokenize,X.equals=function(N,H){return x.equals(N.replace(/,([\r\n])/g,"$1"),H.replace(/,([\r\n])/g,"$1"))};var de={Diff:l,diffChars:function(N,H,z){return f.diff(N,H,z)},diffWords:function(N,H,z){return g.diff(N,H,z)},diffWordsWithSpace:function(N,H,z){return m.diff(N,H,z)},diffLines:function(N,H,z){return x.diff(N,H,z)},diffTrimmedLines:function(N,H,z){return I.diff(N,H,z)},diffSentences:function(N,H,z){return F.diff(N,H,z)},diffCss:function(N,H,z){return y.diff(N,H,z)},diffJson:function(N,H,z){return X.diff(typeof N=="string"?N:JSON.stringify(o(N),e,"  "),typeof H=="string"?H:JSON.stringify(o(H),e,"  "),z)},createTwoFilesPatch:function(N,H,z,Y,G,ie){var fe=[];N==H&&fe.push("Index: "+N),fe.push("==================================================================="),fe.push("--- "+N+(typeof G>"u"?"":"	"+G)),fe.push("+++ "+H+(typeof ie>"u"?"":"	"+ie));var Ne=A.diff(z,Y);Ne.push({value:"",lines:[]});function ye(tr){return n(tr,function(Ke){return" "+Ke})}function He(tr,Ke,Q){var pe=Ne[Ne.length-2],xe=Ke===Ne.length-2,_e=Ke===Ne.length-3&&Q.added!==pe.added;!/\n$/.test(Q.value)&&(xe||_e)&&tr.push("\\ No newline at end of file")}for(var Re=0,Ze=0,ce=[],tt=1,ft=1,pt=0;pt<Ne.length;pt++){var Ye=Ne[pt],xt=Ye.lines||Ye.value.replace(/\n$/,"").split(`
`);if(Ye.lines=xt,Ye.added||Ye.removed){if(!Re){var Ut=Ne[pt-1];Re=tt,Ze=ft,Ut&&(ce=ye(Ut.lines.slice(-4)),Re-=ce.length,Ze-=ce.length)}ce.push.apply(ce,n(xt,function(tr){return(Ye.added?"+":"-")+tr})),He(ce,pt,Ye),Ye.added?ft+=xt.length:tt+=xt.length}else{if(Re)if(xt.length<=8&&pt<Ne.length-2)ce.push.apply(ce,ye(xt));else{var Pt=Math.min(xt.length,4);fe.push("@@ -"+Re+","+(tt-Re+Pt)+" +"+Ze+","+(ft-Ze+Pt)+" @@"),fe.push.apply(fe,ce),fe.push.apply(fe,ye(xt.slice(0,Pt))),xt.length<=4&&He(fe,pt,Ye),Re=0,Ze=0,ce=[]}tt+=xt.length,ft+=xt.length}}return fe.join(`
`)+`
`},createPatch:function(N,H,z,Y,G){return de.createTwoFilesPatch(N,N,H,z,Y,G)},applyPatch:function(N,H){for(var z=H.split(`
`),Y=[],G=0,ie=!1,fe=!1;G<z.length&&!/^@@/.test(z[G]);)G++;for(;G<z.length;G++)if(z[G][0]==="@"){var Ne=z[G].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);Y.unshift({start:Ne[3],oldlength:+Ne[2],removed:[],newlength:Ne[4],added:[]})}else z[G][0]==="+"?Y[0].added.push(z[G].substr(1)):z[G][0]==="-"?Y[0].removed.push(z[G].substr(1)):z[G][0]===" "?(Y[0].added.push(z[G].substr(1)),Y[0].removed.push(z[G].substr(1))):z[G][0]==="\\"&&(z[G-1][0]==="+"?ie=!0:z[G-1][0]==="-"&&(fe=!0));var ye=N.split(`
`);for(G=Y.length-1;G>=0;G--){for(var He=Y[G],Re=0;Re<He.oldlength;Re++)if(ye[He.start-1+Re]!==He.removed[Re])return!1;Array.prototype.splice.apply(ye,[He.start-1,He.oldlength].concat(He.added))}if(ie)for(;!ye[ye.length-1];)ye.pop();else fe&&ye.push("");return ye.join(`
`)},convertChangesToXML:function(N){for(var H=[],z=0;z<N.length;z++){var Y=N[z];Y.added?H.push("<ins>"):Y.removed&&H.push("<del>"),H.push(s(Y.value)),Y.added?H.push("</ins>"):Y.removed&&H.push("</del>")}return H.join("")},convertChangesToDMP:function(N){for(var H=[],z,Y,G=0;G<N.length;G++)z=N[G],z.added?Y=1:z.removed?Y=-1:Y=0,H.push([Y,z.value]);return H},canonicalize:o};typeof zv<"u"&&zv.exports?zv.exports=de:typeof define=="function"&&define.amd?define([],function(){return de}):typeof t.JsDiff>"u"&&(t.JsDiff=de)})(ON)});var RN=R((YAe,hre)=>{hre.exports=`<table class="table table-condensed">
    <thead class="table-header-sticky">
        <tr>
            <th class="bottom-border"></th>
            <th class="bottom-border">
                Pass
            </th>
            <th class="bottom-border">
                Test
            </th>
            <th class="bottom-border">
                Message
            </th>
            {{#if showAIHelpTestCases}}
            <th class="bottom-border">
                Hint
            </th>
            {{/if}}
        </tr>
    </thead>
    {{#each tests}}
        {{#if showDropdown}}
            <tr tabindex="0"
            class="
            {{#if success}}
            success-test accordion-toggle side-borders collapsed
            {{else}}
                {{#if invalid}}
                invalid-test accordion-toggle side-borders bottom-border
                {{else}}
                danger-test accordion-toggle side-borders bottom-border
                {{/if}}
            {{/if}}
            "
            data-toggle="collapse" data-target="#result{{@index}}">

                <td class="test-show test-case-spacing">
                    <span class="icon-caret-right"><i class="fas fa-angle-right"></i></span>
                    <span class="icon-caret-down"><i class="fas fa-angle-down"></i></span>
                </td>

                <td class="test-case-spacing">
                    {{#if success}}
                        <div class="green-circle"><span class="chs-icon-check" role="img" aria-label="Passed"></span></div>
                    {{else}}
                    {{#ifCond verbosityLevel '===' 0}}
                    <div class="red-circle"><span class="chs-icon-cancel" role="img" aria-label="Failed"></span></div>
                    {{/ifCond}}
                    {{#ifCond verbosityLevel '===' 10}}
                    <div class="grading-circle warning-circle"
                         rel="tooltip-left"
                         title="This is something you should fix, but you can still submit your work.">
                        <span class="fa-solid fa-exclamation"
                              role="img"
                              aria-label="Warning"></span>
                    </div>
                    {{/ifCond}}
                    {{#ifCond verbosityLevel '===' 20}}
                    <div class="grading-circle info-circle"
                         rel="tooltip-left"
                         title="This is a best practice to note. You can still submit your work.">
                        <span class="fa-solid fa-info"
                              role="img"
                              aria-label="Info"></span>
                    </div>
                    {{/ifCond}}
                    {{/if}}
                </td>

                <td class="grading-code test-case-spacing">
                    {{#if isHiddenTest}}
                        <span class="icon icon-eye-close" rel="tooltip-left" title="Hidden tests hide the input and output of the test case. Your program should work for all inputs, even the ones there isn't a test for."></span>
                    {{/if}}
                    {{{test}}}
                </td>

                <td class="test-case-spacing">
                {{{message}}}
                </td>

                {{#if ../showAIHelpTestCases}}
                    {{#unless success}}
                        {{#unless invalid}}
                        <td class="test-case-spacing">
                            <button class="btn btn-main-white btn-ai-hint" id="grading-unit-test-ai-hint-{{@index}}" aria-label="Get AI hints for this test case" rel="tooltip-left" title="Get AI hints for this test case">
                                <i class="fas fa-wand-magic-sparkles"></i>
                            </button>
                        </td>
                        {{/unless}}
                    {{/unless}}
                {{/if}}
            </tr>
            <tr>
                <td colspan="5" class="hidden-row side-borders bottom-border"><div class="accordion-body collapse{{#unless success}} in{{/unless}}" id="result{{@index}}" data-toggle="false">
                {{#if solutionOutput}}
                <div class="expanded-case">
                    <div class="div-spacing grading-code">Expected result:</div>
                    <div class="div-spacing bottom-spacing grading-code">
                        <pre class="rounded">{{solutionOutput}}</pre>
                    </div>
                </div>
                {{/if}}
                {{#if studentOutput}}
                <div class="expanded-case">
                    <div class="div-spacing grading-code">Your result:</div>
                    <div class="div-spacing bottom-spacing grading-code">
                        <pre class="rounded">{{studentOutput}}</pre>
                    </div>
                </div>
                {{/if}}
                {{#if showDiff}}
                <div class="expanded-case">
                    <div class="div-spacing grading-code">Difference:</div>
                    <div class="div-spacing bottom-spacing grading-code">
                        <pre class="result rounded">{{{diff}}}</pre>
                    </div>
                </div>

                {{/if}}
                </div></td>
            </tr>
        {{else}}
            {{#if isHiddenTest}}
            <tr tabindex="0"
            class="
            {{#if success}}
            success-test
            {{else}}
                {{#if invalid}}
                invalid-test
                {{else}}
                danger-test
                {{/if}}
                bottom-border
            {{/if}}
            side-borders"
            data-toggle="collapse" data-target="#result{{@index}}">
                <td class="test-case-spacing"></td>
                <td class="test-case-spacing">
                    {{#if success}}
                    <div class="green-circle"><span class="chs-icon-check" role="img" aria-label="Passed"></span></div>
                    {{else}}
                    {{#ifCond verbosityLevel '===' 0}}
                    <div class="red-circle"><span class="chs-icon-cancel" role="img" aria-label="Failed"></span></div>
                    {{/ifCond}}
                    {{#ifCond verbosityLevel '===' 10}}
                    <div class="grading-circle warning-circle"
                         rel="tooltip-left"
                         title="This is something you should fix, but you can still submit your work.">
                        <span class="fa-solid fa-exclamation"
                              role="img"
                              aria-label="Warning"></span>
                    </div>
                    {{/ifCond}}
                    {{#ifCond verbosityLevel '===' 20}}
                    <div class="grading-circle info-circle"
                         rel="tooltip-left"
                         title="This is a best practice to note. You can still submit your work.">
                        <span class="fa-solid fa-info"
                              role="img"
                              aria-label="Info"></span>
                    </div>
                    {{/ifCond}}
                    {{/if}}
                </td>
                <td class="grading-code test-case-spacing">
                    {{#if isHiddenTest}}
                    <span class="icon icon-eye-close" rel="tooltip-left" title="Hidden tests hide the input and output of the test case. Your program should work for all inputs, even the ones there isn't a test for."></span>
                    {{/if}}
                     Hidden Test</td>
                <td class="test-case-spacing"></td>
            </tr>
            {{else}}
            <tr tabindex="0"
            class="
            {{#if success}}
            success-test
            {{else}}
                {{#if invalid}}
                invalid-test
                {{else}}
                danger-test
                {{/if}}
            {{/if}}
            side-borders"
            data-toggle="collapse" data-target="#result{{@index}}">
                {{#if aiTestCase}}
                <td class="test-show" style="padding-left: 12px; padding-top: 7px; font-size: 20px">\u2728</td>
                {{else}}
                <td class="test-show"></td>
                {{/if}}
                <td>
                    {{#if success}}
                    <div class="green-circle"><span class="chs-icon-check" role="img" aria-label="Passed"></span></div>
                    {{else}}
                    {{#ifCond verbosityLevel '===' 0}}
                    <div class="red-circle"><span class="chs-icon-cancel" role="img" aria-label="Failed"></span></div>
                    {{/ifCond}}
                    {{#ifCond verbosityLevel '===' 10}}
                    <div class="grading-circle warning-circle"
                         rel="tooltip-left"
                         title="This is something you should fix, but you can still submit your work.">
                        <span class="fa-solid fa-exclamation"
                              role="img"
                              aria-label="Warning"></span>
                    </div>
                    {{/ifCond}}
                    {{#ifCond verbosityLevel '===' 20}}
                    <div class="grading-circle info-circle"
                         rel="tooltip-left"
                         title="This is a best practice to note. You can still submit your work.">
                        <span class="fa-solid fa-info"
                              role="img"
                              aria-label="Info"></span>
                    </div>
                    {{/ifCond}}
                    {{/if}}
                </td>
                {{#if isHiddenTest}}
                    <td>
                        <span class="icon icon-eye-close" rel="tooltip-left" title="Hidden tests hide the input and output of the test case. Your program should work for all inputs, even the ones there isn't a test for."></span>
                    </td>
                {{/if}}
                <td class="grading-code">
                    {{{category}}}
                </td>
                <td>
                {{{message}}}
                </td>
            </tr>
            {{/if}}
        {{/if}}
    {{/each}}
    {{#if stillRunning}}
        <tr>
            <td colspan="5" class="bottom-border side-borders">
                <span class="icon-spinner icon-spin spacing-left spacing-right"></span> Running More Tests...
            </td>
        </tr>
    {{/if}}
</table>
`});var Vv=R((ZAe,MN)=>{"use strict";var fT=Rr(),dl=Er(),JAe=Jl(),QAe=ui(),gre=PN(),mre=RN(),ll="#grading-container",LN="#grading-unit-test-run",NN="#grading-unit-test-ai-hint",vre="button.grade_code",yre="#grading-unit-test-expand-all",bre="#grading-unit-test-collapse-all",_re=".error-box",wre=".error-container";function pT(t){this.editor=t,this.setup()}function FN(t){function e(a){a.success||(typeof a.solutionOutput=="string"&&(a.solutionOutput=a.solutionOutput.replace(/\n$/,`\u23CE
`)),typeof a.studentOutput=="string"&&(a.studentOutput=a.studentOutput.replace(/\n$/,`\u23CE
`)));var s=gre.diffChars(a.solutionOutput,a.studentOutput),o="";s.forEach(function(c){var l=c.value;c.added?l="<ins>"+l+"</ins>":c.removed&&(l="<del>"+l+"</del>"),o+=l}),a.diff=o,a.showDropdown===void 0&&(a.showDropdown=!(a.category==="Style"||a.category==="Functionality"||a.isHiddenTest&&(window.Ed.isOwnPage()||window.Ed.codeUserID==fT.User.NONE_USER_ID))),a.isHiddenTest=a.isHiddenTest||!1,a.verbosityLevel=a.verbosityLevel||fT.EditorTestVerbosity.ERROR}_.each(t.tests,e),window.Ed&&(t.isHTML=window.Ed.typeTester.isHTML()),t.showAIHelpTestCases=window.pageSpecific.showAIChatTab,window.testcases=t.tests;var r;r=window.Handlebars.compile(mre);var n=r(t);$(ll).html(n),window.prettyPrint(),$("[rel=tooltip-left]").tooltip({placement:"left",container:"body"}),$(".accordion-toggle").on("keypress",function(a){a.which===13&&$(this).trigger("click"),a.which===32&&(a.preventDefault(),$(this).trigger("click"))});var i=t.tests.filter(function(a){return!a.success});i.length>0&&($(NN).removeClass("hidden"),$("#ai-hint-main-button").data("extra-context","The student's code failed the following test cases: "+JSON.stringify(i)))}function Sre(t){var e=$(t).text(),r=0,n=.1,i="";function a(c){return"display: inline-block; animation: bounce-up 3s ease-in-out infinite; animation-delay: "+c+"s;"}for(var s=0;s<e.length;s++){var o=e.charAt(s);o===" "?i+=" ":i+='<span class="bounce-up" style="'+a(r)+'">'+o+"</span>",r+=n}$(t).html(i)}pT.prototype.gradeCode=function(t){var e=this,r=$(_re),n=$(wre);r.exists()&&n.exists()&&(r.hide(),n.html("")),t!==void 0?($(ll).html('<div class="loader-container"><div class="loader"></div><p class="ai-loading-text">\u2728 Grading with AI... \u2728</p></div>'),Sre(".ai-loading-text")):$(ll).html(""),dl.trigger("autograder:run",e.editor.getCode(),e.editor.info,e.editor,{displayPopup:!1,aiTestCases:t})};pT.prototype.setup=function(){var t=this;$(LN).on("click",function(){if(t.editor.getItemType()===fT.ItemType.UNIT_TEST&&($('[data-filename="Unit Test"]').trigger("click"),dl.trigger("editor:sr:statusUpdate","Running unit tests")),t.editor.isOwnPage())t.editor.save(function(){$("div.show-graded").removeClass("flex"),$("div.show-graded").addClass("hide-bar"),t.gradeCode()},"run");else{$("div.show-graded").removeClass("flex"),$("div.show-graded").addClass("hide-bar");var e=t.editor.currentCode;e[t.editor.activeFile]=t.editor.getCode(),t.gradeCode()}}),$(NN).on("click",function(){window.pageSpecific.isAbacus?window.myAbacus.selectTabWithIdentifier("rightTabs","convo-tab"):dl.trigger("utils:switchToTab","#help-tab",".right-col-tabs",".editor-tab-content"),$("#ai-hint-main-button").trigger("click")}),$(vre).on("click",function(){dl.trigger("utils:switchToTab","#grading-tab",".right-col-tabs",".editor-tab-content"),$(LN).trigger("click")}),$(yre).on("click",function(){$(ll+" .accordion-toggle").each(function(){$(this).removeClass("collapsed"),$(this).addClass("bottom-border")}),$(ll+" .accordion-body").each(function(){$(this).collapse("show")})}),$(bre).on("click",function(){$(ll+" .accordion-toggle").each(function(){$(this).addClass("collapsed"),$(this).removeClass("bottom-border")}),$(ll+" .accordion-body").each(function(){$(this).collapse("hide")})}),$(".practice-grading-header").on("click",function(){$(this).toggleClass("open"),$(this).hasClass("open")?$(".practice-description").show():$(".practice-description").hide()})};dl.on("gradingtab:unitTestsProgress",function(t){t.stillRunning=!0,FN(t)});dl.on("gradingtab:unitTestsComplete",function(t){dl.trigger("editor:sr:statusUpdate","Completed unit tests"),FN(t),$("div.show-graded").removeClass("hide-bar"),$("div.show-graded").addClass("flex"),window.applyAIHintButtonDisabledState&&window.applyAIHintButtonDisabledState()});MN.exports=pT});var hT=R((e1e,UN)=>{"use strict";var Tre=Rr(),Cre=Tre.Uploads.UPLOADS_PROXY_BASE_URL,Ere="#result-url";function Ch(t){this.editor=t,this.setup()}Ch.prototype.setup=function(){var t=this,e=null,r=null,n=null,i=!1,a=320,s=0,o=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext,c=0;$("#file-select").on("click",function(l){l.preventDefault(),$(".microphone").hide(),$(".camera").hide(),$(".mic-result").hide(),$("#file-upload").trigger("click")}),$("#zip-select").on("click",function(l){l.preventDefault(),$(".microphone").hide(),$(".camera").hide(),$(".mic-result").hide(),$("#zip-upload").trigger("click")}),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&($("#webcam").removeClass("hidden"),window.MediaRecorder&&($("#microphone").removeClass("hidden"),$("#browser-warning").addClass("hidden")),$("#webcam").on("click",function(l){l.preventDefault(),$(".microphone").hide(),$(".mic-result").hide(),$(".camera").show(),e=document.getElementById("video"),r=document.getElementById("video-still-canvas"),n=document.getElementById("webcam-still"),n.addEventListener("click",function(g){f(),g.preventDefault()},!1),e.addEventListener("canplay",function(g){i||(s=e.videoHeight/(e.videoWidth/a),isNaN(s)&&(s=a/(4/3)),e.setAttribute("width",a),e.setAttribute("height",s),r.setAttribute("width",a),r.setAttribute("height",s),i=!0)},!1);function f(){n.disabled=!0,n.innerHTML="...";var g=r.getContext("2d");if(a&&s){r.width=a,r.height=s,e.pause(),g.filter=t.getCurrentImageFilterCSS(),g.drawImage(e,0,0,a,s);for(var m=r.toDataURL(),y=atob(m.split(",")[1]),x=[],I=0;I<y.length;I++)x.push(y.charCodeAt(I));var A=new File([new Uint8Array(x)],"webcam.png",{type:"image/png"}),F=new FormData;F.append("file",A),Wv(F,function(){$(".camera").hide(),n.innerHTML='<span class="icon icon-camera"></span> Take photo',n.disabled=!1})}}navigator.mediaDevices.getUserMedia({video:!0}).then(function(g){e.srcObject=g,e.play()}).catch(function(g){console.error("The following getUserMedia error occured: ",g)})}),$("#microphone").on("click",function(l){l.preventDefault(),$(".camera").hide(),$(".mic-result").hide(),$(".microphone").show();var f=$("#mic-record");if(!c&&o)try{c=new o}catch{console.log("Too many AudioContexts are in use. Please close all browser windows and retry."),c=0}function g(m){if(c){let de=function(){var N=F.width,H=F.height;requestAnimationFrame(de),x.getByteTimeDomainData(A),X.fillStyle="rgb(200, 200, 200)",X.fillRect(0,0,N,H),X.lineWidth=2,X.strokeStyle="rgb(0, 0, 0)",X.beginPath();for(var z=N*1/I,Y=0,G=0;G<I;G++){var ie=A[G]/128,fe=ie*H/2;G===0?X.moveTo(Y,fe):X.lineTo(Y,fe),Y+=z}X.lineTo(F.width,F.height/2),X.stroke()};var y=c.createMediaStreamSource(m),x=c.createAnalyser();x.fftSize=2048;var I=x.frequencyBinCount,A=new Uint8Array(I);y.connect(x);var F=document.querySelector("#mic-analyser"),X=F.getContext("2d");de()}else $("#mic-analyser").hide()}navigator.mediaDevices.getUserMedia({audio:!0}).then(function(m){g(m);var y=new MediaRecorder(m),x=[];f.on("click",function(I){y.state!="recording"?(y.start(),f.addClass("btn-main-red"),f.removeClass("btn-main-blue"),f.html('<span class="icon icon-stop"></span> Stop')):(y.stop(),f.addClass("btn-main-blue"),f.removeClass("btn-main-red"),f.html("Uploading..."),f.attr("disabled",!0))}),y.ondataavailable=function(I){x.push(I.data)},y.onstop=function(I){var A=new File(x,"microphone.mp3",{type:"audio/mpeg"});x=[];var F=new FormData;F.append("file",A),Wv(F,function(){$(".microphone").hide(),f.html('<span class="icon icon-circle"></span> Record'),f.attr("disabled",!1),$(".mic-result").show();var X=$("#audio-result"),de=window.URL.createObjectURL(A);X.attr("src",de)},"/core/ajax/upload_asset")}}).catch(function(m){console.log("The following getUserMedia error occured: "+m)})})),$("body").on("change","#file-upload",xre),$("body").on("change","#zip-upload",Are),$(Ere).on("click",function(){$(this).trigger("select"),document.execCommand("copy"),window.toastr.success("Copied the URL")}),this.setupImageFilters()};Ch.prototype.setupImageFilters=function(){var t=this;t.filters={grayscale:0,sepia:0,invert:0,contrast:100,brightness:100,saturate:100,"hue-rotate":0},$("#filter-toggle").on("click",function(){$("#filters-container").toggleClass("hidden")}),$(".slider").each(function(){$(this).slider({orientation:"horizontal",range:"min",min:$(this).data("min-value"),max:$(this).data("max-value"),value:$(this).data("start-value"),change:function(e,r){t.updateFilter($(this).data("filter-name"),r.value)},slide:function(e,r){t.updateFilter($(this).data("filter-name"),r.value)}})})};Ch.prototype.updateFilter=function(t,e){var r=this;r.filters.hasOwnProperty(t)&&(r.filters[t]=e),$("#video").css("filter",r.getCurrentImageFilterCSS())};Ch.prototype.getCurrentImageFilterCSS=function(){var t=this,e="";return Object.keys(t.filters).forEach(function(r){var n="%";r=="hue-rotate"&&(n="deg"),e+=r+"("+t.filters[r]+n+") "}),e};function xre(){var t=new FormData($("#js-upload-form")[0]);Wv(t)}function Are(){var t=new FormData($("#js-zip-upload-form")[0]);Wv(t,function(){},"/core/ajax/upload_zip_to_code")}function Wv(t,e,r){r=r!==void 0?r:"/core/ajax/upload_image",$.ajax({url:r,type:"POST",data:t,processData:!1,dataType:"JSON",contentType:!1,statusCode:{400:function(n){var i="Failed to upload image.";try{var a=n.responseJSON||JSON.parse(n.responseText);a&&a.msg&&(i=a.msg)}catch{n.responseText&&n.responseText.length<500&&(i=n.responseText.trim())}window.toastr.error(i)},500:function(n){var i="Failed to upload image.";try{var a=n.responseJSON||JSON.parse(n.responseText);a&&a.msg&&(i=a.msg)}catch{n.responseText&&n.responseText.length<500&&(i=n.responseText.trim())}window.toastr.error(i)}}}).then(function(n){if(!n||n.status!=="ok"){var i=n&&n.msg?n.msg:"Failed to upload image.";window.toastr.error(i);return}var a=Cre+n.url;$("#img-thumbnail").attr("src",a),$(".upload-url-container").show(),$("#result-url").val(a),e&&e(n)}).fail(function(n){if(!(n.status===400||n.status===500)){var i="Failed to upload image.";if(n&&n.responseJSON&&n.responseJSON.msg)i=n.responseJSON.msg;else if(n&&n.responseText)try{var a=JSON.parse(n.responseText);a&&a.msg&&(i=a.msg)}catch{n.responseText.length<500&&n.responseText.trim().length>0&&(i=n.responseText.trim())}window.toastr.error(i)}})}UN.exports=Ch});var gT=R((t1e,BN)=>{"use strict";var kre=Pi().writeQRCode;function $N(t){this.editor=t,this.setup()}$N.prototype.setup=function(){if($("#html-qr-code").length){var t=$("#html-qr-code").data("url");kre(t,"#html-qr-code")}};BN.exports=$N});var mT=R((r1e,qN)=>{"use strict";var Ire=Tn(),Dre=hn();function Kv(){var t=this;t.running=!1,t.__graphics__=new window.CodeHSGraphics({canvas:$(".codehs-editor-canvas")})}Ire.inherits(Kv,Dre);Kv.prototype.run=function(t,e){var r=this;return r.stop(),r.running=!0,r.helperCode&&(t=r.helperCode+t),r.__graphics__.runCode(t,e)};Kv.prototype.stop=function(){var t=this;t.__graphics__.removeAll(),t.__graphics__.fullReset(),t.running=!1};qN.exports=Kv});var zN=R((i1e,GN)=>{"use strict";var Ore=Tn(),Pre=hn(),jN="html-destination",HN="#html";function Xv(t){var e=this;e.running=!1,e.editor=t}Ore.inherits(Xv,Pre);Xv.prototype.run=function(t){var e=this;e.running=!0;var r=$("<iframe>");r.addClass(jN),$(HN).html(r);var n=r.get(0).contentDocument,i,a=Object.keys(t).length===1&&!e.editor.isOwnPage();if(window.HOC_LOGGED_OUT_PLAYLIST_EDITOR||a){if(n.open(),n.write(e.editor.getCode()),n.close(),Object.keys(t).length>1){var s=window.location.pathname.replace("playlist","html"),o=s.substring(0,s.lastIndexOf("/"));r.on("load",function(){var de=r.contents(),N,H;de.find("link").each(function(){H=$(this),N=H.attr("href").trim(),!N.startsWith("http://")&&!N.startsWith("https://")&&!N.startsWith("//")&&(N.startsWith("/")||(N="/"+N),H.attr("href",o+N))})})}}else if(e.editor.isOwnPage())e.editor.studentAssignmentID?i="/editor/html/"+e.editor.itemID+"/"+e.editor.codeUserID+"/"+e.editor.studentAssignmentID+"/"+e.editor.mainClass:i="/editor/html/"+e.editor.itemID+"/"+e.editor.codeUserID+"/"+e.editor.mainClass,r.attr("src",i);else{var c,l,f;r.on("load",function(){f=r.get(0).contentDocument,l=r.contents(),l.find("a").on("click",function(Y){if(c=$(this).attr("href").trim(),m.hasOwnProperty(c))Y.preventDefault(),r.attr("src",m[c]);else return!0});var de,N;l.find("script").each(function(){de=$(this).attr("src").trim(),m.hasOwnProperty(de)&&(N=f.createElement("script"),N.type="text/javascript",N.src=m[de],f.body.appendChild(N))});var H,z;l.find("link").each(function(){z=$(this),H=z.attr("href").trim(),m.hasOwnProperty(H)&&z.attr("href",m[H])})}),e.editor.currentCode[e.editor.activeFile]=e.editor.getCode();var g,m={},y=e.editor.currentCode,x=!0,I=/[^.]*$/,A,F;Object.keys(y).forEach(function(de){g=y[de],A=de.match(I)[0].toLowerCase(),F=X(A),F||(x=!1),m[de]=URL.createObjectURL(new Blob([g],{type:F}))}),x?i=m[e.editor.mainClass]:i="/editor/html/"+e.editor.itemID+"/"+e.editor.codeUserID+"/"+e.editor.mainClass,r.attr("src",i)}e.running=!1;function X(de){switch(de){case"html":return"text/html";case"css":return"text/css";case"js":return"text/javascript"}}};Xv.prototype.stop=function(){var t=this,e=$("<iframe>");e.addClass(jN),$(HN).html(e),t.running=!1};GN.exports=Xv});var WN=R((n1e,VN)=>{"use strict";var Rre=Tn(),Lre=hn();function Yv(t){var e=this;e.running=!1,e.editor=t,e.__console__=new window.CodeHSConsole}Rre.inherits(Yv,Lre);Yv.prototype.run=function(t,e){var r=this;return r.stop(),r.running=!0,r.__console__.runCode(t,e)};Yv.prototype.stop=function(){var t=this;t.running=!1};VN.exports=Yv});var YN=R((a1e,XN)=>{"use strict";var Mr=zb(),Nre=Rc(),vT=Lc(),KN=QV();function Wt(t){this.karelRunner=t,this.usingSuperKarel=this.karelRunner.usingSuperKarel(),this.usingUltraKarel=this.karelRunner.usingUltraKarel()}Wt.checkCommandArgs=function(t,e){if(t!=Nre.KAREL_ARGUMENT_SECRET)throw new Error("You cannot have anything between the parentheses for "+e+".")};Wt.prototype.functionCall=function(t){this.karelRunner.pushCommand({c:Mr.FUNCTION,l:t})};Wt.prototype.move=function(t,e){Wt.checkCommandArgs(t,"move command"),this.getWorld().canMove()?(this.getWorld().move(),this.pushCommand({c:Mr.MOVE,l:e})):this.pushCommand({c:Mr.ERROR_CRASH_INTO_WALL,l:e})};Wt.prototype.putBall=function(t,e){Wt.checkCommandArgs(t,"putBall command"),this.getWorld().putBall(),this.pushCommand({c:Mr.PUT_BEEPER,l:e})};Wt.prototype.bark=function(t,e){this.pushCommand({c:Mr.BARK,l:e})};Wt.prototype.takeBall=function(t,e){Wt.checkCommandArgs(t,"takeBall command"),this.getWorld().ballsPresent()?(this.getWorld().takeBall(),this.pushCommand({c:Mr.PICK_BEEPER,l:e})):this.pushCommand({c:Mr.ERROR_NO_BEEPERS,l:e})};Wt.prototype.turnLeft=function(t,e){Wt.checkCommandArgs(t,"turnLeft command"),this.getWorld().turnLeft(),this.pushCommand({c:Mr.TURN_LEFT,l:e})};Wt.prototype.frontIsClear=function(t,e){return Wt.checkCommandArgs(t,"frontIsClear condition"),this.validateCondition()?(this.pushCommand({c:Mr.FRONT_IS_CLEAR,l:e}),this.getWorld().frontIsClear()):!1};Wt.prototype.frontIsBlocked=function(t,e){return Wt.checkCommandArgs(t,"frontIsBlocked condition"),this.validateCondition()?(this.pushCommand({c:Mr.FRONT_IS_CLEAR,l:e}),!this.getWorld().frontIsClear()):!1};Wt.prototype.leftIsClear=function(t,e){return Wt.checkCommandArgs(t,"leftIsClear condition"),this.validateCondition()?(this.pushCommand({c:Mr.LEFT_IS_CLEAR,l:e}),this.getWorld().leftIsClear()):!1};Wt.prototype.leftIsBlocked=function(t,e){return Wt.checkCommandArgs(t,"leftIsClear condition"),this.validateCondition()?(this.pushCommand({c:Mr.LEFT_IS_CLEAR,l:e}),!this.getWorld().leftIsClear()):!1};Wt.prototype.rightIsClear=function(t,e){return Wt.checkCommandArgs(t,"rightIsClear condition"),this.validateCondition()?(this.pushCommand({c:Mr.RIGHT_IS_CLEAR,l:e}),this.getWorld().rightIsClear()):!1};Wt.prototype.rightIsBlocked=function(t,e){return Wt.checkCommandArgs(t,"rightIsBlocked condition"),this.validateCondition()?(this.pushCommand({c:Mr.RIGHT_IS_CLEAR,l:e}),!this.getWorld().rightIsClear()):!1};Wt.prototype.ballsPresent=function(t,e){return Wt.checkCommandArgs(t,"ballsPresent condition"),this.validateCondition()?(this.pushCommand({c:Mr.BALLS_PRESENT,l:e}),this.getWorld().ballsPresent()):!1};Wt.prototype.noBallsPresent=function(t,e){return Wt.checkCommandArgs(t,"noBallsPresent condition"),this.validateCondition()?(this.pushCommand({c:Mr.BALLS_PRESENT,l:e}),!this.getWorld().ballsPresent()):!1};Wt.prototype.facingNorth=function(t,e){return Wt.checkCommandArgs(t,"facingNorth condition"),this.validateCondition()?(this.pushCommand({c:Mr.FACING_NORTH,l:e}),this.getWorld().facingNorth()):!1};Wt.prototype.notFacingNorth=function(t,e){return Wt.checkCommandArgs(t,"notFacingNorth condition"),this.validateCondition()?(this.pushCommand({c:Mr.FACING_NORTH,l:e}),!this.getWorld().facingNorth()):!1};Wt.prototype.facingSouth=function(t,e){return Wt.checkCommandArgs(t,"facingSouth condition"),this.validateCondition()?(this.pushCommand({c:Mr.FACING_SOUTH,l:e}),this.getWorld().facingSouth()):!1};Wt.prototype.notFacingSouth=function(t,e){return Wt.checkCommandArgs(t,"notFacingSouth condition"),this.validateCondition()?(this.pushCommand({c:Mr.FACING_SOUTH,l:e}),!this.getWorld().facingSouth()):!1};Wt.prototype.facingEast=function(t,e){return Wt.checkCommandArgs(t,"facingEast condition"),this.validateCondition()?(this.pushCommand({c:Mr.FACING_EAST,l:e}),this.getWorld().facingEast()):!1};Wt.prototype.notFacingEast=function(t,e){return Wt.checkCommandArgs(t,"notFacingEast condition"),this.validateCondition()?(this.pushCommand({c:Mr.FACING_EAST,l:e}),!this.getWorld().facingEast()):!1};Wt.prototype.facingWest=function(t,e){return Wt.checkCommandArgs(t,"facingWest condition"),this.validateCondition()?(this.pushCommand({c:Mr.FACING_WEST,l:e}),this.getWorld().facingWest()):!1};Wt.prototype.notFacingWest=function(t,e){return Wt.checkCommandArgs(t,"notFacingWest condition"),this.validateCondition()?(this.pushCommand({c:Mr.FACING_WEST,l:e}),!this.getWorld().facingWest()):!1};Wt.prototype.turnRight=function(t,e){Wt.checkCommandArgs(t,"turnRight command"),this.getWorld().turnRight(),this.pushCommand({c:Mr.TURN_RIGHT,l:e})};Wt.prototype.turnAround=function(t,e){Wt.checkCommandArgs(t,"turnAround command"),this.getWorld().turnAround(),this.pushCommand({c:Mr.TURN_AROUND,l:e})};Wt.prototype.randomInt=function(t,e){return KN.nextInt(e)};Wt.prototype.colorIs=function(t,e){return this.pushCommand({c:Mr.COLOR_IS,l:1}),this.getWorld().colorIs(t)};Wt.prototype.colorIsNot=function(t,e){return this.pushCommand({c:Mr.COLOR_IS,l:1}),!this.getWorld().colorIs(t)};Wt.prototype.randomChance=function(t,e){return typeof e!="number"?(vT.libraryError("You must pass a number to randomChance()."),!1):e>1?(vT.libraryError("You must pass a number between 0 and 1 to randomChance()."),!1):typeof t!="number"?(vT.libraryError("You have an error in your randomChance() call."),!1):(this.pushCommand({c:Mr.RANDOM_CHANCE,l:t}),KN.nextBoolean(e))};Wt.prototype.paint=function(t,e,r){this.getWorld().paint(t),this.pushCommand({c:Mr.PAINT,color:t,l:r})};XN.exports=Wt});var ZN=R((s1e,QN)=>{"use strict";var yT=Rc(),Kd=Ri(),fl=Lc();function JN(t){this.code=t.code||"",this.checkMissingParens=t.checkMissingParens||!1,this.checkUndefinedCondition=t.checkUndefinedCondition||!1,this.checkCapitalFunctionDeclaration=t.checkInvalidFunctionDeclaration||!1,this.checkHasFunctionRedefinition=t.checkHasFunctionRedefinition||!1,this.checkHasSemicolonInFunctionDef=t.checkHasSemicolonInFunctionDef||!1,this.checkMisspelledFunction=t.checkMisspelledFunction||!1,this.checkValidCommands=t.checkValidCommands||!1}var Fre=function(t){var e=yT.getBuiltIns(!0),r=new RegExp("("+e.join("|")+")(?!\\s*\\(\\))(\\)|\\s+)",""),n=t.match(r);if(n!=null){var i='Missing <span class="code">()</span> after <span class="code">'+n[1]+'</span><br/><br/>You should write <span class="code">'+n[1]+"()</span>";return fl.show({message:i,lineNumber:"",progtype:"karel"}),!0}return!1},Mre=function(t){var e=yT.getConditions(),r=!1,n;if(t.indexOf("randomChance")==-1&&t.indexOf("colorIs")==-1){var i=/while\s*\((.*)\)/gi,a=i.exec(t),s;a!=null&&(s=a[1].replace("()","").trim(),e.indexOf(s)==-1&&(n="You can't write: <span class='code'>"+a[0]+"</span><br/> You need to choose a valid Karel condition to go inside the while loop. Make sure your spelling and capitalization is correct.<br/><br/>These are the choices you have:<pre class='prettyprint'>"+e.join("()<br/>")+"()</pre>",r=!0));var o=/if\s*\((.*)\)/gi,c=o.exec(t);return c!=null&&(s=c[1].replace("()","").trim(),e.indexOf(s)==-1&&(n=`You can't write: <span class="code">`+c[0]+'</span><br/> You need to choose a valid Karel condition to go inside the if statement. Make sure your spelling and capitalization is correct.<br/><br/>These are the choices you have:<pre class="prettyprint">'+e.join("()<br/>")+"()</pre>",r=!0)),r&&fl.show({message:n,lineNumber:"",progtype:"karel"}),r}},Ure=function(t){for(var e=Kd.generateCodeArray(t),r=!1,n="",i="",a=new RegExp(/^\s*Function *.+\s*\(\)/m),s,o=0;o<e.length;o++)if(a.exec(e[o])){n='The function keyword must be in all lowercase. Make sure your function declaration follows the format <br/> <span class="code">function functionName(){}</span><br/>',r=!0,i=String(o+1);break}return r&&fl.show({message:n,lineNumber:i,progtype:"karel"}),r},$re=function(t){for(var e=Kd.generateCodeArray(t),r=!1,n="",i="",a=/^function\s+([\w\$]+)\s*\(/gim,s={},o,c=0;c<e.length;c++)if(o=a.exec(e[c]),o){var l=o[1];if(l in s){n=`You've defined the function <span class="code">`+l+"</span> twice, on lines "+(c+1)+" and "+s[l]+".<br/>Remove one of the two definitions.",i=String(c+1),r=!0;break}else s[l]=c+1}return r&&fl.show({message:n,lineNumber:i,progtype:"karel"}),r},Bre=function(t){for(var e=Kd.generateCodeArray(t),r=!1,n="",i="",a=/^function\s.+\s*\(\s*\);/gim,s,o=0;o<e.length;o++)s=a.exec(e[o]),s&&(n="You have a semicolon where you define <code>"+s[0]+`</code>. 
When creating a function, you don't need a semicolon
`,i=String(o+1),r=!0);return r&&fl.show({message:n,lineNumber:i,progtype:"karel"}),r},qre=function(t){for(var e=Kd.generateCodeArray(t),r=!1,n="",i="",a=/^\w+(?= [\$\w]+\s*\([\$\w\s,]*\)\s*{?)/gim,s,o=0;o<e.length;o++)if(s=a.exec(e[o]),s&&s[0]!=="function"){n="You misspelled <code> function </code> in your function declaration.",i=String(o+1),r=!0;break}return r&&fl.show({message:n,lineNumber:i,progtype:"karel"}),r};function jre(t){var e,r,n,i,a,s;e=!1,r=-1,n="",a=Kd.generateCodeArray(t),s=["You need a semicolon at the end."],a.forEach(function(c,l,f){f[l]+=`
`});for(var o=0;o<a.length;o++)if(i=yT.testCommandStyle(a[o]),!i.isValid&&!_.contains(s,i.reason)){e=!0,r=o+1,n=i.reason;break}return e&&fl.show({message:n,lineNumber:r,progtype:"karel"}),e}JN.prototype.hasErrors=function(){var t=Kd.removeComments(this.code);return!!(this.checkMissingParens&&Fre(t)||this.checkUndefinedCondition&&Mre(t)||this.checkCapitalFunctionDeclaration&&Ure(t)||this.checkHasFunctionRedefinition&&$re(t)||this.checkHasSemicolonInFunctionDef&&Bre(t)||this.checkMisspelledFunction&&qre(t)||this.checkValidCommands&&jre(t))};QN.exports=JN});var rF=R((o1e,tF)=>{"use strict";var Hre=Rr(),bT=Ri(),eF=Rc(),Gre=ZN();function zre(t,e){for(var r=eF.getBuiltIns(t,e),n=`
`,i=0;i<r.length;i++){var a=r[i];n+="function "+a+`(){
	return __karelRunner__.builtIns.`+a+`.apply(__karelRunner__, arguments);
}
`}return n}function Vre(t){for(var e=["document","window","top","parent","eval","XMLHttpRequest","fetch","import","require"],r=bT.generateCodeArray(t),n=0;n<r.length;n++)for(var i=r[n],a=0;a<e.length;a++){var s=e[a],o=new RegExp("\\b"+s+"\\b");if(o.test(i))return{keyword:s,lineNumber:n+1}}return null}function Wre(t,e,r,n){t=bT.removeComments(t);var i=Vre(t),a=i!==null?i.keyword+" is not available in Karel. ":"";if(i!==null&&i.keyword==="fetch"&&(a+="If you meant to name a function 'fetch', please use a different name."),i)return{code:t,success:!1,message:a,lineNumber:i.lineNumber};var s=new Gre({code:t,checkMissingParens:!0,checkUndefinedCondition:!0,checkInvalidFunctionDeclaration:!0,checkHasFunctionRedefinition:!0,checkHasSemicolonInFunctionDef:!0,checkMisspelledFunction:!0,checkValidCommands:n!==Hre.ProgrammingLanguage.JAVA});if(s.hasErrors())return{code:t,success:!1};t=bT.makeSafeForInfiniteLoops(t),t=eF.preprocessWithLineNums({code:t,usingSuperKarel:e,usingUltraKarel:r});var o=zre(e,r),c="";return c+=o,c+=t,c+=`

if(typeof start == 'function') {start();} `,t=c,{code:t,success:!0}}tF.exports={run:Wre}});var aF=R((u1e,nF)=>{"use strict";var iF=Rr(),Kre=zb(),pl=Rc(),Jv="#tester-message";function Eh(t,e){this.editor=t,this.karelRunner=e}Eh.prototype.worldsAreEquivalent=function(t,e){var r=window.pageSpecific.preferredLang,n,i;switch(r){case"es":n="<strong>\xA1Gran trabajo!</strong> \xA1Lo lograste!";break;default:n="<strong>Nice job!</strong> You got it!"}this.editor.getInfo().itemType==iF.ItemType.EXAMPLE&&(n+=' <a href="#" id="inline-next-button">Continue.</a>');var a={success:!0,message:n};if((t.rows!=e.rows||t.cols!=e.cols)&&(a.success=!1,a.message="<strong>Oops!</strong> Something's wrong here."),t.karelDir!=e.karelDir&&e.karelDir!=null&&e.karelDir!=-1){switch(r){case"es":n="<strong>\xA1Ups!</strong> Karel deber\xEDa estar mirando hacia el "+pl.dirName(e.karelDir)+"pero est\xE1 mirando hacia el "+pl.dirName(t.karelDir);break;default:n="<strong>Oops!</strong> Karel should be facing "+pl.dirName(e.karelDir)+" but is facing "+pl.dirName(t.karelDir)}a.success=!1,a.message=n}if(t.karelRow!=e.karelRow&&e.karelRow!=null){a.success=!1;var s=parseInt(t.karelRow)+1,o=parseInt(e.karelRow)+1;switch(r){case"es":i=["<strong>Ups!</strong> ","Karel deber\xEDa estar en la fila ",o.toString()," pero est\xE1 en la fila ",s.toString()];break;default:i=["<strong>Oops!</strong> ","Karel should be on row ",o.toString()," but is on row ",s.toString()]}a.message=i.join("")}if(t.karelCol!=e.karelCol&&e.karelCol!=null){a.success=!1;var c=parseInt(t.karelCol)+1,l=parseInt(e.karelCol)+1;switch(r){case"es":i=["<strong>Ups!</strong> ","Karel deber\xEDa estar en la columna ",l.toString()," pero est\xE1 en la columna ",c.toString()];break;default:i=["<strong>Oops!</strong> ","Karel should be on column ",l.toString()," but is on column ",c.toString()]}a.message=i.join("")}for(var f,g,m=0;m<t.rows;m++)for(var y=0;y<t.cols;y++){var x=t.grid.get(m,y),I=e.grid.get(m,y);if(x!=I){a.success=!1;var A=x==1?"is":"are",F=I==1?"":"s";switch(f=m+1,g=y+1,r){case"es":i="<strong>Ups!</strong> Deber\xEDa haber "+I+" pelota"+F+" en ("+f+", "+g+") pero all\xED hay "+x;break;default:i="<strong>Oops!</strong> There should be "+I+" ball"+F+" at ("+f+", "+g+") but there "+A+" "+x}a.message=i}}if(this.editor.typeTester.isUltraKarel()){var X=iF.KarelWorld.RANDOM_COLOR;for(m=0;m<t.rows;m++)for(y=0;y<t.cols;y++){var de=t.colors.get(m,y),N=e.colors.get(m,y),H="#ffffff";de=String(de),N=String(N),de=de?de.toLowerCase():H,N=N?N.toLowerCase():H;var z=Object.keys(pl.KAREL_COLOR_STRINGS_TO_HEX);z.indexOf(de)!==-1&&(de=pl.KAREL_COLOR_STRINGS_TO_HEX[de].toLowerCase()),z.indexOf(N)!==-1&&(N=pl.KAREL_COLOR_STRINGS_TO_HEX[N].toLowerCase()),(N===X&&de==H||de!==N&&N!==X)&&(a.success=!1,f=m+1,g=y+1,a.message="<strong>Oops!</strong> The color at ("+f+", "+g+") is not the proper color.")}}return a};Eh.prototype.hasError=function(){for(var t=this.karelRunner.getCommands(),e=0;e<t.length;e++)if(t[e].c<=Kre.ERROR)return!0;return!1};Eh.prototype.testSolution=function(t){var e=t.autograding,r=this.karelRunner.getCurrentSolutionWorld(),n=this.karelRunner.getWorld();if(r!=null){var i=this.worldsAreEquivalent(n,r);return e||($(Jv).html(i.message),i.success?($(Jv).removeClass("gone").removeClass("alert-danger").addClass("alert-info"),this.editor.turnSubmitButtonGreen(),this.editor.karelCelebration&&this.karelRunner.celebrate(this.editor.karelCelebration)):$(Jv).removeClass("gone").removeClass("alert-info").addClass("alert-danger"),this.editor.setupSubmitButton(),this.editor.setupNextButton()),i.success=this.hasError()?!1:i.success,i}};Eh.prototype.hideMessage=function(){$(Jv).addClass("gone")};nF.exports=Eh});var _T=R((c1e,dF)=>{"use strict";var sF=Rr(),uF=Ri(),ia=zb(),Qv=rp(),Xre=YN(),Yre=rF(),cF=Lc(),Ah=im(),Jre=ui(),Qre=Tn(),Zre=hn(),xh=".sidebar-canvas",lF=0,oF=100;function sr(t){this.editor=t,this.isSuperKarel=this.editor.progTypeString=="superkarel"||this.editor.progTypeString=="java-superkarel",this.isUltraKarel=this.editor.progTypeString=="ultrakarel"||this.editor.progTypeString=="java-ultrakarel",this.onBreakpoint=!1,this.justSeenBreakpoint=-1,this.worlds=this.editor.worlds.concat(this.editor.user_worlds),this.commandIndex=0,this.inGradingMode=!1,this.paused=!1,this.firstDraw=!0,this.curWorld,this.commands=[],this.solutions=[],this.builtIns=new Xre(this),this.delayTime=200,this.SPEED=t.karelSliderSpeed,this.tester=new sr.Tester(t,this)}Qre.inherits(sr,Zre);sr.Tester=aF();sr.prototype.init=function(t){if(t=t||{},$(".codehs-editor-canvas").length===0){this._publish("updateCanvas",{canvasId:-1});return}this.headless=t.headless||!1,this.__graphics__=this.headless?void 0:new Ah.CodeHSGraphics({canvas:$(".codehs-editor-canvas")}),this.headless||Ah.Text.giveDefaultContext(this.__graphics__),this.loadWorld(this.worlds[0]),this.setSpeed(this.SPEED/100),this.setupEvents(),this._publish("updateCanvas");var e=".ex-result-world";$(e).each(function(){Qv.quickDraw($(this),$(this).attr("data-world"),360,!0)})};sr.prototype.setupEvents=function(){var t=this;$("#speed_slider").slider({slide:function(e,r){t.setSpeed(r.value/oF),r.value==oF?(t.editor.clearHighlightedLines(),t.editor.highlight=!1):t.editor.highlight=!0},stop:function(e,r){Jre.send({method:"set_karel_slider_speed",app:"editor",data:{speed:r.value}})},value:this.SPEED}),$("#karelworld").on("change",function(){var e=$(this).find(":selected");if(e.hasClass("edit-worlds"))window.location.href=$(this).val();else{var r=e.attr("data-world"),n=t.loadWorldById(r);t.updateSidebarCanvas(n)}}),setTimeout(function(){var e=$("#karelworld").find(":selected").attr("data-world"),r=t.loadWorldById(e);t.updateSidebarCanvas(r)},500)};sr.prototype.updateSidebarCanvas=function(t){var e=this,r="<canvas ";r+='class="sidebar-canvas"',r+='rel="'+$(xh).attr("rel")+'"',r+='data-placement="'+$(xh).attr("data-placement")+'"',r+='data-trigger="'+$(xh).attr("data-trigger")+'"',r+='data-content="'+$(xh).attr("data-content")+'"',r+="></canvas>",$(xh).replaceWith(r),e._publish("updateCanvas",{canvasId:t})};sr.prototype.usingSuperKarel=function(){return this.isSuperKarel};sr.prototype.usingUltraKarel=function(){return this.isUltraKarel};sr.prototype.pushCommand=function(t){this.commands.push(t)};sr.prototype.setup=function(){this.headless||(this.curWorld.draw(),this.__graphics__.redraw())};sr.prototype.reset=function(){this.commands=[],this.commandIndex=0,this.onBreakpoint=!1,this.justSeenBreakpoint=-1,this.headless||(this.curWorld.reset(),this.__graphics__.globalTimer=!1,this.__graphics__.stopTimer("celebration"),this.__graphics__.redraw()),this.tester.hideMessage()};sr.prototype.loadWorld=function(t){var e=this,r=t;this.tester.hideMessage(),this.headless||(this.__graphics__.globalTimer=!1,this.__graphics__.setSize(400,400));var n;this.editor.customKarelBall&&(n={karelBallSettings:this.editor.customKarelBall}),this.curWorld=new Qv(r,this.__graphics__,n),this.curWorld=new Qv(r,this.__graphics__),this.setup(),this.reset(),this.firstDraw&&(setTimeout(function(){e.reset()},500),this.firstDraw=!1)};sr.prototype.loadWorldById=function(t){for(var e=0;e<this.worlds.length;e++){var r=this.worlds[e];if(r.id==t)return this.loadWorld(r),e}return-1};sr.prototype.animateFromIndex=function(t){var e=this;this.commandIndex=t,setTimeout(function(){e.runOneStep()},this.delayTime),this.__graphics__.redraw()};sr.prototype.animate=function(){this.animateFromIndex(this.commandIndex)};sr.prototype.restart=function(){this.unpause(),this.delayTime==lF&&(this.editor.clearHighlightedLines(),this.editor.highlight=!1),this.animateFromIndex(this.commandIndex)};sr.prototype.pause=function(){this.paused=!0,this.editor.highlight=!0,this.editor.setPauseButton(this.paused)};sr.prototype.unpause=function(){this.paused=!1,this.delayTime==lF&&(this.editor.clearHighlightedLines(),this.editor.highlight=!1),this.editor.setPauseButton(this.paused)};sr.prototype.drawError=function(t){var e=this,r=t.c,n;r==ia.ERROR_NO_BEEPERS?n="No tennis balls to pick up!":r==ia.ERROR_CRASH_INTO_WALL?n="Karel Crashed into a Wall! <br>(Do you have an extra move() command?)":r==ia.INFINITE_LOOP?n="Karel is in an infinite loop!":n="Karel Error!",cF.show({editor:this.editor,message:n,lineNumber:t.l,langType:"javascript",progtype:e.editor.progtype,log:!1})};sr.prototype.commandListGenerated=function(){return this.commands.length>0};sr.prototype.supportsBreakpoints=function(){return!0};sr.prototype.testBreakpoint=function(t){var e=this;for(var r in e.editor.breakpoints)if(e.editor.breakpoints.hasOwnProperty(r)&&e.editor.breakpoints[r].hasOwnProperty(t))if(e.onBreakpoint)e.onBreakpoint=!1;else return e.editor.breakpoints[r][t].justSeen=!0,e.editor.breakpoints[r][t].timesHit++,e.justSeenBreakpoint=t,e.pause(),e.editor.highlightLine(t),e.onBreakpoint=!0,!0;return!1};sr.prototype.runOneStep=function(){var t=this,e=this.commands[this.commandIndex];if(!(typeof e>"u")&&e.hasOwnProperty("c")){var r=e.c,n=e.l;if(t.editor.highlightLine(n),r==ia.FOR_LOOP&&e.hasOwnProperty("s")&&this.editor.showForLoopVars(e.s),!this.testBreakpoint(n)){if(r<0){this.drawError(e),this.__graphics__.redraw();return}if(this.commandIndex<this.commands.length-1&&(this.paused||setTimeout(function(){t.runOneStep()},this.delayTime)),this.curWorld.animate(e),this.paused&&t.editor.goToLine(e.l),this.commandIndex++,this.commandIndex>=this.commands.length){var i=this.tester.testSolution({autograding:!1});this.editor.finishedProgram(i);return}this.__graphics__.redraw()}}};sr.prototype.reverseOneStep=function(){var t=this;t.commandIndex-=t.commandIndex>0;var e=t.commands[t.commandIndex];if(!(typeof e>"u")&&e.hasOwnProperty("c")){var r=e.c,n=e.l;if(t.editor.highlightLine(n),r===ia.FOR_LOOP&&e.hasOwnProperty("s")&&t.editor.showForLoopVars(e.s),r<0){t.drawError(e),t.__graphics__.redraw();return}t.curWorld.animateBackwards(e),t.paused&&t.editor.goToLine(e.l),t.__graphics__.redraw()}};sr.prototype.stepForward=function(t){this.commandListGenerated()||(this.generateCommandList(t),this.curWorld.reset()),this.pause(),this.runOneStep()};sr.prototype.stepBackward=function(t){this.commandListGenerated()||(this.generateCommandList(t),this.curWorld.reset()),this.pause(),this.reverseOneStep()};sr.prototype.setSpeed=function(t){var e=2,r=800;t=e+(r-e)*t,this.delayTime=r-t};sr.prototype.generateCommandList=function(t){var e=Yre.run(t,this.isSuperKarel,this.isUltraKarel,this.editor.getProgrammingLanguage());return e.success?(this.reset(),e=uF.safeEval(e.code,this,"__karelRunner__"),this.pushCommand({c:ia.PROGRAM_COMPLETE,l:-1}),e):(e.message&&cF.show({editor:this.editor,message:e.message,lineNumber:e.lineNumber||-1,progtype:this.editor.getProgramType(),editorError:!0,log:!1}),{hasError:!0})};sr.prototype.run=function(t,e){this.unpause();var r=e.isRunning||!1,n={result:"",hasError:!1};return r||(e.pythonCommandList?this.commands=e.pythonCommandList:n=this.generateCommandList(t)),!e.grading&&!n.hasError&&(r||this.curWorld.reset(),this.animate()),n};sr.prototype.stop=function(){this.reset(),this.editor.setRunButtonText("Run!")};sr.prototype.getCurrentSolutionWorld=function(){return this.curWorld.solution_world!==void 0?new Qv(this.curWorld.solution_world):null};sr.prototype.useGraphics=function(t){this.__graphics__=t};sr.prototype.validateCondition=function(){var t=this.commands.length;return!(t>0&&this.commands[t-1]<0)};sr.prototype.getWorld=function(){return this.curWorld};sr.prototype.applyCommandsToWorld=function(t,e){return $(e).each(function(r){var n=$(this)[0],i=n.c;if(i<0||isNaN(i))return t.reset(),!0;i==ia.MOVE&&t.move(),i==ia.TURN_LEFT&&t.turnLeft(),i==ia.TURN_RIGHT&&t.turnRight(),i==ia.TURN_AROUND&&t.turnAround(),i==ia.PUT_BEEPER&&t.putBall(),i==ia.PICK_BEEPER&&t.takeBall(),i==ia.PAINT&&t.paint(n.color)}),!1};sr.prototype.setGradingMode=function(t){this.inGradingMode=t};sr.prototype.getCommands=function(){return this.commands};sr.prototype.infiniteLoopDetector=function(t){this.counter=ia.INFINITE_LOOP_COUNTER_MAX;var e=t;this.dec=function(){if(this.counter--,this.counter<=0){var r=new Error;e.pushCommand({c:ia.INFINITE_LOOP,l:uF.lineNumberFromError(r)})}return this.counter>0}};sr.prototype.celebrate=function(t){var e=this,r=this.curWorld.karel,n={dx:null,dy:null,x:null,y:null,gravity:2};function i(){var o=new Ah.WebImage(r.filename);o.setRotation(r.rotation,1),n.x==null&&(n.dx=Ah.Randomizer.nextInt(2,5),n.dy=Ah.Randomizer.nextInt(-8,0),n.x=r.getX(),n.y=r.getY(),r.getX()>e.__graphics__.getWidth()/2&&(n.dx*=-1));var c=n.x+n.dx,l=n.y+n.dy;o.setPosition(c,l),o.setSize(r.getWidth(),r.getHeight()),e.__graphics__.add(o),o.getY()+o.getHeight()>=e.__graphics__.getHeight()?n.dy=-Math.abs(n.dy)*.9:n.dy+=n.gravity,n.x=c,n.y=l,(n.x>=e.__graphics__.getWidth()||n.x<-r.getWidth())&&(n.x=null,n.y=null)}var a={originalWidth:r.getWidth(),rotation:r.rotation,dRotation:.26,dSize:1.05};function s(){var o=a.dSize,c=a.rotation+a.dRotation;a.rotation=c,r.setRotation(c,1),r.setSize(r.getWidth()*o,r.getHeight()*o),r.getWidth()>e.__graphics__.getWidth()?a.dSize=.95:r.getWidth()<=a.originalWidth&&(a.dSize=1.05)}t===sF.KarelCelebration.SOLITAIRE?e.__graphics__.setTimer(i,20,{},"celebration"):t===sF.KarelCelebration.SPIN&&e.__graphics__.setTimer(s,40,{},"celebration")};sr.prototype.__forLoop__=function(t,e){this.pushCommand({c:ia.FOR_LOOP,l:t,s:e})};dF.exports=sr});var ey=R((l1e,fF)=>{"use strict";var eie=zA(),Zv;eie.DEBUG?Zv="zec":Zv="ze";var tie=function(t,e){for(var r=t.split(""),n=0;n<r.length;n++)if(Zv.indexOf(r[n])!==-1){console.log(e);break}},rie=Zv==""?function(){}:tie;fF.exports=rie});var hl=R((d1e,pF)=>{"use strict";var iie=".repl-terminal",nie=">>> ",aie="... ";function sie(t){t=_.defaults(t||{},{terminalSelector:iie,promptLabel:nie,continueLabel:aie,multlineCb:function(){return!1}});var e=$(t.terminalSelector);return e.length?(e=e.jqconsole(t.welcomeString?t.welcomeString+`
`:"",t.promptLabel,t.continueLabel),{writeToConsole:function(r,n){return e.Write.bind(e)(r+(n?"":`
`))},promptForInput:function(r){return e.Prompt.bind(e)(!0,r,t.multlineCb)},reset:function(){e.Reset()},clearPrompt:function(){e.AbortPrompt()}}):{writeToConsole:function(){},promptForInput:function(){},reset:function(){},clearPrompt:function(){}}}pF.exports=sie});var gF=R((f1e,hF)=>{hF.exports=function(t){var e=window.Sk.builtin.file;window.Sk.builtin.file=function(r,n,i){var a,s;if(!(this instanceof Sk.builtin.file))return new Sk.builtin.file(r,n,i);if(this.mode=n,this.name=Sk.ffi.remapToJs(r),this.closed=!1,this.name==="/dev/stdout")this.data$=Sk.builtin.none.none$,this.fileno=1;else if(this.name==="/dev/stdin")this.fileno=0;else if(this.name==="/dev/stderr")this.fileno=2;else{if(Sk.inBrowser)if(this.fileno=10,_.has(t.currentCode,r.v))this.data$=t.currentCode[r.v];else throw new Sk.builtin.IOError("[Errno 2] No such file or directory: '"+r.v+"'");else this.fileno=11,this.data$=Sk.read(r.v);this.lineList=this.data$.split(`
`),this.lineList=this.lineList.slice(0,-1);for(a in this.lineList)this.lineList[a]=this.lineList[a]+`
`;this.currentLine=0}return this.pos$=0,this.__class__=Sk.builtin.file,this},e.prototype.write=new Sk.builtin.func(function(r,n){if(r.closed)throw new Sk.builtin.ValueError("I/O operation on closed file");if(r._pos=r._pos?r._pos:0,r.fileno===1)Sk.output(Sk.ffi.remapToJs(n));else{let s=function(o,c,l){return l.slice(0,o)+c+l.slice(o+c.length)};var a=s,i=s(r._pos,n.v,r.data$);r._pos=r._pos+n.v.length,t.currentCode[r.name]=i,r.data$=i}}),window.Sk.builtin.file.prototype=e.prototype}});var ty=R((h1e,mF)=>{"use strict";var p1e=ey(),wT=Rr(),oie=Tn(),uie=Ri().safeSkulpt,cie=hl(),lie=hn();function rc(t,e){var r=this;e=e||{},r.editor=t,gF()(t),window.Sk.configure({inputfun:r.input.bind(r),output:r.output.bind(r),read:r.read.bind(r)}),r.replConsole=cie({welcomeString:"",promptLabel:""}),$(".jqconsole-cursor").css("visibility","hidden"),r.dontPrint=e.dontPrint||!1,r.consoleOutput=[],t.getProgramType()==wT.ProgramType.PYTHON&&($(".codehs-editor-canvas").hide(),$("#console").css("height","400px")),(t.getProgramType()==wT.ProgramType.PYTHON_CANVAS||t.getProgramType()==wT.ProgramType.PYTHON_TURTLE)&&$(".repl-terminal").css({height:"100px",width:"400px",margin:"0px 10px 10px 12px"})}oie.inherits(rc,lie);rc.prototype.getOutput=function(){return this.consoleOutput};rc.prototype.output=function(t){var e=this;this.consoleOutput.push(t),this.dontPrint||e.replConsole.writeToConsole(t,!0)};rc.prototype.read=function(t){var e=t.split("/").pop();if(window.Sk.builtinFiles.files[t])return window.Sk.builtinFiles.files[t];if(this.editor.currentCode[e])return this.editor.currentCode[e];throw"File not found: '"+t+"'"};rc.prototype.input=function(t){var e=this;return $(".jqconsole-cursor").css("visibility","visible"),e.replConsole.writeToConsole(t,!0),new Promise(function(r){return e.replConsole.promptForInput(function(n){r(n),$(".jqconsole-cursor").css("visibility","hidden")})})};rc.prototype.stop=function(t){var e=this;$(".jqconsole-cursor").css("visibility","hidden"),$("#python-canvas").html(""),e.replConsole.reset()};rc.prototype.run=function(t,e){e=e||{};var r=this;r.stop();var n=uie("<stdin>",!1,t,!0,e);return n.then(function(){r.editor.save()}),n.catch(function(i){r.consoleOutput=[]}),n};mF.exports=rc});var TT=R((y1e,vF)=>{"use strict";var g1e=ey(),die=Jl(),ry=Rr(),m1e=Tn(),v1e=hn();function ST(t){var e=this;e.editor=t,$(".js-python-tutor-run").on("click",function(){var r=t.getCode(),n=t.getProgrammingLanguage();n==ry.ProgrammingLanguage.JAVASCRIPT&&(r+=`

// Your program starts on Step 4.`,r+=`
// These lines are required for debugging mode.
`,r+="var println = console.log;",r+="var readInt = function(){return 1;};",r+='var readLine = function(){return "";};',r+="var readFloat = function(){return 1;};",r+="var readBoolean = function(){return true;};",r+="if(typeof start == 'function') {start();} "),e.run(r)})}ST.prototype.getPythonTutorLanguageCode=function(){var t=this.editor.getProgrammingLanguage();return t==ry.ProgrammingLanguage.JAVASCRIPT?"js":t==ry.ProgrammingLanguage.PYTHON?"2":t==ry.ProgrammingLanguage.JAVA?"java":"2"};ST.prototype.run=function(t){var e=this,r='<iframe width="1000" height="500" frameborder="0" ';r+='src="https://pythontutor.com/iframe-embed.html#code=',r+=encodeURIComponent(t),r+="&origin=opt-frontend.js&cumulative=false&heapPrimitives",r+="=false&textReferences=false&py=",r+=e.getPythonTutorLanguageCode(),r+="&rawInputLstJSON=%5B%5D",r+='&curInstr=0&codeDivWidth=450&codeDivHeight=500"> </iframe>',die({header:"Debugging: "+window.pageSpecific.itemTitle,message:"",rawHtml:r,button:"Close",buttonClass:"btn-main",cancelButton:!1}),$(".modal-dialog").css("width","90%")};vF.exports=ST});var kh=R((b1e,_F)=>{"use strict";var fie=Rr(),yF=Lc();function bF(t){this.editor=t}bF.prototype.check=function(t,e){var r=this;r.editor.clearHighlightedLines();var n=t.slice(0),i=t.slice(0);return pie(n,r)||gie(i,e,r)};function pie(t,e){var r=t.shift(),n="^(.*?):([\\d]+): error: (.*)",i=new RegExp(n),a=r.match(i),s;if(a){for(;a;){var o=t.shift(),c=t.shift().length,l=parseInt(a[2]);e.editor.progType==fie.ProgramType.JAVA_METHOD&&(l-=2);var f=hie(t);r=f.firstLine,t=f.output;var g=f.errorParams;s=a[1],yF.show({editor:e.editor,message:a[3],lineNumber:l,errorParams:g,fileName:s,errorLine:o,column:c,errorDisplay:"errorList",progtype:e.editor.progtype,langType:"java",log:!1}),a=r.match(i)}return!0}return!1}function hie(t){for(var e=/ {2}([\w\s]*?):\s*(.*)/,r=t.shift(),n=r.match(e),i={};n;){var a=n[1];i[a]=n[2],a=="symbol"&&(i[a]=i[a].match(/(.*?) (.*)/)[2]),r=t.shift(),n=r.match(e)}return{output:t,firstLine:r,errorParams:i}}function gie(t,e,r){var n=/Exception in thread ".*?" (.*)/,i=e.contents,a=[];i.forEach(function(I){a.push(I.name)});for(var s=a.join("|");t.length>0;){var o=t.shift(),c=o.match(n);if(c){var l=c[1],f="at .*?\\(("+s+"):([\\d]+)\\)",g=new RegExp(f,"m"),m=t.join().match(g),y=m[1],x=m[2];return yF.show({editor:r.editor,message:l,lineNumber:parseInt(x),fileName:y,errorDisplay:"errorList",progtype:r.editor.progtype,langType:"java",log:!1}),!0}}return!1}_F.exports=bF});var SF=R((w1e,wF)=>{"use strict";var na=Er(),mie=Tn(),_1e=Pi(),vie=hn(),yie=hl(),bie="wss://code.codehs.com:443/",Xd=".jqconsole-cursor",iy=".js-server-runner-message",CT="button.grade_code",ET="#grading-unit-test-run",xT="#submit-button",AT=".run_code";function pu(t,e){var r=this;r.replConsole=yie({welcomeString:"",promptLabel:""}),$(Xd).css("visibility","hidden"),r.url=bie+t,r.setState("disconnected"),r.connect(),r.output="",r.first=!0,r.delay=2e4,r.timeoutID=0,$(iy).hide(),e&&(r.errorChecker=e)}mie.inherits(pu,vie);pu.prototype.run=function(t,e){var r=e.arguments||[],n=this;na.trigger("ProgramRun:create",{userId:e.codeUserID,itemId:e.itemID,startTime:Date.now()}),n.codeTree={name:"root"};var i=[];for(var a in t){var s={};s.name=a,s.contents=t[a],i.push(s)}n.codeTree.contents=i,n.replConsole.reset(),function c(){$(Xd).css("visibility","visible"),n.replConsole.promptForInput(function(l){n.state==="running"&&n.emit("stdin",l+`
`),c()})}(),n.setState("running"),n.output="";var o={code:n.codeTree,name:e.mainClass,args:r,itemID:e.itemID,codeUserID:e.codeUserID};return n.emit("run",o),$(iy).hide(),n.outputPromise=$.Deferred(),n.timeoutID=window.setTimeout(n.oopsMessage.bind(n),n.delay),n.outputPromise};pu.prototype.oopsMessage=function(){var t=this;t.stop(),na.trigger("utils:switchToTab","#run-tab",".right-col-tabs",".editor-tab-content"),$(iy).show()};pu.prototype.stop=function(){var t=this;window.clearTimeout(t.timeoutID),t.replConsole.reset(),$(Xd).css("visibility","hidden"),$(iy).hide(),t.output="",t.state=="disconnected"?t.connect():t.cnx.close()};pu.prototype.setState=function(t){var e=this;switch(e.state=t,t){case"disconnected":e.running=!1,na.trigger("utils:disableButton",AT),na.trigger("utils:disableButton",CT),na.trigger("utils:disableButton",xT),na.trigger("utils:disableButton",ET);break;case"idle":e.running=!1,na.trigger("utils:enableButton",AT),na.trigger("utils:enableButton",CT),na.trigger("utils:enableButton",xT),na.trigger("utils:enableButton",ET);break;case"running":e.running=!0,na.trigger("utils:disableButton",AT),na.trigger("utils:disableButton",CT),na.trigger("utils:disableButton",xT),na.trigger("utils:disableButton",ET);break}};pu.prototype.emit=function(t,e){var r=this;r.cnx?(console.debug("Sending:",e),r.cnx.send(JSON.stringify({name:t,data:e}))):console.error("Tried to send message while disconnected!")};pu.prototype.connect=function(){var t=this,e=new WebSocket(t.url);t.cnx=e,e.onopen=function(){t.setState("idle")},e.onmessage=function(r){var n=JSON.parse(r.data),i=n.name,a=n.data;switch(i){case"running":break;case"output":window.clearTimeout(t.timeoutID),na.trigger("ProgramRun:successful",Date.now()),t.output+=a,t.replConsole.writeToConsole(a,!0);break;case"terminated":window.clearTimeout(t.timeoutID),na.trigger("ProgramRun:successful",Date.now());try{t.replConsole.clearPrompt()}catch{}$(Xd).css("visibility","hidden"),t.errorChecker&&t.errorChecker.check(t.getOutput(),t.codeTree),t.setState("idle"),t.outputPromise.resolve(t.getOutput()),a.exit_code===8&&t.oopsMessage();break;case"error":window.clearTimeout(t.timeoutID),t.replConsole.clearPrompt(),$(Xd).css("visibility","hidden"),console.error("Code server error: ",a);break;default:t.replConsole.clearPrompt(),$(Xd).css("visibility","hidden"),console.warn("Unhandled message from server:",n);break}},e.onclose=function(){t.setState("disconnected"),t.connect()}};pu.prototype.getOutput=function(){return this.output.split(`
`)};wF.exports=pu});var EF=R((S1e,CF)=>{"use strict";var _ie=kh(),wie=im(),Sie=Tn(),Tie=hn(),Cie=SF(),TF="__unittests__";function ic(t){var e=this;e.editor=t,e.running=!1,e.serverRunner=new Cie("java",new _ie(t)),e.editor.typeTester.isJavaGraphics()&&(e.__graphics__=new wie.CodeHSGraphics({canvas:$(".codehs-editor-canvas")}))}Sie.inherits(ic,Tie);ic.prototype.run=function(t,e){var r=this;r.running=!0;var n=r.serverRunner.run(t,e),i=$.Deferred();return n.done(function(a){if(r.editor.typeTester.isJavaGraphics()){r.__graphics__.removeAll(),r.__graphics__.fullReset();for(var s="",o=0;o<a.length;o++){var c=a[o];_.startsWith(c,"js:")&&(s+=c.substring(3))}r.__graphics__.runCode(s)}a=a.join(""),_.includes(a,TF)&&r.serverRunner.replConsole.reset(),a=a.split(TF)[1];try{a=JSON.parse(a).tests}catch{a=[]}i.resolve(a),r.running=!1}),i};ic.prototype.stop=function(){var t=this;t.running=!1,t.serverRunner.stop(),t.editor.typeTester.isJavaGraphics()&&(t.__graphics__.removeAll(),t.__graphics__.fullReset())};ic.prototype.showLoading=function(){var t=this;t.serverRunner.showLoading()};ic.prototype.hideLoading=function(){var t=this;t.serverRunner.hideLoading()};ic.prototype.connect=function(t){var e=this;e.serverRunner.connect(t)};ic.prototype.getOutput=function(){var t=this;t.serverRunner.getOutput()};CF.exports=ic});var kF=R((T1e,AF)=>{"use strict";var Eie=ui(),xie=Tn(),Aie=hn(),xF=".elm-destination";function ny(t){var e=this;e.running=!1,e.editor=t}xie.inherits(ny,Aie);ny.prototype.run=function(t){var e=this;e.stop(),e.running=!0,Eie.send({method:"compile_elm",app:"editor",type:"POST",data:{input:t},success:function(r){if(r.status==="ok"){var n=$(xF)[0],i=n.contentDocument;i.open(),i.write(r.result),i.close(),e.running=!1}}})};ny.prototype.stop=function(){var t=this,e=$(xF)[0],r=e.contentDocument;r.open(),r.writeln(""),r.close(),t.running=!1};AF.exports=ny});var IF=R((exports,module)=>{"use strict";var oop=Tn(),BaseRunner=hn();function ProcessingRunner(){var t=this;t.running=!1,t.canvas=$(".codehs-editor-canvas")[0]}oop.inherits(ProcessingRunner,BaseRunner);ProcessingRunner.prototype.run=function(code){var self=this;self.stop(),self.running=!0;var beginning="void setup() { size(400, 480); ",end="}",wrap=beginning+code+end,compiledJs=Processing.compile(wrap),sourceCode=compiledJs.sourceCode,processingSetupFunction=eval(sourceCode);return self.instance=new Processing(self.canvas,processingSetupFunction),self.instance};ProcessingRunner.prototype.stop=function(){var t=this;t.instance!==void 0&&t.instance.exit(),t.running=!1};module.exports=ProcessingRunner});var DF=R((C1e,kie)=>{kie.exports=`function drawPixels() {
    \${studentCode}
}

var pixelCanvas;

/**
 * Start point for program just like our graphics programs. Setups up the
 * canvas and then runs the user's code.
 */
function start() {
    pixelCanvas = new PixelCanvas();
    drawPixels();
}

var red = '#FF0000';
var RED = '#FF0000';
var green = '#00FF00';
var GREEN = '#00FF00';
var blue = '#0000FF';
var BLUE = '#0000FF';
var yellow = '#FFFF00';
var YELLOW = '#FFFF00';
var cyan = '#00FFFF';
var CYAN = '#00FFFF';
var orange = '#FFA500';
var ORANGE = '#FFA500';
var white = '#FFFFFF';
var WHITE = '#FFFFFF';
var black = '#000000';
var BLACK = '#000000';
var gray = '#cccccc';
var GRAY = '#CCCCCC';
var grey = '#cccccc';
var GREY = '#CCCCCC';
var purple = '#9B30FF';
var PURPLE = '#9B30FF';

function PixelCanvas(){
    var LABEL_OFFSET = 20;
    var ROW_LABEL_OFFSET = 56;
    var COL_LABEL_OFFSET = -15;
    var CANVAS_BORDER_OFFSET = 30;
    var CANVAS_BORDER_WIDTH = 2;
    var canvasWidth = getWidth() - CANVAS_BORDER_OFFSET - LABEL_OFFSET * 2;
    var canvasHeight = canvasWidth;
    var canvasBorder;
    var canvas = {
        'canvas': null,
        'canvasBorder': null,
        'columnLabel': null,
        'rowLabel': null,
        'showGrid': true,
        'rows': 5,
        'cols': 5,
        'pixelSize': canvasWidth / 5,
        'gridLines': [],
        'pixels': null,
    };

    setupCanvas();

    /**
     * Sets up the initial canvas state for a user. Mainly this is just the labels.
     * and the border. Also calls redrawCanvas which handles most of the drawing
     * logic.
     */
    function setupCanvas() {
        canvas.columnLabel = new Text('Columns', '14pt Arial');
        add(canvas.columnLabel);

        canvas.rowLabel = new Text('Rows', '14pt Arial');
        canvas.rowLabel.setRotation(270);
        add(canvas.rowLabel);

        canvas.canvasBorder = new Rectangle(canvasWidth + CANVAS_BORDER_WIDTH * 2,
            canvasHeight + CANVAS_BORDER_WIDTH * 2);
        canvas.canvasBorder.setPosition(CANVAS_BORDER_OFFSET, CANVAS_BORDER_OFFSET);
        add(canvas.canvasBorder);

        redrawCanvas(true);
    }

    /**
     * Handles the redraw logic everytime we resize the board or show the grid.
     * @param  {boolean} remakeBoard - True if we've resized the board. Otherwise,
     *                                 false.
     */
    function redrawCanvas(remakeBoard) {
        // Clear out previous grid.
        for (var i = canvas.gridLines.length - 1; i >= 0; i--) {
            remove(canvas.gridLines.pop());
        }

        canvasWidth = getWidth() - CANVAS_BORDER_OFFSET - LABEL_OFFSET * 2 -
            CANVAS_BORDER_WIDTH * 2;
        canvas.pixelSize = canvasWidth / canvas.cols;
        var canvasHeight = canvas.pixelSize * canvas.rows;
        if (canvasHeight > getHeight() - CANVAS_BORDER_OFFSET) {
            canvasHeight = getHeight() - CANVAS_BORDER_OFFSET - LABEL_OFFSET * 2;
            canvas.pixelSize = canvasHeight / canvas.rows;
            canvasWidth = canvas.pixelSize * canvas.cols;
        }
        // // Canvas border
        canvas.canvasBorder.height = canvasHeight + CANVAS_BORDER_WIDTH * 2;
        canvas.canvasBorder.width = canvasWidth + CANVAS_BORDER_WIDTH * 2;

        // Row Label
        canvas.rowLabel.setPosition(LABEL_OFFSET, canvasHeight / 2 +
            ROW_LABEL_OFFSET);

        // Column Label
        canvas.columnLabel.setPosition(canvasWidth / 2 + COL_LABEL_OFFSET,
            LABEL_OFFSET);

        if (remakeBoard) {
            createBoard();
        }

        // Grid drawing
        // This should always be last!
        if (canvas.showGrid) {
            var line;
            var x1;
            var y1;
            var x2;
            var y2;
            for (var j = 1; j < canvas.rows; j++) {
                x1 = CANVAS_BORDER_OFFSET + CANVAS_BORDER_WIDTH;
                y1 = CANVAS_BORDER_OFFSET + canvas.pixelSize * j +
                    CANVAS_BORDER_WIDTH;
                x2 = canvasWidth + CANVAS_BORDER_OFFSET + CANVAS_BORDER_WIDTH;
                y2 = CANVAS_BORDER_OFFSET + canvas.pixelSize * j +
                    CANVAS_BORDER_WIDTH;
                line = new Line(x1, y1, x2, y2);
                add(line);
                canvas.gridLines.push(line);
            }

            for (var k = 1; k < canvas.cols; k++) {
                x1 = CANVAS_BORDER_OFFSET + canvas.pixelSize * k +
                    CANVAS_BORDER_WIDTH;
                y1 = CANVAS_BORDER_OFFSET + CANVAS_BORDER_WIDTH;
                x2 = CANVAS_BORDER_OFFSET + canvas.pixelSize * k +
                    CANVAS_BORDER_WIDTH;
                y2 = canvasHeight + CANVAS_BORDER_OFFSET + CANVAS_BORDER_WIDTH;
                line = new Line(x1, y1, x2, y2);
                add(line);
                canvas.gridLines.push(line);
            }
        }
    }

    /**
     * Creates the pixes that make up the board. These are then attached to the
     * canvas.
     */
    function createBoard() {
        canvas.pixels = new Grid(canvas.cols, canvas.rows);

        for (var i = 0; i < canvas.cols; i++) {
            for (var j = 0; j < canvas.rows; j++) {
                var pixel = new Rectangle(canvas.pixelSize, canvas.pixelSize);
                pixel.setPosition(CANVAS_BORDER_OFFSET + canvas.pixelSize * i + 2,
                    CANVAS_BORDER_OFFSET + canvas.pixelSize * j + 2);
                pixel.setColor(Color.WHITE);
                add(pixel);
                canvas.pixels.set(i, j, pixel);
            }
        }
    }

    /**
     * Clears the grid of all pixels. Should always be used if we're resizing the
     * grid.
     */
    function clearGrid() {
        for (var i = 0; i < canvas.cols; i++) {
            for (var j = 0; j < canvas.rows; j++) {
                remove(canvas.pixels.get(i, j));
            }
        }
    }

    //
    // Public methods
    //

    /**
     * Set's the dimensions of the pixel. This will resize the canvas.
     * @param {int} rows - The number of pixel rows.
     * @param {int} cols - The number of pixel columns.
     */
    this.setDimensions = function(rows, cols) {
        clearGrid();
        canvas.rows = rows;
        canvas.cols = cols;
        redrawCanvas(true);
    };

    /**
     * Get the number of pixel rows.
     * @return {int} - Number of pixel rows.
     */
    this.getRows = function() {
        return canvas.rows;
    };

    /**
     * Set the number of pixel rows. This will resize the canvas.
     * @param {int} rows - The new number of pixel rows.
     */
    this.setRows = function(rows) {
        clearGrid();
        canvas.rows = rows;
        redrawCanvas(true);
    };

    /**
     * Get the number of pixel columns.
     * @return {int} - Number of pixel columns.
     */
    this.getCols = function() {
        return canvas.cols;
    };

    /**
     * Set the number of pixel columns. This will resize the canvas.
     * @param {int} cols - The new number of pixel columns.
     */
    this.setCols = function(cols) {
        clearGrid();
        canvas.cols = cols;
        redrawCanvas(true);
    };

    /**
     * Set whether to show the grid lines or not.
     * @param  {boolean} bool - True means grid lines will show. False means no
     *                          gridlines.
     */
    this.showGrid = function(bool) {
        canvas.showGrid = bool;
        redrawCanvas(false);
    };

    /**
     * Set the pixel color at a particular row or column.
     * @param {int} row      - Row to set pixel color
     * @param {int} col      - Column to set pixel color
     * @param {string} color - The color to set. This can either be 'green',
     *                         '#00FF00', or Color.GREEN.
     */
    this.setPixel = function(row, col, color) {
        canvas.pixels.get(col, row).setColor(color);
    };

    /**
     * Set the pixel color at a particular row and column to an RGB value.
     * @param {int} row - Row to set pixel color
     * @param {int} col - Column to set pixel color
     * @param {int} r   - Red value of RGB color
     * @param {int} g   - Green value of RGB color
     * @param {int} b   - Blue value of RGB color
     */
    this.setPixelRGB = function(row, col, r, g, b) {
        canvas.pixels.get(col, row).setColor(Color.createFromRGB(r, g, b));
    };
}

/**
 * Sets up input checking and calls the canvas's setDimensions method.
 * @param {int} rows - The number of pixel rows.
 * @param {int} cols - The number of pixel columns.
 */
function setDimensions(rows, cols) {
    if (arguments.length !== 2) {
        throw new Error('You should pass exactly 2 arguments to <span ' +
            'class="code">setDimensions(rows, cols)</span>');
    }
    if (typeof rows !== 'number' || !isFinite(rows) || rows < 1) {
        throw new TypeError('Invalid value for <span class="code">rows' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setDimensions(rows, cols)</span>. Did you ' +
            'perform a calculation on a variable that is not a number?');
    }
    if (typeof cols !== 'number' || !isFinite(cols) || cols < 1) {
        throw new TypeError('Invalid value for <span class="code">cols' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setDimensions(rows, cols)</span>. Did you ' +
            'perform a calculation on a variable that is not a number?');
    }
    pixelCanvas.setDimensions(rows, cols);
}

/**
 * Sets up input checking and calls the canvas's getRows method.
 * @return {int} - Number of pixel rows.
 */
function getRows() {
    if (arguments.length !== 0) {
        throw new Error('You should pass no arguments to <span class="code">' +
            'getRows()</span>');
    }
    return pixelCanvas.getRows();
}

/**
 * Sets up input checking and calls the canvas's setRows method.
 * @param {int} rows - The new number of pixel rows.
 */
function setRows(rows) {
    if (arguments.length !== 1) {
        throw new Error('You should pass exactly 1 argument to <span ' +
            'class="code">setRows(rows)</span>');
    }
    if (typeof rows !== 'number' || !isFinite(rows) || rows < 1) {
        throw new TypeError('Invalid value for <span class="code">rows' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setRows(rows)</span>. Did you perform ' +
            'a calculation on a variable that is not a number?');
    }
    pixelCanvas.setRows();
}

/**
 * Sets up input checking and calls the canvas's getCols method.
 * @return {int} - Number of pixel columns.
 */
function getCols() {
    if (arguments.length !== 0) {
        throw new Error('You should pass no arguments to <span class="code">' +
            'getCols()</span>');
    }
    return pixelCanvas.getCols();
}

/**
 * Sets up input checking and calls the canvas's setCols method.
 * @param {int} cols - The new number of pixel columns.
 */
function setCols(cols) {
    if (arguments.length !== 1) {
        throw new Error('You should pass exactly 1 argument to <span ' +
            'class="code">setCols(cols)</span>');
    }
    if (typeof cols !== 'number' || !isFinite(cols) || cols < 1) {
        throw new TypeError('Invalid value for <span class="code">cols' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setCols(cols)</span>. Did you perform ' +
            'a calculation on a variable that is not a number?');
    }
    pixelCanvas.setCols(cols);
}

/**
 * Sets up input checking and calls the canvas's showGrid method.
 * @param  {boolean} bool - True means grid lines will show. False means no
 *                          gridlines.
 */
function showGrid(bool) {
    if (arguments.length !== 1) {
        throw new Error('You should pass exactly 1 argument to <span ' +
            'class="code">showGrid(bool)</span>');
    }
    if (typeof bool !== 'boolean') {
        throw new TypeError('Invalid value for <span class="code">cols' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">showGrid(cool)</span>. Did you perform ' +
            'a calculation on a variable that is not a number?');
    }
    pixelCanvas.showGrid(bool);
}

/**
 * Sets up input checking and calls the canvas's setPixel method.
 * @param {int} row      - Row to set pixel color
 * @param {int} col      - Column to set pixel color
 * @param {string} color - The color to set. This can either be 'green',
 *                         '#00FF00', or Color.GREEN.
 */
function setPixel(row, col, color) {
    if (arguments.length !== 3) {
        throw new Error('You should pass exactly 3 arguments to <span ' +
            'class="code">setPixel(row, col, color)</span>');
    }
    if (typeof row !== 'number' || !isFinite(row)) {
        throw new TypeError('Invalid value for <span class="code">row' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setPixel(row, col, color)</span>. Did you ' +
            'perform a calculation on a variable that is not a number?');
    }
    if (row < 0 || row >= pixelCanvas.getRows()) {
        throw new RangeError('Invalid value for <span class="code">row</span>' +
            ' in <span class="code">setPixel(row, col, color)</span>' +
            'Your <span class="code">row</span> must be between 0 and ' +
            (canvas.rows - 1) + '.');
    }
    if (typeof col !== 'number' || !isFinite(col)) {
        throw new TypeError('Invalid value for <span class="code">col' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setPixel(row, col, color)</span>. Did you ' +
            'perform a calculation on a variable that is not a number?');
    }
    if (col < 0 || col >= pixelCanvas.getCols()) {
        throw new RangeError('Invalid value for <span class="code">row</span>' +
            ' in <span class="code">setPixel(row, col, color)</span>' +
            'Your <span class="code">row</span> must be between 0 and ' +
            (canvas.cols - 1) + '.');
    }
    if (color === undefined) {
        throw new TypeError('Invalid color');
    }
    pixelCanvas.setPixel(row, col, color);
}

/**
 * Sets up input checking and calls the canvas's setPixelRGB method.
 * @param {int} row - Row to set pixel color
 * @param {int} col - Column to set pixel color
 * @param {int} r   - Red value of RGB color
 * @param {int} g   - Green value of RGB color
 * @param {int} b   - Blue value of RGB color
 */
function setPixelRGB(row, col, r, g, b) {
    if (arguments.length !== 5) {
        throw new Error('You should pass exactly 5 argument to <span ' +
            'class="code">setPixelRGB(row, col, r, g, b)</span>');
    }
    if (typeof row !== 'number' || !isFinite(row)) {
        throw new TypeError('Invalid value for <span class="code">row' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setPixelRGB(row, col, r, g, b)</span>. Did ' +
            'you perform a calculation on a variable that is not a number?');
    }
    if (row < 0 || row >= pixelCanvas.getRows()) {
        throw new RangeError('Invalid value for <span class="code">row</span>' +
            ' in <span class="code">setPixelRGB(row, col, r, g, b)</span>' +
            'Your <span class="code">row</span> must be between 0 and ' +
            (pixelCanvas.rows - 1) + '.');
    }
    if (typeof col !== 'number' || !isFinite(col)) {
        throw new TypeError('Invalid value for <span class="code">col' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setPixelRGB(row, col, r, g, b)</span>. Did ' +
            'you perform a calculation on a variable that is not a number?');
    }
    if (col < 0 || col >= pixelCanvas.getCols()) {
        throw new RangeError('Invalid value for <span class="code">col</span>' +
            ' in <span class="code">setPixelRGB(row, col, r, g, b)</span>' +
            'Your <span class="code">col</span> must be between 0 and ' +
            (pixelCanvas.cols - 1) + '.');
    }
    if (typeof r !== 'number' || !isFinite(r)) {
        throw new TypeError('Invalid value for <span class="code">r' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setPixelRGB(row, col, r, g, b)</span>. Did ' +
            'you perform a calculation on a variable that is not a number?');
    }
    if (r < 0 || r > 255) {
        throw new RangeError('Invalid value for <span class="code">r</span>' +
            ' in <span class="code">setPixelRGB(row, col, r, g, b)</span>' +
            'Your <span class="code">r</span> must be between 0 and 255.');
    }
    if (typeof g !== 'number' || !isFinite(g)) {
        throw new TypeError('Invalid value for <span class="code">g' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setPixelRGB(row, col, r, g, b)</span>. Did ' +
            'you perform a calculation on a variable that is not a number?');
    }
    if (g < 0 || g > 255) {
        throw new RangeError('Invalid value for <span class="code">g</span>' +
            ' in <span class="code">setPixelRGB(row, col, r, g, b)</span>' +
            'Your <span class="code">g</span> must be between 0 and 255.');
    }
    if (typeof b !== 'number' || !isFinite(b)) {
        throw new TypeError('Invalid value for <span class="code">b' +
            '</span>. Make sure you are passing finite positive numbers to ' +
            '<span class="code">setPixelRGB(row, col, r, g, b)</span>. Did ' +
            'you perform a calculation on a variable that is not a number?');
    }
    if (b < 0 || b > 255) {
        throw new RangeError('Invalid value for <span class="code">b</span>' +
            ' in <span class="code">setPixelRGB(row, col, r, g, b)</span>' +
            'Your <span class="code">b</span> must be between 0 and 255.');
    }
    pixelCanvas.setPixelRGB(row, col, r, g, b);
}
`});var PF=R((E1e,OF)=>{"use strict";var Iie=rm(),Die=Tn(),Oie=hn(),Pie=mT(),Rie=DF();function ay(){var t=this;t.running=!1,t.graphicsRunner=new Pie}Die.inherits(ay,Oie);ay.prototype.run=function(t){var e=this;t=Iie(Rie,{studentCode:t}),e.graphicsRunner.run(t)};ay.prototype.stop=function(){var t=this;t.graphicsRunner.stop()};OF.exports=ay});var kT=R((x1e,RF)=>{var Lie=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Nie=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];RF.exports=function(e){var r=e,n=e.indexOf("["),i=e.indexOf("]");n!=-1&&i!=-1&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));for(var a=Lie.exec(e||""),s={},o=14;o--;)s[Nie[o]]=a[o]||"";return n!=-1&&i!=-1&&(s.source=r,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}});var NF=R((A1e,LF)=>{var Ih=1e3,Dh=Ih*60,Oh=Dh*60,Ph=Oh*24,Fie=Ph*365.25;LF.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Mie(t);if(r==="number"&&isNaN(t)===!1)return e.long?$ie(t):Uie(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Mie(t){if(t=String(t),!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Fie;case"days":case"day":case"d":return r*Ph;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Oh;case"minutes":case"minute":case"mins":case"min":case"m":return r*Dh;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ih;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Uie(t){return t>=Ph?Math.round(t/Ph)+"d":t>=Oh?Math.round(t/Oh)+"h":t>=Dh?Math.round(t/Dh)+"m":t>=Ih?Math.round(t/Ih)+"s":t+"ms"}function $ie(t){return sy(t,Ph,"day")||sy(t,Oh,"hour")||sy(t,Dh,"minute")||sy(t,Ih,"second")||t+" ms"}function sy(t,e,r){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}});var UF=R((di,MF)=>{di=MF.exports=FF.debug=FF;di.coerce=zie;di.disable=Hie;di.enable=jie;di.enabled=Gie;di.humanize=NF();di.names=[];di.skips=[];di.formatters={};var Bie=0,IT;function qie(){return di.colors[Bie++%di.colors.length]}function FF(t){function e(){}e.enabled=!1;function r(){var i=r,a=+new Date,s=a-(IT||a);i.diff=s,i.prev=IT,i.curr=a,IT=a,i.useColors==null&&(i.useColors=di.useColors()),i.color==null&&i.useColors&&(i.color=qie());for(var o=new Array(arguments.length),c=0;c<o.length;c++)o[c]=arguments[c];o[0]=di.coerce(o[0]),typeof o[0]!="string"&&(o=["%o"].concat(o));var l=0;o[0]=o[0].replace(/%([a-z%])/g,function(g,m){if(g==="%%")return g;l++;var y=di.formatters[m];if(typeof y=="function"){var x=o[l];g=y.call(i,x),o.splice(l,1),l--}return g}),o=di.formatArgs.apply(i,o);var f=r.log||di.log||console.log.bind(console);f.apply(i,o)}r.enabled=!0;var n=di.enabled(t)?r:e;return n.namespace=t,n}function jie(t){di.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,n=0;n<r;n++)e[n]&&(t=e[n].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),t[0]==="-"?di.skips.push(new RegExp("^"+t.substr(1)+"$")):di.names.push(new RegExp("^"+t+"$")))}function Hie(){di.enable("")}function Gie(t){var e,r;for(e=0,r=di.skips.length;e<r;e++)if(di.skips[e].test(t))return!1;for(e=0,r=di.names.length;e<r;e++)if(di.names[e].test(t))return!0;return!1}function zie(t){return t instanceof Error?t.stack||t.message:t}});var hu=R((_a,BF)=>{_a=BF.exports=UF();_a.log=Kie;_a.formatArgs=Wie;_a.save=Xie;_a.load=$F;_a.useColors=Vie;_a.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:Yie();_a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function Vie(){return typeof document<"u"&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}_a.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function Wie(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+_a.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var n=0,i=0;return t[0].replace(/%[a-z%]/g,function(a){a!=="%%"&&(n++,a==="%c"&&(i=n))}),t.splice(i,0,r),t}function Kie(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function Xie(t){try{t==null?_a.storage.removeItem("debug"):_a.storage.debug=t}catch{}}function $F(){var t;try{return _a.storage.debug}catch{}if(typeof process<"u"&&"env"in process)return!1}_a.enable($F());function Yie(){try{return window.localStorage}catch{}}});var HF=R((k1e,jF)=>{var Jie=kT(),qF=hu()("socket.io-client:url");jF.exports=Qie;function Qie(t,e){var r=t;e=e||window.location,t==null&&(t=e.protocol+"//"+e.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=e.protocol+t:t=e.host+t),/^(https?|wss?):\/\//.test(t)||(qF("protocol-less url %s",t),typeof e<"u"?t=e.protocol+"//"+t:t="https://"+t),qF("parse %s",t),r=Jie(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var n=r.host.indexOf(":")!==-1,i=n?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port,r.href=r.protocol+"://"+i+(e&&e.port===r.port?"":":"+r.port),r}});var zF=R((I1e,GF)=>{var Rh=1e3,Lh=Rh*60,Nh=Lh*60,Fh=Nh*24,Zie=Fh*365.25;GF.exports=function(t,e){return e=e||{},typeof t=="string"?ene(t):e.long?rne(t):tne(t)};function ene(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Zie;case"days":case"day":case"d":return r*Fh;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Nh;case"minutes":case"minute":case"mins":case"min":case"m":return r*Lh;case"seconds":case"second":case"secs":case"sec":case"s":return r*Rh;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function tne(t){return t>=Fh?Math.round(t/Fh)+"d":t>=Nh?Math.round(t/Nh)+"h":t>=Lh?Math.round(t/Lh)+"m":t>=Rh?Math.round(t/Rh)+"s":t+"ms"}function rne(t){return oy(t,Fh,"day")||oy(t,Nh,"hour")||oy(t,Lh,"minute")||oy(t,Rh,"second")||t+" ms"}function oy(t,e,r){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}});var WF=R((ni,VF)=>{ni=VF.exports=ane;ni.coerce=cne;ni.disable=one;ni.enable=sne;ni.enabled=une;ni.humanize=zF();ni.names=[];ni.skips=[];ni.formatters={};var ine=0,DT;function nne(){return ni.colors[ine++%ni.colors.length]}function ane(t){function e(){}e.enabled=!1;function r(){var i=r,a=+new Date,s=a-(DT||a);i.diff=s,i.prev=DT,i.curr=a,DT=a,i.useColors==null&&(i.useColors=ni.useColors()),i.color==null&&i.useColors&&(i.color=nne());var o=Array.prototype.slice.call(arguments);o[0]=ni.coerce(o[0]),typeof o[0]!="string"&&(o=["%o"].concat(o));var c=0;o[0]=o[0].replace(/%([a-z%])/g,function(f,g){if(f==="%%")return f;c++;var m=ni.formatters[g];if(typeof m=="function"){var y=o[c];f=m.call(i,y),o.splice(c,1),c--}return f}),typeof ni.formatArgs=="function"&&(o=ni.formatArgs.apply(i,o));var l=r.log||ni.log||console.log.bind(console);l.apply(i,o)}r.enabled=!0;var n=ni.enabled(t)?r:e;return n.namespace=t,n}function sne(t){ni.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,n=0;n<r;n++)e[n]&&(t=e[n].replace(/\*/g,".*?"),t[0]==="-"?ni.skips.push(new RegExp("^"+t.substr(1)+"$")):ni.names.push(new RegExp("^"+t+"$")))}function one(){ni.enable("")}function une(t){var e,r;for(e=0,r=ni.skips.length;e<r;e++)if(ni.skips[e].test(t))return!1;for(e=0,r=ni.names.length;e<r;e++)if(ni.names[e].test(t))return!0;return!1}function cne(t){return t instanceof Error?t.stack||t.message:t}});var YF=R((wa,XF)=>{wa=XF.exports=WF();wa.log=fne;wa.formatArgs=dne;wa.save=pne;wa.load=KF;wa.useColors=lne;wa.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:hne();wa.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function lne(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}wa.formatters.j=function(t){return JSON.stringify(t)};function dne(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+wa.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var n=0,i=0;return t[0].replace(/%[a-z%]/g,function(a){a!=="%%"&&(n++,a==="%c"&&(i=n))}),t.splice(i,0,r),t}function fne(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function pne(t){try{t==null?wa.storage.removeItem("debug"):wa.storage.debug=t}catch{}}function KF(){var t;try{t=wa.storage.debug}catch{}return t}wa.enable(KF());function hne(){try{return window.localStorage}catch{}}});var JF=R((Yd,uy)=>{(function(){var t=typeof define=="function"&&define.amd,e={function:!0,object:!0},r=e[typeof Yd]&&Yd&&!Yd.nodeType&&Yd,n=e[typeof window]&&window||this,i=r&&e[typeof uy]&&uy&&!uy.nodeType&&typeof window=="object"&&window;i&&(i.global===i||i.window===i||i.self===i)&&(n=i);function a(f,g){f||(f=n.Object()),g||(g=n.Object());var m=f.Number||n.Number,y=f.String||n.String,x=f.Object||n.Object,I=f.Date||n.Date,A=f.SyntaxError||n.SyntaxError,F=f.TypeError||n.TypeError,X=f.Math||n.Math,de=f.JSON||n.JSON;typeof de=="object"&&de&&(g.stringify=de.stringify,g.parse=de.parse);var N=x.prototype,H=N.toString,z,Y,G,ie=new I(-0xc782b5b800cec);try{ie=ie.getUTCFullYear()==-109252&&ie.getUTCMonth()===0&&ie.getUTCDate()===1&&ie.getUTCHours()==10&&ie.getUTCMinutes()==37&&ie.getUTCSeconds()==6&&ie.getUTCMilliseconds()==708}catch{}function fe(qe){if(fe[qe]!==G)return fe[qe];var rt;if(qe=="bug-string-char-index")rt=!1;else if(qe=="json")rt=fe("json-stringify")&&fe("json-parse");else{var je,Ae='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(qe=="json-stringify"){var lt=g.stringify,Nt=typeof lt=="function"&&ie;if(Nt){(je=function(){return 1}).toJSON=je;try{Nt=lt(0)==="0"&&lt(new m)==="0"&&lt(new y)=='""'&&lt(H)===G&&lt(G)===G&&lt()===G&&lt(je)==="1"&&lt([je])=="[1]"&&lt([G])=="[null]"&&lt(null)=="null"&&lt([G,H,null])=="[null,null,null]"&&lt({a:[je,!0,!1,null,`\0\b
\f\r	`]})==Ae&&lt(null,je)==="1"&&lt([1,2],null,1)==`[
 1,
 2
]`&&lt(new I(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&lt(new I(864e13))=='"+275760-09-13T00:00:00.000Z"'&&lt(new I(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&lt(new I(-1))=='"1969-12-31T23:59:59.999Z"'}catch{Nt=!1}}rt=Nt}if(qe=="json-parse"){var ot=g.parse;if(typeof ot=="function")try{if(ot("0")===0&&!ot(!1)){je=ot(Ae);var St=je.a.length==5&&je.a[0]===1;if(St){try{St=!ot('"	"')}catch{}if(St)try{St=ot("01")!==1}catch{}if(St)try{St=ot("1.")!==1}catch{}}}}catch{St=!1}rt=St}}return fe[qe]=!!rt}if(!fe("json")){var Ne="[object Function]",ye="[object Date]",He="[object Number]",Re="[object String]",Ze="[object Array]",ce="[object Boolean]",tt=fe("bug-string-char-index");if(!ie)var ft=X.floor,pt=[0,31,59,90,120,151,181,212,243,273,304,334],Ye=function(qe,rt){return pt[rt]+365*(qe-1970)+ft((qe-1969+(rt=+(rt>1)))/4)-ft((qe-1901+rt)/100)+ft((qe-1601+rt)/400)};if((z=N.hasOwnProperty)||(z=function(qe){var rt={},je;return(rt.__proto__=null,rt.__proto__={toString:1},rt).toString!=H?z=function(Ae){var lt=this.__proto__,Nt=Ae in(this.__proto__=null,this);return this.__proto__=lt,Nt}:(je=rt.constructor,z=function(Ae){var lt=(this.constructor||je).prototype;return Ae in this&&!(Ae in lt&&this[Ae]===lt[Ae])}),rt=null,z.call(this,qe)}),Y=function(qe,rt){var je=0,Ae,lt,Nt;(Ae=function(){this.valueOf=0}).prototype.valueOf=0,lt=new Ae;for(Nt in lt)z.call(lt,Nt)&&je++;return Ae=lt=null,je?je==2?Y=function(ot,St){var te={},ee=H.call(ot)==Ne,ge;for(ge in ot)!(ee&&ge=="prototype")&&!z.call(te,ge)&&(te[ge]=1)&&z.call(ot,ge)&&St(ge)}:Y=function(ot,St){var te=H.call(ot)==Ne,ee,ge;for(ee in ot)!(te&&ee=="prototype")&&z.call(ot,ee)&&!(ge=ee==="constructor")&&St(ee);(ge||z.call(ot,ee="constructor"))&&St(ee)}:(lt=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],Y=function(ot,St){var te=H.call(ot)==Ne,ee,ge,De=!te&&typeof ot.constructor!="function"&&e[typeof ot.hasOwnProperty]&&ot.hasOwnProperty||z;for(ee in ot)!(te&&ee=="prototype")&&De.call(ot,ee)&&St(ee);for(ge=lt.length;ee=lt[--ge];De.call(ot,ee)&&St(ee));}),Y(qe,rt)},!fe("json-stringify")){var xt={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},Ut="000000",Pt=function(qe,rt){return(Ut+(rt||0)).slice(-qe)},tr="\\u00",Ke=function(qe){for(var rt='"',je=0,Ae=qe.length,lt=!tt||Ae>10,Nt=lt&&(tt?qe.split(""):qe);je<Ae;je++){var ot=qe.charCodeAt(je);switch(ot){case 8:case 9:case 10:case 12:case 13:case 34:case 92:rt+=xt[ot];break;default:if(ot<32){rt+=tr+Pt(2,ot.toString(16));break}rt+=lt?Nt[je]:qe.charAt(je)}}return rt+'"'},Q=function(qe,rt,je,Ae,lt,Nt,ot){var St,te,ee,ge,De,ut,q,re,L,Ce,Ge,at,ht,Je,Ee,Kt;try{St=rt[qe]}catch{}if(typeof St=="object"&&St)if(te=H.call(St),te==ye&&!z.call(St,"toJSON"))if(St>-1/0&&St<1/0){if(Ye){for(De=ft(St/864e5),ee=ft(De/365.2425)+1970-1;Ye(ee+1,0)<=De;ee++);for(ge=ft((De-Ye(ee,0))/30.42);Ye(ee,ge+1)<=De;ge++);De=1+De-Ye(ee,ge),ut=(St%864e5+864e5)%864e5,q=ft(ut/36e5)%24,re=ft(ut/6e4)%60,L=ft(ut/1e3)%60,Ce=ut%1e3}else ee=St.getUTCFullYear(),ge=St.getUTCMonth(),De=St.getUTCDate(),q=St.getUTCHours(),re=St.getUTCMinutes(),L=St.getUTCSeconds(),Ce=St.getUTCMilliseconds();St=(ee<=0||ee>=1e4?(ee<0?"-":"+")+Pt(6,ee<0?-ee:ee):Pt(4,ee))+"-"+Pt(2,ge+1)+"-"+Pt(2,De)+"T"+Pt(2,q)+":"+Pt(2,re)+":"+Pt(2,L)+"."+Pt(3,Ce)+"Z"}else St=null;else typeof St.toJSON=="function"&&(te!=He&&te!=Re&&te!=Ze||z.call(St,"toJSON"))&&(St=St.toJSON(qe));if(je&&(St=je.call(rt,qe,St)),St===null)return"null";if(te=H.call(St),te==ce)return""+St;if(te==He)return St>-1/0&&St<1/0?""+St:"null";if(te==Re)return Ke(""+St);if(typeof St=="object"){for(Je=ot.length;Je--;)if(ot[Je]===St)throw F();if(ot.push(St),Ge=[],Ee=Nt,Nt+=lt,te==Ze){for(ht=0,Je=St.length;ht<Je;ht++)at=Q(ht,St,je,Ae,lt,Nt,ot),Ge.push(at===G?"null":at);Kt=Ge.length?lt?`[
`+Nt+Ge.join(`,
`+Nt)+`
`+Ee+"]":"["+Ge.join(",")+"]":"[]"}else Y(Ae||St,function(Ot){var kt=Q(Ot,St,je,Ae,lt,Nt,ot);kt!==G&&Ge.push(Ke(Ot)+":"+(lt?" ":"")+kt)}),Kt=Ge.length?lt?`{
`+Nt+Ge.join(`,
`+Nt)+`
`+Ee+"}":"{"+Ge.join(",")+"}":"{}";return ot.pop(),Kt}};g.stringify=function(qe,rt,je){var Ae,lt,Nt,ot;if(e[typeof rt]&&rt){if((ot=H.call(rt))==Ne)lt=rt;else if(ot==Ze){Nt={};for(var St=0,te=rt.length,ee;St<te;ee=rt[St++],ot=H.call(ee),(ot==Re||ot==He)&&(Nt[ee]=1));}}if(je)if((ot=H.call(je))==He){if((je-=je%1)>0)for(Ae="",je>10&&(je=10);Ae.length<je;Ae+=" ");}else ot==Re&&(Ae=je.length<=10?je:je.slice(0,10));return Q("",(ee={},ee[""]=qe,ee),lt,Nt,Ae,"",[])}}if(!fe("json-parse")){var pe=y.fromCharCode,xe={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:`
`,102:"\f",114:"\r"},_e,nt,_t=function(){throw _e=nt=null,A()},bt=function(){for(var qe=nt,rt=qe.length,je,Ae,lt,Nt,ot;_e<rt;)switch(ot=qe.charCodeAt(_e),ot){case 9:case 10:case 13:case 32:_e++;break;case 123:case 125:case 91:case 93:case 58:case 44:return je=tt?qe.charAt(_e):qe[_e],_e++,je;case 34:for(je="@",_e++;_e<rt;)if(ot=qe.charCodeAt(_e),ot<32)_t();else if(ot==92)switch(ot=qe.charCodeAt(++_e),ot){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:je+=xe[ot],_e++;break;case 117:for(Ae=++_e,lt=_e+4;_e<lt;_e++)ot=qe.charCodeAt(_e),ot>=48&&ot<=57||ot>=97&&ot<=102||ot>=65&&ot<=70||_t();je+=pe("0x"+qe.slice(Ae,_e));break;default:_t()}else{if(ot==34)break;for(ot=qe.charCodeAt(_e),Ae=_e;ot>=32&&ot!=92&&ot!=34;)ot=qe.charCodeAt(++_e);je+=qe.slice(Ae,_e)}if(qe.charCodeAt(_e)==34)return _e++,je;_t();default:if(Ae=_e,ot==45&&(Nt=!0,ot=qe.charCodeAt(++_e)),ot>=48&&ot<=57){for(ot==48&&(ot=qe.charCodeAt(_e+1),ot>=48&&ot<=57)&&_t(),Nt=!1;_e<rt&&(ot=qe.charCodeAt(_e),ot>=48&&ot<=57);_e++);if(qe.charCodeAt(_e)==46){for(lt=++_e;lt<rt&&(ot=qe.charCodeAt(lt),ot>=48&&ot<=57);lt++);lt==_e&&_t(),_e=lt}if(ot=qe.charCodeAt(_e),ot==101||ot==69){for(ot=qe.charCodeAt(++_e),(ot==43||ot==45)&&_e++,lt=_e;lt<rt&&(ot=qe.charCodeAt(lt),ot>=48&&ot<=57);lt++);lt==_e&&_t(),_e=lt}return+qe.slice(Ae,_e)}if(Nt&&_t(),qe.slice(_e,_e+4)=="true")return _e+=4,!0;if(qe.slice(_e,_e+5)=="false")return _e+=5,!1;if(qe.slice(_e,_e+4)=="null")return _e+=4,null;_t()}return"$"},Se=function(qe){var rt,je;if(qe=="$"&&_t(),typeof qe=="string"){if((tt?qe.charAt(0):qe[0])=="@")return qe.slice(1);if(qe=="["){for(rt=[];qe=bt(),qe!="]";je||(je=!0))je&&(qe==","?(qe=bt(),qe=="]"&&_t()):_t()),qe==","&&_t(),rt.push(Se(qe));return rt}else if(qe=="{"){for(rt={};qe=bt(),qe!="}";je||(je=!0))je&&(qe==","?(qe=bt(),qe=="}"&&_t()):_t()),(qe==","||typeof qe!="string"||(tt?qe.charAt(0):qe[0])!="@"||bt()!=":")&&_t(),rt[qe.slice(1)]=Se(bt());return rt}_t()}return qe},Be=function(qe,rt,je){var Ae=jt(qe,rt,je);Ae===G?delete qe[rt]:qe[rt]=Ae},jt=function(qe,rt,je){var Ae=qe[rt],lt;if(typeof Ae=="object"&&Ae)if(H.call(Ae)==Ze)for(lt=Ae.length;lt--;)Be(Ae,lt,je);else Y(Ae,function(Nt){Be(Ae,Nt,je)});return je.call(qe,rt,Ae)};g.parse=function(qe,rt){var je,Ae;return _e=0,nt=""+qe,je=Se(bt()),bt()!="$"&&_t(),_e=nt=null,rt&&H.call(rt)==Ne?jt((Ae={},Ae[""]=je,Ae),"",rt):je}}}return g.runInContext=a,g}if(r&&!t)a(n,r);else{var s=n.JSON,o=n.JSON3,c=!1,l=a(n,n.JSON3={noConflict:function(){return c||(c=!0,n.JSON=s,n.JSON3=o,s=o=null),l}});n.JSON={parse:l.parse,stringify:l.stringify}}t&&define(function(){return l})}).call(Yd)});var ZF=R((D1e,QF)=>{QF.exports=Za;function Za(t){if(t)return gne(t)}function gne(t){for(var e in Za.prototype)t[e]=Za.prototype[e];return t}Za.prototype.on=Za.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this};Za.prototype.once=function(t,e){var r=this;this._callbacks=this._callbacks||{};function n(){r.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Za.prototype.off=Za.prototype.removeListener=Za.prototype.removeAllListeners=Za.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(arguments.length==1)return delete this._callbacks[t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return this};Za.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};Za.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]};Za.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var tM=R((O1e,eM)=>{eM.exports=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"}});var OT=R((P1e,rM)=>{rM.exports=mne;function mne(t){return window.Buffer&&window.Buffer.isBuffer(t)||window.ArrayBuffer&&t instanceof ArrayBuffer}});var nM=R(cy=>{var PT=tM(),iM=OT();cy.deconstructPacket=function(t){var e=[],r=t.data;function n(a){if(!a)return a;if(iM(a)){var s={_placeholder:!0,num:e.length};return e.push(a),s}else if(PT(a)){for(var o=new Array(a.length),c=0;c<a.length;c++)o[c]=n(a[c]);return o}else if(typeof a=="object"&&!(a instanceof Date)){var o={};for(var l in a)o[l]=n(a[l]);return o}return a}var i=t;return i.data=n(r),i.attachments=e.length,{packet:i,buffers:e}};cy.reconstructPacket=function(t,e){var r=0;function n(i){if(i&&i._placeholder){var a=e[i.num];return a}else if(PT(i)){for(var s=0;s<i.length;s++)i[s]=n(i[s]);return i}else if(i&&typeof i=="object"){for(var o in i)i[o]=n(i[o]);return i}return i}return t.data=n(t.data),t.attachments=void 0,t};cy.removeBlobs=function(t,e){function r(a,s,o){if(!a)return a;if(window.Blob&&a instanceof Blob||window.File&&a instanceof File){n++;var c=new FileReader;c.onload=function(){o?o[s]=this.result:i=this.result,--n||e(i)},c.readAsArrayBuffer(a)}else if(PT(a))for(var l=0;l<a.length;l++)r(a[l],l,a);else if(a&&typeof a=="object"&&!iM(a))for(var f in a)r(a[f],f,a)}var n=0,i=t;r(i),n||e(i)}});var dy=R(Gi=>{var LT=YF()("socket.io-parser"),aM=JF(),vne=ZF(),RT=nM(),yne=OT();Gi.protocol=4;Gi.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"];Gi.CONNECT=0;Gi.DISCONNECT=1;Gi.EVENT=2;Gi.ACK=3;Gi.ERROR=4;Gi.BINARY_EVENT=5;Gi.BINARY_ACK=6;Gi.Encoder=sM;Gi.Decoder=ly;function sM(){}sM.prototype.encode=function(t,e){if(LT("encoding packet %j",t),Gi.BINARY_EVENT==t.type||Gi.BINARY_ACK==t.type)bne(t,e);else{var r=oM(t);e([r])}};function oM(t){var e="",r=!1;return e+=t.type,(Gi.BINARY_EVENT==t.type||Gi.BINARY_ACK==t.type)&&(e+=t.attachments,e+="-"),t.nsp&&t.nsp!="/"&&(r=!0,e+=t.nsp),t.id!=null&&(r&&(e+=",",r=!1),e+=t.id),t.data!=null&&(r&&(e+=","),e+=aM.stringify(t.data)),LT("encoded %j as %s",t,e),e}function bne(t,e){function r(n){var i=RT.deconstructPacket(n),a=oM(i.packet),s=i.buffers;s.unshift(a),e(s)}RT.removeBlobs(t,r)}function ly(){this.reconstructor=null}vne(ly.prototype);ly.prototype.add=function(t){var e;if(typeof t=="string")e=_ne(t),Gi.BINARY_EVENT==e.type||Gi.BINARY_ACK==e.type?(this.reconstructor=new NT(e),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",e)):this.emit("decoded",e);else if(yne(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,this.emit("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)};function _ne(t){var e={},r=0;if(e.type=Number(t.charAt(0)),Gi.types[e.type]==null)return uM();if(Gi.BINARY_EVENT==e.type||Gi.BINARY_ACK==e.type){for(var n="";t.charAt(++r)!="-"&&(n+=t.charAt(r),r!=t.length););if(n!=Number(n)||t.charAt(r)!="-")throw new Error("Illegal attachments");e.attachments=Number(n)}if(t.charAt(r+1)=="/")for(e.nsp="";++r;){var i=t.charAt(r);if(i==","||(e.nsp+=i,r==t.length))break}else e.nsp="/";var a=t.charAt(r+1);if(a!==""&&Number(a)==a){for(e.id="";++r;){var i=t.charAt(r);if(i==null||Number(i)!=i){--r;break}if(e.id+=t.charAt(r),r==t.length)break}e.id=Number(e.id)}return t.charAt(++r)&&(e=wne(e,t.substr(r))),LT("decoded %s as %j",t,e),e}function wne(t,e){try{t.data=aM.parse(e)}catch{return uM()}return t}ly.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function NT(t){this.reconPack=t,this.buffers=[]}NT.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=RT.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null};NT.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function uM(t){return{type:Gi.ERROR,data:"parser error"}}});var cM=R((N1e,FT)=>{try{FT.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{FT.exports=!1}});var fy=R((F1e,lM)=>{var Sne=cM();lM.exports=function(t){var e=t.xdomain,r=t.xscheme,n=t.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!e||Sne))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!r&&n)return new XDomainRequest}catch{}if(!e)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}});var fM=R((M1e,dM)=>{dM.exports=Object.keys||function(e){var r=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&r.push(i);return r}});var hM=R((U1e,pM)=>{pM.exports=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"}});var MT=R(($1e,gM)=>{var Tne=hM();gM.exports=Cne;function Cne(t){function e(r){if(!r)return!1;if(window.Buffer&&window.Buffer.isBuffer&&window.Buffer.isBuffer(r)||window.ArrayBuffer&&r instanceof ArrayBuffer||window.Blob&&r instanceof Blob||window.File&&r instanceof File)return!0;if(Tne(r)){for(var n=0;n<r.length;n++)if(e(r[n]))return!0}else if(r&&typeof r=="object"){r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON());for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&e(r[i]))return!0}return!1}return e(t)}});var vM=R((B1e,mM)=>{mM.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(e<0&&(e+=n),r<0&&(r+=n),r>n&&(r=n),e>=n||e>=r||n===0)return new ArrayBuffer(0);for(var i=new Uint8Array(t),a=new Uint8Array(r-e),s=e,o=0;s<r;s++,o++)a[o]=i[s];return a.buffer}});var bM=R((q1e,yM)=>{yM.exports=Ene;function Ene(t,e,r){var n=!1;return r=r||xne,i.count=t,t===0?e():i;function i(a,s){if(i.count<=0)throw new Error("after called too many times");--i.count,a?(n=!0,e(a),e=r):i.count===0&&!n&&e(null,s)}}function xne(){}});var _M=R((py,Mh)=>{(function(t){var e=typeof py=="object"&&py,r=typeof Mh=="object"&&Mh&&Mh.exports==e&&Mh,n=typeof window=="object"&&window;(n.global===n||n.window===n)&&(t=n);var i=String.fromCharCode;function a(N){for(var H=[],z=0,Y=N.length,G,ie;z<Y;)G=N.charCodeAt(z++),G>=55296&&G<=56319&&z<Y?(ie=N.charCodeAt(z++),(ie&64512)==56320?H.push(((G&1023)<<10)+(ie&1023)+65536):(H.push(G),z--)):H.push(G);return H}function s(N){for(var H=N.length,z=-1,Y,G="";++z<H;)Y=N[z],Y>65535&&(Y-=65536,G+=i(Y>>>10&1023|55296),Y=56320|Y&1023),G+=i(Y);return G}function o(N,H){return i(N>>H&63|128)}function c(N){if((N&4294967168)==0)return i(N);var H="";return(N&4294965248)==0?H=i(N>>6&31|192):(N&4294901760)==0?(H=i(N>>12&15|224),H+=o(N,6)):(N&4292870144)==0&&(H=i(N>>18&7|240),H+=o(N,12),H+=o(N,6)),H+=i(N&63|128),H}function l(N){for(var H=a(N),z=H.length,Y=-1,G,ie="";++Y<z;)G=H[Y],ie+=c(G);return ie}function f(){if(x>=y)throw Error("Invalid byte index");var N=m[x]&255;if(x++,(N&192)==128)return N&63;throw Error("Invalid continuation byte")}function g(){var N,H,z,Y,G;if(x>y)throw Error("Invalid byte index");if(x==y)return!1;if(N=m[x]&255,x++,(N&128)==0)return N;if((N&224)==192){var H=f();if(G=(N&31)<<6|H,G>=128)return G;throw Error("Invalid continuation byte")}if((N&240)==224){if(H=f(),z=f(),G=(N&15)<<12|H<<6|z,G>=2048)return G;throw Error("Invalid continuation byte")}if((N&248)==240&&(H=f(),z=f(),Y=f(),G=(N&15)<<18|H<<12|z<<6|Y,G>=65536&&G<=1114111))return G;throw Error("Invalid WTF-8 detected")}var m,y,x;function I(N){m=a(N),y=m.length,x=0;for(var H=[],z;(z=g())!==!1;)H.push(z);return s(H)}var A={version:"1.0.0",encode:l,decode:I};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd)define(function(){return A});else if(e&&!e.nodeType)if(r)r.exports=A;else{var F={},X=F.hasOwnProperty;for(var de in A)X.call(A,de)&&(e[de]=A[de])}else t.wtf8=A})(py)});var wM=R(UT=>{(function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),r=0;r<t.length;r++)e[t.charCodeAt(r)]=r;UT.encode=function(n){var i=new Uint8Array(n),a,s=i.length,o="";for(a=0;a<s;a+=3)o+=t[i[a]>>2],o+=t[(i[a]&3)<<4|i[a+1]>>4],o+=t[(i[a+1]&15)<<2|i[a+2]>>6],o+=t[i[a+2]&63];return s%3===2?o=o.substring(0,o.length-1)+"=":s%3===1&&(o=o.substring(0,o.length-2)+"=="),o},UT.decode=function(n){var i=n.length*.75,a=n.length,s,o=0,c,l,f,g;n[n.length-1]==="="&&(i--,n[n.length-2]==="="&&i--);var m=new ArrayBuffer(i),y=new Uint8Array(m);for(s=0;s<a;s+=4)c=e[n.charCodeAt(s)],l=e[n.charCodeAt(s+1)],f=e[n.charCodeAt(s+2)],g=e[n.charCodeAt(s+3)],y[o++]=c<<2|l>>4,y[o++]=(l&15)<<4|f>>2,y[o++]=(f&3)<<6|g&63;return m}})()});var EM=R((H1e,CM)=>{var hy=window.BlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder,SM=function(){try{var t=new Blob(["hi"]);return t.size===2}catch{return!1}}(),Ane=SM&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return t.size===2}catch{return!1}}(),kne=hy&&hy.prototype.append&&hy.prototype.getBlob;function TM(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var i=new Uint8Array(r.byteLength);i.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=i.buffer}t[e]=n}}}function Ine(t,e){e=e||{};var r=new hy;TM(t);for(var n=0;n<t.length;n++)r.append(t[n]);return e.type?r.getBlob(e.type):r.getBlob()}function Dne(t,e){return TM(t),new Blob(t,e||{})}CM.exports=function(){return SM?Ane?window.Blob:Dne:kne?Ine:void 0}()});var gl=R(ai=>{var One=fM(),Pne=MT(),gy=vM(),Rne=bM(),xM=_M(),$T;window&&window.ArrayBuffer&&($T=wM());var Lne=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),Nne=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),AM=Lne||Nne;ai.protocol=3;var my=ai.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},Uh=One(my),Fs={type:"error",data:"parser error"},Ms=EM();ai.encodePacket=function(t,e,r,n){typeof e=="function"&&(n=e,e=!1),typeof r=="function"&&(n=r,r=null);var i=t.data===void 0?void 0:t.data.buffer||t.data;if(window.ArrayBuffer&&i instanceof ArrayBuffer)return Mne(t,e,n);if(Ms&&i instanceof window.Blob)return $ne(t,e,n);if(i&&i.base64)return Fne(t,n);var a=my[t.type];return t.data!==void 0&&(a+=r?xM.encode(String(t.data)):String(t.data)),n(""+a)};function Fne(t,e){var r="b"+ai.packets[t.type]+t.data.data;return e(r)}function Mne(t,e,r){if(!e)return ai.encodeBase64Packet(t,r);var n=t.data,i=new Uint8Array(n),a=new Uint8Array(1+n.byteLength);a[0]=my[t.type];for(var s=0;s<i.length;s++)a[s+1]=i[s];return r(a.buffer)}function Une(t,e,r){if(!e)return ai.encodeBase64Packet(t,r);var n=new FileReader;return n.onload=function(){t.data=n.result,ai.encodePacket(t,e,!0,r)},n.readAsArrayBuffer(t.data)}function $ne(t,e,r){if(!e)return ai.encodeBase64Packet(t,r);if(AM)return Une(t,e,r);var n=new Uint8Array(1);n[0]=my[t.type];var i=new Ms([n.buffer,t.data]);return r(i)}ai.encodeBase64Packet=function(t,e){var r="b"+ai.packets[t.type];if(Ms&&t.data instanceof window.Blob){var n=new FileReader;return n.onload=function(){var c=n.result.split(",")[1];e(r+c)},n.readAsDataURL(t.data)}var i;try{i=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch{for(var a=new Uint8Array(t.data),s=new Array(a.length),o=0;o<a.length;o++)s[o]=a[o];i=String.fromCharCode.apply(null,s)}return r+=window.btoa(i),e(r)};ai.decodePacket=function(t,e,r){if(t===void 0)return Fs;if(typeof t=="string"){if(t.charAt(0)=="b")return ai.decodeBase64Packet(t.substr(1),e);if(r&&(t=Bne(t),t===!1))return Fs;var i=t.charAt(0);return Number(i)!=i||!Uh[i]?Fs:t.length>1?{type:Uh[i],data:t.substring(1)}:{type:Uh[i]}}var n=new Uint8Array(t),i=n[0],a=gy(t,1);return Ms&&e==="blob"&&(a=new Ms([a])),{type:Uh[i],data:a}};function Bne(t){try{t=xM.decode(t)}catch{return!1}return t}ai.decodeBase64Packet=function(t,e){var r=Uh[t.charAt(0)];if(!$T)return{type:r,data:{base64:!0,data:t.substr(1)}};var n=$T.decode(t.substr(1));return e==="blob"&&Ms&&(n=new Ms([n])),{type:r,data:n}};ai.encodePayload=function(t,e,r){typeof e=="function"&&(r=e,e=null);var n=Pne(t);if(e&&n)return Ms&&!AM?ai.encodePayloadAsBlob(t,r):ai.encodePayloadAsArrayBuffer(t,r);if(!t.length)return r("0:");function i(s){return s.length+":"+s}function a(s,o){ai.encodePacket(s,n?e:!1,!0,function(c){o(null,i(c))})}BT(t,a,function(s,o){return r(o.join(""))})};function BT(t,e,r){for(var n=new Array(t.length),i=Rne(t.length,r),a=function(o,c,l){e(c,function(f,g){n[o]=g,l(f,n)})},s=0;s<t.length;s++)a(s,t[s],i)}ai.decodePayload=function(t,e,r){if(typeof t!="string")return ai.decodePayloadAsBinary(t,e,r);typeof e=="function"&&(r=e,e=null);var n;if(t=="")return r(Fs,0,1);for(var i="",a,s,o=0,c=t.length;o<c;o++){var l=t.charAt(o);if(l!=":")i+=l;else{if(i==""||i!=(a=Number(i))||(s=t.substr(o+1,a),i!=s.length))return r(Fs,0,1);if(s.length){if(n=ai.decodePacket(s,e,!0),Fs.type==n.type&&Fs.data==n.data)return r(Fs,0,1);var f=r(n,o+a,c);if(f===!1)return}o+=a,i=""}}if(i!="")return r(Fs,0,1)};ai.encodePayloadAsArrayBuffer=function(t,e){if(!t.length)return e(new ArrayBuffer(0));function r(n,i){ai.encodePacket(n,!0,!0,function(a){return i(null,a)})}BT(t,r,function(n,i){var a=i.reduce(function(c,l){var f;return typeof l=="string"?f=l.length:f=l.byteLength,c+f.toString().length+f+2},0),s=new Uint8Array(a),o=0;return i.forEach(function(c){var l=typeof c=="string",f=c;if(l){for(var y=new Uint8Array(c.length),g=0;g<c.length;g++)y[g]=c.charCodeAt(g);f=y.buffer}l?s[o++]=0:s[o++]=1;for(var m=f.byteLength.toString(),g=0;g<m.length;g++)s[o++]=parseInt(m[g]);s[o++]=255;for(var y=new Uint8Array(f),g=0;g<y.length;g++)s[o++]=y[g]}),e(s.buffer)})};ai.encodePayloadAsBlob=function(t,e){function r(n,i){ai.encodePacket(n,!0,!0,function(a){var s=new Uint8Array(1);if(s[0]=1,typeof a=="string"){for(var o=new Uint8Array(a.length),c=0;c<a.length;c++)o[c]=a.charCodeAt(c);a=o.buffer,s[0]=0}for(var l=a instanceof ArrayBuffer?a.byteLength:a.size,f=l.toString(),g=new Uint8Array(f.length+1),c=0;c<f.length;c++)g[c]=parseInt(f[c]);if(g[f.length]=255,Ms){var m=new Ms([s.buffer,g.buffer,a]);i(null,m)}})}BT(t,r,function(n,i){return e(new Ms(i))})};ai.decodePayloadAsBinary=function(t,e,r){typeof e=="function"&&(r=e,e=null);for(var n=t,i=[],a=!1;n.byteLength>0;){for(var s=new Uint8Array(n),o=s[0]===0,c="",l=1;s[l]!=255;l++){if(c.length>310){a=!0;break}c+=s[l]}if(a)return r(Fs,0,1);n=gy(n,2+c.length),c=parseInt(c);var f=gy(n,0,c);if(o)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch{var g=new Uint8Array(f);f="";for(var l=0;l<g.length;l++)f+=String.fromCharCode(g[l])}i.push(f),n=gy(n,c)}var m=i.length;i.forEach(function(y,x){r(ai.decodePacket(y,e,!0),x,m)})}});var Jd=R((z1e,qT)=>{typeof qT<"u"&&(qT.exports=es);function es(t){if(t)return qne(t)}function qne(t){for(var e in es.prototype)t[e]=es.prototype[e];return t}es.prototype.on=es.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};es.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};es.prototype.off=es.prototype.removeListener=es.prototype.removeAllListeners=es.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return this};es.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};es.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};es.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var vy=R((V1e,kM)=>{var jne=gl(),Hne=Jd();kM.exports=go;function go(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}Hne(go.prototype);go.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this};go.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this};go.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this};go.prototype.send=function(t){if(this.readyState==="open")this.write(t);else throw new Error("Transport not open")};go.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")};go.prototype.onData=function(t){var e=jne.decodePacket(t,this.socket.binaryType);this.onPacket(e)};go.prototype.onPacket=function(t){this.emit("packet",t)};go.prototype.onClose=function(){this.readyState="closed",this.emit("close")}});var yy=R(jT=>{jT.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e};jT.decode=function(t){for(var e={},r=t.split("&"),n=0,i=r.length;n<i;n++){var a=r[n].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}});var $h=R((K1e,IM)=>{IM.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}});var zT=R((X1e,LM)=>{"use strict";var PM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),by=64,RM={},DM=0,nc=0,OM;function HT(t){var e="";do e=PM[t%by]+e,t=Math.floor(t/by);while(t>0);return e}function Gne(t){var e=0;for(nc=0;nc<t.length;nc++)e=e*by+RM[t.charAt(nc)];return e}function GT(){var t=HT(+new Date);return t!==OM?(DM=0,OM=t):t+"."+HT(DM++)}for(;nc<by;nc++)RM[PM[nc]]=nc;GT.encode=HT;GT.decode=Gne;LM.exports=GT});var VT=R((Y1e,MM)=>{var NM=vy(),zne=yy(),FM=gl(),Vne=$h(),Wne=zT(),Us=hu()("engine.io-client:polling");MM.exports=mo;var Kne=function(){var t=fy(),e=new t({xdomain:!1});return e.responseType!=null}();function mo(t){var e=t&&t.forceBase64;(!Kne||e)&&(this.supportsBinary=!1),NM.call(this,t)}Vne(mo,NM);mo.prototype.name="polling";mo.prototype.doOpen=function(){this.poll()};mo.prototype.pause=function(t){var e=this;this.readyState="pausing";function r(){Us("paused"),e.readyState="paused",t()}if(this.polling||!this.writable){var n=0;this.polling&&(Us("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){Us("pre-pause polling complete"),--n||r()})),this.writable||(Us("we are currently writing - waiting to pause"),n++,this.once("drain",function(){Us("pre-pause writing complete"),--n||r()}))}else r()};mo.prototype.poll=function(){Us("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};mo.prototype.onData=function(t){var e=this;Us("polling got data %s",t);var r=function(n,i,a){if(e.readyState==="opening"&&e.onOpen(),n.type==="close")return e.onClose(),!1;e.onPacket(n)};FM.decodePayload(t,this.socket.binaryType,r),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():Us('ignoring poll - transport state "%s"',this.readyState))};mo.prototype.doClose=function(){var t=this;function e(){Us("writing close packet"),t.write([{type:"close"}])}this.readyState==="open"?(Us("transport open - closing"),e()):(Us("transport not open - deferring close"),this.once("open",e))};mo.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")};FM.encodePayload(t,this.supportsBinary,function(n){e.doWrite(n,r)})};mo.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";this.timestampRequests!==!1&&(t[this.timestampParam]=Wne()),!this.supportsBinary&&!t.sid&&(t.b64=1),t=zne.encode(t),this.port&&(e==="https"&&Number(this.port)!==443||e==="http"&&Number(this.port)!==80)&&(r=":"+this.port),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t}});var qM=R((J1e,KT)=>{var Xne=fy(),BM=VT(),Yne=Jd(),Jne=$h(),WT=hu()("engine.io-client:polling-xhr");KT.exports=Qd;KT.exports.Request=mn;function UM(){}function Qd(t){if(BM.call(this,t),this.requestTimeout=t.requestTimeout,window.location){var e=location.protocol==="https:",r=location.port;r||(r=e?443:80),this.xd=t.hostname!==window.location.hostname||r!==t.port,this.xs=t.secure!==e}else this.extraHeaders=t.extraHeaders}Jne(Qd,BM);Qd.prototype.supportsBinary=!0;Qd.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new mn(t)};Qd.prototype.doWrite=function(t,e){var r=typeof t!="string"&&t!==void 0,n=this.request({method:"POST",data:t,isBinary:r}),i=this;n.on("success",e),n.on("error",function(a){i.onError("xhr post error",a)}),this.sendXhr=n};Qd.prototype.doPoll=function(){WT("xhr poll");var t=this.request(),e=this;t.on("data",function(r){e.onData(r)}),t.on("error",function(r){e.onError("xhr poll error",r)}),this.pollXhr=t};function mn(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}Yne(mn.prototype);mn.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new Xne(t),r=this;try{WT("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders){e.setDisableHeaderCheck(!0);for(var n in this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&e.setRequestHeader(n,this.extraHeaders[n])}}catch{}if(this.supportsBinary&&(e.responseType="arraybuffer"),this.method==="POST")try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{e.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in e&&(e.withCredentials=!0),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){r.onLoad()},e.onerror=function(){r.onError(e.responseText)}):e.onreadystatechange=function(){e.readyState===4&&(e.status===200||e.status===1223?r.onLoad():setTimeout(function(){r.onError(e.status)},0))},WT("xhr data %s",this.data),e.send(this.data)}catch(i){setTimeout(function(){r.onError(i)},0);return}window.document&&(this.index=mn.requestsCount++,mn.requests[this.index]=this)};mn.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};mn.prototype.onData=function(t){this.emit("data",t),this.onSuccess()};mn.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)};mn.prototype.cleanup=function(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=UM:this.xhr.onreadystatechange=UM,t)try{this.xhr.abort()}catch{}window.document&&delete mn.requests[this.index],this.xhr=null}};mn.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch{}if(e==="application/octet-stream")t=this.xhr.response||this.xhr.responseText;else if(!this.supportsBinary)t=this.xhr.responseText;else try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch{for(var r=new Uint8Array(this.xhr.response),n=[],i=0,a=r.length;i<a;i++)n.push(r[i]);t=String.fromCharCode.apply(null,n)}}catch(s){this.onError(s)}t!=null&&this.onData(t)};mn.prototype.hasXDR=function(){return typeof window.XDomainRequest<"u"&&!this.xs&&this.enablesXDR};mn.prototype.abort=function(){this.cleanup()};mn.requestsCount=0;mn.requests={};window.document&&(window.attachEvent?window.attachEvent("onunload",$M):window.addEventListener&&window.addEventListener("beforeunload",$M,!1));function $M(){for(var t in mn.requests)mn.requests.hasOwnProperty(t)&&mn.requests[t].abort()}});var HM=R((Q1e,jM)=>{var XT=VT(),Qne=$h();jM.exports=Zd;var Zne=/\n/g,eae=/\\n/g,_y;function tae(){}function Zd(t){XT.call(this,t),this.query=this.query||{},_y||(window.___eio||(window.___eio=[]),_y=window.___eio),this.index=_y.length;var e=this;_y.push(function(r){e.onData(r)}),this.query.j=this.index,window.document&&window.addEventListener&&window.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=tae)},!1)}Qne(Zd,XT);Zd.prototype.supportsBinary=!1;Zd.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),XT.prototype.doClose.call(this)};Zd.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(i){t.onError("jsonp poll error",i)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e;var n=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var i=document.createElement("iframe");document.body.appendChild(i),document.body.removeChild(i)},100)};Zd.prototype.doWrite=function(t,e){var r=this;if(!this.form){var n=document.createElement("form"),i=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index,s;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=a,n.method="POST",n.setAttribute("accept-charset","utf-8"),i.name="d",n.appendChild(i),document.body.appendChild(n),this.form=n,this.area=i}this.form.action=this.uri();function o(){c(),e()}function c(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(f){r.onError("jsonp polling iframe removal error",f)}try{var l='<iframe src="javascript:0" name="'+r.iframeId+'">';s=document.createElement(l)}catch{s=document.createElement("iframe"),s.name=r.iframeId,s.src="javascript:0"}s.id=r.iframeId,r.form.appendChild(s),r.iframe=s}c(),t=t.replace(eae,`\\
`),this.area.value=t.replace(Zne,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){r.iframe.readyState==="complete"&&o()}:this.iframe.onload=o}});var GM=R(()=>{});var WM=R((tke,VM)=>{var YT=vy(),rae=gl(),iae=yy(),nae=$h(),aae=zT(),sae=hu()("engine.io-client:websocket"),zM=window.WebSocket||window.MozWebSocket,JT;if(typeof window>"u")try{JT=GM()}catch{}var ml=zM;!ml&&typeof window>"u"&&(ml=JT);VM.exports=gs;function gs(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=zM&&!t.forceNode,this.usingBrowserWebSocket||(ml=JT),YT.call(this,t)}nae(gs,YT);gs.prototype.name="websocket";gs.prototype.supportsBinary=!0;gs.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new ml(t):new ml(t,e,r)}catch(n){return this.emit("error",n)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};gs.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}};gs.prototype.write=function(t){var e=this;this.writable=!1;for(var r=t.length,n=0,i=r;n<i;n++)(function(s){rae.encodePacket(s,e.supportsBinary,function(o){if(!e.usingBrowserWebSocket){var c={};if(s.options&&(c.compress=s.options.compress),e.perMessageDeflate){var l=typeof o=="string"?window.Buffer.byteLength(o):o.length;l<e.perMessageDeflate.threshold&&(c.compress=!1)}}try{e.usingBrowserWebSocket?e.ws.send(o):e.ws.send(o,c)}catch{sae("websocket closed before onclose event")}--r||a()})})(t[n]);function a(){e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0)}};gs.prototype.onClose=function(){YT.prototype.onClose.call(this)};gs.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};gs.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";this.port&&(e==="wss"&&Number(this.port)!==443||e==="ws"&&Number(this.port)!==80)&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=aae()),this.supportsBinary||(t.b64=1),t=iae.encode(t),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t};gs.prototype.check=function(){return!!ml&&!("__initialize"in ml&&this.name===gs.prototype.name)}});var ZT=R(QT=>{var oae=fy(),uae=qM(),cae=HM(),lae=WM();QT.polling=dae;QT.websocket=lae;function dae(t){var e,r=!1,n=!1,i=t.jsonp!==!1;if(window.location){var a=location.protocol==="https:",s=location.port;s||(s=a?443:80),r=t.hostname!==location.hostname||s!==t.port,n=t.secure!==a}if(t.xdomain=r,t.xscheme=n,e=new oae(t),"open"in e&&!t.forceJSONP)return new uae(t);if(!i)throw new Error("JSONP disabled");return new cae(t)}});var XM=R((ike,KM)=>{var fae=/^[\],:{}\s]*$/,pae=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,hae=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,gae=/(?:^|:|,)(?:\s*\[)+/g,mae=/^\s+/,vae=/\s+$/;KM.exports=function(e){if(typeof e!="string"||!e)return null;if(e=e.replace(mae,"").replace(vae,""),window.JSON&&JSON.parse)return JSON.parse(e);if(fae.test(e.replace(pae,"@").replace(hae,"]").replace(gae,"")))return new Function("return "+e)()}});var ZM=R((nke,QM)=>{var yae=ZT(),bae=Jd(),nn=hu()("engine.io-client:socket"),_ae=Fv(),JM=gl(),YM=kT(),wae=XM(),Sae=yy();QM.exports=yr;function yr(t,e){if(!(this instanceof yr))return new yr(t,e);e=e||{},t&&typeof t=="object"&&(e=t,t=null),t?(t=YM(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=YM(e.host).host),this.secure=e.secure!=null?e.secure:window.location&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(window.location?location.hostname:"localhost"),this.port=e.port||(window.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},typeof this.query=="string"&&(this.query=Sae.decode(this.query)),this.upgrade=e.upgrade!==!1,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=e.jsonp!==!1,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=e.perMessageDeflate!==!1?e.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=e.rejectUnauthorized===void 0?null:e.rejectUnauthorized,this.forceNode=!!e.forceNode;var r=typeof window=="object"&&window;r.global===r&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}yr.priorWebsocketSuccess=!1;bae(yr.prototype);yr.protocol=JM.protocol;yr.Socket=yr;yr.Transport=vy();yr.transports=ZT();yr.parser=gl();yr.prototype.createTransport=function(t){nn('creating transport "%s"',t);var e=Tae(this.query);e.EIO=JM.protocol,e.transport=t,this.id&&(e.sid=this.id);var r=new yae[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return r};function Tae(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}yr.prototype.open=function(){var t;if(this.rememberUpgrade&&yr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){var e=this;setTimeout(function(){e.emit("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)};yr.prototype.setTransport=function(t){nn("setting transport %s",t.name);var e=this;this.transport&&(nn("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(r){e.onPacket(r)}).on("error",function(r){e.onError(r)}).on("close",function(){e.onClose("transport close")})};yr.prototype.probe=function(t){nn('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),r=!1,n=this;yr.priorWebsocketSuccess=!1;function i(){if(n.onlyBinaryUpgrades){var g=!this.supportsBinary&&n.transport.supportsBinary;r=r||g}r||(nn('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(m){if(!r)if(m.type==="pong"&&m.data==="probe"){if(nn('probe transport "%s" pong',t),n.upgrading=!0,n.emit("upgrading",e),!e)return;yr.priorWebsocketSuccess=e.name==="websocket",nn('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){r||n.readyState!=="closed"&&(nn("changing transport and sending upgrade packet"),f(),n.setTransport(e),e.send([{type:"upgrade"}]),n.emit("upgrade",e),e=null,n.upgrading=!1,n.flush())})}else{nn('probe transport "%s" failed',t);var y=new Error("probe error");y.transport=e.name,n.emit("upgradeError",y)}}))}function a(){r||(r=!0,f(),e.close(),e=null)}function s(g){var m=new Error("probe error: "+g);m.transport=e.name,a(),nn('probe transport "%s" failed because of error: %s',t,g),n.emit("upgradeError",m)}function o(){s("transport closed")}function c(){s("socket closed")}function l(g){e&&g.name!==e.name&&(nn('"%s" works - aborting "%s"',g.name,e.name),a())}function f(){e.removeListener("open",i),e.removeListener("error",s),e.removeListener("close",o),n.removeListener("close",c),n.removeListener("upgrading",l)}e.once("open",i),e.once("error",s),e.once("close",o),this.once("close",c),this.once("upgrading",l),e.open()};yr.prototype.onOpen=function(){if(nn("socket open"),this.readyState="open",yr.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){nn("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}};yr.prototype.onPacket=function(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(nn('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(wae(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data);break}else nn('packet received with socket readyState "%s"',this.readyState)};yr.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};yr.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){e.readyState!=="closed"&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)};yr.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){nn("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)};yr.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})};yr.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};yr.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(nn("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};yr.prototype.write=yr.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this};yr.prototype.sendPacket=function(t,e,r,n){if(typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=null),!(this.readyState==="closing"||this.readyState==="closed")){r=r||{},r.compress=r.compress!==!1;var i={type:t,data:e,options:r};this.emit("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}};yr.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}function e(){t.onClose("forced close"),nn("socket closing - telling transport to close"),t.transport.close()}function r(){t.removeListener("upgrade",r),t.removeListener("upgradeError",r),e()}function n(){t.once("upgrade",r),t.once("upgradeError",r)}return this};yr.prototype.onError=function(t){nn("socket error %j",t),yr.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)};yr.prototype.onClose=function(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){nn('socket close with reason: "%s"',t);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),r.writeBuffer=[],r.prevBufferLen=0}};yr.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~_ae(this.transports,t[r])&&e.push(t[r]);return e}});var eU=R((ake,eC)=>{eC.exports=ZM();eC.exports.parser=gl()});var rU=R((ske,tU)=>{tU.exports=eU()});var nU=R((oke,iU)=>{iU.exports=Cae;function Cae(t,e){var r=[];e=e||0;for(var n=e||0;n<t.length;n++)r[n-e]=t[n];return r}});var tC=R((uke,aU)=>{aU.exports=Eae;function Eae(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}});var rC=R((cke,oU)=>{var sU=[].slice;oU.exports=function(t,e){if(typeof e=="string"&&(e=t[e]),typeof e!="function")throw new Error("bind() requires a function");var r=sU.call(arguments,2);return function(){return e.apply(t,r.concat(sU.call(arguments)))}}});var oC=R((lU,dU)=>{var Ua=dy(),uU=Jd(),aC=nU(),iC=tC(),nC=rC(),vo=hu()("socket.io-client:socket"),cU=MT();dU.exports=lU=Qi;var xae={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},sC=uU.prototype.emit;function Qi(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}uU(Qi.prototype);Qi.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[iC(t,"open",nC(this,"onopen")),iC(t,"packet",nC(this,"onpacket")),iC(t,"close",nC(this,"onclose"))]}};Qi.prototype.open=Qi.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)};Qi.prototype.send=function(){var t=aC(arguments);return t.unshift("message"),this.emit.apply(this,t),this};Qi.prototype.emit=function(t){if(xae.hasOwnProperty(t))return sC.apply(this,arguments),this;var e=aC(arguments),r=Ua.EVENT;cU(e)&&(r=Ua.BINARY_EVENT);var n={type:r,data:e};return n.options={},n.options.compress=!this.flags||this.flags.compress!==!1,typeof e[e.length-1]=="function"&&(vo("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this};Qi.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)};Qi.prototype.onopen=function(){vo("transport is open - connecting"),this.nsp!=="/"&&(this.query?this.packet({type:Ua.CONNECT,query:this.query}):this.packet({type:Ua.CONNECT}))};Qi.prototype.onclose=function(t){vo("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)};Qi.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case Ua.CONNECT:this.onconnect();break;case Ua.EVENT:this.onevent(t);break;case Ua.BINARY_EVENT:this.onevent(t);break;case Ua.ACK:this.onack(t);break;case Ua.BINARY_ACK:this.onack(t);break;case Ua.DISCONNECT:this.ondisconnect();break;case Ua.ERROR:this.emit("error",t.data);break}};Qi.prototype.onevent=function(t){var e=t.data||[];vo("emitting event %j",e),t.id!=null&&(vo("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?sC.apply(this,e):this.receiveBuffer.push(e)};Qi.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var n=aC(arguments);vo("sending ack %j",n);var i=cU(n)?Ua.BINARY_ACK:Ua.ACK;e.packet({type:i,id:t,data:n})}}};Qi.prototype.onack=function(t){var e=this.acks[t.id];typeof e=="function"?(vo("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):vo("bad ack %s",t.id)};Qi.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()};Qi.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)sC.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]};Qi.prototype.ondisconnect=function(){vo("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")};Qi.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)};Qi.prototype.close=Qi.prototype.disconnect=function(){return this.connected&&(vo("performing disconnect (%s)",this.nsp),this.packet({type:Ua.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this};Qi.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}});var pU=R((lke,fU)=>{fU.exports=ef;function ef(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ef.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};ef.prototype.reset=function(){this.attempts=0};ef.prototype.setMin=function(t){this.ms=t};ef.prototype.setMax=function(t){this.max=t};ef.prototype.setJitter=function(t){this.jitter=t}});var uC=R((dke,vU)=>{var Aae=rU(),kae=oC(),Iae=Jd(),hU=dy(),ac=tC(),tf=rC(),aa=hu()("socket.io-client:manager"),gU=Fv(),Dae=pU(),mU=Object.prototype.hasOwnProperty;vU.exports=Nr;function Nr(t,e){if(!(this instanceof Nr))return new Nr(t,e);t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new Dae({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new hU.Encoder,this.decoder=new hU.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}Nr.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)mU.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)};Nr.prototype.updateSocketIds=function(){for(var t in this.nsps)mU.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)};Iae(Nr.prototype);Nr.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection};Nr.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts};Nr.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay};Nr.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor};Nr.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax};Nr.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout};Nr.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};Nr.prototype.open=Nr.prototype.connect=function(t,e){if(aa("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;aa("opening %s",this.uri),this.engine=Aae(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=ac(r,"open",function(){n.onopen(),t&&t()}),a=ac(r,"error",function(c){if(aa("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",c),t){var l=new Error("Connection error");l.data=c,t(l)}else n.maybeReconnectOnOpen()});if(this._timeout!==!1){var s=this._timeout;aa("connect attempt will timeout after %d",s);var o=setTimeout(function(){aa("connect attempt timed out after %d",s),i.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(o)}})}return this.subs.push(i),this.subs.push(a),this};Nr.prototype.onopen=function(){aa("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(ac(t,"data",tf(this,"ondata"))),this.subs.push(ac(t,"ping",tf(this,"onping"))),this.subs.push(ac(t,"pong",tf(this,"onpong"))),this.subs.push(ac(t,"error",tf(this,"onerror"))),this.subs.push(ac(t,"close",tf(this,"onclose"))),this.subs.push(ac(this.decoder,"decoded",tf(this,"ondecoded")))};Nr.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};Nr.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Nr.prototype.ondata=function(t){this.decoder.add(t)};Nr.prototype.ondecoded=function(t){this.emit("packet",t)};Nr.prototype.onerror=function(t){aa("error",t),this.emitAll("error",t)};Nr.prototype.socket=function(t,e){var r=this.nsps[t];if(!r){r=new kae(this,t,e),this.nsps[t]=r;var n=this;r.on("connecting",i),r.on("connect",function(){r.id=n.engine.id}),this.autoConnect&&i()}function i(){~gU(n.connecting,r)||n.connecting.push(r)}return r};Nr.prototype.destroy=function(t){var e=gU(this.connecting,t);~e&&this.connecting.splice(e,1),!this.connecting.length&&this.close()};Nr.prototype.packet=function(t){aa("writing packet %j",t);var e=this;t.query&&t.type===0&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()}))};Nr.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}};Nr.prototype.cleanup=function(){aa("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};Nr.prototype.close=Nr.prototype.disconnect=function(){aa("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};Nr.prototype.onclose=function(t){aa("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()};Nr.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)aa("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();aa("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var r=setTimeout(function(){t.skipReconnect||(aa("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),!t.skipReconnect&&t.open(function(n){n?(aa("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",n.data)):(aa("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(r)}})}};Nr.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}});var cC=R((vl,wU)=>{var Oae=HF(),Pae=dy(),yU=uC(),bU=hu()("socket.io-client");wU.exports=vl=_U;var Bh=vl.managers={};function _U(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};var r=Oae(t),n=r.source,i=r.id,a=r.path,s=Bh[i]&&a in Bh[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||s,c;return o?(bU("ignoring socket cache for %s",n),c=yU(n,e)):(Bh[i]||(bU("new io instance for %s",n),Bh[i]=yU(n,e)),c=Bh[i]),r.query&&!e.query?e.query=r.query:e&&typeof e.query=="object"&&(e.query=Rae(e.query)),c.socket(r.path,e)}function Rae(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}vl.protocol=Pae.protocol;vl.connect=_U;vl.Manager=uC();vl.Socket=oC()});var TU=R((fke,SU)=>{"use strict";var Lae=cC(),dC={transform:function(t){var e=new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),"g");return t.replace(e,"")}},lC=!1,Nae=Tn(),an=Er(),Fae=kh(),gu=Rr(),Mae=Ri().getInstallCommand,Uae=Ri().getPDBCommand,$ae=hn(),Bae=hl(),fC=".jqconsole-cursor",wy;function qae(t){function e(n){console.log("Connected")}function r(n){n.detail.clean?console.log("Disconnected"):console.log("Something went wrong, connection is closed")}wy=new window.RFB(document.getElementById("screen"),t,{}),wy.addEventListener("connect",e),wy.addEventListener("disconnect",r)}function $s(t,e){var r=this;r.replConsole=Bae({welcomeString:"",promptLabel:""}),$(fC).css("visibility","hidden"),r.running=!1,r.debugging=!1,r.editor=t,r.q=[],r.output="",r.connected=!1,r.attemptReconnection=!0,r.numRetries=0,r.connection,r.confirmedConnection=$.Deferred().reject(),r.spawnUUID,r.execUUID,r.lang=e,r.editor.typeTester.isJava()&&(r.javaErrorChecker=new Fae(t)),r.isGraphics=r.editor.typeTester.isPythonGraphics()||r.editor.typeTester.isJavaServerGraphics()||r.editor.typeTester.isPygame()||r.editor.typeTester.isPythonProcessing()||r.editor.typeTester.isJavaProcessing(),r.docker_image=t.itemDockerImage,r.url="scalinghub.codehs.com",r.confirmConnection=function(){return(!r.connection||!r.connection.connected)&&r.attemptReconnection?r.reconnect():r.confirmedConnection},r.reconnect=function(){return r.confirmedConnection=$.Deferred(),r.setupConnection().then(function(){r.numRetries=0,setTimeout(function(){r.setupSocket().then(function(i){r.confirmedConnection.resolve(i)})},1e3)}),r.confirmedConnection},r.setupSocket=function(){var i=$.Deferred();return r.attemptReconnection=!0,r.connection=Lae(lC?"ws://localhost:443":"wss://"+r.url+":443/",{path:"/user/"+r.uuid+"/spawn",reconnection:!1}).on("connect",function(a){r.isGraphics&&qae((lC?"ws://localhost":"wss://"+r.url)+":443/user/"+r.uuid+"/graphics/"),r.connected=!0,i.resolve(a),r.q.length>0&&(r.q.forEach(function(s){s.type==="spawn"?r.spawn(s.code,s.options):s.type==="install"?r.install(s.file):s.type==="transfer"?r.transfer(s.code):s.type==="resize"&&r.resize()}),r.q=[]),r.running||(an.trigger("utils:enableButton",".run_code"),an.trigger("utils:enableButton","button.grade_code"))}).on("error",function(){r.attemptReconnection=!0}).on("disconnect",function(){if(r.connected=!1,this.disconnect(),r.attemptReconnection)return r.reconnect()}).on("stdout",function(a){an.trigger("ProgramRun:successful",Date.now());var s=dC.transform(a);r.debugging&&(s=r.parseDebuggerOutput(s)),r.replConsole.writeToConsole(s,!0),r.output+=s}).on("stderr",function(a){var s=dC.transform(a);r.replConsole.writeToConsole("stderr: "+s,!0),r.output+=s}).on("exit",function(a){an.trigger("ProgramRun:successful",Date.now()),an.trigger("utils:enableButton",".run_code"),an.trigger("utils:enableButton","button.grade_code"),$(fC).css("visibility","hidden"),r.output.length>0&&r.editor.typeTester.isJava()&&r.javaErrorChecker&&r.javaErrorChecker.check(r.output.split(`
`),r.codeTree)}).on("fs:change",function(a){r.editor.updateCodeExternally(a)}),i},r.setupConnection=function(){return r.uuid=Math.floor(Math.random()*1e4),r.attemptReconnection=!1,new Promise(function(i,a){fetch((lC?"http://localhost:443":"https://"+r.url)+"/hub/api/spinup/"+r.uuid+(r.docker_image&&r.isGraphics?"/config/"+r.docker_image:""),{method:"GET",headers:{Authorization:"token 8ec61780cf6896f2f8efbd8a6ce14aa9a25b397052aafae926823805b30bd037"},credentials:"include"}).then(function(s){if(s.status===202||s.status===201)i();else{if(s.statusText==="Conflict")return r.setupConnection().then(function(){r.numRetries=0,i()});setTimeout(function(){document.cookie="AWSALB= ; expires = Thu, 01 Jan 1970 00:00:00 GMT",r.numRetries++,r.numRetries=Math.min(5,r.numRetries),r.setupConnection().then(function(){r.numRetries=0,i()})},1e3*(Math.pow(2,r.numRetries)-1))}}).catch(function(s){setTimeout(function(){document.cookie="AWSALB= ; expires = Thu, 01 Jan 1970 00:00:00 GMT",r.numRetries++,r.numRetries=Math.min(5,r.numRetries),r.setupConnection().then(function(){r.numRetries=0,i()})},1e3*(Math.pow(2,r.numRetries)-1))})})},(!r.connection||!r.connection.connected)&&r.reconnect();var n=function(){r.attemptReconnection=!1,r.isGraphics&&wy.disconnect(),r.connection.emit("disconnect"),r.connection.disconnect()};$(window).on("beforeunload",n),$(document).one("turbolinks:before-render",function(){n(),$(window).off("beforeunload",n)})}Nae.inherits($s,$ae);$s.prototype.exec=function(t,e,r){var n=this;return new Promise(function(i,a){an.trigger("utils:disableButton",".run_code"),an.trigger("utils:disableButton","button.grade_code"),an.trigger("utils:disableButton","#grading-unit-test-run"),n.confirmConnection().then(function(){an.trigger("ProgramRun:create",{userId:r.codeUserID,itemId:r.itemID,usesHub:!0,startTime:Date.now()}),n.connection.once("exec_result",function(s){if(an.trigger("utils:enableButton",".run_code"),an.trigger("utils:enableButton","button.grade_code"),an.trigger("utils:enableButton","#grading-unit-test-run"),n.output+=s,an.trigger("ProgramRun:successful",Date.now()),n.editor.typeTester.isJava()&&n.javaErrorChecker){var o={name:"karel"},c=[];for(var l in e)if(e.hasOwnProperty(l)){var f={};f.name=l,f.contents=e[l],c.push(f)}o.contents=c,n.javaErrorChecker.check(n.output.split(`
`),o)}i(dC.transform(n.output))}).once("exec_stderr",function(s){s&&(n.output+=s)}),n.output="",n.connection.emit("exec",{cmd:t,files:e})})})};$s.prototype.run=function(t,e){var r=this;if(e.installPackages)r.install(t);else{var n=Mae(t,r.lang);n&&(e.installCommand=n),e.pythonDebugger&&(e.pdbCommand=Uae(r.editor.getBreakpoints())),an.trigger("ProgramRun:create",{userId:e.codeUserID,itemId:e.itemID,usesHub:!0,startTime:Date.now()}),r.spawn(t,e)}};$s.prototype.install=function(t){var e=this;return new Promise(function(r,n){!e.connected||!e.connection.connected?(e.q.push({type:"install",file:t}),e.attemptReconnection&&e.setupConnection().then(function(){e.numRetries=0,e.setupSocket().done(function(){r()})})):(e.connection.emit("transfer",t),e.lang==="python3"?e.connection.emit("spawn",{cmd:"sh",args:["-c",'pip3 install -r requirements.txt --user && echo "Requirements installed."']}):e.lang==="node"?e.connection.emit("spawn",{cmd:"sh",args:["-c","npm install"]}):alert("I WAS UNPREPARED FOR THIS"),r())})};$s.prototype.resize=function(){var t=this;if(!t.connected||!t.connection.connected){t.q.push({type:"resize"}),t.attemptReconnection&&t.setupConnection().then(function(){t.numRetries=0,t.setupSocket()});return}else{var e=document.getElementById("screen").getBoundingClientRect(),r={w:e.width,h:e.height};t.connection.emit("resize",r)}};$s.prototype.transfer=function(t){var e=this;if(!e.connected||!e.connection.connected){e.q.push({type:"transfer",code:t}),e.attemptReconnection&&e.setupConnection().then(function(){e.numRetries=0,e.setupSocket()});return}else t=Object.entries(t).reduce(function(r,n){var i=n[0],a=n[1];return i.endsWith("/.")||(r[i]=a),r},{}),e.connection.emit("transfer",t)};$s.prototype.spawn=function(t,e){var r=this;if(r.running=!0,an.trigger("utils:disableButton",".run_code"),an.trigger("utils:disableButton","button.grade_code"),!r.connected||!r.connection.connected){r.q.push({type:"spawn",code:t,options:e}),r.attemptReconnection&&r.setupConnection().then(function(){r.numRetries=0,r.setupSocket()});return}else{r.isGraphics&&r.resize(),r.output="",r.codeTree={name:"karel"};var n=[];for(var i in t)if(t.hasOwnProperty(i)){var a={};a.name=i,a.contents=t[i],n.push(a)}r.codeTree.contents=n,r.replConsole.reset(),function s(){$(fC).css("visibility","visible"),r.replConsole.promptForInput(function(o){r.connection.emit("stdin",o+`
`),s()})}(),r.transfer(t),r.connection.off("transferComplete"),r.connection.on("transferComplete",function(){var s;if("run.sh"in t&&r.connection.emit("spawn",{cmd:"sh",args:["run.sh"]}),r.lang=="c")r.connection.emit("spawn",{cmd:"sh",args:["-c","gcc *.c -o main && ./main"]});else if(r.lang=="c++")s=r.editor.progType===gu.ProgramType.CPP_FUNCTION?"scratchpad.cpp":"*.cpp",r.connection.emit("spawn",{cmd:"sh",args:["-c","gcc "+s+" -lstdc++ -o main && ./main"]});else if(r.lang=="scheme")r.connection.emit("spawn",{cmd:"sh",args:["-c","scheme"]});else if(r.lang=="bash")r.connection.emit("spawn",{cmd:"sh",args:["-c","sh"]});else if(r.lang=="python2")r.connection.emit("spawn",{cmd:"sh",args:["-c",(e.installCommand?e.installCommand+" && ":"")+"python2 main.py"]});else if(r.editor.progType===gu.ProgramType.PYTHON_PROCESSING)r.connection.emit("spawn",{cmd:"sh",args:["-c","java -jar /app/processing-py.jar main.py"]});else if(r.lang=="python3")s=r.editor.progType===gu.ProgramType.PYTHON3_FUNCTION?"scratchpad.py":"main.py",e.pythonDebugger&&e.pdbCommand?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c",(e.installCommand?e.installCommand+" && ":"")+"python3 -m "+e.pdbCommand+s]})):r.connection.emit("spawn",{cmd:"sh",args:["-c",(e.installCommand?e.installCommand+" && ":"")+"python3 "+s]});else if(r.editor.progType===gu.ProgramType.JAVA_PROCESSING){var o=Object.keys(t).filter(function(c){return c.endsWith(".java")}).join(" ");r.connection.emit("spawn",{cmd:"sh",args:["-c",'echo "Compiling..." && javac -cp .:/app/processing-jars/* '+o+" && java -cp .:/app/processing-jars/* "+e.mainClass]})}else r.lang=="java"?r.spawnJava(t,e):r.lang=="node"&&r.connection.emit("spawn",{cmd:"sh",args:["-c",(e.installCommand?e.installCommand+" && ":"")+"node default.js"]})})}};$s.prototype.stop=function(){var t=this;t.connection.emit("kill"),t.replConsole.reset(),an.trigger("utils:enableButton",".run_code"),an.trigger("utils:enableButton","button.grade_code"),an.trigger("utils:enableButton","#grading-unit-test-run"),(!t.connected||!t.connection.connected)&&t.reconnect()};$s.prototype.spawnJava=function(t,e){var r=this;function n(o){var c=!1;Object.keys(o).forEach(function(l){if(l.endsWith(".java")){var f=l.substr(0,l.length-5);Object.keys(o[l]).forEach(function(g){c=!0,r.connection.emit("stdin","stop at "+f+":"+g+`
`)})}}),c||(r.editor.progType===gu.ProgramType.JAVA_CONSOLE||r.editor.progType===gu.ProgramType.JAVA_METHOD?r.connection.emit("stdin","stop in "+e.mainClass+`.run
`):r.connection.emit("stdin","stop in "+e.mainClass+`.main
`))}var i=Object.keys(t).filter(function(o){return o.endsWith(".java")}).join(" "),a=r.editor.getBreakpoints(),s=Object.keys(t).filter(function(o){return o.endsWith(".jar")}).join(":./");r.editor.progType===gu.ProgramType.JAVA_CONSOLE?e.javaDebugger?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -g "+i+" && jdb -launch ConsoleProgram "+e.mainClass]}),n(a)):r.connection.emit("spawn",{cmd:"sh",args:["-c","javac "+i+" && java ConsoleProgram "+e.mainClass]}):r.editor.progType===gu.ProgramType.JAVA_METHOD?e.javaDebugger?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -g "+i+" && jdb -launch ConsoleProgram "+e.mainClass]}),n(a)):r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -cp .:/app/json.jar:/app/java-util-1.19.3.jar:"+s+" "+i+" && java -cp .:/app/json.jar:/app/java-util-1.19.3.jar:"+s+" ConsoleProgram "+e.mainClass]}):r.editor.progType===gu.ProgramType.JAVA_METHOD_MAIN?e.javaDebugger?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -g "+i+" && jdb -launch "+e.mainClass]}),n(a)):r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -cp .:/app/json.jar:/app/java-util-1.19.3.jar:"+s+" "+i+" && java -cp .:/app/json.jar:/app/java-util-1.19.3.jar:"+s+" "+e.mainClass]}):e.javaDebugger?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -g "+i+" && jdb -launch "+e.mainClass]}),n(a)):r.connection.emit("spawn",{cmd:"sh",args:["-c","javac "+(s?"-cp .:"+s+" ":"")+i+" && java "+(s?"-cp .:"+s+" ":"")+e.mainClass]})};$s.prototype.parseDebuggerOutput=function(t){var e=this,r=t,n,i,a,s,o;if(e.language=="python3"){n=/\/home\/karel\/([\w\d\/_]+\.py)\(([\d]+)\)/gm,a=n.exec(t),a&&a.length>=3&&(o=a[1],i=a[2],s=$('[data-filename="'+o+'"]'),e.editor.editorColumns.activateFile(s),e.editor.highlightLine(i,!0,o));var c=t.indexOf("> /home/karel/");c!=-1&&(r=t.substring(0,c)),r=r.replaceAll("(Pdb) ","")}else if(e.language=="java"){var l="VM Started: No frames on the current call stack";if(t.indexOf(l)!=-1)return e.connection.emit("stdin",`cont
`),"";n=/"thread=main", ([\w\d\/_$]+)\..*, line=([\d]+)\s/gm,a=n.exec(t),a&&a.length>=3&&(o=a[1]+".java",i=a[2],s=$('[data-filename="'+o+'"]'),e.editor.editorColumns.activateFile(s),e.editor.highlightLine(i,!0,o));for(var f=t.split(`
`),g=0,m=0;m<f.length;m++)f[m].indexOf('"thread=main"')!=-1&&(g=m);g!=0&&(r=f.splice(0,g-1).join(`
`)+f.splice(g+2).join(`
`)),r=r.replaceAll("main[1] ","").trim(),r.startsWith(">")&&(r=r.substring(1).trim()),r.length&&(r+=`
`)}return r};SU.exports=$s});var EU=R((pke,CU)=>{"use strict";var jae=cC(),Hae=function(t){return Promise.resolve(t)===t},hC={transform:function(t){var e=new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),"g");return t.replace(e,"")}},pC=!1,Gae=Tn(),sn=Er(),zae=kh(),mu=Rr(),Vae=Ri().getInstallCommand,Wae=Ri().getPDBCommand,Kae=hn(),Xae=hl(),gC=".jqconsole-cursor",Yae=".jqconsole + div textarea",yl;window.LOGGING=!1;var Bs=function(t){window.LOGGING&&console.info(t)};function Jae(t,e){function r(a){t.resize()}function n(a){a.detail.clean||setTimeout(i,500)}function i(){yl&&(yl.removeEventListener("connect",r),yl.removeEventListener("disconnect",n),clearInterval(i)),yl=new window.RFB(document.getElementById("screen"),e,{}),yl.addEventListener("connect",r),yl.addEventListener("disconnect",n)}i()}function qs(t,e){var r=this;r.replConsole=Xae({welcomeString:"",promptLabel:""}),$(gC).css("visibility","hidden"),$(Yae).attr("tabindex","-1"),r.running=!1,r.debugging=!1,r.editor=t,r.q=[],r.output="",r.connected=!1,r.numRetries=0,r.connection,r.socketInProgress=null,r.spinupInProgress=null,r.spawnUUID,r.execUUID,r.language=e,r.editor.typeTester.isJava()&&(r.javaErrorChecker=new zae(t)),r.isGraphics=r.editor.typeTester.isPythonGraphics()||r.editor.typeTester.isJavaServerGraphics()||r.editor.typeTester.isPygame()||r.editor.typeTester.isPythonProcessing()||r.editor.typeTester.isJavaProcessing()||r.editor.typeTester.isPythonDataScienceGraphics(),r.docker_image=t.itemDockerImage,r.url="scalinghub.codehs.com";var n=function(a){return new Promise(function(s){setTimeout(s,a)})},i=function(a,s,o){return o=o||500,s().catch(function(c){return a>0?n(o).then(function(){return i(a-1,s,o*2)}):Promise.reject(c)})};r.makeConnection=function(){return i(5,function(){return new Promise(function(a,s){r.connection&&r.connection.connected?a():Hae(r.socketInProgress)?r.socketInProgress.then(a).catch(s):r.spinupInProgress!==null?r.spinupInProgress.then(function(){return r.connectSocket()}).then(a).catch(s):r.spinup().then(function(){return r.connectSocket()}).then(a).catch(s)})},500).catch(function(){r.replConsole.writeToConsole(`Couldnt connect to code servers.
If this persists, please contact support@codehs.com.`,!0)})},r.spinup=function(){r.uuid=Math.floor(Math.random()*1e4);var a=Date.now();return r.spinupInProgress=new Promise(function(s,o){fetch((pC?"http://localhost:443":"https://"+r.url)+"/hub/api/spinup/"+r.uuid+(r.docker_image&&r.docker_image!="default"?"/config/"+r.docker_image:""),{method:"GET",credentials:"include"}).then(function(c){if(c.status===202||c.status===201){var l=Date.now();Bs("Confirmed spinup for "+r.uuid+" in "+(l-a)+"ms."),s(),Bs("Spinup no longer in progress."),r.spinupInProgress=null}else c.statusText==="Conflict"?(Bs("Name conflict for "+r.uuid),r.spinup().then(function(){r.numRetries=0,s()})):(Bs("HTTPS: "+c.status+". error for "+r.uuid),o(),r.spinupInProgress=null)}).catch(function(c){Bs("HTTPS error for "+r.uuid),o(),r.spinupInProgress=null})}),r.spinupInProgress},r.connectSocket=function(){return Bs("Setting up socket for "+r.uuid),r.connected=!1,r.socketInProgress=new Promise(function(a,s){r.connection=jae(pC?"ws://localhost:443":"wss://"+r.url+":443/",{path:"/user/"+r.uuid+"/spawn",reconnectionAttempts:3,transports:["websocket"]}).on("reconnect_failed",function(){r.connected=!1,s("reconnect_failed"),r.socketInProgress=null,r.spinupInProgress=null,Bs("Socket no longer in progress.")}).on("connect",function(o){Bs("Socket connected for "+r.uuid),r.isGraphics&&Jae(r,(pC?"ws://localhost":"wss://"+r.url)+":443/user/"+r.uuid+"/graphics/"),r.connected=!0,r.q.length>0&&(r.q.forEach(function(c){c.type==="spawn"?r.spawn(c.code,c.options):c.type==="install"?r.install(c.file):c.type==="transfer"?r.transfer(c.code):c.type==="resize"&&r.resize()}),r.q=[]),r.running||(sn.trigger("utils:enableButton",".run_code"),sn.trigger("utils:enableButton","button.grade_code")),a(o),r.socketInProgress=null,Bs("Socket no longer in progress.")}).on("error",function(){Bs("Socket error for "+r.uuid),r.connected=!1}).on("connect_error",function(){Bs("Socket connect error for "+r.uuid),r.connected=!1}).on("disconnect",function(){this.disconnect(),r.connected=!1}).on("stdout",function(o){sn.trigger("ProgramRun:successful",Date.now());var c=hC.transform(o);r.debugging&&(c=r.parseDebuggerOutput(c)),r.replConsole.writeToConsole(c,!0),r.output+=c}).on("stderr",function(o){var c=hC.transform(o);r.replConsole.writeToConsole("stderr: "+c,!0),r.output+=c}).on("exit",function(o){sn.trigger("ProgramRun:successful",Date.now()),sn.trigger("utils:enableButton",".run_code"),sn.trigger("utils:enableButton","button.grade_code"),$(gC).css("visibility","hidden"),r.output.length>0&&r.editor.typeTester.isJava()&&r.javaErrorChecker&&r.javaErrorChecker.check(r.output.split(`
`),r.codeTree)}).on("fs:change",function(o){})}),r.socketInProgress},r.cleanup=function(){r.isGraphics&&yl.disconnect(),r.connection.emit("disconnect"),r.connection.disconnect()},(!r.connection||!r.connection.connected)&&r.makeConnection(),$(window).on("beforeunload",r.cleanup),$(document).one("turbolinks:before-render",function(){r.cleanup(),$(window).off("beforeunload",r.cleanup)})}Gae.inherits(qs,Kae);qs.prototype.exec=function(t,e,r){var n=this;return new Promise(function(i,a){sn.trigger("utils:disableButton",".run_code"),sn.trigger("utils:disableButton","button.grade_code"),sn.trigger("utils:disableButton","#grading-unit-test-run"),n.makeConnection().then(function(){sn.trigger("ProgramRun:create",{userId:r.codeUserID,itemId:r.itemID,usesHub:!0,startTime:Date.now()}),n.connection.once("exec_result",function(s){if(sn.trigger("utils:enableButton",".run_code"),sn.trigger("utils:enableButton","button.grade_code"),sn.trigger("utils:enableButton","#grading-unit-test-run"),n.output+=s,sn.trigger("ProgramRun:successful",Date.now()),n.editor.typeTester.isJava()&&n.javaErrorChecker){var o={name:"karel"},c=[];for(var l in e)if(e.hasOwnProperty(l)){var f={};f.name=l,f.contents=e[l],c.push(f)}o.contents=c,n.javaErrorChecker.check(n.output.split(`
`),o)}i(hC.transform(n.output))}).once("exec_stderr",function(s){s&&(n.output+=s)}),n.output="",n.connection.emit("exec",{cmd:t,files:e})})})};qs.prototype.run=function(t,e){var r=this;if(e.installPackages)r.install(t);else{r.numRetries=0;var n=Vae(t,r.language);n&&(e.installCommand=n),e.pythonDebugger&&(e.pdbCommand=Wae(r.editor.getBreakpoints())),sn.trigger("ProgramRun:create",{userId:e.codeUserID,itemId:e.itemID,usesHub:!0,startTime:Date.now()}),r.spawn(t,e)}};qs.prototype.resize=function(){var t=this;t.makeConnection().then(function(){var e=document.getElementById("screen").getBoundingClientRect(),r={w:e.width,h:e.height};t.connection.emit("resize",r)})};qs.prototype.transfer=function(t){var e=this;e.makeConnection().then(function(){t=Object.entries(t).reduce(function(r,n){var i=n[0],a=n[1];return i.endsWith("/.")||(r[i]=a),r},{}),e.connection.emit("transfer",t)})};qs.prototype.spawn=function(t,e){var r=this;r.running=!0,sn.trigger("utils:disableButton",".run_code"),sn.trigger("utils:disableButton","button.grade_code"),r.makeConnection().then(function(){r.isGraphics&&r.resize(),r.output="",r.codeTree={name:"karel"};var n=[];for(var i in t)if(t.hasOwnProperty(i)){var a={};a.name=i,a.contents=t[i],n.push(a)}r.codeTree.contents=n,r.replConsole.reset(),function s(){$(gC).css("visibility","visible"),r.replConsole.promptForInput(function(o){r.connection.emit("stdin",o+`
`),s()})}(),r.transfer(t),r.connection.off("transferComplete"),r.connection.on("transferComplete",function(){var s;if("run.sh"in t&&r.connection.emit("spawn",{cmd:"sh",args:["run.sh"]}),r.language=="c")r.connection.emit("spawn",{cmd:"sh",args:["-c","gcc *.c -o main && ./main"]});else if(r.language=="c++")s=r.editor.progType===mu.ProgramType.CPP_FUNCTION?"scratchpad.cpp":"*.cpp",r.connection.emit("spawn",{cmd:"sh",args:["-c","gcc "+s+" -lstdc++ -lm -o main && ./main"]});else if(r.language=="scheme")r.connection.emit("spawn",{cmd:"sh",args:["-c","scheme < main.scm"]});else if(r.language=="bash")r.connection.emit("spawn",{cmd:"sh",args:["-c","sh"]});else if(r.language=="python2")r.connection.emit("spawn",{cmd:"sh",args:["-c",(e.installCommand?e.installCommand+" && ":"")+"python2 main.py"]});else if(r.editor.progType===mu.ProgramType.PYTHON_PROCESSING)r.connection.emit("spawn",{cmd:"sh",args:["-c","java -jar /app/processing-py.jar main.py"]});else if(r.language=="python3")s=r.editor.progType===mu.ProgramType.PYTHON3_FUNCTION?"scratchpad.py":"main.py",e.pythonDebugger&&e.pdbCommand?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c",(e.installCommand?e.installCommand+" && ":"")+"python3 -m "+e.pdbCommand+s]})):r.connection.emit("spawn",{cmd:"sh",args:["-c",(e.installCommand?e.installCommand+" && ":"")+"python3 "+s]});else if(r.editor.progType===mu.ProgramType.JAVA_PROCESSING){var o=Object.keys(t).filter(function(c){return c.endsWith(".java")}).join(" ");r.connection.emit("spawn",{cmd:"sh",args:["-c",'echo "Compiling..." && javac -cp .:/app/processing-jars/* '+o+" && java -cp .:/app/processing-jars/* "+e.mainClass]})}else r.language=="java"?r.spawnJava(t,e):r.language=="node"?r.connection.emit("spawn",{cmd:"sh",args:["-c",(e.installCommand?e.installCommand+" && ":"")+"node default.js"]}):r.language==="swift"&&r.connection.emit("spawn",{cmd:"sh",args:["-c","swiftc -o main *.swift && ./main"]})})})};qs.prototype.install=function(t,e){var r=this;return new Promise(function(n,i){r.makeConnection().then(function(){r.connection.emit("transfer",t),r.language==="python3"?r.connection.emit("spawn",{cmd:"sh",args:["-c","pip3 install "+(e?"-q ":"")+"-r requirements.txt --user "+(e?"":'&& echo "Requirements installed."')]}):r.language==="node"?r.connection.emit("spawn",{cmd:"sh",args:["-c","npm install "+e?"-s":""]}):alert("I WAS UNPREPARED FOR THIS"),n()})})};qs.prototype.stop=function(){var t=this;t.connection.emit("kill"),t.replConsole.reset(),sn.trigger("utils:enableButton",".run_code"),sn.trigger("utils:enableButton","button.grade_code"),sn.trigger("utils:enableButton","#grading-unit-test-run")};qs.prototype.spawnJava=function(t,e){var r=this;function n(o){var c=!1;Object.keys(o).forEach(function(l){if(l.endsWith(".java")){var f=l.substr(0,l.length-5);Object.keys(o[l]).forEach(function(g){c=!0,r.connection.emit("stdin","stop at "+f+":"+g+`
`)})}}),c||(r.editor.progType===mu.ProgramType.JAVA_CONSOLE||r.editor.progType===mu.ProgramType.JAVA_METHOD?r.connection.emit("stdin","stop in "+e.mainClass+`.run
`):r.connection.emit("stdin","stop in "+e.mainClass+`.main
`))}var i=Object.keys(t).filter(function(o){return o.endsWith(".java")}).join(" "),a=r.editor.getBreakpoints(),s=Object.keys(t).filter(function(o){return o.endsWith(".jar")}).join(":./");r.editor.progType===mu.ProgramType.JAVA_CONSOLE?e.javaDebugger?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -g "+i+" && jdb -launch ConsoleProgram "+e.mainClass]}),n(a)):r.connection.emit("spawn",{cmd:"sh",args:["-c","javac "+i+" && java ConsoleProgram "+e.mainClass]}):r.editor.progType===mu.ProgramType.JAVA_METHOD?e.javaDebugger?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -g "+i+" && jdb -launch ConsoleProgram "+e.mainClass]}),n(a)):r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -cp .:/app/json.jar:/app/java-util-1.19.3.jar:"+s+" "+i+" && java -cp .:/app/json.jar:/app/java-util-1.19.3.jar:"+s+" ConsoleProgram "+e.mainClass]}):r.editor.progType===mu.ProgramType.JAVA_METHOD_MAIN?e.javaDebugger?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -g "+i+" && jdb -launch "+e.mainClass]}),n(a)):r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -cp .:/app/json.jar:/app/java-util-1.19.3.jar:"+s+" "+i+" && java -cp .:/app/json.jar:/app/java-util-1.19.3.jar:"+s+" "+e.mainClass]}):e.javaDebugger?(r.debugging=!0,r.connection.emit("spawn",{cmd:"sh",args:["-c","javac -g "+i+" && jdb -launch "+e.mainClass]}),n(a)):r.connection.emit("spawn",{cmd:"sh",args:["-c","javac "+(s?"-cp .:"+s+" ":"")+i+" && java "+(s?"-cp .:"+s+" ":"")+e.mainClass]})};qs.prototype.parseDebuggerOutput=function(t){var e=this,r=t,n,i,a,s,o;if(e.language=="python3"){n=/\/home\/karel\/([\w\d\/_]+\.py)\(([\d]+)\)/gm,a=n.exec(t),a&&a.length>=3&&(o=a[1],i=a[2],s=$('[data-filename="'+o+'"]'),e.editor.editorColumns.activateFile(s),e.editor.highlightLine(i,!0,o));var c=t.indexOf("> /home/karel/");c!=-1&&(r=t.substring(0,c)),r=r.replaceAll("(Pdb) ","")}else if(e.language=="java"){var l="VM Started: No frames on the current call stack";if(t.indexOf(l)!=-1)return e.connection.emit("stdin",`cont
`),"";n=/"thread=main", ([\w\d\/_$]+)\..*, line=([\d]+)\s/gm,a=n.exec(t),a&&a.length>=3&&(o=a[1]+".java",i=a[2],s=$('[data-filename="'+o+'"]'),e.editor.editorColumns.activateFile(s),e.editor.highlightLine(i,!0,o));for(var f=t.split(`
`),g=0,m=0;m<f.length;m++)f[m].indexOf('"thread=main"')!=-1&&(g=m);g!=0&&(r=f.splice(0,g-1).join(`
`)+f.splice(g+2).join(`
`)),r=r.replaceAll("main[1] ","").trim(),r.startsWith(">")&&(r=r.substring(1).trim()),r.length&&(r+=`
`)}return r};CU.exports=qs});var IU=R((hke,kU)=>{"use strict";var xU=rm(),Qae=Tn(),Zae=hn(),ese=ty(),tse=Ri().safeSkulpt,AU=VA();function rf(t,e){var r=this;r.running=!1,r.pythonRunner=new ese(t,e),r.runCompleted=$.Deferred().resolve(),(Sk.TurtleGraphics||(Sk.TurtleGraphics={})).target="python-canvas"}Qae.inherits(rf,Zae);rf.prototype.init=function(){this._publish("updateCanvas")};rf.prototype.quickDraw=function(t){var e=this;return t=_.defaults(t,{width:400,height:400,oldTarget:"python-canvas",animate:!0,canvasCoordinates:[]}),e.runCompleted=e.runCompleted.then(function(){var r=$.Deferred(),n=window.Sk.TurtleGraphics.width||400,i=window.Sk.TurtleGraphics.height||400;window.Sk.TurtleGraphics.target=t.target,window.Sk.TurtleGraphics.width=t.width,window.Sk.TurtleGraphics.height=t.height,window.Sk.TurtleGraphics.animate=t.animate;var a=xU(AU,{coords:t.canvasCoordinates.join(", ")}),s=a+`__turtle.tracer(0,0)
`+t.code+`
__turtle.update()`,o=tse("<stdin>",!1,s,!0);return o.then(function(){window.Sk.TurtleGraphics.target=t.oldTarget,window.Sk.TurtleGraphics.width=n,window.Sk.TurtleGraphics.height=i,window.Sk.TurtleGraphics.animate=!0,r.resolve()}),r})};rf.prototype.run=function(t){var e=this,r=xU(AU,{coords:""});return e.runCompleted=e.runCompleted.then(function(){return t=r+t,e.pythonRunner.run(t)})};rf.prototype.stop=function(){var t=this;t.pythonRunner.stop()};kU.exports=rf});var DU=R((gke,rse)=>{rse.exports=`class Karel:
    INFINITE_LOOP = -4
    ERROR_NO_BEEPERS = -3
    ERROR_CRASH_INTO_WALL = -2
    ERROR = -1
    EAST = 0
    NORTH = 1
    WEST = 2
    SOUTH = 3
    NUM_DIRS = 4

    DIRECTIONS = {}
    DIRECTIONS[0] = "EAST"
    DIRECTIONS[1] = "NORTH"
    DIRECTIONS[2] = "WEST"
    DIRECTIONS[3] = "SOUTH"

    DIRS = {}
    DIRS["EAST"] = 0
    DIRS["NORTH"] = 1
    DIRS["WEST"] = 2
    DIRS["SOUTH"] = 3

    MOVE = 5
    PUT_BALL = 6
    TAKE_BALL = 7
    TURN_LEFT = 8
    TURN_RIGHT = 9
    TURN_AROUND = 10

    FRONT_IS_CLEAR = 11
    LEFT_IS_CLEAR = 12
    RIGHT_IS_CLEAR = 13

    BALLS_PRESENT = 14

    FACING_NORTH = 15
    FACING_SOUTH = 16
    FACING_EAST = 17
    FACING_WEST = 18

    FUNCTION = 19
    PROGRAM_COMPLETE = 20

    PAINT = 21

    RANDOM_CHANCE = 22

    RANDOM_INT = 23

    COLOR_IS = 24

    BARK = 25

    FOR_LOOP = 26

    INFINITE_LOOP_COUNTER_MAX = 500

command_list = []

class KarelState():
    rows = \${rows}
    cols = \${cols}

    dir_string = "\${dir}"
    dir = Karel.DIRS[dir_string]

    balls = \${balls}
    ball_grid = {row: {
        col: 0
        for col in range(cols)
    } for row in range(rows)}
    for row, col, num in balls:
        ball_grid[row][col] = num

    walls = \${walls}

    colors = \${colors}

    # this part needs to be after the ball_grid setup
    start = \${start}
    row = int(start['row'])
    col = int(start['col'])

def _frontIsClear():
    if KarelState.dir == Karel.EAST:
        next_row = KarelState.row
        next_col = KarelState.col + 1
    if KarelState.dir == Karel.WEST:
        next_row = KarelState.row
        next_col = KarelState.col - 1
    if KarelState.dir == Karel.NORTH:
        next_row = KarelState.row + 1
        next_col = KarelState.col
    if KarelState.dir == Karel.SOUTH:
        next_row = KarelState.row - 1
        next_col = KarelState.col

    if KarelState.dir == Karel.SOUTH or KarelState.dir == Karel.WEST:
        possible_wall = [next_row, next_col, KarelState.row, KarelState.col]
    else:
        possible_wall = [KarelState.row, KarelState.col, next_row, next_col]

    if next_row < 0 or next_col < 0:
        return False
    if next_row >= KarelState.rows or next_col >= KarelState.cols:
        return False
    return possible_wall not in KarelState.walls

def front_is_clear(secret, line):
    command_list.append({
        'c': Karel.FRONT_IS_CLEAR,
        'l': line
    })
    return _frontIsClear()

def right_is_clear(secret, line):
    command_list.append({
        'c': Karel.RIGHT_IS_CLEAR,
        'l': line
    })
    # turn right for a second
    KarelState.dir = (KarelState.dir + 3) % Karel.NUM_DIRS
    clear = _frontIsClear()
    # turn back
    KarelState.dir = (KarelState.dir + 1) % Karel.NUM_DIRS
    return clear

def left_is_clear(secret, line):
    command_list.append({
        'c': Karel.LEFT_IS_CLEAR,
        'l': line
    })
    # turn left for a second
    KarelState.dir = (KarelState.dir + 1) % Karel.NUM_DIRS
    clear = _frontIsClear()
    # turn back
    KarelState.dir = (KarelState.dir + 3) % Karel.NUM_DIRS
    return clear

def front_is_blocked(secret, line):
    return not front_is_clear(secret, line)

def left_is_blocked(secret, line):
    return not left_is_clear(secret, line)

def right_is_blocked(secret, line):
    return not right_is_clear(secret, line)

def move(secret, line):
    if not _frontIsClear():
        command_list.append({
            'c': Karel.ERROR_CRASH_INTO_WALL,
            'l': line
        })
    else:
        if KarelState.dir == Karel.EAST:
            KarelState.col += 1
        if KarelState.dir == Karel.WEST:
            KarelState.col -= 1
        if KarelState.dir == Karel.NORTH:
            KarelState.row += 1
        if KarelState.dir == Karel.SOUTH:
            KarelState.row -= 1
        command_list.append({
            'c': Karel.MOVE,
            'l': line
        })


def put_ball(secret, line):
    command_list.append({
        'c': Karel.PUT_BALL,
        'l': line
    })
    KarelState.ball_grid[KarelState.row][KarelState.col] += 1


def take_ball(secret, line):
    num_balls = KarelState.ball_grid[KarelState.row][KarelState.col]
    if num_balls > 0:
        KarelState.ball_grid[KarelState.row][KarelState.col] = num_balls - 1
        command_list.append({
            'c': Karel.TAKE_BALL,
            'l': line
        })
    else:
        command_list.append({
            'c': Karel.ERROR_NO_BEEPERS,
            'l': line
        })


def turn_left(secret, line):
    KarelState.dir = (KarelState.dir + 1) % Karel.NUM_DIRS
    command_list.append({
        'c': Karel.TURN_LEFT,
        'l': line
    })

def balls_present(secret, line):
    command_list.append({
        'c': Karel.BALLS_PRESENT,
        'l': line
    })
    num_balls = KarelState.ball_grid[KarelState.row][KarelState.col]
    return num_balls > 0

def no_balls_present(secret, line):
    return not balls_present(secret, line)

def facing_north(secret, line):
    command_list.append({
        'c': Karel.FACING_NORTH,
        'l': line
    })
    return KarelState.dir == Karel.NORTH

def not_facing_north(secret, line):
    command_list.append({
        'c': Karel.FACING_NORTH,
        'l': line
    })
    return KarelState.dir != Karel.NORTH

def facing_west(secret, line):
    command_list.append({
        'c': Karel.FACING_WEST,
        'l': line
    })
    return KarelState.dir == Karel.WEST

def not_facing_west(secret, line):
    command_list.append({
        'c': Karel.FACING_WEST,
        'l': line
    })
    return KarelState.dir != Karel.WEST

def facing_south(secret, line):
    command_list.append({
        'c': Karel.FACING_SOUTH,
        'l': line
    })
    return KarelState.dir == Karel.SOUTH

def not_facing_south(secret, line):
    command_list.append({
        'c': Karel.FACING_SOUTH,
        'l': line
    })
    return KarelState.dir != Karel.SOUTH

def facing_east(secret, line):
    command_list.append({
        'c': Karel.FACING_EAST,
        'l': line
    })
    return KarelState.dir == Karel.EAST

def not_facing_east(secret, line):
    command_list.append({
        'c': Karel.FACING_EAST,
        'l': line
    })
    return KarelState.dir != Karel.EAST

def highlight_line(secret, line):
    command_list.append({
        'c': Karel.FUNCTION,
        'l': line
    })
    return

\${superKarelAddons}

\${ultraKarelAddons}

\${studentCode}

print command_list
`});var OU=R((mke,ise)=>{ise.exports=`def turn_right(secret, line):
    KarelState.dir = (KarelState.dir - 1) % Karel.NUM_DIRS
    command_list.append({
        'c': Karel.TURN_RIGHT,
        'l': line
    })

def turn_around(secret, line):
    KarelState.dir = (KarelState.dir - 2) % Karel.NUM_DIRS
    command_list.append({
        'c': Karel.TURN_AROUND,
        'l': line
    })
`});var PU=R((vke,nse)=>{nse.exports=`def random_chance(chance, secret, line):
    command_list.append({
        'c': Karel.RANDOM_CHANCE,
        'l': line
    })
    import random
    return random.random() < chance

def color_is(test_color, secret, line):
    command_list.append({
        'c': Karel.COLOR_IS,
        'l': line
    })

    current_color = KarelState.colors[KarelState.row][KarelState.col]

    # Case-insensitive comparison for hex values
    if current_color and test_color and isinstance(current_color, str) and isinstance(test_color, str):
        if current_color.lower() == test_color.lower():
            return True

    return (
        test_color == current_color or
        (
            test_color in color and
            (color[test_color].lower() == current_color.lower() if isinstance(current_color, str) and isinstance(color[test_color], str) else color[test_color] == current_color)
        ) or
        (
            current_color in color and
            (color[current_color].lower() == test_color.lower() if isinstance(test_color, str) and isinstance(color[current_color], str) else color[current_color] == test_color)
        )
    )

def color_is_not(test_color, secret, line):
    command_list.append({
        'c': Karel.COLOR_IS,
        'l': line
    })

    current_color = KarelState.colors[KarelState.row][KarelState.col]

    # Case-insensitive comparison for hex values
    if current_color and test_color and isinstance(current_color, str) and isinstance(test_color, str):
        if current_color.lower() == test_color.lower():
            return False

    return not (
        test_color == current_color or
        (
            test_color in color and
            (color[test_color].lower() == current_color.lower() if isinstance(current_color, str) and isinstance(color[test_color], str) else color[test_color] == current_color)
        ) or
        (
            current_color in color and
            (color[current_color].lower() == test_color.lower() if isinstance(test_color, str) and isinstance(color[current_color], str) else color[current_color] == test_color)
        )
    )

def paint(color, secret, line):
    command_list.append({
        'c': Karel.PAINT,
        'color': color,
        'l': line
    })
    KarelState.colors[KarelState.row][KarelState.col] = color

color = {
    'red': '#FF0000',
    'RED': '#FF0000',
    'green': '#00FF00',
    'GREEN': '#00FF00',
    'blue': '#0000FF',
    'BLUE': '#0000FF',
    'yellow': '#FFFF00',
    'YELLOW': '#FFFF00',
    'cyan': '#00FFFF',
    'CYAN': '#00FFFF',
    'orange': '#FFA500',
    'ORANGE': '#FFA500',
    'white': '#FFFFFF',
    'WHITE': '#FFFFFF',
    'black': '#000000',
    'BLACK': '#000000',
    'gray': '#cccccc',
    'GRAY': '#CCCCCC',
    'grey': '#cccccc',
    'GREY': '#CCCCCC',
    'purple': '#9B30FF',
    'PURPLE': '#9B30FF'
}
`});var RU=R((exports,module)=>{"use strict";var template=rm(),oop=Tn(),KarelUtils=Rc(),C=Rr(),BaseRunner=hn(),PythonRunner=ty(),KarelRunner=_T(),karelPythonTemplate=DU(),superKarelAddonsPythonTemplate=OU(),ultraKarelAddonsPythonTemplate=PU();function PythonKarelRunner(t,e){var r=this;r.running=!1,r.editor=t,r.worlds=t.worlds.concat(t.user_worlds),r.pythonRunner=new PythonRunner(t,e),r.karelRunner=new KarelRunner(t),r.karelRunner.init(e),r.tester=r.karelRunner.tester,window.Sk.execLimit=1e4,window.Sk.timeoutMsg=function(){return"Run time limit exceeded - you may have an infinite loop in your code."}}oop.inherits(PythonKarelRunner,BaseRunner);PythonKarelRunner.prototype.run=function(t){var e=this,r=$.Deferred();return e.pythonRunner.run(t,{preprocess:!0}).then(function(){var n=e.getCommandList(t),i=e.karelRunner.run(t,{pythonCommandList:n});r.resolve(i)}).catch(function(n){n.__proto__.tp$name!=="NameError"&&r.reject()}),r};PythonKarelRunner.prototype.getCommandList=function(code){var self=this,world=self.karelRunner.getWorld(),usingUltraKarel=self.editor.getProgramType()==C.ProgramType.PYTHON_ULTRA_KAREL,usingSuperKarel=usingUltraKarel||self.editor.getProgramType()==C.ProgramType.PYTHON_SUPER_KAREL,processedCode=KarelUtils.preprocessWithLineNums({code,usingSuperKarel,usingUltraKarel,usingPython:!0}),superKarelAddons="",ultraKarelAddons="";usingSuperKarel&&(superKarelAddons=template(superKarelAddonsPythonTemplate,{})),usingUltraKarel&&(ultraKarelAddons=template(ultraKarelAddonsPythonTemplate,{})),code=template(karelPythonTemplate,{studentCode:processedCode,rows:world.info.rows,cols:world.info.cols,start:JSON.stringify(world.info.start),startRow:world.karelStartRow,startCol:world.karelStartCol,dir:world.info.dir,balls:JSON.stringify(world.info.beepers||[]),walls:JSON.stringify(world.info.walls||[]),world:JSON.stringify(world.info),colors:JSON.stringify(world.colors.grid.map(function(t){return t.map(function(e){return e===null?0:e})})||[]),superKarelAddons,ultraKarelAddons}),self.pythonRunner.run(code,{stripHighlightLines:!0});var fullOutput=self.pythonRunner.getOutput();window.fullOutput=fullOutput;var output=eval(fullOutput[fullOutput.length-2]);return window.theOutput=output,output};PythonKarelRunner.prototype.stepForward=function(t){var e=this;e.karelRunner.commandListGenerated()||(e.karelRunner.commands=e.getCommandList(t)),e.karelRunner.stepForward(t)};PythonKarelRunner.prototype.stepBackward=function(t){var e=this;e.karelRunner.stepBackward(t)};PythonKarelRunner.prototype.restart=function(){var t=this;t.karelRunner.restart()};PythonKarelRunner.prototype.pause=function(){var t=this;t.karelRunner.pause()};PythonKarelRunner.prototype.unpause=function(){var t=this;t.karelRunner.unpause()};PythonKarelRunner.prototype.setGradingMode=function(t){var e=this;e.karelRunner.setGradingMode(t)};PythonKarelRunner.prototype.getWorld=function(){var t=this;return t.karelRunner.getWorld()};PythonKarelRunner.prototype.loadWorld=function(t){var e=this;e.karelRunner.loadWorld(t)};PythonKarelRunner.prototype.loadWorldById=function(t){var e=this;return e.karelRunner.loadWorldById(t)};PythonKarelRunner.prototype.stop=function(){var t=this;t.pythonRunner.stop(),t.karelRunner.stop()};module.exports=PythonKarelRunner});var FU=R((bke,NU)=>{"use strict";var yke=Rr(),LU=Er(),ase=Tn(),LU=Er(),sse=hn();function Sy(t){var e=this;e.editor=t}ase.inherits(Sy,sse);Sy.prototype.run=function(t){var e=this;e.running=!0;var r=t;$("#markdown-runner-destination").attr("data-markdown",r),LU.trigger("CHS.Utils.markdown:setup")};Sy.prototype.stop=function(){$("#markdown-runner-destination").data("markdown",""),$("#markdown-runner-destination").html("")};NU.exports=Sy});var mC=R((_ke,MU)=>{"use strict";var ose=Tn(),use=hn(),cse=`
import React, { Component } from 'react';
import { AppRegistry, Text, View, StyleSheet } from 'react-native';
import { Constants } from 'expo';

export default class App extends Component {
    render() {
        return (
            <View style={styles.container}>
                <Text style={styles.paragraph}>
                    Press <b>Run Code</b> to see changes
                </Text>
            </View>
        );
    }
}

const styles = StyleSheet.create({
    container: {
        flex: 1,
        alignItems: 'center',
        justifyContent: 'center',
        paddingTop: 5,
        backgroundColor: '#ecf0f1',
    },
    paragraph: {
        margin: 24,
        fontSize: 18,
        fontWeight: 'bold',
        textAlign: 'center',
        color: '#34495e',
    },
});
`;function Ty(t){var e=this;e.running=!1,e.editor=t;var r=".jqconsole-cursor";$(r).css("visibility","hidden"),e.runWebPlayer=function(n,i){var a=$("#editor-react-web-player").attr("src"),s=n.replace("paddingTop: Constants.statusBarHeight,","");$(".error-message").remove();var o=encodeURIComponent(s);o.search("AppRegistry")==-1&&$(".simulator-instructions").append('<p class="error-message" style="color:red">Looks like you forgot to import AppRegistry on line 2!</p>'),o+='%0AAppRegistry.registerComponent("App"%2C%20()%20%3D%3E%20App)%3B';var c=a.search("&code=");c!==-1&&(a=a.substring(0,c));var l=(n.match(/Image/g)||[]).length;l>1&&(a+="&scale=0.75"),a+="&code="+o,$("#editor-react-web-player").remove();var f=$("<iframe>");f.attr("width",480).attr("height",425).attr("frameborder",0).attr("src",a).attr("id","editor-react-web-player"),$(".react-native-player-section").append(f)},e.runWebPlayer(cse)}ose.inherits(Ty,use);Ty.prototype.run=function(t){var e=this;e.running=!0,e.editor.typeTester.isReactNative()&&(e.runWebPlayer(t,!1),e.editor.updateReactNativeQR(t))};Ty.prototype.stop=function(){var t=this;t.running=!1};MU.exports=Ty});var $U=R((wke,UU)=>{"use strict";var lse=Tn(),dse=hn(),Cy="#js-echo-sim-iframe-1",fse="#js-echo-sim-button-1",vC="#js-echo-sim-iframe-2",pse="#js-echo-sim-button-2",yC="#js-echo-sim-iframe-3",hse="#js-echo-sim-button-3",gse="#js-mirror-buttons";function Ey(t){var e=this;e.running=!1,e.editor=t,$(fse).on("click",function(){$(Cy).show(),$(vC).hide(),$(yC).hide()}),$(pse).on("click",function(){$(Cy).hide(),$(vC).show(),$(yC).hide()}),$(hse).on("click",function(){$(Cy).hide(),$(vC).hide(),$(yC).show()})}lse.inherits(Ey,dse);Ey.prototype.run=function(t){var e=this;e.running=!0,$(Cy).show(),$(gse).show(),e.running=!1};Ey.prototype.stop=function(){var t=this;t.running=!1};UU.exports=Ey});var xy=R((Ske,jU)=>{"use strict";var mse=hn(),vse=mT(),yse=zN(),bC=WN(),bse=_T(),BU=ty(),_se=TT(),wse=EF(),Sse=GV(),Tse=zV(),Cse=kF(),Ese=IF(),xse=PF(),Ase=TU(),kse=EU(),Ise=IU(),Dse=RU(),Ose=FU(),Pse=mC(),Rse=$U();function qU(t){this.editor=t}function Sa(t,e){return t.socketIOTransportType==="long-polling"?new Ase(t,e):new kse(t,e)}qU.prototype.create=function(){return this.editor.typeTester.isGraphics()?new vse(this.editor):this.editor.typeTester.isPixel()?new xse(this.editor):this.editor.typeTester.isHTML()?new yse(this.editor):this.editor.typeTester.isConsole()?new bC(this.editor):this.editor.typeTester.isVanillaJS()?new bC(this.editor):this.editor.typeTester.isPythonKarel()?new Dse(this.editor):this.editor.typeTester.isKarel()?new bse(this.editor):this.editor.typeTester.isTurtle()?new Ise(this.editor):this.editor.typeTester.isPythonTutor()?new _se(this.editor):this.editor.typeTester.isPython()?new BU(this.editor):this.editor.typeTester.codeHubJava()?this.editor.graderExec?void 0:new Sa(this.editor,"java"):this.editor.typeTester.isJava()?new wse(this.editor):this.editor.typeTester.isC()?this.editor.graderExec?void 0:new Sa(this.editor,"c"):this.editor.typeTester.isUnitTestCpp()?this.editor.graderExec?void 0:new Sa(this.editor,"c++"):this.editor.typeTester.isCpp()?this.editor.graderExec?void 0:new Sa(this.editor,"c++"):this.editor.typeTester.isPython2()?this.editor.graderExec?void 0:new Sa(this.editor,"python2"):this.editor.typeTester.isPython3()?this.editor.graderExec?void 0:new Sa(this.editor,"python3"):this.editor.typeTester.isPythonGraphics()?this.editor.graderExec?void 0:new Sa(this.editor,"python3"):this.editor.typeTester.isPythonProcessing()?this.editor.graderExec?void 0:new Sa(this.editor,"python3"):this.editor.typeTester.isPygame()?this.editor.graderExec?void 0:new Sa(this.editor,"python3"):this.editor.typeTester.isPythonDataScience()?this.editor.graderExec?void 0:new Sa(this.editor,"python3"):this.editor.typeTester.isScheme()?this.editor.graderExec?void 0:new Sa(this.editor,"scheme"):this.editor.typeTester.isBash()?this.editor.graderExec?void 0:new Sa(this.editor,"bash"):this.editor.typeTester.isSQL()?window.pageSpecific.isAbacus?new Tse(this.editor):new Sse(this.editor):this.editor.typeTester.isUnitTestJavascript()?new bC(this.editor):this.editor.typeTester.isUnitTestPython3()?this.editor.graderExec?void 0:new Sa(this.editor,"python3"):this.editor.typeTester.isUnitTestPython()?new BU(this.editor):this.editor.typeTester.isElm()?new Cse(this.editor):this.editor.typeTester.isProcessing()?new Ese(this.editor):this.editor.typeTester.isMarkdown()?new Ose(this.editor):this.editor.typeTester.isReactNative()?new Pse(this.editor):this.editor.typeTester.isAlexa()?new Rse(this.editor):this.editor.typeTester.isSwift()?this.editor.graderExec?void 0:new Sa(this.editor,"swift"):this.editor.typeTester.isNode()?this.editor.graderExec?void 0:new Sa(this.editor,"node"):new mse};jU.exports=qU});var Ay=R((Tke,Lse)=>{Lse.exports=`inputs = []
current_input = 0

def input(*args):
    return readOverwrite()

def readOverwrite():
    global current_input
    global inputs
    try:
        val = inputs[current_input]
    except IndexError:
        val = 0
    else:
        current_input += 1
    return val
`});var HU=R(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.newestSdkVersion=sc.oldestSdkVersion=sc.defaultSdkVersion=void 0;sc.defaultSdkVersion="54.0.0";sc.oldestSdkVersion="50.0.0";sc.newestSdkVersion="54.0.0"});var qh=R((Eke,GU)=>{"use strict";var Nse="2.0.0",Fse=Number.MAX_SAFE_INTEGER||9007199254740991,Mse=16,Use=250,$se=["major","premajor","minor","preminor","patch","prepatch","prerelease"];GU.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Mse,MAX_SAFE_BUILD_LENGTH:Use,MAX_SAFE_INTEGER:Fse,RELEASE_TYPES:$se,SEMVER_SPEC_VERSION:Nse,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var jh=R((xke,zU)=>{"use strict";var Bse=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};zU.exports=Bse});var nf=R((yo,VU)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:_C,MAX_SAFE_BUILD_LENGTH:qse,MAX_LENGTH:jse}=qh(),Hse=jh();yo=VU.exports={};var Gse=yo.re=[],zse=yo.safeRe=[],Ft=yo.src=[],Vse=yo.safeSrc=[],Mt=yo.t={},Wse=0,wC="[a-zA-Z0-9-]",Kse=[["\\s",1],["\\d",jse],[wC,qse]],Xse=t=>{for(let[e,r]of Kse)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},nr=(t,e,r)=>{let n=Xse(e),i=Wse++;Hse(t,i,e),Mt[t]=i,Ft[i]=e,Vse[i]=n,Gse[i]=new RegExp(e,r?"g":void 0),zse[i]=new RegExp(n,r?"g":void 0)};nr("NUMERICIDENTIFIER","0|[1-9]\\d*");nr("NUMERICIDENTIFIERLOOSE","\\d+");nr("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${wC}*`);nr("MAINVERSION",`(${Ft[Mt.NUMERICIDENTIFIER]})\\.(${Ft[Mt.NUMERICIDENTIFIER]})\\.(${Ft[Mt.NUMERICIDENTIFIER]})`);nr("MAINVERSIONLOOSE",`(${Ft[Mt.NUMERICIDENTIFIERLOOSE]})\\.(${Ft[Mt.NUMERICIDENTIFIERLOOSE]})\\.(${Ft[Mt.NUMERICIDENTIFIERLOOSE]})`);nr("PRERELEASEIDENTIFIER",`(?:${Ft[Mt.NONNUMERICIDENTIFIER]}|${Ft[Mt.NUMERICIDENTIFIER]})`);nr("PRERELEASEIDENTIFIERLOOSE",`(?:${Ft[Mt.NONNUMERICIDENTIFIER]}|${Ft[Mt.NUMERICIDENTIFIERLOOSE]})`);nr("PRERELEASE",`(?:-(${Ft[Mt.PRERELEASEIDENTIFIER]}(?:\\.${Ft[Mt.PRERELEASEIDENTIFIER]})*))`);nr("PRERELEASELOOSE",`(?:-?(${Ft[Mt.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ft[Mt.PRERELEASEIDENTIFIERLOOSE]})*))`);nr("BUILDIDENTIFIER",`${wC}+`);nr("BUILD",`(?:\\+(${Ft[Mt.BUILDIDENTIFIER]}(?:\\.${Ft[Mt.BUILDIDENTIFIER]})*))`);nr("FULLPLAIN",`v?${Ft[Mt.MAINVERSION]}${Ft[Mt.PRERELEASE]}?${Ft[Mt.BUILD]}?`);nr("FULL",`^${Ft[Mt.FULLPLAIN]}$`);nr("LOOSEPLAIN",`[v=\\s]*${Ft[Mt.MAINVERSIONLOOSE]}${Ft[Mt.PRERELEASELOOSE]}?${Ft[Mt.BUILD]}?`);nr("LOOSE",`^${Ft[Mt.LOOSEPLAIN]}$`);nr("GTLT","((?:<|>)?=?)");nr("XRANGEIDENTIFIERLOOSE",`${Ft[Mt.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);nr("XRANGEIDENTIFIER",`${Ft[Mt.NUMERICIDENTIFIER]}|x|X|\\*`);nr("XRANGEPLAIN",`[v=\\s]*(${Ft[Mt.XRANGEIDENTIFIER]})(?:\\.(${Ft[Mt.XRANGEIDENTIFIER]})(?:\\.(${Ft[Mt.XRANGEIDENTIFIER]})(?:${Ft[Mt.PRERELEASE]})?${Ft[Mt.BUILD]}?)?)?`);nr("XRANGEPLAINLOOSE",`[v=\\s]*(${Ft[Mt.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ft[Mt.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ft[Mt.XRANGEIDENTIFIERLOOSE]})(?:${Ft[Mt.PRERELEASELOOSE]})?${Ft[Mt.BUILD]}?)?)?`);nr("XRANGE",`^${Ft[Mt.GTLT]}\\s*${Ft[Mt.XRANGEPLAIN]}$`);nr("XRANGELOOSE",`^${Ft[Mt.GTLT]}\\s*${Ft[Mt.XRANGEPLAINLOOSE]}$`);nr("COERCEPLAIN",`(^|[^\\d])(\\d{1,${_C}})(?:\\.(\\d{1,${_C}}))?(?:\\.(\\d{1,${_C}}))?`);nr("COERCE",`${Ft[Mt.COERCEPLAIN]}(?:$|[^\\d])`);nr("COERCEFULL",Ft[Mt.COERCEPLAIN]+`(?:${Ft[Mt.PRERELEASE]})?(?:${Ft[Mt.BUILD]})?(?:$|[^\\d])`);nr("COERCERTL",Ft[Mt.COERCE],!0);nr("COERCERTLFULL",Ft[Mt.COERCEFULL],!0);nr("LONETILDE","(?:~>?)");nr("TILDETRIM",`(\\s*)${Ft[Mt.LONETILDE]}\\s+`,!0);yo.tildeTrimReplace="$1~";nr("TILDE",`^${Ft[Mt.LONETILDE]}${Ft[Mt.XRANGEPLAIN]}$`);nr("TILDELOOSE",`^${Ft[Mt.LONETILDE]}${Ft[Mt.XRANGEPLAINLOOSE]}$`);nr("LONECARET","(?:\\^)");nr("CARETTRIM",`(\\s*)${Ft[Mt.LONECARET]}\\s+`,!0);yo.caretTrimReplace="$1^";nr("CARET",`^${Ft[Mt.LONECARET]}${Ft[Mt.XRANGEPLAIN]}$`);nr("CARETLOOSE",`^${Ft[Mt.LONECARET]}${Ft[Mt.XRANGEPLAINLOOSE]}$`);nr("COMPARATORLOOSE",`^${Ft[Mt.GTLT]}\\s*(${Ft[Mt.LOOSEPLAIN]})$|^$`);nr("COMPARATOR",`^${Ft[Mt.GTLT]}\\s*(${Ft[Mt.FULLPLAIN]})$|^$`);nr("COMPARATORTRIM",`(\\s*)${Ft[Mt.GTLT]}\\s*(${Ft[Mt.LOOSEPLAIN]}|${Ft[Mt.XRANGEPLAIN]})`,!0);yo.comparatorTrimReplace="$1$2$3";nr("HYPHENRANGE",`^\\s*(${Ft[Mt.XRANGEPLAIN]})\\s+-\\s+(${Ft[Mt.XRANGEPLAIN]})\\s*$`);nr("HYPHENRANGELOOSE",`^\\s*(${Ft[Mt.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ft[Mt.XRANGEPLAINLOOSE]})\\s*$`);nr("STAR","(<|>)?=?\\s*\\*");nr("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");nr("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ky=R((Ake,WU)=>{"use strict";var Yse=Object.freeze({loose:!0}),Jse=Object.freeze({}),Qse=t=>t?typeof t!="object"?Yse:t:Jse;WU.exports=Qse});var SC=R((kke,YU)=>{"use strict";var KU=/^[0-9]+$/,XU=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=KU.test(t),n=KU.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},Zse=(t,e)=>XU(e,t);YU.exports={compareIdentifiers:XU,rcompareIdentifiers:Zse}});var sa=R((Ike,QU)=>{"use strict";var Iy=jh(),{MAX_LENGTH:JU,MAX_SAFE_INTEGER:Dy}=qh(),{safeRe:Oy,t:Py}=nf(),eoe=ky(),{compareIdentifiers:TC}=SC(),CC=class t{constructor(e,r){if(r=eoe(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>JU)throw new TypeError(`version is longer than ${JU} characters`);Iy("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Oy[Py.LOOSE]:Oy[Py.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Dy||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Dy||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Dy||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let a=+i;if(a>=0&&a<Dy)return a}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Iy("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Iy("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return TC(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Iy("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return TC(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?Oy[Py.PRERELEASELOOSE]:Oy[Py.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let a=[r,i];n===!1&&(a=[r]),TC(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};QU.exports=CC});var bl=R((Dke,e$)=>{"use strict";var ZU=sa(),toe=(t,e,r=!1)=>{if(t instanceof ZU)return t;try{return new ZU(t,e)}catch(n){if(!r)return null;throw n}};e$.exports=toe});var r$=R((Oke,t$)=>{"use strict";var roe=bl(),ioe=(t,e)=>{let r=roe(t,e);return r?r.version:null};t$.exports=ioe});var n$=R((Pke,i$)=>{"use strict";var noe=bl(),aoe=(t,e)=>{let r=noe(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};i$.exports=aoe});var o$=R((Rke,s$)=>{"use strict";var a$=sa(),soe=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new a$(t instanceof a$?t.version:t,r).inc(e,n,i).version}catch{return null}};s$.exports=soe});var l$=R((Lke,c$)=>{"use strict";var u$=bl(),ooe=(t,e)=>{let r=u$(t,null,!0),n=u$(e,null,!0),i=r.compare(n);if(i===0)return null;let a=i>0,s=a?r:n,o=a?n:r,c=!!s.prerelease.length;if(!!o.prerelease.length&&!c){if(!o.patch&&!o.minor)return"major";if(o.compareMain(s)===0)return o.minor&&!o.patch?"minor":"patch"}let f=c?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"};c$.exports=ooe});var f$=R((Nke,d$)=>{"use strict";var uoe=sa(),coe=(t,e)=>new uoe(t,e).major;d$.exports=coe});var h$=R((Fke,p$)=>{"use strict";var loe=sa(),doe=(t,e)=>new loe(t,e).minor;p$.exports=doe});var m$=R((Mke,g$)=>{"use strict";var foe=sa(),poe=(t,e)=>new foe(t,e).patch;g$.exports=poe});var y$=R((Uke,v$)=>{"use strict";var hoe=bl(),goe=(t,e)=>{let r=hoe(t,e);return r&&r.prerelease.length?r.prerelease:null};v$.exports=goe});var ms=R(($ke,_$)=>{"use strict";var b$=sa(),moe=(t,e,r)=>new b$(t,r).compare(new b$(e,r));_$.exports=moe});var S$=R((Bke,w$)=>{"use strict";var voe=ms(),yoe=(t,e,r)=>voe(e,t,r);w$.exports=yoe});var C$=R((qke,T$)=>{"use strict";var boe=ms(),_oe=(t,e)=>boe(t,e,!0);T$.exports=_oe});var Ry=R((jke,x$)=>{"use strict";var E$=sa(),woe=(t,e,r)=>{let n=new E$(t,r),i=new E$(e,r);return n.compare(i)||n.compareBuild(i)};x$.exports=woe});var k$=R((Hke,A$)=>{"use strict";var Soe=Ry(),Toe=(t,e)=>t.sort((r,n)=>Soe(r,n,e));A$.exports=Toe});var D$=R((Gke,I$)=>{"use strict";var Coe=Ry(),Eoe=(t,e)=>t.sort((r,n)=>Coe(n,r,e));I$.exports=Eoe});var Hh=R((zke,O$)=>{"use strict";var xoe=ms(),Aoe=(t,e,r)=>xoe(t,e,r)>0;O$.exports=Aoe});var Ly=R((Vke,P$)=>{"use strict";var koe=ms(),Ioe=(t,e,r)=>koe(t,e,r)<0;P$.exports=Ioe});var EC=R((Wke,R$)=>{"use strict";var Doe=ms(),Ooe=(t,e,r)=>Doe(t,e,r)===0;R$.exports=Ooe});var xC=R((Kke,L$)=>{"use strict";var Poe=ms(),Roe=(t,e,r)=>Poe(t,e,r)!==0;L$.exports=Roe});var Ny=R((Xke,N$)=>{"use strict";var Loe=ms(),Noe=(t,e,r)=>Loe(t,e,r)>=0;N$.exports=Noe});var Fy=R((Yke,F$)=>{"use strict";var Foe=ms(),Moe=(t,e,r)=>Foe(t,e,r)<=0;F$.exports=Moe});var AC=R((Jke,M$)=>{"use strict";var Uoe=EC(),$oe=xC(),Boe=Hh(),qoe=Ny(),joe=Ly(),Hoe=Fy(),Goe=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Uoe(t,r,n);case"!=":return $oe(t,r,n);case">":return Boe(t,r,n);case">=":return qoe(t,r,n);case"<":return joe(t,r,n);case"<=":return Hoe(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};M$.exports=Goe});var $$=R((Qke,U$)=>{"use strict";var zoe=sa(),Voe=bl(),{safeRe:My,t:Uy}=nf(),Woe=(t,e)=>{if(t instanceof zoe)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?My[Uy.COERCEFULL]:My[Uy.COERCE]);else{let c=e.includePrerelease?My[Uy.COERCERTLFULL]:My[Uy.COERCERTL],l;for(;(l=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||l.index+l[0].length!==r.index+r[0].length)&&(r=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",a=r[4]||"0",s=e.includePrerelease&&r[5]?`-${r[5]}`:"",o=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Voe(`${n}.${i}.${a}${s}${o}`,e)};U$.exports=Woe});var q$=R((Zke,B$)=>{"use strict";var kC=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};B$.exports=kC});var vs=R((eIe,z$)=>{"use strict";var Koe=/\s+/g,IC=class t{constructor(e,r){if(r=Yoe(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof DC)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(Koe," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!H$(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&iue(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&tue)|(this.options.loose&&rue))+":"+e,i=j$.get(n);if(i)return i;let a=this.options.loose,s=a?Ta[oa.HYPHENRANGELOOSE]:Ta[oa.HYPHENRANGE];e=e.replace(s,pue(this.options.includePrerelease)),Si("hyphen replace",e),e=e.replace(Ta[oa.COMPARATORTRIM],Qoe),Si("comparator trim",e),e=e.replace(Ta[oa.TILDETRIM],Zoe),Si("tilde trim",e),e=e.replace(Ta[oa.CARETTRIM],eue),Si("caret trim",e);let o=e.split(" ").map(g=>nue(g,this.options)).join(" ").split(/\s+/).map(g=>fue(g,this.options));a&&(o=o.filter(g=>(Si("loose invalid filter",g,this.options),!!g.match(Ta[oa.COMPARATORLOOSE])))),Si("range list",o);let c=new Map,l=o.map(g=>new DC(g,this.options));for(let g of l){if(H$(g))return[g];c.set(g.value,g)}c.size>1&&c.has("")&&c.delete("");let f=[...c.values()];return j$.set(n,f),f}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>G$(n,r)&&e.set.some(i=>G$(i,r)&&n.every(a=>i.every(s=>a.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Joe(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(hue(this.set[r],e,this.options))return!0;return!1}};z$.exports=IC;var Xoe=q$(),j$=new Xoe,Yoe=ky(),DC=Gh(),Si=jh(),Joe=sa(),{safeRe:Ta,t:oa,comparatorTrimReplace:Qoe,tildeTrimReplace:Zoe,caretTrimReplace:eue}=nf(),{FLAG_INCLUDE_PRERELEASE:tue,FLAG_LOOSE:rue}=qh(),H$=t=>t.value==="<0.0.0-0",iue=t=>t.value==="",G$=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(a=>i.intersects(a,e)),i=n.pop();return r},nue=(t,e)=>(t=t.replace(Ta[oa.BUILD],""),Si("comp",t,e),t=oue(t,e),Si("caret",t),t=aue(t,e),Si("tildes",t),t=cue(t,e),Si("xrange",t),t=due(t,e),Si("stars",t),t),Ca=t=>!t||t.toLowerCase()==="x"||t==="*",aue=(t,e)=>t.trim().split(/\s+/).map(r=>sue(r,e)).join(" "),sue=(t,e)=>{let r=e.loose?Ta[oa.TILDELOOSE]:Ta[oa.TILDE];return t.replace(r,(n,i,a,s,o)=>{Si("tilde",t,n,i,a,s,o);let c;return Ca(i)?c="":Ca(a)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Ca(s)?c=`>=${i}.${a}.0 <${i}.${+a+1}.0-0`:o?(Si("replaceTilde pr",o),c=`>=${i}.${a}.${s}-${o} <${i}.${+a+1}.0-0`):c=`>=${i}.${a}.${s} <${i}.${+a+1}.0-0`,Si("tilde return",c),c})},oue=(t,e)=>t.trim().split(/\s+/).map(r=>uue(r,e)).join(" "),uue=(t,e)=>{Si("caret",t,e);let r=e.loose?Ta[oa.CARETLOOSE]:Ta[oa.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,a,s,o,c)=>{Si("caret",t,i,a,s,o,c);let l;return Ca(a)?l="":Ca(s)?l=`>=${a}.0.0${n} <${+a+1}.0.0-0`:Ca(o)?a==="0"?l=`>=${a}.${s}.0${n} <${a}.${+s+1}.0-0`:l=`>=${a}.${s}.0${n} <${+a+1}.0.0-0`:c?(Si("replaceCaret pr",c),a==="0"?s==="0"?l=`>=${a}.${s}.${o}-${c} <${a}.${s}.${+o+1}-0`:l=`>=${a}.${s}.${o}-${c} <${a}.${+s+1}.0-0`:l=`>=${a}.${s}.${o}-${c} <${+a+1}.0.0-0`):(Si("no pr"),a==="0"?s==="0"?l=`>=${a}.${s}.${o}${n} <${a}.${s}.${+o+1}-0`:l=`>=${a}.${s}.${o}${n} <${a}.${+s+1}.0-0`:l=`>=${a}.${s}.${o} <${+a+1}.0.0-0`),Si("caret return",l),l})},cue=(t,e)=>(Si("replaceXRanges",t,e),t.split(/\s+/).map(r=>lue(r,e)).join(" ")),lue=(t,e)=>{t=t.trim();let r=e.loose?Ta[oa.XRANGELOOSE]:Ta[oa.XRANGE];return t.replace(r,(n,i,a,s,o,c)=>{Si("xRange",t,n,i,a,s,o,c);let l=Ca(a),f=l||Ca(s),g=f||Ca(o),m=g;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(f&&(s=0),o=0,i===">"?(i=">=",f?(a=+a+1,s=0,o=0):(s=+s+1,o=0)):i==="<="&&(i="<",f?a=+a+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+a}.${s}.${o}${c}`):f?n=`>=${a}.0.0${c} <${+a+1}.0.0-0`:g&&(n=`>=${a}.${s}.0${c} <${a}.${+s+1}.0-0`),Si("xRange return",n),n})},due=(t,e)=>(Si("replaceStars",t,e),t.trim().replace(Ta[oa.STAR],"")),fue=(t,e)=>(Si("replaceGTE0",t,e),t.trim().replace(Ta[e.includePrerelease?oa.GTE0PRE:oa.GTE0],"")),pue=t=>(e,r,n,i,a,s,o,c,l,f,g,m)=>(Ca(n)?r="":Ca(i)?r=`>=${n}.0.0${t?"-0":""}`:Ca(a)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Ca(l)?c="":Ca(f)?c=`<${+l+1}.0.0-0`:Ca(g)?c=`<${l}.${+f+1}.0-0`:m?c=`<=${l}.${f}.${g}-${m}`:t?c=`<${l}.${f}.${+g+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),hue=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Si(t[n].semver),t[n].semver!==DC.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Gh=R((tIe,J$)=>{"use strict";var zh=Symbol("SemVer ANY"),RC=class t{static get ANY(){return zh}constructor(e,r){if(r=V$(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),PC("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===zh?this.value="":this.value=this.operator+this.semver.version,PC("comp",this)}parse(e){let r=this.options.loose?W$[K$.COMPARATORLOOSE]:W$[K$.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new X$(n[2],this.options.loose):this.semver=zh}toString(){return this.value}test(e){if(PC("Comparator.test",e,this.options.loose),this.semver===zh||e===zh)return!0;if(typeof e=="string")try{e=new X$(e,this.options)}catch{return!1}return OC(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Y$(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Y$(this.value,r).test(e.semver):(r=V$(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||OC(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||OC(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};J$.exports=RC;var V$=ky(),{safeRe:W$,t:K$}=nf(),OC=AC(),PC=jh(),X$=sa(),Y$=vs()});var Vh=R((rIe,Q$)=>{"use strict";var gue=vs(),mue=(t,e,r)=>{try{e=new gue(e,r)}catch{return!1}return e.test(t)};Q$.exports=mue});var eB=R((iIe,Z$)=>{"use strict";var vue=vs(),yue=(t,e)=>new vue(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Z$.exports=yue});var rB=R((nIe,tB)=>{"use strict";var bue=sa(),_ue=vs(),wue=(t,e,r)=>{let n=null,i=null,a=null;try{a=new _ue(e,r)}catch{return null}return t.forEach(s=>{a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new bue(n,r))}),n};tB.exports=wue});var nB=R((aIe,iB)=>{"use strict";var Sue=sa(),Tue=vs(),Cue=(t,e,r)=>{let n=null,i=null,a=null;try{a=new Tue(e,r)}catch{return null}return t.forEach(s=>{a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new Sue(n,r))}),n};iB.exports=Cue});var oB=R((sIe,sB)=>{"use strict";var LC=sa(),Eue=vs(),aB=Hh(),xue=(t,e)=>{t=new Eue(t,e);let r=new LC("0.0.0");if(t.test(r)||(r=new LC("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],a=null;i.forEach(s=>{let o=new LC(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!a||aB(o,a))&&(a=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),a&&(!r||aB(r,a))&&(r=a)}return r&&t.test(r)?r:null};sB.exports=xue});var cB=R((oIe,uB)=>{"use strict";var Aue=vs(),kue=(t,e)=>{try{return new Aue(t,e).range||"*"}catch{return null}};uB.exports=kue});var $y=R((uIe,pB)=>{"use strict";var Iue=sa(),fB=Gh(),{ANY:Due}=fB,Oue=vs(),Pue=Vh(),lB=Hh(),dB=Ly(),Rue=Fy(),Lue=Ny(),Nue=(t,e,r,n)=>{t=new Iue(t,n),e=new Oue(e,n);let i,a,s,o,c;switch(r){case">":i=lB,a=Rue,s=dB,o=">",c=">=";break;case"<":i=dB,a=Lue,s=lB,o="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Pue(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let f=e.set[l],g=null,m=null;if(f.forEach(y=>{y.semver===Due&&(y=new fB(">=0.0.0")),g=g||y,m=m||y,i(y.semver,g.semver,n)?g=y:s(y.semver,m.semver,n)&&(m=y)}),g.operator===o||g.operator===c||(!m.operator||m.operator===o)&&a(t,m.semver))return!1;if(m.operator===c&&s(t,m.semver))return!1}return!0};pB.exports=Nue});var gB=R((cIe,hB)=>{"use strict";var Fue=$y(),Mue=(t,e,r)=>Fue(t,e,">",r);hB.exports=Mue});var vB=R((lIe,mB)=>{"use strict";var Uue=$y(),$ue=(t,e,r)=>Uue(t,e,"<",r);mB.exports=$ue});var _B=R((dIe,bB)=>{"use strict";var yB=vs(),Bue=(t,e,r)=>(t=new yB(t,r),e=new yB(e,r),t.intersects(e,r));bB.exports=Bue});var SB=R((fIe,wB)=>{"use strict";var que=Vh(),jue=ms();wB.exports=(t,e,r)=>{let n=[],i=null,a=null,s=t.sort((f,g)=>jue(f,g,r));for(let f of s)que(f,e,r)?(a=f,i||(i=f)):(a&&n.push([i,a]),a=null,i=null);i&&n.push([i,null]);let o=[];for(let[f,g]of n)f===g?o.push(f):!g&&f===s[0]?o.push("*"):g?f===s[0]?o.push(`<=${g}`):o.push(`${f} - ${g}`):o.push(`>=${f}`);let c=o.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var kB=R((pIe,AB)=>{"use strict";var TB=vs(),FC=Gh(),{ANY:NC}=FC,Wh=Vh(),MC=ms(),Hue=(t,e,r={})=>{if(t===e)return!0;t=new TB(t,r),e=new TB(e,r);let n=!1;e:for(let i of t.set){for(let a of e.set){let s=zue(i,a,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},Gue=[new FC(">=0.0.0-0")],CB=[new FC(">=0.0.0")],zue=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===NC){if(e.length===1&&e[0].semver===NC)return!0;r.includePrerelease?t=Gue:t=CB}if(e.length===1&&e[0].semver===NC){if(r.includePrerelease)return!0;e=CB}let n=new Set,i,a;for(let y of t)y.operator===">"||y.operator===">="?i=EB(i,y,r):y.operator==="<"||y.operator==="<="?a=xB(a,y,r):n.add(y.semver);if(n.size>1)return null;let s;if(i&&a){if(s=MC(i.semver,a.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||a.operator!=="<="))return null}for(let y of n){if(i&&!Wh(y,String(i),r)||a&&!Wh(y,String(a),r))return null;for(let x of e)if(!Wh(y,String(x),r))return!1;return!0}let o,c,l,f,g=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;g&&g.prerelease.length===1&&a.operator==="<"&&g.prerelease[0]===0&&(g=!1);for(let y of e){if(f=f||y.operator===">"||y.operator===">=",l=l||y.operator==="<"||y.operator==="<=",i){if(m&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===m.major&&y.semver.minor===m.minor&&y.semver.patch===m.patch&&(m=!1),y.operator===">"||y.operator===">="){if(o=EB(i,y,r),o===y&&o!==i)return!1}else if(i.operator===">="&&!Wh(i.semver,String(y),r))return!1}if(a){if(g&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===g.major&&y.semver.minor===g.minor&&y.semver.patch===g.patch&&(g=!1),y.operator==="<"||y.operator==="<="){if(c=xB(a,y,r),c===y&&c!==a)return!1}else if(a.operator==="<="&&!Wh(a.semver,String(y),r))return!1}if(!y.operator&&(a||i)&&s!==0)return!1}return!(i&&l&&!a&&s!==0||a&&f&&!i&&s!==0||m||g)},EB=(t,e,r)=>{if(!t)return e;let n=MC(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},xB=(t,e,r)=>{if(!t)return e;let n=MC(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};AB.exports=Hue});var $C=R((hIe,OB)=>{"use strict";var UC=nf(),IB=qh(),Vue=sa(),DB=SC(),Wue=bl(),Kue=r$(),Xue=n$(),Yue=o$(),Jue=l$(),Que=f$(),Zue=h$(),ece=m$(),tce=y$(),rce=ms(),ice=S$(),nce=C$(),sce=Ry(),oce=k$(),uce=D$(),cce=Hh(),lce=Ly(),dce=EC(),fce=xC(),pce=Ny(),hce=Fy(),gce=AC(),mce=$$(),vce=Gh(),yce=vs(),bce=Vh(),_ce=eB(),wce=rB(),Sce=nB(),Tce=oB(),Cce=cB(),Ece=$y(),xce=gB(),Ace=vB(),kce=_B(),Ice=SB(),Dce=kB();OB.exports={parse:Wue,valid:Kue,clean:Xue,inc:Yue,diff:Jue,major:Que,minor:Zue,patch:ece,prerelease:tce,compare:rce,rcompare:ice,compareLoose:nce,compareBuild:sce,sort:oce,rsort:uce,gt:cce,lt:lce,eq:dce,neq:fce,gte:pce,lte:hce,cmp:gce,coerce:mce,Comparator:vce,Range:yce,satisfies:bce,toComparators:_ce,maxSatisfying:wce,minSatisfying:Sce,minVersion:Tce,validRange:Cce,outside:Ece,gtr:xce,ltr:Ace,intersects:kce,simplifyRange:Ice,subset:Dce,SemVer:Vue,re:UC.re,src:UC.src,tokens:UC.t,SEMVER_SPEC_VERSION:IB.SEMVER_SPEC_VERSION,RELEASE_TYPES:IB.RELEASE_TYPES,compareIdentifiers:DB.compareIdentifiers,rcompareIdentifiers:DB.rcompareIdentifiers}});var qC=R(BC=>{"use strict";Object.defineProperty(BC,"__esModule",{value:!0});var Kh={"@expo/snack-static/react-native-logo.png":"*"},Oce={"50.0.0":{version:"^50.0.0",coreModules:{...Kh,expo:"~50.0.17",react:"18.2.0","react-dom":"*","react-native":"0.73.6","react-native-web":"*","@shopify/react-native-skia/lib/module/web":"*"},bundledModules:{"expo-asset":"*","expo-font":"*","react-native-gesture-handler":"*","react-native-safe-area-context":"*","@expo/vector-icons":"*","expo-constants":"*","expo-file-system":"*","expo-updates":"*","expo-modules-core":"*","@react-native-async-storage/async-storage":"*","react-native-reanimated":"*","expo-router":"*","expo-router/stack":"*","expo-router/tabs":"*","expo-router/drawer":"*","expo-router/html":"*","expo-router/head":"*","expo-router/entry":"*","react-native-pager-view":"*"},deprecatedModules:{}},"51.0.0":{version:"^51.0.0",coreModules:{...Kh,expo:"~51.0.31",react:"18.2.0","react-dom":"*","react-native":"0.74.5","react-native-web":"*","@shopify/react-native-skia/lib/module/web":"*"},bundledModules:{"expo-asset":"*","expo-font":"*","react-native-gesture-handler":"*","react-native-safe-area-context":"*","@expo/vector-icons":"*","expo-constants":"*","expo-file-system":"*","expo-updates":"*","@react-native-async-storage/async-storage":"*","react-native-reanimated":"*","expo-router":"*","expo-router/stack":"*","expo-router/tabs":"*","expo-router/drawer":"*","expo-router/html":"*","expo-router/head":"*","expo-router/entry":"*","react-native-pager-view":"*"},deprecatedModules:{}},"52.0.0":{version:"^52.0.0",coreModules:{...Kh,expo:"~52.0.2",react:"18.3.1","react-dom":"18.3.1","react-native":"0.76.3","react-native-web":"*","@shopify/react-native-skia/lib/module/web":"*"},bundledModules:{"expo-asset":"*","expo-font":"*","react-native-gesture-handler":"*","react-native-safe-area-context":"*","@expo/vector-icons":"*","expo-constants":"*","expo-file-system":"*","expo-updates":"*","@react-native-async-storage/async-storage":"*","react-native-reanimated":"*","expo-router":"*","expo-router/stack":"*","expo-router/tabs":"*","expo-router/drawer":"*","expo-router/html":"*","expo-router/head":"*","expo-router/entry":"*","react-native-pager-view":"*"},deprecatedModules:{}},"53.0.0":{version:"^53.0.0",coreModules:{...Kh,expo:"~53.0.22",react:"19.0.0","react-dom":"19.0.0","react-native":"0.79.5","react-native-web":"*","@shopify/react-native-skia/lib/module/web":"*"},bundledModules:{"expo-asset":"*","expo-font":"*","react-native-gesture-handler":"*","react-native-safe-area-context":"*","@expo/vector-icons":"*","expo-constants":"*","expo-file-system":"*","expo-updates":"*","@react-native-async-storage/async-storage":"*","react-native-reanimated":"*","expo-router":"*","expo-router/stack":"*","expo-router/tabs":"*","expo-router/drawer":"*","expo-router/html":"*","expo-router/head":"*","expo-router/entry":"*","react-native-pager-view":"*"},deprecatedModules:{}},"54.0.0":{version:"^54.0.0",coreModules:{...Kh,expo:"54.0.0",react:"19.1.0","react-dom":"19.1.0","react-native":"0.81.4","react-native-web":"*","@shopify/react-native-skia/lib/module/web":"*"},bundledModules:{"expo-asset":"*","expo-font":"*","react-native-gesture-handler":"*","react-native-safe-area-context":"*","@expo/vector-icons":"*","expo-constants":"*","expo-file-system":"*","expo-updates":"*","@react-native-async-storage/async-storage":"*","react-native-reanimated":"*","expo-router":"*","expo-router/stack":"*","expo-router/tabs":"*","expo-router/drawer":"*","expo-router/html":"*","expo-router/head":"*","expo-router/entry":"*","react-native-pager-view":"*"},deprecatedModules:{}}};BC.default=Oce});var PB=R(jC=>{"use strict";Object.defineProperty(jC,"__esModule",{value:!0});var Pce={MULTIPLE_FILES:"21.0.0",PROJECT_DEPENDENCIES:"25.0.0",TYPESCRIPT:"31.0.0",UNIMODULE_IMPORTS:"33.0.0",POSTMESSAGE_TRANSPORT:"35.0.0",VERSIONED_SNACKAGER:"37.0.0"};jC.default=Pce});var NB=R(on=>{"use strict";var HC=on&&on.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(on,"__esModule",{value:!0});on.standardizeDependencies=on.isFeatureSupported=on.isValidSemver=on.getSupportedSDKVersions=on.getDeprecatedModule=on.validateSDKVersion=on.getPreloadedModules=on.isModulePreloaded=void 0;var LB=HC($C()),af=HC(qC()),RB=HC(PB());function Rce(t,e,r){let n=af.default[e];return n?!!(n.coreModules[t]||!r&&n.bundledModules[t]):!1}on.isModulePreloaded=Rce;function Lce(t,e){let r=af.default[t];return r?e?r.coreModules:{...r.coreModules,...r.bundledModules}:{}}on.getPreloadedModules=Lce;function Nce(t){if(Object.keys(af.default).indexOf(t)<0)throw new Error(`Invalid SDKVersion, the following versions are supported: ${Object.keys(af.default)}`);return t}on.validateSDKVersion=Nce;function Fce(t,e){var r,n;return(n=(r=af.default[e])===null||r===void 0?void 0:r.deprecatedModules)===null||n===void 0?void 0:n[t]}on.getDeprecatedModule=Fce;function Mce(){return Object.keys(af.default)}on.getSupportedSDKVersions=Mce;function Uce(t){return t==="latest"||!!LB.default.validRange(t)}on.isValidSemver=Uce;function $ce(t,e){let r=RB.default[t];if(!r)throw new Error(`Invalid SDKFeature, the following versions are supported: ${Object.keys(RB.default)}`);return LB.default.gte(e,r)}on.isFeatureSupported=$ce;function Bce(t){let e=t;for(let r in t){let n=t[r];if(typeof n=="string")e=e===t?{...t}:e,e[r]={version:n};else if(typeof n=="object"){let i=qce(n.peerDependencies);n.peerDependencies!==i&&(e=e===t?{...t}:e,e[r]={...n,peerDependencies:i})}else e=e===t?{...t}:e,delete e[r]}return e}on.standardizeDependencies=Bce;function qce(t){if(!t)return t;let e=t;for(let r in t){let n=t[r];typeof n=="string"||n===null||(typeof n=="object"&&typeof n.version=="string"?(e=e===t?{...t}:e,e[r]=n.version):(e=e===t?{...t}:e,delete e[r]))}return e}});var MB=R(FB=>{"use strict";Object.defineProperty(FB,"__esModule",{value:!0})});var UB=R(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.parseRuntimeUrl=ys.createRuntimeUrl=ys.SNACK_RUNTIME_URL_PROTOCOL=ys.SNACK_RUNTIME_URL_ENDPOINT=void 0;ys.SNACK_RUNTIME_URL_ENDPOINT="u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824";ys.SNACK_RUNTIME_URL_PROTOCOL="exp";function jce(t){let e=t.protocol||ys.SNACK_RUNTIME_URL_PROTOCOL,r=t.endpoint||ys.SNACK_RUNTIME_URL_ENDPOINT,n=new URLSearchParams;return n.set("runtime-version",`exposdk:${t.sdkVersion}`),n.set("channel-name","production"),t.snack&&n.set("snack",t.snack),t.channel&&n.set("snack-channel",t.channel),`${e}://${r}?${n}`}ys.createRuntimeUrl=jce;function Hce(t){var e,r,n;let i=typeof t=="string"?new URL(t.replace(/^[a-zA-Z]+:/,"http:")):t,a=(e=i.searchParams.get("snack"))!==null&&e!==void 0?e:void 0,s=(r=i.searchParams.get("snack-channel"))!==null&&r!==void 0?r:void 0,o=i.searchParams.get("runtime-version"),[,c]=(n=o?.match(/(?:exposdk:)?([0-9]+\.[0-9]+\.[0-9]+)/))!==null&&n!==void 0?n:[];return c?{sdkVersion:c,snack:a,channel:s}:null}ys.parseRuntimeUrl=Hce});var vu=R($a=>{"use strict";var Gce=$a&&$a.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),By=$a&&$a.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Gce(e,t,r)},zce=$a&&$a.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($a,"__esModule",{value:!0});$a.sdks=void 0;By(HU(),$a);By(NB(),$a);var Vce=qC();Object.defineProperty($a,"sdks",{enumerable:!0,get:function(){return zce(Vce).default}});By(MB(),$a);By(UB(),$a)});var GC=R((wIe,$B)=>{var Wce=typeof window=="object"&&window&&window.Object===Object&&window;$B.exports=Wce});var bo=R((SIe,BB)=>{var Kce=GC(),Xce=typeof self=="object"&&self&&self.Object===Object&&self,Yce=Kce||Xce||Function("return this")();BB.exports=Yce});var Xh=R((TIe,qB)=>{var Jce=bo(),Qce=Jce.Symbol;qB.exports=Qce});var zB=R((CIe,GB)=>{var jB=Xh(),HB=Object.prototype,Zce=HB.hasOwnProperty,ele=HB.toString,Yh=jB?jB.toStringTag:void 0;function tle(t){var e=Zce.call(t,Yh),r=t[Yh];try{t[Yh]=void 0;var n=!0}catch{}var i=ele.call(t);return n&&(e?t[Yh]=r:delete t[Yh]),i}GB.exports=tle});var WB=R((EIe,VB)=>{var rle=Object.prototype,ile=rle.toString;function nle(t){return ile.call(t)}VB.exports=nle});var sf=R((xIe,YB)=>{var KB=Xh(),ale=zB(),sle=WB(),ole="[object Null]",ule="[object Undefined]",XB=KB?KB.toStringTag:void 0;function cle(t){return t==null?t===void 0?ule:ole:XB&&XB in Object(t)?ale(t):sle(t)}YB.exports=cle});var qy=R((AIe,JB)=>{function lle(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}JB.exports=lle});var zC=R((kIe,QB)=>{var dle=sf(),fle=qy(),ple="[object AsyncFunction]",hle="[object Function]",gle="[object GeneratorFunction]",mle="[object Proxy]";function vle(t){if(!fle(t))return!1;var e=dle(t);return e==hle||e==gle||e==ple||e==mle}QB.exports=vle});var eq=R((IIe,ZB)=>{var yle=bo(),ble=yle["__core-js_shared__"];ZB.exports=ble});var iq=R((DIe,rq)=>{var VC=eq(),tq=function(){var t=/[^.]+$/.exec(VC&&VC.keys&&VC.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function _le(t){return!!tq&&tq in t}rq.exports=_le});var WC=R((OIe,nq)=>{var wle=Function.prototype,Sle=wle.toString;function Tle(t){if(t!=null){try{return Sle.call(t)}catch{}try{return t+""}catch{}}return""}nq.exports=Tle});var sq=R((PIe,aq)=>{var Cle=zC(),Ele=iq(),xle=qy(),Ale=WC(),kle=/[\\^$.*+?()[\]{}|]/g,Ile=/^\[object .+?Constructor\]$/,Dle=Function.prototype,Ole=Object.prototype,Ple=Dle.toString,Rle=Ole.hasOwnProperty,Lle=RegExp("^"+Ple.call(Rle).replace(kle,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nle(t){if(!xle(t)||Ele(t))return!1;var e=Cle(t)?Lle:Ile;return e.test(Ale(t))}aq.exports=Nle});var uq=R((RIe,oq)=>{function Fle(t,e){return t?.[e]}oq.exports=Fle});var oc=R((LIe,cq)=>{var Mle=sq(),Ule=uq();function $le(t,e){var r=Ule(t,e);return Mle(r)?r:void 0}cq.exports=$le});var dq=R((NIe,lq)=>{var Ble=oc(),qle=function(){try{var t=Ble(Object,"defineProperty");return t({},"",{}),t}catch{}}();lq.exports=qle});var hq=R((FIe,pq)=>{var fq=dq();function jle(t,e,r){e=="__proto__"&&fq?fq(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}pq.exports=jle});var mq=R((MIe,gq)=>{function Hle(t){return function(e,r,n){for(var i=-1,a=Object(e),s=n(e),o=s.length;o--;){var c=s[t?o:++i];if(r(a[c],c,a)===!1)break}return e}}gq.exports=Hle});var yq=R((UIe,vq)=>{var Gle=mq(),zle=Gle();vq.exports=zle});var _q=R(($Ie,bq)=>{function Vle(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}bq.exports=Vle});var of=R((BIe,wq)=>{function Wle(t){return t!=null&&typeof t=="object"}wq.exports=Wle});var Tq=R((qIe,Sq)=>{var Kle=sf(),Xle=of(),Yle="[object Arguments]";function Jle(t){return Xle(t)&&Kle(t)==Yle}Sq.exports=Jle});var KC=R((jIe,xq)=>{var Cq=Tq(),Qle=of(),Eq=Object.prototype,Zle=Eq.hasOwnProperty,ede=Eq.propertyIsEnumerable,tde=Cq(function(){return arguments}())?Cq:function(t){return Qle(t)&&Zle.call(t,"callee")&&!ede.call(t,"callee")};xq.exports=tde});var yu=R((HIe,Aq)=>{var rde=Array.isArray;Aq.exports=rde});var Iq=R((GIe,kq)=>{function ide(){return!1}kq.exports=ide});var XC=R((Jh,uf)=>{var nde=bo(),ade=Iq(),Pq=typeof Jh=="object"&&Jh&&!Jh.nodeType&&Jh,Dq=Pq&&typeof uf=="object"&&uf&&!uf.nodeType&&uf,sde=Dq&&Dq.exports===Pq,Oq=sde?nde.Buffer:void 0,ode=Oq?Oq.isBuffer:void 0,ude=ode||ade;uf.exports=ude});var YC=R((zIe,Rq)=>{var cde=9007199254740991,lde=/^(?:0|[1-9]\d*)$/;function dde(t,e){var r=typeof t;return e=e??cde,!!e&&(r=="number"||r!="symbol"&&lde.test(t))&&t>-1&&t%1==0&&t<e}Rq.exports=dde});var jy=R((VIe,Lq)=>{var fde=9007199254740991;function pde(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fde}Lq.exports=pde});var Fq=R((WIe,Nq)=>{var hde=sf(),gde=jy(),mde=of(),vde="[object Arguments]",yde="[object Array]",bde="[object Boolean]",_de="[object Date]",wde="[object Error]",Sde="[object Function]",Tde="[object Map]",Cde="[object Number]",Ede="[object Object]",xde="[object RegExp]",Ade="[object Set]",kde="[object String]",Ide="[object WeakMap]",Dde="[object ArrayBuffer]",Ode="[object DataView]",Pde="[object Float32Array]",Rde="[object Float64Array]",Lde="[object Int8Array]",Nde="[object Int16Array]",Fde="[object Int32Array]",Mde="[object Uint8Array]",Ude="[object Uint8ClampedArray]",$de="[object Uint16Array]",Bde="[object Uint32Array]",Ti={};Ti[Pde]=Ti[Rde]=Ti[Lde]=Ti[Nde]=Ti[Fde]=Ti[Mde]=Ti[Ude]=Ti[$de]=Ti[Bde]=!0;Ti[vde]=Ti[yde]=Ti[Dde]=Ti[bde]=Ti[Ode]=Ti[_de]=Ti[wde]=Ti[Sde]=Ti[Tde]=Ti[Cde]=Ti[Ede]=Ti[xde]=Ti[Ade]=Ti[kde]=Ti[Ide]=!1;function qde(t){return mde(t)&&gde(t.length)&&!!Ti[hde(t)]}Nq.exports=qde});var Uq=R((KIe,Mq)=>{function jde(t){return function(e){return t(e)}}Mq.exports=jde});var Bq=R((Qh,cf)=>{var Hde=GC(),$q=typeof Qh=="object"&&Qh&&!Qh.nodeType&&Qh,Zh=$q&&typeof cf=="object"&&cf&&!cf.nodeType&&cf,Gde=Zh&&Zh.exports===$q,JC=Gde&&Hde.process,zde=function(){try{var t=Zh&&Zh.require&&Zh.require("util").types;return t||JC&&JC.binding&&JC.binding("util")}catch{}}();cf.exports=zde});var QC=R((XIe,Hq)=>{var Vde=Fq(),Wde=Uq(),qq=Bq(),jq=qq&&qq.isTypedArray,Kde=jq?Wde(jq):Vde;Hq.exports=Kde});var zq=R((YIe,Gq)=>{var Xde=_q(),Yde=KC(),Jde=yu(),Qde=XC(),Zde=YC(),efe=QC(),tfe=Object.prototype,rfe=tfe.hasOwnProperty;function ife(t,e){var r=Jde(t),n=!r&&Yde(t),i=!r&&!n&&Qde(t),a=!r&&!n&&!i&&efe(t),s=r||n||i||a,o=s?Xde(t.length,String):[],c=o.length;for(var l in t)(e||rfe.call(t,l))&&!(s&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Zde(l,c)))&&o.push(l);return o}Gq.exports=ife});var Wq=R((JIe,Vq)=>{var nfe=Object.prototype;function afe(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||nfe;return t===r}Vq.exports=afe});var Xq=R((QIe,Kq)=>{function sfe(t,e){return function(r){return t(e(r))}}Kq.exports=sfe});var Jq=R((ZIe,Yq)=>{var ofe=Xq(),ufe=ofe(Object.keys,Object);Yq.exports=ufe});var Zq=R((eDe,Qq)=>{var cfe=Wq(),lfe=Jq(),dfe=Object.prototype,ffe=dfe.hasOwnProperty;function pfe(t){if(!cfe(t))return lfe(t);var e=[];for(var r in Object(t))ffe.call(t,r)&&r!="constructor"&&e.push(r);return e}Qq.exports=pfe});var t3=R((tDe,e3)=>{var hfe=zC(),gfe=jy();function mfe(t){return t!=null&&gfe(t.length)&&!hfe(t)}e3.exports=mfe});var Hy=R((rDe,r3)=>{var vfe=zq(),yfe=Zq(),bfe=t3();function _fe(t){return bfe(t)?vfe(t):yfe(t)}r3.exports=_fe});var n3=R((iDe,i3)=>{var wfe=yq(),Sfe=Hy();function Tfe(t,e){return t&&wfe(t,e,Sfe)}i3.exports=Tfe});var s3=R((nDe,a3)=>{function Cfe(){this.__data__=[],this.size=0}a3.exports=Cfe});var ZC=R((aDe,o3)=>{function Efe(t,e){return t===e||t!==t&&e!==e}o3.exports=Efe});var eg=R((sDe,u3)=>{var xfe=ZC();function Afe(t,e){for(var r=t.length;r--;)if(xfe(t[r][0],e))return r;return-1}u3.exports=Afe});var l3=R((oDe,c3)=>{var kfe=eg(),Ife=Array.prototype,Dfe=Ife.splice;function Ofe(t){var e=this.__data__,r=kfe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Dfe.call(e,r,1),--this.size,!0}c3.exports=Ofe});var f3=R((uDe,d3)=>{var Pfe=eg();function Rfe(t){var e=this.__data__,r=Pfe(e,t);return r<0?void 0:e[r][1]}d3.exports=Rfe});var h3=R((cDe,p3)=>{var Lfe=eg();function Nfe(t){return Lfe(this.__data__,t)>-1}p3.exports=Nfe});var m3=R((lDe,g3)=>{var Ffe=eg();function Mfe(t,e){var r=this.__data__,n=Ffe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}g3.exports=Mfe});var tg=R((dDe,v3)=>{var Ufe=s3(),$fe=l3(),Bfe=f3(),qfe=h3(),jfe=m3();function lf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}lf.prototype.clear=Ufe;lf.prototype.delete=$fe;lf.prototype.get=Bfe;lf.prototype.has=qfe;lf.prototype.set=jfe;v3.exports=lf});var b3=R((fDe,y3)=>{var Hfe=tg();function Gfe(){this.__data__=new Hfe,this.size=0}y3.exports=Gfe});var w3=R((pDe,_3)=>{function zfe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}_3.exports=zfe});var T3=R((hDe,S3)=>{function Vfe(t){return this.__data__.get(t)}S3.exports=Vfe});var E3=R((gDe,C3)=>{function Wfe(t){return this.__data__.has(t)}C3.exports=Wfe});var Gy=R((mDe,x3)=>{var Kfe=oc(),Xfe=bo(),Yfe=Kfe(Xfe,"Map");x3.exports=Yfe});var rg=R((vDe,A3)=>{var Jfe=oc(),Qfe=Jfe(Object,"create");A3.exports=Qfe});var D3=R((yDe,I3)=>{var k3=rg();function Zfe(){this.__data__=k3?k3(null):{},this.size=0}I3.exports=Zfe});var P3=R((bDe,O3)=>{function epe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}O3.exports=epe});var L3=R((_De,R3)=>{var tpe=rg(),rpe="__lodash_hash_undefined__",ipe=Object.prototype,npe=ipe.hasOwnProperty;function ape(t){var e=this.__data__;if(tpe){var r=e[t];return r===rpe?void 0:r}return npe.call(e,t)?e[t]:void 0}R3.exports=ape});var F3=R((wDe,N3)=>{var spe=rg(),ope=Object.prototype,upe=ope.hasOwnProperty;function cpe(t){var e=this.__data__;return spe?e[t]!==void 0:upe.call(e,t)}N3.exports=cpe});var U3=R((SDe,M3)=>{var lpe=rg(),dpe="__lodash_hash_undefined__";function fpe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=lpe&&e===void 0?dpe:e,this}M3.exports=fpe});var B3=R((TDe,$3)=>{var ppe=D3(),hpe=P3(),gpe=L3(),mpe=F3(),vpe=U3();function df(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}df.prototype.clear=ppe;df.prototype.delete=hpe;df.prototype.get=gpe;df.prototype.has=mpe;df.prototype.set=vpe;$3.exports=df});var H3=R((CDe,j3)=>{var q3=B3(),ype=tg(),bpe=Gy();function _pe(){this.size=0,this.__data__={hash:new q3,map:new(bpe||ype),string:new q3}}j3.exports=_pe});var z3=R((EDe,G3)=>{function wpe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}G3.exports=wpe});var ig=R((xDe,V3)=>{var Spe=z3();function Tpe(t,e){var r=t.__data__;return Spe(e)?r[typeof e=="string"?"string":"hash"]:r.map}V3.exports=Tpe});var K3=R((ADe,W3)=>{var Cpe=ig();function Epe(t){var e=Cpe(this,t).delete(t);return this.size-=e?1:0,e}W3.exports=Epe});var Y3=R((kDe,X3)=>{var xpe=ig();function Ape(t){return xpe(this,t).get(t)}X3.exports=Ape});var Q3=R((IDe,J3)=>{var kpe=ig();function Ipe(t){return kpe(this,t).has(t)}J3.exports=Ipe});var ej=R((DDe,Z3)=>{var Dpe=ig();function Ope(t,e){var r=Dpe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}Z3.exports=Ope});var zy=R((ODe,tj)=>{var Ppe=H3(),Rpe=K3(),Lpe=Y3(),Npe=Q3(),Fpe=ej();function ff(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ff.prototype.clear=Ppe;ff.prototype.delete=Rpe;ff.prototype.get=Lpe;ff.prototype.has=Npe;ff.prototype.set=Fpe;tj.exports=ff});var ij=R((PDe,rj)=>{var Mpe=tg(),Upe=Gy(),$pe=zy(),Bpe=200;function qpe(t,e){var r=this.__data__;if(r instanceof Mpe){var n=r.__data__;if(!Upe||n.length<Bpe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new $pe(n)}return r.set(t,e),this.size=r.size,this}rj.exports=qpe});var eE=R((RDe,nj)=>{var jpe=tg(),Hpe=b3(),Gpe=w3(),zpe=T3(),Vpe=E3(),Wpe=ij();function pf(t){var e=this.__data__=new jpe(t);this.size=e.size}pf.prototype.clear=Hpe;pf.prototype.delete=Gpe;pf.prototype.get=zpe;pf.prototype.has=Vpe;pf.prototype.set=Wpe;nj.exports=pf});var sj=R((LDe,aj)=>{var Kpe="__lodash_hash_undefined__";function Xpe(t){return this.__data__.set(t,Kpe),this}aj.exports=Xpe});var uj=R((NDe,oj)=>{function Ype(t){return this.__data__.has(t)}oj.exports=Ype});var lj=R((FDe,cj)=>{var Jpe=zy(),Qpe=sj(),Zpe=uj();function Vy(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Jpe;++e<r;)this.add(t[e])}Vy.prototype.add=Vy.prototype.push=Qpe;Vy.prototype.has=Zpe;cj.exports=Vy});var fj=R((MDe,dj)=>{function ehe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}dj.exports=ehe});var hj=R((UDe,pj)=>{function the(t,e){return t.has(e)}pj.exports=the});var tE=R(($De,gj)=>{var rhe=lj(),ihe=fj(),nhe=hj(),ahe=1,she=2;function ohe(t,e,r,n,i,a){var s=r&ahe,o=t.length,c=e.length;if(o!=c&&!(s&&c>o))return!1;var l=a.get(t),f=a.get(e);if(l&&f)return l==e&&f==t;var g=-1,m=!0,y=r&she?new rhe:void 0;for(a.set(t,e),a.set(e,t);++g<o;){var x=t[g],I=e[g];if(n)var A=s?n(I,x,g,e,t,a):n(x,I,g,t,e,a);if(A!==void 0){if(A)continue;m=!1;break}if(y){if(!ihe(e,function(F,X){if(!nhe(y,X)&&(x===F||i(x,F,r,n,a)))return y.push(X)})){m=!1;break}}else if(!(x===I||i(x,I,r,n,a))){m=!1;break}}return a.delete(t),a.delete(e),m}gj.exports=ohe});var vj=R((BDe,mj)=>{var uhe=bo(),che=uhe.Uint8Array;mj.exports=che});var bj=R((qDe,yj)=>{function lhe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}yj.exports=lhe});var wj=R((jDe,_j)=>{function dhe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}_j.exports=dhe});var xj=R((HDe,Ej)=>{var Sj=Xh(),Tj=vj(),fhe=ZC(),phe=tE(),hhe=bj(),ghe=wj(),mhe=1,vhe=2,yhe="[object Boolean]",bhe="[object Date]",_he="[object Error]",whe="[object Map]",She="[object Number]",The="[object RegExp]",Che="[object Set]",Ehe="[object String]",xhe="[object Symbol]",Ahe="[object ArrayBuffer]",khe="[object DataView]",Cj=Sj?Sj.prototype:void 0,rE=Cj?Cj.valueOf:void 0;function Ihe(t,e,r,n,i,a,s){switch(r){case khe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ahe:return!(t.byteLength!=e.byteLength||!a(new Tj(t),new Tj(e)));case yhe:case bhe:case She:return fhe(+t,+e);case _he:return t.name==e.name&&t.message==e.message;case The:case Ehe:return t==e+"";case whe:var o=hhe;case Che:var c=n&mhe;if(o||(o=ghe),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;n|=vhe,s.set(t,e);var f=phe(o(t),o(e),n,i,a,s);return s.delete(t),f;case xhe:if(rE)return rE.call(t)==rE.call(e)}return!1}Ej.exports=Ihe});var kj=R((GDe,Aj)=>{function Dhe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}Aj.exports=Dhe});var Dj=R((zDe,Ij)=>{var Ohe=kj(),Phe=yu();function Rhe(t,e,r){var n=e(t);return Phe(t)?n:Ohe(n,r(t))}Ij.exports=Rhe});var Pj=R((VDe,Oj)=>{function Lhe(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[i++]=s)}return a}Oj.exports=Lhe});var Lj=R((WDe,Rj)=>{function Nhe(){return[]}Rj.exports=Nhe});var Mj=R((KDe,Fj)=>{var Fhe=Pj(),Mhe=Lj(),Uhe=Object.prototype,$he=Uhe.propertyIsEnumerable,Nj=Object.getOwnPropertySymbols,Bhe=Nj?function(t){return t==null?[]:(t=Object(t),Fhe(Nj(t),function(e){return $he.call(t,e)}))}:Mhe;Fj.exports=Bhe});var $j=R((XDe,Uj)=>{var qhe=Dj(),jhe=Mj(),Hhe=Hy();function Ghe(t){return qhe(t,Hhe,jhe)}Uj.exports=Ghe});var jj=R((YDe,qj)=>{var Bj=$j(),zhe=1,Vhe=Object.prototype,Whe=Vhe.hasOwnProperty;function Khe(t,e,r,n,i,a){var s=r&zhe,o=Bj(t),c=o.length,l=Bj(e),f=l.length;if(c!=f&&!s)return!1;for(var g=c;g--;){var m=o[g];if(!(s?m in e:Whe.call(e,m)))return!1}var y=a.get(t),x=a.get(e);if(y&&x)return y==e&&x==t;var I=!0;a.set(t,e),a.set(e,t);for(var A=s;++g<c;){m=o[g];var F=t[m],X=e[m];if(n)var de=s?n(X,F,m,e,t,a):n(F,X,m,t,e,a);if(!(de===void 0?F===X||i(F,X,r,n,a):de)){I=!1;break}A||(A=m=="constructor")}if(I&&!A){var N=t.constructor,H=e.constructor;N!=H&&"constructor"in t&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof H=="function"&&H instanceof H)&&(I=!1)}return a.delete(t),a.delete(e),I}qj.exports=Khe});var Gj=R((JDe,Hj)=>{var Xhe=oc(),Yhe=bo(),Jhe=Xhe(Yhe,"DataView");Hj.exports=Jhe});var Vj=R((QDe,zj)=>{var Qhe=oc(),Zhe=bo(),ege=Qhe(Zhe,"Promise");zj.exports=ege});var Kj=R((ZDe,Wj)=>{var tge=oc(),rge=bo(),ige=tge(rge,"Set");Wj.exports=ige});var Yj=R((eOe,Xj)=>{var nge=oc(),age=bo(),sge=nge(age,"WeakMap");Xj.exports=sge});var n4=R((tOe,i4)=>{var iE=Gj(),nE=Gy(),aE=Vj(),sE=Kj(),oE=Yj(),r4=sf(),hf=WC(),Jj="[object Map]",oge="[object Object]",Qj="[object Promise]",Zj="[object Set]",e4="[object WeakMap]",t4="[object DataView]",uge=hf(iE),cge=hf(nE),lge=hf(aE),dge=hf(sE),fge=hf(oE),_l=r4;(iE&&_l(new iE(new ArrayBuffer(1)))!=t4||nE&&_l(new nE)!=Jj||aE&&_l(aE.resolve())!=Qj||sE&&_l(new sE)!=Zj||oE&&_l(new oE)!=e4)&&(_l=function(t){var e=r4(t),r=e==oge?t.constructor:void 0,n=r?hf(r):"";if(n)switch(n){case uge:return t4;case cge:return Jj;case lge:return Qj;case dge:return Zj;case fge:return e4}return e});i4.exports=_l});var f4=R((rOe,d4)=>{var uE=eE(),pge=tE(),hge=xj(),gge=jj(),a4=n4(),s4=yu(),o4=XC(),mge=QC(),vge=1,u4="[object Arguments]",c4="[object Array]",Wy="[object Object]",yge=Object.prototype,l4=yge.hasOwnProperty;function bge(t,e,r,n,i,a){var s=s4(t),o=s4(e),c=s?c4:a4(t),l=o?c4:a4(e);c=c==u4?Wy:c,l=l==u4?Wy:l;var f=c==Wy,g=l==Wy,m=c==l;if(m&&o4(t)){if(!o4(e))return!1;s=!0,f=!1}if(m&&!f)return a||(a=new uE),s||mge(t)?pge(t,e,r,n,i,a):hge(t,e,c,r,n,i,a);if(!(r&vge)){var y=f&&l4.call(t,"__wrapped__"),x=g&&l4.call(e,"__wrapped__");if(y||x){var I=y?t.value():t,A=x?e.value():e;return a||(a=new uE),i(I,A,r,n,a)}}return m?(a||(a=new uE),gge(t,e,r,n,i,a)):!1}d4.exports=bge});var Ky=R((iOe,g4)=>{var _ge=f4(),p4=of();function h4(t,e,r,n,i){return t===e?!0:t==null||e==null||!p4(t)&&!p4(e)?t!==t&&e!==e:_ge(t,e,r,n,h4,i)}g4.exports=h4});var v4=R((nOe,m4)=>{var wge=eE(),Sge=Ky(),Tge=1,Cge=2;function Ege(t,e,r,n){var i=r.length,a=i,s=!n;if(t==null)return!a;for(t=Object(t);i--;){var o=r[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=r[i];var c=o[0],l=t[c],f=o[1];if(s&&o[2]){if(l===void 0&&!(c in t))return!1}else{var g=new wge;if(n)var m=n(l,f,c,t,e,g);if(!(m===void 0?Sge(f,l,Tge|Cge,n,g):m))return!1}}return!0}m4.exports=Ege});var cE=R((aOe,y4)=>{var xge=qy();function Age(t){return t===t&&!xge(t)}y4.exports=Age});var _4=R((sOe,b4)=>{var kge=cE(),Ige=Hy();function Dge(t){for(var e=Ige(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,kge(i)]}return e}b4.exports=Dge});var lE=R((oOe,w4)=>{function Oge(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}w4.exports=Oge});var T4=R((uOe,S4)=>{var Pge=v4(),Rge=_4(),Lge=lE();function Nge(t){var e=Rge(t);return e.length==1&&e[0][2]?Lge(e[0][0],e[0][1]):function(r){return r===t||Pge(r,t,e)}}S4.exports=Nge});var Xy=R((cOe,C4)=>{var Fge=sf(),Mge=of(),Uge="[object Symbol]";function $ge(t){return typeof t=="symbol"||Mge(t)&&Fge(t)==Uge}C4.exports=$ge});var Yy=R((lOe,E4)=>{var Bge=yu(),qge=Xy(),jge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hge=/^\w*$/;function Gge(t,e){if(Bge(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||qge(t)?!0:Hge.test(t)||!jge.test(t)||e!=null&&t in Object(e)}E4.exports=Gge});var k4=R((dOe,A4)=>{var x4=zy(),zge="Expected a function";function dE(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(zge);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(dE.Cache||x4),r}dE.Cache=x4;A4.exports=dE});var D4=R((fOe,I4)=>{var Vge=k4(),Wge=500;function Kge(t){var e=Vge(t,function(n){return r.size===Wge&&r.clear(),n}),r=e.cache;return e}I4.exports=Kge});var P4=R((pOe,O4)=>{var Xge=D4(),Yge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jge=/\\(\\)?/g,Qge=Xge(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Yge,function(r,n,i,a){e.push(i?a.replace(Jge,"$1"):n||r)}),e});O4.exports=Qge});var L4=R((hOe,R4)=>{function Zge(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}R4.exports=Zge});var B4=R((gOe,$4)=>{var N4=Xh(),eme=L4(),tme=yu(),rme=Xy(),ime=1/0,F4=N4?N4.prototype:void 0,M4=F4?F4.toString:void 0;function U4(t){if(typeof t=="string")return t;if(tme(t))return eme(t,U4)+"";if(rme(t))return M4?M4.call(t):"";var e=t+"";return e=="0"&&1/t==-ime?"-0":e}$4.exports=U4});var j4=R((mOe,q4)=>{var nme=B4();function ame(t){return t==null?"":nme(t)}q4.exports=ame});var fE=R((vOe,H4)=>{var sme=yu(),ome=Yy(),ume=P4(),cme=j4();function lme(t,e){return sme(t)?t:ome(t,e)?[t]:ume(cme(t))}H4.exports=lme});var ng=R((yOe,G4)=>{var dme=Xy(),fme=1/0;function pme(t){if(typeof t=="string"||dme(t))return t;var e=t+"";return e=="0"&&1/t==-fme?"-0":e}G4.exports=pme});var pE=R((bOe,z4)=>{var hme=fE(),gme=ng();function mme(t,e){e=hme(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[gme(e[r++])];return r&&r==n?t:void 0}z4.exports=mme});var W4=R((_Oe,V4)=>{var vme=pE();function yme(t,e,r){var n=t==null?void 0:vme(t,e);return n===void 0?r:n}V4.exports=yme});var X4=R((wOe,K4)=>{function bme(t,e){return t!=null&&e in Object(t)}K4.exports=bme});var J4=R((SOe,Y4)=>{var _me=fE(),wme=KC(),Sme=yu(),Tme=YC(),Cme=jy(),Eme=ng();function xme(t,e,r){e=_me(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var s=Eme(e[n]);if(!(a=t!=null&&r(t,s)))break;t=t[s]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&Cme(i)&&Tme(s,i)&&(Sme(t)||wme(t)))}Y4.exports=xme});var Z4=R((TOe,Q4)=>{var Ame=X4(),kme=J4();function Ime(t,e){return t!=null&&kme(t,e,Ame)}Q4.exports=Ime});var t5=R((COe,e5)=>{var Dme=Ky(),Ome=W4(),Pme=Z4(),Rme=Yy(),Lme=cE(),Nme=lE(),Fme=ng(),Mme=1,Ume=2;function $me(t,e){return Rme(t)&&Lme(e)?Nme(Fme(t),e):function(r){var n=Ome(r,t);return n===void 0&&n===e?Pme(r,t):Dme(e,n,Mme|Ume)}}e5.exports=$me});var i5=R((EOe,r5)=>{function Bme(t){return t}r5.exports=Bme});var a5=R((xOe,n5)=>{function qme(t){return function(e){return e?.[t]}}n5.exports=qme});var o5=R((AOe,s5)=>{var jme=pE();function Hme(t){return function(e){return jme(e,t)}}s5.exports=Hme});var c5=R((kOe,u5)=>{var Gme=a5(),zme=o5(),Vme=Yy(),Wme=ng();function Kme(t){return Vme(t)?Gme(Wme(t)):zme(t)}u5.exports=Kme});var d5=R((IOe,l5)=>{var Xme=T4(),Yme=t5(),Jme=i5(),Qme=yu(),Zme=c5();function eve(t){return typeof t=="function"?t:t==null?Jme:typeof t=="object"?Qme(t)?Yme(t[0],t[1]):Xme(t):Zme(t)}l5.exports=eve});var p5=R((DOe,f5)=>{var tve=hq(),rve=n3(),ive=d5();function nve(t,e){var r={};return e=ive(e,3),rve(t,function(n,i,a){tve(r,i,e(n,i,a))}),r}f5.exports=nve});var g5=R((OOe,Jy)=>{"use strict";function h5(t,e){if(t!=null)return t;var r=new Error(e!==void 0?e:"Got unexpected "+t);throw r.framesToPop=1,r}Jy.exports=h5;Jy.exports.default=h5;Object.defineProperty(Jy.exports,"__esModule",{value:!0})});var m5=R((POe,ave)=>{ave.exports=["assert","buffer","child_process","cluster","console","constants","crypto","dgram","dns","domain","events","fs","http","https","module","net","os","path","process","punycode","querystring","readline","repl","stream","string_decoder","timers","tls","tty","url","util","v8","vm","zlib"]});var b5=R((ROe,y5)=>{"use strict";var v5=new RegExp("^(?:@([^/]+?)[/])?([^/]+?)$"),sve=m5(),ove=["node_modules","favicon.ico"],uve=y5.exports=function(t){var e=[],r=[];if(t===null)return r.push("name cannot be null"),ag(e,r);if(t===void 0)return r.push("name cannot be undefined"),ag(e,r);if(typeof t!="string")return r.push("name must be a string"),ag(e,r);if(t.length||r.push("name length must be greater than zero"),t.match(/^\./)&&r.push("name cannot start with a period"),t.match(/^_/)&&r.push("name cannot start with an underscore"),t.trim()!==t&&r.push("name cannot contain leading or trailing spaces"),ove.forEach(function(s){t.toLowerCase()===s&&r.push(s+" is a blacklisted name")}),sve.forEach(function(s){t.toLowerCase()===s&&e.push(s+" is a core module name")}),t.length>214&&e.push("name can no longer contain more than 214 characters"),t.toLowerCase()!==t&&e.push("name can no longer contain capital letters"),/[~'!()*]/.test(t.split("/").slice(-1)[0])&&e.push(`name can no longer contain special characters ("~'!()*")`),encodeURIComponent(t)!==t){var n=t.match(v5);if(n){var i=n[1],a=n[2];if(encodeURIComponent(i)===i&&encodeURIComponent(a)===a)return ag(e,r)}r.push("name can only contain URL-friendly characters")}return ag(e,r)};uve.scopedPackagePattern=v5;var ag=function(t,e){var r={validForNewPackages:e.length===0&&t.length===0,validForOldPackages:e.length===0,warnings:t,errors:e};return r.warnings.length||delete r.warnings,r.errors.length||delete r.errors,r}});var _5,w5=GA(()=>{_5="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var C5={};$V(C5,{customAlphabet:()=>cve,customRandom:()=>T5,nanoid:()=>lve,random:()=>S5,urlAlphabet:()=>_5});var S5,T5,cve,lve,E5=GA(()=>{w5();S5=t=>crypto.getRandomValues(new Uint8Array(t)),T5=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*n*e/t.length);return(a=e)=>{let s="";for(;;){let o=r(i),c=i|0;for(;c--;)if(s+=t[o[c]&n]||"",s.length===a)return s}}},cve=(t,e=21)=>T5(t,e,S5),lve=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"")});var wl=R(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.createUserHeader=Ba.createError=Ba.createURL=Ba.createChannel=Ba.setSnackSDKFetch=Ba.fetch=void 0;var dve=(E5(),BV(C5)),fve=vu(),Qy,pve=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Qy||(Qy=globalThis.fetch),Qy.apply(void 0,t)};Ba.fetch=pve;function hve(t){Qy=t}Ba.setSnackSDKFetch=hve;var x5="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",gve=(0,dve.customAlphabet)(x5,10);function mve(t){if(t=t??gve(),t.length<6)throw new Error("Please use a channel id with more characters (entropy)");if(t.length>128)throw new Error("Channel id too long, use a channel id thats shorter than 128 characters");for(var e=0,r=t;e<r.length;e++){var n=r[e];if(x5.indexOf(n)<0)throw new Error('Channel id contains an invalid character "'.concat(n,'", only "[0-9a-zA-Z]" are allowed'))}return t}Ba.createChannel=mve;function vve(t,e,r,n){return(0,fve.createRuntimeUrl)({endpoint:t,channel:r,sdkVersion:e,snack:n})}Ba.createURL=vve;function yve(t){var e=new Error(t.message);return t.name&&(e.name=t.name),t.fileName&&(e.fileName=t.fileName),t.lineNumber&&(e.lineNumber=t.lineNumber),t.columnNumber&&(e.columnNumber=t.columnNumber),t.stack&&(e.stack=t.stack),e}Ba.createError=yve;function bve(t){return t?.sessionSecret?{"Expo-Session":t.sessionSecret}:t?.accessToken?{Authorization:"Bearer ".concat(t.accessToken)}:{}}Ba.createUserHeader=bve});var R5=R($n=>{"use strict";var A5=$n&&$n.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(f){try{l(n.next(f))}catch(g){s(g)}}function c(f){try{l(n.throw(f))}catch(g){s(g)}}function l(f){f.done?a(f.value):i(f.value).then(o,c)}l((n=n.apply(t,e||[])).next())})},k5=$n&&$n.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(f){return c([l,f])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},I5=$n&&$n.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},O5=$n&&$n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($n,"__esModule",{value:!0});$n.getPackageName=$n.verifyDependency=$n.getMissingDependencies=void 0;var hE=O5($C()),P5=vu(),gE=O5(b5()),Zy=wl();function D5(t,e){return e?"".concat(t,"@").concat(e):t}var _ve=function(){function t(e){this.status={},this.snackagerURL=e.snackagerURL,this.logger=e.logger,this.callback=e.callback}return t.prototype.add=function(e,r,n){var i=D5(e,r);return this.status[i]=this.status[i]||this.resolve(i,e,r,n),this.status[i]},t.prototype.remove=function(e,r,n){delete this.status[D5(e,r)]},t.prototype.waitForCompletion=function(){return A5(this,void 0,void 0,function(){var e;return k5(this,function(r){switch(r.label){case 0:e=Object.values(this.status),r.label=1;case 1:return e.length?[4,Promise.all(e)]:[3,3];case 2:return r.sent(),e=Object.values(this.status),[3,1];case 3:return[2]}})})},t.prototype.resolve=function(e,r,n,i){var a,s,o,c;return A5(this,void 0,void 0,function(){var l,f,g,m,y,I,x,I,A;return k5(this,function(F){switch(F.label){case 0:l=i>="37.0.0"?"version_snackager=true&":"",f="".concat(this.snackagerURL,"/bundle/").concat(e,"?").concat(l,"sdkVersion=").concat(i,"&platforms=ios,android,web"),(a=this.logger)===null||a===void 0||a.module("Resolving dependency",e,"..."),F.label=1;case 1:F.trys.push([1,12,,13]),g=0,F.label=2;case 2:return g<30?[4,(0,Zy.fetch)(f)]:[3,11];case 3:return m=F.sent(),this.status[e]?m.status!==200?[3,8]:[4,m.json()]:[2];case 4:return y=F.sent(),y.pending?((s=this.logger)===null||s===void 0||s.module("Dependency is still being bundled",e,"trying again shortly"),[4,new Promise(function(X){return setTimeout(X,5e3)})]):[3,6];case 5:return F.sent(),this.status[e]?[3,7]:[2];case 6:(o=this.logger)===null||o===void 0||o.module("Resolved dependency",e,y),delete this.status[e];try{return this.callback({name:r,version:n,sdkVersion:i},y),[2]}catch(X){return[2,Promise.reject(X)]}F.label=7;case 7:return[3,10];case 8:return[4,m.text()];case 9:throw I=F.sent(),new Error(I);case 10:return g++,[3,2];case 11:return[3,13];case 12:return x=F.sent(),I=(0,Zy.createError)({message:"Failed to resolve dependency '".concat(e,"' (").concat(x.message,")"),fileName:e}),(c=this.logger)===null||c===void 0||c.error(I),A=!!this.status[e],A&&(delete this.status[e],this.callback({name:r,version:n,sdkVersion:i},void 0,I)),[3,13];case 13:return[2]}})})},t}();$n.default=_ve;function wve(t,e,r){var n,i,a={};for(var s in t){var o=t[s];if(o.peerDependencies){for(var c in o.peerDependencies)if(!(0,P5.isModulePreloaded)(c,e,!0)&&!t[c])if(!a[c])a[c]={dependents:[s],wantedVersion:(i=(n=r?.[c])!==null&&n!==void 0?n:o.peerDependencies[c])!==null&&i!==void 0?i:"*"};else{var l=r?.[c];if(!l){l=a[c].wantedVersion;var f=o.peerDependencies[c]||"*";(l==="*"||f==="latest"&&l==="latest"||f!=="*"&&f!=="latest"&&(l==="latest"||hE.default.gt(hE.default.coerce(f),hE.default.coerce(l))))&&(l=f)}a[c]={dependents:I5(I5([],a[c].dependents,!0),[s],!1),wantedVersion:l}}}}return a}$n.getMissingDependencies=wve;function Sve(t,e){var r=(0,gE.default)(t),n=r.validForOldPackages,i=r.errors;if(!n){var a=t.split("/");if(a.length>=2&&!t.startsWith("@")){var s=(0,gE.default)(a[0]);n=s.validForNewPackages,i=s.errors}else if(a.length>=2&&t.startsWith("@")){var s=(0,gE.default)(a[0]+"/"+a[1]);n=s.validForNewPackages,i=s.errors}if(!n)return(0,Zy.createError)({message:"Invalid dependency '".concat(t,"' ").concat(i?.length?"(".concat(i[0],")"):""),fileName:t})}if(!(0,P5.isValidSemver)(e))return(0,Zy.createError)({message:"Invalid dependency '".concat(t,"' (version '").concat(e,"' is not a valid semver)"),fileName:t})}$n.verifyDependency=Sve;function Tve(t){var e=t.split("/");return e[0].startsWith("@")&&e.length>=2?"".concat(e[0],"/").concat(e[1]):e[0]}$n.getPackageName=Tve});var M5=R(js=>{"use strict";var uc=js&&js.__assign||function(){return uc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},uc.apply(this,arguments)},L5=js&&js.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(f){try{l(n.next(f))}catch(g){s(g)}}function c(f){try{l(n.throw(f))}catch(g){s(g)}}function l(f){f.done?a(f.value):i(f.value).then(o,c)}l((n=n.apply(t,e||[])).next())})},N5=js&&js.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(f){return c([l,f])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},F5=js&&js.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(js,"__esModule",{value:!0});var mE=wl(),Cve=function(){function t(e){this.apiURL=e.apiURL,this.logger=e.logger,this.onSendBeaconCloseRequest=e.onSendBeaconCloseRequest}return t.prototype.setState=function(e,r){var n=r.user&&(!e.online||e.url!==r.url||e.user!==r.user),i=r.deviceId&&(!e.online||e.url!==r.url||e.deviceId!==r.deviceId);r.online&&(n||i)&&this.close(r.url,n?r.user:void 0,i?r.deviceId:void 0),(e.user!==r.user||e.online!==r.online||e.url!==r.url||e.deviceId!==r.deviceId||e.onlineName!==r.onlineName)&&this.notify(e)},t.prototype.setFocus=function(e){this.notify(e,!0)},t.prototype.getRequest=function(e,r,n){var i=n?"?deviceId=".concat(n):"",a=e?"notify-close":"notify-alive",s="".concat(this.apiURL,"/--/api/v2/development-sessions/").concat(a).concat(i);return{url:s,method:"post",headers:uc({"Content-Type":"application/json"},(0,mE.createUserHeader)(r))}},t.prototype.notify=function(e,r){var n,i;return L5(this,void 0,void 0,function(){var a,s,o,c,l,f,g,m,y,x,I;return N5(this,function(A){switch(A.label){case 0:if(a=e.user,s=e.online,o=e.url,c=e.deviceId,l=e.onlineName,!s||!a&&!c)return this.focusedAt=void 0,[2];(!this.focusedAt||r)&&(this.focusedAt=Date.now()),A.label=1;case 1:return A.trys.push([1,4,,5]),f=this.getRequest(!1,a,c),g=f.url,m=F5(f,["url"]),[4,(0,mE.fetch)(g,uc(uc({},m),{body:JSON.stringify({data:{session:{description:l,hostname:"snack",config:{},url:o,source:"snack",openedAt:this.focusedAt}}})}))];case 2:if(y=A.sent(),!y.ok)throw Error(y.statusText);return[4,y.json()];case 3:return x=A.sent(),this.onSendBeaconCloseRequest({url:this.getRequest(!0,void 0,c).url,data:new Blob([JSON.stringify(uc({session:{url:o}},!((n=x.data)===null||n===void 0)&&n.auth?{auth:x.data.auth}:{}))],{type:"text/plain"})}),[3,5];case 4:return I=A.sent(),(i=this.logger)===null||i===void 0||i.error("Failed to advertise",I),[3,5];case 5:return[2]}})})},t.prototype.close=function(e,r,n){var i;return L5(this,void 0,void 0,function(){var a,s,o,c,l;return N5(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),a=this.getRequest(!0,r,n),s=a.url,o=F5(a,["url"]),[4,(0,mE.fetch)(s,uc(uc({},o),{body:JSON.stringify({session:{url:e}})}))];case 1:if(c=f.sent(),!c.ok)throw Error(c.statusText);return[3,3];case 2:return l=f.sent(),(i=this.logger)===null||i===void 0||i.error("Failed to advertise close",l),[3,3];case 3:return[2]}})})},t}();js.default=Cve});var vE=R(Sl=>{"use strict";var U5=Sl&&Sl.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(f){try{l(n.next(f))}catch(g){s(g)}}function c(f){try{l(n.throw(f))}catch(g){s(g)}}function l(f){f.done?a(f.value):i(f.value).then(o,c)}l((n=n.apply(t,e||[])).next())})},$5=Sl&&Sl.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(f){return c([l,f])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Sl,"__esModule",{value:!0});var B5=wl(),Eve=function(){function t(e){this.status={},this.apiURL=e.apiURL,this.callback=e.callback,this.logger=e.logger}return t.prototype.add=function(e,r){var n=this.status[e];return n&&n.file===r?n.promise:(this.status[e]={file:r,promise:this.upload(e,r)},this.status[e].promise)},t.prototype.remove=function(e,r){var n;(!r||((n=this.status[e])===null||n===void 0?void 0:n.file)===r)&&delete this.status[e]},t.prototype.waitForCompletion=function(){return U5(this,void 0,void 0,function(){var e;return $5(this,function(r){switch(r.label){case 0:e=Object.values(this.status).map(function(n){return n.promise}),r.label=1;case 1:return e.length?[4,Promise.all(e)]:[3,3];case 2:return r.sent(),e=Object.values(this.status).map(function(n){return n.promise}),[3,1];case 3:return[2]}})})},t.prototype.upload=function(e,r){var n,i,a,s,o,c,l;return U5(this,void 0,void 0,function(){var f,g,m,y,x,I,A,F,X;return $5(this,function(de){switch(de.label){case 0:switch(de.trys.push([0,5,,6]),(n=this.logger)===null||n===void 0||n.module("Uploading file",e,"..."),f=void 0,g=void 0,r.type){case"CODE":f="".concat(this.apiURL,"/--/api/v2/snack/uploadCode"),g={method:"POST",body:JSON.stringify({code:r.contents}),headers:{"Content-Type":"application/json"}};break;case"ASSET":if(f="".concat(this.apiURL,"/--/api/v2/snack/uploadAsset"),typeof FormData<"u"&&r.contents instanceof FormData||typeof r.contents=="object"&&((i=r.contents.constructor)===null||i===void 0?void 0:i.name)==="FormData")g={method:"POST",body:r.contents};else if(typeof FormData<"u")m=new FormData,m.append("asset",r.contents,((a=r.contents)===null||a===void 0?void 0:a.name)||e),g={method:"POST",body:m};else throw new Error("Uploading assets is not supported in this environment. Make sure FormData is polyfilled or provide the data as a FormData object");break;default:throw new Error("Invalid file type ".concat(r.type))}return[4,(0,B5.fetch)(f,g)];case 1:return y=de.sent(),y.ok?[3,3]:[4,y.text()];case 2:throw x=de.sent(),new Error(x);case 3:return[4,y.json()];case 4:if(I=de.sent(),A=I.url,((s=this.status[e])===null||s===void 0?void 0:s.file)===r){(o=this.logger)===null||o===void 0||o.module("Uploaded file",e,A),delete this.status[e];try{this.callback({path:e,file:r},A)}catch(N){return[2,Promise.reject(N)]}}return[3,6];case 5:return F=de.sent(),X=(0,B5.createError)({message:"Failed to upload file ".concat(e," (").concat(F.message,")"),fileName:e}),(c=this.logger)===null||c===void 0||c.error(X),((l=this.status[e])===null||l===void 0?void 0:l.file)===r&&(delete this.status[e],this.callback({path:e,file:r},void 0,X)),[3,6];case 6:return[2]}})})},t}();Sl.default=Eve});var yE=R(mf=>{"use strict";var xve=mf&&mf.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(mf,"__esModule",{value:!0});mf.createLogger=void 0;function gf(t,e,r,n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];t&&console.log.apply(console,xve(["%c ".concat(e.toUpperCase()," "),"background: ".concat(r,"; color: ").concat(n??"#fff")],i,!1))}}function Ave(t){return{info:gf(t,"info","#2196f3"),warn:gf(t,"warn","#FF9800"),error:gf(t,"error","#f44336"),comm:gf(t,"comm","#DBD64E"),comm_recv:gf(t,"comm","#DBD64E","#000"),module:gf(t,"module","#DB14C7")}}mf.createLogger=Ave});var j5=R((qOe,q5)=>{var kve=Ky();function Ive(t,e){return kve(t,e)}q5.exports=Ive});var V5=R(zi=>{"use strict";var vf=zi&&zi.__assign||function(){return vf=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vf.apply(this,arguments)},Dve=zi&&zi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zi,"__esModule",{value:!0});zi.isUnsaved=zi.isCodeChanged=zi.isBusy=zi.updateObjects=zi.removeObject=zi.removeObjects=zi.addObject=zi.addObjects=void 0;var H5=Dve(j5()),Ove=vu();function G5(t,e,r){var n=null;for(var i in e)(r?r(e[i],t[i]):!(0,H5.default)(e[i],t[i]))&&(n=n??vf({},t),n[i]=e[i]);return n??t}zi.addObjects=G5;function Pve(t,e,r,n){var i;return G5(t,(i={},i[e]=r,i),n)}zi.addObject=Pve;function z5(t,e){if(!e.length)return t;var r=null;return e.forEach(function(n){t[n]&&(r=r??vf({},t),delete r[n])}),r??t}zi.removeObjects=z5;function Rve(t,e){return z5(t,[e])}zi.removeObject=Rve;function Lve(t,e,r){r===void 0&&(r=H5.default);var n=null;for(var i in e){var a=e[i];a===null?t[i]&&(n=n??vf({},t),delete n[i]):r(a,t[i])||(n=n??vf({},t),n[i]=a)}return n??t}zi.updateObjects=Lve;function Nve(t){return!!Object.keys(t.dependencies).find(function(e){return!t.dependencies[e].handle&&!(0,Ove.isModulePreloaded)(e,t.sdkVersion)})||!!Object.values(t.files).find(function(e){return e.type==="ASSET"&&typeof e.contents!="string"})}zi.isBusy=Nve;function Fve(t,e){return t.dependencies!==e.dependencies||t.files!==e.files||t.sdkVersion!==e.sdkVersion}zi.isCodeChanged=Fve;function Mve(t,e){return t.dependencies!==e.dependencies||t.files!==e.files||t.sdkVersion!==e.sdkVersion||t.name!==e.name||t.description!==e.description}zi.isUnsaved=Mve});var K5=R(_o=>{"use strict";var Tl=_o&&_o.__assign||function(){return Tl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Tl.apply(this,arguments)},Uve=_o&&_o.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(f){try{l(n.next(f))}catch(g){s(g)}}function c(f){try{l(n.throw(f))}catch(g){s(g)}}function l(f){f.done?a(f.value):i(f.value).then(o,c)}l((n=n.apply(t,e||[])).next())})},$ve=_o&&_o.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(f){return c([l,f])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(_o,"__esModule",{value:!0});_o.WantedDependencyVersions=void 0;var Bve=vu(),W5=wl(),qve=function(){function t(e){this.apiUrl=e.apiUrl,this.logger=e.logger,this.callback=e.callback,this.promise=Promise.resolve()}return t.prototype.setSDKVersion=function(e){this.sdkVersion!==e&&(this.sdkVersion=e,this.promise=this.fetchModules(e))},t.prototype.waitForCompletion=function(){return this.promise},t.prototype.fetchModules=function(e){var r,n,i,a;return Uve(this,void 0,void 0,function(){var s,o,c,l,f,g;return $ve(this,function(m){switch(m.label){case 0:if(this.sdkVersion!==e)return[2];m.label=1;case 1:return m.trys.push([1,3,,4]),(r=this.logger)===null||r===void 0||r.module("fetching versioned modules for SDK",e,"..."),s=((n=Bve.sdks[e])===null||n===void 0?void 0:n.version)||e,[4,Promise.all([this.fetchRemoteVersionedModules(s).catch(function(){}),this.fetchBundledNativeModules(s)])];case 2:return o=m.sent(),c=o[0],l=o[1],f=Tl(Tl({},c),l),this.sdkVersion===e&&((i=this.logger)===null||i===void 0||i.module("fetched versioned modules for SDK",e,f),this.callback(e,f)),[3,4];case 3:return g=m.sent(),this.sdkVersion===e&&((a=this.logger)===null||a===void 0||a.error(g),this.callback(e,void 0,g)),[3,4];case 4:return[2]}})})},t.prototype.fetchBundledNativeModules=function(e){var r=encodeURIComponent(e);return(0,W5.fetch)("https://cdn.jsdelivr.net/npm/expo@".concat(r,"/bundledNativeModules.json")).then(function(n){return n.json()}).then(function(n){return n||{}})},t.prototype.fetchRemoteVersionedModules=function(e){var r=this;return(0,W5.fetch)("".concat(this.apiUrl,"/--/api/v2/versions/latest")).then(function(n){return n.json()}).then(function(n){return r.normalizeRemoteVersionResponse(e,n)})},t.prototype.normalizeRemoteVersionResponse=function(e,r){var n,i;r===void 0&&(r={});var a=(i=(n=r?.data)===null||n===void 0?void 0:n.sdkVersions)===null||i===void 0?void 0:i[e];if(!a)return{};var s=a.relatedPackages,o=a.facebookReactVersion,c=a.facebookReactNativeVersion,l=o?{react:o,"react-dom":o}:void 0;return Tl(Tl(Tl({},s),l),{"react-native":c})},t}();_o.WantedDependencyVersions=qve});var e0=R(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.SnackIdentityState=Bn.webPlayerURL=Bn.snackpubURL=Bn.snackagerURL=Bn.apiURL=void 0;var X5=vu();Bn.apiURL="https://exp.host";Bn.snackagerURL="https://snackager.eascdn.net";Bn.snackpubURL="https://snackpub.expo.dev";Bn.webPlayerURL="https://snack-web-player.s3.us-west-1.amazonaws.com/v2/%%SDK_VERSION%%";Bn.SnackIdentityState={sdkVersion:X5.defaultSdkVersion,name:"",description:"",dependencies:{},missingDependencies:{},files:{},connectedClients:{},transports:{},disabled:!1,unsaved:!1,online:!1,url:"",channel:""};var jve={apiURL:Bn.apiURL,snackagerURL:Bn.snackagerURL,snackpubURL:Bn.snackpubURL,sdkVersion:X5.defaultSdkVersion,webPlayerURL:Bn.webPlayerURL};Bn.default=jve});var Y5=R((bE,_E)=>{(function(t,e){typeof bE=="object"&&typeof _E<"u"?_E.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).PubNub=e()})(bE,function(){"use strict";var t=function(d,u){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,v){p.__proto__=v}||function(p,v){for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(p[w]=v[w])},t(d,u)};function e(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function p(){this.constructor=d}t(d,u),d.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}var r=function(){return r=Object.assign||function(d){for(var u,p=1,v=arguments.length;p<v;p++)for(var w in u=arguments[p])Object.prototype.hasOwnProperty.call(u,w)&&(d[w]=u[w]);return d},r.apply(this,arguments)};function n(d,u){var p={};for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&u.indexOf(v)<0&&(p[v]=d[v]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function"){var w=0;for(v=Object.getOwnPropertySymbols(d);w<v.length;w++)u.indexOf(v[w])<0&&Object.prototype.propertyIsEnumerable.call(d,v[w])&&(p[v[w]]=d[v[w]])}return p}function i(d,u,p,v){return new(p||(p=Promise))(function(w,S){function O(V){try{W(v.next(V))}catch(J){S(J)}}function U(V){try{W(v.throw(V))}catch(J){S(J)}}function W(V){var J;V.done?w(V.value):(J=V.value,J instanceof p?J:new p(function(B){B(J)})).then(O,U)}W((v=v.apply(d,u||[])).next())})}function a(d,u){var p,v,w,S,O={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return S={next:U(0),throw:U(1),return:U(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function U(W){return function(V){return function(J){if(p)throw new TypeError("Generator is already executing.");for(;O;)try{if(p=1,v&&(w=2&J[0]?v.return:J[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,J[1])).done)return w;switch(v=0,w&&(J=[2&J[0],w.value]),J[0]){case 0:case 1:w=J;break;case 4:return O.label++,{value:J[1],done:!1};case 5:O.label++,v=J[1],J=[0];continue;case 7:J=O.ops.pop(),O.trys.pop();continue;default:if(w=O.trys,!((w=w.length>0&&w[w.length-1])||J[0]!==6&&J[0]!==2)){O=0;continue}if(J[0]===3&&(!w||J[1]>w[0]&&J[1]<w[3])){O.label=J[1];break}if(J[0]===6&&O.label<w[1]){O.label=w[1],w=J;break}if(w&&O.label<w[2]){O.label=w[2],O.ops.push(J);break}w[2]&&O.ops.pop(),O.trys.pop();continue}J=u.call(d,O)}catch(B){J=[6,B],v=0}finally{p=w=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([W,V])}}}function s(d){var u=typeof Symbol=="function"&&Symbol.iterator,p=u&&d[u],v=0;if(p)return p.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&v>=d.length&&(d=void 0),{value:d&&d[v++],done:!d}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(d,u){var p=typeof Symbol=="function"&&d[Symbol.iterator];if(!p)return d;var v,w,S=p.call(d),O=[];try{for(;(u===void 0||u-- >0)&&!(v=S.next()).done;)O.push(v.value)}catch(U){w={error:U}}finally{try{v&&!v.done&&(p=S.return)&&p.call(S)}finally{if(w)throw w.error}}return O}function c(d,u,p){if(p||arguments.length===2)for(var v,w=0,S=u.length;w<S;w++)!v&&w in u||(v||(v=Array.prototype.slice.call(u,0,w)),v[w]=u[w]);return d.concat(v||Array.prototype.slice.call(u))}var l=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function f(d){if(d.__esModule)return d;var u=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(d).forEach(function(p){var v=Object.getOwnPropertyDescriptor(d,p);Object.defineProperty(u,p,v.get?v:{enumerable:!0,get:function(){return d[p]}})}),u}var g={exports:{}};(function(d){(function(u,p){var v=Math.pow(2,-24),w=Math.pow(2,32),S=Math.pow(2,53),O={encode:function(U){var W,V=new ArrayBuffer(256),J=new DataView(V),B=0;function he(dt){for(var et=V.byteLength,me=B+dt;et<me;)et*=2;if(et!==V.byteLength){var Me=J;V=new ArrayBuffer(et),J=new DataView(V);for(var Pe=B+3>>2,Qe=0;Qe<Pe;++Qe)J.setUint32(4*Qe,Me.getUint32(4*Qe))}return W=dt,J}function se(){B+=W}function ne(dt){se(he(1).setUint8(B,dt))}function oe(dt){for(var et=he(dt.length),me=0;me<dt.length;++me)et.setUint8(B+me,dt[me]);se()}function ue(dt,et){et<24?ne(dt<<5|et):et<256?(ne(dt<<5|24),ne(et)):et<65536?(ne(dt<<5|25),function(me){se(he(2).setUint16(B,me))}(et)):et<4294967296?(ne(dt<<5|26),function(me){se(he(4).setUint32(B,me))}(et)):(ne(dt<<5|27),function(me){var Me=me%w,Pe=(me-Me)/w,Qe=he(8);Qe.setUint32(B,Pe),Qe.setUint32(B+4,Me),se()}(et))}if(function dt(et){var me;if(et===!1)return ne(244);if(et===!0)return ne(245);if(et===null)return ne(246);if(et===p)return ne(247);switch(typeof et){case"number":if(Math.floor(et)===et){if(0<=et&&et<=S)return ue(0,et);if(-S<=et&&et<0)return ue(1,-(et+1))}return ne(251),function(ve){se(he(8).setFloat64(B,ve))}(et);case"string":var Me=[];for(me=0;me<et.length;++me){var Pe=et.charCodeAt(me);Pe<128?Me.push(Pe):Pe<2048?(Me.push(192|Pe>>6),Me.push(128|63&Pe)):Pe<55296?(Me.push(224|Pe>>12),Me.push(128|Pe>>6&63),Me.push(128|63&Pe)):(Pe=(1023&Pe)<<10,Pe|=1023&et.charCodeAt(++me),Pe+=65536,Me.push(240|Pe>>18),Me.push(128|Pe>>12&63),Me.push(128|Pe>>6&63),Me.push(128|63&Pe))}return ue(3,Me.length),oe(Me);default:var Qe;if(Array.isArray(et))for(ue(4,Qe=et.length),me=0;me<Qe;++me)dt(et[me]);else if(et instanceof Uint8Array)ue(2,et.length),oe(et);else{var Le=Object.keys(et);for(ue(5,Qe=Le.length),me=0;me<Qe;++me){var Ue=Le[me];dt(Ue),dt(et[Ue])}}}}(U),"slice"in V)return V.slice(0,B);for(var Ie=new ArrayBuffer(B),Ve=new DataView(Ie),it=0;it<B;++it)Ve.setUint8(it,J.getUint8(it));return Ie},decode:function(U,W,V){var J=new DataView(U),B=0;function he(me,Me){return B+=Me,me}function se(me){return he(new Uint8Array(U,B,me),me)}function ne(){return he(J.getUint8(B),1)}function oe(){return he(J.getUint16(B),2)}function ue(){return he(J.getUint32(B),4)}function Ie(){return J.getUint8(B)===255&&(B+=1,!0)}function Ve(me){if(me<24)return me;if(me===24)return ne();if(me===25)return oe();if(me===26)return ue();if(me===27)return ue()*w+ue();if(me===31)return-1;throw"Invalid length encoding"}function it(me){var Me=ne();if(Me===255)return-1;var Pe=Ve(31&Me);if(Pe<0||Me>>5!==me)throw"Invalid indefinite length element";return Pe}function dt(me,Me){for(var Pe=0;Pe<Me;++Pe){var Qe=ne();128&Qe&&(Qe<224?(Qe=(31&Qe)<<6|63&ne(),Me-=1):Qe<240?(Qe=(15&Qe)<<12|(63&ne())<<6|63&ne(),Me-=2):(Qe=(15&Qe)<<18|(63&ne())<<12|(63&ne())<<6|63&ne(),Me-=3)),Qe<65536?me.push(Qe):(Qe-=65536,me.push(55296|Qe>>10),me.push(56320|1023&Qe))}}typeof W!="function"&&(W=function(me){return me}),typeof V!="function"&&(V=function(){return p});var et=function me(){var Me,Pe,Qe=ne(),Le=Qe>>5,Ue=31&Qe;if(Le===7)switch(Ue){case 25:return function(){var Di=new ArrayBuffer(4),Oi=new DataView(Di),Uo=oe(),Mu=32768&Uo,cs=31744&Uo,io=1023&Uo;if(cs===31744)cs=261120;else if(cs!==0)cs+=114688;else if(io!==0)return io*v;return Oi.setUint32(0,Mu<<16|cs<<13|io<<13),Oi.getFloat32(0)}();case 26:return he(J.getFloat32(B),4);case 27:return he(J.getFloat64(B),8)}if((Pe=Ve(Ue))<0&&(Le<2||6<Le))throw"Invalid length";switch(Le){case 0:return Pe;case 1:return-1-Pe;case 2:if(Pe<0){for(var ve=[],ct=0;(Pe=it(Le))>=0;)ct+=Pe,ve.push(se(Pe));var $e=new Uint8Array(ct),We=0;for(Me=0;Me<ve.length;++Me)$e.set(ve[Me],We),We+=ve[Me].length;return $e}return se(Pe);case 3:var st=[];if(Pe<0)for(;(Pe=it(Le))>=0;)dt(st,Pe);else dt(st,Pe);return String.fromCharCode.apply(null,st);case 4:var vt;if(Pe<0)for(vt=[];!Ie();)vt.push(me());else for(vt=new Array(Pe),Me=0;Me<Pe;++Me)vt[Me]=me();return vt;case 5:var br={};for(Me=0;Me<Pe||Pe<0&&!Ie();++Me)br[me()]=me();return br;case 6:return W(me(),Pe);case 7:switch(Pe){case 20:return!1;case 21:return!0;case 22:return null;case 23:return p;default:return V(Pe)}}}();if(B!==U.byteLength)throw"Remaining bytes";return et}};d.exports?d.exports=O:u.CBOR||(u.CBOR=O)})(l)})(g);var m=g.exports,y={exports:{}};(function(d,u){(function(p){var v="0.1.0",w={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};function S(){var U,W,V="";for(U=0;U<32;U++)W=16*Math.random()|0,U!==8&&U!==12&&U!==16&&U!==20||(V+="-"),V+=(U===12?4:U===16?3&W|8:W).toString(16);return V}function O(U,W){var V=w[W||"all"];return V&&V.test(U)||!1}S.isUUID=O,S.VERSION=v,p.uuid=S,p.isUUID=O})(u),d!==null&&(d.exports=u.uuid)})(y,y.exports);var x=y.exports,I=function(){return x.uuid?x.uuid():x()},A=function(){function d(u){var p,v,w,S,O=u.setup;if(this._PNSDKSuffix={},this.instanceId="pn-".concat(I()),this.secretKey=O.secretKey||O.secret_key,this.subscribeKey=O.subscribeKey||O.subscribe_key,this.publishKey=O.publishKey||O.publish_key,this.sdkName=O.sdkName,this.sdkFamily=O.sdkFamily,this.partnerId=O.partnerId,this.setAuthKey(O.authKey),this.cryptoModule=O.cryptoModule,this.setFilterExpression(O.filterExpression),typeof O.origin!="string"&&!Array.isArray(O.origin)&&O.origin!==void 0)throw new Error("Origin must be either undefined, a string or a list of strings.");if(this.origin=O.origin||Array.from({length:20},function(U,W){return"ps".concat(W+1,".pndsn.com")}),this.secure=O.ssl||!1,this.restore=O.restore||!1,this.proxy=O.proxy,this.keepAlive=O.keepAlive,this.keepAliveSettings=O.keepAliveSettings,this.autoNetworkDetection=O.autoNetworkDetection||!1,this.dedupeOnSubscribe=O.dedupeOnSubscribe||!1,this.maximumCacheSize=O.maximumCacheSize||100,this.customEncrypt=O.customEncrypt,this.customDecrypt=O.customDecrypt,this.fileUploadPublishRetryLimit=(p=O.fileUploadPublishRetryLimit)!==null&&p!==void 0?p:5,this.useRandomIVs=(v=O.useRandomIVs)===null||v===void 0||v,this.enableEventEngine=(w=O.enableEventEngine)!==null&&w!==void 0&&w,this.maintainPresenceState=(S=O.maintainPresenceState)===null||S===void 0||S,typeof location<"u"&&location.protocol==="https:"&&(this.secure=!0),this.logVerbosity=O.logVerbosity||!1,this.suppressLeaveEvents=O.suppressLeaveEvents||!1,this.announceFailedHeartbeats=O.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=O.announceSuccessfulHeartbeats||!1,this.useInstanceId=O.useInstanceId||!1,this.useRequestId=O.useRequestId||!1,this.requestMessageCountThreshold=O.requestMessageCountThreshold,O.retryConfiguration&&this._setRetryConfiguration(O.retryConfiguration),this.setTransactionTimeout(O.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(O.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(O.useSendBeacon||!0),O.presenceTimeout?this.setPresenceTimeout(O.presenceTimeout):this._presenceTimeout=300,O.heartbeatInterval!=null&&this.setHeartbeatInterval(O.heartbeatInterval),typeof O.userId=="string"){if(typeof O.uuid=="string")throw new Error("Only one of the following configuration options has to be provided: `uuid` or `userId`");this.setUserId(O.userId)}else{if(typeof O.uuid!="string")throw new Error("One of the following configuration options has to be provided: `uuid` or `userId`");this.setUUID(O.uuid)}this.setCipherKey(O.cipherKey,O)}return d.prototype.getAuthKey=function(){return this.authKey},d.prototype.setAuthKey=function(u){return this.authKey=u,this},d.prototype.setCipherKey=function(u,p,v){var w;return this.cipherKey=u,this.cipherKey&&(this.cryptoModule=(w=p.cryptoModule)!==null&&w!==void 0?w:p.initCryptoModule({cipherKey:this.cipherKey,useRandomIVs:this.useRandomIVs}),v&&(v.cryptoModule=this.cryptoModule)),this},d.prototype.getUUID=function(){return this.UUID},d.prototype.setUUID=function(u){if(!u||typeof u!="string"||u.trim().length===0)throw new Error("Missing uuid parameter. Provide a valid string uuid");return this.UUID=u,this},d.prototype.getUserId=function(){return this.UUID},d.prototype.setUserId=function(u){if(!u||typeof u!="string"||u.trim().length===0)throw new Error("Missing or invalid userId parameter. Provide a valid string userId");return this.UUID=u,this},d.prototype.getFilterExpression=function(){return this.filterExpression},d.prototype.setFilterExpression=function(u){return this.filterExpression=u,this},d.prototype.getPresenceTimeout=function(){return this._presenceTimeout},d.prototype.setPresenceTimeout=function(u){return u>=20?this._presenceTimeout=u:(this._presenceTimeout=20,console.log("WARNING: Presence timeout is less than the minimum. Using minimum value: ",this._presenceTimeout)),this.setHeartbeatInterval(this._presenceTimeout/2-1),this},d.prototype.setProxy=function(u){this.proxy=u},d.prototype.getHeartbeatInterval=function(){return this._heartbeatInterval},d.prototype.setHeartbeatInterval=function(u){return this._heartbeatInterval=u,this},d.prototype.getSubscribeTimeout=function(){return this._subscribeRequestTimeout},d.prototype.setSubscribeTimeout=function(u){return this._subscribeRequestTimeout=u,this},d.prototype.getTransactionTimeout=function(){return this._transactionalRequestTimeout},d.prototype.setTransactionTimeout=function(u){return this._transactionalRequestTimeout=u,this},d.prototype.isSendBeaconEnabled=function(){return this._useSendBeacon},d.prototype.setSendBeaconConfig=function(u){return this._useSendBeacon=u,this},d.prototype.getVersion=function(){return"7.6.3"},d.prototype._setRetryConfiguration=function(u){if(u.minimumdelay<2)throw new Error("Minimum delay can not be set less than 2 seconds for retry");if(u.maximumDelay>150)throw new Error("Maximum delay can not be set more than 150 seconds for retry");if(u.maximumDelay&&maximumRetry>6)throw new Error("Maximum retry for exponential retry policy can not be more than 6");if(u.maximumRetry>10)throw new Error("Maximum retry for linear retry policy can not be more than 10");this.retryConfiguration=u},d.prototype._addPnsdkSuffix=function(u,p){this._PNSDKSuffix[u]=p},d.prototype._getPnsdkSuffix=function(u){var p=this;return Object.keys(this._PNSDKSuffix).reduce(function(v,w){return v+u+p._PNSDKSuffix[w]},"")},d}();function F(d){var u=d.replace(/==?$/,""),p=Math.floor(u.length/4*3),v=new ArrayBuffer(p),w=new Uint8Array(v),S=0;function O(){var oe=u.charAt(S++),ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(oe);if(ue===-1)throw new Error("Illegal character at ".concat(S,": ").concat(u.charAt(S-1)));return ue}for(var U=0;U<p;U+=3){var W=O(),V=O(),J=O(),B=O(),he=(63&W)<<2|V>>4,se=(15&V)<<4|J>>2,ne=(3&J)<<6|B>>0;w[U]=he,J!=64&&(w[U+1]=se),B!=64&&(w[U+2]=ne)}return v}function X(d){for(var u,p="",v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=new Uint8Array(d),S=w.byteLength,O=S%3,U=S-O,W=0;W<U;W+=3)p+=v[(16515072&(u=w[W]<<16|w[W+1]<<8|w[W+2]))>>18]+v[(258048&u)>>12]+v[(4032&u)>>6]+v[63&u];return O==1?p+=v[(252&(u=w[U]))>>2]+v[(3&u)<<4]+"==":O==2&&(p+=v[(64512&(u=w[U]<<8|w[U+1]))>>10]+v[(1008&u)>>4]+v[(15&u)<<2]+"="),p}var de,N,H,z,Y,G=G||function(d,u){var p={},v=p.lib={},w=function(){},S=v.Base={extend:function(se){w.prototype=this;var ne=new w;return se&&ne.mixIn(se),ne.hasOwnProperty("init")||(ne.init=function(){ne.$super.init.apply(this,arguments)}),ne.init.prototype=ne,ne.$super=this,ne},create:function(){var se=this.extend();return se.init.apply(se,arguments),se},init:function(){},mixIn:function(se){for(var ne in se)se.hasOwnProperty(ne)&&(this[ne]=se[ne]);se.hasOwnProperty("toString")&&(this.toString=se.toString)},clone:function(){return this.init.prototype.extend(this)}},O=v.WordArray=S.extend({init:function(se,ne){se=this.words=se||[],this.sigBytes=ne??4*se.length},toString:function(se){return(se||W).stringify(this)},concat:function(se){var ne=this.words,oe=se.words,ue=this.sigBytes;if(se=se.sigBytes,this.clamp(),ue%4)for(var Ie=0;Ie<se;Ie++)ne[ue+Ie>>>2]|=(oe[Ie>>>2]>>>24-Ie%4*8&255)<<24-(ue+Ie)%4*8;else if(65535<oe.length)for(Ie=0;Ie<se;Ie+=4)ne[ue+Ie>>>2]=oe[Ie>>>2];else ne.push.apply(ne,oe);return this.sigBytes+=se,this},clamp:function(){var se=this.words,ne=this.sigBytes;se[ne>>>2]&=4294967295<<32-ne%4*8,se.length=d.ceil(ne/4)},clone:function(){var se=S.clone.call(this);return se.words=this.words.slice(0),se},random:function(se){for(var ne=[],oe=0;oe<se;oe+=4)ne.push(4294967296*d.random()|0);return new O.init(ne,se)}}),U=p.enc={},W=U.Hex={stringify:function(se){var ne=se.words;se=se.sigBytes;for(var oe=[],ue=0;ue<se;ue++){var Ie=ne[ue>>>2]>>>24-ue%4*8&255;oe.push((Ie>>>4).toString(16)),oe.push((15&Ie).toString(16))}return oe.join("")},parse:function(se){for(var ne=se.length,oe=[],ue=0;ue<ne;ue+=2)oe[ue>>>3]|=parseInt(se.substr(ue,2),16)<<24-ue%8*4;return new O.init(oe,ne/2)}},V=U.Latin1={stringify:function(se){var ne=se.words;se=se.sigBytes;for(var oe=[],ue=0;ue<se;ue++)oe.push(String.fromCharCode(ne[ue>>>2]>>>24-ue%4*8&255));return oe.join("")},parse:function(se){for(var ne=se.length,oe=[],ue=0;ue<ne;ue++)oe[ue>>>2]|=(255&se.charCodeAt(ue))<<24-ue%4*8;return new O.init(oe,ne)}},J=U.Utf8={stringify:function(se){try{return decodeURIComponent(escape(V.stringify(se)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(se){return V.parse(unescape(encodeURIComponent(se)))}},B=v.BufferedBlockAlgorithm=S.extend({reset:function(){this._data=new O.init,this._nDataBytes=0},_append:function(se){typeof se=="string"&&(se=J.parse(se)),this._data.concat(se),this._nDataBytes+=se.sigBytes},_process:function(se){var ne=this._data,oe=ne.words,ue=ne.sigBytes,Ie=this.blockSize,Ve=ue/(4*Ie);if(se=(Ve=se?d.ceil(Ve):d.max((0|Ve)-this._minBufferSize,0))*Ie,ue=d.min(4*se,ue),se){for(var it=0;it<se;it+=Ie)this._doProcessBlock(oe,it);it=oe.splice(0,se),ne.sigBytes-=ue}return new O.init(it,ue)},clone:function(){var se=S.clone.call(this);return se._data=this._data.clone(),se},_minBufferSize:0});v.Hasher=B.extend({cfg:S.extend(),init:function(se){this.cfg=this.cfg.extend(se),this.reset()},reset:function(){B.reset.call(this),this._doReset()},update:function(se){return this._append(se),this._process(),this},finalize:function(se){return se&&this._append(se),this._doFinalize()},blockSize:16,_createHelper:function(se){return function(ne,oe){return new se.init(oe).finalize(ne)}},_createHmacHelper:function(se){return function(ne,oe){return new he.HMAC.init(se,oe).finalize(ne)}}});var he=p.algo={};return p}(Math);(function(d){for(var u=G,p=(w=u.lib).WordArray,v=w.Hasher,w=u.algo,S=[],O=[],U=function(ne){return 4294967296*(ne-(0|ne))|0},W=2,V=0;64>V;){var J;e:{J=W;for(var B=d.sqrt(J),he=2;he<=B;he++)if(!(J%he)){J=!1;break e}J=!0}J&&(8>V&&(S[V]=U(d.pow(W,.5))),O[V]=U(d.pow(W,1/3)),V++),W++}var se=[];w=w.SHA256=v.extend({_doReset:function(){this._hash=new p.init(S.slice(0))},_doProcessBlock:function(ne,oe){for(var ue=this._hash.words,Ie=ue[0],Ve=ue[1],it=ue[2],dt=ue[3],et=ue[4],me=ue[5],Me=ue[6],Pe=ue[7],Qe=0;64>Qe;Qe++){if(16>Qe)se[Qe]=0|ne[oe+Qe];else{var Le=se[Qe-15],Ue=se[Qe-2];se[Qe]=((Le<<25|Le>>>7)^(Le<<14|Le>>>18)^Le>>>3)+se[Qe-7]+((Ue<<15|Ue>>>17)^(Ue<<13|Ue>>>19)^Ue>>>10)+se[Qe-16]}Le=Pe+((et<<26|et>>>6)^(et<<21|et>>>11)^(et<<7|et>>>25))+(et&me^~et&Me)+O[Qe]+se[Qe],Ue=((Ie<<30|Ie>>>2)^(Ie<<19|Ie>>>13)^(Ie<<10|Ie>>>22))+(Ie&Ve^Ie&it^Ve&it),Pe=Me,Me=me,me=et,et=dt+Le|0,dt=it,it=Ve,Ve=Ie,Ie=Le+Ue|0}ue[0]=ue[0]+Ie|0,ue[1]=ue[1]+Ve|0,ue[2]=ue[2]+it|0,ue[3]=ue[3]+dt|0,ue[4]=ue[4]+et|0,ue[5]=ue[5]+me|0,ue[6]=ue[6]+Me|0,ue[7]=ue[7]+Pe|0},_doFinalize:function(){var ne=this._data,oe=ne.words,ue=8*this._nDataBytes,Ie=8*ne.sigBytes;return oe[Ie>>>5]|=128<<24-Ie%32,oe[14+(Ie+64>>>9<<4)]=d.floor(ue/4294967296),oe[15+(Ie+64>>>9<<4)]=ue,ne.sigBytes=4*oe.length,this._process(),this._hash},clone:function(){var ne=v.clone.call(this);return ne._hash=this._hash.clone(),ne}}),u.SHA256=v._createHelper(w),u.HmacSHA256=v._createHmacHelper(w)})(Math),N=(de=G).enc.Utf8,de.algo.HMAC=de.lib.Base.extend({init:function(d,u){d=this._hasher=new d.init,typeof u=="string"&&(u=N.parse(u));var p=d.blockSize,v=4*p;u.sigBytes>v&&(u=d.finalize(u)),u.clamp();for(var w=this._oKey=u.clone(),S=this._iKey=u.clone(),O=w.words,U=S.words,W=0;W<p;W++)O[W]^=1549556828,U[W]^=909522486;w.sigBytes=S.sigBytes=v,this.reset()},reset:function(){var d=this._hasher;d.reset(),d.update(this._iKey)},update:function(d){return this._hasher.update(d),this},finalize:function(d){var u=this._hasher;return d=u.finalize(d),u.reset(),u.finalize(this._oKey.clone().concat(d))}}),z=(H=G).lib.WordArray,H.enc.Base64={stringify:function(d){var u=d.words,p=d.sigBytes,v=this._map;d.clamp(),d=[];for(var w=0;w<p;w+=3)for(var S=(u[w>>>2]>>>24-w%4*8&255)<<16|(u[w+1>>>2]>>>24-(w+1)%4*8&255)<<8|u[w+2>>>2]>>>24-(w+2)%4*8&255,O=0;4>O&&w+.75*O<p;O++)d.push(v.charAt(S>>>6*(3-O)&63));if(u=v.charAt(64))for(;d.length%4;)d.push(u);return d.join("")},parse:function(d){var u=d.length,p=this._map;(v=p.charAt(64))&&(v=d.indexOf(v))!=-1&&(u=v);for(var v=[],w=0,S=0;S<u;S++)if(S%4){var O=p.indexOf(d.charAt(S-1))<<S%4*2,U=p.indexOf(d.charAt(S))>>>6-S%4*2;v[w>>>2]|=(O|U)<<24-w%4*8,w++}return z.create(v,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(d){function u(B,he,se,ne,oe,ue,Ie){return((B=B+(he&se|~he&ne)+oe+Ie)<<ue|B>>>32-ue)+he}function p(B,he,se,ne,oe,ue,Ie){return((B=B+(he&ne|se&~ne)+oe+Ie)<<ue|B>>>32-ue)+he}function v(B,he,se,ne,oe,ue,Ie){return((B=B+(he^se^ne)+oe+Ie)<<ue|B>>>32-ue)+he}function w(B,he,se,ne,oe,ue,Ie){return((B=B+(se^(he|~ne))+oe+Ie)<<ue|B>>>32-ue)+he}for(var S=G,O=(W=S.lib).WordArray,U=W.Hasher,W=S.algo,V=[],J=0;64>J;J++)V[J]=4294967296*d.abs(d.sin(J+1))|0;W=W.MD5=U.extend({_doReset:function(){this._hash=new O.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(B,he){for(var se=0;16>se;se++){var ne=B[oe=he+se];B[oe]=16711935&(ne<<8|ne>>>24)|4278255360&(ne<<24|ne>>>8)}se=this._hash.words;var oe=B[he+0],ue=(ne=B[he+1],B[he+2]),Ie=B[he+3],Ve=B[he+4],it=B[he+5],dt=B[he+6],et=B[he+7],me=B[he+8],Me=B[he+9],Pe=B[he+10],Qe=B[he+11],Le=B[he+12],Ue=B[he+13],ve=B[he+14],ct=B[he+15],$e=u($e=se[0],vt=se[1],st=se[2],We=se[3],oe,7,V[0]),We=u(We,$e,vt,st,ne,12,V[1]),st=u(st,We,$e,vt,ue,17,V[2]),vt=u(vt,st,We,$e,Ie,22,V[3]);$e=u($e,vt,st,We,Ve,7,V[4]),We=u(We,$e,vt,st,it,12,V[5]),st=u(st,We,$e,vt,dt,17,V[6]),vt=u(vt,st,We,$e,et,22,V[7]),$e=u($e,vt,st,We,me,7,V[8]),We=u(We,$e,vt,st,Me,12,V[9]),st=u(st,We,$e,vt,Pe,17,V[10]),vt=u(vt,st,We,$e,Qe,22,V[11]),$e=u($e,vt,st,We,Le,7,V[12]),We=u(We,$e,vt,st,Ue,12,V[13]),st=u(st,We,$e,vt,ve,17,V[14]),$e=p($e,vt=u(vt,st,We,$e,ct,22,V[15]),st,We,ne,5,V[16]),We=p(We,$e,vt,st,dt,9,V[17]),st=p(st,We,$e,vt,Qe,14,V[18]),vt=p(vt,st,We,$e,oe,20,V[19]),$e=p($e,vt,st,We,it,5,V[20]),We=p(We,$e,vt,st,Pe,9,V[21]),st=p(st,We,$e,vt,ct,14,V[22]),vt=p(vt,st,We,$e,Ve,20,V[23]),$e=p($e,vt,st,We,Me,5,V[24]),We=p(We,$e,vt,st,ve,9,V[25]),st=p(st,We,$e,vt,Ie,14,V[26]),vt=p(vt,st,We,$e,me,20,V[27]),$e=p($e,vt,st,We,Ue,5,V[28]),We=p(We,$e,vt,st,ue,9,V[29]),st=p(st,We,$e,vt,et,14,V[30]),$e=v($e,vt=p(vt,st,We,$e,Le,20,V[31]),st,We,it,4,V[32]),We=v(We,$e,vt,st,me,11,V[33]),st=v(st,We,$e,vt,Qe,16,V[34]),vt=v(vt,st,We,$e,ve,23,V[35]),$e=v($e,vt,st,We,ne,4,V[36]),We=v(We,$e,vt,st,Ve,11,V[37]),st=v(st,We,$e,vt,et,16,V[38]),vt=v(vt,st,We,$e,Pe,23,V[39]),$e=v($e,vt,st,We,Ue,4,V[40]),We=v(We,$e,vt,st,oe,11,V[41]),st=v(st,We,$e,vt,Ie,16,V[42]),vt=v(vt,st,We,$e,dt,23,V[43]),$e=v($e,vt,st,We,Me,4,V[44]),We=v(We,$e,vt,st,Le,11,V[45]),st=v(st,We,$e,vt,ct,16,V[46]),$e=w($e,vt=v(vt,st,We,$e,ue,23,V[47]),st,We,oe,6,V[48]),We=w(We,$e,vt,st,et,10,V[49]),st=w(st,We,$e,vt,ve,15,V[50]),vt=w(vt,st,We,$e,it,21,V[51]),$e=w($e,vt,st,We,Le,6,V[52]),We=w(We,$e,vt,st,Ie,10,V[53]),st=w(st,We,$e,vt,Pe,15,V[54]),vt=w(vt,st,We,$e,ne,21,V[55]),$e=w($e,vt,st,We,me,6,V[56]),We=w(We,$e,vt,st,ct,10,V[57]),st=w(st,We,$e,vt,dt,15,V[58]),vt=w(vt,st,We,$e,Ue,21,V[59]),$e=w($e,vt,st,We,Ve,6,V[60]),We=w(We,$e,vt,st,Qe,10,V[61]),st=w(st,We,$e,vt,ue,15,V[62]),vt=w(vt,st,We,$e,Me,21,V[63]),se[0]=se[0]+$e|0,se[1]=se[1]+vt|0,se[2]=se[2]+st|0,se[3]=se[3]+We|0},_doFinalize:function(){var B=this._data,he=B.words,se=8*this._nDataBytes,ne=8*B.sigBytes;he[ne>>>5]|=128<<24-ne%32;var oe=d.floor(se/4294967296);for(he[15+(ne+64>>>9<<4)]=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8),he[14+(ne+64>>>9<<4)]=16711935&(se<<8|se>>>24)|4278255360&(se<<24|se>>>8),B.sigBytes=4*(he.length+1),this._process(),he=(B=this._hash).words,se=0;4>se;se++)ne=he[se],he[se]=16711935&(ne<<8|ne>>>24)|4278255360&(ne<<24|ne>>>8);return B},clone:function(){var B=U.clone.call(this);return B._hash=this._hash.clone(),B}}),S.MD5=U._createHelper(W),S.HmacMD5=U._createHmacHelper(W)}(Math),function(){var d,u=G,p=(d=u.lib).Base,v=d.WordArray,w=(d=u.algo).EvpKDF=p.extend({cfg:p.extend({keySize:4,hasher:d.MD5,iterations:1}),init:function(S){this.cfg=this.cfg.extend(S)},compute:function(S,O){for(var U=(B=this.cfg).hasher.create(),W=v.create(),V=W.words,J=B.keySize,B=B.iterations;V.length<J;){he&&U.update(he);var he=U.update(S).finalize(O);U.reset();for(var se=1;se<B;se++)he=U.finalize(he),U.reset();W.concat(he)}return W.sigBytes=4*J,W}});u.EvpKDF=function(S,O,U){return w.create(U).compute(S,O)}}(),G.lib.Cipher||function(d){var u=(se=G).lib,p=u.Base,v=u.WordArray,w=u.BufferedBlockAlgorithm,S=se.enc.Base64,O=se.algo.EvpKDF,U=u.Cipher=w.extend({cfg:p.extend(),createEncryptor:function(oe,ue){return this.create(this._ENC_XFORM_MODE,oe,ue)},createDecryptor:function(oe,ue){return this.create(this._DEC_XFORM_MODE,oe,ue)},init:function(oe,ue,Ie){this.cfg=this.cfg.extend(Ie),this._xformMode=oe,this._key=ue,this.reset()},reset:function(){w.reset.call(this),this._doReset()},process:function(oe){return this._append(oe),this._process()},finalize:function(oe){return oe&&this._append(oe),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(oe){return{encrypt:function(ue,Ie,Ve){return(typeof Ie=="string"?ne:he).encrypt(oe,ue,Ie,Ve)},decrypt:function(ue,Ie,Ve){return(typeof Ie=="string"?ne:he).decrypt(oe,ue,Ie,Ve)}}}});u.StreamCipher=U.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var W=se.mode={},V=function(oe,ue,Ie){var Ve=this._iv;Ve?this._iv=void 0:Ve=this._prevBlock;for(var it=0;it<Ie;it++)oe[ue+it]^=Ve[it]},J=(u.BlockCipherMode=p.extend({createEncryptor:function(oe,ue){return this.Encryptor.create(oe,ue)},createDecryptor:function(oe,ue){return this.Decryptor.create(oe,ue)},init:function(oe,ue){this._cipher=oe,this._iv=ue}})).extend();J.Encryptor=J.extend({processBlock:function(oe,ue){var Ie=this._cipher,Ve=Ie.blockSize;V.call(this,oe,ue,Ve),Ie.encryptBlock(oe,ue),this._prevBlock=oe.slice(ue,ue+Ve)}}),J.Decryptor=J.extend({processBlock:function(oe,ue){var Ie=this._cipher,Ve=Ie.blockSize,it=oe.slice(ue,ue+Ve);Ie.decryptBlock(oe,ue),V.call(this,oe,ue,Ve),this._prevBlock=it}}),W=W.CBC=J,J=(se.pad={}).Pkcs7={pad:function(oe,ue){for(var Ie,Ve=(Ie=(Ie=4*ue)-oe.sigBytes%Ie)<<24|Ie<<16|Ie<<8|Ie,it=[],dt=0;dt<Ie;dt+=4)it.push(Ve);Ie=v.create(it,Ie),oe.concat(Ie)},unpad:function(oe){oe.sigBytes-=255&oe.words[oe.sigBytes-1>>>2]}},u.BlockCipher=U.extend({cfg:U.cfg.extend({mode:W,padding:J}),reset:function(){U.reset.call(this);var oe=(ue=this.cfg).iv,ue=ue.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Ie=ue.createEncryptor;else Ie=ue.createDecryptor,this._minBufferSize=1;this._mode=Ie.call(ue,this,oe&&oe.words)},_doProcessBlock:function(oe,ue){this._mode.processBlock(oe,ue)},_doFinalize:function(){var oe=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){oe.pad(this._data,this.blockSize);var ue=this._process(!0)}else ue=this._process(!0),oe.unpad(ue);return ue},blockSize:4});var B=u.CipherParams=p.extend({init:function(oe){this.mixIn(oe)},toString:function(oe){return(oe||this.formatter).stringify(this)}}),he=(W=(se.format={}).OpenSSL={stringify:function(oe){var ue=oe.ciphertext;return((oe=oe.salt)?v.create([1398893684,1701076831]).concat(oe).concat(ue):ue).toString(S)},parse:function(oe){var ue=(oe=S.parse(oe)).words;if(ue[0]==1398893684&&ue[1]==1701076831){var Ie=v.create(ue.slice(2,4));ue.splice(0,4),oe.sigBytes-=16}return B.create({ciphertext:oe,salt:Ie})}},u.SerializableCipher=p.extend({cfg:p.extend({format:W}),encrypt:function(oe,ue,Ie,Ve){Ve=this.cfg.extend(Ve);var it=oe.createEncryptor(Ie,Ve);return ue=it.finalize(ue),it=it.cfg,B.create({ciphertext:ue,key:Ie,iv:it.iv,algorithm:oe,mode:it.mode,padding:it.padding,blockSize:oe.blockSize,formatter:Ve.format})},decrypt:function(oe,ue,Ie,Ve){return Ve=this.cfg.extend(Ve),ue=this._parse(ue,Ve.format),oe.createDecryptor(Ie,Ve).finalize(ue.ciphertext)},_parse:function(oe,ue){return typeof oe=="string"?ue.parse(oe,this):oe}})),se=(se.kdf={}).OpenSSL={execute:function(oe,ue,Ie,Ve){return Ve||(Ve=v.random(8)),oe=O.create({keySize:ue+Ie}).compute(oe,Ve),Ie=v.create(oe.words.slice(ue),4*Ie),oe.sigBytes=4*ue,B.create({key:oe,iv:Ie,salt:Ve})}},ne=u.PasswordBasedCipher=he.extend({cfg:he.cfg.extend({kdf:se}),encrypt:function(oe,ue,Ie,Ve){return Ie=(Ve=this.cfg.extend(Ve)).kdf.execute(Ie,oe.keySize,oe.ivSize),Ve.iv=Ie.iv,(oe=he.encrypt.call(this,oe,ue,Ie.key,Ve)).mixIn(Ie),oe},decrypt:function(oe,ue,Ie,Ve){return Ve=this.cfg.extend(Ve),ue=this._parse(ue,Ve.format),Ie=Ve.kdf.execute(Ie,oe.keySize,oe.ivSize,ue.salt),Ve.iv=Ie.iv,he.decrypt.call(this,oe,ue,Ie.key,Ve)}})}(),function(){for(var d=G,u=d.lib.BlockCipher,p=d.algo,v=[],w=[],S=[],O=[],U=[],W=[],V=[],J=[],B=[],he=[],se=[],ne=0;256>ne;ne++)se[ne]=128>ne?ne<<1:ne<<1^283;var oe=0,ue=0;for(ne=0;256>ne;ne++){var Ie=(Ie=ue^ue<<1^ue<<2^ue<<3^ue<<4)>>>8^255&Ie^99;v[oe]=Ie,w[Ie]=oe;var Ve=se[oe],it=se[Ve],dt=se[it],et=257*se[Ie]^16843008*Ie;S[oe]=et<<24|et>>>8,O[oe]=et<<16|et>>>16,U[oe]=et<<8|et>>>24,W[oe]=et,et=16843009*dt^65537*it^257*Ve^16843008*oe,V[Ie]=et<<24|et>>>8,J[Ie]=et<<16|et>>>16,B[Ie]=et<<8|et>>>24,he[Ie]=et,oe?(oe=Ve^se[se[se[dt^Ve]]],ue^=se[se[ue]]):oe=ue=1}var me=[0,1,2,4,8,16,32,64,128,27,54];p=p.AES=u.extend({_doReset:function(){for(var Me=(Qe=this._key).words,Pe=Qe.sigBytes/4,Qe=4*((this._nRounds=Pe+6)+1),Le=this._keySchedule=[],Ue=0;Ue<Qe;Ue++)if(Ue<Pe)Le[Ue]=Me[Ue];else{var ve=Le[Ue-1];Ue%Pe?6<Pe&&Ue%Pe==4&&(ve=v[ve>>>24]<<24|v[ve>>>16&255]<<16|v[ve>>>8&255]<<8|v[255&ve]):(ve=v[(ve=ve<<8|ve>>>24)>>>24]<<24|v[ve>>>16&255]<<16|v[ve>>>8&255]<<8|v[255&ve],ve^=me[Ue/Pe|0]<<24),Le[Ue]=Le[Ue-Pe]^ve}for(Me=this._invKeySchedule=[],Pe=0;Pe<Qe;Pe++)Ue=Qe-Pe,ve=Pe%4?Le[Ue]:Le[Ue-4],Me[Pe]=4>Pe||4>=Ue?ve:V[v[ve>>>24]]^J[v[ve>>>16&255]]^B[v[ve>>>8&255]]^he[v[255&ve]]},encryptBlock:function(Me,Pe){this._doCryptBlock(Me,Pe,this._keySchedule,S,O,U,W,v)},decryptBlock:function(Me,Pe){var Qe=Me[Pe+1];Me[Pe+1]=Me[Pe+3],Me[Pe+3]=Qe,this._doCryptBlock(Me,Pe,this._invKeySchedule,V,J,B,he,w),Qe=Me[Pe+1],Me[Pe+1]=Me[Pe+3],Me[Pe+3]=Qe},_doCryptBlock:function(Me,Pe,Qe,Le,Ue,ve,ct,$e){for(var We=this._nRounds,st=Me[Pe]^Qe[0],vt=Me[Pe+1]^Qe[1],br=Me[Pe+2]^Qe[2],Di=Me[Pe+3]^Qe[3],Oi=4,Uo=1;Uo<We;Uo++){var Mu=Le[st>>>24]^Ue[vt>>>16&255]^ve[br>>>8&255]^ct[255&Di]^Qe[Oi++],cs=Le[vt>>>24]^Ue[br>>>16&255]^ve[Di>>>8&255]^ct[255&st]^Qe[Oi++],io=Le[br>>>24]^Ue[Di>>>16&255]^ve[st>>>8&255]^ct[255&vt]^Qe[Oi++];Di=Le[Di>>>24]^Ue[st>>>16&255]^ve[vt>>>8&255]^ct[255&br]^Qe[Oi++],st=Mu,vt=cs,br=io}Mu=($e[st>>>24]<<24|$e[vt>>>16&255]<<16|$e[br>>>8&255]<<8|$e[255&Di])^Qe[Oi++],cs=($e[vt>>>24]<<24|$e[br>>>16&255]<<16|$e[Di>>>8&255]<<8|$e[255&st])^Qe[Oi++],io=($e[br>>>24]<<24|$e[Di>>>16&255]<<16|$e[st>>>8&255]<<8|$e[255&vt])^Qe[Oi++],Di=($e[Di>>>24]<<24|$e[st>>>16&255]<<16|$e[vt>>>8&255]<<8|$e[255&br])^Qe[Oi++],Me[Pe]=Mu,Me[Pe+1]=cs,Me[Pe+2]=io,Me[Pe+3]=Di},keySize:8}),d.AES=u._createHelper(p)}(),G.mode.ECB=((Y=G.lib.BlockCipherMode.extend()).Encryptor=Y.extend({processBlock:function(d,u){this._cipher.encryptBlock(d,u)}}),Y.Decryptor=Y.extend({processBlock:function(d,u){this._cipher.decryptBlock(d,u)}}),Y);var ie=G;function fe(d){var u,p=[];for(u=0;u<d.length;u+=1)p[u/4|0]|=d[u]<<24-8*u;return ie.lib.WordArray.create(p,d.length)}var Ne=function(){function d(u){var p=u.config;this._config=p,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return d.prototype.HMACSHA256=function(u){return ie.HmacSHA256(u,this._config.secretKey).toString(ie.enc.Base64)},d.prototype.SHA256=function(u){return ie.SHA256(u).toString(ie.enc.Hex)},d.prototype._parseOptions=function(u){var p=u||{};return p.hasOwnProperty("encryptKey")||(p.encryptKey=this._defaultOptions.encryptKey),p.hasOwnProperty("keyEncoding")||(p.keyEncoding=this._defaultOptions.keyEncoding),p.hasOwnProperty("keyLength")||(p.keyLength=this._defaultOptions.keyLength),p.hasOwnProperty("mode")||(p.mode=this._defaultOptions.mode),this._allowedKeyEncodings.indexOf(p.keyEncoding.toLowerCase())===-1&&(p.keyEncoding=this._defaultOptions.keyEncoding),this._allowedKeyLengths.indexOf(parseInt(p.keyLength,10))===-1&&(p.keyLength=this._defaultOptions.keyLength),this._allowedModes.indexOf(p.mode.toLowerCase())===-1&&(p.mode=this._defaultOptions.mode),p},d.prototype._decodeKey=function(u,p){return p.keyEncoding==="base64"?ie.enc.Base64.parse(u):p.keyEncoding==="hex"?ie.enc.Hex.parse(u):u},d.prototype._getPaddedKey=function(u,p){return u=this._decodeKey(u,p),p.encryptKey?ie.enc.Utf8.parse(this.SHA256(u).slice(0,32)):u},d.prototype._getMode=function(u){return u.mode==="ecb"?ie.mode.ECB:ie.mode.CBC},d.prototype._getIV=function(u){return u.mode==="cbc"?ie.enc.Utf8.parse(this._iv):null},d.prototype._getRandomIV=function(){return ie.lib.WordArray.random(16)},d.prototype.encrypt=function(u,p,v){return this._config.customEncrypt?this._config.customEncrypt(u):this.pnEncrypt(u,p,v)},d.prototype.decrypt=function(u,p,v){return this._config.customDecrypt?this._config.customDecrypt(u):this.pnDecrypt(u,p,v)},d.prototype.pnEncrypt=function(u,p,v){if(!p&&!this._config.cipherKey)return u;v=this._parseOptions(v);var w=this._getMode(v),S=this._getPaddedKey(p||this._config.cipherKey,v);if(this._config.useRandomIVs){var O=this._getRandomIV(),U=ie.AES.encrypt(u,S,{iv:O,mode:w}).ciphertext;return O.clone().concat(U.clone()).toString(ie.enc.Base64)}var W=this._getIV(v);return ie.AES.encrypt(u,S,{iv:W,mode:w}).ciphertext.toString(ie.enc.Base64)||u},d.prototype.pnDecrypt=function(u,p,v){if(!p&&!this._config.cipherKey)return u;v=this._parseOptions(v);var w=this._getMode(v),S=this._getPaddedKey(p||this._config.cipherKey,v);if(this._config.useRandomIVs){var O=fe((V=new Uint8ClampedArray(F(u))).slice(0,16)),U=fe(V.slice(16));try{var W=ie.AES.decrypt({ciphertext:U},S,{iv:O,mode:w}).toString(ie.enc.Utf8);return JSON.parse(W)}catch{return null}}else{O=this._getIV(v);try{var V=ie.enc.Base64.parse(u);return W=ie.AES.decrypt({ciphertext:V},S,{iv:O,mode:w}).toString(ie.enc.Utf8),JSON.parse(W)}catch{return null}}},d}(),ye=function(){function d(u){var p=u.timeEndpoint;this._timeEndpoint=p}return d.prototype.onReconnection=function(u){this._reconnectionCallback=u},d.prototype.startPolling=function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)},d.prototype.stopPolling=function(){clearInterval(this._timeTimer)},d.prototype._performTimeLoop=function(){var u=this;this._timeEndpoint(function(p){p.error||(clearInterval(u._timeTimer),u._reconnectionCallback())})},d}(),He=function(){function d(u){var p=u.config;this.hashHistory=[],this._config=p}return d.prototype.getKey=function(u){var p=function(w){var S=0;if(w.length===0)return S;for(var O=0;O<w.length;O+=1)S=(S<<5)-S+w.charCodeAt(O),S&=S;return S}(JSON.stringify(u.payload)).toString(),v=u.publishMetaData.publishTimetoken;return"".concat(v,"-").concat(p)},d.prototype.isDuplicate=function(u){return this.hashHistory.includes(this.getKey(u))},d.prototype.addEntry=function(u){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(u))},d.prototype.clearHistory=function(){this.hashHistory=[]},d}(),Re={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory",PNDisconnectedCategory:"PNDisconnectedCategory",PNConnectionErrorCategory:"PNConnectionErrorCategory",PNDisconnectedUnexpectedlyCategory:"PNDisconnectedUnexpectedlyCategory"},Ze=function(){function d(u){var p=u.subscribeEndpoint,v=u.leaveEndpoint,w=u.heartbeatEndpoint,S=u.setStateEndpoint,O=u.timeEndpoint,U=u.getFileUrl,W=u.config,V=u.crypto,J=u.listenerManager,B=u.cryptoModule,he=u.eventEmitter;this._listenerManager=J,this._config=W,this._leaveEndpoint=v,this._heartbeatEndpoint=w,this._setStateEndpoint=S,this._subscribeEndpoint=p,this._getFileUrl=U,this._crypto=V,this._cryptoModule=B,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new ye({timeEndpoint:O}),this._dedupingManager=new He({config:W}),this._cryptoModule&&(this._decoder=new TextDecoder),this._eventEmitter=he}return d.prototype.adaptStateChange=function(u,p){var v=this,w=u.state,S=u.channels,O=S===void 0?[]:S,U=u.channelGroups,W=U===void 0?[]:U,V=u.withHeartbeat,J=V!==void 0&&V;if(O.forEach(function(he){he in v._channels&&(v._channels[he].state=w)}),W.forEach(function(he){he in v._channelGroups&&(v._channelGroups[he].state=w)}),J){var B={};return O.forEach(function(he){return B[he]=w}),W.forEach(function(he){return B[he]=w}),this._heartbeatEndpoint({channels:O,channelGroups:W,state:B},p)}return this._setStateEndpoint({state:w,channels:O,channelGroups:W},p)},d.prototype.adaptPresenceChange=function(u){var p=this,v=u.connected,w=u.channels,S=w===void 0?[]:w,O=u.channelGroups,U=O===void 0?[]:O;v?(S.forEach(function(W){p._heartbeatChannels[W]={state:{}}}),U.forEach(function(W){p._heartbeatChannelGroups[W]={state:{}}})):(S.forEach(function(W){W in p._heartbeatChannels&&delete p._heartbeatChannels[W]}),U.forEach(function(W){W in p._heartbeatChannelGroups&&delete p._heartbeatChannelGroups[W]}),this._config.suppressLeaveEvents===!1&&this._leaveEndpoint({channels:S,channelGroups:U},function(W){p._listenerManager.announceStatus(W)})),this.reconnect()},d.prototype.adaptSubscribeChange=function(u){var p=this,v=u.timetoken,w=u.channels,S=w===void 0?[]:w,O=u.channelGroups,U=O===void 0?[]:O,W=u.withPresence,V=W!==void 0&&W,J=u.withHeartbeats,B=J!==void 0&&J;this._config.subscribeKey&&this._config.subscribeKey!==""?(v&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=v),this._currentTimetoken!=="0"&&this._currentTimetoken!==0&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),S.forEach(function(he){p._channels[he]={state:{}},V&&(p._presenceChannels[he]={}),(B||p._config.getHeartbeatInterval())&&(p._heartbeatChannels[he]={}),p._pendingChannelSubscriptions.push(he)}),U.forEach(function(he){p._channelGroups[he]={state:{}},V&&(p._presenceChannelGroups[he]={}),(B||p._config.getHeartbeatInterval())&&(p._heartbeatChannelGroups[he]={}),p._pendingChannelGroupSubscriptions.push(he)}),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")},d.prototype.adaptUnsubscribeChange=function(u,p){var v=this,w=u.channels,S=w===void 0?[]:w,O=u.channelGroups,U=O===void 0?[]:O,W=[],V=[];S.forEach(function(J){J in v._channels&&(delete v._channels[J],W.push(J),J in v._heartbeatChannels&&delete v._heartbeatChannels[J]),J in v._presenceChannels&&(delete v._presenceChannels[J],W.push(J))}),U.forEach(function(J){J in v._channelGroups&&(delete v._channelGroups[J],V.push(J),J in v._heartbeatChannelGroups&&delete v._heartbeatChannelGroups[J]),J in v._presenceChannelGroups&&(delete v._presenceChannelGroups[J],V.push(J))}),W.length===0&&V.length===0||(this._config.suppressLeaveEvents!==!1||p||this._leaveEndpoint({channels:W,channelGroups:V},function(J){J.affectedChannels=W,J.affectedChannelGroups=V,J.currentTimetoken=v._currentTimetoken,J.lastTimetoken=v._lastTimetoken,v._listenerManager.announceStatus(J)}),Object.keys(this._channels).length===0&&Object.keys(this._presenceChannels).length===0&&Object.keys(this._channelGroups).length===0&&Object.keys(this._presenceChannelGroups).length===0&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())},d.prototype.unsubscribeAll=function(u){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},u)},d.prototype.getHeartbeatChannels=function(){return Object.keys(this._heartbeatChannels)},d.prototype.getHeartbeatChannelGroups=function(){return Object.keys(this._heartbeatChannelGroups)},d.prototype.getSubscribedChannels=function(){return Object.keys(this._channels)},d.prototype.getSubscribedChannelGroups=function(){return Object.keys(this._channelGroups)},d.prototype.reconnect=function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()},d.prototype.disconnect=function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()},d.prototype._registerHeartbeatTimer=function(){this._stopHeartbeatTimer(),this._config.getHeartbeatInterval()!==0&&this._config.getHeartbeatInterval()!==void 0&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))},d.prototype._stopHeartbeatTimer=function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)},d.prototype._performHeartbeatLoop=function(){var u=this,p=this.getHeartbeatChannels(),v=this.getHeartbeatChannelGroups(),w={};(p.length!==0||v.length!==0)&&(this.getSubscribedChannels().forEach(function(S){var O=u._channels[S].state;Object.keys(O).length&&(w[S]=O)}),this.getSubscribedChannelGroups().forEach(function(S){var O=u._channelGroups[S].state;Object.keys(O).length&&(w[S]=O)}),this._heartbeatEndpoint({channels:p,channelGroups:v,state:w},(function(S){S.error&&u._config.announceFailedHeartbeats&&u._listenerManager.announceStatus(S),S.error&&u._config.autoNetworkDetection&&u._isOnline&&(u._isOnline=!1,u.disconnect(),u._listenerManager.announceNetworkDown(),u.reconnect()),!S.error&&u._config.announceSuccessfulHeartbeats&&u._listenerManager.announceStatus(S)}).bind(this)))},d.prototype._startSubscribeLoop=function(){var u=this;this._stopSubscribeLoop();var p={},v=[],w=[];if(Object.keys(this._channels).forEach(function(O){var U=u._channels[O].state;Object.keys(U).length&&(p[O]=U),v.push(O)}),Object.keys(this._presenceChannels).forEach(function(O){v.push("".concat(O,"-pnpres"))}),Object.keys(this._channelGroups).forEach(function(O){var U=u._channelGroups[O].state;Object.keys(U).length&&(p[O]=U),w.push(O)}),Object.keys(this._presenceChannelGroups).forEach(function(O){w.push("".concat(O,"-pnpres"))}),v.length!==0||w.length!==0){var S={channels:v,channelGroups:w,state:p,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(S,this._processSubscribeResponse.bind(this))}},d.prototype._processSubscribeResponse=function(u,p){var v=this;if(u.error){if(u.errorData&&u.errorData.message==="Aborted")return;u.category===Re.PNTimeoutCategory?this._startSubscribeLoop():u.category===Re.PNNetworkIssuesCategory?(this.disconnect(),u.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){v._config.autoNetworkDetection&&!v._isOnline&&(v._isOnline=!0,v._listenerManager.announceNetworkUp()),v.reconnect(),v._subscriptionStatusAnnounced=!0;var J={category:Re.PNReconnectedCategory,operation:u.operation,lastTimetoken:v._lastTimetoken,currentTimetoken:v._currentTimetoken};v._listenerManager.announceStatus(J)}),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(u)):u.category===Re.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(u)):this._listenerManager.announceStatus(u)}else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=p.metadata.timetoken),!this._subscriptionStatusAnnounced){var w={};w.category=Re.PNConnectedCategory,w.operation=u.operation,w.affectedChannels=this._pendingChannelSubscriptions,w.subscribedChannels=this.getSubscribedChannels(),w.affectedChannelGroups=this._pendingChannelGroupSubscriptions,w.lastTimetoken=this._lastTimetoken,w.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(w),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var S=p.messages||[],O=this._config,U=O.requestMessageCountThreshold,W=O.dedupeOnSubscribe;if(U&&S.length>=U){var V={};V.category=Re.PNRequestMessageCountExceededCategory,V.operation=u.operation,this._listenerManager.announceStatus(V)}S.forEach(function(J){if(J.channel,J.subscriptionMatch,W){if(v._dedupingManager.isDuplicate(J))return;v._dedupingManager.addEntry(J)}v._eventEmitter.emitEvent(J)}),this._region=p.metadata.region,this._startSubscribeLoop()}},d.prototype._stopSubscribeLoop=function(){this._subscribeCall&&(typeof this._subscribeCall.abort=="function"&&this._subscribeCall.abort(),this._subscribeCall=null)},d.prototype._renameEvent=function(u){return u==="set"?"updated":"removed"},d.prototype._renameChannelField=function(u){var p=u.channel,v=n(u,["channel"]);return v.spaceId=p,v},d}(),ce={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNMessageCounts:"PNMessageCountsOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNSignalOperation:"PNSignalOperation",PNAddMessageActionOperation:"PNAddActionOperation",PNRemoveMessageActionOperation:"PNRemoveMessageActionOperation",PNGetMessageActionsOperation:"PNGetMessageActionsOperation",PNCreateUserOperation:"PNCreateUserOperation",PNUpdateUserOperation:"PNUpdateUserOperation",PNDeleteUserOperation:"PNDeleteUserOperation",PNGetUserOperation:"PNGetUsersOperation",PNGetUsersOperation:"PNGetUsersOperation",PNCreateSpaceOperation:"PNCreateSpaceOperation",PNUpdateSpaceOperation:"PNUpdateSpaceOperation",PNDeleteSpaceOperation:"PNDeleteSpaceOperation",PNGetSpaceOperation:"PNGetSpacesOperation",PNGetSpacesOperation:"PNGetSpacesOperation",PNGetMembersOperation:"PNGetMembersOperation",PNUpdateMembersOperation:"PNUpdateMembersOperation",PNGetMembershipsOperation:"PNGetMembershipsOperation",PNUpdateMembershipsOperation:"PNUpdateMembershipsOperation",PNListFilesOperation:"PNListFilesOperation",PNGenerateUploadUrlOperation:"PNGenerateUploadUrlOperation",PNPublishFileOperation:"PNPublishFileOperation",PNGetFileUrlOperation:"PNGetFileUrlOperation",PNDownloadFileOperation:"PNDownloadFileOperation",PNGetAllUUIDMetadataOperation:"PNGetAllUUIDMetadataOperation",PNGetUUIDMetadataOperation:"PNGetUUIDMetadataOperation",PNSetUUIDMetadataOperation:"PNSetUUIDMetadataOperation",PNRemoveUUIDMetadataOperation:"PNRemoveUUIDMetadataOperation",PNGetAllChannelMetadataOperation:"PNGetAllChannelMetadataOperation",PNGetChannelMetadataOperation:"PNGetChannelMetadataOperation",PNSetChannelMetadataOperation:"PNSetChannelMetadataOperation",PNRemoveChannelMetadataOperation:"PNRemoveChannelMetadataOperation",PNSetMembersOperation:"PNSetMembersOperation",PNSetMembershipsOperation:"PNSetMembershipsOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerGrantToken:"PNAccessManagerGrantToken",PNAccessManagerAudit:"PNAccessManagerAudit",PNAccessManagerRevokeToken:"PNAccessManagerRevokeToken",PNHandshakeOperation:"PNHandshakeOperation",PNReceiveMessagesOperation:"PNReceiveMessagesOperation"},tt=function(){function d(u){this._maximumSamplesCount=100,this._trackedLatencies={},this._latencies={},this._telemetryExcludeOperations=[ce.PNSubscribeOperation,ce.PNReceiveMessagesOperation,ce.PNHandshakeOperation],this._maximumSamplesCount=u.maximumSamplesCount||this._maximumSamplesCount}return d.prototype.operationsLatencyForRequest=function(){var u=this,p={};return Object.keys(this._latencies).forEach(function(v){var w=u._latencies[v],S=u._averageLatency(w);S>0&&(p["l_".concat(v)]=S)}),p},d.prototype.startLatencyMeasure=function(u,p){!this._telemetryExcludeOperations.includes(u)&&p&&(this._trackedLatencies[p]=Date.now())},d.prototype.stopLatencyMeasure=function(u,p){if(!this._telemetryExcludeOperations.includes(u)&&p){var v=this._endpointName(u),w=this._latencies[v],S=this._trackedLatencies[p];w||(this._latencies[v]=[],w=this._latencies[v]),w.push(Date.now()-S),w.length>this._maximumSamplesCount&&w.splice(0,w.length-this._maximumSamplesCount),delete this._trackedLatencies[p]}},d.prototype._averageLatency=function(u){return Math.floor(u.reduce(function(p,v){return p+v},0)/u.length)},d.prototype._endpointName=function(u){var p=null;switch(u){case ce.PNPublishOperation:p="pub";break;case ce.PNSignalOperation:p="sig";break;case ce.PNHistoryOperation:case ce.PNFetchMessagesOperation:case ce.PNDeleteMessagesOperation:case ce.PNMessageCounts:p="hist";break;case ce.PNUnsubscribeOperation:case ce.PNWhereNowOperation:case ce.PNHereNowOperation:case ce.PNHeartbeatOperation:case ce.PNSetStateOperation:case ce.PNGetStateOperation:p="pres";break;case ce.PNAddChannelsToGroupOperation:case ce.PNRemoveChannelsFromGroupOperation:case ce.PNChannelGroupsOperation:case ce.PNRemoveGroupOperation:case ce.PNChannelsForGroupOperation:p="cg";break;case ce.PNPushNotificationEnabledChannelsOperation:case ce.PNRemoveAllPushNotificationsOperation:p="push";break;case ce.PNCreateUserOperation:case ce.PNUpdateUserOperation:case ce.PNDeleteUserOperation:case ce.PNGetUserOperation:case ce.PNGetUsersOperation:case ce.PNCreateSpaceOperation:case ce.PNUpdateSpaceOperation:case ce.PNDeleteSpaceOperation:case ce.PNGetSpaceOperation:case ce.PNGetSpacesOperation:case ce.PNGetMembersOperation:case ce.PNUpdateMembersOperation:case ce.PNGetMembershipsOperation:case ce.PNUpdateMembershipsOperation:p="obj";break;case ce.PNAddMessageActionOperation:case ce.PNRemoveMessageActionOperation:case ce.PNGetMessageActionsOperation:p="msga";break;case ce.PNAccessManagerGrant:case ce.PNAccessManagerAudit:p="pam";break;case ce.PNAccessManagerGrantToken:case ce.PNAccessManagerRevokeToken:p="pamv3";break;default:p="time"}return p},d}(),ft=function(){function d(u,p,v){this._payload=u,this._setDefaultPayloadStructure(),this.title=p,this.body=v}return Object.defineProperty(d.prototype,"payload",{get:function(){return this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"title",{set:function(u){this._title=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"subtitle",{set:function(u){this._subtitle=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"body",{set:function(u){this._body=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"badge",{set:function(u){this._badge=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"sound",{set:function(u){this._sound=u},enumerable:!1,configurable:!0}),d.prototype._setDefaultPayloadStructure=function(){},d.prototype.toObject=function(){return{}},d}(),pt=function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return e(u,d),Object.defineProperty(u.prototype,"configurations",{set:function(p){p&&p.length&&(this._configurations=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"notification",{get:function(){return this._payload.aps},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"title",{get:function(){return this._title},set:function(p){p&&p.length&&(this._payload.aps.alert.title=p,this._title=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"subtitle",{get:function(){return this._subtitle},set:function(p){p&&p.length&&(this._payload.aps.alert.subtitle=p,this._subtitle=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"body",{get:function(){return this._body},set:function(p){p&&p.length&&(this._payload.aps.alert.body=p,this._body=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"badge",{get:function(){return this._badge},set:function(p){p!=null&&(this._payload.aps.badge=p,this._badge=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"sound",{get:function(){return this._sound},set:function(p){p&&p.length&&(this._payload.aps.sound=p,this._sound=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"silent",{set:function(p){this._isSilent=p},enumerable:!1,configurable:!0}),u.prototype._setDefaultPayloadStructure=function(){this._payload.aps={alert:{}}},u.prototype.toObject=function(){var p=this,v=r({},this._payload),w=v.aps,S=w.alert;if(this._isSilent&&(w["content-available"]=1),this._apnsPushType==="apns2"){if(!this._configurations||!this._configurations.length)throw new ReferenceError("APNS2 configuration is missing");var O=[];this._configurations.forEach(function(U){O.push(p._objectFromAPNS2Configuration(U))}),O.length&&(v.pn_push=O)}return S&&Object.keys(S).length||delete w.alert,this._isSilent&&(delete w.alert,delete w.badge,delete w.sound,S={}),this._isSilent||Object.keys(S).length?v:null},u.prototype._objectFromAPNS2Configuration=function(p){var v=this;if(!p.targets||!p.targets.length)throw new ReferenceError("At least one APNS2 target should be provided");var w=[];p.targets.forEach(function(W){w.push(v._objectFromAPNSTarget(W))});var S=p.collapseId,O=p.expirationDate,U={auth_method:"token",targets:w,version:"v2"};return S&&S.length&&(U.collapse_id=S),O&&(U.expiration=O.toISOString()),U},u.prototype._objectFromAPNSTarget=function(p){if(!p.topic||!p.topic.length)throw new TypeError("Target 'topic' undefined.");var v=p.topic,w=p.environment,S=w===void 0?"development":w,O=p.excludedDevices,U=O===void 0?[]:O,W={topic:v,environment:S};return U.length&&(W.excluded_devices=U),W},u}(ft),Ye=function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return e(u,d),Object.defineProperty(u.prototype,"backContent",{get:function(){return this._backContent},set:function(p){p&&p.length&&(this._payload.back_content=p,this._backContent=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"backTitle",{get:function(){return this._backTitle},set:function(p){p&&p.length&&(this._payload.back_title=p,this._backTitle=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"count",{get:function(){return this._count},set:function(p){p!=null&&(this._payload.count=p,this._count=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"title",{get:function(){return this._title},set:function(p){p&&p.length&&(this._payload.title=p,this._title=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"type",{get:function(){return this._type},set:function(p){p&&p.length&&(this._payload.type=p,this._type=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"subtitle",{get:function(){return this.backTitle},set:function(p){this.backTitle=p},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"body",{get:function(){return this.backContent},set:function(p){this.backContent=p},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"badge",{get:function(){return this.count},set:function(p){this.count=p},enumerable:!1,configurable:!0}),u.prototype.toObject=function(){return Object.keys(this._payload).length?r({},this._payload):null},u}(ft),xt=function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return e(u,d),Object.defineProperty(u.prototype,"notification",{get:function(){return this._payload.notification},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"data",{get:function(){return this._payload.data},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"title",{get:function(){return this._title},set:function(p){p&&p.length&&(this._payload.notification.title=p,this._title=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"body",{get:function(){return this._body},set:function(p){p&&p.length&&(this._payload.notification.body=p,this._body=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"sound",{get:function(){return this._sound},set:function(p){p&&p.length&&(this._payload.notification.sound=p,this._sound=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"icon",{get:function(){return this._icon},set:function(p){p&&p.length&&(this._payload.notification.icon=p,this._icon=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"tag",{get:function(){return this._tag},set:function(p){p&&p.length&&(this._payload.notification.tag=p,this._tag=p)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"silent",{set:function(p){this._isSilent=p},enumerable:!1,configurable:!0}),u.prototype._setDefaultPayloadStructure=function(){this._payload.notification={},this._payload.data={}},u.prototype.toObject=function(){var p=r({},this._payload.data),v=null,w={};if(Object.keys(this._payload).length>2){var S=this._payload;S.notification,S.data;var O=n(S,["notification","data"]);p=r(r({},p),O)}return this._isSilent?p.notification=this._payload.notification:v=this._payload.notification,Object.keys(p).length&&(w.data=p),v&&Object.keys(v).length&&(w.notification=v),Object.keys(w).length?w:null},u}(ft),Ut=function(){function d(u,p){this._payload={apns:{},mpns:{},fcm:{}},this._title=u,this._body=p,this.apns=new pt(this._payload.apns,u,p),this.mpns=new Ye(this._payload.mpns,u,p),this.fcm=new xt(this._payload.fcm,u,p)}return Object.defineProperty(d.prototype,"debugging",{set:function(u){this._debugging=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"title",{get:function(){return this._title},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"body",{get:function(){return this._body},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"subtitle",{get:function(){return this._subtitle},set:function(u){this._subtitle=u,this.apns.subtitle=u,this.mpns.subtitle=u,this.fcm.subtitle=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"badge",{get:function(){return this._badge},set:function(u){this._badge=u,this.apns.badge=u,this.mpns.badge=u,this.fcm.badge=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"sound",{get:function(){return this._sound},set:function(u){this._sound=u,this.apns.sound=u,this.mpns.sound=u,this.fcm.sound=u},enumerable:!1,configurable:!0}),d.prototype.buildPayload=function(u){var p={};if(u.includes("apns")||u.includes("apns2")){this.apns._apnsPushType=u.includes("apns")?"apns":"apns2";var v=this.apns.toObject();v&&Object.keys(v).length&&(p.pn_apns=v)}if(u.includes("mpns")){var w=this.mpns.toObject();w&&Object.keys(w).length&&(p.pn_mpns=w)}if(u.includes("fcm")){var S=this.fcm.toObject();S&&Object.keys(S).length&&(p.pn_gcm=S)}return Object.keys(p).length&&this._debugging&&(p.pn_debug=!0),p},d}(),Pt=function(){function d(){this._listeners=[]}return d.prototype.addListener=function(u){this._listeners.includes(u)||this._listeners.push(u)},d.prototype.removeListener=function(u){var p=[];this._listeners.forEach(function(v){v!==u&&p.push(v)}),this._listeners=p},d.prototype.removeAllListeners=function(){this._listeners=[]},d.prototype.announcePresence=function(u){this._listeners.forEach(function(p){p.presence&&p.presence(u)})},d.prototype.announceStatus=function(u){this._listeners.forEach(function(p){p.status&&p.status(u)})},d.prototype.announceMessage=function(u){this._listeners.forEach(function(p){p.message&&p.message(u)})},d.prototype.announceSignal=function(u){this._listeners.forEach(function(p){p.signal&&p.signal(u)})},d.prototype.announceMessageAction=function(u){this._listeners.forEach(function(p){p.messageAction&&p.messageAction(u)})},d.prototype.announceFile=function(u){this._listeners.forEach(function(p){p.file&&p.file(u)})},d.prototype.announceObjects=function(u){this._listeners.forEach(function(p){p.objects&&p.objects(u)})},d.prototype.announceUser=function(u){this._listeners.forEach(function(p){p.user&&p.user(u)})},d.prototype.announceSpace=function(u){this._listeners.forEach(function(p){p.space&&p.space(u)})},d.prototype.announceMembership=function(u){this._listeners.forEach(function(p){p.membership&&p.membership(u)})},d.prototype.announceNetworkUp=function(){var u={};u.category=Re.PNNetworkUpCategory,this.announceStatus(u)},d.prototype.announceNetworkDown=function(){var u={};u.category=Re.PNNetworkDownCategory,this.announceStatus(u)},d}(),tr=function(){function d(u,p){this._config=u,this._cbor=p}return d.prototype.setToken=function(u){u&&u.length>0?this._token=u:this._token=void 0},d.prototype.getToken=function(){return this._token},d.prototype.extractPermissions=function(u){var p={read:!1,write:!1,manage:!1,delete:!1,get:!1,update:!1,join:!1};return(128&u)==128&&(p.join=!0),(64&u)==64&&(p.update=!0),(32&u)==32&&(p.get=!0),(8&u)==8&&(p.delete=!0),(4&u)==4&&(p.manage=!0),(2&u)==2&&(p.write=!0),(1&u)==1&&(p.read=!0),p},d.prototype.parseToken=function(u){var p=this,v=this._cbor.decodeToken(u);if(v!==void 0){var w=v.res.uuid?Object.keys(v.res.uuid):[],S=Object.keys(v.res.chan),O=Object.keys(v.res.grp),U=v.pat.uuid?Object.keys(v.pat.uuid):[],W=Object.keys(v.pat.chan),V=Object.keys(v.pat.grp),J={version:v.v,timestamp:v.t,ttl:v.ttl,authorized_uuid:v.uuid},B=w.length>0,he=S.length>0,se=O.length>0;(B||he||se)&&(J.resources={},B&&(J.resources.uuids={},w.forEach(function(Ie){J.resources.uuids[Ie]=p.extractPermissions(v.res.uuid[Ie])})),he&&(J.resources.channels={},S.forEach(function(Ie){J.resources.channels[Ie]=p.extractPermissions(v.res.chan[Ie])})),se&&(J.resources.groups={},O.forEach(function(Ie){J.resources.groups[Ie]=p.extractPermissions(v.res.grp[Ie])})));var ne=U.length>0,oe=W.length>0,ue=V.length>0;return(ne||oe||ue)&&(J.patterns={},ne&&(J.patterns.uuids={},U.forEach(function(Ie){J.patterns.uuids[Ie]=p.extractPermissions(v.pat.uuid[Ie])})),oe&&(J.patterns.channels={},W.forEach(function(Ie){J.patterns.channels[Ie]=p.extractPermissions(v.pat.chan[Ie])})),ue&&(J.patterns.groups={},V.forEach(function(Ie){J.patterns.groups[Ie]=p.extractPermissions(v.pat.grp[Ie])}))),Object.keys(v.meta).length>0&&(J.meta=v.meta),J.signature=v.sig,J}},d}();function Ke(d){return encodeURIComponent(d).replace(/[!~*'()]/g,function(u){return"%".concat(u.charCodeAt(0).toString(16).toUpperCase())})}function Q(d){return function(u){var p=[];return Object.keys(u).forEach(function(v){return p.push(v)}),p}(d).sort()}var pe={signPamFromParams:function(d){return Q(d).map(function(u){return"".concat(u,"=").concat(Ke(d[u]))}).join("&")},endsWith:function(d,u){return d.indexOf(u,this.length-u.length)!==-1},createPromise:function(){var d,u;return{promise:new Promise(function(p,v){d=p,u=v}),reject:u,fulfill:d}},encodeString:Ke,stringToArrayBuffer:function(d){for(var u=new ArrayBuffer(2*d.length),p=new Uint16Array(u),v=0,w=d.length;v<w;v++)p[v]=d.charCodeAt(v);return u},removeSingleOccurance:function(d,u){var p=Object.fromEntries(u.map(function(v){return[v,!1]}));return d.filter(function(v){return!(u.includes(v)&&!p[v])||(p[v]=!0,!1)})},findUniqueCommonElements:function(d,u){return __spreadArray([],__read(d),!1).filter(function(p){return u.includes(p)&&d.indexOf(p)===d.lastIndexOf(p)&&u.indexOf(p)===u.lastIndexOf(p)})}},xe=function(d){function u(p,v){var w=this.constructor,S=d.call(this,p)||this;return S.name=S.constructor.name,S.status=v,S.message=p,Object.setPrototypeOf(S,w.prototype),S}return e(u,d),u}(Error);function _e(d){return(u={message:d}).type="validationError",u.error=!0,u;var u}function nt(d,u,p){return d.usePost&&d.usePost(u,p)?d.postURL(u,p):d.usePatch&&d.usePatch(u,p)?d.patchURL(u,p):d.useGetFile&&d.useGetFile(u,p)?d.getFileURL(u,p):d.getURL(u,p)}function _t(d){if(d.sdkName)return d.sdkName;var u="PubNub-JS-".concat(d.sdkFamily);d.partnerId&&(u+="-".concat(d.partnerId)),u+="/".concat(d.getVersion());var p=d._getPnsdkSuffix(" ");return p.length>0&&(u+=p),u}function bt(d,u,p){return u.usePost&&u.usePost(d,p)?"POST":u.usePatch&&u.usePatch(d,p)?"PATCH":u.useDelete&&u.useDelete(d,p)?"DELETE":u.useGetFile&&u.useGetFile(d,p)?"GETFILE":"GET"}function Se(d,u,p,v,w){var S=d.config,O=d.crypto,U=bt(d,w,v);p.timestamp=Math.floor(new Date().getTime()/1e3),w.getOperation()==="PNPublishOperation"&&w.usePost&&w.usePost(d,v)&&(U="GET"),U==="GETFILE"&&(U="GET");var W="".concat(U,`
`).concat(S.publishKey,`
`).concat(u,`
`).concat(pe.signPamFromParams(p),`
`);if(U==="POST")W+=typeof(V=w.postPayload(d,v))=="string"?V:JSON.stringify(V);else if(U==="PATCH"){var V;W+=typeof(V=w.patchPayload(d,v))=="string"?V:JSON.stringify(V)}var J="v2.".concat(O.HMACSHA256(W));J=(J=(J=J.replace(/\+/g,"-")).replace(/\//g,"_")).replace(/=+$/,""),p.signature=J}function Be(d,u){for(var p=[],v=2;v<arguments.length;v++)p[v-2]=arguments[v];var w=d.networking,S=d.config,O=d.telemetryManager,U=d.tokenManager,W=I(),V=null,J=null,B={};u.getOperation()===ce.PNTimeOperation||u.getOperation()===ce.PNChannelGroupsOperation?V=p[0]:(B=p[0],V=p[1]),typeof Promise>"u"||V||(J=pe.createPromise());var he=u.validateParams(d,B);if(he)return V?V(_e(he)):J?(J.reject(new xe("Validation failed, check status for details",_e(he))),J.promise):void 0;var se,ne=u.prepareParams(d,B),oe=nt(u,d,B),ue={url:oe,operation:u.getOperation(),timeout:u.getRequestTimeout(d),headers:u.getRequestHeaders?u.getRequestHeaders():{},ignoreBody:typeof u.ignoreBody=="function"&&u.ignoreBody(d),forceBuffered:typeof u.forceBuffered=="function"?u.forceBuffered(d,B):null,abortSignal:typeof u.getAbortSignal=="function"?u.getAbortSignal(d,B):null};ne.uuid=S.UUID,ne.pnsdk=_t(S);var Ie=O.operationsLatencyForRequest();if(Object.keys(Ie).length&&(ne=r(r({},ne),Ie)),S.useInstanceId&&(ne.instanceid=S.instanceId),S.useRequestId&&(ne.requestid=W),u.isAuthSupported()){var Ve=U.getToken()||S.getAuthKey();Ve&&(ne.auth=Ve)}S.secretKey&&Se(d,oe,ne,B,u);var it=function(et,me){if(et.error)return u.handleError&&u.handleError(d,B,et),void(V?V(et):J&&J.reject(new xe("PubNub call failed, check status for details",et)));O.stopLatencyMeasure(u.getOperation(),W);var Me=u.handleResponse(d,me,B);typeof Me?.then!="function"&&(Me=Promise.resolve(Me)),Me.then(function(Pe){V?V(et,Pe):J&&J.fulfill(Pe)}).catch(function(Pe){if(V){var Qe=Pe;u.getOperation()===ce.PNSubscribeOperation&&(Qe={statusCode:400,error:!0,operation:u.getOperation(),errorData:Pe,category:Re.PNUnknownCategory}),V(Qe,null)}else J&&J.reject(new xe("PubNub call failed, check status for details",Pe))})};if(O.startLatencyMeasure(u.getOperation(),W),bt(d,u,B)==="POST"){var dt=u.postPayload(d,B);se=w.POST(ne,dt,ue,it)}else bt(d,u,B)==="PATCH"?(dt=u.patchPayload(d,B),se=w.PATCH(ne,dt,ue,it)):se=bt(d,u,B)==="DELETE"?w.DELETE(ne,ue,it):bt(d,u,B)==="GETFILE"?w.GETFILE(ne,ue,it):w.GET(ne,ue,it);return u.getOperation()===ce.PNSubscribeOperation?se:J?J.promise:void 0}var jt=Object.freeze({__proto__:null,getOperation:function(){return ce.PNAddChannelsToGroupOperation},validateParams:function(d,u){var p=u.channels,v=u.channelGroup,w=d.config;return v?p&&p.length!==0?w.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},getURL:function(d,u){var p=u.channelGroup,v=d.config;return"/v1/channel-registration/sub-key/".concat(v.subscribeKey,"/channel-group/").concat(pe.encodeString(p))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.channels;return{add:(p===void 0?[]:p).join(",")}},handleResponse:function(){return{}}}),qe=Object.freeze({__proto__:null,getOperation:function(){return ce.PNRemoveChannelsFromGroupOperation},validateParams:function(d,u){var p=u.channels,v=u.channelGroup,w=d.config;return v?p&&p.length!==0?w.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},getURL:function(d,u){var p=u.channelGroup,v=d.config;return"/v1/channel-registration/sub-key/".concat(v.subscribeKey,"/channel-group/").concat(pe.encodeString(p))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.channels;return{remove:(p===void 0?[]:p).join(",")}},handleResponse:function(){return{}}}),rt=Object.freeze({__proto__:null,getOperation:function(){return ce.PNRemoveGroupOperation},validateParams:function(d,u){var p=u.channelGroup,v=d.config;return p?v.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},getURL:function(d,u){var p=u.channelGroup,v=d.config;return"/v1/channel-registration/sub-key/".concat(v.subscribeKey,"/channel-group/").concat(pe.encodeString(p),"/remove")},isAuthSupported:function(){return!0},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},prepareParams:function(){return{}},handleResponse:function(){return{}}}),je=Object.freeze({__proto__:null,getOperation:function(){return ce.PNChannelGroupsOperation},validateParams:function(d){if(!d.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(d){var u=d.config;return"/v1/channel-registration/sub-key/".concat(u.subscribeKey,"/channel-group")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(d,u){return{groups:u.payload.groups}}}),Ae=Object.freeze({__proto__:null,getOperation:function(){return ce.PNChannelsForGroupOperation},validateParams:function(d,u){var p=u.channelGroup,v=d.config;return p?v.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},getURL:function(d,u){var p=u.channelGroup,v=d.config;return"/v1/channel-registration/sub-key/".concat(v.subscribeKey,"/channel-group/").concat(pe.encodeString(p))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(d,u){return{channels:u.payload.channels}}}),lt=Object.freeze({__proto__:null,getOperation:function(){return ce.PNPushNotificationEnabledChannelsOperation},validateParams:function(d,u){var p=u.device,v=u.pushGateway,w=u.channels,S=u.topic,O=d.config;return p?v?v!=="apns2"||S?w&&w.length!==0?O.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},getURL:function(d,u){var p=u.device,v=u.pushGateway,w=d.config;return v==="apns2"?"/v2/push/sub-key/".concat(w.subscribeKey,"/devices-apns2/").concat(p):"/v1/push/sub-key/".concat(w.subscribeKey,"/devices/").concat(p)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.pushGateway,v=u.channels,w=v===void 0?[]:v,S=u.environment,O=S===void 0?"development":S,U=u.topic,W={type:p,add:w.join(",")};return p==="apns2"&&delete(W=r(r({},W),{environment:O,topic:U})).type,W},handleResponse:function(){return{}}}),Nt=Object.freeze({__proto__:null,getOperation:function(){return ce.PNPushNotificationEnabledChannelsOperation},validateParams:function(d,u){var p=u.device,v=u.pushGateway,w=u.channels,S=u.topic,O=d.config;return p?v?v!=="apns2"||S?w&&w.length!==0?O.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},getURL:function(d,u){var p=u.device,v=u.pushGateway,w=d.config;return v==="apns2"?"/v2/push/sub-key/".concat(w.subscribeKey,"/devices-apns2/").concat(p):"/v1/push/sub-key/".concat(w.subscribeKey,"/devices/").concat(p)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.pushGateway,v=u.channels,w=v===void 0?[]:v,S=u.environment,O=S===void 0?"development":S,U=u.topic,W={type:p,remove:w.join(",")};return p==="apns2"&&delete(W=r(r({},W),{environment:O,topic:U})).type,W},handleResponse:function(){return{}}}),ot=Object.freeze({__proto__:null,getOperation:function(){return ce.PNPushNotificationEnabledChannelsOperation},validateParams:function(d,u){var p=u.device,v=u.pushGateway,w=u.topic,S=d.config;return p?v?v!=="apns2"||w?S.subscribeKey?void 0:"Missing Subscribe Key":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},getURL:function(d,u){var p=u.device,v=u.pushGateway,w=d.config;return v==="apns2"?"/v2/push/sub-key/".concat(w.subscribeKey,"/devices-apns2/").concat(p):"/v1/push/sub-key/".concat(w.subscribeKey,"/devices/").concat(p)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.pushGateway,v=u.environment,w=v===void 0?"development":v,S=u.topic,O=u.start,U=u.count,W={type:p};return p==="apns2"&&delete(W=r(r({},W),{environment:w,topic:S})).type,O&&(W.start=O),U&&U>0&&(W.count=U),W},handleResponse:function(d,u){return{channels:u}}}),St=Object.freeze({__proto__:null,getOperation:function(){return ce.PNRemoveAllPushNotificationsOperation},validateParams:function(d,u){var p=u.device,v=u.pushGateway,w=u.topic,S=d.config;return p?v?v!=="apns2"||w?S.subscribeKey?void 0:"Missing Subscribe Key":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},getURL:function(d,u){var p=u.device,v=u.pushGateway,w=d.config;return v==="apns2"?"/v2/push/sub-key/".concat(w.subscribeKey,"/devices-apns2/").concat(p,"/remove"):"/v1/push/sub-key/".concat(w.subscribeKey,"/devices/").concat(p,"/remove")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.pushGateway,v=u.environment,w=v===void 0?"development":v,S=u.topic,O={type:p};return p==="apns2"&&delete(O=r(r({},O),{environment:w,topic:S})).type,O},handleResponse:function(){return{}}}),te=Object.freeze({__proto__:null,getOperation:function(){return ce.PNUnsubscribeOperation},validateParams:function(d){if(!d.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(d,u){var p=d.config,v=u.channels,w=v===void 0?[]:v,S=w.length>0?w.join(","):",";return"/v2/presence/sub-key/".concat(p.subscribeKey,"/channel/").concat(pe.encodeString(S),"/leave")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.channelGroups,v=p===void 0?[]:p,w={};return v.length>0&&(w["channel-group"]=v.join(",")),w},handleResponse:function(){return{}}}),ee=Object.freeze({__proto__:null,getOperation:function(){return ce.PNWhereNowOperation},validateParams:function(d){if(!d.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(d,u){var p=d.config,v=u.uuid,w=v===void 0?p.UUID:v;return"/v2/presence/sub-key/".concat(p.subscribeKey,"/uuid/").concat(pe.encodeString(w))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(d,u){return u.payload?{channels:u.payload.channels}:{channels:[]}}}),ge=Object.freeze({__proto__:null,getOperation:function(){return ce.PNHeartbeatOperation},validateParams:function(d){if(!d.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(d,u){var p=d.config,v=u.channels,w=v===void 0?[]:v,S=w.length>0?w.join(","):",";return"/v2/presence/sub-key/".concat(p.subscribeKey,"/channel/").concat(pe.encodeString(S),"/heartbeat")},isAuthSupported:function(){return!0},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},prepareParams:function(d,u){var p=u.channelGroups,v=p===void 0?[]:p,w=u.state,S=d.config,O={};return v.length>0&&(O["channel-group"]=v.join(",")),w&&(O.state=JSON.stringify(w)),O.heartbeat=S.getPresenceTimeout(),O},handleResponse:function(){return{}}}),De=Object.freeze({__proto__:null,getOperation:function(){return ce.PNGetStateOperation},validateParams:function(d){if(!d.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(d,u){var p=d.config,v=u.uuid,w=v===void 0?p.UUID:v,S=u.channels,O=S===void 0?[]:S,U=O.length>0?O.join(","):",";return"/v2/presence/sub-key/".concat(p.subscribeKey,"/channel/").concat(pe.encodeString(U),"/uuid/").concat(w)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.channelGroups,v=p===void 0?[]:p,w={};return v.length>0&&(w["channel-group"]=v.join(",")),w},handleResponse:function(d,u,p){var v=p.channels,w=v===void 0?[]:v,S=p.channelGroups,O=S===void 0?[]:S,U={};return w.length===1&&O.length===0?U[w[0]]=u.payload:U=u.payload,{channels:U}}}),ut=Object.freeze({__proto__:null,getOperation:function(){return ce.PNSetStateOperation},validateParams:function(d,u){var p=d.config,v=u.state,w=u.channels,S=w===void 0?[]:w,O=u.channelGroups,U=O===void 0?[]:O;return v?p.subscribeKey?S.length===0&&U.length===0?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"},getURL:function(d,u){var p=d.config,v=u.channels,w=v===void 0?[]:v,S=w.length>0?w.join(","):",";return"/v2/presence/sub-key/".concat(p.subscribeKey,"/channel/").concat(pe.encodeString(S),"/uuid/").concat(pe.encodeString(p.UUID),"/data")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.state,v=u.channelGroups,w=v===void 0?[]:v,S={};return S.state=JSON.stringify(p),w.length>0&&(S["channel-group"]=w.join(",")),S},handleResponse:function(d,u){return{state:u.payload}}}),q=Object.freeze({__proto__:null,getOperation:function(){return ce.PNHereNowOperation},validateParams:function(d){if(!d.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(d,u){var p=d.config,v=u.channels,w=v===void 0?[]:v,S=u.channelGroups,O=S===void 0?[]:S,U="/v2/presence/sub-key/".concat(p.subscribeKey);if(w.length>0||O.length>0){var W=w.length>0?w.join(","):",";U+="/channel/".concat(pe.encodeString(W))}return U},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.channelGroups,v=p===void 0?[]:p,w=u.includeUUIDs,S=w===void 0||w,O=u.includeState,U=O!==void 0&&O,W=u.queryParameters,V=W===void 0?{}:W,J={};return S||(J.disable_uuids=1),U&&(J.state=1),v.length>0&&(J["channel-group"]=v.join(",")),J=r(r({},J),V)},handleResponse:function(d,u,p){var v=p.channels,w=v===void 0?[]:v,S=p.channelGroups,O=S===void 0?[]:S,U=p.includeUUIDs,W=U===void 0||U,V=p.includeState,J=V!==void 0&&V;return w.length>1||O.length>0||O.length===0&&w.length===0?function(){var B={};return B.totalChannels=u.payload.total_channels,B.totalOccupancy=u.payload.total_occupancy,B.channels={},Object.keys(u.payload.channels).forEach(function(he){var se=u.payload.channels[he],ne=[];return B.channels[he]={occupants:ne,name:he,occupancy:se.occupancy},W&&se.uuids.forEach(function(oe){J?ne.push({state:oe.state,uuid:oe.uuid}):ne.push({state:null,uuid:oe})}),B}),B}():function(){var B={},he=[];return B.totalChannels=1,B.totalOccupancy=u.occupancy,B.channels={},B.channels[w[0]]={occupants:he,name:w[0],occupancy:u.occupancy},W&&u.uuids&&u.uuids.forEach(function(se){J?he.push({state:se.state,uuid:se.uuid}):he.push({state:null,uuid:se})}),B}()},handleError:function(d,u,p){p.statusCode!==402||this.getURL(d,u).includes("channel")||(p.errorData.message="You have tried to perform a Global Here Now operation, your keyset configuration does not support that. Please provide a channel, or enable the Global Here Now feature from the Portal.")}}),re=Object.freeze({__proto__:null,getOperation:function(){return ce.PNAddMessageActionOperation},validateParams:function(d,u){var p=d.config,v=u.action,w=u.channel;return u.messageTimetoken?p.subscribeKey?w?v?v.value?v.type?v.type.length>15?"Action.type value exceed maximum length of 15":void 0:"Missing Action.type":"Missing Action.value":"Missing Action":"Missing message channel":"Missing Subscribe Key":"Missing message timetoken"},usePost:function(){return!0},postURL:function(d,u){var p=d.config,v=u.channel,w=u.messageTimetoken;return"/v1/message-actions/".concat(p.subscribeKey,"/channel/").concat(pe.encodeString(v),"/message/").concat(w)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},getRequestHeaders:function(){return{"Content-Type":"application/json"}},isAuthSupported:function(){return!0},prepareParams:function(){return{}},postPayload:function(d,u){return u.action},handleResponse:function(d,u){return{data:u.data}}}),L=Object.freeze({__proto__:null,getOperation:function(){return ce.PNRemoveMessageActionOperation},validateParams:function(d,u){var p=d.config,v=u.channel,w=u.actionTimetoken;return u.messageTimetoken?w?p.subscribeKey?v?void 0:"Missing message channel":"Missing Subscribe Key":"Missing action timetoken":"Missing message timetoken"},useDelete:function(){return!0},getURL:function(d,u){var p=d.config,v=u.channel,w=u.actionTimetoken,S=u.messageTimetoken;return"/v1/message-actions/".concat(p.subscribeKey,"/channel/").concat(pe.encodeString(v),"/message/").concat(S,"/action/").concat(w)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(d,u){return{data:u.data}}}),Ce=Object.freeze({__proto__:null,getOperation:function(){return ce.PNGetMessageActionsOperation},validateParams:function(d,u){var p=d.config,v=u.channel;return p.subscribeKey?v?void 0:"Missing message channel":"Missing Subscribe Key"},getURL:function(d,u){var p=d.config,v=u.channel;return"/v1/message-actions/".concat(p.subscribeKey,"/channel/").concat(pe.encodeString(v))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.limit,v=u.start,w=u.end,S={};return p&&(S.limit=p),v&&(S.start=v),w&&(S.end=w),S},handleResponse:function(d,u){var p={data:u.data,start:null,end:null};return p.data.length&&(p.end=p.data[p.data.length-1].actionTimetoken,p.start=p.data[0].actionTimetoken),p}}),Ge={getOperation:function(){return ce.PNListFilesOperation},validateParams:function(d,u){if(!u?.channel)return"channel can't be empty"},getURL:function(d,u){var p=d.config;return"/v1/files/".concat(p.subscribeKey,"/channels/").concat(pe.encodeString(u.channel),"/files")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p={};return u.limit&&(p.limit=u.limit),u.next&&(p.next=u.next),p},handleResponse:function(d,u){return{status:u.status,data:u.data,next:u.next,count:u.count}}},at={getOperation:function(){return ce.PNGenerateUploadUrlOperation},validateParams:function(d,u){return u?.channel?u?.name?void 0:"name can't be empty":"channel can't be empty"},usePost:function(){return!0},postURL:function(d,u){var p=d.config;return"/v1/files/".concat(p.subscribeKey,"/channels/").concat(pe.encodeString(u.channel),"/generate-upload-url")},postPayload:function(d,u){return{name:u.name}},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(d,u){return{status:u.status,data:u.data,file_upload_request:u.file_upload_request}}},ht={getOperation:function(){return ce.PNPublishFileOperation},validateParams:function(d,u){return u?.channel?u?.fileId?u?.fileName?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"},getURL:function(d,u){var p=d.config,v=p.publishKey,w=p.subscribeKey,S=function(O,U){var W=JSON.stringify(U);if(O.cryptoModule){var V=O.cryptoModule.encrypt(W);W=typeof V=="string"?V:X(V),W=JSON.stringify(W)}return W||""}(d,{message:u.message,file:{name:u.fileName,id:u.fileId}});return"/v1/files/publish-file/".concat(v,"/").concat(w,"/0/").concat(pe.encodeString(u.channel),"/0/").concat(pe.encodeString(S))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p={};return u.ttl&&(p.ttl=u.ttl),u.storeInHistory!==void 0&&(p.store=u.storeInHistory?"1":"0"),u.meta&&typeof u.meta=="object"&&(p.meta=JSON.stringify(u.meta)),p},handleResponse:function(d,u){return{timetoken:u[2]}}},Je=function(d){var u=function(p){var v=this,w=p.generateUploadUrl,S=p.publishFile,O=p.modules,U=O.PubNubFile,W=O.config,V=O.cryptography,J=O.cryptoModule,B=O.networking;return function(he){var se=he.channel,ne=he.file,oe=he.message,ue=he.cipherKey,Ie=he.meta,Ve=he.ttl,it=he.storeInHistory;return i(v,void 0,void 0,function(){var dt,et,me,Me,Pe,Qe,Le,Ue,ve,ct,$e,We,st,vt,br,Di,Oi,Uo,Mu,cs,io,qA,jA,tp,HA,qb,jb,em,Hb;return a(this,function(Bi){switch(Bi.label){case 0:if(!se)throw new xe("Validation failed, check status for details",_e("channel can't be empty"));if(!ne)throw new xe("Validation failed, check status for details",_e("file can't be empty"));return dt=U.create(ne),[4,w({channel:se,name:dt.name})];case 1:return et=Bi.sent(),me=et.file_upload_request,Me=me.url,Pe=me.form_fields,Qe=et.data,Le=Qe.id,Ue=Qe.name,U.supportsEncryptFile&&(ue||J)?ue!=null?[3,3]:[4,J.encryptFile(dt,U)]:[3,6];case 2:return ve=Bi.sent(),[3,5];case 3:return[4,V.encryptFile(ue,dt,U)];case 4:ve=Bi.sent(),Bi.label=5;case 5:dt=ve,Bi.label=6;case 6:ct=Pe,dt.mimeType&&(ct=Pe.map(function(Gb){return Gb.key==="Content-Type"?{key:Gb.key,value:dt.mimeType}:Gb})),Bi.label=7;case 7:return Bi.trys.push([7,21,,22]),U.supportsFileUri&&ne.uri?(st=(We=B).POSTFILE,vt=[Me,ct],[4,dt.toFileUri()]):[3,10];case 8:return[4,st.apply(We,vt.concat([Bi.sent()]))];case 9:return $e=Bi.sent(),[3,20];case 10:return U.supportsFile?(Di=(br=B).POSTFILE,Oi=[Me,ct],[4,dt.toFile()]):[3,13];case 11:return[4,Di.apply(br,Oi.concat([Bi.sent()]))];case 12:return $e=Bi.sent(),[3,20];case 13:return U.supportsBuffer?(Mu=(Uo=B).POSTFILE,cs=[Me,ct],[4,dt.toBuffer()]):[3,16];case 14:return[4,Mu.apply(Uo,cs.concat([Bi.sent()]))];case 15:return $e=Bi.sent(),[3,20];case 16:return U.supportsBlob?(qA=(io=B).POSTFILE,jA=[Me,ct],[4,dt.toBlob()]):[3,19];case 17:return[4,qA.apply(io,jA.concat([Bi.sent()]))];case 18:return $e=Bi.sent(),[3,20];case 19:throw new Error("Unsupported environment");case 20:return[3,22];case 21:throw(tp=Bi.sent()).response&&typeof tp.response.text=="string"?(HA=tp.response.text,qb=/<Message>(.*)<\/Message>/gi.exec(HA),new xe(qb?"Upload to bucket failed: ".concat(qb[1]):"Upload to bucket failed.",tp)):new xe("Upload to bucket failed.",tp);case 22:if($e.status!==204)throw new xe("Upload to bucket was unsuccessful",$e);jb=W.fileUploadPublishRetryLimit,em=!1,Hb={timetoken:"0"},Bi.label=23;case 23:return Bi.trys.push([23,25,,26]),[4,S({channel:se,message:oe,fileId:Le,fileName:Ue,meta:Ie,storeInHistory:it,ttl:Ve})];case 24:return Hb=Bi.sent(),em=!0,[3,26];case 25:return Bi.sent(),jb-=1,[3,26];case 26:if(!em&&jb>0)return[3,23];Bi.label=27;case 27:if(em)return[2,{timetoken:Hb.timetoken,id:Le,name:Ue}];throw new xe("Publish failed. You may want to execute that operation manually using pubnub.publishFile",{channel:se,id:Le,name:Ue})}})})}}(d);return function(p,v){var w=u(p);return typeof v=="function"&&w.then(function(S){return v(null,S)}).catch(function(S){return v(S,null)}),w}},Ee=function(d,u){var p=u.channel,v=u.id,w=u.name,S=d.config,O=d.networking,U=d.tokenManager;if(!p)throw new xe("Validation failed, check status for details",_e("channel can't be empty"));if(!v)throw new xe("Validation failed, check status for details",_e("file id can't be empty"));if(!w)throw new xe("Validation failed, check status for details",_e("file name can't be empty"));var W="/v1/files/".concat(S.subscribeKey,"/channels/").concat(pe.encodeString(p),"/files/").concat(v,"/").concat(w),V={};V.uuid=S.getUUID(),V.pnsdk=_t(S);var J=U.getToken()||S.getAuthKey();J&&(V.auth=J),S.secretKey&&Se(d,W,V,{},{getOperation:function(){return"PubNubGetFileUrlOperation"}});var B=Object.keys(V).map(function(he){return"".concat(encodeURIComponent(he),"=").concat(encodeURIComponent(V[he]))}).join("&");return B!==""?"".concat(O.getStandardOrigin()).concat(W,"?").concat(B):"".concat(O.getStandardOrigin()).concat(W)},Kt={getOperation:function(){return ce.PNDownloadFileOperation},validateParams:function(d,u){return u?.channel?u?.name?u?.id?void 0:"id can't be empty":"name can't be empty":"channel can't be empty"},useGetFile:function(){return!0},getFileURL:function(d,u){var p=d.config;return"/v1/files/".concat(p.subscribeKey,"/channels/").concat(pe.encodeString(u.channel),"/files/").concat(u.id,"/").concat(u.name)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},ignoreBody:function(){return!0},forceBuffered:function(){return!0},prepareParams:function(){return{}},handleResponse:function(d,u,p){var v=d.PubNubFile,w=d.config,S=d.cryptography,O=d.cryptoModule;return i(void 0,void 0,void 0,function(){var U,W,V,J;return a(this,function(B){switch(B.label){case 0:return U=u.response.body,v.supportsEncryptFile&&(p.cipherKey||O)?p.cipherKey!=null?[3,2]:[4,O.decryptFile(v.create({data:U,name:p.name}),v)]:[3,5];case 1:return W=B.sent().data,[3,4];case 2:return[4,S.decrypt((V=p.cipherKey)!==null&&V!==void 0?V:w.cipherKey,U)];case 3:W=B.sent(),B.label=4;case 4:U=W,B.label=5;case 5:return[2,v.create({data:U,name:(J=u.response.name)!==null&&J!==void 0?J:p.name,mimeType:u.response.type})]}})})}},Ot={getOperation:function(){return ce.PNListFilesOperation},validateParams:function(d,u){return u?.channel?u?.id?u?.name?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"},useDelete:function(){return!0},getURL:function(d,u){var p=d.config;return"/v1/files/".concat(p.subscribeKey,"/channels/").concat(pe.encodeString(u.channel),"/files/").concat(u.id,"/").concat(u.name)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(d,u){return{status:u.status}}},kt={getOperation:function(){return ce.PNGetAllUUIDMetadataOperation},validateParams:function(){},getURL:function(d){var u=d.config;return"/v2/objects/".concat(u.subscribeKey,"/uuids")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v,w,S,O,U,W,V,J,B={include:["status","type"]};return u?.include&&(!((p=u.include)===null||p===void 0)&&p.customFields)&&B.include.push("custom"),B.include=B.include.join(","),!((v=u?.include)===null||v===void 0)&&v.totalCount&&(B.count=(w=u.include)===null||w===void 0?void 0:w.totalCount),!((S=u?.page)===null||S===void 0)&&S.next&&(B.start=(O=u.page)===null||O===void 0?void 0:O.next),!((U=u?.page)===null||U===void 0)&&U.prev&&(B.end=(W=u.page)===null||W===void 0?void 0:W.prev),u?.filter&&(B.filter=u.filter),B.limit=(V=u?.limit)!==null&&V!==void 0?V:100,u?.sort&&(B.sort=Object.entries((J=u.sort)!==null&&J!==void 0?J:{}).map(function(he){var se=o(he,2),ne=se[0],oe=se[1];return oe==="asc"||oe==="desc"?"".concat(ne,":").concat(oe):ne})),B},handleResponse:function(d,u){return{status:u.status,data:u.data,totalCount:u.totalCount,next:u.next,prev:u.prev}}},Br={getOperation:function(){return ce.PNGetUUIDMetadataOperation},validateParams:function(){},getURL:function(d,u){var p,v=d.config;return"/v2/objects/".concat(v.subscribeKey,"/uuids/").concat(pe.encodeString((p=u?.uuid)!==null&&p!==void 0?p:v.getUUID()))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v,w=d.config,S={};return S.uuid=(p=u?.uuid)!==null&&p!==void 0?p:w.getUUID(),S.include=["status","type","custom"],u?.include&&((v=u.include)===null||v===void 0?void 0:v.customFields)===!1&&S.include.pop(),S.include=S.include.join(","),S},handleResponse:function(d,u){return{status:u.status,data:u.data}}},Jt={getOperation:function(){return ce.PNSetUUIDMetadataOperation},validateParams:function(d,u){if(!u?.data)return"Data cannot be empty"},usePatch:function(){return!0},patchURL:function(d,u){var p,v=d.config;return"/v2/objects/".concat(v.subscribeKey,"/uuids/").concat(pe.encodeString((p=u.uuid)!==null&&p!==void 0?p:v.getUUID()))},patchPayload:function(d,u){return u.data},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v,w=d.config,S={};return S.uuid=(p=u?.uuid)!==null&&p!==void 0?p:w.getUUID(),S.include=["status","type","custom"],u?.include&&((v=u.include)===null||v===void 0?void 0:v.customFields)===!1&&S.include.pop(),S.include=S.include.join(","),S},handleResponse:function(d,u){return{status:u.status,data:u.data}}},pi={getOperation:function(){return ce.PNRemoveUUIDMetadataOperation},validateParams:function(){},getURL:function(d,u){var p,v=d.config;return"/v2/objects/".concat(v.subscribeKey,"/uuids/").concat(pe.encodeString((p=u?.uuid)!==null&&p!==void 0?p:v.getUUID()))},useDelete:function(){return!0},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v=d.config;return{uuid:(p=u?.uuid)!==null&&p!==void 0?p:v.getUUID()}},handleResponse:function(d,u){return{status:u.status,data:u.data}}},hr={getOperation:function(){return ce.PNGetAllChannelMetadataOperation},validateParams:function(){},getURL:function(d){var u=d.config;return"/v2/objects/".concat(u.subscribeKey,"/channels")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v,w,S,O,U,W,V,J,B={include:["status","type"]};return u?.include&&(!((p=u.include)===null||p===void 0)&&p.customFields)&&B.include.push("custom"),B.include=B.include.join(","),!((v=u?.include)===null||v===void 0)&&v.totalCount&&(B.count=(w=u.include)===null||w===void 0?void 0:w.totalCount),!((S=u?.page)===null||S===void 0)&&S.next&&(B.start=(O=u.page)===null||O===void 0?void 0:O.next),!((U=u?.page)===null||U===void 0)&&U.prev&&(B.end=(W=u.page)===null||W===void 0?void 0:W.prev),u?.filter&&(B.filter=u.filter),B.limit=(V=u?.limit)!==null&&V!==void 0?V:100,u?.sort&&(B.sort=Object.entries((J=u.sort)!==null&&J!==void 0?J:{}).map(function(he){var se=o(he,2),ne=se[0],oe=se[1];return oe==="asc"||oe==="desc"?"".concat(ne,":").concat(oe):ne})),B},handleResponse:function(d,u){return{status:u.status,data:u.data,totalCount:u.totalCount,prev:u.prev,next:u.next}}},zr={getOperation:function(){return ce.PNGetChannelMetadataOperation},validateParams:function(d,u){if(!u?.channel)return"Channel cannot be empty"},getURL:function(d,u){var p=d.config;return"/v2/objects/".concat(p.subscribeKey,"/channels/").concat(pe.encodeString(u.channel))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v={include:["status","type","custom"]};return u?.include&&((p=u.include)===null||p===void 0?void 0:p.customFields)===!1&&v.include.pop(),v.include=v.include.join(","),v},handleResponse:function(d,u){return{status:u.status,data:u.data}}},ki={getOperation:function(){return ce.PNSetChannelMetadataOperation},validateParams:function(d,u){return u?.channel?u?.data?void 0:"Data cannot be empty":"Channel cannot be empty"},usePatch:function(){return!0},patchURL:function(d,u){var p=d.config;return"/v2/objects/".concat(p.subscribeKey,"/channels/").concat(pe.encodeString(u.channel))},patchPayload:function(d,u){return u.data},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v={include:["status","type","custom"]};return u?.include&&((p=u.include)===null||p===void 0?void 0:p.customFields)===!1&&v.include.pop(),v.include=v.include.join(","),v},handleResponse:function(d,u){return{status:u.status,data:u.data}}},qr={getOperation:function(){return ce.PNRemoveChannelMetadataOperation},validateParams:function(d,u){if(!u?.channel)return"Channel cannot be empty"},getURL:function(d,u){var p=d.config;return"/v2/objects/".concat(p.subscribeKey,"/channels/").concat(pe.encodeString(u.channel))},useDelete:function(){return!0},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(d,u){return{status:u.status,data:u.data}}},en={getOperation:function(){return ce.PNGetMembersOperation},validateParams:function(d,u){if(!u?.channel)return"channel cannot be empty"},getURL:function(d,u){var p=d.config;return"/v2/objects/".concat(p.subscribeKey,"/channels/").concat(pe.encodeString(u.channel),"/uuids")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v,w,S,O,U,W,V,J,B,he,se,ne,oe,ue={include:[]};return u?.include&&(!((p=u.include)===null||p===void 0)&&p.statusField&&ue.include.push("status"),!((v=u.include)===null||v===void 0)&&v.customFields&&ue.include.push("custom"),!((w=u.include)===null||w===void 0)&&w.UUIDFields&&ue.include.push("uuid"),!((S=u.include)===null||S===void 0)&&S.customUUIDFields&&ue.include.push("uuid.custom"),!((O=u.include)===null||O===void 0)&&O.UUIDStatusField&&ue.include.push("uuid.status"),!((U=u.include)===null||U===void 0)&&U.UUIDTypeField&&ue.include.push("uuid.type")),ue.include=ue.include.join(","),!((W=u?.include)===null||W===void 0)&&W.totalCount&&(ue.count=(V=u.include)===null||V===void 0?void 0:V.totalCount),!((J=u?.page)===null||J===void 0)&&J.next&&(ue.start=(B=u.page)===null||B===void 0?void 0:B.next),!((he=u?.page)===null||he===void 0)&&he.prev&&(ue.end=(se=u.page)===null||se===void 0?void 0:se.prev),u?.filter&&(ue.filter=u.filter),ue.limit=(ne=u?.limit)!==null&&ne!==void 0?ne:100,u?.sort&&(ue.sort=Object.entries((oe=u.sort)!==null&&oe!==void 0?oe:{}).map(function(Ie){var Ve=o(Ie,2),it=Ve[0],dt=Ve[1];return dt==="asc"||dt==="desc"?"".concat(it,":").concat(dt):it})),ue},handleResponse:function(d,u){return{status:u.status,data:u.data,totalCount:u.totalCount,prev:u.prev,next:u.next}}},Yr={getOperation:function(){return ce.PNSetMembersOperation},validateParams:function(d,u){return u?.channel?u?.uuids&&u?.uuids.length!==0?void 0:"UUIDs cannot be empty":"Channel cannot be empty"},usePatch:function(){return!0},patchURL:function(d,u){var p=d.config;return"/v2/objects/".concat(p.subscribeKey,"/channels/").concat(pe.encodeString(u.channel),"/uuids")},patchPayload:function(d,u){var p;return(p={set:[],delete:[]})[u.type]=u.uuids.map(function(v){return typeof v=="string"?{uuid:{id:v}}:{uuid:{id:v.id},custom:v.custom,status:v.status}}),p},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v,w,S,O,U,W,V,J,B={include:["uuid.status","uuid.type","type"]};return u?.include&&(!((p=u.include)===null||p===void 0)&&p.customFields&&B.include.push("custom"),!((v=u.include)===null||v===void 0)&&v.customUUIDFields&&B.include.push("uuid.custom"),!((w=u.include)===null||w===void 0)&&w.UUIDFields&&B.include.push("uuid")),B.include=B.include.join(","),!((S=u?.include)===null||S===void 0)&&S.totalCount&&(B.count=!0),!((O=u?.page)===null||O===void 0)&&O.next&&(B.start=(U=u.page)===null||U===void 0?void 0:U.next),!((W=u?.page)===null||W===void 0)&&W.prev&&(B.end=(V=u.page)===null||V===void 0?void 0:V.prev),u?.filter&&(B.filter=u.filter),u.limit!=null&&(B.limit=u.limit),u?.sort&&(B.sort=Object.entries((J=u.sort)!==null&&J!==void 0?J:{}).map(function(he){var se=o(he,2),ne=se[0],oe=se[1];return oe==="asc"||oe==="desc"?"".concat(ne,":").concat(oe):ne})),B},handleResponse:function(d,u){return{status:u.status,data:u.data,totalCount:u.totalCount,prev:u.prev,next:u.next}}},$t={getOperation:function(){return ce.PNGetMembershipsOperation},validateParams:function(){},getURL:function(d,u){var p,v=d.config;return"/v2/objects/".concat(v.subscribeKey,"/uuids/").concat(pe.encodeString((p=u?.uuid)!==null&&p!==void 0?p:v.getUUID()),"/channels")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v,w,S,O,U,W,V,J,B,he,se,ne,oe,ue={include:[]};return u?.include&&(!((p=u.include)===null||p===void 0)&&p.statusField&&ue.include.push("status"),!((v=u.include)===null||v===void 0)&&v.customFields&&ue.include.push("custom"),!((w=u.include)===null||w===void 0)&&w.channelFields&&ue.include.push("channel"),!((S=u.include)===null||S===void 0)&&S.customChannelFields&&ue.include.push("channel.custom"),!((O=u.include)===null||O===void 0)&&O.channelStatusField&&ue.include.push("channel.status"),!((U=u.include)===null||U===void 0)&&U.channelTypeField&&ue.include.push("channel.type")),ue.include=ue.include.join(","),!((W=u?.include)===null||W===void 0)&&W.totalCount&&(ue.count=(V=u.include)===null||V===void 0?void 0:V.totalCount),!((J=u?.page)===null||J===void 0)&&J.next&&(ue.start=(B=u.page)===null||B===void 0?void 0:B.next),!((he=u?.page)===null||he===void 0)&&he.prev&&(ue.end=(se=u.page)===null||se===void 0?void 0:se.prev),u?.filter&&(ue.filter=u.filter),ue.limit=(ne=u?.limit)!==null&&ne!==void 0?ne:100,u?.sort&&(ue.sort=Object.entries((oe=u.sort)!==null&&oe!==void 0?oe:{}).map(function(Ie){var Ve=o(Ie,2),it=Ve[0],dt=Ve[1];return dt==="asc"||dt==="desc"?"".concat(it,":").concat(dt):it})),ue},handleResponse:function(d,u){return{status:u.status,data:u.data,totalCount:u.totalCount,prev:u.prev,next:u.next}}},hi={getOperation:function(){return ce.PNSetMembershipsOperation},validateParams:function(d,u){if(!u?.channels||u?.channels.length===0)return"Channels cannot be empty"},usePatch:function(){return!0},patchURL:function(d,u){var p,v=d.config;return"/v2/objects/".concat(v.subscribeKey,"/uuids/").concat(pe.encodeString((p=u.uuid)!==null&&p!==void 0?p:v.getUUID()),"/channels")},patchPayload:function(d,u){var p;return(p={set:[],delete:[]})[u.type]=u.channels.map(function(v){return typeof v=="string"?{channel:{id:v}}:{channel:{id:v.id},custom:v.custom,status:v.status}}),p},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p,v,w,S,O,U,W,V,J,B={include:["channel.status","channel.type","status"]};return u?.include&&(!((p=u.include)===null||p===void 0)&&p.customFields&&B.include.push("custom"),!((v=u.include)===null||v===void 0)&&v.customChannelFields&&B.include.push("channel.custom"),!((w=u.include)===null||w===void 0)&&w.channelFields&&B.include.push("channel")),B.include=B.include.join(","),!((S=u?.include)===null||S===void 0)&&S.totalCount&&(B.count=!0),!((O=u?.page)===null||O===void 0)&&O.next&&(B.start=(U=u.page)===null||U===void 0?void 0:U.next),!((W=u?.page)===null||W===void 0)&&W.prev&&(B.end=(V=u.page)===null||V===void 0?void 0:V.prev),u?.filter&&(B.filter=u.filter),u.limit!=null&&(B.limit=u.limit),u?.sort&&(B.sort=Object.entries((J=u.sort)!==null&&J!==void 0?J:{}).map(function(he){var se=o(he,2),ne=se[0],oe=se[1];return oe==="asc"||oe==="desc"?"".concat(ne,":").concat(oe):ne})),B},handleResponse:function(d,u){return{status:u.status,data:u.data,totalCount:u.totalCount,prev:u.prev,next:u.next}}},Ci=Object.freeze({__proto__:null,getOperation:function(){return ce.PNAccessManagerAudit},validateParams:function(d){if(!d.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(d){var u=d.config;return"/v2/auth/audit/sub-key/".concat(u.subscribeKey)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!1},prepareParams:function(d,u){var p=u.channel,v=u.channelGroup,w=u.authKeys,S=w===void 0?[]:w,O={};return p&&(O.channel=p),v&&(O["channel-group"]=v),S.length>0&&(O.auth=S.join(",")),O},handleResponse:function(d,u){return u.payload}}),Qt=Object.freeze({__proto__:null,getOperation:function(){return ce.PNAccessManagerGrant},validateParams:function(d,u){var p=d.config;return p.subscribeKey?p.publishKey?p.secretKey?u.uuids==null||u.authKeys?u.uuids==null||u.channels==null&&u.channelGroups==null?void 0:"Both channel/channelgroup and uuid cannot be used in the same request":"authKeys are required for grant request on uuids":"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},getURL:function(d){var u=d.config;return"/v2/auth/grant/sub-key/".concat(u.subscribeKey)},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!1},prepareParams:function(d,u){var p=u.channels,v=p===void 0?[]:p,w=u.channelGroups,S=w===void 0?[]:w,O=u.uuids,U=O===void 0?[]:O,W=u.ttl,V=u.read,J=V!==void 0&&V,B=u.write,he=B!==void 0&&B,se=u.manage,ne=se!==void 0&&se,oe=u.get,ue=oe!==void 0&&oe,Ie=u.join,Ve=Ie!==void 0&&Ie,it=u.update,dt=it!==void 0&&it,et=u.authKeys,me=et===void 0?[]:et,Me=u.delete,Pe={};return Pe.r=J?"1":"0",Pe.w=he?"1":"0",Pe.m=ne?"1":"0",Pe.d=Me?"1":"0",Pe.g=ue?"1":"0",Pe.j=Ve?"1":"0",Pe.u=dt?"1":"0",v.length>0&&(Pe.channel=v.join(",")),S.length>0&&(Pe["channel-group"]=S.join(",")),me.length>0&&(Pe.auth=me.join(",")),U.length>0&&(Pe["target-uuid"]=U.join(",")),(W||W===0)&&(Pe.ttl=W),Pe},handleResponse:function(){return{}}});function Jr(d){var u,p,v,w,S=d?.authorizedUserId!==void 0,O=((u=d?.resources)===null||u===void 0?void 0:u.users)!==void 0,U=((p=d?.resources)===null||p===void 0?void 0:p.spaces)!==void 0,W=((v=d?.patterns)===null||v===void 0?void 0:v.users)!==void 0,V=((w=d?.patterns)===null||w===void 0?void 0:w.spaces)!==void 0;return W||O||V||U||S}function jr(d){var u=0;return d.join&&(u|=128),d.update&&(u|=64),d.get&&(u|=32),d.delete&&(u|=8),d.manage&&(u|=4),d.write&&(u|=2),d.read&&(u|=1),u}function Vt(d,u){if(Jr(u))return function(ne,oe){var ue=oe.ttl,Ie=oe.resources,Ve=oe.patterns,it=oe.meta,dt=oe.authorizedUserId,et={ttl:0,permissions:{resources:{channels:{},groups:{},uuids:{},users:{},spaces:{}},patterns:{channels:{},groups:{},uuids:{},users:{},spaces:{}},meta:{}}};if(Ie){var me=Ie.users,Me=Ie.spaces,Pe=Ie.groups;me&&Object.keys(me).forEach(function(ve){et.permissions.resources.uuids[ve]=jr(me[ve])}),Me&&Object.keys(Me).forEach(function(ve){et.permissions.resources.channels[ve]=jr(Me[ve])}),Pe&&Object.keys(Pe).forEach(function(ve){et.permissions.resources.groups[ve]=jr(Pe[ve])})}if(Ve){var Qe=Ve.users,Le=Ve.spaces,Ue=Ve.groups;Qe&&Object.keys(Qe).forEach(function(ve){et.permissions.patterns.uuids[ve]=jr(Qe[ve])}),Le&&Object.keys(Le).forEach(function(ve){et.permissions.patterns.channels[ve]=jr(Le[ve])}),Ue&&Object.keys(Ue).forEach(function(ve){et.permissions.patterns.groups[ve]=jr(Ue[ve])})}return(ue||ue===0)&&(et.ttl=ue),it&&(et.permissions.meta=it),dt&&(et.permissions.uuid="".concat(dt)),et}(0,u);var p=u.ttl,v=u.resources,w=u.patterns,S=u.meta,O=u.authorized_uuid,U={ttl:0,permissions:{resources:{channels:{},groups:{},uuids:{},users:{},spaces:{}},patterns:{channels:{},groups:{},uuids:{},users:{},spaces:{}},meta:{}}};if(v){var W=v.uuids,V=v.channels,J=v.groups;W&&Object.keys(W).forEach(function(ne){U.permissions.resources.uuids[ne]=jr(W[ne])}),V&&Object.keys(V).forEach(function(ne){U.permissions.resources.channels[ne]=jr(V[ne])}),J&&Object.keys(J).forEach(function(ne){U.permissions.resources.groups[ne]=jr(J[ne])})}if(w){var B=w.uuids,he=w.channels,se=w.groups;B&&Object.keys(B).forEach(function(ne){U.permissions.patterns.uuids[ne]=jr(B[ne])}),he&&Object.keys(he).forEach(function(ne){U.permissions.patterns.channels[ne]=jr(he[ne])}),se&&Object.keys(se).forEach(function(ne){U.permissions.patterns.groups[ne]=jr(se[ne])})}return(p||p===0)&&(U.ttl=p),S&&(U.permissions.meta=S),O&&(U.permissions.uuid="".concat(O)),U}var Tr=Object.freeze({__proto__:null,getOperation:function(){return ce.PNAccessManagerGrantToken},extractPermissions:jr,validateParams:function(d,u){var p,v,w,S,O,U,W=d.config;if(!W.subscribeKey)return"Missing Subscribe Key";if(!W.publishKey)return"Missing Publish Key";if(!W.secretKey)return"Missing Secret Key";if(!u.resources&&!u.patterns)return"Missing either Resources or Patterns.";var V=u?.authorized_uuid!==void 0,J=((p=u?.resources)===null||p===void 0?void 0:p.uuids)!==void 0,B=((v=u?.resources)===null||v===void 0?void 0:v.channels)!==void 0,he=((w=u?.resources)===null||w===void 0?void 0:w.groups)!==void 0,se=((S=u?.patterns)===null||S===void 0?void 0:S.uuids)!==void 0,ne=((O=u?.patterns)===null||O===void 0?void 0:O.channels)!==void 0,oe=((U=u?.patterns)===null||U===void 0?void 0:U.groups)!==void 0,ue=V||J||se||B||ne||he||oe;return Jr(u)&&ue?"Cannot mix `users`, `spaces` and `authorizedUserId` with `uuids`, `channels`, `groups` and `authorized_uuid`":(!u.resources||u.resources.uuids&&Object.keys(u.resources.uuids).length!==0||u.resources.channels&&Object.keys(u.resources.channels).length!==0||u.resources.groups&&Object.keys(u.resources.groups).length!==0||u.resources.users&&Object.keys(u.resources.users).length!==0||u.resources.spaces&&Object.keys(u.resources.spaces).length!==0)&&(!u.patterns||u.patterns.uuids&&Object.keys(u.patterns.uuids).length!==0||u.patterns.channels&&Object.keys(u.patterns.channels).length!==0||u.patterns.groups&&Object.keys(u.patterns.groups).length!==0||u.patterns.users&&Object.keys(u.patterns.users).length!==0||u.patterns.spaces&&Object.keys(u.patterns.spaces).length!==0)?void 0:"Missing values for either Resources or Patterns."},postURL:function(d){var u=d.config;return"/v3/pam/".concat(u.subscribeKey,"/grant")},usePost:function(){return!0},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!1},prepareParams:function(){return{}},postPayload:function(d,u){return Vt(0,u)},handleResponse:function(d,u){return u.data.token}}),un={getOperation:function(){return ce.PNAccessManagerRevokeToken},validateParams:function(d,u){return d.config.secretKey?u?void 0:"token can't be empty":"Missing Secret Key"},getURL:function(d,u){var p=d.config;return"/v3/pam/".concat(p.subscribeKey,"/grant/").concat(pe.encodeString(u))},useDelete:function(){return!0},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!1},prepareParams:function(d){return{uuid:d.config.getUUID()}},handleResponse:function(d,u){return{status:u.status,data:u.data}}};function Dn(d,u){var p=JSON.stringify(u);if(d.cryptoModule){var v=d.cryptoModule.encrypt(p);p=typeof v=="string"?v:X(v),p=JSON.stringify(p)}return p||""}var cn=Object.freeze({__proto__:null,getOperation:function(){return ce.PNPublishOperation},validateParams:function(d,u){var p=d.config,v=u.message;return u.channel?v?p.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},usePost:function(d,u){var p=u.sendByPost;return p!==void 0&&p},getURL:function(d,u){var p=d.config,v=u.channel,w=Dn(d,u.message);return"/publish/".concat(p.publishKey,"/").concat(p.subscribeKey,"/0/").concat(pe.encodeString(v),"/0/").concat(pe.encodeString(w))},postURL:function(d,u){var p=d.config,v=u.channel;return"/publish/".concat(p.publishKey,"/").concat(p.subscribeKey,"/0/").concat(pe.encodeString(v),"/0")},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},postPayload:function(d,u){return Dn(d,u.message)},prepareParams:function(d,u){var p=u.meta,v=u.replicate,w=v===void 0||v,S=u.storeInHistory,O=u.ttl,U={};return S!=null&&(U.store=S?"1":"0"),O&&(U.ttl=O),w===!1&&(U.norep="true"),p&&typeof p=="object"&&(U.meta=JSON.stringify(p)),U},handleResponse:function(d,u){return{timetoken:u[2]}}}),da=Object.freeze({__proto__:null,getOperation:function(){return ce.PNSignalOperation},validateParams:function(d,u){var p=d.config,v=u.message;return u.channel?v?p.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},getURL:function(d,u){var p,v=d.config,w=u.channel,S=u.message,O=(p=S,JSON.stringify(p));return"/signal/".concat(v.publishKey,"/").concat(v.subscribeKey,"/0/").concat(pe.encodeString(w),"/0/").concat(pe.encodeString(O))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(d,u){return{timetoken:u[2]}}}),fr=Object.freeze({__proto__:null,getOperation:function(){return ce.PNHistoryOperation},validateParams:function(d,u){var p=u.channel,v=d.config;return p?v.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},getURL:function(d,u){var p=u.channel,v=d.config;return"/v2/history/sub-key/".concat(v.subscribeKey,"/channel/").concat(pe.encodeString(p))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.start,v=u.end,w=u.reverse,S=u.count,O=S===void 0?100:S,U=u.stringifiedTimeToken,W=U!==void 0&&U,V=u.includeMeta,J=V!==void 0&&V,B={include_token:"true"};return B.count=O,p&&(B.start=p),v&&(B.end=v),W&&(B.string_message_token="true"),w!=null&&(B.reverse=w.toString()),J&&(B.include_meta="true"),B},handleResponse:function(d,u){var p={messages:[],startTimeToken:u[1],endTimeToken:u[2]};return Array.isArray(u[0])&&u[0].forEach(function(v){var w=function(O,U){var W={};if(!O.cryptoModule)return W.payload=U,W;try{var V=O.cryptoModule.decrypt(U),J=V instanceof ArrayBuffer?JSON.parse(new TextDecoder().decode(V)):V;return W.payload=J,W}catch(B){O.config.logVerbosity&&console&&console.log&&console.log("decryption error",B.message),W.payload=U,W.error="Error while decrypting message content: ".concat(B.message)}return W}(d,v.message),S={timetoken:v.timetoken,entry:w.payload};v.meta&&(S.meta=v.meta),w.error&&(S.error=w.error),p.messages.push(S)}),p}}),gi=Object.freeze({__proto__:null,getOperation:function(){return ce.PNDeleteMessagesOperation},validateParams:function(d,u){var p=u.channel,v=d.config;return p?v.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},useDelete:function(){return!0},getURL:function(d,u){var p=u.channel,v=d.config;return"/v3/history/sub-key/".concat(v.subscribeKey,"/channel/").concat(pe.encodeString(p))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.start,v=u.end,w={};return p&&(w.start=p),v&&(w.end=v),w},handleResponse:function(d,u){return u.payload}}),mi=Object.freeze({__proto__:null,getOperation:function(){return ce.PNMessageCounts},validateParams:function(d,u){var p=u.channels,v=u.timetoken,w=u.channelTimetokens,S=d.config;return p?v&&w?"timetoken and channelTimetokens are incompatible together":w&&w.length>1&&p.length!==w.length?"Length of channelTimetokens and channels do not match":S.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},getURL:function(d,u){var p=u.channels,v=d.config,w=p.join(",");return"/v3/history/sub-key/".concat(v.subscribeKey,"/message-counts/").concat(pe.encodeString(w))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.timetoken,v=u.channelTimetokens,w={};if(v&&v.length===1){var S=o(v,1)[0];w.timetoken=S}else v?w.channelsTimetoken=v.join(","):p&&(w.timetoken=p);return w},handleResponse:function(d,u){return{channels:u.channels}}}),fa=Object.freeze({__proto__:null,getOperation:function(){return ce.PNFetchMessagesOperation},validateParams:function(d,u){var p=u.channels,v=u.includeMessageActions,w=v!==void 0&&v,S=d.config;if(!p||p.length===0)return"Missing channels";if(!S.subscribeKey)return"Missing Subscribe Key";if(w&&p.length>1)throw new TypeError("History can return actions data for a single channel only. Either pass a single channel or disable the includeMessageActions flag.")},getURL:function(d,u){var p=u.channels,v=p===void 0?[]:p,w=u.includeMessageActions,S=w!==void 0&&w,O=d.config,U=S?"history-with-actions":"history",W=v.length>0?v.join(","):",";return"/v3/".concat(U,"/sub-key/").concat(O.subscribeKey,"/channel/").concat(pe.encodeString(W))},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=u.channels,v=u.start,w=u.end,S=u.includeMessageActions,O=u.count,U=u.stringifiedTimeToken,W=U!==void 0&&U,V=u.includeMeta,J=V!==void 0&&V,B=u.includeUuid,he=u.includeUUID,se=he===void 0||he,ne=u.includeMessageType,oe=ne===void 0||ne,ue={};return ue.max=O||(p.length>1||S===!0?25:100),v&&(ue.start=v),w&&(ue.end=w),W&&(ue.string_message_token="true"),J&&(ue.include_meta="true"),se&&B!==!1&&(ue.include_uuid="true"),oe&&(ue.include_message_type="true"),ue},handleResponse:function(d,u){var p={channels:{}};return Object.keys(u.channels||{}).forEach(function(v){p.channels[v]=[],(u.channels[v]||[]).forEach(function(w){var S={},O=function(U,W){var V={};if(!U.cryptoModule)return V.payload=W,V;try{var J=U.cryptoModule.decrypt(W),B=J instanceof ArrayBuffer?JSON.parse(new TextDecoder().decode(J)):J;return V.payload=B,V}catch(he){U.config.logVerbosity&&console&&console.log&&console.log("decryption error",he.message),V.payload=W,V.error="Error while decrypting message content: ".concat(he.message)}return V}(d,w.message);S.channel=v,S.timetoken=w.timetoken,S.message=O.payload,S.messageType=w.message_type,S.uuid=w.uuid,w.actions&&(S.actions=w.actions,S.data=w.actions),w.meta&&(S.meta=w.meta),O.error&&(S.error=O.error),p.channels[v].push(S)})}),u.more&&(p.more=u.more),p}}),Ga=Object.freeze({__proto__:null,getOperation:function(){return ce.PNTimeOperation},getURL:function(){return"/time/0"},getRequestTimeout:function(d){return d.config.getTransactionTimeout()},prepareParams:function(){return{}},isAuthSupported:function(){return!1},handleResponse:function(d,u){return{timetoken:u[0]}},validateParams:function(){}}),Xs=Object.freeze({__proto__:null,getOperation:function(){return ce.PNSubscribeOperation},validateParams:function(d){if(!d.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(d,u){var p=d.config,v=u.channels,w=v===void 0?[]:v,S=w.length>0?w.join(","):",";return"/v2/subscribe/".concat(p.subscribeKey,"/").concat(pe.encodeString(S),"/0")},getRequestTimeout:function(d){return d.config.getSubscribeTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p=d.config,v=u.state,w=u.channelGroups,S=w===void 0?[]:w,O=u.timetoken,U=u.filterExpression,W=u.region,V={heartbeat:p.getPresenceTimeout()};return S.length>0&&(V["channel-group"]=S.join(",")),U&&U.length>0&&(V["filter-expr"]=U),Object.keys(v).length&&(V.state=JSON.stringify(v)),O&&(V.tt=O),W&&(V.tr=W),V},handleResponse:function(d,u){var p=[];u.m.forEach(function(w){var S={timetoken:w.p.t,region:w.p.r},O={shard:parseInt(w.a,10),subscriptionMatch:w.b,channel:w.c,messageType:w.e,payload:w.d,flags:w.f,issuingClientId:w.i,subscribeKey:w.k,originationTimetoken:w.o,userMetadata:w.u,publishMetaData:S};p.push(O)});var v={timetoken:u.t.t,region:u.t.r};return{messages:p,metadata:v}}}),bn={getOperation:function(){return ce.PNHandshakeOperation},validateParams:function(d,u){if(!u?.channels&&!u?.channelGroups)return"channels and channleGroups both should not be empty"},getURL:function(d,u){var p=d.config,v=u.channels,w=v===void 0?[]:v,S=w.length>0?w.join(","):",";return"/v2/subscribe/".concat(p.subscribeKey,"/").concat(pe.encodeString(S),"/0")},getRequestTimeout:function(d){return d.config.getSubscribeTimeout()},isAuthSupported:function(){return!0},prepareParams:function(d,u){var p={};return u.channelGroups&&u.channelGroups.length>0&&(p["channel-group"]=u.channelGroups.join(",")),p.tt=0,u.state&&(p.state=JSON.stringify(u.state)),u.filterExpression&&u.filterExpression.length>0&&(p["filter-expr"]=u.filterExpression),p.ee="",p},handleResponse:function(d,u){return{region:u.t.r,timetoken:u.t.t}}},Vr={getOperation:function(){return ce.PNReceiveMessagesOperation},validateParams:function(d,u){return u?.channels||u?.channelGroups?u?.timetoken?u?.region?void 0:"region can not be empty":"timetoken can not be empty":"channels and channleGroups both should not be empty"},getURL:function(d,u){var p=d.config,v=u.channels,w=v===void 0?[]:v,S=w.length>0?w.join(","):",";return"/v2/subscribe/".concat(p.subscribeKey,"/").concat(pe.encodeString(S),"/0")},getRequestTimeout:function(d){return d.config.getSubscribeTimeout()},isAuthSupported:function(){return!0},getAbortSignal:function(d,u){return u.abortSignal},prepareParams:function(d,u){var p={};return u.channelGroups&&u.channelGroups.length>0&&(p["channel-group"]=u.channelGroups.join(",")),u.filterExpression&&u.filterExpression.length>0&&(p["filter-expr"]=u.filterExpression),p.tt=u.timetoken,p.tr=u.region,p.ee="",p},handleResponse:function(d,u){var p=[];return u.m.forEach(function(v){var w={shard:parseInt(v.a,10),subscriptionMatch:v.b,channel:v.c,messageType:v.e,payload:v.d,flags:v.f,issuingClientId:v.i,subscribeKey:v.k,originationTimetoken:v.o,userMetadata:v.u,publishMetaData:{timetoken:v.p.t,region:v.p.r}};p.push(w)}),{messages:p,metadata:{region:u.t.r,timetoken:u.t.t}}}},Qr=function(){function d(u){u===void 0&&(u=!1),this.sync=u,this.listeners=new Set}return d.prototype.subscribe=function(u){var p=this;return this.listeners.add(u),function(){p.listeners.delete(u)}},d.prototype.notify=function(u){var p=this,v=function(){p.listeners.forEach(function(w){w(u)})};this.sync?v():setTimeout(v,0)},d}(),Ei=function(){function d(u){this.label=u,this.transitionMap=new Map,this.enterEffects=[],this.exitEffects=[]}return d.prototype.transition=function(u,p){var v;if(this.transitionMap.has(p.type))return(v=this.transitionMap.get(p.type))===null||v===void 0?void 0:v(u,p)},d.prototype.on=function(u,p){return this.transitionMap.set(u,p),this},d.prototype.with=function(u,p){return[this,u,p??[]]},d.prototype.onEnter=function(u){return this.enterEffects.push(u),this},d.prototype.onExit=function(u){return this.exitEffects.push(u),this},d}(),os=function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return e(u,d),u.prototype.describe=function(p){return new Ei(p)},u.prototype.start=function(p,v){this.currentState=p,this.currentContext=v,this.notify({type:"engineStarted",state:p,context:v})},u.prototype.transition=function(p){var v,w,S,O,U,W;if(!this.currentState)throw new Error("Start the engine first");this.notify({type:"eventReceived",event:p});var V=this.currentState.transition(this.currentContext,p);if(V){var J=o(V,3),B=J[0],he=J[1],se=J[2];try{for(var ne=s(this.currentState.exitEffects),oe=ne.next();!oe.done;oe=ne.next()){var ue=oe.value;this.notify({type:"invocationDispatched",invocation:ue(this.currentContext)})}}catch(Me){v={error:Me}}finally{try{oe&&!oe.done&&(w=ne.return)&&w.call(ne)}finally{if(v)throw v.error}}var Ie=this.currentState;this.currentState=B;var Ve=this.currentContext;this.currentContext=he,this.notify({type:"transitionDone",fromState:Ie,fromContext:Ve,toState:B,toContext:he,event:p});try{for(var it=s(se),dt=it.next();!dt.done;dt=it.next())ue=dt.value,this.notify({type:"invocationDispatched",invocation:ue})}catch(Me){S={error:Me}}finally{try{dt&&!dt.done&&(O=it.return)&&O.call(it)}finally{if(S)throw S.error}}try{for(var et=s(this.currentState.enterEffects),me=et.next();!me.done;me=et.next())ue=me.value,this.notify({type:"invocationDispatched",invocation:ue(this.currentContext)})}catch(Me){U={error:Me}}finally{try{me&&!me.done&&(W=et.return)&&W.call(et)}finally{if(U)throw U.error}}}},u}(Qr),za=function(){function d(u){this.dependencies=u,this.instances=new Map,this.handlers=new Map}return d.prototype.on=function(u,p){this.handlers.set(u,p)},d.prototype.dispatch=function(u){if(u.type!=="CANCEL"){var p=this.handlers.get(u.type);if(!p)throw new Error("Unhandled invocation '".concat(u.type,"'"));var v=p(u.payload,this.dependencies);u.managed&&this.instances.set(u.type,v),v.start()}else if(this.instances.has(u.payload)){var w=this.instances.get(u.payload);w?.cancel(),this.instances.delete(u.payload)}},d.prototype.dispose=function(){var u,p;try{for(var v=s(this.instances.entries()),w=v.next();!w.done;w=v.next()){var S=o(w.value,2),O=S[0];S[1].cancel(),this.instances.delete(O)}}catch(U){u={error:U}}finally{try{w&&!w.done&&(p=v.return)&&p.call(v)}finally{if(u)throw u.error}}},d}();function or(d,u){var p=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return{type:d,payload:u?.apply(void 0,c([],o(v),!1))}};return p.type=d,p}function On(d,u){var p=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return{type:d,payload:u.apply(void 0,c([],o(v),!1)),managed:!1}};return p.type=d,p}function Rt(d,u){var p=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return{type:d,payload:u.apply(void 0,c([],o(v),!1)),managed:!0}};return p.type=d,p.cancel={type:"CANCEL",payload:d,managed:!1},p}var qt=function(d){function u(){var p=this.constructor,v=d.call(this,"The operation was aborted.")||this;return v.name="AbortError",Object.setPrototypeOf(v,p.prototype),v}return e(u,d),u}(Error),lr=function(d){function u(){var p=d!==null&&d.apply(this,arguments)||this;return p._aborted=!1,p}return e(u,d),Object.defineProperty(u.prototype,"aborted",{get:function(){return this._aborted},enumerable:!1,configurable:!0}),u.prototype.throwIfAborted=function(){if(this._aborted)throw new qt},u.prototype.abort=function(){this._aborted=!0,this.notify(new qt)},u}(Qr),Gt=function(d){function u(p,v,w){var S=d.call(this,p,v)||this;return S.asyncFunction=w,S.abortSignal=new lr,S}return e(u,d),u.prototype.start=function(){this.asyncFunction(this.payload,this.abortSignal,this.dependencies).catch(function(p){})},u.prototype.cancel=function(){this.abortSignal.abort()},u}(function(d,u){this.payload=d,this.dependencies=u}),Ir=function(d){return function(u,p){return new Gt(u,p,d)}},tn=Rt("HANDSHAKE",function(d,u){return{channels:d,groups:u}}),_n=Rt("RECEIVE_MESSAGES",function(d,u,p){return{channels:d,groups:u,cursor:p}}),Pn=On("EMIT_MESSAGES",function(d){return d}),Zr=On("EMIT_STATUS",function(d){return d}),vi=Rt("RECEIVE_RECONNECT",function(d){return d}),wn=Rt("HANDSHAKE_RECONNECT",function(d){return d}),Gn=or("SUBSCRIPTION_CHANGED",function(d,u){return{channels:d,groups:u}}),Rn=or("SUBSCRIPTION_RESTORED",function(d,u,p,v){return{channels:d,groups:u,cursor:{timetoken:p,region:v??0}}}),D=or("HANDSHAKE_SUCCESS",function(d){return d}),j=or("HANDSHAKE_FAILURE",function(d){return d}),ae=or("HANDSHAKE_RECONNECT_SUCCESS",function(d){return{cursor:d}}),Fe=or("HANDSHAKE_RECONNECT_FAILURE",function(d){return d}),ze=or("HANDSHAKE_RECONNECT_GIVEUP",function(d){return d}),gt=or("RECEIVE_SUCCESS",function(d,u){return{cursor:d,events:u}}),zt=or("RECEIVE_FAILURE",function(d){return d}),Dr=or("RECEIVE_RECONNECT_SUCCESS",function(d,u){return{cursor:d,events:u}}),Ct=or("RECEIVE_RECONNECT_FAILURE",function(d){return d}),Yt=or("RECEIVING_RECONNECT_GIVEUP",function(d){return d}),Lt=or("DISCONNECT",function(){return{}}),zn=or("RECONNECT",function(d,u){return{cursor:{timetoken:d??"",region:u??0}}}),ln=or("UNSUBSCRIBE_ALL",function(){return{}}),rr=function(d){function u(p,v){var w=d.call(this,v)||this;return w.on(tn.type,Ir(function(S,O,U){var W=U.handshake,V=U.presenceState,J=U.config;return i(w,void 0,void 0,function(){var B,he;return a(this,function(se){switch(se.label){case 0:O.throwIfAborted(),se.label=1;case 1:return se.trys.push([1,3,,4]),[4,W(r({abortSignal:O,channels:S.channels,channelGroups:S.groups,filterExpression:J.filterExpression},J.maintainPresenceState&&{state:V}))];case 2:return B=se.sent(),[2,p.transition(D(B))];case 3:return(he=se.sent())instanceof Error&&he.message==="Aborted"?[2]:he instanceof xe?[2,p.transition(j(he))]:[3,4];case 4:return[2]}})})})),w.on(_n.type,Ir(function(S,O,U){var W=U.receiveMessages,V=U.config;return i(w,void 0,void 0,function(){var J,B;return a(this,function(he){switch(he.label){case 0:O.throwIfAborted(),he.label=1;case 1:return he.trys.push([1,3,,4]),[4,W({abortSignal:O,channels:S.channels,channelGroups:S.groups,timetoken:S.cursor.timetoken,region:S.cursor.region,filterExpression:V.filterExpression})];case 2:return J=he.sent(),p.transition(gt(J.metadata,J.messages)),[3,4];case 3:return(B=he.sent())instanceof Error&&B.message==="Aborted"?[2]:B instanceof xe&&!O.aborted?[2,p.transition(zt(B))]:[3,4];case 4:return[2]}})})})),w.on(Pn.type,Ir(function(S,O,U){var W=U.emitMessages;return i(w,void 0,void 0,function(){return a(this,function(V){return S.length>0&&W(S),[2]})})})),w.on(Zr.type,Ir(function(S,O,U){var W=U.emitStatus;return i(w,void 0,void 0,function(){return a(this,function(V){return W(S),[2]})})})),w.on(vi.type,Ir(function(S,O,U){var W=U.receiveMessages,V=U.delay,J=U.config;return i(w,void 0,void 0,function(){var B,he;return a(this,function(se){switch(se.label){case 0:return J.retryConfiguration&&J.retryConfiguration.shouldRetry(S.reason,S.attempts)?(O.throwIfAborted(),[4,V(J.retryConfiguration.getDelay(S.attempts,S.reason))]):[3,6];case 1:se.sent(),O.throwIfAborted(),se.label=2;case 2:return se.trys.push([2,4,,5]),[4,W({abortSignal:O,channels:S.channels,channelGroups:S.groups,timetoken:S.cursor.timetoken,region:S.cursor.region,filterExpression:J.filterExpression})];case 3:return B=se.sent(),[2,p.transition(Dr(B.metadata,B.messages))];case 4:return(he=se.sent())instanceof Error&&he.message==="Aborted"?[2]:he instanceof xe?[2,p.transition(Ct(he))]:[3,5];case 5:return[3,7];case 6:return[2,p.transition(Yt(new xe(J.retryConfiguration.getGiveupReason(S.reason,S.attempts))))];case 7:return[2]}})})})),w.on(wn.type,Ir(function(S,O,U){var W=U.handshake,V=U.delay,J=U.presenceState,B=U.config;return i(w,void 0,void 0,function(){var he,se;return a(this,function(ne){switch(ne.label){case 0:return B.retryConfiguration&&B.retryConfiguration.shouldRetry(S.reason,S.attempts)?(O.throwIfAborted(),[4,V(B.retryConfiguration.getDelay(S.attempts,S.reason))]):[3,6];case 1:ne.sent(),O.throwIfAborted(),ne.label=2;case 2:return ne.trys.push([2,4,,5]),[4,W(r({abortSignal:O,channels:S.channels,channelGroups:S.groups,filterExpression:B.filterExpression},B.maintainPresenceState&&{state:J}))];case 3:return he=ne.sent(),[2,p.transition(ae(he))];case 4:return(se=ne.sent())instanceof Error&&se.message==="Aborted"?[2]:se instanceof xe?[2,p.transition(Fe(se))]:[3,5];case 5:return[3,7];case 6:return[2,p.transition(ze(new xe(B.retryConfiguration.getGiveupReason(S.reason,S.attempts))))];case 7:return[2]}})})})),w}return e(u,d),u}(za),Ln=new Ei("HANDSHAKE_FAILED");Ln.on(Gn.type,function(d,u){return ei.with({channels:u.payload.channels,groups:u.payload.groups,cursor:d.cursor})}),Ln.on(zn.type,function(d,u){return ei.with({channels:d.channels,groups:d.groups,cursor:u.payload.cursor||d.cursor})}),Ln.on(Rn.type,function(d,u){var p,v;return ei.with({channels:u.payload.channels,groups:u.payload.groups,cursor:{timetoken:u.payload.cursor.timetoken,region:u.payload.cursor.region?u.payload.cursor.region:(v=(p=d?.cursor)===null||p===void 0?void 0:p.region)!==null&&v!==void 0?v:0}})}),Ln.on(ln.type,function(d){return dn.with()});var yi=new Ei("HANDSHAKE_STOPPED");yi.on(Gn.type,function(d,u){return yi.with({channels:u.payload.channels,groups:u.payload.groups,cursor:d.cursor})}),yi.on(zn.type,function(d,u){return ei.with(r(r({},d),{cursor:u.payload.cursor||d.cursor}))}),yi.on(Rn.type,function(d,u){var p;return yi.with({channels:u.payload.channels,groups:u.payload.groups,cursor:{timetoken:u.payload.cursor.timetoken,region:u.payload.cursor.region||((p=d?.cursor)===null||p===void 0?void 0:p.region)||0}})}),yi.on(ln.type,function(d){return dn.with()});var oi=new Ei("RECEIVE_FAILED");oi.on(zn.type,function(d,u){var p;return ei.with({channels:d.channels,groups:d.groups,cursor:{timetoken:u.payload.cursor.timetoken?(p=u.payload.cursor)===null||p===void 0?void 0:p.timetoken:d.cursor.timetoken,region:u.payload.cursor.region||d.cursor.region}})}),oi.on(Gn.type,function(d,u){return ei.with({channels:u.payload.channels,groups:u.payload.groups,cursor:d.cursor})}),oi.on(Rn.type,function(d,u){return ei.with({channels:u.payload.channels,groups:u.payload.groups,cursor:{timetoken:u.payload.cursor.timetoken,region:u.payload.cursor.region||d.cursor.region}})}),oi.on(ln.type,function(d){return dn.with(void 0)});var Hr=new Ei("RECEIVE_STOPPED");Hr.on(Gn.type,function(d,u){return Hr.with({channels:u.payload.channels,groups:u.payload.groups,cursor:d.cursor})}),Hr.on(Rn.type,function(d,u){return Hr.with({channels:u.payload.channels,groups:u.payload.groups,cursor:{timetoken:u.payload.cursor.timetoken,region:u.payload.cursor.region||d.cursor.region}})}),Hr.on(zn.type,function(d,u){var p;return ei.with({channels:d.channels,groups:d.groups,cursor:{timetoken:u.payload.cursor.timetoken?(p=u.payload.cursor)===null||p===void 0?void 0:p.timetoken:d.cursor.timetoken,region:u.payload.cursor.region||d.cursor.region}})}),Hr.on(ln.type,function(){return dn.with(void 0)});var Ui=new Ei("RECEIVE_RECONNECTING");Ui.onEnter(function(d){return vi(d)}),Ui.onExit(function(){return vi.cancel}),Ui.on(Dr.type,function(d,u){return xi.with({channels:d.channels,groups:d.groups,cursor:u.payload.cursor},[Pn(u.payload.events)])}),Ui.on(Ct.type,function(d,u){return Ui.with(r(r({},d),{attempts:d.attempts+1,reason:u.payload}))}),Ui.on(Yt.type,function(d,u){var p;return oi.with({groups:d.groups,channels:d.channels,cursor:d.cursor,reason:u.payload},[Zr({category:Re.PNDisconnectedUnexpectedlyCategory,error:(p=u.payload)===null||p===void 0?void 0:p.message})])}),Ui.on(Lt.type,function(d){return Hr.with({channels:d.channels,groups:d.groups,cursor:d.cursor},[Zr({category:Re.PNDisconnectedCategory})])}),Ui.on(Rn.type,function(d,u){return xi.with({channels:u.payload.channels,groups:u.payload.groups,cursor:{timetoken:u.payload.cursor.timetoken,region:u.payload.cursor.region||d.cursor.region}})}),Ui.on(Gn.type,function(d,u){return xi.with({channels:u.payload.channels,groups:u.payload.groups,cursor:d.cursor})}),Ui.on(ln.type,function(d){return dn.with(void 0,[Zr({category:Re.PNDisconnectedCategory})])});var xi=new Ei("RECEIVING");xi.onEnter(function(d){return _n(d.channels,d.groups,d.cursor)}),xi.onExit(function(){return _n.cancel}),xi.on(gt.type,function(d,u){return xi.with({channels:d.channels,groups:d.groups,cursor:u.payload.cursor},[Pn(u.payload.events)])}),xi.on(Gn.type,function(d,u){return u.payload.channels.length===0&&u.payload.groups.length===0?dn.with(void 0):xi.with({cursor:d.cursor,channels:u.payload.channels,groups:u.payload.groups})}),xi.on(Rn.type,function(d,u){return u.payload.channels.length===0&&u.payload.groups.length===0?dn.with(void 0):xi.with({channels:u.payload.channels,groups:u.payload.groups,cursor:{timetoken:u.payload.cursor.timetoken,region:u.payload.cursor.region||d.cursor.region}})}),xi.on(zt.type,function(d,u){return Ui.with(r(r({},d),{attempts:0,reason:u.payload}))}),xi.on(Lt.type,function(d){return Hr.with({channels:d.channels,groups:d.groups,cursor:d.cursor},[Zr({category:Re.PNDisconnectedCategory})])}),xi.on(ln.type,function(d){return dn.with(void 0,[Zr({category:Re.PNDisconnectedCategory})])});var Vi=new Ei("HANDSHAKE_RECONNECTING");Vi.onEnter(function(d){return wn(d)}),Vi.onExit(function(){return wn.cancel}),Vi.on(ae.type,function(d,u){var p,v,w={timetoken:!((p=d.cursor)===null||p===void 0)&&p.timetoken?(v=d.cursor)===null||v===void 0?void 0:v.timetoken:u.payload.cursor.timetoken,region:u.payload.cursor.region};return xi.with({channels:d.channels,groups:d.groups,cursor:w},[Zr({category:Re.PNConnectedCategory})])}),Vi.on(Fe.type,function(d,u){return Vi.with(r(r({},d),{attempts:d.attempts+1,reason:u.payload}))}),Vi.on(ze.type,function(d,u){var p;return Ln.with({groups:d.groups,channels:d.channels,cursor:d.cursor,reason:u.payload},[Zr({category:Re.PNConnectionErrorCategory,error:(p=u.payload)===null||p===void 0?void 0:p.message})])}),Vi.on(Lt.type,function(d){return yi.with({channels:d.channels,groups:d.groups,cursor:d.cursor})}),Vi.on(Gn.type,function(d,u){return ei.with({channels:u.payload.channels,groups:u.payload.groups,cursor:d.cursor})}),Vi.on(Rn.type,function(d,u){var p,v;return ei.with({channels:u.payload.channels,groups:u.payload.groups,cursor:{timetoken:u.payload.cursor.timetoken,region:((p=u.payload.cursor)===null||p===void 0?void 0:p.region)||((v=d?.cursor)===null||v===void 0?void 0:v.region)||0}})}),Vi.on(ln.type,function(d){return dn.with(void 0)});var ei=new Ei("HANDSHAKING");ei.onEnter(function(d){return tn(d.channels,d.groups)}),ei.onExit(function(){return tn.cancel}),ei.on(Gn.type,function(d,u){return u.payload.channels.length===0&&u.payload.groups.length===0?dn.with(void 0):ei.with({channels:u.payload.channels,groups:u.payload.groups,cursor:d.cursor})}),ei.on(D.type,function(d,u){var p,v;return xi.with({channels:d.channels,groups:d.groups,cursor:{timetoken:!((p=d?.cursor)===null||p===void 0)&&p.timetoken?(v=d?.cursor)===null||v===void 0?void 0:v.timetoken:u.payload.timetoken,region:u.payload.region}},[Zr({category:Re.PNConnectedCategory})])}),ei.on(j.type,function(d,u){return Vi.with({channels:d.channels,groups:d.groups,cursor:d.cursor,attempts:0,reason:u.payload})}),ei.on(Lt.type,function(d){return yi.with({channels:d.channels,groups:d.groups,cursor:d.cursor})}),ei.on(Rn.type,function(d,u){var p;return ei.with({channels:u.payload.channels,groups:u.payload.groups,cursor:{timetoken:u.payload.cursor.timetoken,region:u.payload.cursor.region||((p=d?.cursor)===null||p===void 0?void 0:p.region)||0}})}),ei.on(ln.type,function(d){return dn.with()});var dn=new Ei("UNSUBSCRIBED");dn.on(Gn.type,function(d,u){return ei.with({channels:u.payload.channels,groups:u.payload.groups})}),dn.on(Rn.type,function(d,u){return ei.with({channels:u.payload.channels,groups:u.payload.groups,cursor:u.payload.cursor})});var xc=function(){function d(u){var p=this;this.engine=new os,this.channels=[],this.groups=[],this.dependencies=u,this.dispatcher=new rr(this.engine,u),this._unsubscribeEngine=this.engine.subscribe(function(v){v.type==="invocationDispatched"&&p.dispatcher.dispatch(v.invocation)}),this.engine.start(dn,void 0)}return Object.defineProperty(d.prototype,"_engine",{get:function(){return this.engine},enumerable:!1,configurable:!0}),d.prototype.subscribe=function(u){var p=this,v=u.channels,w=u.channelGroups,S=u.timetoken,O=u.withPresence;this.channels=c(c([],o(this.channels),!1),o(v??[]),!1),this.groups=c(c([],o(this.groups),!1),o(w??[]),!1),O&&(this.channels.map(function(U){return p.channels.push("".concat(U,"-pnpres"))}),this.groups.map(function(U){return p.groups.push("".concat(U,"-pnpres"))})),S?this.engine.transition(Rn(Array.from(new Set(c(c([],o(this.channels),!1),o(v??[]),!1))),Array.from(new Set(c(c([],o(this.groups),!1),o(w??[]),!1))),S)):this.engine.transition(Gn(Array.from(new Set(c(c([],o(this.channels),!1),o(v??[]),!1))),Array.from(new Set(c(c([],o(this.groups),!1),o(w??[]),!1))))),this.dependencies.join&&this.dependencies.join({channels:Array.from(new Set(this.channels.filter(function(U){return!U.endsWith("-pnpres")}))),groups:Array.from(new Set(this.groups.filter(function(U){return!U.endsWith("-pnpres")})))})},d.prototype.unsubscribe=function(u){var p=this,v=u.channels,w=v===void 0?[]:v,S=u.channelGroups,O=S===void 0?[]:S,U=pe.removeSingleOccurance(this.channels,c(c([],o(w),!1),o(w.map(function(B){return"".concat(B,"-pnpres")})),!1)),W=pe.removeSingleOccurance(this.groups,c(c([],o(O),!1),o(O.map(function(B){return"".concat(B,"-pnpres")})),!1));if(new Set(this.channels).size!==new Set(U).size||new Set(this.groups).size!==new Set(W).size){var V=pe.findUniqueCommonElements(this.channels,w),J=pe.findUniqueCommonElements(this.groups,O);this.dependencies.presenceState&&(V?.forEach(function(B){return delete p.dependencies.presenceState[B]}),J?.forEach(function(B){return delete p.dependencies.presenceState[B]})),this.channels=U,this.groups=W,this.engine.transition(Gn(Array.from(new Set(this.channels.slice(0))),Array.from(new Set(this.groups.slice(0))))),this.dependencies.leave&&this.dependencies.leave({channels:V.slice(0),groups:J.slice(0)})}},d.prototype.unsubscribeAll=function(){this.channels=[],this.groups=[],this.dependencies.presenceState&&(this.dependencies.presenceState={}),this.engine.transition(Gn(this.channels.slice(0),this.groups.slice(0))),this.dependencies.leaveAll&&this.dependencies.leaveAll()},d.prototype.reconnect=function(u){var p=u.timetoken,v=u.region;this.engine.transition(zn(p,v))},d.prototype.disconnect=function(){this.engine.transition(Lt()),this.dependencies.leaveAll&&this.dependencies.leaveAll()},d.prototype.getSubscribedChannels=function(){return Array.from(new Set(this.channels))},d.prototype.getSubscribedChannelGroups=function(){return Array.from(new Set(this.groups))},d.prototype.dispose=function(){this.disconnect(),this._unsubscribeEngine(),this.dispatcher.dispose()},d}(),ko=or("RECONNECT",function(){return{}}),Bt=or("DISCONNECT",function(){return{}}),dr=or("JOINED",function(d,u){return{channels:d,groups:u}}),gr=or("LEFT",function(d,u){return{channels:d,groups:u}}),ti=or("LEFT_ALL",function(){return{}}),Cr=or("HEARTBEAT_SUCCESS",function(d){return{statusCode:d}}),Or=or("HEARTBEAT_FAILURE",function(d){return d}),Aa=or("HEARTBEAT_GIVEUP",function(){return{}}),fn=or("TIMES_UP",function(){return{}}),Io=On("HEARTBEAT",function(d,u){return{channels:d,groups:u}}),Ii=On("LEAVE",function(d,u){return{channels:d,groups:u}}),Ou=On("EMIT_STATUS",function(d){return d}),Do=Rt("WAIT",function(){return{}}),Pu=Rt("DELAYED_HEARTBEAT",function(d){return d}),qf=function(d){function u(p,v){var w=d.call(this,v)||this;return w.on(Io.type,Ir(function(S,O,U){var W=U.heartbeat,V=U.presenceState,J=U.config;return i(w,void 0,void 0,function(){var B;return a(this,function(he){switch(he.label){case 0:return he.trys.push([0,2,,3]),[4,W(r({channels:S.channels,channelGroups:S.groups},J.maintainPresenceState&&{state:V}))];case 1:return he.sent(),p.transition(Cr(200)),[3,3];case 2:return(B=he.sent())instanceof xe?[2,p.transition(Or(B))]:[3,3];case 3:return[2]}})})})),w.on(Ii.type,Ir(function(S,O,U){var W=U.leave,V=U.config;return i(w,void 0,void 0,function(){return a(this,function(J){switch(J.label){case 0:if(V.suppressLeaveEvents)return[3,4];J.label=1;case 1:return J.trys.push([1,3,,4]),[4,W({channels:S.channels,channelGroups:S.groups})];case 2:case 3:return J.sent(),[3,4];case 4:return[2]}})})})),w.on(Do.type,Ir(function(S,O,U){var W=U.heartbeatDelay;return i(w,void 0,void 0,function(){return a(this,function(V){switch(V.label){case 0:return O.throwIfAborted(),[4,W()];case 1:return V.sent(),O.throwIfAborted(),[2,p.transition(fn())]}})})})),w.on(Pu.type,Ir(function(S,O,U){var W=U.heartbeat,V=U.retryDelay,J=U.presenceState,B=U.config;return i(w,void 0,void 0,function(){var he;return a(this,function(se){switch(se.label){case 0:return B.retryConfiguration&&B.retryConfiguration.shouldRetry(S.reason,S.attempts)?(O.throwIfAborted(),[4,V(B.retryConfiguration.getDelay(S.attempts,S.reason))]):[3,6];case 1:se.sent(),O.throwIfAborted(),se.label=2;case 2:return se.trys.push([2,4,,5]),[4,W(r({channels:S.channels,channelGroups:S.groups},B.maintainPresenceState&&{state:J}))];case 3:return se.sent(),[2,p.transition(Cr(200))];case 4:return(he=se.sent())instanceof Error&&he.message==="Aborted"?[2]:he instanceof xe?[2,p.transition(Or(he))]:[3,5];case 5:return[3,7];case 6:return[2,p.transition(Aa())];case 7:return[2]}})})})),w.on(Ou.type,Ir(function(S,O,U){var W=U.emitStatus,V=U.config;return i(w,void 0,void 0,function(){var J;return a(this,function(B){return V.announceFailedHeartbeats&&((J=S?.status)===null||J===void 0?void 0:J.error)===!0?W(S.status):V.announceSuccessfulHeartbeats&&S.statusCode===200&&W(r(r({},S),{operation:ce.PNHeartbeatOperation,error:!1})),[2]})})})),w}return e(u,d),u}(za),us=new Ei("HEARTBEAT_STOPPED");us.on(dr.type,function(d,u){return us.with({channels:c(c([],o(d.channels),!1),o(u.payload.channels),!1),groups:c(c([],o(d.groups),!1),o(u.payload.groups),!1)})}),us.on(gr.type,function(d,u){return us.with({channels:d.channels.filter(function(p){return!u.payload.channels.includes(p)}),groups:d.groups.filter(function(p){return!u.payload.groups.includes(p)})})}),us.on(ko.type,function(d,u){return Wi.with({channels:d.channels,groups:d.groups})}),us.on(ti.type,function(d,u){return Oo.with(void 0)});var ka=new Ei("HEARTBEAT_COOLDOWN");ka.onEnter(function(){return Do()}),ka.onExit(function(){return Do.cancel}),ka.on(fn.type,function(d,u){return Wi.with({channels:d.channels,groups:d.groups})}),ka.on(dr.type,function(d,u){return Wi.with({channels:c(c([],o(d.channels),!1),o(u.payload.channels),!1),groups:c(c([],o(d.groups),!1),o(u.payload.groups),!1)})}),ka.on(gr.type,function(d,u){return Wi.with({channels:d.channels.filter(function(p){return!u.payload.channels.includes(p)}),groups:d.groups.filter(function(p){return!u.payload.groups.includes(p)})},[Ii(u.payload.channels,u.payload.groups)])}),ka.on(Bt.type,function(d){return us.with({channels:d.channels,groups:d.groups},[Ii(d.channels,d.groups)])}),ka.on(ti.type,function(d,u){return Oo.with(void 0,[Ii(d.channels,d.groups)])});var Ru=new Ei("HEARTBEAT_FAILED");Ru.on(dr.type,function(d,u){return Wi.with({channels:c(c([],o(d.channels),!1),o(u.payload.channels),!1),groups:c(c([],o(d.groups),!1),o(u.payload.groups),!1)})}),Ru.on(gr.type,function(d,u){return Wi.with({channels:d.channels.filter(function(p){return!u.payload.channels.includes(p)}),groups:d.groups.filter(function(p){return!u.payload.groups.includes(p)})},[Ii(u.payload.channels,u.payload.groups)])}),Ru.on(ko.type,function(d,u){return Wi.with({channels:d.channels,groups:d.groups})}),Ru.on(Bt.type,function(d,u){return us.with({channels:d.channels,groups:d.groups},[Ii(d.channels,d.groups)])}),Ru.on(ti.type,function(d,u){return Oo.with(void 0,[Ii(d.channels,d.groups)])});var pn=new Ei("HEARBEAT_RECONNECTING");pn.onEnter(function(d){return Pu(d)}),pn.onExit(function(){return Pu.cancel}),pn.on(dr.type,function(d,u){return Wi.with({channels:c(c([],o(d.channels),!1),o(u.payload.channels),!1),groups:c(c([],o(d.groups),!1),o(u.payload.groups),!1)})}),pn.on(gr.type,function(d,u){return Wi.with({channels:d.channels.filter(function(p){return!u.payload.channels.includes(p)}),groups:d.groups.filter(function(p){return!u.payload.groups.includes(p)})},[Ii(u.payload.channels,u.payload.groups)])}),pn.on(Bt.type,function(d,u){us.with({channels:d.channels,groups:d.groups},[Ii(d.channels,d.groups)])}),pn.on(Cr.type,function(d,u){return ka.with({channels:d.channels,groups:d.groups})}),pn.on(Or.type,function(d,u){return pn.with(r(r({},d),{attempts:d.attempts+1,reason:u.payload}))}),pn.on(Aa.type,function(d,u){return Ru.with({channels:d.channels,groups:d.groups})}),pn.on(ti.type,function(d,u){return Oo.with(void 0,[Ii(d.channels,d.groups)])});var Wi=new Ei("HEARTBEATING");Wi.onEnter(function(d){return Io(d.channels,d.groups)}),Wi.on(Cr.type,function(d,u){return ka.with({channels:d.channels,groups:d.groups})}),Wi.on(dr.type,function(d,u){return Wi.with({channels:c(c([],o(d.channels),!1),o(u.payload.channels),!1),groups:c(c([],o(d.groups),!1),o(u.payload.groups),!1)})}),Wi.on(gr.type,function(d,u){return Wi.with({channels:d.channels.filter(function(p){return!u.payload.channels.includes(p)}),groups:d.groups.filter(function(p){return!u.payload.groups.includes(p)})},[Ii(u.payload.channels,u.payload.groups)])}),Wi.on(Or.type,function(d,u){return pn.with(r(r({},d),{attempts:0,reason:u.payload}))}),Wi.on(Bt.type,function(d){return us.with({channels:d.channels,groups:d.groups},[Ii(d.channels,d.groups)])}),Wi.on(ti.type,function(d,u){return Oo.with(void 0,[Ii(d.channels,d.groups)])});var Oo=new Ei("HEARTBEAT_INACTIVE");Oo.on(dr.type,function(d,u){return Wi.with({channels:u.payload.channels,groups:u.payload.groups})});var ri=function(){function d(u){var p=this;this.engine=new os,this.channels=[],this.groups=[],this.dispatcher=new qf(this.engine,u),this.dependencies=u,this._unsubscribeEngine=this.engine.subscribe(function(v){v.type==="invocationDispatched"&&p.dispatcher.dispatch(v.invocation)}),this.engine.start(Oo,void 0)}return Object.defineProperty(d.prototype,"_engine",{get:function(){return this.engine},enumerable:!1,configurable:!0}),d.prototype.join=function(u){var p=u.channels,v=u.groups;this.channels=c(c([],o(this.channels),!1),o(p??[]),!1),this.groups=c(c([],o(this.groups),!1),o(v??[]),!1),this.engine.transition(dr(this.channels.slice(0),this.groups.slice(0)))},d.prototype.leave=function(u){var p=this,v=u.channels,w=u.groups;this.dependencies.presenceState&&(v?.forEach(function(S){return delete p.dependencies.presenceState[S]}),w?.forEach(function(S){return delete p.dependencies.presenceState[S]})),this.engine.transition(gr(v??[],w??[]))},d.prototype.leaveAll=function(){this.engine.transition(ti())},d.prototype.dispose=function(){this._unsubscribeEngine(),this.dispatcher.dispose()},d}(),Og=function(){function d(){}return d.LinearRetryPolicy=function(u){return{delay:u.delay,maximumRetry:u.maximumRetry,shouldRetry:function(p,v){var w;return((w=p?.status)===null||w===void 0?void 0:w.statusCode)!==403&&this.maximumRetry>v},getDelay:function(p,v){var w;return 1e3*(((w=v.retryAfter)!==null&&w!==void 0?w:this.delay)+Math.random())},getGiveupReason:function(p,v){var w;return this.maximumRetry<=v?"retry attempts exhaused.":((w=p?.status)===null||w===void 0?void 0:w.statusCode)===403?"forbidden operation.":"unknown error"}}},d.ExponentialRetryPolicy=function(u){return{minimumDelay:u.minimumDelay,maximumDelay:u.maximumDelay,maximumRetry:u.maximumRetry,shouldRetry:function(p,v){var w;return((w=p?.status)===null||w===void 0?void 0:w.statusCode)!==403&&this.maximumRetry>v},getDelay:function(p,v){var w;return 1e3*(((w=v.retryAfter)!==null&&w!==void 0?w:Math.min(Math.pow(2,p),this.maximumDelay))+Math.random())},getGiveupReason:function(p,v){var w;return this.maximumRetry<=v?"retry attempts exhaused.":((w=p?.status)===null||w===void 0?void 0:w.statusCode)===403?"forbidden operation.":"unknown error"}}},d}(),db=function(){function d(u){var p=u.modules,v=u.listenerManager,w=u.getFileUrl;this.modules=p,this.listenerManager=v,this.getFileUrl=w,this._channelListenerMap=new Map,this._groupListenerMap=new Map,p.cryptoModule&&(this._decoder=new TextDecoder)}return d.prototype.emitEvent=function(u){var p=u.channel,v=u.publishMetaData,w=u.subscriptionMatch;if(p===w&&(w=null),u.channel.endsWith("-pnpres")){var S={channel:null,subscription:null};p&&(S.channel=p.substring(0,p.lastIndexOf("-pnpres"))),w&&(S.subscription=w.substring(0,w.lastIndexOf("-pnpres"))),S.action=u.payload.action,S.state=u.payload.data,S.timetoken=v.timetoken,S.occupancy=u.payload.occupancy,S.uuid=u.payload.uuid,S.timestamp=u.payload.timestamp,u.payload.join&&(S.join=u.payload.join),u.payload.leave&&(S.leave=u.payload.leave),u.payload.timeout&&(S.timeout=u.payload.timeout),S.actualChannel=w!=null?p:null,S.subscribedChannel=w??p,this.listenerManager.announcePresence(S),this._announce("presence",S,S.channel,S.subscription)}else if(u.messageType===1)(S={channel:null,subscription:null}).channel=p,S.subscription=w,S.timetoken=v.timetoken,S.publisher=u.issuingClientId,u.userMetadata&&(S.userMetadata=u.userMetadata),S.message=u.payload,this.listenerManager.announceSignal(S),this._announce("signal",S,S.channel,S.subscription);else if(u.messageType===2){if((S={channel:null,subscription:null}).channel=p,S.subscription=w,S.timetoken=v.timetoken,S.publisher=u.issuingClientId,u.userMetadata&&(S.userMetadata=u.userMetadata),S.message={event:u.payload.event,type:u.payload.type,data:u.payload.data},this.listenerManager.announceObjects(S),this._announce("objects",S,S.channel,S.subscription),u.payload.type==="uuid"){var O=this._renameChannelField(S),U=r(r({},O),{message:r(r({},O.message),{event:this._renameEvent(O.message.event),type:"user"})});this.listenerManager.announceUser(U),this._announce("user",U,S.channel,S.subscription)}else if(u.payload.type==="channel"){O=this._renameChannelField(S);var W=r(r({},O),{message:r(r({},O.message),{event:this._renameEvent(O.message.event),type:"space"})});this.listenerManager.announceSpace(W),this._announce("space",W,S.channel,S.subscription)}else if(u.payload.type==="membership"){var V=(O=this._renameChannelField(S)).message.data,J=V.uuid,B=V.channel,he=n(V,["uuid","channel"]);he.user=J,he.space=B;var se=r(r({},O),{message:r(r({},O.message),{event:this._renameEvent(O.message.event),data:he})});this.listenerManager.announceMembership(se),this._announce("membership",se,S.channel,S.subscription)}}else if(u.messageType===3)(S={}).channel=p,S.subscription=w,S.timetoken=v.timetoken,S.publisher=u.issuingClientId,S.data={messageTimetoken:u.payload.data.messageTimetoken,actionTimetoken:u.payload.data.actionTimetoken,type:u.payload.data.type,uuid:u.issuingClientId,value:u.payload.data.value},S.event=u.payload.event,this.listenerManager.announceMessageAction(S),this._announce("messageAction",S,S.channel,S.subscription);else if(u.messageType===4){(S={}).channel=p,S.subscription=w,S.timetoken=v.timetoken,S.publisher=u.issuingClientId;var ne=u.payload;if(this.modules.cryptoModule){var oe=void 0;try{oe=(ue=this.modules.cryptoModule.decrypt(u.payload))instanceof ArrayBuffer?JSON.parse(this._decoder.decode(ue)):ue}catch(Ie){oe=null,S.error="Error while decrypting message content: ".concat(Ie.message)}oe!==null&&(ne=oe)}u.userMetadata&&(S.userMetadata=u.userMetadata),S.message=ne.message,S.file={id:ne.file.id,name:ne.file.name,url:this.getFileUrl({id:ne.file.id,name:ne.file.name,channel:p})},this.listenerManager.announceFile(S),this._announce("file",S,S.channel,S.subscription)}else{if((S={channel:null,subscription:null}).channel=p,S.subscription=w,S.timetoken=v.timetoken,S.publisher=u.issuingClientId,u.userMetadata&&(S.userMetadata=u.userMetadata),this.modules.cryptoModule){oe=void 0;try{var ue;oe=(ue=this.modules.cryptoModule.decrypt(u.payload))instanceof ArrayBuffer?JSON.parse(this._decoder.decode(ue)):ue}catch(Ie){oe=null,S.error="Error while decrypting message content: ".concat(Ie.message)}S.message=oe??u.payload}else S.message=u.payload;S.actualChannel=w!=null?p:null,S.subscribedChannel=w??p,this.listenerManager.announceMessage(S),this._announce("message",S,S.channel,S.subscription)}},d.prototype.addListener=function(u,p,v){var w=this;p&&v?(p?.forEach(function(S){w._channelListenerMap[S]?w._channelListenerMap[S].includes(u)||w._channelListenerMap[S].push(u):w._channelListenerMap[S]=[u]}),v?.forEach(function(S){w._groupListenerMap[S]?w._groupListenerMap[S].includes(u)||w._groupListenerMap[S].push(u):w._groupListenerMap[S]=[u]})):this.listenerManager.addListener(u)},d.prototype.removeListener=function(u,p,v){var w=this;p&&v?(p?.forEach(function(S){var O;w._channelListenerMap[S]=(O=w._channelListenerMap[S])===null||O===void 0?void 0:O.filter(function(U){return U!==u})}),v?.forEach(function(S){var O;w._groupListenerMap[S]=(O=w._groupListenerMap[S])===null||O===void 0?void 0:O.filter(function(U){return U!==u})})):this.listenerManager.removeListener(u)},d.prototype.removeAllListeners=function(){this.listenerManager.removeAllListeners()},d.prototype._renameEvent=function(u){return u==="set"?"updated":"removed"},d.prototype._renameChannelField=function(u){var p=u.channel,v=n(u,["channel"]);return v.spaceId=p,v},d.prototype._announce=function(u,p,v,w){var S,O;(S=this._channelListenerMap[v])===null||S===void 0||S.forEach(function(U){return U[u]&&U[u](p)}),(O=this._groupListenerMap[w])===null||O===void 0||O.forEach(function(U){return U[u]&&U[u](p)})},d}(),Pg=function(){function d(){}return d.prototype.subscribe=function(){var u,p;this.pubnub.subscribe(r({channels:this.channelNames,channelGroups:this.groupNames},((p=(u=this.options)===null||u===void 0?void 0:u.cursor)===null||p===void 0?void 0:p.timetoken)&&{timetoken:this.options.cursor.timetoken}))},d.prototype.unsubscribe=function(){this.pubnub.unsubscribe({channels:this.channelNames.filter(function(u){return!u.endsWith("-pnpres")}),channelGroups:this.groupNames.filter(function(u){return!u.endsWith("-pnpres")})})},Object.defineProperty(d.prototype,"onMessage",{set:function(u){this.listener.message=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onPresence",{set:function(u){this.listener.presence=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onSignal",{set:function(u){this.listener.signal=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onObjects",{set:function(u){this.listener.objects=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onMessageAction",{set:function(u){this.listener.messageAction=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onFile",{set:function(u){this.listener.file=u},enumerable:!1,configurable:!0}),d.prototype.addListener=function(u){this.eventEmitter.addListener(u,this.channelNames.filter(function(p){return!p.endsWith("-pnpres")}),this.groupNames.filter(function(p){return!p.endsWith("-pnpres")}))},d.prototype.removeListener=function(u){this.eventEmitter.removeListener(u,this.channelNames,this.groupNames)},Object.defineProperty(d.prototype,"channels",{get:function(){return this.channelNames.slice(0)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"channelGroups",{get:function(){return this.groupNames.slice(0)},enumerable:!1,configurable:!0}),d}(),jf=function(d){function u(p){var v=p.channels,w=v===void 0?[]:v,S=p.channelGroups,O=S===void 0?[]:S,U=p.subscriptionOptions,W=p.eventEmitter,V=p.pubnub,J=d.call(this)||this;return J.channelNames=[],J.groupNames=[],J.subscriptionList=[],J.options=U,J.eventEmitter=W,J.pubnub=V,w.filter(function(B){return!B.endsWith("-pnpres")}).forEach(function(B){var he=J.pubnub.channel(B).subscription(J.options);J.channelNames=c(c([],o(J.channelNames),!1),o(he.channels),!1),J.subscriptionList.push(he)}),O.filter(function(B){return!B.endsWith("-pnpres")}).forEach(function(B){var he=J.pubnub.channelGroup(B).subscription(J.options);J.groupNames=c(c([],o(J.groupNames),!1),o(he.channelGroups),!1),J.subscriptionList.push(he)}),J.listener={},W.addListener(J.listener,J.channelNames.filter(function(B){return!B.endsWith("-pnpres")}),J.groupNames.filter(function(B){return!B.endsWith("-pnpres")})),J}return e(u,d),u.prototype.addSubscription=function(p){this.subscriptionList.push(p),this.channelNames=c(c([],o(this.channelNames),!1),o(p.channels),!1),this.groupNames=c(c([],o(this.groupNames),!1),o(p.channelGroups),!1),this.eventEmitter.addListener(this.listener,p.channels,p.channelGroups)},u.prototype.removeSubscription=function(p){var v=p.channels,w=p.channelGroups;this.channelNames=this.channelNames.filter(function(S){return!v.includes(S)}),this.groupNames=this.groupNames.filter(function(S){return!w.includes(S)}),this.subscriptionList=this.subscriptionList.filter(function(S){return S!==p}),this.eventEmitter.removeListener(this.listener,v,w)},u.prototype.addSubscriptionSet=function(p){this.subscriptionList=c(c([],o(this.subscriptionList),!1),o(p.subscriptions),!1),this.channelNames=c(c([],o(this.channelNames),!1),o(p.channels),!1),this.groupNames=c(c([],o(this.groupNames),!1),o(p.channelGroups),!1),this.eventEmitter.addListener(this.listener,p.channels,p.channelGroups)},u.prototype.removeSubscriptionSet=function(p){var v=p.channels,w=p.channelGroups;this.channelNames=this.channelNames.filter(function(S){return!v.includes(S)}),this.groupNames=this.groupNames.filter(function(S){return!w.includes(S)}),this.subscriptionList=this.subscriptionList.filter(function(S){return!p.subscriptions.includes(S)}),this.eventEmitter.removeListener(this.listener,v,w)},Object.defineProperty(u.prototype,"subscriptions",{get:function(){return this.subscriptionList.slice(0)},enumerable:!1,configurable:!0}),u}(Pg),Fl=function(d){function u(p){var v=p.channels,w=p.channelGroups,S=p.subscriptionOptions,O=p.eventEmitter,U=p.pubnub,W=d.call(this)||this;return W.channelNames=[],W.groupNames=[],W.channelNames=v,W.groupNames=w,W.options=S,W.pubnub=U,W.eventEmitter=O,W.listener={},O.addListener(W.listener,W.channelNames.filter(function(V){return!V.endsWith("-pnpres")}),W.groupNames.filter(function(V){return!V.endsWith("-pnpres")})),W}return e(u,d),u.prototype.addSubscription=function(p){return new jf({channels:c(c([],o(this.channelNames),!1),o(p.channels),!1),channelGroups:c(c([],o(this.groupNames),!1),o(p.channelGroups),!1),subscriptionOptions:r(r({},this.options),p?.options),eventEmitter:this.eventEmitter,pubnub:this.pubnub})},u}(Pg),Rg=function(){function d(u,p,v){this.name=u,this.eventEmitter=p,this.pubnub=v}return d.prototype.subscription=function(u){return new Fl({channels:u?.receivePresenceEvents?[this.name,"".concat(this.name,"-pnpres")]:[this.name],channelGroups:[],subscriptionOptions:u,eventEmitter:this.eventEmitter,pubnub:this.pubnub})},d}(),fb=function(){function d(u,p,v){this.name=u,this.eventEmitter=p,this.pubnub=v}return d.prototype.subscription=function(u){return new Fl({channels:[],channelGroups:u?.receivePresenceEvents?[this.name,"".concat(this.name,"-pnpres")]:[this.name],subscriptionOptions:u,eventEmitter:this.eventEmitter,pubnub:this.pubnub})},d}(),Lg=function(){function d(u,p,v){this.id=u,this.eventEmitter=p,this.pubnub=v}return d.prototype.subscription=function(u){return new Fl({channels:[this.id],channelGroups:[],subscriptionOptions:u,eventEmitter:this.eventEmitter,pubnub:this.pubnub})},d}(),pb=function(){function d(u,p,v){this.id=u,this.eventEmitter=p,this.pubnub=v}return d.prototype.subscription=function(u){return new Fl({channels:[this.id],channelGroups:[],subscriptionOptions:u,eventEmitter:this.eventEmitter,pubnub:this.pubnub})},d}(),Ng=function(){function d(u){var p=this,v=u.networking,w=u.cbor,S=new A({setup:u});this._config=S;var O=new Ne({config:S}),U=u.cryptography;v.init(S);var W=new tr(S,w);this._tokenManager=W;var V=new tt({maximumSamplesCount:6e4});this._telemetryManager=V;var J=this._config.cryptoModule,B={config:S,networking:v,crypto:O,cryptography:U,tokenManager:W,telemetryManager:V,PubNubFile:u.PubNubFile,cryptoModule:J};this.File=u.PubNubFile,this.encryptFile=function(me,Me){return arguments.length==1&&typeof me!="string"&&B.cryptoModule?(Me=me,B.cryptoModule.encryptFile(Me,this.File)):U.encryptFile(me,Me,this.File)},this.decryptFile=function(me,Me){return arguments.length==1&&typeof me!="string"&&B.cryptoModule?(Me=me,B.cryptoModule.decryptFile(Me,this.File)):U.decryptFile(me,Me,this.File)};var he=Be.bind(this,B,Ga),se=Be.bind(this,B,te),ne=Be.bind(this,B,ge),oe=Be.bind(this,B,ut),ue=Be.bind(this,B,Xs),Ie=new Pt;if(this._listenerManager=Ie,this.iAmHere=Be.bind(this,B,ge),this.iAmAway=Be.bind(this,B,te),this.setPresenceState=Be.bind(this,B,ut),this.handshake=Be.bind(this,B,bn),this.receiveMessages=Be.bind(this,B,Vr),this._eventEmitter=new db({modules:B,listenerManager:this._listenerManager,getFileUrl:function(me){return Ee(B,me)}}),S.enableEventEngine===!0){if(S.maintainPresenceState&&(this.presenceState={},this.setState=function(me){var Me,Pe;return(Me=me.channels)===null||Me===void 0||Me.forEach(function(Qe){return p.presenceState[Qe]=me.state}),(Pe=me.channelGroups)===null||Pe===void 0||Pe.forEach(function(Qe){return p.presenceState[Qe]=me.state}),p.setPresenceState({channels:me.channels,channelGroups:me.channelGroups,state:p.presenceState})}),S.getHeartbeatInterval()){var Ve=new ri({heartbeat:this.iAmHere,leave:this.iAmAway,heartbeatDelay:function(){return new Promise(function(me){return setTimeout(me,1e3*B.config.getHeartbeatInterval())})},retryDelay:function(me){return new Promise(function(Me){return setTimeout(Me,me)})},config:B.config,presenceState:this.presenceState,emitStatus:function(me){Ie.announceStatus(me)}});this.presenceEventEngine=Ve,this.join=this.presenceEventEngine.join.bind(Ve),this.leave=this.presenceEventEngine.leave.bind(Ve),this.leaveAll=this.presenceEventEngine.leaveAll.bind(Ve)}var it=new xc({handshake:this.handshake,receiveMessages:this.receiveMessages,delay:function(me){return new Promise(function(Me){return setTimeout(Me,me)})},join:this.join,leave:this.leave,leaveAll:this.leaveAll,presenceState:this.presenceState,config:B.config,emitMessages:function(me){var Me,Pe;try{for(var Qe=s(me),Le=Qe.next();!Le.done;Le=Qe.next()){var Ue=Le.value;p._eventEmitter.emitEvent(Ue)}}catch(ve){Me={error:ve}}finally{try{Le&&!Le.done&&(Pe=Qe.return)&&Pe.call(Qe)}finally{if(Me)throw Me.error}}},emitStatus:function(me){Ie.announceStatus(me)}});this.subscribe=it.subscribe.bind(it),this.unsubscribe=it.unsubscribe.bind(it),this.unsubscribeAll=it.unsubscribeAll.bind(it),this.reconnect=it.reconnect.bind(it),this.disconnect=it.disconnect.bind(it),this.destroy=it.dispose.bind(it),this.getSubscribedChannels=it.getSubscribedChannels.bind(it),this.getSubscribedChannelGroups=it.getSubscribedChannelGroups.bind(it),this.eventEngine=it}else{var dt=new Ze({timeEndpoint:he,leaveEndpoint:se,heartbeatEndpoint:ne,setStateEndpoint:oe,subscribeEndpoint:ue,crypto:B.crypto,config:B.config,listenerManager:Ie,getFileUrl:function(me){return Ee(B,me)},cryptoModule:B.cryptoModule,eventEmitter:this._eventEmitter});this.subscribe=dt.adaptSubscribeChange.bind(dt),this.unsubscribe=dt.adaptUnsubscribeChange.bind(dt),this.disconnect=dt.disconnect.bind(dt),this.reconnect=dt.reconnect.bind(dt),this.unsubscribeAll=dt.unsubscribeAll.bind(dt),this.getSubscribedChannels=dt.getSubscribedChannels.bind(dt),this.getSubscribedChannelGroups=dt.getSubscribedChannelGroups.bind(dt),this.setState=dt.adaptStateChange.bind(dt),this.presence=dt.adaptPresenceChange.bind(dt),this.destroy=function(me){dt.unsubscribeAll(me),dt.disconnect()}}this.addListener=this._eventEmitter.addListener.bind(this._eventEmitter),this.removeListener=this._eventEmitter.removeListener.bind(this._eventEmitter),this.removeAllListeners=this._eventEmitter.removeAllListeners.bind(this._eventEmitter),this.parseToken=W.parseToken.bind(W),this.setToken=W.setToken.bind(W),this.getToken=W.getToken.bind(W),this.channelGroups={listGroups:Be.bind(this,B,je),listChannels:Be.bind(this,B,Ae),addChannels:Be.bind(this,B,jt),removeChannels:Be.bind(this,B,qe),deleteGroup:Be.bind(this,B,rt)},this.push={addChannels:Be.bind(this,B,lt),removeChannels:Be.bind(this,B,Nt),deleteDevice:Be.bind(this,B,St),listChannels:Be.bind(this,B,ot)},this.hereNow=Be.bind(this,B,q),this.whereNow=Be.bind(this,B,ee),this.getState=Be.bind(this,B,De),this.grant=Be.bind(this,B,Qt),this.grantToken=Be.bind(this,B,Tr),this.audit=Be.bind(this,B,Ci),this.revokeToken=Be.bind(this,B,un),this.publish=Be.bind(this,B,cn),this.fire=function(me,Me){return me.replicate=!1,me.storeInHistory=!1,p.publish(me,Me)},this.signal=Be.bind(this,B,da),this.history=Be.bind(this,B,fr),this.deleteMessages=Be.bind(this,B,gi),this.messageCounts=Be.bind(this,B,mi),this.fetchMessages=Be.bind(this,B,fa),this.addMessageAction=Be.bind(this,B,re),this.removeMessageAction=Be.bind(this,B,L),this.getMessageActions=Be.bind(this,B,Ce),this.listFiles=Be.bind(this,B,Ge);var et=Be.bind(this,B,at);this.publishFile=Be.bind(this,B,ht),this.sendFile=Je({generateUploadUrl:et,publishFile:this.publishFile,modules:B}),this.getFileUrl=function(me){return Ee(B,me)},this.downloadFile=Be.bind(this,B,Kt),this.deleteFile=Be.bind(this,B,Ot),this.channel=function(me){return new Rg(me,p._eventEmitter,p)},this.channelGroup=function(me){return new fb(me,p._eventEmitter,p)},this.channelMetadata=function(me){return new Lg(me,p._eventEmitter,p)},this.userMetadata=function(me){return new pb(me,p._eventEmitter,p)},this.subscriptionSet=function(me){return new jf({channels:me.channels,channelGroups:me.channelGroups,subscriptionOptions:me.subscriptionOptions,eventEmitter:p._eventEmitter,pubnub:p})},this.objects={getAllUUIDMetadata:Be.bind(this,B,kt),getUUIDMetadata:Be.bind(this,B,Br),setUUIDMetadata:Be.bind(this,B,Jt),removeUUIDMetadata:Be.bind(this,B,pi),getAllChannelMetadata:Be.bind(this,B,hr),getChannelMetadata:Be.bind(this,B,zr),setChannelMetadata:Be.bind(this,B,ki),removeChannelMetadata:Be.bind(this,B,qr),getChannelMembers:Be.bind(this,B,en),setChannelMembers:function(me){for(var Me=[],Pe=1;Pe<arguments.length;Pe++)Me[Pe-1]=arguments[Pe];return Be.call.apply(Be,c([p,B,Yr,r({type:"set"},me)],o(Me),!1))},removeChannelMembers:function(me){for(var Me=[],Pe=1;Pe<arguments.length;Pe++)Me[Pe-1]=arguments[Pe];return Be.call.apply(Be,c([p,B,Yr,r({type:"delete"},me)],o(Me),!1))},getMemberships:Be.bind(this,B,$t),setMemberships:function(me){for(var Me=[],Pe=1;Pe<arguments.length;Pe++)Me[Pe-1]=arguments[Pe];return Be.call.apply(Be,c([p,B,hi,r({type:"set"},me)],o(Me),!1))},removeMemberships:function(me){for(var Me=[],Pe=1;Pe<arguments.length;Pe++)Me[Pe-1]=arguments[Pe];return Be.call.apply(Be,c([p,B,hi,r({type:"delete"},me)],o(Me),!1))}},this.createUser=function(me){return p.objects.setUUIDMetadata({uuid:me.userId,data:me.data,include:me.include})},this.updateUser=this.createUser,this.removeUser=function(me){return p.objects.removeUUIDMetadata({uuid:me?.userId})},this.fetchUser=function(me){return p.objects.getUUIDMetadata({uuid:me?.userId,include:me?.include})},this.fetchUsers=this.objects.getAllUUIDMetadata,this.createSpace=function(me){return p.objects.setChannelMetadata({channel:me.spaceId,data:me.data,include:me.include})},this.updateSpace=this.createSpace,this.removeSpace=function(me){return p.objects.removeChannelMetadata({channel:me.spaceId})},this.fetchSpace=function(me){return p.objects.getChannelMetadata({channel:me.spaceId,include:me.include})},this.fetchSpaces=this.objects.getAllChannelMetadata,this.addMemberships=function(me){var Me,Pe;return typeof me.spaceId=="string"?p.objects.setChannelMembers({channel:me.spaceId,uuids:(Me=me.users)===null||Me===void 0?void 0:Me.map(function(Qe){return typeof Qe=="string"?Qe:{id:Qe.userId,custom:Qe.custom,status:Qe.status}}),limit:0}):p.objects.setMemberships({uuid:me.userId,channels:(Pe=me.spaces)===null||Pe===void 0?void 0:Pe.map(function(Qe){return typeof Qe=="string"?Qe:{id:Qe.spaceId,custom:Qe.custom,status:Qe.status}}),limit:0})},this.updateMemberships=this.addMemberships,this.removeMemberships=function(me){return typeof me.spaceId=="string"?p.objects.removeChannelMembers({channel:me.spaceId,uuids:me.userIds,limit:0}):p.objects.removeMemberships({uuid:me.userId,channels:me.spaceIds,limit:0})},this.fetchMemberships=function(me){return typeof me.spaceId=="string"?p.objects.getChannelMembers({channel:me.spaceId,filter:me.filter,limit:me.limit,page:me.page,include:{customFields:me.include.customFields,UUIDFields:me.include.userFields,customUUIDFields:me.include.customUserFields,statusField:me.include.statusField,UUIDStatusField:me.include.userStatusField,UUIDTypeField:me.include.userTypeField,totalCount:me.include.totalCount},sort:me.sort!=null?Object.fromEntries(Object.entries(me.sort).map(function(Me){var Pe=o(Me,2),Qe=Pe[0],Le=Pe[1];return[Qe.replace("user","uuid"),Le]})):null}).then(function(Me){var Pe;return Me.data=(Pe=Me.data)===null||Pe===void 0?void 0:Pe.map(function(Qe){return{user:Qe.uuid,custom:Qe.custom,updated:Qe.updated,eTag:Qe.eTag}}),Me}):p.objects.getMemberships({uuid:me.userId,filter:me.filter,limit:me.limit,page:me.page,include:{customFields:me.include.customFields,channelFields:me.include.spaceFields,customChannelFields:me.include.customSpaceFields,statusField:me.include.statusField,channelStatusField:me.include.spaceStatusField,channelTypeField:me.include.spaceTypeField,totalCount:me.include.totalCount},sort:me.sort!=null?Object.fromEntries(Object.entries(me.sort).map(function(Me){var Pe=o(Me,2),Qe=Pe[0],Le=Pe[1];return[Qe.replace("space","channel"),Le]})):null}).then(function(Me){var Pe;return Me.data=(Pe=Me.data)===null||Pe===void 0?void 0:Pe.map(function(Qe){return{space:Qe.channel,custom:Qe.custom,updated:Qe.updated,eTag:Qe.eTag}}),Me})},this.time=he,this.stop=this.destroy,this.encrypt=function(me,Me){if(Me===void 0&&B.cryptoModule){var Pe=B.cryptoModule.encrypt(me);return typeof Pe=="string"?Pe:X(Pe)}return O.encrypt(me,Me)},this.decrypt=function(me,Me){if(Me===void 0&&J){var Pe=B.cryptoModule.decrypt(me);return Pe instanceof ArrayBuffer?JSON.parse(new TextDecoder().decode(Pe)):Pe}return O.decrypt(me,Me)},this.getAuthKey=B.config.getAuthKey.bind(B.config),this.setAuthKey=B.config.setAuthKey.bind(B.config),this.getUUID=B.config.getUUID.bind(B.config),this.setUUID=B.config.setUUID.bind(B.config),this.getUserId=B.config.getUserId.bind(B.config),this.setUserId=B.config.setUserId.bind(B.config),this.getFilterExpression=B.config.getFilterExpression.bind(B.config),this.setFilterExpression=B.config.setFilterExpression.bind(B.config),this.setCipherKey=function(me){return B.config.setCipherKey(me,u,B)},this.setHeartbeatInterval=B.config.setHeartbeatInterval.bind(B.config),v.hasModule("proxy")&&(this.setProxy=function(me){B.config.setProxy(me),p.reconnect()})}return d.prototype.getVersion=function(){return this._config.getVersion()},d.prototype._addPnsdkSuffix=function(u,p){this._config._addPnsdkSuffix(u,p)},d.prototype.networkDownDetected=function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)},d.prototype.networkUpDetected=function(){this._listenerManager.announceNetworkUp(),this.reconnect()},d.notificationPayload=function(u,p){return new Ut(u,p)},d.generateUUID=function(){return I()},d.OPERATIONS=ce,d.CATEGORIES=Re,d.LinearRetryPolicy=Og.LinearRetryPolicy,d.ExponentialRetryPolicy=Og.ExponentialRetryPolicy,d}(),Fg=function(){function d(u){var p=this;this._modules={},Object.keys(u).forEach(function(v){p._modules[v]=u[v].bind(p)})}return d.prototype.init=function(u){this._config=u,Array.isArray(this._config.origin)?this._currentSubDomain=Math.floor(Math.random()*this._config.origin.length):this._currentSubDomain=0,this._coreParams={},this.shiftStandardOrigin()},d.prototype.nextOrigin=function(){var u=this._config.secure?"https://":"http://";if(typeof this._config.origin=="string")return"".concat(u).concat(this._config.origin);this._currentSubDomain+=1,this._currentSubDomain>=this._config.origin.length&&(this._currentSubDomain=0);var p=this._config.origin[this._currentSubDomain];return"".concat(u).concat(p)},d.prototype.hasModule=function(u){return u in this._modules},d.prototype.shiftStandardOrigin=function(){return this._standardOrigin=this.nextOrigin(),this._standardOrigin},d.prototype.getStandardOrigin=function(){return this._standardOrigin},d.prototype.POSTFILE=function(u,p,v){return this._modules.postfile(u,p,v)},d.prototype.GETFILE=function(u,p,v){return this._modules.getfile(u,p,v)},d.prototype.POST=function(u,p,v,w){return this._modules.post(u,p,v,w)},d.prototype.PATCH=function(u,p,v,w){return this._modules.patch(u,p,v,w)},d.prototype.GET=function(u,p,v){return this._modules.get(u,p,v)},d.prototype.DELETE=function(u,p,v){return this._modules.del(u,p,v)},d.prototype._detectErrorCategory=function(u){if(u.code==="ENOTFOUND"||u.code==="ECONNREFUSED"||u.code==="ECONNRESET"||u.code==="EAI_AGAIN"||u.status===0||u.hasOwnProperty("status")&&u.status===void 0)return Re.PNNetworkIssuesCategory;if(u.timeout)return Re.PNTimeoutCategory;if(u.code==="ETIMEDOUT")return Re.PNNetworkIssuesCategory;if(u.response){if(u.response.badRequest)return Re.PNBadRequestCategory;if(u.response.forbidden)return Re.PNAccessDeniedCategory}return Re.PNUnknownCategory},d}();function Lu(d){var u=function(v){return v&&typeof v=="object"&&v.constructor===Object};if(!u(d))return d;var p={};return Object.keys(d).forEach(function(v){var w=function(U){return typeof U=="string"||U instanceof String}(v),S=v,O=d[v];Array.isArray(v)||w&&v.indexOf(",")>=0?S=(w?v.split(","):v).reduce(function(U,W){return U+=String.fromCharCode(W)},""):(function(U){return typeof U=="number"&&isFinite(U)}(v)||w&&!isNaN(v))&&(S=String.fromCharCode(w?parseInt(v,10):10)),p[S]=u(O)?Lu(O):O}),p}var Ac=function(){function d(u,p){this._base64ToBinary=p,this._decode=u}return d.prototype.decodeToken=function(u){var p="";u.length%4==3?p="=":u.length%4==2&&(p="==");var v=u.replace(/-/gi,"+").replace(/_/gi,"/")+p,w=this._decode(this._base64ToBinary(v));if(typeof w=="object")return w},d}(),Hf={exports:{}},Mg={exports:{}};(function(d){function u(p){if(p)return function(v){for(var w in u.prototype)v[w]=u.prototype[w];return v}(p)}d.exports=u,u.prototype.on=u.prototype.addEventListener=function(p,v){return this._callbacks=this._callbacks||{},(this._callbacks["$"+p]=this._callbacks["$"+p]||[]).push(v),this},u.prototype.once=function(p,v){function w(){this.off(p,w),v.apply(this,arguments)}return w.fn=v,this.on(p,w),this},u.prototype.off=u.prototype.removeListener=u.prototype.removeAllListeners=u.prototype.removeEventListener=function(p,v){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var w,S=this._callbacks["$"+p];if(!S)return this;if(arguments.length==1)return delete this._callbacks["$"+p],this;for(var O=0;O<S.length;O++)if((w=S[O])===v||w.fn===v){S.splice(O,1);break}return S.length===0&&delete this._callbacks["$"+p],this},u.prototype.emit=function(p){this._callbacks=this._callbacks||{};for(var v=new Array(arguments.length-1),w=this._callbacks["$"+p],S=1;S<arguments.length;S++)v[S-1]=arguments[S];if(w){S=0;for(var O=(w=w.slice(0)).length;S<O;++S)w[S].apply(this,v)}return this},u.prototype.listeners=function(p){return this._callbacks=this._callbacks||{},this._callbacks["$"+p]||[]},u.prototype.hasListeners=function(p){return!!this.listeners(p).length}})(Mg);var hb=kc;kc.default=kc,kc.stable=Gf,kc.stableStringify=Gf;var Ml="[...]",Ug="[Circular]",Po=[],Ro=[];function $g(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function kc(d,u,p,v){var w;v===void 0&&(v=$g()),Lo(d,"",0,[],void 0,0,v);try{w=Ro.length===0?JSON.stringify(d,u,p):JSON.stringify(d,zf(u),p)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Po.length!==0;){var S=Po.pop();S.length===4?Object.defineProperty(S[0],S[1],S[3]):S[0][S[1]]=S[2]}}return w}function xs(d,u,p,v){var w=Object.getOwnPropertyDescriptor(v,p);w.get!==void 0?w.configurable?(Object.defineProperty(v,p,{value:d}),Po.push([v,p,u,w])):Ro.push([u,p,d]):(v[p]=d,Po.push([v,p,u]))}function Lo(d,u,p,v,w,S,O){var U;if(S+=1,typeof d=="object"&&d!==null){for(U=0;U<v.length;U++)if(v[U]===d)return void xs(Ug,d,u,w);if(O.depthLimit!==void 0&&S>O.depthLimit||O.edgesLimit!==void 0&&p+1>O.edgesLimit)return void xs(Ml,d,u,w);if(v.push(d),Array.isArray(d))for(U=0;U<d.length;U++)Lo(d[U],U,U,v,d,S,O);else{var W=Object.keys(d);for(U=0;U<W.length;U++){var V=W[U];Lo(d[V],V,U,v,d,S,O)}}v.pop()}}function gb(d,u){return d<u?-1:d>u?1:0}function Gf(d,u,p,v){v===void 0&&(v=$g());var w,S=Ul(d,"",0,[],void 0,0,v)||d;try{w=Ro.length===0?JSON.stringify(S,u,p):JSON.stringify(S,zf(u),p)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Po.length!==0;){var O=Po.pop();O.length===4?Object.defineProperty(O[0],O[1],O[3]):O[0][O[1]]=O[2]}}return w}function Ul(d,u,p,v,w,S,O){var U;if(S+=1,typeof d=="object"&&d!==null){for(U=0;U<v.length;U++)if(v[U]===d)return void xs(Ug,d,u,w);try{if(typeof d.toJSON=="function")return}catch{return}if(O.depthLimit!==void 0&&S>O.depthLimit||O.edgesLimit!==void 0&&p+1>O.edgesLimit)return void xs(Ml,d,u,w);if(v.push(d),Array.isArray(d))for(U=0;U<d.length;U++)Ul(d[U],U,U,v,d,S,O);else{var W={},V=Object.keys(d).sort(gb);for(U=0;U<V.length;U++){var J=V[U];Ul(d[J],J,U,v,d,S,O),W[J]=d[J]}if(w===void 0)return W;Po.push([w,u,d]),w[u]=W}v.pop()}}function zf(d){return d=d!==void 0?d:function(u,p){return p},function(u,p){if(Ro.length>0)for(var v=0;v<Ro.length;v++){var w=Ro[v];if(w[1]===u&&w[0]===p){p=w[2],Ro.splice(v,1);break}}return d.call(this,u,p)}}var mr,Vf=typeof Symbol<"u"&&Symbol,Wf=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var d={},u=Symbol("test"),p=Object(u);if(typeof u=="string"||Object.prototype.toString.call(u)!=="[object Symbol]"||Object.prototype.toString.call(p)!=="[object Symbol]")return!1;for(u in d[u]=42,d)return!1;if(typeof Object.keys=="function"&&Object.keys(d).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(d).length!==0)return!1;var v=Object.getOwnPropertySymbols(d);if(v.length!==1||v[0]!==u||!Object.prototype.propertyIsEnumerable.call(d,u))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var w=Object.getOwnPropertyDescriptor(d,u);if(w.value!==42||w.enumerable!==!0)return!1}return!0},Bg="Function.prototype.bind called on incompatible ",$l=Array.prototype.slice,Bl=Object.prototype.toString,ql="[object Function]",mb=function(d){var u=this;if(typeof u!="function"||Bl.call(u)!==ql)throw new TypeError(Bg+u);for(var p,v=$l.call(arguments,1),w=function(){if(this instanceof p){var V=u.apply(this,v.concat($l.call(arguments)));return Object(V)===V?V:this}return u.apply(d,v.concat($l.call(arguments)))},S=Math.max(0,u.length-v.length),O=[],U=0;U<S;U++)O.push("$"+U);if(p=Function("binder","return function ("+O.join(",")+"){ return binder.apply(this,arguments); }")(w),u.prototype){var W=function(){};W.prototype=u.prototype,p.prototype=new W,W.prototype=null}return p},Kf=Function.prototype.bind||mb,vb=Kf.call(Function.call,Object.prototype.hasOwnProperty),Ic=SyntaxError,qg=Function,Ys=TypeError,Xf=function(d){try{return qg('"use strict"; return ('+d+").constructor;")()}catch{}},No=Object.getOwnPropertyDescriptor;if(No)try{No({},"")}catch{No=null}var Js=function(){throw new Ys},Pr=No?function(){try{return Js}catch{try{return No(arguments,"callee").get}catch{return Js}}}():Js,Ia=typeof Vf=="function"&&typeof Symbol=="function"&&typeof Vf("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&Wf(),Ai=Object.getPrototypeOf||function(d){return d.__proto__},Nn={},yb=typeof Uint8Array>"u"?mr:Ai(Uint8Array),Fo={"%AggregateError%":typeof AggregateError>"u"?mr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?mr:ArrayBuffer,"%ArrayIteratorPrototype%":Ia?Ai([][Symbol.iterator]()):mr,"%AsyncFromSyncIteratorPrototype%":mr,"%AsyncFunction%":Nn,"%AsyncGenerator%":Nn,"%AsyncGeneratorFunction%":Nn,"%AsyncIteratorPrototype%":Nn,"%Atomics%":typeof Atomics>"u"?mr:Atomics,"%BigInt%":typeof BigInt>"u"?mr:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?mr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?mr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?mr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?mr:FinalizationRegistry,"%Function%":qg,"%GeneratorFunction%":Nn,"%Int8Array%":typeof Int8Array>"u"?mr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?mr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?mr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ia?Ai(Ai([][Symbol.iterator]())):mr,"%JSON%":typeof JSON=="object"?JSON:mr,"%Map%":typeof Map>"u"?mr:Map,"%MapIteratorPrototype%":typeof Map<"u"&&Ia?Ai(new Map()[Symbol.iterator]()):mr,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?mr:Promise,"%Proxy%":typeof Proxy>"u"?mr:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?mr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?mr:Set,"%SetIteratorPrototype%":typeof Set<"u"&&Ia?Ai(new Set()[Symbol.iterator]()):mr,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?mr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ia?Ai(""[Symbol.iterator]()):mr,"%Symbol%":Ia?Symbol:mr,"%SyntaxError%":Ic,"%ThrowTypeError%":Pr,"%TypedArray%":yb,"%TypeError%":Ys,"%Uint8Array%":typeof Uint8Array>"u"?mr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?mr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?mr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?mr:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?mr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?mr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?mr:WeakSet},bb=function d(u){var p;if(u==="%AsyncFunction%")p=Xf("async function () {}");else if(u==="%GeneratorFunction%")p=Xf("function* () {}");else if(u==="%AsyncGeneratorFunction%")p=Xf("async function* () {}");else if(u==="%AsyncGenerator%"){var v=d("%AsyncGeneratorFunction%");v&&(p=v.prototype)}else if(u==="%AsyncIteratorPrototype%"){var w=d("%AsyncGenerator%");w&&(p=Ai(w.prototype))}return Fo[u]=p,p},jg={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jl=Kf,Hl=vb,_b=jl.call(Function.call,Array.prototype.concat),wb=jl.call(Function.apply,Array.prototype.splice),Hg=jl.call(Function.call,String.prototype.replace),Dc=jl.call(Function.call,String.prototype.slice),K=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,b=/\\(\\)?/g,E=function(d){var u=Dc(d,0,1),p=Dc(d,-1);if(u==="%"&&p!=="%")throw new Ic("invalid intrinsic syntax, expected closing `%`");if(p==="%"&&u!=="%")throw new Ic("invalid intrinsic syntax, expected opening `%`");var v=[];return Hg(d,K,function(w,S,O,U){v[v.length]=O?Hg(U,b,"$1"):S||w}),v},T=function(d,u){var p,v=d;if(Hl(jg,v)&&(v="%"+(p=jg[v])[0]+"%"),Hl(Fo,v)){var w=Fo[v];if(w===Nn&&(w=bb(v)),w===void 0&&!u)throw new Ys("intrinsic "+d+" exists, but is not available. Please file an issue!");return{alias:p,name:v,value:w}}throw new Ic("intrinsic "+d+" does not exist!")},k=function(d,u){if(typeof d!="string"||d.length===0)throw new Ys("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof u!="boolean")throw new Ys('"allowMissing" argument must be a boolean');var p=E(d),v=p.length>0?p[0]:"",w=T("%"+v+"%",u),S=w.name,O=w.value,U=!1,W=w.alias;W&&(v=W[0],wb(p,_b([0,1],W)));for(var V=1,J=!0;V<p.length;V+=1){var B=p[V],he=Dc(B,0,1),se=Dc(B,-1);if((he==='"'||he==="'"||he==="`"||se==='"'||se==="'"||se==="`")&&he!==se)throw new Ic("property names with quotes must have matching quotes");if(B!=="constructor"&&J||(U=!0),Hl(Fo,S="%"+(v+="."+B)+"%"))O=Fo[S];else if(O!=null){if(!(B in O)){if(!u)throw new Ys("base intrinsic for "+d+" exists, but the property is not available.");return}if(No&&V+1>=p.length){var ne=No(O,B);O=(J=!!ne)&&"get"in ne&&!("originalValue"in ne.get)?ne.get:O[B]}else J=Hl(O,B),O=O[B];J&&!U&&(Fo[S]=O)}}return O},P={exports:{}};(function(d){var u=Kf,p=k,v=p("%Function.prototype.apply%"),w=p("%Function.prototype.call%"),S=p("%Reflect.apply%",!0)||u.call(w,v),O=p("%Object.getOwnPropertyDescriptor%",!0),U=p("%Object.defineProperty%",!0),W=p("%Math.max%");if(U)try{U({},"a",{value:1})}catch{U=null}d.exports=function(J){var B=S(u,w,arguments);if(O&&U){var he=O(B,"length");he.configurable&&U(B,"length",{value:1+W(0,J.length-(arguments.length-1))})}return B};var V=function(){return S(u,v,arguments)};U?U(d.exports,"apply",{value:V}):d.exports.apply=V})(P);var M=k,Z=P.exports,le=Z(M("String.prototype.indexOf")),we=f(Object.freeze({__proto__:null,default:{}})),be=typeof Map=="function"&&Map.prototype,ke=Object.getOwnPropertyDescriptor&&be?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Xe=be&&ke&&typeof ke.get=="function"?ke.get:null,Tt=be&&Map.prototype.forEach,It=typeof Set=="function"&&Set.prototype,yt=Object.getOwnPropertyDescriptor&&It?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ht=It&&yt&&typeof yt.get=="function"?yt.get:null,$i=It&&Set.prototype.forEach,Ki=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap.prototype.has:null,Va=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet.prototype.has:null,Gl=typeof WeakRef=="function"&&WeakRef.prototype?WeakRef.prototype.deref:null,Gg=Boolean.prototype.valueOf,zg=Object.prototype.toString,Vg=Function.prototype.toString,Yf=String.prototype.match,zl=String.prototype.slice,Fr=String.prototype.replace,Wg=String.prototype.toUpperCase,Qs=String.prototype.toLowerCase,pA=RegExp.prototype.test,hA=Array.prototype.concat,Zs=Array.prototype.join,Zz=Array.prototype.slice,gA=Math.floor,Sb=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Tb=Object.getOwnPropertySymbols,Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Vn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Vl||!0)?Symbol.toStringTag:null,mA=Object.prototype.propertyIsEnumerable,vA=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(d){return d.__proto__}:null);function yA(d,u){if(d===1/0||d===-1/0||d!=d||d&&d>-1e3&&d<1e3||pA.call(/e/,u))return u;var p=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof d=="number"){var v=d<0?-gA(-d):gA(d);if(v!==d){var w=String(v),S=zl.call(u,w.length+1);return Fr.call(w,p,"$&_")+"."+Fr.call(Fr.call(S,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Fr.call(u,p,"$&_")}var Eb=we,bA=Eb.custom,_A=TA(bA)?bA:null;function wA(d,u,p){var v=(p.quoteStyle||u)==="double"?'"':"'";return v+d+v}function eV(d){return Fr.call(String(d),/"/g,"&quot;")}function xb(d){return!(Fu(d)!=="[object Array]"||Vn&&typeof d=="object"&&Vn in d)}function SA(d){return!(Fu(d)!=="[object RegExp]"||Vn&&typeof d=="object"&&Vn in d)}function TA(d){if(Vl)return d&&typeof d=="object"&&d instanceof Symbol;if(typeof d=="symbol")return!0;if(!d||typeof d!="object"||!Cb)return!1;try{return Cb.call(d),!0}catch{}return!1}var tV=Object.prototype.hasOwnProperty||function(d){return d in this};function Nu(d,u){return tV.call(d,u)}function Fu(d){return zg.call(d)}function CA(d,u){if(d.indexOf)return d.indexOf(u);for(var p=0,v=d.length;p<v;p++)if(d[p]===u)return p;return-1}function EA(d,u){if(d.length>u.maxStringLength){var p=d.length-u.maxStringLength,v="... "+p+" more character"+(p>1?"s":"");return EA(zl.call(d,0,u.maxStringLength),u)+v}return wA(Fr.call(Fr.call(d,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,rV),"single",u)}function rV(d){var u=d.charCodeAt(0),p={8:"b",9:"t",10:"n",12:"f",13:"r"}[u];return p?"\\"+p:"\\x"+(u<16?"0":"")+Wg.call(u.toString(16))}function Jf(d){return"Object("+d+")"}function Ab(d){return d+" { ? }"}function xA(d,u,p,v){return d+" ("+u+") {"+(v?kb(p,v):Zs.call(p,", "))+"}"}function kb(d,u){if(d.length===0)return"";var p=`
`+u.prev+u.base;return p+Zs.call(d,","+p)+`
`+u.prev}function Kg(d,u){var p=xb(d),v=[];if(p){v.length=d.length;for(var w=0;w<d.length;w++)v[w]=Nu(d,w)?u(d[w],d):""}var S,O=typeof Tb=="function"?Tb(d):[];if(Vl){S={};for(var U=0;U<O.length;U++)S["$"+O[U]]=O[U]}for(var W in d)Nu(d,W)&&(p&&String(Number(W))===W&&W<d.length||Vl&&S["$"+W]instanceof Symbol||(pA.call(/[^\w$]/,W)?v.push(u(W,d)+": "+u(d[W],d)):v.push(W+": "+u(d[W],d))));if(typeof Tb=="function")for(var V=0;V<O.length;V++)mA.call(d,O[V])&&v.push("["+u(O[V])+"]: "+u(d[O[V]],d));return v}var Ib=k,Wl=function(d,u){var p=M(d,!!u);return typeof p=="function"&&le(d,".prototype.")>-1?Z(p):p},iV=function d(u,p,v,w){var S=p||{};if(Nu(S,"quoteStyle")&&S.quoteStyle!=="single"&&S.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Nu(S,"maxStringLength")&&(typeof S.maxStringLength=="number"?S.maxStringLength<0&&S.maxStringLength!==1/0:S.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var O=!Nu(S,"customInspect")||S.customInspect;if(typeof O!="boolean"&&O!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Nu(S,"indent")&&S.indent!==null&&S.indent!=="	"&&!(parseInt(S.indent,10)===S.indent&&S.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Nu(S,"numericSeparator")&&typeof S.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var U=S.numericSeparator;if(u===void 0)return"undefined";if(u===null)return"null";if(typeof u=="boolean")return u?"true":"false";if(typeof u=="string")return EA(u,S);if(typeof u=="number"){if(u===0)return 1/0/u>0?"0":"-0";var W=String(u);return U?yA(u,W):W}if(typeof u=="bigint"){var V=String(u)+"n";return U?yA(u,V):V}var J=S.depth===void 0?5:S.depth;if(v===void 0&&(v=0),v>=J&&J>0&&typeof u=="object")return xb(u)?"[Array]":"[Object]";var B=function(ve,ct){var $e;if(ve.indent==="	")$e="	";else{if(!(typeof ve.indent=="number"&&ve.indent>0))return null;$e=Zs.call(Array(ve.indent+1)," ")}return{base:$e,prev:Zs.call(Array(ct+1),$e)}}(S,v);if(w===void 0)w=[];else if(CA(w,u)>=0)return"[Circular]";function he(ve,ct,$e){if(ct&&(w=Zz.call(w)).push(ct),$e){var We={depth:S.depth};return Nu(S,"quoteStyle")&&(We.quoteStyle=S.quoteStyle),d(ve,We,v+1,w)}return d(ve,S,v+1,w)}if(typeof u=="function"&&!SA(u)){var se=function(ve){if(ve.name)return ve.name;var ct=Yf.call(Vg.call(ve),/^function\s*([\w$]+)/);return ct?ct[1]:null}(u),ne=Kg(u,he);return"[Function"+(se?": "+se:" (anonymous)")+"]"+(ne.length>0?" { "+Zs.call(ne,", ")+" }":"")}if(TA(u)){var oe=Vl?Fr.call(String(u),/^(Symbol\(.*\))_[^)]*$/,"$1"):Cb.call(u);return typeof u!="object"||Vl?oe:Jf(oe)}if(function(ve){return!ve||typeof ve!="object"?!1:typeof HTMLElement<"u"&&ve instanceof HTMLElement?!0:typeof ve.nodeName=="string"&&typeof ve.getAttribute=="function"}(u)){for(var ue="<"+Qs.call(String(u.nodeName)),Ie=u.attributes||[],Ve=0;Ve<Ie.length;Ve++)ue+=" "+Ie[Ve].name+"="+wA(eV(Ie[Ve].value),"double",S);return ue+=">",u.childNodes&&u.childNodes.length&&(ue+="..."),ue+="</"+Qs.call(String(u.nodeName))+">"}if(xb(u)){if(u.length===0)return"[]";var it=Kg(u,he);return B&&!function(ve){for(var ct=0;ct<ve.length;ct++)if(CA(ve[ct],`
`)>=0)return!1;return!0}(it)?"["+kb(it,B)+"]":"[ "+Zs.call(it,", ")+" ]"}if(function(ve){return!(Fu(ve)!=="[object Error]"||Vn&&typeof ve=="object"&&Vn in ve)}(u)){var dt=Kg(u,he);return"cause"in Error.prototype||!("cause"in u)||mA.call(u,"cause")?dt.length===0?"["+String(u)+"]":"{ ["+String(u)+"] "+Zs.call(dt,", ")+" }":"{ ["+String(u)+"] "+Zs.call(hA.call("[cause]: "+he(u.cause),dt),", ")+" }"}if(typeof u=="object"&&O){if(_A&&typeof u[_A]=="function"&&Eb)return Eb(u,{depth:J-v});if(O!=="symbol"&&typeof u.inspect=="function")return u.inspect()}if(function(ve){if(!Xe||!ve||typeof ve!="object")return!1;try{Xe.call(ve);try{Ht.call(ve)}catch{return!0}return ve instanceof Map}catch{}return!1}(u)){var et=[];return Tt&&Tt.call(u,function(ve,ct){et.push(he(ct,u,!0)+" => "+he(ve,u))}),xA("Map",Xe.call(u),et,B)}if(function(ve){if(!Ht||!ve||typeof ve!="object")return!1;try{Ht.call(ve);try{Xe.call(ve)}catch{return!0}return ve instanceof Set}catch{}return!1}(u)){var me=[];return $i&&$i.call(u,function(ve){me.push(he(ve,u))}),xA("Set",Ht.call(u),me,B)}if(function(ve){if(!Ki||!ve||typeof ve!="object")return!1;try{Ki.call(ve,Ki);try{Va.call(ve,Va)}catch{return!0}return ve instanceof WeakMap}catch{}return!1}(u))return Ab("WeakMap");if(function(ve){if(!Va||!ve||typeof ve!="object")return!1;try{Va.call(ve,Va);try{Ki.call(ve,Ki)}catch{return!0}return ve instanceof WeakSet}catch{}return!1}(u))return Ab("WeakSet");if(function(ve){if(!Gl||!ve||typeof ve!="object")return!1;try{return Gl.call(ve),!0}catch{}return!1}(u))return Ab("WeakRef");if(function(ve){return!(Fu(ve)!=="[object Number]"||Vn&&typeof ve=="object"&&Vn in ve)}(u))return Jf(he(Number(u)));if(function(ve){if(!ve||typeof ve!="object"||!Sb)return!1;try{return Sb.call(ve),!0}catch{}return!1}(u))return Jf(he(Sb.call(u)));if(function(ve){return!(Fu(ve)!=="[object Boolean]"||Vn&&typeof ve=="object"&&Vn in ve)}(u))return Jf(Gg.call(u));if(function(ve){return!(Fu(ve)!=="[object String]"||Vn&&typeof ve=="object"&&Vn in ve)}(u))return Jf(he(String(u)));if(typeof window<"u"&&u===window)return"{ [object Window] }";if(u===l)return"{ [object globalThis] }";if(!function(ve){return!(Fu(ve)!=="[object Date]"||Vn&&typeof ve=="object"&&Vn in ve)}(u)&&!SA(u)){var Me=Kg(u,he),Pe=vA?vA(u)===Object.prototype:u instanceof Object||u.constructor===Object,Qe=u instanceof Object?"":"null prototype",Le=!Pe&&Vn&&Object(u)===u&&Vn in u?zl.call(Fu(u),8,-1):Qe?"Object":"",Ue=(Pe||typeof u.constructor!="function"?"":u.constructor.name?u.constructor.name+" ":"")+(Le||Qe?"["+Zs.call(hA.call([],Le||[],Qe||[]),": ")+"] ":"");return Me.length===0?Ue+"{}":B?Ue+"{"+kb(Me,B)+"}":Ue+"{ "+Zs.call(Me,", ")+" }"}return String(u)},nV=Ib("%TypeError%"),Xg=Ib("%WeakMap%",!0),Yg=Ib("%Map%",!0),aV=Wl("WeakMap.prototype.get",!0),sV=Wl("WeakMap.prototype.set",!0),oV=Wl("WeakMap.prototype.has",!0),uV=Wl("Map.prototype.get",!0),cV=Wl("Map.prototype.set",!0),lV=Wl("Map.prototype.has",!0),Db=function(d,u){for(var p,v=d;(p=v.next)!==null;v=p)if(p.key===u)return v.next=p.next,p.next=d.next,d.next=p,p},dV=String.prototype.replace,fV=/%20/g,AA="RFC3986",Ob={default:AA,formatters:{RFC1738:function(d){return dV.call(d,fV,"+")},RFC3986:function(d){return String(d)}},RFC1738:"RFC1738",RFC3986:AA},pV=Ob,Pb=Object.prototype.hasOwnProperty,Oc=Array.isArray,eo=function(){for(var d=[],u=0;u<256;++u)d.push("%"+((u<16?"0":"")+u.toString(16)).toUpperCase());return d}(),kA=function(d,u){for(var p=u&&u.plainObjects?Object.create(null):{},v=0;v<d.length;++v)d[v]!==void 0&&(p[v]=d[v]);return p},IA={arrayToObject:kA,assign:function(d,u){return Object.keys(u).reduce(function(p,v){return p[v]=u[v],p},d)},combine:function(d,u){return[].concat(d,u)},compact:function(d){for(var u=[{obj:{o:d},prop:"o"}],p=[],v=0;v<u.length;++v)for(var w=u[v],S=w.obj[w.prop],O=Object.keys(S),U=0;U<O.length;++U){var W=O[U],V=S[W];typeof V=="object"&&V!==null&&p.indexOf(V)===-1&&(u.push({obj:S,prop:W}),p.push(V))}return function(J){for(;J.length>1;){var B=J.pop(),he=B.obj[B.prop];if(Oc(he)){for(var se=[],ne=0;ne<he.length;++ne)he[ne]!==void 0&&se.push(he[ne]);B.obj[B.prop]=se}}}(u),d},decode:function(d,u,p){var v=d.replace(/\+/g," ");if(p==="iso-8859-1")return v.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(v)}catch{return v}},encode:function(d,u,p,v,w){if(d.length===0)return d;var S=d;if(typeof d=="symbol"?S=Symbol.prototype.toString.call(d):typeof d!="string"&&(S=String(d)),p==="iso-8859-1")return escape(S).replace(/%u[0-9a-f]{4}/gi,function(V){return"%26%23"+parseInt(V.slice(2),16)+"%3B"});for(var O="",U=0;U<S.length;++U){var W=S.charCodeAt(U);W===45||W===46||W===95||W===126||W>=48&&W<=57||W>=65&&W<=90||W>=97&&W<=122||w===pV.RFC1738&&(W===40||W===41)?O+=S.charAt(U):W<128?O+=eo[W]:W<2048?O+=eo[192|W>>6]+eo[128|63&W]:W<55296||W>=57344?O+=eo[224|W>>12]+eo[128|W>>6&63]+eo[128|63&W]:(U+=1,W=65536+((1023&W)<<10|1023&S.charCodeAt(U)),O+=eo[240|W>>18]+eo[128|W>>12&63]+eo[128|W>>6&63]+eo[128|63&W])}return O},isBuffer:function(d){return!(!d||typeof d!="object")&&!!(d.constructor&&d.constructor.isBuffer&&d.constructor.isBuffer(d))},isRegExp:function(d){return Object.prototype.toString.call(d)==="[object RegExp]"},maybeMap:function(d,u){if(Oc(d)){for(var p=[],v=0;v<d.length;v+=1)p.push(u(d[v]));return p}return u(d)},merge:function d(u,p,v){if(!p)return u;if(typeof p!="object"){if(Oc(u))u.push(p);else{if(!u||typeof u!="object")return[u,p];(v&&(v.plainObjects||v.allowPrototypes)||!Pb.call(Object.prototype,p))&&(u[p]=!0)}return u}if(!u||typeof u!="object")return[u].concat(p);var w=u;return Oc(u)&&!Oc(p)&&(w=kA(u,v)),Oc(u)&&Oc(p)?(p.forEach(function(S,O){if(Pb.call(u,O)){var U=u[O];U&&typeof U=="object"&&S&&typeof S=="object"?u[O]=d(U,S,v):u.push(S)}else u[O]=S}),u):Object.keys(p).reduce(function(S,O){var U=p[O];return Pb.call(S,O)?S[O]=d(S[O],U,v):S[O]=U,S},w)}},DA=function(){var d,u,p,v={assert:function(w){if(!v.has(w))throw new nV("Side channel does not contain "+iV(w))},get:function(w){if(Xg&&w&&(typeof w=="object"||typeof w=="function")){if(d)return aV(d,w)}else if(Yg){if(u)return uV(u,w)}else if(p)return function(S,O){var U=Db(S,O);return U&&U.value}(p,w)},has:function(w){if(Xg&&w&&(typeof w=="object"||typeof w=="function")){if(d)return oV(d,w)}else if(Yg){if(u)return lV(u,w)}else if(p)return function(S,O){return!!Db(S,O)}(p,w);return!1},set:function(w,S){Xg&&w&&(typeof w=="object"||typeof w=="function")?(d||(d=new Xg),sV(d,w,S)):Yg?(u||(u=new Yg),cV(u,w,S)):(p||(p={key:{},next:null}),function(O,U,W){var V=Db(O,U);V?V.value=W:O.next={key:U,next:O.next,value:W}}(p,w,S))}};return v},Jg=IA,Qf=Ob,hV=Object.prototype.hasOwnProperty,OA={brackets:function(d){return d+"[]"},comma:"comma",indices:function(d,u){return d+"["+u+"]"},repeat:function(d){return d}},Mo=Array.isArray,gV=Array.prototype.push,PA=function(d,u){gV.apply(d,Mo(u)?u:[u])},mV=Date.prototype.toISOString,RA=Qf.default,Wn={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Jg.encode,encodeValuesOnly:!1,format:RA,formatter:Qf.formatters[RA],indices:!1,serializeDate:function(d){return mV.call(d)},skipNulls:!1,strictNullHandling:!1},Rb={},vV=function d(u,p,v,w,S,O,U,W,V,J,B,he,se,ne,oe,ue){for(var Ie,Ve=u,it=ue,dt=0,et=!1;(it=it.get(Rb))!==void 0&&!et;){var me=it.get(u);if(dt+=1,me!==void 0){if(me===dt)throw new RangeError("Cyclic object value");et=!0}it.get(Rb)===void 0&&(dt=0)}if(typeof W=="function"?Ve=W(p,Ve):Ve instanceof Date?Ve=B(Ve):v==="comma"&&Mo(Ve)&&(Ve=Jg.maybeMap(Ve,function(st){return st instanceof Date?B(st):st})),Ve===null){if(S)return U&&!ne?U(p,Wn.encoder,oe,"key",he):p;Ve=""}if(typeof(Ie=Ve)=="string"||typeof Ie=="number"||typeof Ie=="boolean"||typeof Ie=="symbol"||typeof Ie=="bigint"||Jg.isBuffer(Ve))return U?[se(ne?p:U(p,Wn.encoder,oe,"key",he))+"="+se(U(Ve,Wn.encoder,oe,"value",he))]:[se(p)+"="+se(String(Ve))];var Me,Pe=[];if(Ve===void 0)return Pe;if(v==="comma"&&Mo(Ve))ne&&U&&(Ve=Jg.maybeMap(Ve,U)),Me=[{value:Ve.length>0?Ve.join(",")||null:void 0}];else if(Mo(W))Me=W;else{var Qe=Object.keys(Ve);Me=V?Qe.sort(V):Qe}for(var Le=w&&Mo(Ve)&&Ve.length===1?p+"[]":p,Ue=0;Ue<Me.length;++Ue){var ve=Me[Ue],ct=typeof ve=="object"&&ve.value!==void 0?ve.value:Ve[ve];if(!O||ct!==null){var $e=Mo(Ve)?typeof v=="function"?v(Le,ve):Le:Le+(J?"."+ve:"["+ve+"]");ue.set(u,dt);var We=DA();We.set(Rb,ue),PA(Pe,d(ct,$e,v,w,S,O,v==="comma"&&ne&&Mo(Ve)?null:U,W,V,J,B,he,se,ne,oe,We))}}return Pe},Kl=IA,Lb=Object.prototype.hasOwnProperty,yV=Array.isArray,Sn={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Kl.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},bV=function(d){return d.replace(/&#(\d+);/g,function(u,p){return String.fromCharCode(parseInt(p,10))})},LA=function(d,u){return d&&typeof d=="string"&&u.comma&&d.indexOf(",")>-1?d.split(","):d},_V=function(d,u,p,v){if(d){var w=p.allowDots?d.replace(/\.([^.[]+)/g,"[$1]"):d,S=/(\[[^[\]]*])/g,O=p.depth>0&&/(\[[^[\]]*])/.exec(w),U=O?w.slice(0,O.index):w,W=[];if(U){if(!p.plainObjects&&Lb.call(Object.prototype,U)&&!p.allowPrototypes)return;W.push(U)}for(var V=0;p.depth>0&&(O=S.exec(w))!==null&&V<p.depth;){if(V+=1,!p.plainObjects&&Lb.call(Object.prototype,O[1].slice(1,-1))&&!p.allowPrototypes)return;W.push(O[1])}return O&&W.push("["+w.slice(O.index)+"]"),function(J,B,he,se){for(var ne=se?B:LA(B,he),oe=J.length-1;oe>=0;--oe){var ue,Ie=J[oe];if(Ie==="[]"&&he.parseArrays)ue=[].concat(ne);else{ue=he.plainObjects?Object.create(null):{};var Ve=Ie.charAt(0)==="["&&Ie.charAt(Ie.length-1)==="]"?Ie.slice(1,-1):Ie,it=parseInt(Ve,10);he.parseArrays||Ve!==""?!isNaN(it)&&Ie!==Ve&&String(it)===Ve&&it>=0&&he.parseArrays&&it<=he.arrayLimit?(ue=[])[it]=ne:Ve!=="__proto__"&&(ue[Ve]=ne):ue={0:ne}}ne=ue}return ne}(W,u,p,v)}},wV=function(d,u){var p,v=d,w=function(ne){if(!ne)return Wn;if(ne.encoder!==null&&ne.encoder!==void 0&&typeof ne.encoder!="function")throw new TypeError("Encoder has to be a function.");var oe=ne.charset||Wn.charset;if(ne.charset!==void 0&&ne.charset!=="utf-8"&&ne.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var ue=Qf.default;if(ne.format!==void 0){if(!hV.call(Qf.formatters,ne.format))throw new TypeError("Unknown format option provided.");ue=ne.format}var Ie=Qf.formatters[ue],Ve=Wn.filter;return(typeof ne.filter=="function"||Mo(ne.filter))&&(Ve=ne.filter),{addQueryPrefix:typeof ne.addQueryPrefix=="boolean"?ne.addQueryPrefix:Wn.addQueryPrefix,allowDots:ne.allowDots===void 0?Wn.allowDots:!!ne.allowDots,charset:oe,charsetSentinel:typeof ne.charsetSentinel=="boolean"?ne.charsetSentinel:Wn.charsetSentinel,delimiter:ne.delimiter===void 0?Wn.delimiter:ne.delimiter,encode:typeof ne.encode=="boolean"?ne.encode:Wn.encode,encoder:typeof ne.encoder=="function"?ne.encoder:Wn.encoder,encodeValuesOnly:typeof ne.encodeValuesOnly=="boolean"?ne.encodeValuesOnly:Wn.encodeValuesOnly,filter:Ve,format:ue,formatter:Ie,serializeDate:typeof ne.serializeDate=="function"?ne.serializeDate:Wn.serializeDate,skipNulls:typeof ne.skipNulls=="boolean"?ne.skipNulls:Wn.skipNulls,sort:typeof ne.sort=="function"?ne.sort:null,strictNullHandling:typeof ne.strictNullHandling=="boolean"?ne.strictNullHandling:Wn.strictNullHandling}}(u);typeof w.filter=="function"?v=(0,w.filter)("",v):Mo(w.filter)&&(p=w.filter);var S,O=[];if(typeof v!="object"||v===null)return"";S=u&&u.arrayFormat in OA?u.arrayFormat:u&&"indices"in u?u.indices?"indices":"repeat":"indices";var U=OA[S];if(u&&"commaRoundTrip"in u&&typeof u.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var W=U==="comma"&&u&&u.commaRoundTrip;p||(p=Object.keys(v)),w.sort&&p.sort(w.sort);for(var V=DA(),J=0;J<p.length;++J){var B=p[J];w.skipNulls&&v[B]===null||PA(O,vV(v[B],B,U,W,w.strictNullHandling,w.skipNulls,w.encode?w.encoder:null,w.filter,w.sort,w.allowDots,w.serializeDate,w.format,w.formatter,w.encodeValuesOnly,w.charset,V))}var he=O.join(w.delimiter),se=w.addQueryPrefix===!0?"?":"";return w.charsetSentinel&&(w.charset==="iso-8859-1"?se+="utf8=%26%2310003%3B&":se+="utf8=%E2%9C%93&"),he.length>0?se+he:""},SV={formats:Ob,parse:function(d,u){var p=function(V){if(!V)return Sn;if(V.decoder!==null&&V.decoder!==void 0&&typeof V.decoder!="function")throw new TypeError("Decoder has to be a function.");if(V.charset!==void 0&&V.charset!=="utf-8"&&V.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var J=V.charset===void 0?Sn.charset:V.charset;return{allowDots:V.allowDots===void 0?Sn.allowDots:!!V.allowDots,allowPrototypes:typeof V.allowPrototypes=="boolean"?V.allowPrototypes:Sn.allowPrototypes,allowSparse:typeof V.allowSparse=="boolean"?V.allowSparse:Sn.allowSparse,arrayLimit:typeof V.arrayLimit=="number"?V.arrayLimit:Sn.arrayLimit,charset:J,charsetSentinel:typeof V.charsetSentinel=="boolean"?V.charsetSentinel:Sn.charsetSentinel,comma:typeof V.comma=="boolean"?V.comma:Sn.comma,decoder:typeof V.decoder=="function"?V.decoder:Sn.decoder,delimiter:typeof V.delimiter=="string"||Kl.isRegExp(V.delimiter)?V.delimiter:Sn.delimiter,depth:typeof V.depth=="number"||V.depth===!1?+V.depth:Sn.depth,ignoreQueryPrefix:V.ignoreQueryPrefix===!0,interpretNumericEntities:typeof V.interpretNumericEntities=="boolean"?V.interpretNumericEntities:Sn.interpretNumericEntities,parameterLimit:typeof V.parameterLimit=="number"?V.parameterLimit:Sn.parameterLimit,parseArrays:V.parseArrays!==!1,plainObjects:typeof V.plainObjects=="boolean"?V.plainObjects:Sn.plainObjects,strictNullHandling:typeof V.strictNullHandling=="boolean"?V.strictNullHandling:Sn.strictNullHandling}}(u);if(d===""||d==null)return p.plainObjects?Object.create(null):{};for(var v=typeof d=="string"?function(V,J){var B,he={__proto__:null},se=J.ignoreQueryPrefix?V.replace(/^\?/,""):V,ne=J.parameterLimit===1/0?void 0:J.parameterLimit,oe=se.split(J.delimiter,ne),ue=-1,Ie=J.charset;if(J.charsetSentinel)for(B=0;B<oe.length;++B)oe[B].indexOf("utf8=")===0&&(oe[B]==="utf8=%E2%9C%93"?Ie="utf-8":oe[B]==="utf8=%26%2310003%3B"&&(Ie="iso-8859-1"),ue=B,B=oe.length);for(B=0;B<oe.length;++B)if(B!==ue){var Ve,it,dt=oe[B],et=dt.indexOf("]="),me=et===-1?dt.indexOf("="):et+1;me===-1?(Ve=J.decoder(dt,Sn.decoder,Ie,"key"),it=J.strictNullHandling?null:""):(Ve=J.decoder(dt.slice(0,me),Sn.decoder,Ie,"key"),it=Kl.maybeMap(LA(dt.slice(me+1),J),function(Me){return J.decoder(Me,Sn.decoder,Ie,"value")})),it&&J.interpretNumericEntities&&Ie==="iso-8859-1"&&(it=bV(it)),dt.indexOf("[]=")>-1&&(it=yV(it)?[it]:it),Lb.call(he,Ve)?he[Ve]=Kl.combine(he[Ve],it):he[Ve]=it}return he}(d,p):d,w=p.plainObjects?Object.create(null):{},S=Object.keys(v),O=0;O<S.length;++O){var U=S[O],W=_V(U,v[U],p,typeof d=="string");w=Kl.merge(w,W,p)}return p.allowSparse===!0?w:Kl.compact(w)},stringify:wV},Pc={};(function(d){function u(v,w){var S=typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(!S){if(Array.isArray(v)||(S=function(B,he){if(B){if(typeof B=="string")return p(B,he);var se=Object.prototype.toString.call(B).slice(8,-1);if(se==="Object"&&B.constructor&&(se=B.constructor.name),se==="Map"||se==="Set")return Array.from(B);if(se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se))return p(B,he)}}(v))||w&&v&&typeof v.length=="number"){S&&(v=S);var O=0,U=function(){};return{s:U,n:function(){return O>=v.length?{done:!0}:{done:!1,value:v[O++]}},e:function(B){throw B},f:U}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W,V=!0,J=!1;return{s:function(){S=S.call(v)},n:function(){var B=S.next();return V=B.done,B},e:function(B){J=!0,W=B},f:function(){try{V||S.return==null||S.return()}finally{if(J)throw W}}}}function p(v,w){(w==null||w>v.length)&&(w=v.length);for(var S=0,O=new Array(w);S<w;S++)O[S]=v[S];return O}d.type=v=>v.split(/ *; */).shift(),d.params=v=>{let w={};var S,O=u(v.split(/ *; */));try{for(O.s();!(S=O.n()).done;){let U=S.value.split(/ *= */),W=U.shift(),V=U.shift();W&&V&&(w[W]=V)}}catch(U){O.e(U)}finally{O.f()}return w},d.parseLinks=v=>{let w={};var S,O=u(v.split(/ *, */));try{for(O.s();!(S=O.n()).done;){let U=S.value.split(/ *; */),W=U[0].slice(1,-1);w[U[1].split(/ *= */)[1].slice(1,-1)]=W}}catch(U){O.e(U)}finally{O.f()}return w},d.cleanHeader=(v,w)=>(delete v["content-type"],delete v["content-length"],delete v["transfer-encoding"],delete v.host,w&&(delete v.authorization,delete v.cookie),v),d.isObject=v=>v!==null&&typeof v=="object",d.hasOwn=Object.hasOwn||function(v,w){if(v==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(new Object(v),w)},d.mixin=(v,w)=>{for(let S in w)d.hasOwn(w,S)&&(v[S]=w[S])}})(Pc);let NA=we,Qg=Pc.isObject,Zf=Pc.hasOwn;var TV=kr;function kr(){}kr.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},kr.prototype.parse=function(d){return this._parser=d,this},kr.prototype.responseType=function(d){return this._responseType=d,this},kr.prototype.serialize=function(d){return this._serializer=d,this},kr.prototype.timeout=function(d){if(!d||typeof d!="object")return this._timeout=d,this._responseTimeout=0,this._uploadTimeout=0,this;for(let u in d)if(Zf(d,u))switch(u){case"deadline":this._timeout=d.deadline;break;case"response":this._responseTimeout=d.response;break;case"upload":this._uploadTimeout=d.upload;break;default:console.warn("Unknown timeout option",u)}return this},kr.prototype.retry=function(d,u){return arguments.length!==0&&d!==!0||(d=1),d<=0&&(d=0),this._maxRetries=d,this._retries=0,this._retryCallback=u,this};let CV=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),EV=new Set([408,413,429,500,502,503,504,521,522,524]);kr.prototype._shouldRetry=function(d,u){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{let p=this._retryCallback(d,u);if(p===!0)return!0;if(p===!1)return!1}catch(p){console.error(p)}return!!(u&&u.status&&EV.has(u.status)||d&&(d.code&&CV.has(d.code)||d.timeout&&d.code==="ECONNABORTED"||d.crossDomain))},kr.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},kr.prototype.then=function(d,u){if(!this._fullfilledPromise){let p=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((v,w)=>{p.on("abort",()=>{if(this._maxRetries&&this._maxRetries>this._retries)return;if(this.timedout&&this.timedoutError)return void w(this.timedoutError);let S=new Error("Aborted");S.code="ABORTED",S.status=this.status,S.method=this.method,S.url=this.url,w(S)}),p.end((S,O)=>{S?w(S):v(O)})})}return this._fullfilledPromise.then(d,u)},kr.prototype.catch=function(d){return this.then(void 0,d)},kr.prototype.use=function(d){return d(this),this},kr.prototype.ok=function(d){if(typeof d!="function")throw new Error("Callback required");return this._okCallback=d,this},kr.prototype._isResponseOK=function(d){return!!d&&(this._okCallback?this._okCallback(d):d.status>=200&&d.status<300)},kr.prototype.get=function(d){return this._header[d.toLowerCase()]},kr.prototype.getHeader=kr.prototype.get,kr.prototype.set=function(d,u){if(Qg(d)){for(let p in d)Zf(d,p)&&this.set(p,d[p]);return this}return this._header[d.toLowerCase()]=u,this.header[d]=u,this},kr.prototype.unset=function(d){return delete this._header[d.toLowerCase()],delete this.header[d],this},kr.prototype.field=function(d,u,p){if(d==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(Qg(d)){for(let v in d)Zf(d,v)&&this.field(v,d[v]);return this}if(Array.isArray(u)){for(let v in u)Zf(u,v)&&this.field(d,u[v]);return this}if(u==null)throw new Error(".field(name, val) val can not be empty");return typeof u=="boolean"&&(u=String(u)),p?this._getFormData().append(d,u,p):this._getFormData().append(d,u),this},kr.prototype.abort=function(){if(this._aborted)return this;if(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req){if(NA.gte(process.version,"v13.0.0")&&NA.lt(process.version,"v14.0.0"))throw new Error("Superagent does not work in v13 properly with abort() due to Node.js core changes");this.req.abort()}return this.clearTimeout(),this.emit("abort"),this},kr.prototype._auth=function(d,u,p,v){switch(p.type){case"basic":this.set("Authorization",`Basic ${v(`${d}:${u}`)}`);break;case"auto":this.username=d,this.password=u;break;case"bearer":this.set("Authorization",`Bearer ${d}`)}return this},kr.prototype.withCredentials=function(d){return d===void 0&&(d=!0),this._withCredentials=d,this},kr.prototype.redirects=function(d){return this._maxRedirects=d,this},kr.prototype.maxResponseSize=function(d){if(typeof d!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=d,this},kr.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},kr.prototype.send=function(d){let u=Qg(d),p=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(u&&!this._data)Array.isArray(d)?this._data=[]:this._isHost(d)||(this._data={});else if(d&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(u&&Qg(this._data))for(let v in d){if(typeof d[v]=="bigint"&&!d[v].toJSON)throw new Error("Cannot serialize BigInt value to json");Zf(d,v)&&(this._data[v]=d[v])}else{if(typeof d=="bigint")throw new Error("Cannot send value of type BigInt");typeof d=="string"?(p||this.type("form"),p=this._header["content-type"],p&&(p=p.toLowerCase().trim()),this._data=p==="application/x-www-form-urlencoded"?this._data?`${this._data}&${d}`:d:(this._data||"")+d):this._data=d}return!u||this._isHost(d)||p||this.type("json"),this},kr.prototype.sortQuery=function(d){return this._sort=d===void 0||d,this},kr.prototype._finalizeQueryString=function(){let d=this._query.join("&");if(d&&(this.url+=(this.url.includes("?")?"&":"?")+d),this._query.length=0,this._sort){let u=this.url.indexOf("?");if(u>=0){let p=this.url.slice(u+1).split("&");typeof this._sort=="function"?p.sort(this._sort):p.sort(),this.url=this.url.slice(0,u)+"?"+p.join("&")}}},kr.prototype._appendQueryString=()=>{console.warn("Unsupported")},kr.prototype._timeoutError=function(d,u,p){if(this._aborted)return;let v=new Error(`${d+u}ms exceeded`);v.timeout=u,v.code="ECONNABORTED",v.errno=p,this.timedout=!0,this.timedoutError=v,this.abort(),this.callback(v)},kr.prototype._setTimeouts=function(){let d=this;this._timeout&&!this._timer&&(this._timer=setTimeout(()=>{d._timeoutError("Timeout of ",d._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(()=>{d._timeoutError("Response timeout of ",d._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};let Nb=Pc;var xV=Zg;function Zg(){}function AV(d,u){var p=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(!p){if(Array.isArray(d)||(p=function(W,V){if(W){if(typeof W=="string")return FA(W,V);var J=Object.prototype.toString.call(W).slice(8,-1);if(J==="Object"&&W.constructor&&(J=W.constructor.name),J==="Map"||J==="Set")return Array.from(W);if(J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return FA(W,V)}}(d))||u&&d&&typeof d.length=="number"){p&&(d=p);var v=0,w=function(){};return{s:w,n:function(){return v>=d.length?{done:!0}:{done:!1,value:d[v++]}},e:function(W){throw W},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,O=!0,U=!1;return{s:function(){p=p.call(d)},n:function(){var W=p.next();return O=W.done,W},e:function(W){U=!0,S=W},f:function(){try{O||p.return==null||p.return()}finally{if(U)throw S}}}}function FA(d,u){(u==null||u>d.length)&&(u=d.length);for(var p=0,v=new Array(u);p<u;p++)v[p]=d[p];return v}function Fb(){this._defaults=[]}Zg.prototype.get=function(d){return this.header[d.toLowerCase()]},Zg.prototype._setHeaderProperties=function(d){let u=d["content-type"]||"";this.type=Nb.type(u);let p=Nb.params(u);for(let v in p)Object.prototype.hasOwnProperty.call(p,v)&&(this[v]=p[v]);this.links={};try{d.link&&(this.links=Nb.parseLinks(d.link))}catch{}},Zg.prototype._setStatusProperties=function(d){let u=Math.trunc(d/100);this.statusCode=d,this.status=this.statusCode,this.statusType=u,this.info=u===1,this.ok=u===2,this.redirect=u===3,this.clientError=u===4,this.serverError=u===5,this.error=(u===4||u===5)&&this.toError(),this.created=d===201,this.accepted=d===202,this.noContent=d===204,this.badRequest=d===400,this.unauthorized=d===401,this.notAcceptable=d===406,this.forbidden=d===403,this.notFound=d===404,this.unprocessableEntity=d===422};for(var Mb=0,MA=["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"];Mb<MA.length;Mb++){let d=MA[Mb];Fb.prototype[d]=function(){for(var u=arguments.length,p=new Array(u),v=0;v<u;v++)p[v]=arguments[v];return this._defaults.push({fn:d,args:p}),this}}Fb.prototype._setDefaults=function(d){var u,p=AV(this._defaults);try{for(p.s();!(u=p.n()).done;){let v=u.value;d[v.fn](...v.args)}}catch(v){p.e(v)}finally{p.f()}};var kV=Fb;(function(d,u){function p(Le,Ue){var ve=typeof Symbol<"u"&&Le[Symbol.iterator]||Le["@@iterator"];if(!ve){if(Array.isArray(Le)||(ve=function(br,Di){if(br){if(typeof br=="string")return v(br,Di);var Oi=Object.prototype.toString.call(br).slice(8,-1);if(Oi==="Object"&&br.constructor&&(Oi=br.constructor.name),Oi==="Map"||Oi==="Set")return Array.from(br);if(Oi==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oi))return v(br,Di)}}(Le))||Ue&&Le&&typeof Le.length=="number"){ve&&(Le=ve);var ct=0,$e=function(){};return{s:$e,n:function(){return ct>=Le.length?{done:!0}:{done:!1,value:Le[ct++]}},e:function(br){throw br},f:$e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var We,st=!0,vt=!1;return{s:function(){ve=ve.call(Le)},n:function(){var br=ve.next();return st=br.done,br},e:function(br){vt=!0,We=br},f:function(){try{st||ve.return==null||ve.return()}finally{if(vt)throw We}}}}function v(Le,Ue){(Ue==null||Ue>Le.length)&&(Ue=Le.length);for(var ve=0,ct=new Array(Ue);ve<Ue;ve++)ct[ve]=Le[ve];return ct}let w;typeof window<"u"?w=window:typeof self>"u"?(console.warn("Using browser-only version of superagent in non-browser environment"),w=void 0):w=self;let S=Mg.exports,O=hb,U=SV,W=TV,V=Pc.isObject,J=Pc.mixin,B=Pc.hasOwn,he=xV,se=kV;function ne(){}d.exports=function(Le,Ue){return typeof Ue=="function"?new u.Request("GET",Le).end(Ue):arguments.length===1?new u.Request("GET",Le):new u.Request(Le,Ue)};let oe=u=d.exports;u.Request=me,oe.getXHR=()=>{if(w.XMLHttpRequest)return new w.XMLHttpRequest;throw new Error("Browser-only version of superagent could not find XHR")};let ue="".trim?Le=>Le.trim():Le=>Le.replace(/(^\s*|\s*$)/g,"");function Ie(Le){if(!V(Le))return Le;let Ue=[];for(let ve in Le)B(Le,ve)&&Ve(Ue,ve,Le[ve]);return Ue.join("&")}function Ve(Le,Ue,ve){if(ve!==void 0)if(ve!==null)if(Array.isArray(ve)){var ct,$e=p(ve);try{for($e.s();!(ct=$e.n()).done;)Ve(Le,Ue,ct.value)}catch(We){$e.e(We)}finally{$e.f()}}else if(V(ve))for(let We in ve)B(ve,We)&&Ve(Le,`${Ue}[${We}]`,ve[We]);else Le.push(encodeURI(Ue)+"="+encodeURIComponent(ve));else Le.push(encodeURI(Ue))}function it(Le){let Ue={},ve=Le.split("&"),ct,$e;for(let We=0,st=ve.length;We<st;++We)ct=ve[We],$e=ct.indexOf("="),$e===-1?Ue[decodeURIComponent(ct)]="":Ue[decodeURIComponent(ct.slice(0,$e))]=decodeURIComponent(ct.slice($e+1));return Ue}function dt(Le){return/[/+]json($|[^-\w])/i.test(Le)}function et(Le){this.req=Le,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||this.xhr.responseType===void 0?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;let Ue=this.xhr.status;Ue===1223&&(Ue=204),this._setStatusProperties(Ue),this.headers=function(ve){let ct=ve.split(/\r?\n/),$e={},We,st,vt,br;for(let Di=0,Oi=ct.length;Di<Oi;++Di)st=ct[Di],We=st.indexOf(":"),We!==-1&&(vt=st.slice(0,We).toLowerCase(),br=ue(st.slice(We+1)),$e[vt]=br);return $e}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&Le._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}function me(Le,Ue){let ve=this;this._query=this._query||[],this.method=Le,this.url=Ue,this.header={},this._header={},this.on("end",()=>{let ct,$e=null,We=null;try{We=new et(ve)}catch(st){return $e=new Error("Parser is unable to parse the response"),$e.parse=!0,$e.original=st,ve.xhr?($e.rawResponse=ve.xhr.responseType===void 0?ve.xhr.responseText:ve.xhr.response,$e.status=ve.xhr.status?ve.xhr.status:null,$e.statusCode=$e.status):($e.rawResponse=null,$e.status=null),ve.callback($e)}ve.emit("response",We);try{ve._isResponseOK(We)||(ct=new Error(We.statusText||We.text||"Unsuccessful HTTP response"))}catch(st){ct=st}ct?(ct.original=$e,ct.response=We,ct.status=ct.status||We.status,ve.callback(ct,We)):ve.callback(null,We)})}oe.serializeObject=Ie,oe.parseString=it,oe.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},oe.serialize={"application/x-www-form-urlencoded":U.stringify,"application/json":O},oe.parse={"application/x-www-form-urlencoded":it,"application/json":JSON.parse},J(et.prototype,he.prototype),et.prototype._parseBody=function(Le){let Ue=oe.parse[this.type];return this.req._parser?this.req._parser(this,Le):(!Ue&&dt(this.type)&&(Ue=oe.parse["application/json"]),Ue&&Le&&(Le.length>0||Le instanceof Object)?Ue(Le):null)},et.prototype.toError=function(){let Le=this.req,Ue=Le.method,ve=Le.url,ct=`cannot ${Ue} ${ve} (${this.status})`,$e=new Error(ct);return $e.status=this.status,$e.method=Ue,$e.url=ve,$e},oe.Response=et,S(me.prototype),J(me.prototype,W.prototype),me.prototype.type=function(Le){return this.set("Content-Type",oe.types[Le]||Le),this},me.prototype.accept=function(Le){return this.set("Accept",oe.types[Le]||Le),this},me.prototype.auth=function(Le,Ue,ve){arguments.length===1&&(Ue=""),typeof Ue=="object"&&Ue!==null&&(ve=Ue,Ue=""),ve||(ve={type:typeof btoa=="function"?"basic":"auto"});let ct=ve.encoder?ve.encoder:$e=>{if(typeof btoa=="function")return btoa($e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(Le,Ue,ve,ct)},me.prototype.query=function(Le){return typeof Le!="string"&&(Le=Ie(Le)),Le&&this._query.push(Le),this},me.prototype.attach=function(Le,Ue,ve){if(Ue){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(Le,Ue,ve||Ue.name)}return this},me.prototype._getFormData=function(){return this._formData||(this._formData=new w.FormData),this._formData},me.prototype.callback=function(Le,Ue){if(this._shouldRetry(Le,Ue))return this._retry();let ve=this._callback;this.clearTimeout(),Le&&(this._maxRetries&&(Le.retries=this._retries-1),this.emit("error",Le)),ve(Le,Ue)},me.prototype.crossDomainError=function(){let Le=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);Le.crossDomain=!0,Le.status=this.status,Le.method=this.method,Le.url=this.url,this.callback(Le)},me.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},me.prototype.ca=me.prototype.agent,me.prototype.buffer=me.prototype.ca,me.prototype.write=()=>{throw new Error("Streaming is not supported in browser version of superagent")},me.prototype.pipe=me.prototype.write,me.prototype._isHost=function(Le){return Le&&typeof Le=="object"&&!Array.isArray(Le)&&Object.prototype.toString.call(Le)!=="[object Object]"},me.prototype.end=function(Le){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=Le||ne,this._finalizeQueryString(),this._end()},me.prototype._setUploadTimeout=function(){let Le=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(()=>{Le._timeoutError("Upload timeout of ",Le._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},me.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));let Le=this;this.xhr=oe.getXHR();let Ue=this.xhr,ve=this._formData||this._data;this._setTimeouts(),Ue.addEventListener("readystatechange",()=>{let $e=Ue.readyState;if($e>=2&&Le._responseTimeoutTimer&&clearTimeout(Le._responseTimeoutTimer),$e!==4)return;let We;try{We=Ue.status}catch{We=0}if(!We)return Le.timedout||Le._aborted?void 0:Le.crossDomainError();Le.emit("end")});let ct=($e,We)=>{We.total>0&&(We.percent=We.loaded/We.total*100,We.percent===100&&clearTimeout(Le._uploadTimeoutTimer)),We.direction=$e,Le.emit("progress",We)};if(this.hasListeners("progress"))try{Ue.addEventListener("progress",ct.bind(null,"download")),Ue.upload&&Ue.upload.addEventListener("progress",ct.bind(null,"upload"))}catch{}Ue.upload&&this._setUploadTimeout();try{this.username&&this.password?Ue.open(this.method,this.url,!0,this.username,this.password):Ue.open(this.method,this.url,!0)}catch($e){return this.callback($e)}if(this._withCredentials&&(Ue.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof ve!="string"&&!this._isHost(ve)){let $e=this._header["content-type"],We=this._serializer||oe.serialize[$e?$e.split(";")[0]:""];!We&&dt($e)&&(We=oe.serialize["application/json"]),We&&(ve=We(ve))}for(let $e in this.header)this.header[$e]!==null&&B(this.header,$e)&&Ue.setRequestHeader($e,this.header[$e]);this._responseType&&(Ue.responseType=this._responseType),this.emit("request",this),Ue.send(ve===void 0?null:ve)},oe.agent=()=>new se;for(var Me=0,Pe=["GET","POST","OPTIONS","PATCH","PUT","DELETE"];Me<Pe.length;Me++){let Le=Pe[Me];se.prototype[Le.toLowerCase()]=function(Ue,ve){let ct=new oe.Request(Le,Ue);return this._setDefaults(ct),ve&&ct.end(ve),ct}}function Qe(Le,Ue,ve){let ct=oe("DELETE",Le);return typeof Ue=="function"&&(ve=Ue,Ue=null),Ue&&ct.send(Ue),ve&&ct.end(ve),ct}se.prototype.del=se.prototype.delete,oe.get=(Le,Ue,ve)=>{let ct=oe("GET",Le);return typeof Ue=="function"&&(ve=Ue,Ue=null),Ue&&ct.query(Ue),ve&&ct.end(ve),ct},oe.head=(Le,Ue,ve)=>{let ct=oe("HEAD",Le);return typeof Ue=="function"&&(ve=Ue,Ue=null),Ue&&ct.query(Ue),ve&&ct.end(ve),ct},oe.options=(Le,Ue,ve)=>{let ct=oe("OPTIONS",Le);return typeof Ue=="function"&&(ve=Ue,Ue=null),Ue&&ct.send(Ue),ve&&ct.end(ve),ct},oe.del=Qe,oe.delete=Qe,oe.patch=(Le,Ue,ve)=>{let ct=oe("PATCH",Le);return typeof Ue=="function"&&(ve=Ue,Ue=null),Ue&&ct.send(Ue),ve&&ct.end(ve),ct},oe.post=(Le,Ue,ve)=>{let ct=oe("POST",Le);return typeof Ue=="function"&&(ve=Ue,Ue=null),Ue&&ct.send(Ue),ve&&ct.end(ve),ct},oe.put=(Le,Ue,ve)=>{let ct=oe("PUT",Le);return typeof Ue=="function"&&(ve=Ue,Ue=null),Ue&&ct.send(Ue),ve&&ct.end(ve),ct}})(Hf,Hf.exports);var Xl=Hf.exports;function IV(d){var u=new Date().getTime(),p=new Date().toISOString(),v=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;v.log("<<<<<"),v.log("[".concat(p,"]"),`
`,d.url,`
`,d.qs),v.log("-----"),d.on("response",function(w){var S=new Date().getTime()-u,O=new Date().toISOString();v.log(">>>>>>"),v.log("[".concat(O," / ").concat(S,"]"),`
`,d.url,`
`,d.qs,`
`,w.text),v.log("-----")})}function ep(d,u,p){var v=this;this._config.logVerbosity&&(d=d.use(IV)),this._config.proxy&&this._modules.proxy&&(d=this._modules.proxy.call(this,d)),this._config.keepAlive&&this._modules.keepAlive&&(d=this._modules.keepAlive(d));var w=d;if(u.abortSignal)var S=u.abortSignal.subscribe(function(){w.abort(),S()});return u.forceBuffered===!0?w=typeof Blob>"u"?w.buffer().responseType("arraybuffer"):w.responseType("arraybuffer"):u.forceBuffered===!1&&(w=w.buffer(!1)),(w=w.timeout(u.timeout)).on("abort",function(){return p({category:Re.PNUnknownCategory,error:!0,operation:u.operation,errorData:new Error("Aborted")},null)}),w.end(function(O,U){var W,V={};if(V.error=O!==null,V.operation=u.operation,U&&U.status&&(V.statusCode=U.status),O){if(O.response&&O.response.text&&!v._config.logVerbosity)try{V.errorData=JSON.parse(O.response.text)}catch{V.errorData=O}else V.errorData=O;return V.category=v._detectErrorCategory(O),p(V,null)}if(u.ignoreBody)W={headers:U.headers,redirects:U.redirects,response:U};else try{W=JSON.parse(U.text)}catch{return V.errorData=U,V.error=!0,p(V,null)}return W.error&&W.error===1&&W.status&&W.message&&W.service?(V.errorData=W,V.statusCode=W.status,V.error=!0,V.category=v._detectErrorCategory(V),p(V,null)):(W.error&&W.error.message&&(V.errorData=W.error),p(V,W))}),w}function DV(d,u,p){return i(this,void 0,void 0,function(){var v;return a(this,function(w){switch(w.label){case 0:return v=Xl.post(d),u.forEach(function(S){var O=S.key,U=S.value;v=v.field(O,U)}),v.attach("file",p,{contentType:"application/octet-stream"}),[4,v];case 1:return[2,w.sent()]}})})}function OV(d,u,p){var v=Xl.get(this.getStandardOrigin()+u.url).set(u.headers).query(d);return ep.call(this,v,u,p)}function PV(d,u,p){var v=Xl.get(this.getStandardOrigin()+u.url).set(u.headers).query(d);return ep.call(this,v,u,p)}function RV(d,u,p,v){var w=Xl.post(this.getStandardOrigin()+p.url).query(d).set(p.headers).send(u);return ep.call(this,w,p,v)}function LV(d,u,p,v){var w=Xl.patch(this.getStandardOrigin()+p.url).query(d).set(p.headers).send(u);return ep.call(this,w,p,v)}function NV(d,u,p){var v=Xl.delete(this.getStandardOrigin()+u.url).set(u.headers).query(d);return ep.call(this,v,u,p)}function UA(d,u){var p=new Uint8Array(d.byteLength+u.byteLength);return p.set(new Uint8Array(d),0),p.set(new Uint8Array(u),d.byteLength),p.buffer}var to,$A=function(){function d(){}return Object.defineProperty(d.prototype,"algo",{get:function(){return"aes-256-cbc"},enumerable:!1,configurable:!0}),d.prototype.encrypt=function(u,p){return i(this,void 0,void 0,function(){var v;return a(this,function(w){switch(w.label){case 0:return[4,this.getKey(u)];case 1:if(v=w.sent(),p instanceof ArrayBuffer)return[2,this.encryptArrayBuffer(v,p)];if(typeof p=="string")return[2,this.encryptString(v,p)];throw new Error("Cannot encrypt this file. In browsers file encryption supports only string or ArrayBuffer")}})})},d.prototype.decrypt=function(u,p){return i(this,void 0,void 0,function(){var v;return a(this,function(w){switch(w.label){case 0:return[4,this.getKey(u)];case 1:if(v=w.sent(),p instanceof ArrayBuffer)return[2,this.decryptArrayBuffer(v,p)];if(typeof p=="string")return[2,this.decryptString(v,p)];throw new Error("Cannot decrypt this file. In browsers file decryption supports only string or ArrayBuffer")}})})},d.prototype.encryptFile=function(u,p,v){return i(this,void 0,void 0,function(){var w,S,O;return a(this,function(U){switch(U.label){case 0:if(p.data.byteLength<=0)throw new Error("encryption error. empty content");return[4,this.getKey(u)];case 1:return w=U.sent(),[4,p.data.arrayBuffer()];case 2:return S=U.sent(),[4,this.encryptArrayBuffer(w,S)];case 3:return O=U.sent(),[2,v.create({name:p.name,mimeType:"application/octet-stream",data:O})]}})})},d.prototype.decryptFile=function(u,p,v){return i(this,void 0,void 0,function(){var w,S,O;return a(this,function(U){switch(U.label){case 0:return[4,this.getKey(u)];case 1:return w=U.sent(),[4,p.data.arrayBuffer()];case 2:return S=U.sent(),[4,this.decryptArrayBuffer(w,S)];case 3:return O=U.sent(),[2,v.create({name:p.name,data:O})]}})})},d.prototype.getKey=function(u){return i(this,void 0,void 0,function(){var p,v,w;return a(this,function(S){switch(S.label){case 0:return[4,crypto.subtle.digest("SHA-256",d.encoder.encode(u))];case 1:return p=S.sent(),v=Array.from(new Uint8Array(p)).map(function(O){return O.toString(16).padStart(2,"0")}).join(""),w=d.encoder.encode(v.slice(0,32)).buffer,[2,crypto.subtle.importKey("raw",w,"AES-CBC",!0,["encrypt","decrypt"])]}})})},d.prototype.encryptArrayBuffer=function(u,p){return i(this,void 0,void 0,function(){var v,w,S;return a(this,function(O){switch(O.label){case 0:return v=crypto.getRandomValues(new Uint8Array(16)),w=UA,S=[v.buffer],[4,crypto.subtle.encrypt({name:"AES-CBC",iv:v},u,p)];case 1:return[2,w.apply(void 0,S.concat([O.sent()]))]}})})},d.prototype.decryptArrayBuffer=function(u,p){return i(this,void 0,void 0,function(){var v;return a(this,function(w){switch(w.label){case 0:if(v=p.slice(0,16),p.slice(d.IV_LENGTH).byteLength<=0)throw new Error("decryption error: empty content");return[4,crypto.subtle.decrypt({name:"AES-CBC",iv:v},u,p.slice(d.IV_LENGTH))];case 1:return[2,w.sent()]}})})},d.prototype.encryptString=function(u,p){return i(this,void 0,void 0,function(){var v,w,S,O;return a(this,function(U){switch(U.label){case 0:return v=crypto.getRandomValues(new Uint8Array(16)),w=d.encoder.encode(p).buffer,[4,crypto.subtle.encrypt({name:"AES-CBC",iv:v},u,w)];case 1:return S=U.sent(),O=UA(v.buffer,S),[2,d.decoder.decode(O)]}})})},d.prototype.decryptString=function(u,p){return i(this,void 0,void 0,function(){var v,w,S,O;return a(this,function(U){switch(U.label){case 0:return v=d.encoder.encode(p).buffer,w=v.slice(0,16),S=v.slice(16),[4,crypto.subtle.decrypt({name:"AES-CBC",iv:w},u,S)];case 1:return O=U.sent(),[2,d.decoder.decode(O)]}})})},d.IV_LENGTH=16,d.encoder=new TextEncoder,d.decoder=new TextDecoder,d}(),FV=(to=function(){function d(u){if(u instanceof File)this.data=u,this.name=this.data.name,this.mimeType=this.data.type;else if(u.data){var p=u.data;this.data=new File([p],u.name,{type:u.mimeType}),this.name=u.name,u.mimeType&&(this.mimeType=u.mimeType)}if(this.data===void 0)throw new Error("Couldn't construct a file out of supplied options.");if(this.name===void 0)throw new Error("Couldn't guess filename out of the options. Please provide one.")}return d.create=function(u){return new this(u)},d.prototype.toBuffer=function(){return i(this,void 0,void 0,function(){return a(this,function(u){throw new Error("This feature is only supported in Node.js environments.")})})},d.prototype.toStream=function(){return i(this,void 0,void 0,function(){return a(this,function(u){throw new Error("This feature is only supported in Node.js environments.")})})},d.prototype.toFileUri=function(){return i(this,void 0,void 0,function(){return a(this,function(u){throw new Error("This feature is only supported in react native environments.")})})},d.prototype.toBlob=function(){return i(this,void 0,void 0,function(){return a(this,function(u){return[2,this.data]})})},d.prototype.toArrayBuffer=function(){return i(this,void 0,void 0,function(){var u=this;return a(this,function(p){return[2,new Promise(function(v,w){var S=new FileReader;S.addEventListener("load",function(){if(S.result instanceof ArrayBuffer)return v(S.result)}),S.addEventListener("error",function(){w(S.error)}),S.readAsArrayBuffer(u.data)})]})})},d.prototype.toString=function(){return i(this,void 0,void 0,function(){var u=this;return a(this,function(p){return[2,new Promise(function(v,w){var S=new FileReader;S.addEventListener("load",function(){if(typeof S.result=="string")return v(S.result)}),S.addEventListener("error",function(){w(S.error)}),S.readAsBinaryString(u.data)})]})})},d.prototype.toFile=function(){return i(this,void 0,void 0,function(){return a(this,function(u){return[2,this.data]})})},d}(),to.supportsFile=typeof File<"u",to.supportsBlob=typeof Blob<"u",to.supportsArrayBuffer=typeof ArrayBuffer<"u",to.supportsBuffer=!1,to.supportsStream=!1,to.supportsString=!0,to.supportsEncryptFile=!0,to.supportsFileUri=!1,to),Ub=function(){function d(u){this.config=u,this.cryptor=new Ne({config:u}),this.fileCryptor=new $A}return Object.defineProperty(d.prototype,"identifier",{get:function(){return""},enumerable:!1,configurable:!0}),d.prototype.encrypt=function(u){var p=typeof u=="string"?u:new TextDecoder().decode(u);return{data:this.cryptor.encrypt(p),metadata:null}},d.prototype.decrypt=function(u){var p=typeof u.data=="string"?u.data:X(u.data);return this.cryptor.decrypt(p)},d.prototype.encryptFile=function(u,p){var v;return i(this,void 0,void 0,function(){return a(this,function(w){return[2,this.fileCryptor.encryptFile((v=this.config)===null||v===void 0?void 0:v.cipherKey,u,p)]})})},d.prototype.decryptFile=function(u,p){return i(this,void 0,void 0,function(){return a(this,function(v){return[2,this.fileCryptor.decryptFile(this.config.cipherKey,u,p)]})})},d}(),$b=function(){function d(u){this.cipherKey=u.cipherKey,this.CryptoJS=ie,this.encryptedKey=this.CryptoJS.SHA256(this.cipherKey)}return Object.defineProperty(d.prototype,"algo",{get:function(){return"AES-CBC"},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"identifier",{get:function(){return"ACRH"},enumerable:!1,configurable:!0}),d.prototype.getIv=function(){return crypto.getRandomValues(new Uint8Array(d.BLOCK_SIZE))},d.prototype.getKey=function(){return i(this,void 0,void 0,function(){var u,p;return a(this,function(v){switch(v.label){case 0:return u=d.encoder.encode(this.cipherKey),[4,crypto.subtle.digest("SHA-256",u.buffer)];case 1:return p=v.sent(),[2,crypto.subtle.importKey("raw",p,this.algo,!0,["encrypt","decrypt"])]}})})},d.prototype.encrypt=function(u){if((typeof u=="string"?u:d.decoder.decode(u)).length===0)throw new Error("encryption error. empty content");var p=this.getIv();return{metadata:p,data:F(this.CryptoJS.AES.encrypt(u,this.encryptedKey,{iv:this.bufferToWordArray(p),mode:this.CryptoJS.mode.CBC}).ciphertext.toString(this.CryptoJS.enc.Base64))}},d.prototype.decrypt=function(u){var p=this.bufferToWordArray(new Uint8ClampedArray(u.metadata)),v=this.bufferToWordArray(new Uint8ClampedArray(u.data));return d.encoder.encode(this.CryptoJS.AES.decrypt({ciphertext:v},this.encryptedKey,{iv:p,mode:this.CryptoJS.mode.CBC}).toString(this.CryptoJS.enc.Utf8)).buffer},d.prototype.encryptFileData=function(u){return i(this,void 0,void 0,function(){var p,v,w;return a(this,function(S){switch(S.label){case 0:return[4,this.getKey()];case 1:return p=S.sent(),v=this.getIv(),w={},[4,crypto.subtle.encrypt({name:this.algo,iv:v},p,u)];case 2:return[2,(w.data=S.sent(),w.metadata=v,w)]}})})},d.prototype.decryptFileData=function(u){return i(this,void 0,void 0,function(){var p;return a(this,function(v){switch(v.label){case 0:return[4,this.getKey()];case 1:return p=v.sent(),[2,crypto.subtle.decrypt({name:this.algo,iv:u.metadata},p,u.data)]}})})},d.prototype.bufferToWordArray=function(u){var p,v=[];for(p=0;p<u.length;p+=1)v[p/4|0]|=u[p]<<24-8*p;return this.CryptoJS.lib.WordArray.create(v,u.length)},d.BLOCK_SIZE=16,d.encoder=new TextEncoder,d.decoder=new TextDecoder,d}(),BA=function(){function d(u){var p;this.defaultCryptor=u.default,this.cryptors=(p=u.cryptors)!==null&&p!==void 0?p:[]}return d.legacyCryptoModule=function(u){var p;return new this({default:new Ub({cipherKey:u.cipherKey,useRandomIVs:(p=u.useRandomIVs)===null||p===void 0||p}),cryptors:[new $b({cipherKey:u.cipherKey})]})},d.aesCbcCryptoModule=function(u){var p;return new this({default:new $b({cipherKey:u.cipherKey}),cryptors:[new Ub({cipherKey:u.cipherKey,useRandomIVs:(p=u.useRandomIVs)===null||p===void 0||p})]})},d.withDefaultCryptor=function(u){return new this({default:u})},d.prototype.getAllCryptors=function(){return c([this.defaultCryptor],o(this.cryptors),!1)},d.prototype.encrypt=function(u){var p=this.defaultCryptor.encrypt(u);if(!p.metadata)return p.data;var v=this.getHeaderData(p);return this.concatArrayBuffer(v,p.data)},d.prototype.decrypt=function(u){var p=typeof u=="string"?F(u):u,v=ro.tryParse(p),w=this.getCryptor(v),S=v.length>0?p.slice(v.length-v.metadataLength,v.length):null;if(p.slice(v.length).byteLength<=0)throw new Error("decryption error. empty content");return w.decrypt({data:p.slice(v.length),metadata:S})},d.prototype.encryptFile=function(u,p){return i(this,void 0,void 0,function(){var v,w;return a(this,function(S){switch(S.label){case 0:return this.defaultCryptor.identifier===ro.LEGACY_IDENTIFIER?[2,this.defaultCryptor.encryptFile(u,p)]:[4,this.getFileData(u.data)];case 1:return v=S.sent(),[4,this.defaultCryptor.encryptFileData(v)];case 2:return w=S.sent(),[2,p.create({name:u.name,mimeType:"application/octet-stream",data:this.concatArrayBuffer(this.getHeaderData(w),w.data)})]}})})},d.prototype.decryptFile=function(u,p){return i(this,void 0,void 0,function(){var v,w,S,O,U,W,V,J;return a(this,function(B){switch(B.label){case 0:return[4,u.data.arrayBuffer()];case 1:return v=B.sent(),w=ro.tryParse(v),((S=this.getCryptor(w))==null?void 0:S.identifier)===d.LEGACY_IDENTIFIER?[2,S.decryptFile(u,p)]:[4,this.getFileData(v)];case 2:return O=B.sent(),U=O.slice(w.length-w.metadataLength,w.length),V=(W=p).create,J={name:u.name},[4,this.defaultCryptor.decryptFileData({data:v.slice(w.length),metadata:U})];case 3:return[2,V.apply(W,[(J.data=B.sent(),J)])]}})})},d.prototype.getCryptor=function(u){if(u===""){var p=this.getAllCryptors().find(function(v){return v.identifier===""});if(p)return p;throw new Error("unknown cryptor error")}if(u instanceof Bb)return this.getCryptorFromId(u.identifier)},d.prototype.getCryptorFromId=function(u){var p=this.getAllCryptors().find(function(v){return u===v.identifier});if(p)return p;throw Error("unknown cryptor error")},d.prototype.concatArrayBuffer=function(u,p){var v=new Uint8Array(u.byteLength+p.byteLength);return v.set(new Uint8Array(u),0),v.set(new Uint8Array(p),u.byteLength),v.buffer},d.prototype.getHeaderData=function(u){if(u.metadata){var p=ro.from(this.defaultCryptor.identifier,u.metadata),v=new Uint8Array(p.length),w=0;return v.set(p.data,w),w+=p.length-u.metadata.byteLength,v.set(new Uint8Array(u.metadata),w),v.buffer}},d.prototype.getFileData=function(u){return i(this,void 0,void 0,function(){return a(this,function(p){switch(p.label){case 0:return u instanceof Blob?[4,u.arrayBuffer()]:[3,2];case 1:return[2,p.sent()];case 2:if(u instanceof ArrayBuffer)return[2,u];if(typeof u=="string")return[2,d.encoder.encode(u)];throw new Error("Cannot decrypt/encrypt file. In browsers file encrypt/decrypt supported for string, ArrayBuffer or Blob")}})})},d.LEGACY_IDENTIFIER="",d.encoder=new TextEncoder,d.decoder=new TextDecoder,d}(),ro=function(){function d(){}return d.from=function(u,p){if(u!==d.LEGACY_IDENTIFIER)return new Bb(u,p.byteLength)},d.tryParse=function(u){var p=new Uint8Array(u),v="";if(p.byteLength>=4&&(v=p.slice(0,4),this.decoder.decode(v)!==d.SENTINEL))return"";if(!(p.byteLength>=5))throw new Error("decryption error. invalid header version");if(p[4]>d.MAX_VERSION)throw new Error("unknown cryptor error");var w="",S=5+d.IDENTIFIER_LENGTH;if(!(p.byteLength>=S))throw new Error("decryption error. invalid crypto identifier");w=p.slice(5,S);var O=null;if(!(p.byteLength>=S+1))throw new Error("decryption error. invalid metadata length");return O=p[S],S+=1,O===255&&p.byteLength>=S+2&&(O=new Uint16Array(p.slice(S,S+2)).reduce(function(U,W){return(U<<8)+W},0),S+=2),new Bb(this.decoder.decode(w),O)},d.SENTINEL="PNED",d.LEGACY_IDENTIFIER="",d.IDENTIFIER_LENGTH=4,d.VERSION=1,d.MAX_VERSION=1,d.decoder=new TextDecoder,d}(),Bb=function(){function d(u,p){this._identifier=u,this._metadataLength=p}return Object.defineProperty(d.prototype,"identifier",{get:function(){return this._identifier},set:function(u){this._identifier=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"metadataLength",{get:function(){return this._metadataLength},set:function(u){this._metadataLength=u},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return ro.VERSION},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return ro.SENTINEL.length+1+ro.IDENTIFIER_LENGTH+(this.metadataLength<255?1:3)+this.metadataLength},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"data",{get:function(){var u=0,p=new Uint8Array(this.length),v=new TextEncoder;p.set(v.encode(ro.SENTINEL)),p[u+=ro.SENTINEL.length]=this.version,u++,this.identifier&&p.set(v.encode(this.identifier),u),u+=ro.IDENTIFIER_LENGTH;var w=this.metadataLength;return w<255?p[u]=w:p.set([255,w>>8,255&w],u),p},enumerable:!1,configurable:!0}),d.IDENTIFIER_LENGTH=4,d.SENTINEL="PNED",d}();function MV(d){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(d)}var UV=function(d){function u(p){var v=this,w=p.listenToBrowserNetworkEvents,S=w===void 0||w;return p.sdkFamily="Web",p.networking=new Fg({del:NV,get:PV,post:RV,patch:LV,sendBeacon:MV,getfile:OV,postfile:DV}),p.cbor=new Ac(function(O){return Lu(m.decode(O))},F),p.PubNubFile=FV,p.cryptography=new $A,p.initCryptoModule=function(O){return new BA({default:new Ub({cipherKey:O.cipherKey,useRandomIVs:O.useRandomIVs}),cryptors:[new $b({cipherKey:O.cipherKey})]})},v=d.call(this,p)||this,S&&(window.addEventListener("offline",function(){v.networkDownDetected()}),window.addEventListener("online",function(){v.networkUpDetected()})),v}return e(u,d),u.CryptoModule=BA,u}(Ng);return UV})});var Q5=R((t0,J5)=>{(function(t,e){typeof t0=="object"&&typeof J5<"u"?e(t0):typeof define=="function"&&define.amd?define(["exports"],e):(t=t||self,e(t.Diff={}))})(t0,function(t){"use strict";function e(){}e.prototype={diff:function(ee,ge){var De=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ut=De.callback;typeof De=="function"&&(ut=De,De={}),this.options=De;var q=this;function re(Ot){return ut?(setTimeout(function(){ut(void 0,Ot)},0),!0):Ot}ee=this.castInput(ee),ge=this.castInput(ge),ee=this.removeEmpty(this.tokenize(ee)),ge=this.removeEmpty(this.tokenize(ge));var L=ge.length,Ce=ee.length,Ge=1,at=L+Ce,ht=[{newPos:-1,components:[]}],Je=this.extractCommon(ht[0],ge,ee,0);if(ht[0].newPos+1>=L&&Je+1>=Ce)return re([{value:this.join(ge),count:ge.length}]);function Ee(){for(var Ot=-1*Ge;Ot<=Ge;Ot+=2){var kt=void 0,Br=ht[Ot-1],Jt=ht[Ot+1],pi=(Jt?Jt.newPos:0)-Ot;Br&&(ht[Ot-1]=void 0);var hr=Br&&Br.newPos+1<L,zr=Jt&&0<=pi&&pi<Ce;if(!hr&&!zr){ht[Ot]=void 0;continue}if(!hr||zr&&Br.newPos<Jt.newPos?(kt=n(Jt),q.pushComponent(kt.components,void 0,!0)):(kt=Br,kt.newPos++,q.pushComponent(kt.components,!0,void 0)),pi=q.extractCommon(kt,ge,ee,Ot),kt.newPos+1>=L&&pi+1>=Ce)return re(r(q,kt.components,ge,ee,q.useLongestToken));ht[Ot]=kt}Ge++}if(ut)(function Ot(){setTimeout(function(){if(Ge>at)return ut();Ee()||Ot()},0)})();else for(;Ge<=at;){var Kt=Ee();if(Kt)return Kt}},pushComponent:function(ee,ge,De){var ut=ee[ee.length-1];ut&&ut.added===ge&&ut.removed===De?ee[ee.length-1]={count:ut.count+1,added:ge,removed:De}:ee.push({count:1,added:ge,removed:De})},extractCommon:function(ee,ge,De,ut){for(var q=ge.length,re=De.length,L=ee.newPos,Ce=L-ut,Ge=0;L+1<q&&Ce+1<re&&this.equals(ge[L+1],De[Ce+1]);)L++,Ce++,Ge++;return Ge&&ee.components.push({count:Ge}),ee.newPos=L,Ce},equals:function(ee,ge){return this.options.comparator?this.options.comparator(ee,ge):ee===ge||this.options.ignoreCase&&ee.toLowerCase()===ge.toLowerCase()},removeEmpty:function(ee){for(var ge=[],De=0;De<ee.length;De++)ee[De]&&ge.push(ee[De]);return ge},castInput:function(ee){return ee},tokenize:function(ee){return ee.split("")},join:function(ee){return ee.join("")}};function r(te,ee,ge,De,ut){for(var q=0,re=ee.length,L=0,Ce=0;q<re;q++){var Ge=ee[q];if(Ge.removed){if(Ge.value=te.join(De.slice(Ce,Ce+Ge.count)),Ce+=Ge.count,q&&ee[q-1].added){var ht=ee[q-1];ee[q-1]=ee[q],ee[q]=ht}}else{if(!Ge.added&&ut){var at=ge.slice(L,L+Ge.count);at=at.map(function(Ee,Kt){var Ot=De[Ce+Kt];return Ot.length>Ee.length?Ot:Ee}),Ge.value=te.join(at)}else Ge.value=te.join(ge.slice(L,L+Ge.count));L+=Ge.count,Ge.added||(Ce+=Ge.count)}}var Je=ee[re-1];return re>1&&typeof Je.value=="string"&&(Je.added||Je.removed)&&te.equals("",Je.value)&&(ee[re-2].value+=Je.value,ee.pop()),ee}function n(te){return{newPos:te.newPos,components:te.components.slice(0)}}var i=new e;function a(te,ee,ge){return i.diff(te,ee,ge)}function s(te,ee){if(typeof te=="function")ee.callback=te;else if(te)for(var ge in te)te.hasOwnProperty(ge)&&(ee[ge]=te[ge]);return ee}var o=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,c=/\S/,l=new e;l.equals=function(te,ee){return this.options.ignoreCase&&(te=te.toLowerCase(),ee=ee.toLowerCase()),te===ee||this.options.ignoreWhitespace&&!c.test(te)&&!c.test(ee)},l.tokenize=function(te){for(var ee=te.split(/(\s+|[()[\]{}'"]|\b)/),ge=0;ge<ee.length-1;ge++)!ee[ge+1]&&ee[ge+2]&&o.test(ee[ge])&&o.test(ee[ge+2])&&(ee[ge]+=ee[ge+2],ee.splice(ge+1,2),ge--);return ee};function f(te,ee,ge){return ge=s(ge,{ignoreWhitespace:!0}),l.diff(te,ee,ge)}function g(te,ee,ge){return l.diff(te,ee,ge)}var m=new e;m.tokenize=function(te){var ee=[],ge=te.split(/(\n|\r\n)/);ge[ge.length-1]||ge.pop();for(var De=0;De<ge.length;De++){var ut=ge[De];De%2&&!this.options.newlineIsToken?ee[ee.length-1]+=ut:(this.options.ignoreWhitespace&&(ut=ut.trim()),ee.push(ut))}return ee};function y(te,ee,ge){return m.diff(te,ee,ge)}function x(te,ee,ge){var De=s(ge,{ignoreWhitespace:!0});return m.diff(te,ee,De)}var I=new e;I.tokenize=function(te){return te.split(/(\S.+?[.!?])(?=\s+|$)/)};function A(te,ee,ge){return I.diff(te,ee,ge)}var F=new e;F.tokenize=function(te){return te.split(/([{}:;,]|\s+)/)};function X(te,ee,ge){return F.diff(te,ee,ge)}function de(te){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?de=function(ee){return typeof ee}:de=function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},de(te)}function N(te){return H(te)||z(te)||Y()}function H(te){if(Array.isArray(te)){for(var ee=0,ge=new Array(te.length);ee<te.length;ee++)ge[ee]=te[ee];return ge}}function z(te){if(Symbol.iterator in Object(te)||Object.prototype.toString.call(te)==="[object Arguments]")return Array.from(te)}function Y(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var G=Object.prototype.toString,ie=new e;ie.useLongestToken=!0,ie.tokenize=m.tokenize,ie.castInput=function(te){var ee=this.options,ge=ee.undefinedReplacement,De=ee.stringifyReplacer,ut=De===void 0?function(q,re){return typeof re>"u"?ge:re}:De;return typeof te=="string"?te:JSON.stringify(Ne(te,null,null,ut),ut,"  ")},ie.equals=function(te,ee){return e.prototype.equals.call(ie,te.replace(/,([\r\n])/g,"$1"),ee.replace(/,([\r\n])/g,"$1"))};function fe(te,ee,ge){return ie.diff(te,ee,ge)}function Ne(te,ee,ge,De,ut){ee=ee||[],ge=ge||[],De&&(te=De(ut,te));var q;for(q=0;q<ee.length;q+=1)if(ee[q]===te)return ge[q];var re;if(G.call(te)==="[object Array]"){for(ee.push(te),re=new Array(te.length),ge.push(re),q=0;q<te.length;q+=1)re[q]=Ne(te[q],ee,ge,De,ut);return ee.pop(),ge.pop(),re}if(te&&te.toJSON&&(te=te.toJSON()),de(te)==="object"&&te!==null){ee.push(te),re={},ge.push(re);var L=[],Ce;for(Ce in te)te.hasOwnProperty(Ce)&&L.push(Ce);for(L.sort(),q=0;q<L.length;q+=1)Ce=L[q],re[Ce]=Ne(te[Ce],ee,ge,De,Ce);ee.pop(),ge.pop()}else re=te;return re}var ye=new e;ye.tokenize=function(te){return te.slice()},ye.join=ye.removeEmpty=function(te){return te};function He(te,ee,ge){return ye.diff(te,ee,ge)}function Re(te){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=te.split(/\r\n|[\n\v\f\r\x85]/),De=te.match(/\r\n|[\n\v\f\r\x85]/g)||[],ut=[],q=0;function re(){var Ge={};for(ut.push(Ge);q<ge.length;){var at=ge[q];if(/^(\-\-\-|\+\+\+|@@)\s/.test(at))break;var ht=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(at);ht&&(Ge.index=ht[1]),q++}for(L(Ge),L(Ge),Ge.hunks=[];q<ge.length;){var Je=ge[q];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(Je))break;if(/^@@/.test(Je))Ge.hunks.push(Ce());else{if(Je&&ee.strict)throw new Error("Unknown line "+(q+1)+" "+JSON.stringify(Je));q++}}}function L(Ge){var at=/^(---|\+\+\+)\s+(.*)$/.exec(ge[q]);if(at){var ht=at[1]==="---"?"old":"new",Je=at[2].split("	",2),Ee=Je[0].replace(/\\\\/g,"\\");/^".*"$/.test(Ee)&&(Ee=Ee.substr(1,Ee.length-2)),Ge[ht+"FileName"]=Ee,Ge[ht+"Header"]=(Je[1]||"").trim(),q++}}function Ce(){for(var Ge=q,at=ge[q++],ht=at.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),Je={oldStart:+ht[1],oldLines:+ht[2]||1,newStart:+ht[3],newLines:+ht[4]||1,lines:[],linedelimiters:[]},Ee=0,Kt=0;q<ge.length&&!(ge[q].indexOf("--- ")===0&&q+2<ge.length&&ge[q+1].indexOf("+++ ")===0&&ge[q+2].indexOf("@@")===0);q++){var Ot=ge[q].length==0&&q!=ge.length-1?" ":ge[q][0];if(Ot==="+"||Ot==="-"||Ot===" "||Ot==="\\")Je.lines.push(ge[q]),Je.linedelimiters.push(De[q]||`
`),Ot==="+"?Ee++:Ot==="-"?Kt++:Ot===" "&&(Ee++,Kt++);else break}if(!Ee&&Je.newLines===1&&(Je.newLines=0),!Kt&&Je.oldLines===1&&(Je.oldLines=0),ee.strict){if(Ee!==Je.newLines)throw new Error("Added line count did not match for hunk at line "+(Ge+1));if(Kt!==Je.oldLines)throw new Error("Removed line count did not match for hunk at line "+(Ge+1))}return Je}for(;q<ge.length;)re();return ut}function Ze(te,ee,ge){var De=!0,ut=!1,q=!1,re=1;return function L(){if(De&&!q){if(ut?re++:De=!1,te+re<=ge)return re;q=!0}if(!ut)return q||(De=!0),ee<=te-re?-re++:(ut=!0,L())}}function ce(te,ee){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof ee=="string"&&(ee=Re(ee)),Array.isArray(ee)){if(ee.length>1)throw new Error("applyPatch only works with a single input.");ee=ee[0]}var De=te.split(/\r\n|[\n\v\f\r\x85]/),ut=te.match(/\r\n|[\n\v\f\r\x85]/g)||[],q=ee.hunks,re=ge.compareLine||function(jr,Vt,Tr,un){return Vt===un},L=0,Ce=ge.fuzzFactor||0,Ge=0,at=0,ht,Je;function Ee(jr,Vt){for(var Tr=0;Tr<jr.lines.length;Tr++){var un=jr.lines[Tr],Dn=un.length>0?un[0]:" ",cn=un.length>0?un.substr(1):un;if(Dn===" "||Dn==="-"){if(!re(Vt+1,De[Vt],Dn,cn)&&(L++,L>Ce))return!1;Vt++}}return!0}for(var Kt=0;Kt<q.length;Kt++){for(var Ot=q[Kt],kt=De.length-Ot.oldLines,Br=0,Jt=at+Ot.oldStart-1,pi=Ze(Jt,Ge,kt);Br!==void 0;Br=pi())if(Ee(Ot,Jt+Br)){Ot.offset=at+=Br;break}if(Br===void 0)return!1;Ge=Ot.offset+Ot.oldStart+Ot.oldLines}for(var hr=0,zr=0;zr<q.length;zr++){var ki=q[zr],qr=ki.oldStart+ki.offset+hr-1;hr+=ki.newLines-ki.oldLines,qr<0&&(qr=0);for(var en=0;en<ki.lines.length;en++){var Yr=ki.lines[en],$t=Yr.length>0?Yr[0]:" ",hi=Yr.length>0?Yr.substr(1):Yr,Ci=ki.linedelimiters[en];if($t===" ")qr++;else if($t==="-")De.splice(qr,1),ut.splice(qr,1);else if($t==="+")De.splice(qr,0,hi),ut.splice(qr,0,Ci),qr++;else if($t==="\\"){var Qt=ki.lines[en-1]?ki.lines[en-1][0]:null;Qt==="+"?ht=!0:Qt==="-"&&(Je=!0)}}}if(ht)for(;!De[De.length-1];)De.pop(),ut.pop();else Je&&(De.push(""),ut.push(`
`));for(var Jr=0;Jr<De.length-1;Jr++)De[Jr]=De[Jr]+ut[Jr];return De.join("")}function tt(te,ee){typeof te=="string"&&(te=Re(te));var ge=0;function De(){var ut=te[ge++];if(!ut)return ee.complete();ee.loadFile(ut,function(q,re){if(q)return ee.complete(q);var L=ce(re,ut,ee);ee.patched(ut,L,function(Ce){if(Ce)return ee.complete(Ce);De()})})}De()}function ft(te,ee,ge,De,ut,q,re){re||(re={}),typeof re.context>"u"&&(re.context=4);var L=y(ge,De,re);L.push({value:"",lines:[]});function Ce(Br){return Br.map(function(Jt){return" "+Jt})}for(var Ge=[],at=0,ht=0,Je=[],Ee=1,Kt=1,Ot=function(Jt){var pi=L[Jt],hr=pi.lines||pi.value.replace(/\n$/,"").split(`
`);if(pi.lines=hr,pi.added||pi.removed){var zr;if(!at){var ki=L[Jt-1];at=Ee,ht=Kt,ki&&(Je=re.context>0?Ce(ki.lines.slice(-re.context)):[],at-=Je.length,ht-=Je.length)}(zr=Je).push.apply(zr,N(hr.map(function(Jr){return(pi.added?"+":"-")+Jr}))),pi.added?Kt+=hr.length:Ee+=hr.length}else{if(at)if(hr.length<=re.context*2&&Jt<L.length-2){var qr;(qr=Je).push.apply(qr,N(Ce(hr)))}else{var en,Yr=Math.min(hr.length,re.context);(en=Je).push.apply(en,N(Ce(hr.slice(0,Yr))));var $t={oldStart:at,oldLines:Ee-at+Yr,newStart:ht,newLines:Kt-ht+Yr,lines:Je};if(Jt>=L.length-2&&hr.length<=re.context){var hi=/\n$/.test(ge),Ci=/\n$/.test(De),Qt=hr.length==0&&Je.length>$t.oldLines;!hi&&Qt&&Je.splice($t.oldLines,0,"\\ No newline at end of file"),(!hi&&!Qt||!Ci)&&Je.push("\\ No newline at end of file")}Ge.push($t),at=0,ht=0,Je=[]}Ee+=hr.length,Kt+=hr.length}},kt=0;kt<L.length;kt++)Ot(kt);return{oldFileName:te,newFileName:ee,oldHeader:ut,newHeader:q,hunks:Ge}}function pt(te,ee,ge,De,ut,q,re){var L=ft(te,ee,ge,De,ut,q,re),Ce=[];te==ee&&Ce.push("Index: "+te),Ce.push("==================================================================="),Ce.push("--- "+L.oldFileName+(typeof L.oldHeader>"u"?"":"	"+L.oldHeader)),Ce.push("+++ "+L.newFileName+(typeof L.newHeader>"u"?"":"	"+L.newHeader));for(var Ge=0;Ge<L.hunks.length;Ge++){var at=L.hunks[Ge];Ce.push("@@ -"+at.oldStart+","+at.oldLines+" +"+at.newStart+","+at.newLines+" @@"),Ce.push.apply(Ce,at.lines)}return Ce.join(`
`)+`
`}function Ye(te,ee,ge,De,ut,q){return pt(te,te,ee,ge,De,ut,q)}function xt(te,ee){return te.length!==ee.length?!1:Ut(te,ee)}function Ut(te,ee){if(ee.length>te.length)return!1;for(var ge=0;ge<ee.length;ge++)if(ee[ge]!==te[ge])return!1;return!0}function Pt(te){var ee=lt(te.lines),ge=ee.oldLines,De=ee.newLines;ge!==void 0?te.oldLines=ge:delete te.oldLines,De!==void 0?te.newLines=De:delete te.newLines}function tr(te,ee,ge){te=Ke(te,ge),ee=Ke(ee,ge);var De={};(te.index||ee.index)&&(De.index=te.index||ee.index),(te.newFileName||ee.newFileName)&&(Q(te)?Q(ee)?(De.oldFileName=pe(De,te.oldFileName,ee.oldFileName),De.newFileName=pe(De,te.newFileName,ee.newFileName),De.oldHeader=pe(De,te.oldHeader,ee.oldHeader),De.newHeader=pe(De,te.newHeader,ee.newHeader)):(De.oldFileName=te.oldFileName,De.newFileName=te.newFileName,De.oldHeader=te.oldHeader,De.newHeader=te.newHeader):(De.oldFileName=ee.oldFileName||te.oldFileName,De.newFileName=ee.newFileName||te.newFileName,De.oldHeader=ee.oldHeader||te.oldHeader,De.newHeader=ee.newHeader||te.newHeader)),De.hunks=[];for(var ut=0,q=0,re=0,L=0;ut<te.hunks.length||q<ee.hunks.length;){var Ce=te.hunks[ut]||{oldStart:1/0},Ge=ee.hunks[q]||{oldStart:1/0};if(xe(Ce,Ge))De.hunks.push(_e(Ce,re)),ut++,L+=Ce.newLines-Ce.oldLines;else if(xe(Ge,Ce))De.hunks.push(_e(Ge,L)),q++,re+=Ge.newLines-Ge.oldLines;else{var at={oldStart:Math.min(Ce.oldStart,Ge.oldStart),oldLines:0,newStart:Math.min(Ce.newStart+re,Ge.oldStart+L),newLines:0,lines:[]};nt(at,Ce.oldStart,Ce.lines,Ge.oldStart,Ge.lines),q++,ut++,De.hunks.push(at)}}return De}function Ke(te,ee){if(typeof te=="string"){if(/^@@/m.test(te)||/^Index:/m.test(te))return Re(te)[0];if(!ee)throw new Error("Must provide a base reference or pass in a patch");return ft(void 0,void 0,ee,te)}return te}function Q(te){return te.newFileName&&te.newFileName!==te.oldFileName}function pe(te,ee,ge){return ee===ge?ee:(te.conflict=!0,{mine:ee,theirs:ge})}function xe(te,ee){return te.oldStart<ee.oldStart&&te.oldStart+te.oldLines<ee.oldStart}function _e(te,ee){return{oldStart:te.oldStart,oldLines:te.oldLines,newStart:te.newStart+ee,newLines:te.newLines,lines:te.lines}}function nt(te,ee,ge,De,ut){var q={offset:ee,lines:ge,index:0},re={offset:De,lines:ut,index:0};for(Be(te,q,re),Be(te,re,q);q.index<q.lines.length&&re.index<re.lines.length;){var L=q.lines[q.index],Ce=re.lines[re.index];if((L[0]==="-"||L[0]==="+")&&(Ce[0]==="-"||Ce[0]==="+"))_t(te,q,re);else if(L[0]==="+"&&Ce[0]===" "){var Ge;(Ge=te.lines).push.apply(Ge,N(qe(q)))}else if(Ce[0]==="+"&&L[0]===" "){var at;(at=te.lines).push.apply(at,N(qe(re)))}else L[0]==="-"&&Ce[0]===" "?bt(te,q,re):Ce[0]==="-"&&L[0]===" "?bt(te,re,q,!0):L===Ce?(te.lines.push(L),q.index++,re.index++):Se(te,qe(q),qe(re))}jt(te,q),jt(te,re),Pt(te)}function _t(te,ee,ge){var De=qe(ee),ut=qe(ge);if(je(De)&&je(ut)){if(Ut(De,ut)&&Ae(ge,De,De.length-ut.length)){var q;(q=te.lines).push.apply(q,N(De));return}else if(Ut(ut,De)&&Ae(ee,ut,ut.length-De.length)){var re;(re=te.lines).push.apply(re,N(ut));return}}else if(xt(De,ut)){var L;(L=te.lines).push.apply(L,N(De));return}Se(te,De,ut)}function bt(te,ee,ge,De){var ut=qe(ee),q=rt(ge,ut);if(q.merged){var re;(re=te.lines).push.apply(re,N(q.merged))}else Se(te,De?q:ut,De?ut:q)}function Se(te,ee,ge){te.conflict=!0,te.lines.push({conflict:!0,mine:ee,theirs:ge})}function Be(te,ee,ge){for(;ee.offset<ge.offset&&ee.index<ee.lines.length;){var De=ee.lines[ee.index++];te.lines.push(De),ee.offset++}}function jt(te,ee){for(;ee.index<ee.lines.length;){var ge=ee.lines[ee.index++];te.lines.push(ge)}}function qe(te){for(var ee=[],ge=te.lines[te.index][0];te.index<te.lines.length;){var De=te.lines[te.index];if(ge==="-"&&De[0]==="+"&&(ge="+"),ge===De[0])ee.push(De),te.index++;else break}return ee}function rt(te,ee){for(var ge=[],De=[],ut=0,q=!1,re=!1;ut<ee.length&&te.index<te.lines.length;){var L=te.lines[te.index],Ce=ee[ut];if(Ce[0]==="+")break;if(q=q||L[0]!==" ",De.push(Ce),ut++,L[0]==="+")for(re=!0;L[0]==="+";)ge.push(L),L=te.lines[++te.index];Ce.substr(1)===L.substr(1)?(ge.push(L),te.index++):re=!0}if((ee[ut]||"")[0]==="+"&&q&&(re=!0),re)return ge;for(;ut<ee.length;)De.push(ee[ut++]);return{merged:De,changes:ge}}function je(te){return te.reduce(function(ee,ge){return ee&&ge[0]==="-"},!0)}function Ae(te,ee,ge){for(var De=0;De<ge;De++){var ut=ee[ee.length-ge+De].substr(1);if(te.lines[te.index+De]!==" "+ut)return!1}return te.index+=ge,!0}function lt(te){var ee=0,ge=0;return te.forEach(function(De){if(typeof De!="string"){var ut=lt(De.mine),q=lt(De.theirs);ee!==void 0&&(ut.oldLines===q.oldLines?ee+=ut.oldLines:ee=void 0),ge!==void 0&&(ut.newLines===q.newLines?ge+=ut.newLines:ge=void 0)}else ge!==void 0&&(De[0]==="+"||De[0]===" ")&&ge++,ee!==void 0&&(De[0]==="-"||De[0]===" ")&&ee++}),{oldLines:ee,newLines:ge}}function Nt(te){for(var ee=[],ge,De,ut=0;ut<te.length;ut++)ge=te[ut],ge.added?De=1:ge.removed?De=-1:De=0,ee.push([De,ge.value]);return ee}function ot(te){for(var ee=[],ge=0;ge<te.length;ge++){var De=te[ge];De.added?ee.push("<ins>"):De.removed&&ee.push("<del>"),ee.push(St(De.value)),De.added?ee.push("</ins>"):De.removed&&ee.push("</del>")}return ee.join("")}function St(te){var ee=te;return ee=ee.replace(/&/g,"&amp;"),ee=ee.replace(/</g,"&lt;"),ee=ee.replace(/>/g,"&gt;"),ee=ee.replace(/"/g,"&quot;"),ee}t.Diff=e,t.diffChars=a,t.diffWords=f,t.diffWordsWithSpace=g,t.diffLines=y,t.diffTrimmedLines=x,t.diffSentences=A,t.diffCss=X,t.diffJson=fe,t.diffArrays=He,t.structuredPatch=ft,t.createTwoFilesPatch=pt,t.createPatch=Ye,t.applyPatch=ce,t.applyPatches=tt,t.parsePatch=Re,t.merge=tr,t.convertChangesToDMP=Nt,t.convertChangesToXML=ot,t.canonicalize=Ne,Object.defineProperty(t,"__esModule",{value:!0})})});var Z5=R((sg,r0)=>{(function(t,e){"use strict";var r="0.7.41",n="",i="?",a="function",s="undefined",o="object",c="string",l="major",f="model",g="name",m="type",y="vendor",x="version",I="architecture",A="console",F="mobile",X="tablet",de="smarttv",N="wearable",H="embedded",z=500,Y="Amazon",G="Apple",ie="ASUS",fe="BlackBerry",Ne="Browser",ye="Chrome",He="Edge",Re="Firefox",Ze="Google",ce="Honor",tt="Huawei",ft="Lenovo",pt="LG",Ye="Microsoft",xt="Motorola",Ut="Nvidia",Pt="OnePlus",tr="Opera",Ke="OPPO",Q="Samsung",pe="Sharp",xe="Sony",_e="Xiaomi",nt="Zebra",_t="Facebook",bt="Chromium OS",Se="Mac OS",Be=" Browser",jt=function(q,re){var L={};for(var Ce in q)re[Ce]&&re[Ce].length%2===0?L[Ce]=re[Ce].concat(q[Ce]):L[Ce]=q[Ce];return L},qe=function(q){for(var re={},L=0;L<q.length;L++)re[q[L].toUpperCase()]=q[L];return re},rt=function(q,re){return typeof q===c?je(re).indexOf(je(q))!==-1:!1},je=function(q){return q.toLowerCase()},Ae=function(q){return typeof q===c?q.replace(/[^\d\.]/g,n).split(".")[0]:e},lt=function(q,re){if(typeof q===c)return q=q.replace(/^\s\s*/,n),typeof re===s?q:q.substring(0,z)},Nt=function(q,re){for(var L=0,Ce,Ge,at,ht,Je,Ee;L<re.length&&!Je;){var Kt=re[L],Ot=re[L+1];for(Ce=Ge=0;Ce<Kt.length&&!Je&&Kt[Ce];)if(Je=Kt[Ce++].exec(q),Je)for(at=0;at<Ot.length;at++)Ee=Je[++Ge],ht=Ot[at],typeof ht===o&&ht.length>0?ht.length===2?typeof ht[1]==a?this[ht[0]]=ht[1].call(this,Ee):this[ht[0]]=ht[1]:ht.length===3?typeof ht[1]===a&&!(ht[1].exec&&ht[1].test)?this[ht[0]]=Ee?ht[1].call(this,Ee,ht[2]):e:this[ht[0]]=Ee?Ee.replace(ht[1],ht[2]):e:ht.length===4&&(this[ht[0]]=Ee?ht[3].call(this,Ee.replace(ht[1],ht[2])):e):this[ht]=Ee||e;L+=2}},ot=function(q,re){for(var L in re)if(typeof re[L]===o&&re[L].length>0){for(var Ce=0;Ce<re[L].length;Ce++)if(rt(re[L][Ce],q))return L===i?e:L}else if(rt(re[L],q))return L===i?e:L;return re.hasOwnProperty("*")?re["*"]:q},St={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},te={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ee={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,x],[/opios[\/ ]+([\w\.]+)/i],[x,[g,tr+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[x,[g,tr+" GX"]],[/\bopr\/([\w\.]+)/i],[x,[g,tr]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[x,[g,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[x,[g,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,x],[/quark(?:pc)?\/([-\w\.]+)/i],[x,[g,"Quark"]],[/\bddg\/([\w\.]+)/i],[x,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[g,"UC"+Ne]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[x,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[x,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[x,[g,"Smart Lenovo "+Ne]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+Ne],x],[/\bfocus\/([\w\.]+)/i],[x,[g,Re+" Focus"]],[/\bopt\/([\w\.]+)/i],[x,[g,tr+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[g,tr+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[g,"MIUI"+Be]],[/fxios\/([\w\.-]+)/i],[x,[g,Re]],[/\bqihoobrowser\/?([\w\.]*)/i],[x,[g,"360"]],[/\b(qq)\/([\w\.]+)/i],[[g,/(.+)/,"$1Browser"],x],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1"+Be],x],[/samsungbrowser\/([\w\.]+)/i],[x,[g,Q+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[x,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[g,x],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[g],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[x,g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,_t],x],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,x],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[x,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[g,ye+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,ye+" WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[g,"Android "+Ne]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,x],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[x,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[x,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[x,ot,St]],[/(webkit|khtml)\/([\w\.]+)/i],[g,x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],x],[/(wolvic|librewolf)\/([\w\.]+)/i],[g,x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[g,Re+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[g,[x,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[g,[x,/master.|lts./,""]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[I,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[I,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[I,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[I,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[I,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[I,/ower/,n,je]],[/ sun4\w[;\)]/i],[[I,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[I,je]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[y,Q],[m,X]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[f,[y,Q],[m,F]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[y,G],[m,F]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[y,G],[m,X]],[/(macintosh);/i],[f,[y,G]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[y,pe],[m,F]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[f,[y,ce],[m,X]],[/honor([-\w ]+)[;\)]/i],[f,[y,ce],[m,F]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[f,[y,tt],[m,X]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[y,tt],[m,F]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[f,/_/g," "],[y,_e],[m,X]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[f,/_/g," "],[y,_e],[m,F]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[y,Ke],[m,F]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[f,[y,ot,{OnePlus:["304","403","203"],"*":Ke}],[m,X]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[y,"Vivo"],[m,F]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[y,"Realme"],[m,F]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[y,xt],[m,F]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[y,xt],[m,X]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[y,pt],[m,X]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[y,pt],[m,F]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[f,[y,ft],[m,X]],[/(nokia) (t[12][01])/i],[y,f,[m,X]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[f,/_/g," "],[m,F],[y,"Nokia"]],[/(pixel (c|tablet))\b/i],[f,[y,Ze],[m,X]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[y,Ze],[m,F]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[y,xe],[m,F]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[y,xe],[m,X]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[y,Pt],[m,F]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[y,Y],[m,X]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[y,Y],[m,F]],[/(playbook);[-\w\),; ]+(rim)/i],[f,y,[m,X]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[y,fe],[m,F]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[y,ie],[m,X]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[y,ie],[m,F]],[/(nexus 9)/i],[f,[y,"HTC"],[m,X]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[f,/_/g," "],[m,F]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[f,[y,"TCL"],[m,X]],[/(itel) ((\w+))/i],[[y,je],f,[m,ot,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[y,"Acer"],[m,X]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[y,"Meizu"],[m,F]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[y,"Ulefone"],[m,F]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[f,[y,"Energizer"],[m,F]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[f,[y,"Cat"],[m,F]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[f,[y,"Smartfren"],[m,F]],[/droid.+; (a(?:015|06[35]|142p?))/i],[f,[y,"Nothing"],[m,F]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[f,[y,"Archos"],[m,X]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[f,[y,"Archos"],[m,F]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[y,f,[m,X]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[y,f,[m,F]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,f,[m,X]],[/(surface duo)/i],[f,[y,Ye],[m,X]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[y,"Fairphone"],[m,F]],[/(u304aa)/i],[f,[y,"AT&T"],[m,F]],[/\bsie-(\w*)/i],[f,[y,"Siemens"],[m,F]],[/\b(rct\w+) b/i],[f,[y,"RCA"],[m,X]],[/\b(venue[\d ]{2,7}) b/i],[f,[y,"Dell"],[m,X]],[/\b(q(?:mv|ta)\w+) b/i],[f,[y,"Verizon"],[m,X]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[y,"Barnes & Noble"],[m,X]],[/\b(tm\d{3}\w+) b/i],[f,[y,"NuVision"],[m,X]],[/\b(k88) b/i],[f,[y,"ZTE"],[m,X]],[/\b(nx\d{3}j) b/i],[f,[y,"ZTE"],[m,F]],[/\b(gen\d{3}) b.+49h/i],[f,[y,"Swiss"],[m,F]],[/\b(zur\d{3}) b/i],[f,[y,"Swiss"],[m,X]],[/\b((zeki)?tb.*\b) b/i],[f,[y,"Zeki"],[m,X]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],f,[m,X]],[/\b(ns-?\w{0,9}) b/i],[f,[y,"Insignia"],[m,X]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[y,"NextBook"],[m,X]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],f,[m,F]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],f,[m,F]],[/\b(ph-1) /i],[f,[y,"Essential"],[m,F]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[y,"Envizen"],[m,X]],[/\b(trio[-\w\. ]+) b/i],[f,[y,"MachSpeed"],[m,X]],[/\btu_(1491) b/i],[f,[y,"Rotor"],[m,X]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[f,[y,Ut],[m,X]],[/(sprint) (\w+)/i],[y,f,[m,F]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[y,Ye],[m,F]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[y,nt],[m,X]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[y,nt],[m,F]],[/smart-tv.+(samsung)/i],[y,[m,de]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[y,Q],[m,de]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,pt],[m,de]],[/(apple) ?tv/i],[y,[f,G+" TV"],[m,de]],[/crkey/i],[[f,ye+"cast"],[y,Ze],[m,de]],[/droid.+aft(\w+)( bui|\))/i],[f,[y,Y],[m,de]],[/(shield \w+ tv)/i],[f,[y,Ut],[m,de]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[y,pe],[m,de]],[/(bravia[\w ]+)( bui|\))/i],[f,[y,xe],[m,de]],[/(mi(tv|box)-?\w+) bui/i],[f,[y,_e],[m,de]],[/Hbbtv.*(technisat) (.*);/i],[y,f,[m,de]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,lt],[f,lt],[m,de]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[f,[m,de]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,de]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,f,[m,A]],[/droid.+; (shield)( bui|\))/i],[f,[y,Ut],[m,A]],[/(playstation \w+)/i],[f,[y,xe],[m,A]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[y,Ye],[m,A]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[f,[y,Q],[m,N]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[y,f,[m,N]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[f,[y,Ke],[m,N]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[y,G],[m,N]],[/(opwwe\d{3})/i],[f,[y,Pt],[m,N]],[/(moto 360)/i],[f,[y,xt],[m,N]],[/(smartwatch 3)/i],[f,[y,xe],[m,N]],[/(g watch r)/i],[f,[y,pt],[m,N]],[/droid.+; (wt63?0{2,3})\)/i],[f,[y,nt],[m,N]],[/droid.+; (glass) \d/i],[f,[y,Ze],[m,N]],[/(pico) (4|neo3(?: link|pro)?)/i],[y,f,[m,N]],[/; (quest( \d| pro)?)/i],[f,[y,_t],[m,N]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[m,H]],[/(aeobc)\b/i],[f,[y,Y],[m,H]],[/(homepod).+mac os/i],[f,[y,G],[m,H]],[/windows iot/i],[[m,H]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[m,F]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[m,X]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,X]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,F]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[f,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[g,He+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[g,x],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,x],[/ladybird\//i],[[g,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,x],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[g,[x,ot,te]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[x,ot,te],[g,"Windows"]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,Se],[x,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[x,g],[/(ubuntu) ([\w\.]+) like android/i],[[g,/(.+)/,"$1 Touch"],x],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[g,x],[/\(bb(10);/i],[x,[g,fe]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[x,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[g,Re+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[x,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[x,[g,ye+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,bt],x],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,x],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,x]]},ge=function(q,re){if(typeof q===o&&(re=q,q=e),!(this instanceof ge))return new ge(q,re).getResult();var L=typeof t!==s&&t.navigator?t.navigator:e,Ce=q||(L&&L.userAgent?L.userAgent:n),Ge=L&&L.userAgentData?L.userAgentData:e,at=re?jt(ee,re):ee,ht=L&&L.userAgent==Ce;return this.getBrowser=function(){var Je={};return Je[g]=e,Je[x]=e,Nt.call(Je,Ce,at.browser),Je[l]=Ae(Je[x]),ht&&L&&L.brave&&typeof L.brave.isBrave==a&&(Je[g]="Brave"),Je},this.getCPU=function(){var Je={};return Je[I]=e,Nt.call(Je,Ce,at.cpu),Je},this.getDevice=function(){var Je={};return Je[y]=e,Je[f]=e,Je[m]=e,Nt.call(Je,Ce,at.device),ht&&!Je[m]&&Ge&&Ge.mobile&&(Je[m]=F),ht&&Je[f]=="Macintosh"&&L&&typeof L.standalone!==s&&L.maxTouchPoints&&L.maxTouchPoints>2&&(Je[f]="iPad",Je[m]=X),Je},this.getEngine=function(){var Je={};return Je[g]=e,Je[x]=e,Nt.call(Je,Ce,at.engine),Je},this.getOS=function(){var Je={};return Je[g]=e,Je[x]=e,Nt.call(Je,Ce,at.os),ht&&!Je[g]&&Ge&&Ge.platform&&Ge.platform!="Unknown"&&(Je[g]=Ge.platform.replace(/chrome os/i,bt).replace(/macos/i,Se)),Je},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ce},this.setUA=function(Je){return Ce=typeof Je===c&&Je.length>z?lt(Je,z):Je,this},this.setUA(Ce),this};ge.VERSION=r,ge.BROWSER=qe([g,x,l]),ge.CPU=qe([I]),ge.DEVICE=qe([f,y,m,A,F,de,X,N,H]),ge.ENGINE=ge.OS=qe([g,x]),typeof sg!==s?(typeof r0!==s&&r0.exports&&(sg=r0.exports=ge),sg.UAParser=ge):typeof define===a&&define.amd?define(function(){return ge}):typeof t!==s&&(t.UAParser=ge);var De=typeof t!==s&&(t.jQuery||t.Zepto);if(De&&!De.ua){var ut=new ge;De.ua=ut.getResult(),De.ua.get=function(){return ut.getUA()},De.ua.set=function(q){ut.setUA(q);var re=ut.getResult();for(var L in re)De.ua[L]=re[L]}}})(typeof window=="object"?window:sg)});var tH=R(bu=>{"use strict";var SE=bu&&bu.__assign||function(){return SE=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},SE.apply(this,arguments)},Hve=bu&&bu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bu,"__esModule",{value:!0});bu.getFileDiff=void 0;var Gve=Q5(),zve=vu(),Vve=Z5(),Wve=Hve(vE()),wE=e0(),Kve={files:wE.SnackIdentityState.files,dependencies:wE.SnackIdentityState.dependencies,sdkVersion:wE.SnackIdentityState.sdkVersion};function eH(t,e){var r=(0,Gve.createPatch)("code",t,e,"","",{context:0});if(r)return r;throw new Error("Error creating a file diff")}bu.getFileDiff=eH;var Xve="https://snack-code-uploads.s3.us-west-1.amazonaws.com/~asset/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",Yve=function(){function t(e){var r=this;this.code=Kve,this.placeholderURLs={},this.uploadedURLs={},this.onFileUploaded=function(n,i,a){var s=n.path;if(delete r.placeholderURLs[s],i&&(r.uploadedURLs[s]=i,!Object.keys(r.placeholderURLs).length)){var o=r.createCodeMessage(r.code,r.codeMessage,r.code);r.verifyCodeMessageSize(o)&&r.callback(o,r.code)}},this.logger=e.logger,this.callback=e.callback,this.verifyCodeMessageSize=e.verifyCodeMessageSize,this.maxDiffPlaceholder=e.maxDiffPlaceholder,this.codeUploader=e.apiURL?new Wve.default({apiURL:e.apiURL,logger:e.logger,callback:this.onFileUploaded}):void 0}return t.prototype.setCode=function(e){var r,n,i;if(e!==this.code){var a=this.code,s=e.files;this.code=e;for(var o in a.files)a.files[o].contents!==((r=s[o])===null||r===void 0?void 0:r.contents)&&(delete this.placeholderURLs[o],delete this.uploadedURLs[o],(n=this.codeUploader)===null||n===void 0||n.remove(o,a.files[o]));var c=this.createCodeMessage(e,this.codeMessage,a);if(this.codeMessage=c,this.verifyCodeMessageSize(c)){Object.keys(this.placeholderURLs).length||this.callback(c,e);return}if(this.codeUploader)for(var l=Object.keys(s).filter(function(m){return s[m].type==="CODE"}).sort(function(m,y){return s[y].contents.length-s[m].contents.length}),f=0;f<l.length;f++){var o=l[f];if(!this.uploadedURLs[o]&&!this.placeholderURLs[o]){var g=s[o];if(this.placeholderURLs[o]=Xve,this.codeUploader.add(o,g),c.diff[o]="",c.s3url[o]=this.placeholderURLs[o],this.verifyCodeMessageSize(c))return}}(i=this.logger)===null||i===void 0||i.error("Message size is too large")}},t.prototype.createCodeMessage=function(e,r,n){var i=e.files,a=e.dependencies,s=e.sdkVersion,o=SE({},i),c={};for(var l in i){var f=i[l];this.uploadedURLs[l]||this.placeholderURLs[l]?(o[l]="",c[l]=this.uploadedURLs[l]||this.placeholderURLs[l]):(f.type==="CODE"?r?.diff[l]&&n?.files[l].contents===e.files[l].contents?o[l]=r.diff[l]:this.maxDiffPlaceholder&&f.contents.length>=this.maxDiffPlaceholder.length?o[l]=this.maxDiffPlaceholder:o[l]=eH("",f.contents):o[l]="",f.type==="ASSET"&&typeof f.contents=="string"&&(c[l]=f.contents))}var g={};for(var m in a){var y=a[m];y.handle&&!(0,zve.isModulePreloaded)(m,s)&&(g[m]={version:y.version,handle:y.handle,resolved:y.handle.substring(y.handle.lastIndexOf("@")+1)})}var x={expoSDKVersion:e.sdkVersion};if(typeof navigator<"u"&&navigator.userAgent){var I=new Vve.UAParser(navigator.userAgent).getResult();x.webHostName=typeof window<"u"?window.location.hostname:void 0,x.webOSArchitecture=I.cpu.architecture,x.webOSFamily=I.os.name,x.webOSVersion=I.os.version,x.webLayoutEngine=I.engine.name,x.webDeviceType=I.device.type,x.webBrowser=I.browser.name,x.webBrowserVersion=I.browser.version}return{type:"CODE",diff:o,s3url:c,dependencies:g,metadata:x}},t}();bu.default=Yve});var i0=R(_u=>{"use strict";var Jve=_u&&_u.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(f){try{l(n.next(f))}catch(g){s(g)}}function c(f){try{l(n.throw(f))}catch(g){s(g)}}function l(f){f.done?a(f.value):i(f.value).then(o,c)}l((n=n.apply(t,e||[])).next())})},Qve=_u&&_u.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(f){return c([l,f])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Zve=_u&&_u.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_u,"__esModule",{value:!0});var rH=Zve(tH()),eye=yE(),tye=function(){function t(e){var r=this;this.connectionsCount=0,this.onCodeMessageReady=function(s){var o;r.codeMessage=s,(o=r.logger)===null||o===void 0||o.comm("Sending code...",r.logSuffix),r.publish(s)};var n=e.apiURL,i=e.channel,a=e.verbose;this.channel=i??"",this.logger=a?(0,eye.createLogger)(!0):void 0,this.logSuffix=e.name?" (".concat(e.name,")"):"",i?this.codeMessageBuilder=new rH.default({verifyCodeMessageSize:this.onVerifyCodeMessageSize,callback:this.onCodeMessageReady,apiURL:n,logger:this.logger,maxDiffPlaceholder:"X".repeat(t.CODE_SIZE_LIMIT_FOR_DIFF)}):this.codeMessageBuilder=new rH.default({verifyCodeMessageSize:function(){return!0},callback:this.onCodeMessageReady,logger:this.logger})}return t.prototype.addEventListener=function(e,r){this.callback=r},t.prototype.removeEventListener=function(e,r){this.callback=void 0},t.prototype.postMessage=function(e){switch(e.type){case"start":this.start();break;case"stop":this.stop();break;case"update_code":this.codeMessageBuilder.setCode(e.data);break;case"protocol_message":this.publish(e.data);break;case"synthetic_event":this.onSyntheticEvent(e.data);break}},t.prototype.handleMessage=function(e,r){this.onProtocolMessage(e,r)},t.prototype.handleChannelEvent=function(e,r){var n,i,a;if(e==="join")try{var s=JSON.parse(r);this.connectionsCount++,(n=this.callback)===null||n===void 0||n.call(this,{type:"connect",connectionId:r,data:s}),this.codeMessage&&((i=this.logger)===null||i===void 0||i.comm("Sending code...",this.logSuffix),this.publish(this.codeMessage))}catch{}else this.connectionsCount=Math.max(this.connectionsCount-1,0),(a=this.callback)===null||a===void 0||a.call(this,{type:"disconnect",connectionId:r,data:{}})},t.prototype.onProtocolMessage=function(e,r){var n,i;r.type==="RESEND_CODE"?this.codeMessage&&((n=this.logger)===null||n===void 0||n.comm("Resending code...",this.logSuffix),this.publish(this.codeMessage)):(i=this.callback)===null||i===void 0||i.call(this,{type:"protocol_message",connectionId:e,data:r})},t.prototype.publish=function(e){var r,n,i;return Jve(this,void 0,void 0,function(){var a;return Qve(this,function(s){switch(s.label){case 0:if(!this.connectionsCount)return[2];if(!this.isStarted())return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.sendAsync(this.channel,e)];case 2:return s.sent(),[3,4];case 3:return a=s.sent(),(r=this.logger)===null||r===void 0||r.error("Failed to publish message",e.type,a,this.logSuffix),[3,4];case 4:return[3,6];case 5:(n=this.callback)===null||n===void 0||n.call(this,{type:"synthetic_event",data:e}),s.label=6;case 6:return(i=this.callback)===null||i===void 0||i.call(this,{type:"send_message",data:e}),[2]}})})},t.prototype.onSyntheticEvent=function(e){var r,n,i;if(typeof e=="string")try{var a=JSON.parse(e);switch(a.type){case"CONNECT":this.connectionsCount++,(r=this.callback)===null||r===void 0||r.call(this,{type:"connect",connectionId:JSON.stringify(a.device),data:a.device});break;case"DISCONNECT":this.connectionsCount=Math.max(this.connectionsCount-1,0),(n=this.callback)===null||n===void 0||n.call(this,{type:"disconnect",connectionId:JSON.stringify(a.device),data:{}});break;case"MESSAGE":this.onProtocolMessage(JSON.stringify(a.message.device),a.message);break}}catch(s){(i=this.logger)===null||i===void 0||i.error("Failed to parse postMessage",s,e,this.logSuffix)}},t.CODE_SIZE_LIMIT_FOR_DIFF=32768,t}();_u.default=tye});var sH=R(ts=>{"use strict";var rye=ts&&ts.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iye=ts&&ts.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(f){try{l(n.next(f))}catch(g){s(g)}}function c(f){try{l(n.throw(f))}catch(g){s(g)}}function l(f){f.done?a(f.value):i(f.value).then(o,c)}l((n=n.apply(t,e||[])).next())})},nye=ts&&ts.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(f){return c([l,f])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},nH=ts&&ts.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ts,"__esModule",{value:!0});ts.calcPubNubCodeMessageSize=void 0;var iH=nH(Y5()),TE=nH(i0());function aH(t,e){return encodeURIComponent(t+JSON.stringify(e).replace(/[!~*'()]/g,function(r){return"%".concat(r.charCodeAt(0).toString(16).toUpperCase())})).length+200}ts.calcPubNubCodeMessageSize=aH;var aye=function(t){rye(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.onPubNubPresence=function(n){switch(n.action){case"join":r.handleChannelEvent("join",n.uuid);break;case"timeout":case"leave":r.handleChannelEvent("leave",n.uuid);break}},r.onPubNubMessage=function(n){var i=n.message;r.handleMessage(n.publisher,i)},r.onPubNubStatus=function(n){},r}return e.prototype.start=function(){var r;this.stop(),this.pubNubClientId||(this.pubNubClientId=iH.default.generateUUID()),this.channel&&((r=this.logger)===null||r===void 0||r.comm("Starting channel...",this.channel,this.logSuffix),this.pubNub=new iH.default({publishKey:"pub-c-2a7fd67b-333d-40db-ad2d-3255f8835f70",subscribeKey:"sub-c-0b655000-d784-11e6-b950-02ee2ddab7fe",uuid:this.pubNubClientId,ssl:!0,presenceTimeout:600,heartbeatInterval:60}),this.pubNub.addListener({presence:this.onPubNubPresence,message:this.onPubNubMessage,status:this.onPubNubStatus}),this.pubNub.subscribe({channels:[this.channel],withPresence:!0}))},e.prototype.stop=function(){var r;this.pubNub&&((r=this.logger)===null||r===void 0||r.comm("Stopping...",this.logSuffix),this.pubNub.removeListener({presence:this.onPubNubPresence,message:this.onPubNubMessage,status:this.onPubNubStatus}),this.pubNub.unsubscribe({channels:[this.channel]}),this.pubNub.stop(),this.pubNub=void 0)},e.prototype.isStarted=function(){return this.pubNub!=null},e.prototype.sendAsync=function(r,n){var i;return iye(this,void 0,void 0,function(){return nye(this,function(a){switch(a.label){case 0:return[4,(i=this.pubNub)===null||i===void 0?void 0:i.publish({channel:r,message:n})];case 1:return a.sent(),[2]}})})},e.prototype.onVerifyCodeMessageSize=function(r){var n=0;for(var i in r.diff)n+=i.length+r.diff[i].length;if(n>=TE.default.CODE_SIZE_LIMIT_FOR_DIFF)return!1;var a=aH(this.channel,r);return a<TE.default.CODE_SIZE_LIMIT_FOR_DIFF},e}(TE.default);ts.default=aye});var CE=R(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.ERROR_PACKET=cc.PACKET_TYPES_REVERSE=cc.PACKET_TYPES=void 0;var wo=Object.create(null);cc.PACKET_TYPES=wo;wo.open="0";wo.close="1";wo.ping="2";wo.pong="3";wo.message="4";wo.upgrade="5";wo.noop="6";var oH=Object.create(null);cc.PACKET_TYPES_REVERSE=oH;Object.keys(wo).forEach(t=>{oH[wo[t]]=t});var sye={type:"error",data:"parser error"};cc.ERROR_PACKET=sye});var cH=R(EE=>{"use strict";Object.defineProperty(EE,"__esModule",{value:!0});var oye=CE(),uye=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",cye=typeof ArrayBuffer=="function",lye=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,dye=({type:t,data:e},r,n)=>uye&&e instanceof Blob?r?n(e):uH(e,n):cye&&(e instanceof ArrayBuffer||lye(e))?r?n(e):uH(new Blob([e]),n):n(oye.PACKET_TYPES[t]+(e||"")),uH=(t,e)=>{let r=new FileReader;return r.onload=function(){let n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(t)};EE.default=dye});var lH=R(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});bf.decode=bf.encode=void 0;var yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",og=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<yf.length;t++)og[yf.charCodeAt(t)]=t;var fye=t=>{let e=new Uint8Array(t),r,n=e.length,i="";for(r=0;r<n;r+=3)i+=yf[e[r]>>2],i+=yf[(e[r]&3)<<4|e[r+1]>>4],i+=yf[(e[r+1]&15)<<2|e[r+2]>>6],i+=yf[e[r+2]&63];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i};bf.encode=fye;var pye=t=>{let e=t.length*.75,r=t.length,n,i=0,a,s,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);let l=new ArrayBuffer(e),f=new Uint8Array(l);for(n=0;n<r;n+=4)a=og[t.charCodeAt(n)],s=og[t.charCodeAt(n+1)],o=og[t.charCodeAt(n+2)],c=og[t.charCodeAt(n+3)],f[i++]=a<<2|s>>4,f[i++]=(s&15)<<4|o>>2,f[i++]=(o&3)<<6|c&63;return l};bf.decode=pye});var fH=R(xE=>{"use strict";Object.defineProperty(xE,"__esModule",{value:!0});var n0=CE(),hye=lH(),gye=typeof ArrayBuffer=="function",mye=(t,e)=>{if(typeof t!="string")return{type:"message",data:dH(t,e)};let r=t.charAt(0);return r==="b"?{type:"message",data:vye(t.substring(1),e)}:n0.PACKET_TYPES_REVERSE[r]?t.length>1?{type:n0.PACKET_TYPES_REVERSE[r],data:t.substring(1)}:{type:n0.PACKET_TYPES_REVERSE[r]}:n0.ERROR_PACKET},vye=(t,e)=>{if(gye){let r=(0,hye.decode)(t);return dH(r,e)}else return{base64:!0,data:t}},dH=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};xE.default=mye});var ug=R(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.decodePayload=bs.decodePacket=bs.encodePayload=bs.encodePacket=bs.protocol=void 0;var pH=cH();bs.encodePacket=pH.default;var hH=fH();bs.decodePacket=hH.default;var gH="",yye=(t,e)=>{let r=t.length,n=new Array(r),i=0;t.forEach((a,s)=>{(0,pH.default)(a,!1,o=>{n[s]=o,++i===r&&e(n.join(gH))})})};bs.encodePayload=yye;var bye=(t,e)=>{let r=t.split(gH),n=[];for(let i=0;i<r.length;i++){let a=(0,hH.default)(r[i],e);if(n.push(a),a.type==="error")break}return n};bs.decodePayload=bye;bs.protocol=4});var Cl=R(mH=>{mH.Emitter=Ea;function Ea(t){if(t)return _ye(t)}function _ye(t){for(var e in Ea.prototype)t[e]=Ea.prototype[e];return t}Ea.prototype.on=Ea.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ea.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};Ea.prototype.off=Ea.prototype.removeListener=Ea.prototype.removeAllListeners=Ea.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Ea.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};Ea.prototype.emitReserved=Ea.prototype.emit;Ea.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ea.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var cg=R(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0});a0.globalThisShim=void 0;a0.globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")()});var _f=R(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.byteLength=lc.installTimerFunctions=lc.pick=void 0;var s0=cg();function wye(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}lc.pick=wye;var Sye=setTimeout,Tye=clearTimeout;function Cye(t,e){e.useNativeTimers?(t.setTimeoutFn=Sye.bind(s0.globalThisShim),t.clearTimeoutFn=Tye.bind(s0.globalThisShim)):(t.setTimeoutFn=setTimeout.bind(s0.globalThisShim),t.clearTimeoutFn=clearTimeout.bind(s0.globalThisShim))}lc.installTimerFunctions=Cye;var Eye=1.33;function xye(t){return typeof t=="string"?Aye(t):Math.ceil((t.byteLength||t.size)*Eye)}lc.byteLength=xye;function Aye(t){let e=0,r=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}});var u0=R((rPe,vH)=>{var wf=1e3,Sf=wf*60,Tf=Sf*60,El=Tf*24,kye=El*7,Iye=El*365.25;vH.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Dye(t);if(r==="number"&&isFinite(t))return e.long?Pye(t):Oye(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Dye(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Iye;case"weeks":case"week":case"w":return r*kye;case"days":case"day":case"d":return r*El;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Tf;case"minutes":case"minute":case"mins":case"min":case"m":return r*Sf;case"seconds":case"second":case"secs":case"sec":case"s":return r*wf;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Oye(t){var e=Math.abs(t);return e>=El?Math.round(t/El)+"d":e>=Tf?Math.round(t/Tf)+"h":e>=Sf?Math.round(t/Sf)+"m":e>=wf?Math.round(t/wf)+"s":t+"ms"}function Pye(t){var e=Math.abs(t);return e>=El?o0(t,e,El,"day"):e>=Tf?o0(t,e,Tf,"hour"):e>=Sf?o0(t,e,Sf,"minute"):e>=wf?o0(t,e,wf,"second"):t+" ms"}function o0(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var bH=R((iPe,yH)=>{function Rye(t){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=i,r.enabled=s,r.humanize=u0(),r.destroy=l,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let g=0;for(let m=0;m<f.length;m++)g=(g<<5)-g+f.charCodeAt(m),g|=0;return r.colors[Math.abs(g)%r.colors.length]}r.selectColor=e;function r(f){let g,m=null,y,x;function I(...A){if(!I.enabled)return;let F=I,X=Number(new Date),de=X-(g||X);F.diff=de,F.prev=g,F.curr=X,g=X,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let N=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(z,Y)=>{if(z==="%%")return"%";N++;let G=r.formatters[Y];if(typeof G=="function"){let ie=A[N];z=G.call(F,ie),A.splice(N,1),N--}return z}),r.formatArgs.call(F,A),(F.log||r.log).apply(F,A)}return I.namespace=f,I.useColors=r.useColors(),I.color=r.selectColor(f),I.extend=n,I.destroy=r.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(y!==r.namespaces&&(y=r.namespaces,x=r.enabled(f)),x),set:A=>{m=A}}),typeof r.init=="function"&&r.init(I),I}function n(f,g){let m=r(this.namespace+(typeof g>"u"?":":g)+f);return m.log=this.log,m}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let g,m=(typeof f=="string"?f:"").split(/[\s,]+/),y=m.length;for(g=0;g<y;g++)m[g]&&(f=m[g].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function a(){let f=[...r.names.map(o),...r.skips.map(o).map(g=>"-"+g)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let g,m;for(g=0,m=r.skips.length;g<m;g++)if(r.skips[g].test(f))return!1;for(g=0,m=r.names.length;g<m;g++)if(r.names[g].test(f))return!0;return!1}function o(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}yH.exports=Rye});var lg=R((rs,c0)=>{rs.formatArgs=Nye;rs.save=Fye;rs.load=Mye;rs.useColors=Lye;rs.storage=Uye();rs.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();rs.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Lye(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Nye(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+c0.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}rs.log=console.debug||console.log||(()=>{});function Fye(t){try{t?rs.storage.setItem("debug",t):rs.storage.removeItem("debug")}catch{}}function Mye(){let t;try{t=rs.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=!1),t}function Uye(){try{return localStorage}catch{}}c0.exports=bH()(rs);var{formatters:$ye}=c0.exports;$ye.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var l0=R(Cf=>{"use strict";var Bye=Cf&&Cf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.Transport=void 0;var qye=ug(),jye=Cl(),Hye=_f(),Gye=Bye(lg()),zye=(0,Gye.default)("engine.io-client:transport"),AE=class extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}},kE=class extends jye.Emitter{constructor(e){super(),this.writable=!1,(0,Hye.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,r,n){return super.emitReserved("error",new AE(e,r,n)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):zye("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let r=(0,qye.decodePacket)(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}};Cf.Transport=kE});var DE=R(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.yeast=fc.decode=fc.encode=void 0;var SH="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),d0=64,TH={},_H=0,dc=0,wH;function IE(t){let e="";do e=SH[t%d0]+e,t=Math.floor(t/d0);while(t>0);return e}fc.encode=IE;function Vye(t){let e=0;for(dc=0;dc<t.length;dc++)e=e*d0+TH[t.charAt(dc)];return e}fc.decode=Vye;function Wye(){let t=IE(+new Date);return t!==wH?(_H=0,wH=t):t+"."+IE(_H++)}fc.yeast=Wye;for(;dc<d0;dc++)TH[SH[dc]]=dc});var f0=R(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.decode=Ef.encode=void 0;function Kye(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}Ef.encode=Kye;function Xye(t){let e={},r=t.split("&");for(let n=0,i=r.length;n<i;n++){let a=r[n].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}Ef.decode=Xye});var EH=R(p0=>{"use strict";Object.defineProperty(p0,"__esModule",{value:!0});p0.hasCORS=void 0;var CH=!1;try{CH=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}p0.hasCORS=CH});var xH=R(h0=>{"use strict";Object.defineProperty(h0,"__esModule",{value:!0});h0.XHR=void 0;var Yye=EH(),Jye=cg();function Qye(t){let e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Yye.hasCORS))return new XMLHttpRequest}catch{}if(!e)try{return new Jye.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}h0.XHR=Qye});var OH=R(pc=>{"use strict";var Zye=pc&&pc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pc,"__esModule",{value:!0});pc.Request=pc.Polling=void 0;var e0e=l0(),t0e=Zye(lg()),r0e=DE(),i0e=f0(),AH=ug(),DH=xH(),n0e=Cl(),kH=_f(),a0e=cg(),qa=(0,t0e.default)("engine.io-client:polling");function s0e(){}var o0e=function(){return new DH.XHR({xdomain:!1}).responseType!=null}(),OE=class extends e0e.Transport{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){let n=location.protocol==="https:",i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port,this.xs=e.secure!==n}let r=e&&e.forceBase64;this.supportsBinary=o0e&&!r}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let r=()=>{qa("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&(qa("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){qa("pre-pause polling complete"),--n||r()})),this.writable||(qa("we are currently writing - waiting to pause"),n++,this.once("drain",function(){qa("pre-pause writing complete"),--n||r()}))}else r()}poll(){qa("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){qa("polling got data %s",e);let r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};(0,AH.decodePayload)(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this.poll():qa('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{qa("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(qa("transport open - closing"),e()):(qa("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,AH.encodePayload)(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{},r=this.opts.secure?"https":"http",n="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=(0,r0e.yeast)()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port);let i=(0,i0e.encode)(e),a=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(a?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new wu(this.uri(),e)}doWrite(e,r){let n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){qa("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}};pc.Polling=OE;var wu=class t extends n0e.Emitter{constructor(e,r){super(),(0,kH.installTimerFunctions)(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){let e=(0,kH.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;let r=this.xhr=new DH.XHR(e);try{qa("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},qa("xhr data %s",this.data),r.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document<"u"&&(this.index=t.requestsCount++,t.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=s0e,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete t.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};pc.Request=wu;wu.requestsCount=0;wu.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",IH);else if(typeof addEventListener=="function"){let t="onpagehide"in a0e.globalThisShim?"pagehide":"unload";addEventListener(t,IH,!1)}}function IH(){for(let t in wu.requests)wu.requests.hasOwnProperty(t)&&wu.requests[t].abort()}});var PE=R(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.defaultBinaryType=So.usingBrowserWebSocket=So.WebSocket=So.nextTick=void 0;var PH=cg();So.nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0);So.WebSocket=PH.globalThisShim.WebSocket||PH.globalThisShim.MozWebSocket;So.usingBrowserWebSocket=!0;So.defaultBinaryType="arraybuffer"});var LH=R(xf=>{"use strict";var u0e=xf&&xf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xf,"__esModule",{value:!0});xf.WS=void 0;var c0e=l0(),l0e=f0(),d0e=DE(),f0e=_f(),Su=PE(),p0e=u0e(lg()),h0e=ug(),g0e=(0,p0e.default)("engine.io-client:websocket"),RH=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",RE=class extends c0e.Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),r=this.opts.protocols,n=RH?{}:(0,f0e.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Su.usingBrowserWebSocket&&!RH?r?new Su.WebSocket(e,r):new Su.WebSocket(e):new Su.WebSocket(e,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||Su.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){let n=e[r],i=r===e.length-1;(0,h0e.encodePacket)(n,this.supportsBinary,a=>{let s={};Su.usingBrowserWebSocket||(n.options&&(s.compress=n.options.compress),this.opts.perMessageDeflate&&(typeof a=="string"?Buffer.byteLength(a):a.length)<this.opts.perMessageDeflate.threshold&&(s.compress=!1));try{Su.usingBrowserWebSocket?this.ws.send(a):this.ws.send(a,s)}catch{g0e("websocket closed before onclose event")}i&&(0,Su.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{},r=this.opts.secure?"wss":"ws",n="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=(0,d0e.yeast)()),this.supportsBinary||(e.b64=1);let i=(0,l0e.encode)(e),a=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(a?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}check(){return!!Su.WebSocket}};xf.WS=RE});var LE=R(g0=>{"use strict";Object.defineProperty(g0,"__esModule",{value:!0});g0.transports=void 0;var m0e=OH(),v0e=LH();g0.transports={websocket:v0e.WS,polling:m0e.Polling}});var NE=R(m0=>{"use strict";Object.defineProperty(m0,"__esModule",{value:!0});m0.parse=void 0;var y0e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,b0e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function _0e(t){let e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let i=y0e.exec(t||""),a={},s=14;for(;s--;)a[b0e[s]]=i[s]||"";return r!=-1&&n!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=w0e(a,a.path),a.queryKey=S0e(a,a.query),a}m0.parse=_0e;function w0e(t,e){let r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function S0e(t,e){let r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,a){i&&(r[i]=a)}),r}});var UH=R(Af=>{"use strict";var T0e=Af&&Af.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Af,"__esModule",{value:!0});Af.Socket=void 0;var C0e=LE(),NH=_f(),E0e=f0(),FH=NE(),x0e=T0e(lg()),A0e=Cl(),MH=ug(),Ni=(0,x0e.default)("engine.io-client:socket"),v0=class t extends A0e.Emitter{constructor(e,r={}){super(),e&&typeof e=="object"&&(r=e,e=null),e?(e=(0,FH.parse)(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=(0,FH.parse)(r.host).host),(0,NH.installTimerFunctions)(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=(0,E0e.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){Ni('creating transport "%s"',e);let r=Object.assign({},this.opts.query);r.EIO=MH.protocol,r.transport=e,this.id&&(r.sid=this.id);let n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return Ni("options: %j",n),new C0e.transports[e](n)}open(){let e;if(this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(r){Ni("error while creating transport: %s",r),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){Ni("setting transport %s",e.name),this.transport&&(Ni("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){Ni('probing transport "%s"',e);let r=this.createTransport(e),n=!1;t.priorWebsocketSuccess=!1;let i=()=>{n||(Ni('probe transport "%s" opened',e),r.send([{type:"ping",data:"probe"}]),r.once("packet",g=>{if(!n)if(g.type==="pong"&&g.data==="probe"){if(Ni('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;t.priorWebsocketSuccess=r.name==="websocket",Ni('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{n||this.readyState!=="closed"&&(Ni("changing transport and sending upgrade packet"),f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{Ni('probe transport "%s" failed',e);let m=new Error("probe error");m.transport=r.name,this.emitReserved("upgradeError",m)}}))};function a(){n||(n=!0,f(),r.close(),r=null)}let s=g=>{let m=new Error("probe error: "+g);m.transport=r.name,a(),Ni('probe transport "%s" failed because of error: %s',e,g),this.emitReserved("upgradeError",m)};function o(){s("transport closed")}function c(){s("socket closed")}function l(g){r&&g.name!==r.name&&(Ni('"%s" works - aborting "%s"',g.name,r.name),a())}let f=()=>{r.removeListener("open",i),r.removeListener("error",s),r.removeListener("close",o),this.off("close",c),this.off("upgrading",l)};r.once("open",i),r.once("error",s),r.once("close",o),this.once("close",c),this.once("upgrading",l),r.open()}onOpen(){if(Ni("socket open"),this.readyState="open",t.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){Ni("starting upgrade probes");let e=0,r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Ni('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else Ni('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this.getWritablePackets();Ni("flushing %d packets in socket",e.length),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){let i=this.writeBuffer[n].data;if(i&&(r+=(0,NH.byteLength)(i)),n>0&&r>this.maxPayload)return Ni("only send %d out of %d packets",n,this.writeBuffer.length),this.writeBuffer.slice(0,n);r+=2}return Ni("payload size is %d (max: %d)",r,this.maxPayload),this.writeBuffer}write(e,r,n){return this.sendPacket("message",e,r,n),this}send(e,r,n){return this.sendPacket("message",e,r,n),this}sendPacket(e,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;let a={type:e,data:r,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){let e=()=>{this.onClose("forced close"),Ni("socket closing - telling transport to close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){Ni("socket error %j",e),t.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(Ni('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let r=[],n=0,i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}};Af.Socket=v0;v0.protocol=MH.protocol});var FE=R(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.nextTick=ua.parse=ua.installTimerFunctions=ua.transports=ua.Transport=ua.protocol=ua.Socket=void 0;var $H=UH();Object.defineProperty(ua,"Socket",{enumerable:!0,get:function(){return $H.Socket}});ua.protocol=$H.Socket.protocol;var k0e=l0();Object.defineProperty(ua,"Transport",{enumerable:!0,get:function(){return k0e.Transport}});var I0e=LE();Object.defineProperty(ua,"transports",{enumerable:!0,get:function(){return I0e.transports}});var D0e=_f();Object.defineProperty(ua,"installTimerFunctions",{enumerable:!0,get:function(){return D0e.installTimerFunctions}});var O0e=NE();Object.defineProperty(ua,"parse",{enumerable:!0,get:function(){return O0e.parse}});var P0e=PE();Object.defineProperty(ua,"nextTick",{enumerable:!0,get:function(){return P0e.nextTick}})});var qH=R((mPe,BH)=>{function R0e(t){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=i,r.enabled=s,r.humanize=u0(),r.destroy=l,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let g=0;for(let m=0;m<f.length;m++)g=(g<<5)-g+f.charCodeAt(m),g|=0;return r.colors[Math.abs(g)%r.colors.length]}r.selectColor=e;function r(f){let g,m=null,y,x;function I(...A){if(!I.enabled)return;let F=I,X=Number(new Date),de=X-(g||X);F.diff=de,F.prev=g,F.curr=X,g=X,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let N=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(z,Y)=>{if(z==="%%")return"%";N++;let G=r.formatters[Y];if(typeof G=="function"){let ie=A[N];z=G.call(F,ie),A.splice(N,1),N--}return z}),r.formatArgs.call(F,A),(F.log||r.log).apply(F,A)}return I.namespace=f,I.useColors=r.useColors(),I.color=r.selectColor(f),I.extend=n,I.destroy=r.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(y!==r.namespaces&&(y=r.namespaces,x=r.enabled(f)),x),set:A=>{m=A}}),typeof r.init=="function"&&r.init(I),I}function n(f,g){let m=r(this.namespace+(typeof g>"u"?":":g)+f);return m.log=this.log,m}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let g,m=(typeof f=="string"?f:"").split(/[\s,]+/),y=m.length;for(g=0;g<y;g++)m[g]&&(f=m[g].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function a(){let f=[...r.names.map(o),...r.skips.map(o).map(g=>"-"+g)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let g,m;for(g=0,m=r.skips.length;g<m;g++)if(r.skips[g].test(f))return!1;for(g=0,m=r.names.length;g<m;g++)if(r.names[g].test(f))return!0;return!1}function o(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}BH.exports=R0e});var dg=R((is,y0)=>{is.formatArgs=N0e;is.save=F0e;is.load=M0e;is.useColors=L0e;is.storage=U0e();is.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();is.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function L0e(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function N0e(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+y0.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}is.log=console.debug||console.log||(()=>{});function F0e(t){try{t?is.storage.setItem("debug",t):is.storage.removeItem("debug")}catch{}}function M0e(){let t;try{t=is.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=!1),t}function U0e(){try{return localStorage}catch{}}y0.exports=qH()(is);var{formatters:$0e}=y0.exports;$0e.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var HH=R(kf=>{"use strict";var B0e=kf&&kf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kf,"__esModule",{value:!0});kf.url=void 0;var q0e=FE(),j0e=B0e(dg()),jH=j0e.default("socket.io-client:url");function H0e(t,e="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(jH("protocol-less url %s",t),typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),jH("parse %s",t),n=q0e.parse(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let a=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+e,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}kf.url=H0e});var ME=R(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});_0.isBinary=zH;_0.hasBinary=b0;var G0e=typeof ArrayBuffer=="function",z0e=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,GH=Object.prototype.toString,V0e=typeof Blob=="function"||typeof Blob<"u"&&GH.call(Blob)==="[object BlobConstructor]",W0e=typeof File=="function"||typeof File<"u"&&GH.call(File)==="[object FileConstructor]";function zH(t){return G0e&&(t instanceof ArrayBuffer||z0e(t))||V0e&&t instanceof Blob||W0e&&t instanceof File}function b0(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(b0(t[r]))return!0;return!1}if(zH(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return b0(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&b0(t[r]))return!0;return!1}});var VH=R(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});w0.deconstructPacket=X0e;w0.reconstructPacket=Y0e;var K0e=ME();function X0e(t){let e=[],r=t.data,n=t;return n.data=UE(r,e),n.attachments=e.length,{packet:n,buffers:e}}function UE(t,e){if(!t)return t;if((0,K0e.isBinary)(t)){let r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=UE(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=UE(t[n],e));return r}return t}function Y0e(t,e){return t.data=$E(t.data,e),delete t.attachments,t}function $E(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=$E(t[r],e);else if(typeof t=="object")for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=$E(t[r],e));return t}});var KH=R((_Pe,WH)=>{function J0e(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=u0(),r.destroy=l,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let g=0;for(let m=0;m<f.length;m++)g=(g<<5)-g+f.charCodeAt(m),g|=0;return r.colors[Math.abs(g)%r.colors.length]}r.selectColor=e;function r(f){let g,m=null,y,x;function I(...A){if(!I.enabled)return;let F=I,X=Number(new Date),de=X-(g||X);F.diff=de,F.prev=g,F.curr=X,g=X,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let N=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(z,Y)=>{if(z==="%%")return"%";N++;let G=r.formatters[Y];if(typeof G=="function"){let ie=A[N];z=G.call(F,ie),A.splice(N,1),N--}return z}),r.formatArgs.call(F,A),(F.log||r.log).apply(F,A)}return I.namespace=f,I.useColors=r.useColors(),I.color=r.selectColor(f),I.extend=n,I.destroy=r.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(y!==r.namespaces&&(y=r.namespaces,x=r.enabled(f)),x),set:A=>{m=A}}),typeof r.init=="function"&&r.init(I),I}function n(f,g){let m=r(this.namespace+(typeof g>"u"?":":g)+f);return m.log=this.log,m}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let g=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of g)m[0]==="-"?r.skips.push(m.slice(1)):r.names.push(m)}function a(f,g){let m=0,y=0,x=-1,I=0;for(;m<f.length;)if(y<g.length&&(g[y]===f[m]||g[y]==="*"))g[y]==="*"?(x=y,I=m,y++):(m++,y++);else if(x!==-1)y=x+1,I++,m=I;else return!1;for(;y<g.length&&g[y]==="*";)y++;return y===g.length}function s(){let f=[...r.names,...r.skips.map(g=>"-"+g)].join(",");return r.enable(""),f}function o(f){for(let g of r.skips)if(a(f,g))return!1;for(let g of r.names)if(a(f,g))return!0;return!1}function c(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}WH.exports=J0e});var XH=R((ja,S0)=>{ja.formatArgs=Z0e;ja.save=ebe;ja.load=tbe;ja.useColors=Q0e;ja.storage=rbe();ja.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ja.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Q0e(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Z0e(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+S0.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ja.log=console.debug||console.log||(()=>{});function ebe(t){try{t?ja.storage.setItem("debug",t):ja.storage.removeItem("debug")}catch{}}function tbe(){let t;try{t=ja.storage.getItem("debug")||ja.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=!1),t}function rbe(){try{return localStorage}catch{}}S0.exports=KH()(ja);var{formatters:ibe}=S0.exports;ibe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var C0=R(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Decoder=Hs.Encoder=Hs.PacketType=Hs.protocol=void 0;Hs.isPacketValid=lbe;var nbe=Cl(),YH=VH(),JH=ME(),abe=XH(),BE=(0,abe.default)("socket.io-parser"),QH=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];Hs.protocol=5;var Kr;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Kr||(Hs.PacketType=Kr={}));var qE=class{constructor(e){this.replacer=e}encode(e){return BE("encoding packet %j",e),(e.type===Kr.EVENT||e.type===Kr.ACK)&&(0,JH.hasBinary)(e)?this.encodeAsBinary({type:e.type===Kr.EVENT?Kr.BINARY_EVENT:Kr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===Kr.BINARY_EVENT||e.type===Kr.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),BE("encoded %j as %s",e,r),r}encodeAsBinary(e){let r=(0,YH.deconstructPacket)(e),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}};Hs.Encoder=qE;var jE=class t extends nbe.Emitter{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);let n=r.type===Kr.BINARY_EVENT;n||r.type===Kr.BINARY_ACK?(r.type=n?Kr.EVENT:Kr.ACK,this.reconstructor=new HE(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if((0,JH.isBinary)(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0,n={type:Number(e.charAt(0))};if(Kr[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Kr.BINARY_EVENT||n.type===Kr.BINARY_ACK){let a=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);let s=e.substring(a,r);if(s!=Number(s)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(s)}if(e.charAt(r+1)==="/"){let a=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(a,r)}else n.nsp="/";let i=e.charAt(r+1);if(i!==""&&Number(i)==i){let a=r+1;for(;++r;){let s=e.charAt(r);if(s==null||Number(s)!=s){--r;break}if(r===e.length)break}n.id=Number(e.substring(a,r+1))}if(e.charAt(++r)){let a=this.tryParse(e.substr(r));if(t.isPayloadValid(n.type,a))n.data=a;else throw new Error("invalid payload")}return BE("decoded %s as %j",e,n),n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case Kr.CONNECT:return T0(r);case Kr.DISCONNECT:return r===void 0;case Kr.CONNECT_ERROR:return typeof r=="string"||T0(r);case Kr.EVENT:case Kr.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&QH.indexOf(r[0])===-1);case Kr.ACK:case Kr.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};Hs.Decoder=jE;var HE=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let r=(0,YH.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function sbe(t){return typeof t=="string"}var obe=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function ube(t){return t===void 0||obe(t)}function T0(t){return Object.prototype.toString.call(t)==="[object Object]"}function cbe(t,e){switch(t){case Kr.CONNECT:return e===void 0||T0(e);case Kr.DISCONNECT:return e===void 0;case Kr.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&QH.indexOf(e[0])===-1);case Kr.ACK:return Array.isArray(e);case Kr.CONNECT_ERROR:return typeof e=="string"||T0(e);default:return!1}}function lbe(t){return sbe(t.nsp)&&ube(t.id)&&cbe(t.type,t.data)}});var GE=R(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});E0.on=void 0;function dbe(t,e,r){return t.on(e,r),function(){t.off(e,r)}}E0.on=dbe});var VE=R(If=>{"use strict";var fbe=If&&If.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(If,"__esModule",{value:!0});If.Socket=void 0;var _s=C0(),x0=GE(),pbe=Cl(),hbe=fbe(dg()),Ha=hbe.default("socket.io-client:socket"),gbe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),zE=class extends pbe.Emitter{constructor(e,r,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[x0.on(e,"open",this.onopen.bind(this)),x0.on(e,"packet",this.onpacket.bind(this)),x0.on(e,"error",this.onerror.bind(this)),x0.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(gbe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');r.unshift(e);let n={type:_s.PacketType.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){let s=this.ids++;Ha("emitting packet with ack id %d",s);let o=r.pop();this._registerAckCallback(s,o),n.id=s}let i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)?Ha("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n),this.flags={},this}_registerAckCallback(e,r){let n=this.flags.timeout;if(n===void 0){this.acks[e]=r;return}let i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&(Ha("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(a,1));Ha("event with ack id %d has timed out after %d ms",e,n),r.call(this,new Error("operation has timed out"))},n);this.acks[e]=(...a)=>{this.io.clearTimeoutFn(i),r.apply(this,[null,...a])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){Ha("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this.packet({type:_s.PacketType.CONNECT,data:e})}):this.packet({type:_s.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){Ha("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case _s.PacketType.CONNECT:if(e.data&&e.data.sid){let i=e.data.sid;this.onconnect(i)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _s.PacketType.EVENT:case _s.PacketType.BINARY_EVENT:this.onevent(e);break;case _s.PacketType.ACK:case _s.PacketType.BINARY_ACK:this.onack(e);break;case _s.PacketType.DISCONNECT:this.ondisconnect();break;case _s.PacketType.CONNECT_ERROR:this.destroy();let n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){let r=e.data||[];Ha("emitting event %j",r),e.id!=null&&(Ha("attaching ack callback to event"),r.push(this.ack(e.id))),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let r=this._anyListeners.slice();for(let n of r)n.apply(this,e)}super.emit.apply(this,e)}ack(e){let r=this,n=!1;return function(...i){n||(n=!0,Ha("sending ack %j",i),r.packet({type:_s.PacketType.ACK,id:e,data:i}))}}onack(e){let r=this.acks[e.id];typeof r=="function"?(Ha("calling ack %s with %j",e.id,e.data),r.apply(this,e.data),delete this.acks[e.id]):Ha("bad ack %s",e.id)}onconnect(e){Ha("socket connected with id %s",e),this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){Ha("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(Ha("performing disconnect (%s)",this.nsp),this.packet({type:_s.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let r=this._anyOutgoingListeners.slice();for(let n of r)n.apply(this,e.data)}}};If.Socket=zE});var ZH=R(A0=>{"use strict";Object.defineProperty(A0,"__esModule",{value:!0});A0.Backoff=void 0;function Df(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}A0.Backoff=Df;Df.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};Df.prototype.reset=function(){this.attempts=0};Df.prototype.setMin=function(t){this.ms=t};Df.prototype.setMax=function(t){this.max=t};Df.prototype.setJitter=function(t){this.jitter=t}});var e6=R(ws=>{"use strict";var mbe=ws&&ws.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vbe=ws&&ws.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ybe=ws&&ws.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mbe(e,t,r);return vbe(e,t),e},bbe=ws&&ws.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ws,"__esModule",{value:!0});ws.Manager=void 0;var WE=FE(),_be=VE(),wbe=ybe(C0()),xl=GE(),Sbe=ZH(),Tbe=Cl(),Cbe=bbe(dg()),qn=Cbe.default("socket.io-client:manager"),KE=class extends Tbe.Emitter{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,WE.installTimerFunctions(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Sbe.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;let i=r.parser||wbe;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(qn("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;qn("opening %s",this.uri),this.engine=new WE.Socket(this.uri,this.opts);let r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;let i=xl.on(r,"open",function(){n.onopen(),e&&e()}),a=xl.on(r,"error",s=>{qn("error"),n.cleanup(),n._readyState="closed",this.emitReserved("error",s),e?e(s):n.maybeReconnectOnOpen()});if(this._timeout!==!1){let s=this._timeout;qn("connect attempt will timeout after %d",s),s===0&&i();let o=this.setTimeoutFn(()=>{qn("connect attempt timed out after %d",s),i(),r.close(),r.emit("error",new Error("timeout"))},s);this.opts.autoUnref&&o.unref(),this.subs.push(function(){clearTimeout(o)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){qn("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(xl.on(e,"ping",this.onping.bind(this)),xl.on(e,"data",this.ondata.bind(this)),xl.on(e,"error",this.onerror.bind(this)),xl.on(e,"close",this.onclose.bind(this)),xl.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){WE.nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){qn("error",e),this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n||(n=new _be.Socket(this,e,r),this.nsps[e]=n),n}_destroy(e){let r=Object.keys(this.nsps);for(let n of r)if(this.nsps[n].active){qn("socket %s is still active, skipping close",n);return}this._close()}_packet(e){qn("writing packet %j",e);let r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){qn("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){qn("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){qn("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)qn("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let r=this.backoff.duration();qn("will wait %dms before reconnect attempt",r),this._reconnecting=!0;let n=this.setTimeoutFn(()=>{e.skipReconnect||(qn("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(qn("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):(qn("reconnect success"),e.onreconnect())}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};ws.Manager=KE});var n6=R((ca,i6)=>{"use strict";var Ebe=ca&&ca.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ca,"__esModule",{value:!0});ca.default=ca.connect=ca.io=ca.Socket=ca.Manager=ca.protocol=void 0;var xbe=HH(),k0=e6();Object.defineProperty(ca,"Manager",{enumerable:!0,get:function(){return k0.Manager}});var r6=VE();Object.defineProperty(ca,"Socket",{enumerable:!0,get:function(){return r6.Socket}});var Abe=Ebe(dg()),t6=Abe.default("socket.io-client"),fg={};function Al(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};let r=xbe.url(t,e.path||"/socket.io"),n=r.source,i=r.id,a=r.path,s=fg[i]&&a in fg[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||s,c;return o?(t6("ignoring socket cache for %s",n),c=new k0.Manager(n,e)):(fg[i]||(t6("new io instance for %s",n),fg[i]=new k0.Manager(n,e)),c=fg[i]),r.query&&!e.query&&(e.query=r.queryKey),c.socket(r.path,e)}ca.io=Al;ca.connect=Al;ca.default=Al;Object.assign(Al,{Manager:k0.Manager,Socket:r6.Socket,io:Al,connect:Al});var kbe=C0();Object.defineProperty(ca,"protocol",{enumerable:!0,get:function(){return kbe.protocol}});i6.exports=Al});var D0=R(pg=>{"use strict";var I0=pg&&pg.__assign||function(){return I0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},I0.apply(this,arguments)};Object.defineProperty(pg,"__esModule",{value:!0});var Ibe=5,Dbe=function(){function t(){this.listener=null}return t.prototype.emitSuccessed=function(e){(this.lastEmitState===void 0||this.lastEmitState==="TRANSPORT_CONNECTION_FAILED")&&(this.emit(I0({name:"TRANSPORT_CONNECTION_SUCCEEDED"},e)),this.lastEmitState="TRANSPORT_CONNECTION_SUCCEEDED")},t.prototype.emitFailed=function(e){this.lastEmitState===void 0&&e.attempts>=Ibe&&(this.emit(I0({name:"TRANSPORT_CONNECTION_FAILED"},e)),this.lastEmitState="TRANSPORT_CONNECTION_FAILED")},t.prototype.resetState=function(){this.lastEmitState=void 0},t.prototype.setUpdateListener=function(e){this.listener=e},t.prototype.emit=function(e){var r;(r=this.listener)===null||r===void 0||r.call(this,e)},t}();pg.default=new Dbe});var XE=R(kl=>{"use strict";var Obe=kl&&kl.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o6=kl&&kl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kl,"__esModule",{value:!0});var Pbe=n6(),a6=o6(D0()),s6=o6(i0()),Rbe=function(t){Obe(e,t);function e(r){var n=t.call(this,r)||this;n.socket=null,n.onMessage=function(a){var s=a.sender,o=a.message;n.handleMessage(s,o)},n.onJoinChannel=function(a){var s,o=a.sender;o!==""&&o!==((s=n.socket)===null||s===void 0?void 0:s.id)&&n.handleChannelEvent("join",o)},n.onLeaveChannel=function(a){var s,o=a.sender;o!==""&&o!==((s=n.socket)===null||s===void 0?void 0:s.id)&&n.handleChannelEvent("leave",o)};var i=r.snackpubURL;if(!i)throw new Error("The `snackpubURL` option is unspecified.");return n.snackpubURL=i,n.connectionAttempts=0,n}return e.prototype.start=function(){var r=this;this.stop(),this.startTime=Date.now(),this.socket=(0,Pbe.io)(this.snackpubURL,{transports:["websocket"]}),this.socket.on("connect",function(){var n,i;(n=r.socket)===null||n===void 0||n.emit("subscribeChannel",{channel:r.channel,sender:(i=r.socket)===null||i===void 0?void 0:i.id}),r.startTime&&a6.default.emitSuccessed({timeMs:Date.now()-r.startTime,attempts:r.connectionAttempts})}),this.socket.io.on("reconnect_attempt",function(n){r.connectionAttempts=n,r.startTime&&a6.default.emitFailed({timeMs:Date.now()-r.startTime,attempts:n})}),this.socket.on("message",this.onMessage),this.socket.on("joinChannel",this.onJoinChannel),this.socket.on("leaveChannel",this.onLeaveChannel),this.socket.on("terminate",function(n){var i,a;(i=r.logger)===null||i===void 0||i.comm("Terminating connection: ".concat(n)),(a=r.socket)===null||a===void 0||a.disconnect()})},e.prototype.stop=function(){var r;this.socket!=null&&((r=this.logger)===null||r===void 0||r.comm("Stopping...",this.logSuffix),this.socket.offAny(),this.socket.close(),this.socket=null),this.startTime=void 0},e.prototype.isStarted=function(){return this.socket!=null},e.prototype.sendAsync=function(r,n){var i;return(i=this.socket)===null||i===void 0||i.emit("message",{channel:r,message:n,sender:this.socket.id}),Promise.resolve()},e.prototype.onVerifyCodeMessageSize=function(r){var n=0;for(var i in r.diff)n+=i.length+r.diff[i].length;return n<s6.default.CODE_SIZE_LIMIT_FOR_DIFF},e}(s6.default);kl.default=Rbe});var c6=R(hg=>{"use strict";var u6=hg&&hg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hg,"__esModule",{value:!0});var Lbe=u6(sH()),Nbe=u6(XE()),Fbe=function(){function t(e){this.transports=[new Lbe.default(e),new Nbe.default(e)]}return t.prototype.addEventListener=function(e,r){for(var n=0,i=this.transports;n<i.length;n++){var a=i[n];a.addEventListener(e,r)}},t.prototype.removeEventListener=function(e,r){for(var n=0,i=this.transports;n<i.length;n++){var a=i[n];a.removeEventListener(e,r)}},t.prototype.postMessage=function(e){for(var r=0,n=this.transports;r<n.length;r++){var i=n[r];i.postMessage(e)}},t}();hg.default=Fbe});var d6=R(l6=>{"use strict";Object.defineProperty(l6,"__esModule",{value:!0})});var JE=R(la=>{"use strict";var Mbe=la&&la.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),f6=la&&la.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Mbe(e,t,r)},YE=la&&la.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(la,"__esModule",{value:!0});la.createTrafficMirroringTransport=la.createTransport=la.ConnectionMetricsEmitter=void 0;var Ube=YE(c6()),$be=YE(XE());f6(d6(),la);f6(D0(),la);var Bbe=D0();Object.defineProperty(la,"ConnectionMetricsEmitter",{enumerable:!0,get:function(){return YE(Bbe).default}});function qbe(t){return new $be.default(t)}la.createTransport=qbe;function jbe(t){return new Ube.default(t)}la.createTrafficMirroringTransport=jbe});var h6=R((OPe,p6)=>{p6.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var g6=R((PPe,QE)=>{typeof Object.create=="function"?QE.exports=function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:QE.exports=function(e,r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}});var b6=R(Ur=>{var Hbe=/%[sdj%]/g;Ur.format=function(t){if(!M0(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(hc(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,i=n.length,a=String(t).replace(Hbe,function(o){if(o==="%%")return"%";if(r>=i)return o;switch(o){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return o}}),s=n[r];r<i;s=n[++r])F0(s)||!Of(s)?a+=" "+s:a+=" "+hc(s);return a};Ur.deprecate=function(t,e){if(Tu(window.process))return function(){return Ur.deprecate(t,e).apply(this,arguments)};if(process.noDeprecation===!0)return t;var r=!1;function n(){if(!r){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return n};var O0={},ZE;Ur.debuglog=function(t){if(Tu(ZE)&&(ZE=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!O0[t])if(new RegExp("\\b"+t+"\\b","i").test(ZE)){var e=process.pid;O0[t]=function(){var r=Ur.format.apply(Ur,arguments);console.error("%s %d: %s",t,e,r)}}else O0[t]=function(){};return O0[t]};function hc(t,e){var r={seen:[],stylize:zbe};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),nx(e)?r.showHidden=e:e&&Ur._extend(r,e),Tu(r.showHidden)&&(r.showHidden=!1),Tu(r.depth)&&(r.depth=2),Tu(r.colors)&&(r.colors=!1),Tu(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Gbe),N0(r,t,r.depth)}Ur.inspect=hc;hc.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};hc.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Gbe(t,e){var r=hc.styles[e];return r?"\x1B["+hc.colors[r][0]+"m"+t+"\x1B["+hc.colors[r][1]+"m":t}function zbe(t,e){return t}function Vbe(t){var e={};return t.forEach(function(r,n){e[r]=!0}),e}function N0(t,e,r){if(t.customInspect&&e&&L0(e.inspect)&&e.inspect!==Ur.inspect&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(r,t);return M0(n)||(n=N0(t,n,r)),n}var i=Wbe(t,e);if(i)return i;var a=Object.keys(e),s=Vbe(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),R0(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return ex(e);if(a.length===0){if(L0(e)){var o=e.name?": "+e.name:"";return t.stylize("[Function"+o+"]","special")}if(P0(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(ix(e))return t.stylize(Date.prototype.toString.call(e),"date");if(R0(e))return ex(e)}var c="",l=!1,f=["{","}"];if(m6(e)&&(l=!0,f=["[","]"]),L0(e)){var g=e.name?": "+e.name:"";c=" [Function"+g+"]"}if(P0(e)&&(c=" "+RegExp.prototype.toString.call(e)),ix(e)&&(c=" "+Date.prototype.toUTCString.call(e)),R0(e)&&(c=" "+ex(e)),a.length===0&&(!l||e.length==0))return f[0]+c+f[1];if(r<0)return P0(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var m;return l?m=Kbe(t,e,r,s,a):m=a.map(function(y){return rx(t,e,r,s,y,l)}),t.seen.pop(),Xbe(m,c,f)}function Wbe(t,e){if(Tu(e))return t.stylize("undefined","undefined");if(M0(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(v6(e))return t.stylize(""+e,"number");if(nx(e))return t.stylize(""+e,"boolean");if(F0(e))return t.stylize("null","null")}function ex(t){return"["+Error.prototype.toString.call(t)+"]"}function Kbe(t,e,r,n,i){for(var a=[],s=0,o=e.length;s<o;++s)y6(e,String(s))?a.push(rx(t,e,r,n,String(s),!0)):a.push("");return i.forEach(function(c){c.match(/^\d+$/)||a.push(rx(t,e,r,n,c,!0))}),a}function rx(t,e,r,n,i,a){var s,o,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?c.set?o=t.stylize("[Getter/Setter]","special"):o=t.stylize("[Getter]","special"):c.set&&(o=t.stylize("[Setter]","special")),y6(n,i)||(s="["+i+"]"),o||(t.seen.indexOf(c.value)<0?(F0(r)?o=N0(t,c.value,null):o=N0(t,c.value,r-1),o.indexOf(`
`)>-1&&(a?o=o.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):o=`
`+o.split(`
`).map(function(l){return"   "+l}).join(`
`))):o=t.stylize("[Circular]","special")),Tu(s)){if(a&&i.match(/^\d+$/))return o;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+o}function Xbe(t,e,r){var n=0,i=t.reduce(function(a,s){return n++,s.indexOf(`
`)>=0&&n++,a+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function m6(t){return Array.isArray(t)}Ur.isArray=m6;function nx(t){return typeof t=="boolean"}Ur.isBoolean=nx;function F0(t){return t===null}Ur.isNull=F0;function Ybe(t){return t==null}Ur.isNullOrUndefined=Ybe;function v6(t){return typeof t=="number"}Ur.isNumber=v6;function M0(t){return typeof t=="string"}Ur.isString=M0;function Jbe(t){return typeof t=="symbol"}Ur.isSymbol=Jbe;function Tu(t){return t===void 0}Ur.isUndefined=Tu;function P0(t){return Of(t)&&ax(t)==="[object RegExp]"}Ur.isRegExp=P0;function Of(t){return typeof t=="object"&&t!==null}Ur.isObject=Of;function ix(t){return Of(t)&&ax(t)==="[object Date]"}Ur.isDate=ix;function R0(t){return Of(t)&&(ax(t)==="[object Error]"||t instanceof Error)}Ur.isError=R0;function L0(t){return typeof t=="function"}Ur.isFunction=L0;function Qbe(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Ur.isPrimitive=Qbe;Ur.isBuffer=h6();function ax(t){return Object.prototype.toString.call(t)}function tx(t){return t<10?"0"+t.toString(10):t.toString(10)}var Zbe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function e_e(){var t=new Date,e=[tx(t.getHours()),tx(t.getMinutes()),tx(t.getSeconds())].join(":");return[t.getDate(),Zbe[t.getMonth()],e].join(" ")}Ur.log=function(){console.log("%s - %s",e_e(),Ur.format.apply(Ur,arguments))};Ur.inherits=g6();Ur._extend=function(t,e){if(!e||!Of(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};function y6(t,e){return Object.prototype.hasOwnProperty.call(t,e)}});var k6=R((LPe,A6)=>{var vn=b6(),U0=Array.prototype.slice,t_e=Object.prototype.hasOwnProperty,Zi=A6.exports=E6;Zi.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=r_e(this),this.generatedMessage=!0);var r=e.stackStartFunction||Gs;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var i=n.stack,a=r.name,s=i.indexOf(`
`+a);if(s>=0){var o=i.indexOf(`
`,s+1);i=i.substring(o+1)}this.stack=i}}};vn.inherits(Zi.AssertionError,Error);function _6(t,e){return vn.isUndefined(e)?""+e:vn.isNumber(e)&&!isFinite(e)||vn.isFunction(e)||vn.isRegExp(e)?e.toString():e}function w6(t,e){return vn.isString(t)?t.length<e?t:t.slice(0,e):t}function r_e(t){return w6(JSON.stringify(t.actual,_6),128)+" "+t.operator+" "+w6(JSON.stringify(t.expected,_6),128)}function Gs(t,e,r,n,i){throw new Zi.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}Zi.fail=Gs;function E6(t,e){t||Gs(t,!0,e,"==",Zi.ok)}Zi.ok=E6;Zi.equal=function(e,r,n){e!=r&&Gs(e,r,n,"==",Zi.equal)};Zi.notEqual=function(e,r,n){e==r&&Gs(e,r,n,"!=",Zi.notEqual)};Zi.deepEqual=function(e,r,n){$0(e,r)||Gs(e,r,n,"deepEqual",Zi.deepEqual)};function $0(t,e){if(t===e)return!0;if(vn.isBuffer(t)&&vn.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}else return vn.isDate(t)&&vn.isDate(e)?t.getTime()===e.getTime():vn.isRegExp(t)&&vn.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:!vn.isObject(t)&&!vn.isObject(e)?t==e:i_e(t,e)}function S6(t){return Object.prototype.toString.call(t)=="[object Arguments]"}function i_e(t,e){if(vn.isNullOrUndefined(t)||vn.isNullOrUndefined(e)||t.prototype!==e.prototype)return!1;if(vn.isPrimitive(t)||vn.isPrimitive(e))return t===e;var r=S6(t),n=S6(e);if(r&&!n||!r&&n)return!1;if(r)return t=U0.call(t),e=U0.call(e),$0(t,e);var i=C6(t),a=C6(e),s,o;if(i.length!=a.length)return!1;for(i.sort(),a.sort(),o=i.length-1;o>=0;o--)if(i[o]!=a[o])return!1;for(o=i.length-1;o>=0;o--)if(s=i[o],!$0(t[s],e[s]))return!1;return!0}Zi.notDeepEqual=function(e,r,n){$0(e,r)&&Gs(e,r,n,"notDeepEqual",Zi.notDeepEqual)};Zi.strictEqual=function(e,r,n){e!==r&&Gs(e,r,n,"===",Zi.strictEqual)};Zi.notStrictEqual=function(e,r,n){e===r&&Gs(e,r,n,"!==",Zi.notStrictEqual)};function T6(t,e){return!t||!e?!1:Object.prototype.toString.call(e)=="[object RegExp]"?e.test(t):t instanceof e?!0:e.call({},t)===!0}function x6(t,e,r,n){var i;vn.isString(r)&&(n=r,r=null);try{e()}catch(a){i=a}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&Gs(i,r,"Missing expected exception"+n),!t&&T6(i,r)&&Gs(i,r,"Got unwanted exception"+n),t&&i&&r&&!T6(i,r)||!t&&i)throw i}Zi.throws=function(t,e,r){x6.apply(this,[!0].concat(U0.call(arguments)))};Zi.doesNotThrow=function(t,e){x6.apply(this,[!1].concat(U0.call(arguments)))};Zi.ifError=function(t){if(t)throw t};var C6=Object.keys||function(t){var e=[];for(var r in t)t_e.call(t,r)&&e.push(r);return e}});var D6=R(zs=>{"use strict";var n_e=zs&&zs.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a_e=zs&&zs.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(f){try{l(n.next(f))}catch(g){s(g)}}function c(f){try{l(n.throw(f))}catch(g){s(g)}}function l(f){f.done?a(f.value):i(f.value).then(o,c)}l((n=n.apply(t,e||[])).next())})},s_e=zs&&zs.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(f){return c([l,f])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},I6=zs&&zs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zs,"__esModule",{value:!0});var B0=I6(k6()),o_e=I6(i0()),u_e=function(t){n_e(e,t);function e(r){var n=t.call(this,{name:r.name,verbose:r.verbose})||this;n.status="stopped",n.handleDomWindowMessage=function(a){var s;if(a.origin===n.origin)try{var o=JSON.parse(a.data),c=o.type;if(c==="CONNECT"){var l=JSON.stringify(o.device);n.handleChannelEvent("join",l)}else if(c==="DISCONNECT"){var l=JSON.stringify(o.device);n.handleChannelEvent("leave",l)}else if(c==="MESSAGE"){var l=JSON.stringify(o.message.device);n.handleMessage(l,o.message)}}catch{(s=n.logger)===null||s===void 0||s.warn("Invalid message",a.data)}};var i=new URL(r.webPlayerURL).origin;return n.currentWindow=r.window,n.targetWindowRef=r.ref,n.status="stopped",n.origin=i,n}return e.prototype.start=function(){var r;(0,B0.default)(this.currentWindow),(r=this.currentWindow)===null||r===void 0||r.addEventListener("message",this.handleDomWindowMessage,!1),this.status="started"},e.prototype.stop=function(){(0,B0.default)(this.currentWindow),this.currentWindow.removeEventListener("message",this.handleDomWindowMessage,!1),this.currentWindow=void 0,this.targetWindowRef=void 0,this.status="stopped"},e.prototype.isStarted=function(){return this.status==="started"&&this.currentWindow!=null},e.prototype.sendAsync=function(r,n){var i;return a_e(this,void 0,void 0,function(){var a;return s_e(this,function(s){return(0,B0.default)(this.isStarted),a=(i=this.targetWindowRef)===null||i===void 0?void 0:i.current,(0,B0.default)(a),a.postMessage(JSON.stringify(n),this.origin),[2]})})},e.prototype.onVerifyCodeMessageSize=function(r){return!0},e}(o_e.default);zs.default=u_e});var O6=R(gc=>{"use strict";var c_e=gc&&gc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gc,"__esModule",{value:!0});gc.getWebPlayerIFrameURL=gc.createWebPlayerTransport=void 0;var l_e=c_e(D6());function d_e(t){return new l_e.default(t)}gc.createWebPlayerTransport=d_e;function f_e(t,e,r,n){if(!(e<"40.0.0"||typeof window>"u"))return"".concat(t.replace("%%SDK_VERSION%%",e.split(".")[0]),"/index.html?initialUrl=").concat(encodeURIComponent(r),"&origin=").concat(encodeURIComponent(window.location.origin),"&verbose=").concat(n)}gc.getWebPlayerIFrameURL=f_e});var L6=R(jn=>{"use strict";var Xr=jn&&jn.__assign||function(){return Xr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xr.apply(this,arguments)},p_e=jn&&jn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),h_e=jn&&jn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ux=jn&&jn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&p_e(e,t,r);return h_e(e,t),e},gg=jn&&jn.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(f){try{l(n.next(f))}catch(g){s(g)}}function c(f){try{l(n.throw(f))}catch(g){s(g)}}function l(f){f.done?a(f.value):i(f.value).then(o,c)}l((n=n.apply(t,e||[])).next())})},mg=jn&&jn.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(f){return c([l,f])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},q0=jn&&jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jn,"__esModule",{value:!0});var sx=q0(p5()),P6=q0(g5()),Pf=vu(),mc=ux(R5()),g_e=q0(M5()),R6=q0(vE()),m_e=yE(),Fi=ux(V5()),v_e=K5(),vc=ux(e0()),y_e=JE(),ox=O6(),Cu=wl(),b_e=function(){function t(e){var r=this,n,i,a,s,o,c,l,f,g,m,y,x,I,A,F;this.stateListeners=new Set,this.logListeners=new Set,this.transportListeners={},this.uploadAssetAsync=function(Y){return gg(r,void 0,void 0,function(){var G,ie;return mg(this,function(fe){switch(fe.label){case 0:return G="",ie=new R6.default({apiURL:this.apiURL,logger:this.logger,callback:function(Ne,ye,He){if(He)throw He;ye&&(G=ye)}}),ie.add("asset",{type:"ASSET",contents:Y}),[4,ie.waitForCompletion()];case 1:return fe.sent(),[2,G]}})})},this.onFileUploaded=function(Y,G,ie){r.setState(function(fe){var Ne=fe.files;return{files:Fi.addObject(Ne,Y.path,Xr(Xr(Xr({},Y.file),G?{contents:G}:{}),ie?{error:ie}:{}))}})},this.onWantedDependencyVersions=function(Y,G,ie){var fe=ie?{}:G;r.setState(function(Ne){var ye=Ne.dependencies,He=Ne.sdkVersion;return{wantedDependencyVersions:fe,missingDependencies:(0,mc.getMissingDependencies)(ye,He,fe)}})},this.onDependencyResolved=function(Y,G,ie){r.setState(function(fe){var Ne=fe.dependencies,ye=fe.sdkVersion,He=fe.wantedDependencyVersions,Re=Fi.addObject(Ne,Y.name,Xr(Xr(Xr(Xr({},Ne[Y.name]),{version:Y.version}),G?{handle:G.handle,peerDependencies:G.dependencies}:{}),ie?{error:ie}:{}));return Re!==Ne?{dependencies:Re,missingDependencies:(0,mc.getMissingDependencies)(Re,ye,He)}:null})},this.onDevSessionSendBeaconCloseRequest=function(Y){r.setState(function(G){return{sendBeaconCloseRequest:Y}})},this.onTransportEvent=function(Y,G){var ie,fe,Ne,ye=G.type,He=G.data,Re=G.connectionId;switch(ye){case"connect":(ie=r.logger)===null||ie===void 0||ie.comm("Client connected (".concat(Y,")"),Re),r.onClientConnected(Y,Re,He);break;case"disconnect":(fe=r.logger)===null||fe===void 0||fe.comm("Client disconnected (".concat(Y,")"),Re,He),r.onClientDisconnected(Y,Re,He);break;case"protocol_message":(Ne=r.logger)===null||Ne===void 0||Ne.comm_recv("Message received (".concat(Y,")"),Re,He),r.onProtocolMessageReceived(Y,Re,G.data);break;case"send_message":r.onProtocolMessageSent(Y,G.data);break}};var X=(0,Cu.createChannel)(e.channel),de=(0,Pf.validateSDKVersion)((n=e.sdkVersion)!==null&&n!==void 0?n:vc.default.sdkVersion),N=e.dependencies?Xr({},e.dependencies):{};this.options=e,this.apiURL=(i=e.apiURL)!==null&&i!==void 0?i:vc.default.apiURL,this.snackpubURL=(a=e.snackpubURL)!==null&&a!==void 0?a:vc.default.snackpubURL,this.runtimeEndpoint=(s=e.runtimeEndpoint)!==null&&s!==void 0?s:Pf.SNACK_RUNTIME_URL_ENDPOINT,this.logger=e.verbose?(0,m_e.createLogger)(!0):void 0,this.codeChangesDelay=(o=e.codeChangesDelay)!==null&&o!==void 0?o:0,this.reloadTimeout=(c=e.reloadTimeout)!==null&&c!==void 0?c:0,this.previewTimeout=(l=e.previewTimeout)!==null&&l!==void 0?l:1e4,this.createTransport=(f=e.createTransport)!==null&&f!==void 0?f:y_e.createTransport;var H=(g=e.webPlayerURL)!==null&&g!==void 0?g:vc.default.webPlayerURL,z=(m=e.transports)!==null&&m!==void 0?m:{};e.online&&(z=Fi.addObject(z,"pubsub",this.createTransport({name:"pubsub",channel:X,verbose:e.verbose,apiURL:this.apiURL,snackpubURL:this.snackpubURL}))),e.webPreviewRef&&(z=Fi.addObject(z,"webplayer",(0,ox.createWebPlayerTransport)({ref:e.webPreviewRef,verbose:e.verbose,window:(0,P6.default)(window),webPlayerURL:H}))),this.state=this.updateDerivedState({disabled:!!e.disabled,unsaved:!1,name:(y=e.name)!==null&&y!==void 0?y:"",description:(x=e.description)!==null&&x!==void 0?x:"",sdkVersion:de,files:(I=e.files)!==null&&I!==void 0?I:{},dependencies:N,missingDependencies:(0,mc.getMissingDependencies)(N,de),connectedClients:{},transports:z,user:e.user,id:e.id,saveURL:e.id?(0,Cu.createURL)(this.runtimeEndpoint,de,void 0,e.id):void 0,savedSDKVersion:e.id?de:void 0,online:!1,url:(0,Cu.createURL)(this.runtimeEndpoint,de,X,e.id),channel:X,deviceId:e.deviceId,snackId:e.snackId,accountSnackId:e.accountSnackId,webPlayerURL:H},vc.SnackIdentityState),this.state.unsaved=!1,this.wantedDependencyVersions=new v_e.WantedDependencyVersions({apiUrl:this.apiURL,logger:this.logger,callback:this.onWantedDependencyVersions}),this.dependencyResolver=new mc.default({snackagerURL:(A=e.snackagerURL)!==null&&A!==void 0?A:vc.default.snackagerURL,logger:this.logger,callback:this.onDependencyResolved}),this.fileUploader=new R6.default({apiURL:this.apiURL,logger:this.logger,callback:this.onFileUploaded}),this.DevSession=new g_e.default({apiURL:this.apiURL,logger:this.logger,onSendBeaconCloseRequest:this.onDevSessionSendBeaconCloseRequest}),(F=this.logger)===null||F===void 0||F.info("Snack created",this.getState()),this.onStateChanged(this.state,vc.SnackIdentityState)}return t.prototype.setSDKVersion=function(e){return(0,Pf.validateSDKVersion)(e),this.setState(function(r){return r.sdkVersion!==e?{sdkVersion:e,missingDependencies:(0,mc.getMissingDependencies)(r.dependencies,e,r.wantedDependencyVersions)}:null})},t.prototype.setName=function(e){return this.setState(function(r){return r.name!==e?{name:e}:null})},t.prototype.setDescription=function(e){return this.setState(function(r){return r.description!==e?{description:e}:null})},t.prototype.setUser=function(e){return this.setState(function(r){return r.user!==e?{user:e}:null})},t.prototype.setDeviceId=function(e){return this.setState(function(r){return r.deviceId!==e?{deviceId:e}:null})},t.prototype.setFocus=function(){this.DevSession.setFocus(this.state)},t.prototype.setCodeChangesDelay=function(e){this.codeChangesDelay!==e&&(this.codeChangesDelay=e,this._sendCodeChangesDebounced(this.state))},t.prototype.setWebPlayerURL=function(e){var r=this;this.setState(function(n){var i=e??vc.default.webPlayerURL;if(n.webPlayerURL!==i&&r.options.webPreviewRef){var a=n.transports;return a=Fi.addObject(a,"webplayer",(0,ox.createWebPlayerTransport)({ref:r.options.webPreviewRef,verbose:r.options.verbose,window:(0,P6.default)(window),webPlayerURL:i})),{webPlayerURL:i,transports:a}}return null})},t.prototype.sendCodeChanges=function(){this._sendCodeChangesDebounced(this.state,!0)},t.prototype._sendCodeChangesDebounced=function(e,r){var n=this;if(this.codeChangesTimer&&(clearTimeout(this.codeChangesTimer),this.codeChangesTimer=void 0),!r&&this.codeChangesDelay>0){this.codeChangesTimer=setTimeout(function(){return n._sendCodeChangesDebounced(e,!0)},this.codeChangesDelay);return}else if(!r&&this.codeChangesDelay<0)return;var i=e.transports,a=e.files,s=e.dependencies,o=e.sdkVersion;for(var c in i)i[c].postMessage({type:"update_code",data:{files:a,dependencies:s,sdkVersion:o}})},t.prototype.saveAsync=function(e){var r,n,i,a,s,o;return gg(this,void 0,void 0,function(){var c,l,f,g,m,y,x,I,A,F,X,de,N,H,z,Y,G,ie,fe,Ne=this;return mg(this,function(ye){switch(ye.label){case 0:return c=this.state,[4,this.fileUploader.waitForCompletion()];case 1:ye.sent(),l=this.state,f=l.name,g=l.description,m=l.sdkVersion,y=l.files,x=l.dependencies,I=l.user,ye.label=2;case 2:return ye.trys.push([2,5,,6]),A={manifest:{sdkVersion:m,name:f,description:g,dependencies:(0,sx.default)(x,function(He){return He.version})},code:(0,sx.default)(y,function(He){return He=Xr({},He),delete He.error,He}),dependencies:(0,sx.default)(x,function(He){return He=Xr({},He),delete He.error,He}),isDraft:(r=e?.isDraft)!==null&&r!==void 0?r:!1},(n=this.logger)===null||n===void 0||n.info("Saving...",A),F=this.getPreviewAsync(),X="".concat(this.apiURL,"/--/api/v2/snack/save"),[4,(0,Cu.fetch)(X,{method:"POST",body:JSON.stringify(A),headers:Xr({"Content-Type":"application/json"},e?.ignoreUser?{}:(0,Cu.createUserHeader)(I))})];case 3:return de=ye.sent(),[4,de.json()];case 4:if(N=ye.sent(),!N?.id)throw new Error(((a=(i=N.errors)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.message)||"Failed to save");return(s=this.logger)===null||s===void 0||s.info("Saved",N),H=N.id,z=(0,Cu.createURL)(this.runtimeEndpoint,m,void 0,H),Y=N.hashId,G=N.accountSnackId,ie=N.snackId,this.setState(function(He){return{id:H,saveURL:z,unsaved:Fi.isUnsaved(He,c),savedSDKVersion:e?.isDraft&&He.savedSDKVersion?He.savedSDKVersion:m,accountSnackId:G,snackId:ie}}),F.then(function(He){var Re=Object.values(He).filter(function(Ze){return Ze.previewURL}).sort(function(Ze,ce){var tt,ft;return((tt=Ze.previewTimestamp)!==null&&tt!==void 0?tt:0)-((ft=ce.previewTimestamp)!==null&&ft!==void 0?ft:0)});Re.length&&Ne.uploadPreview(H,Re[0].previewURL,Re[0].status!=="error")}),[2,{id:H,url:z,hashId:Y,accountSnackId:G,snackId:ie}];case 5:throw fe=ye.sent(),(o=this.logger)===null||o===void 0||o.error(fe),fe;case 6:return[2]}})})},t.prototype.getDownloadURLAsync=function(e){return gg(this,void 0,void 0,function(){var r;return mg(this,function(n){switch(n.label){case 0:return[4,this.fileUploader.waitForCompletion()];case 1:return n.sent(),r=this.getState(),!r.id||r.unsaved?[4,this.saveAsync(e)]:[3,3];case 2:n.sent(),r=this.getState(),n.label=3;case 3:return[2,"".concat(this.apiURL,"/--/api/v2/snack/download/").concat(r.id)]}})})},t.prototype.uploadPreview=function(e,r,n){var i,a,s,o,c,l;return gg(this,void 0,void 0,function(){var f,g,m,y,x;return mg(this,function(I){switch(I.label){case 0:f="".concat(this.apiURL,"/--/api/v2/snack/updateMetadata"),g={id:e,previewLocation:r,status:n?"SUCCESS":"FAILURE"},(i=this.logger)===null||i===void 0||i.info("Uploading preview...",g),I.label=1;case 1:return I.trys.push([1,4,,5]),[4,(0,Cu.fetch)(f,{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json"}})];case 2:return m=I.sent(),[4,m.json()];case 3:if(y=I.sent(),y.id)(a=this.logger)===null||a===void 0||a.info("Uploaded preview",y);else throw new Error((c=(o=(s=y.errors)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.message)!==null&&c!==void 0?c:"Unknown error");return[3,5];case 4:return x=I.sent(),(l=this.logger)===null||l===void 0||l.error("Failed to upload preview",x),[3,5];case 5:return[2]}})})},t.prototype.getState=function(){return this.state},t.prototype.getStateAsync=function(){return gg(this,void 0,void 0,function(){return mg(this,function(e){switch(e.label){case 0:return[4,this.wantedDependencyVersions.waitForCompletion()];case 1:return e.sent(),[4,this.dependencyResolver.waitForCompletion()];case 2:return e.sent(),[4,this.fileUploader.waitForCompletion()];case 3:return e.sent(),[2,this.getState()]}})})},t.prototype.addStateListener=function(e){var r=this;return this.stateListeners.add(e),function(){return r.stateListeners.delete(e)}},t.prototype.setState=function(e){var r=e(this.state);if(r){var n=this.state,i=Xr(Xr({},n),r);this.state=this.updateDerivedState(i,n),this.onStateChanged(i,n),this.stateListeners.forEach(function(a){return a(i,n)})}},t.prototype.updateDerivedState=function(e,r){return e.unsaved=e.unsaved||Fi.isUnsaved(e,r),this.updateDerivedOnlineState(e,r),this.updateDerivedDependenciesState(e,r),this.updateDerivedWebPreviewState(e,r),e},t.prototype.onStateChanged=function(e,r){this.updateWantedDependencyVersions(e,r),this.updateDependencyResolver(e,r),this.updateFileUploader(e,r),this.updateTransports(e,r),this.DevSession.setState(e,r)},t.prototype.updateFiles=function(e){return this.setState(function(r){var n=Fi.updateObjects(r.files,e);return n!==r.files?{files:n}:null})},t.prototype.updateFileUploader=function(e,r){var n,i=e.files,a=r.files;if(!r.disabled&&(!e.disabled&&i!==a||e.disabled))for(var s in a)(!i[s]||i[s].contents!==a[s].contents||e.disabled)&&this.fileUploader.remove(s,a[s]);if(!e.disabled&&(i!==a||r.disabled))for(var s in i){var o=i[s];o.type==="ASSET"&&typeof o.contents=="object"&&!o.error&&(((n=a[s])===null||n===void 0?void 0:n.contents)!==o.contents||r.disabled)&&this.fileUploader.add(s,o)}},t.prototype.updateDependencies=function(e){return this.setState(function(r){var n=Fi.updateObjects(r.dependencies,e);return n!==r.dependencies?{dependencies:n,missingDependencies:(0,mc.getMissingDependencies)(n,r.sdkVersion,r.wantedDependencyVersions)}:null})},t.prototype.updateDerivedDependenciesState=function(e,r){var n,i,a,s;if(e.wantedDependencyVersions!==r.wantedDependencyVersions||e.dependencies!==r.dependencies)for(var o in e.dependencies){var c=e.dependencies[o],l=(s=(i=(n=e.wantedDependencyVersions)===null||n===void 0?void 0:n[o])!==null&&i!==void 0?i:(a=e.wantedDependencyVersions)===null||a===void 0?void 0:a[(0,mc.getPackageName)(o)])!==null&&s!==void 0?s:void 0;if(c.wantedVersion!==l){e.dependencies=e.dependencies===r.dependencies?Xr({},e.dependencies):e.dependencies;var f=(c.version==="*"||c.wantedVersion&&c.version===c.wantedVersion)&&l?l:c.version;e.dependencies[o]=Xr(Xr({},c),{version:f,wantedVersion:l}),c.handle&&c.version!==f&&delete e.dependencies[o].handle}}if(e.dependencies!==r.dependencies)for(var g in e.dependencies){var c=e.dependencies[g];if(c!==r.dependencies[g]){var m=(0,mc.verifyDependency)(g,c.version);m&&(e.dependencies[g]=Xr(Xr({},c),{error:m}))}}},t.prototype.updateWantedDependencyVersions=function(e,r){!e.disabled&&Object.keys(e.dependencies).length&&this.wantedDependencyVersions.setSDKVersion(e.sdkVersion)},t.prototype.updateDependencyResolver=function(e,r){var n,i,a,s=e.dependencies,o=r.dependencies;if(!r.disabled&&(s!==o||e.disabled||e.sdkVersion!==r.sdkVersion))for(var c in o)(!s[c]||s[c].version!==o[c].version||e.disabled||(0,Pf.isModulePreloaded)(c,e.sdkVersion)&&!(0,Pf.isModulePreloaded)(c,r.sdkVersion))&&this.dependencyResolver.remove(c,o[c].version,r.sdkVersion);if(!e.disabled&&(s!==o||r.disabled||e.sdkVersion!==r.sdkVersion||e.wantedDependencyVersions!==r.wantedDependencyVersions))for(var l in s){var f=s[l];!f.handle&&!f.error&&!(0,Pf.isModulePreloaded)(l,e.sdkVersion)&&!(f.version==="*"&&!e.wantedDependencyVersions)&&(((n=o[l])===null||n===void 0?void 0:n.version)!==f.version||f.version==="*"&&!r.wantedDependencyVersions||!((i=o[l])===null||i===void 0)&&i.handle||!((a=o[l])===null||a===void 0)&&a.error||r.disabled)&&this.dependencyResolver.add(l,f.version,e.sdkVersion)}},t.prototype.setDisabled=function(e){return this.setState(function(r){return e!==r.disabled?{disabled:e}:null})},t.prototype.setOnline=function(e){var r=this;return this.setState(function(n){if(e&&!n.transports.pubsub)return{transports:Fi.addObject(n.transports,"pubsub",r.createTransport({name:"pubsub",apiURL:r.apiURL,snackpubURL:r.snackpubURL,channel:n.channel,verbose:!!r.logger}))};if(!e&&n.transports.pubsub){var i=n.connectedClients;for(var a in n.connectedClients)n.connectedClients[a].transport==="pubsub"&&(i=Fi.removeObject(i,a));return{transports:Fi.removeObject(n.transports,"pubsub"),connectedClients:i}}else return null})},t.prototype.updateDerivedOnlineState=function(e,r){var n=e.transports,i=e.sdkVersion,a=e.channel,s=e.id,o=e.name,c=e.disabled,l=e.savedSDKVersion;(n!==r.transports||i!==r.sdkVersion||a!==r.channel||s!==r.id||o!==r.name||l!==r.savedSDKVersion)&&(e.online=!!n.pubsub&&!c,e.url=(0,Cu.createURL)(this.runtimeEndpoint,i,a,l&&l!==i?void 0:s),e.onlineName="".concat(o||"Unnamed Snack"))},t.prototype.updateDerivedWebPreviewState=function(e,r){var n=e.transports,i=e.sdkVersion,a=e.url,s=e.webPlayerURL;(a&&!r.url||i!==r.sdkVersion||s!==r.webPlayerURL)&&(e.webPreviewURL=n.webplayer&&s?(0,ox.getWebPlayerIFrameURL)(s,i,a,!!this.logger):void 0)},t.prototype.reloadConnectedClients=function(){var e,r=new Set;this.setState(function(i){var a=i.connectedClients;for(var s in i.connectedClients){var o=i.connectedClients[s];r.add(i.transports[o.transport]),a=Fi.addObject(a,s,Xr(Xr({},o),{status:"reloading"}))}return a!==i.connectedClients?{connectedClients:a}:null});var n={type:"RELOAD_SNACK"};r.size&&((e=this.logger)===null||e===void 0||e.comm("Reloading..."),r.forEach(function(i){i.postMessage({type:"protocol_message",data:n})}))},t.prototype.getPreviewAsync=function(){var e=this,r,n=this.state,i=n.connectedClients,a=n.transports,s=new Set;if(Object.values(i).forEach(function(c){var l=c.transport;return s.add(a[l])}),!s.size)return Promise.resolve(i);var o={type:"REQUEST_STATUS"};return s.size&&((r=this.logger)===null||r===void 0||r.comm("Requesting preview..."),s.forEach(function(c){c.postMessage({type:"protocol_message",data:o})})),new Promise(function(c,l){var f,g=new Set,m=e.addStateListener(function(y,x){var I;if(y.connectedClients!==x.connectedClients){for(var A in i)if((i[A].previewTimestamp!==((I=y.connectedClients[A])===null||I===void 0?void 0:I.previewTimestamp)||!y.connectedClients[A])&&(g.add(A),g.size===Object.values(i).length)){m(),clearTimeout(f),c(y.connectedClients);return}}});f=setTimeout(function(){m(),l(new Error("Operation timed out"))},e.previewTimeout)})},t.prototype.updateTransports=function(e,r){var n=this,i=e.transports,a=r.transports;if(!r.disabled&&(i!==a||e.disabled))for(var s in a)this.transportListeners[s]&&(i[s]!==a[s]||e.disabled)&&(a[s].removeEventListener("message",this.transportListeners[s]),delete this.transportListeners[s],a[s].postMessage({type:"stop"}));if(!e.disabled&&(i!==a||r.disabled)){var o=function(l){!c.transportListeners[l]&&(i[l]!==a[l]||r.disabled)&&(c.transportListeners[l]=function(f){return n.onTransportEvent(l,f)},i[l].addEventListener("message",c.transportListeners[l]),i[l].postMessage({type:"start"}))},c=this;for(var s in i)o(s)}!e.disabled&&!Fi.isBusy(e)&&(i!==a||Fi.isCodeChanged(e,r)||r.disabled)&&this._sendCodeChangesDebounced(e,a!==i||!Fi.isBusy(e)&&Fi.isBusy(r))},t.prototype.onClientConnected=function(e,r,n){this.setState(function(i){return{connectedClients:Fi.addObject(i.connectedClients,r,{transport:e,id:n.id,name:n.name,platform:n.platform,status:"ok"})}})},t.prototype.onClientDisconnected=function(e,r,n){var i=this;this.setState(function(a){var s=a.connectedClients[r];if(s?.status==="reloading"&&i.reloadTimeout>=0)return i.pruneConnectionsTimer&&(clearTimeout(i.pruneConnectionsTimer),i.pruneConnectionsTimer=void 0),i.pruneConnectionsTimer=setTimeout(function(){i.pruneConnectionsTimer=void 0,i.setState(function(c){var l=c.connectedClients;for(var f in c.connectedClients)c.connectedClients[f].status==="reloading"&&(l=Fi.removeObject(l,f));return l!==c.connectedClients?{connectedClients:l}:null})},i.reloadTimeout),null;var o=Fi.removeObject(a.connectedClients,r);return o!==a.connectedClients?{connectedClients:o}:null})},t.prototype.addLogListener=function(e){var r=this;return this.logListeners.add(e),function(){return r.logListeners.delete(e)}},t.prototype.onProtocolMessageReceived=function(e,r,n){var i;if(this.state.connectedClients[r])switch(n.type){case"CONSOLE":this.onConsoleMessageReceived(r,n);break;case"ERROR":this.onErrorMessageReceived(r,n);break;case"STATUS_REPORT":this.onStatusReportMessageReceived(r,n);break;case"CODE":break;case"RELOAD_SNACK":break;case"REQUEST_STATUS":break;default:(i=this.logger)===null||i===void 0||i.error("Invalid message received",e,n);break}},t.prototype.onProtocolMessageSent=function(e,r){switch(r.type){case"CODE":this.setState(function(n){var i=n.connectedClients;for(var a in i){var s=i[a];s.transport===e&&(i=Fi.addObject(i,a,Xr(Xr({},s),{error:void 0,status:s.status==="error"?"ok":s.status})))}return i!==n.connectedClients?{connectedClients:i}:null});break}},t.prototype.onConsoleMessageReceived=function(e,r){var n=r.payload||[],i={type:r.method,connectedClient:this.state.connectedClients[e],message:n.join(" ")};this.logListeners.forEach(function(a){return a(i)})},t.prototype.onErrorMessageReceived=function(e,r){var n,i,a;try{var s=JSON.parse(r.error),o=(0,Cu.createError)({name:s.name||"Error",message:s.message||"",fileName:s.fileName,lineNumber:s.lineNumber||((n=s.loc)===null||n===void 0?void 0:n.line)||s.line,columnNumber:s.columnNumber||((i=s.loc)===null||i===void 0?void 0:i.column)||s.column,stack:s.stack});this.setState(function(c){return{connectedClients:Fi.addObject(c.connectedClients,e,Xr(Xr({},c.connectedClients[e]),{error:o,status:"error"}))}})}catch{(a=this.logger)===null||a===void 0||a.error("Failed to parse received error message",r)}},t.prototype.onStatusReportMessageReceived=function(e,r){var n=r.previewLocation;this.setState(function(i){return{connectedClients:Fi.addObject(i.connectedClients,e,Xr(Xr({},i.connectedClients[e]),{previewURL:n,previewTimestamp:Date.now()}))}})},t}();jn.default=b_e});var F6=R(N6=>{"use strict";Object.defineProperty(N6,"__esModule",{value:!0})});var $6=R(wr=>{"use strict";var __e=wr&&wr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),M6=wr&&wr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&__e(e,t,r)},U6=wr&&wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wr,"__esModule",{value:!0});wr.setSnackSDKFetch=wr.parseRuntimeUrl=wr.createRuntimeUrl=wr.Snack=wr.defaultConfig=wr.getDeprecatedModule=wr.standardizeDependencies=wr.isFeatureSupported=wr.getSupportedSDKVersions=wr.isValidSemver=wr.getPreloadedModules=wr.isModulePreloaded=void 0;var Eu=vu();Object.defineProperty(wr,"isModulePreloaded",{enumerable:!0,get:function(){return Eu.isModulePreloaded}});Object.defineProperty(wr,"getPreloadedModules",{enumerable:!0,get:function(){return Eu.getPreloadedModules}});Object.defineProperty(wr,"isValidSemver",{enumerable:!0,get:function(){return Eu.isValidSemver}});Object.defineProperty(wr,"getSupportedSDKVersions",{enumerable:!0,get:function(){return Eu.getSupportedSDKVersions}});Object.defineProperty(wr,"isFeatureSupported",{enumerable:!0,get:function(){return Eu.isFeatureSupported}});Object.defineProperty(wr,"standardizeDependencies",{enumerable:!0,get:function(){return Eu.standardizeDependencies}});Object.defineProperty(wr,"getDeprecatedModule",{enumerable:!0,get:function(){return Eu.getDeprecatedModule}});Object.defineProperty(wr,"createRuntimeUrl",{enumerable:!0,get:function(){return Eu.createRuntimeUrl}});Object.defineProperty(wr,"parseRuntimeUrl",{enumerable:!0,get:function(){return Eu.parseRuntimeUrl}});var w_e=U6(L6());wr.Snack=w_e.default;var S_e=U6(e0());wr.defaultConfig=S_e.default;var T_e=wl();Object.defineProperty(wr,"setSnackSDKFetch",{enumerable:!0,get:function(){return T_e.setSnackSDKFetch}});M6(JE(),wr);M6(F6(),wr)});var G6=R((BPe,H6)=>{"use strict";var B6=ui(),C_e=$6();function E_e(t,e,r,n){var i=new C_e.Snack({files:j6(t),name:e,description:r,sdkVersion:"54.0.0",dependencies:{"react-native-webview":{version:"10.10.0",isUserSpecified:!0}},online:!0,codeChangesDelay:1e3});return Promise.resolve(i)}function q6(t,e){var r=j6(t);return e.updateFiles(r),e.sendCodeChanges(),e.getStateAsync().then(function(i){return i.url})}function x_e(t,e,r,n,i){return I_e(t,r,n,i).catch(function(a){return A_e(t,e,r)})}function A_e(t,e,r){return q6(t,e).then(function(){return e.saveAsync()}).then(function(n){var i=n.url;return k_e(i,r)})}function k_e(t,e){return new Promise(function(r,n){B6.send({method:"publish_expo_metadata",app:"editor",type:"POST",data:{userProgramID:e,expoUrl:t},success:function(i){return i.status==="ok"?r({expoUrl:i.expoUrl,codehsUrl:i.codehsUrl}):n()},error:function(i){return n()}})})}function I_e(t,e,r,n){return new Promise(function(i,a){B6.send({method:"publish_expo_project",app:"editor",type:"POST",data:{userProgramID:e,code:t,name:r,description:n},success:function(s){return s.status==="ok"?i({expoUrl:s.expoUrl,codehsUrl:s.codehsUrl}):a()},error:function(s){return a()}})})}function j6(t){return{"app.js":{contents:t,type:"CODE"}}}H6.exports={sessionPromise:E_e,updateSessionCode:q6,publishSnack:x_e}});var j0=R((qPe,K6)=>{"use strict";var cx=G6(),D_e=ui(),vg=Pi(),O_e=zA().GULP_URL,P_e=vg.LOCAL_URL,z6="#react-native-destination",V6=".expo-publish-destination";function R_e(t,e,r,n){var i=$(t.target),a=i.parent().parent(),s=i.data("field"),o=i.prop("checked");return L_e(s,o,r.userProgramID).then(function(c){a.append("<i class='status-icon icon-ok icon-green'></i>")}).catch(function(c){i.prop("checked",!o),a.append("<i class='status-icon icon-remove icon-red'></i>")}).finally(function(){setTimeout(function(){$(".status-icon").remove()},800)}).then(function(){return W6(e,n,z6)})}function L_e(t,e,r){return new Promise(function(n,i){D_e.send({method:"set_expo_metadata_field",app:"editor",type:"POST",data:{userProgramID:r,field:t,value:e},success:function(a){return a.status==="ok"?n():i()},error:function(a){return i()}})})}function W6(t,e,r){return cx.updateSessionCode(t,e).then(function(n){vg.writeQRCode(n,r)})}function N_e(t,e){return cx.sessionPromise(t,e.codeTitle,e.codeDescription,e.replConsole)}function F_e(t,e,r,n){return cx.publishSnack(t,r,e.userProgramID,e.codeTitle,e.codeDescription).then(function(i){vg.writeQRCode(i.expoUrl,V6),M_e(i.codehsUrl,n)})}function M_e(t,e){e=typeof e>"u"?e:!1;var r=$("#publish-link");r.text(t),r.attr("href",t),$("#publish-button").text("Republish"),$("#publish-url").show(),e&&($("#publish-button-container").append("<i class='status-icon icon-ok icon-green'></i>"),setTimeout(function(){$(".status-icon").remove()},800))}function U_e(t,e){var r=e.includes("localhost")?P_e:O_e,n=$("#show-buttons-switch").prop("checked"),i=$("#start-immediately-switch").prop("checked"),a=$("#full-screen-switch").prop("checked"),s={showButtons:n,startImmediately:i,fullScreen:a,placeholderCode:t,GULP_URL:r},o=vg.getAndApplyTemplate(s);return o}function $_e(t,e){vg.writeQRCode(t,e)}K6.exports={checkboxChange:R_e,updateCode:W6,publishCode:F_e,sessionPromise:N_e,userCodeToReactCode:U_e,writeQRCode:$_e,SNACK_SESSION_QR_DOM:z6,PUBLISH_QR_DOM:V6}});var Y6=R((jPe,X6)=>{X6.exports='<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M448 312.43c.77-1.11 1.51-2.26 2.27-3.34A174.55 174.55 0 00480 211.85C480.32 112.55 396.54 32 292.94 32c-90.36 0-165.74 61.49-183.4 143.12a172.81 172.81 0 00-4 36.83c0 99.4 80.56 182.11 184.16 182.11 16.47 0 38.66-4.95 50.83-8.29s24.23-7.75 27.35-8.94 8-2.41 11.89-1.29l77.42 22.38a4 4 0 005-4.86l-17.72-67.49c-1.23-5-1.39-5.94 3.53-13.14z"></path><path d="M312.54 415.38a165.32 165.32 0 01-23.26 2.05c-42.43 0-82.5-11.2-115-32.2a184.09 184.09 0 01-53.09-49.32c-26.08-34.57-40.3-78.51-40.3-124.49 0-3.13.11-6.14.22-9.16a4.34 4.34 0 00-7.54-3.12 158.76 158.76 0 00-14.86 195.24c2.47 3.77 3.87 6.68 3.44 8.62l-14.09 72.26a4 4 0 005.22 4.53l68-24.24a16.85 16.85 0 0112.92.22c20.35 8 42.86 12.92 65.37 12.92a169.45 169.45 0 00116.63-46 4.29 4.29 0 00-3.66-7.31z"></path></svg>'});var J6=R((HPe,B_e)=>{B_e.exports=`<style>
    #share-modal #share-modal-link-wrapper {
        display: flex;
    }

    #share-modal #share-modal-link-input {
        cursor: auto;
        background-color: white;
        width: 75%;
        margin: 3px;
        flex: 1;
    }

    #share-modal .share-modal-info {
        padding: 10px;
        margin: 10px 0 0;
        background-color: rgba(39,169,225,.15);
        color: #27a9e1;
        border-radius: 3px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #share-modal .share-modal-info-icon {
        padding-right: 3px;
    }

    #share-modal input {
        margin: 5px auto;

    }

    #share-modal input.error {
        border-color: red;
    }

    #sharemodal .info-text {
        margin-top: 15px;
    }

    #sharemodal .info-text .icon-info-sign {
        margin-right: 5px;
    }

    #sharemodal  #course-select-section {
        margin-top: 15px;
    }

    #share-modal h3.advanced-settings {
        margin-bottom: 0px;
    }
    .modal-footer {
        margin-top: 0px;
    }

    #collab-enabled-section p {
        font-size: 16px;
        font-weight: bold;
        text-align: center;
    }

    #collab-disabled-section {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    #collab-disabled-section p {
        font-size: 20px;
    }
</style>
<div id="share-modal">
    <div id="share-url" class="share-publish-url">
        <div id="share-type-switch">
            <button value="Code" class="btn active">
                <i class="fas fa-share-alt"></i>
                Share
            </button>
            <button value="Embed" class="btn">
                <i class="far fa-file-code"></i>
                Embed
            </button>
            {{#if canBeAssigned }}
            <button value="Assign" class="btn">
                <i class="far fa-check-circle"></i>
                Assign
            </button>
            {{/if}}
            {{#if showCollaborateTab }}
            <button value="Collaborate" class="btn">
                <i class="fas fa-user-friends"></i>
                Collaborate
            </button>
            {{/if}}
        </div>
    </div>
    {{#if isLoggedOut }}
    <div id="logged-out-banner" class="alert alert-warning">
        You are using CodeHS with no account. {{#if showEditWarning }}<span id="logged-out-edit-warning">Anyone with this link will be able to edit this program. </span>{{/if}}<a target="_blank" href="/login?next=/signup/from_sandbox/{{itemID}}">Log in</a> or <a target="_blank" href="/signup/from_sandbox/{{itemID}}">sign up</a> for an account to <span id="logged-out-banner-message">change the share settings for this program.</span>
    </div>
    {{else}}
    {{/if}}
    <div id="share-modal-contents">
        <input id="share-modal-share-link" value="{{shareURL}}" target="_blank" class="hidden"></input>
        <button class="btn btn-main-transparent share-modal-btn js-share-modal-copy hidden">
            <span>copy</span>
            <i class="far fa-clone"></i>
        </button>

        <div id="share-options" class="checkbox-container">
            <div>
                <div class="checkbox-display">
                    {{#if isActive }}
                        <input type="checkbox" id="share-modal-active-switch" class="sharing-option-checkbox share-tab-checkbox" checked>
                    {{else}}
                        <input type="checkbox" id="share-modal-active-switch" class="sharing-option-checkbox share-tab-checkbox">
                    {{/if}}
                    <label class="sharing-option-label">
                        Public
                        <p>Allow others to run your program without seeing the code.</p>
                    </label>
                </div>
                <input id="share-modal-public-link" value="{{shareURL}}" target="_blank" class="hidden"></input>
                <button class="btn btn-main-transparent share-public-modal-btn js-share-modal-copy" id="share-public-copy">
                    <span>copy</span>
                    <i class="far fa-clone"></i>
                </button>
            </div>
            <div id="code-display-container">
                <div class="checkbox-display">
                    {{#if showCode }}
                        <input type="checkbox" id="share-modal-show-code-switch" class="sharing-option-checkbox share-tab-checkbox" checked>
                    {{else}}
                        <input type="checkbox" id="share-modal-show-code-switch" class="sharing-option-checkbox share-tab-checkbox">
                    {{/if}}
                    <label class="sharing-option-label">
                        Show code
                        <p>Allow others to view your code and run your program. </p>
                    </label>
                </div>
                <input id="share-modal-copy-link" value="{{shareURL}}" target="_blank" class="hidden"></input>
                <button class="btn btn-main-transparent share-code-modal-btn js-share-modal-copy" id="share-code-copy">
                    <span>copy</span>
                    <i class="far fa-clone"></i>
                </button>
            </div>

            {{#if showSocialMedia }}
            <label class="sharing-option-label">Social media</label>
            <div class="sharing-option">
                <a href="https://www.facebook.com/dialog/feed?&app_id=374319315985729&link=https%3A%2F%2Fcodehs.com%2Fshare%2F{{shareIdentifier}}&display=popup&quote=Check out this cool beat I made with Code Remix and let me know what you think!&hashtag=#UnlockTheBeat" target="_blank"><i class="icon-facebook-sign large share" rel="tooltip" title="Share on Facebook"></i></a>
                <a id="twitter-share-link" href="https://twitter.com/intent/tweet?text=Check%20out%20this%20cool%20beat%20I%20made%20with%20Beats%20Unlocked%20and%20let%20me%20know%20what%20you%20think!&url=https%3A%2F%2Fcodehs.com%2Fshare%2F{{shareIdentifier}}&hashtags=UnlockTheBeat&via=codehs" target="_blank"><i class="icon-twitter-sign large share" rel="tooltip" title="Share on Twitter"></i></a>
            </div>
            {{/if}}
        </div>

        <div id="embed-options" class="hidden">
            <div class="dimension-container">
                <div class="embed-dimension">
                    <label class="">Display</label>
                    <select id="embed-opt-display-type" class="small-dropdown">
                        <option value="default">App &amp; Code</option>
                        <option value="displayOnly">App Only</option>
                        <option value="editorOnly">Code Only</option>
                    </select>
                </div>
                <div class="embed-dimension">
                    <label class="">Width</label>
                    <input type="text" id="embed-opt-width" placeholder="850">
                </div>
                <div class="embed-dimension">
                    <label class="">Height</label>
                    <input type="text" id="embed-opt-height" placeholder="500">
                </div>
            </div>
            <div id="embed-display-options" class="checkbox-container">
                <div class="checkbox-display">
                    <input type="checkbox" id="embed-opt-read-only" class="sharing-option-checkbox">
                    <label class="sharing-option-label">
                        Read Only
                        <p>Prevent others from modifying the embedded code.</p>
                    </label>
                </div>
                <div class="checkbox-display">
                    <input type="checkbox" id="embed-opt-show-tree" class="sharing-option-checkbox">
                    <label class="sharing-option-label">
                        Show File Tree
                        <p>Show the file tree in the embedded editor.</p>
                    </label>
                </div>
            </div>
        </div>

        {{#unless isLoggedOut}}
        <div id="collab-container" class="hidden">
            <div id="collab-disabled-section">
                <p>Collaboration is currently disabled for this program.</p>
                <button id="enable-collab-button" class="btn btn-main">Enable Collaboration</button>
            </div>
            <div id="collab-enabled-section" class="hidden">
                <p>Share this link to let others collaborate on this program with you!</p>
                <input id="share-modal-collab-link"></input>
                <button class="btn btn-main-transparent share-modal-btn js-share-modal-collab-copy">
                    <span>copy</span>
                    <i class="far fa-clone"></i>
                </button>
            </div>
        </div>
        {{/unless}}
    </div>
    <div id="assign-options" class="hidden">
        <div class="info-text">
            <p><span class="icon icon-info-sign"></span> The starter code for this assignment will automatically be generated from your sandbox program. Any future changes made to this sandbox program will not affect this assignment.</p>
        </div>
        <div id="description-container">
            <label class="sharing-option-label description-label">Description<span class="chs-icon chs-icon-check text-green hidden"></span></label>
            <p>This is the exercise prompt your students will see when they open this assignment</p>
            <div id="markdown-editor" class="description-container">
                <textarea name="description" id="share-modal-edit-description">{{itemDescription}}</textarea>
                <div id="preview-description-text" data-markdown="{{itemDescription}}"></div>
            </div>
        </div>
         <div id="item-type-container">
            <label class="sharing-option-label item-type-label">Assign as</label>
            <div class="item-type-picker-container">
                <select class="item-type-select selectpicker" data-dropup-auto="false" data-width="50%">
                    <option data-type="{{C.ItemType.EXERCISE}}">Exercise</option>
                    <option data-type="{{C.ItemType.EXAMPLE}}">Example</option>
                </select>
            </div>
        </div>
        <div id="course-select-section">
            <label class="sharing-option-label">Choose a Course</label>
            <div class="course-picker-container">
                <select class="course-select selectpicker" data-dropup-auto="false" data-width="438px">
                    <option disabled="">Choose a Course</option>
                    {{#each activeTeacherCourses as | course |}}
                        <option value="{{[id]}}" id="{{[id]}}">{{[name]}}</option>
                    {{/each}}
                </select>
                <button class="btn btn-main btn-main-green assign-btn" id="share-modal-assign-btn">Assign</button>
            </div>
        </div>
        <div id="links-section" class="hidden">
            <a class="view-link" target="_blank">View Assignment in the Course</a>
        </div>
    </div>
</div>
`});var Q6=R((GPe,q_e)=>{q_e.exports=`<style>
.abacus-fork-modal .row {
    display: flex;
    height: 83px;
    position: relative;
    width: 100%;
    padding: 0px 20px;
    margin-top: 20px;
    margin-bottom: 0;
    align-items: center;
}
 .abacus-fork-modal .text-wrap {
    display: flex;
    align-items: center;
    word-break: break-all;
}
.abacus-fork-modal .sandbox-program-title {
    font-size: 24px;
    font-weight: 200;
    color: #555;
}
.abacus-fork-modal img {
    height: 80px;
    margin-right: 20px;
    vertical-align: middle;
}
#abacus-fork-submit {
    height: 40px;
    margin-left: auto;
}
</style>
<div class="abacus-fork-modal">
    <div class="row">
        <img src="{{STATIC_URL}}img/program_icons/{{ progTypeString }}.png"/>
        <div class="text-wrap">
            <h1 class="sandbox-program-title">
                <span id="forked-program-title-display-span">{{itemTitle}}</span> (Forked from {{sharedProgramOwnerAttribution}})
            </h1>
        </div>
        <button class="btn btn-main" id="abacus-fork-submit">Fork!</button>
    </div>
</div>

`});var Z6=R((zPe,j_e)=>{j_e.exports=`<style>
    #contest-modal .contest-modal-btn {
        color: #27a9e1;
        border-color: #27a9e1;
        margin: 3px;
    }
    #contest-modal .contest-modal-btn:hover {
        color: rgb(39,169,225);
    }
    #contest-modal input.error {
        border-color: red;
    }
</style>
<div id="contest-modal">
    <div>
        <div id="contest-just-submitted" class="hidden">
            <h3>
                Successfully submitted to <a class="contest-url-link" target="_blank">!</a>
            </h3>
            <div><strong>Submit to another contest?</strong></div>
        </div>

        <div id="contest-already-submitted" class="hidden">
            <h3>You've already submitted this program to <a class="contest-url-link" target="_blank"></a>!</h3>
            <div><strong>Submit to another contest?</strong></div>
        </div>

        <div class="contest-not-submitted">
            <h3>Submit to a Contest!</h3>
            <div><strong>If you have a contest code, enter it here</strong></div>
        </div>

        <div class="submit-to-contest-wrapper">
            {{#if isLoggedOut}}
                <input id="contest-contact-me-input" type="checkbox" checked>
                <span>I would like to be contacted about contest results</span>
                <input id="contest-user-name-input" type="text" placeholder="First Name Last Initial" autocomplete="off">
                <input id="contest-user-email-input" type="text" placeholder="name@email.com" autocomplete="off">
            {{/if}}
            <input class="spacing-top" id="contest-id-input" style="display: inline-block;" type="text" placeholder="Contest Code">
            <button id="submit-to-contest-btn" type="submit" class="btn btn-main-transparent contest-modal-btn spacing-top"><span class="icon icon-external-link"></span> Submit</button>
        </div>

        <div class="contest-past-submissions-container hidden">
            <hr>
            <div><strong>Past Submissions</strong></div>
            <ul id="contest-past-submissions" style="margin-bottom: 0px;"></ul>
        </div>
    </div>
</div>
`});var e8=R((VPe,H_e)=>{H_e.exports=`<style>
    #contest-modal .contest-modal-btn {
        color: #27a9e1;
        border-color: #27a9e1;
        margin: 3px;
    }
    #contest-modal .contest-modal-btn:hover {
        color: rgb(39,169,225);
    }
    #contest-modal input.error {
        border-color: red;
    }
</style>
<div id="contest-modal">
    <div>
        <div id="section-contest-just-submitted" class="hidden">
            <h3>Successfully submitted to <span class="contest-name">!</span></h3>
        </div>

        <div id="section-contest-already-submitted" class="hidden">
            <h3>You've already submitted this program to <span class="contest-name">!</span></h3>
        </div>

        <div id="section-contest-not-submitted">
            <h3>Submit to the Beat Showcase for your Section:</h3>
            <button id="submit-to-section-contest-btn" class="btn btn-main-transparent contest-modal-btn spacing-top">
                <span class="icon icon-external-link"></span> Submit
            </button>
        </div>
    </div>
</div>
`});var H0=R((exports,module)=>{var Ajax=ui(),_=tm(),h=rN(),html=oN()(h),alertModal=Jl(),validEmail=Pi().validEmail,PubSub=Er(),submit=Ql(),EditorInstructions=pN(),ShareTab=aT(),LMSGradingTab=oT(),HelpTab=dT(),ConversationTab=XA(),GradingTab=Vv(),UploadTab=hT(),PhoneTab=gT(),TypeTester=YA(),KarelWorld=rp(),RunnerFactory=xy(),QuillCustom=Zl(),flattenAbacusFiles=Ri().flattenAbacusFiles,mapAbacusFiles=Ri().mapAbacusFiles,groupsToPermissions=Ri().groupsToPermissions,turtleTemplate=VA(),turtleInputOerrideTemplate=Ay(),template=rm(),expoIntegrationUtils=j0(),getQueryParams=Pi().getQueryParams,modalAlert=Pi().alert,conversationTabIcon=Y6(),SHARE_MODAL_TEMPLATE=J6(),FORK_MODAL_TEMPLATE=Q6(),CONTEST_MODAL_TEMPLATE=Z6(),BU_CONTEST_MODAL_TEMPLATE=e8(),FAVORITE_PROGRAM_STAR=".favorite-program-star",GRADE_CODE_BUTTON="button.grade_code",GRADING_TAB_CHECK_BUTTON="#grading-unit-test-run",SUBMIT_BUTTON="#submit-button",RUN_BUTTON=".run_code",SUBMIT_CORRECT_BUTTON="#submit-correct",AI_EASIER_BUTTON="#ai-easier-button",AI_CHALLENGE_BUTTON="#ai-challenge-button",SHARE_SCREENSHOT_WAIT_TIME=5e3,CODE_LINE_LIMIT=1e4,mostRecentSavedCode,submittedToContest={},C=Rr(),{fetchAjaxTabRequests,registerAjaxTabRequest,htmlDecode,loadHistory,cleanupTabRequests,updateQueryString,deriveAbacusSettings}=ip(),JavaErrors=kh(),BASE_URL=C.Uploads.UPLOADS_PROXY_BASE_URL,TIMERS=[],ANSI={transform:function(t){var e=new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),"g");return t.replace(e,"")}};function onCollaborationEnabled(t){if(!window.pageSpecific.showCollabTab)return;let e={identifier:t};if(window.pageSpecific.sharedProgramID)e={...e,shared_program_id:window.pageSpecific.sharedProgramID};else if(window.pageSpecific.studentAssignmentID)e={...e,student_assignment_id:window.pageSpecific.studentAssignmentID};else{window.toastr.error("No shared program or student assignment found to collaborate on");return}Ajax.send({method:"setup_collaboration",app:"editor",data:e}).then(n=>{if(n.status==="ok"&&n.disable_blocks==="true"){let i=window.myAbacus?.abc?.current?.props?.store;i&&i.dispatch&&i.dispatch({type:"USER_STARTED_COLLABORATING",data:{settingName:"sharedProgramDroplet",settingUpdate:{blocksDisabled:!0,value:!1,displayName:"Disable collaboration to use blocks"}}})}});let r=window.location.href;if(!r.includes(t)){let n="collaborate="+t;r.endsWith("?")?r+=n:r+=(r.includes("?")?"&":"?")+n}$("#share-modal-collab-link").val(r)}function onCollaborationDisabled(){if(window.pageSpecific.showCollabTab)return new Promise(function(t,e){let r;window.pageSpecific.sharedProgramID?r={shared_program_id:window.pageSpecific.sharedProgramID}:window.pageSpecific.studentAssignmentID?r={student_assignment_id:window.pageSpecific.studentAssignmentID}:(window.toastr.error("No shared program or student assignment found to collaborate on"),t()),Ajax.send({method:"disable_collaboration",app:"editor",data:r,success:function(n){n.status==="ok"?t():e()}})})}function onCollabModeChanged(t){return new Promise(function(e,r){let n={section_id:window.pageSpecific.sectionID};n.mode=t,Ajax.send({method:"set_assignment_collab_mode",app:"editor",data:n,success:function(i){i.status==="ok"?e():r()}})})}function onCollabIdentifierReset(){if(window.pageSpecific.showCollabTab)return new Promise(function(t,e){let r;window.pageSpecific.sharedProgramID?r={shared_program_id:window.pageSpecific.sharedProgramID}:window.pageSpecific.studentAssignmentID?r={student_assignment_id:window.pageSpecific.studentAssignmentID}:(window.toastr.error("No shared program or student assignment found to collaborate on"),t()),Ajax.send({method:"reset_collab_identifier",app:"editor",data:r,success:function(n){n.status==="ok"?t():e()}})})}function onAudioDataReceived(t){let e=new FormData;return e.append("file",t),new Promise(function(r,n){$.ajax({url:"/core/ajax/code_remix_upload_beat",type:"POST",data:e,processData:!1,dataType:"JSON",contentType:!1}).then(i=>{r(i.url)})})}function onSendAudioText(t,e){let r="Download your beat at https://codehs.com/uploads/"+e;return new Promise(function(n,i){Ajax.send({method:"send_text_message",app:"core",data:{phone_number:t,message:r},success:function(a){a.status==="ok"?(window.toastr.success("Text Message Sent!"),n()):i(a.msg)}})})}function shimAbacusForModules(t){var e={cleanup:function(){},sqlSetup:window.pageSpecific.helper_code,getCode:function(){let r=flattenAbacusFiles(t.getCodeTree()).filter(n=>n.main)?.[0];return r?r.text:flattenAbacusFiles(t.getCodeTree())[0].text},getCurrentCode:function(){return flattenAbacusFiles(t.getCodeTree()).reduce(function(r,n){var i={};return i[n.name]=n.text,Object.assign(r,i)},{})},currentCode:flattenAbacusFiles(t.getCodeTree()).reduce(function(r,n){var i={};return i[n.name]=n.text,Object.assign(r,i)},{}),code:flattenAbacusFiles(t.getCodeTree()).reduce(function(r,n){var i={};return i[n.name]=n.text,Object.assign(r,i)},{}),setCode:function(r){var n=Object.entries(r).reduce(function(i,a,s){return Object.assign({name:a[0],text:a[1],main:s===0},i)},{});t.setCodeTree([n])},studentAssignmentID:window.pageSpecific.studentAssignmentID,getItemType:function(){return window.pageSpecific.itemType},itemType:window.pageSpecific.itemType,isOwnPage:function(){return window.pageSpecific.viewerID===window.pageSpecific.codeUserID},isHourOfCode:function(){return window.pageSpecific.editorType==="hourofcode"},getProgrammingLanguage:function(){return window.pageSpecific.programmingLanguage},getProgramType:function(){return window.pageSpecific.progType},getItemID:function(){return window.pageSpecific.itemID},autograderCode:JSON.parse(window.pageSpecific.autograderCode),autograderConfig:window.pageSpecific.autograderConfig,codeUserID:window.pageSpecific.codeUserID,viewerID:window.pageSpecific.viewerID,solutionCode:htmlDecode(window.pageSpecific.solutionCode),save:function(r,n){n!==void 0?saveCode(t.getCodeTree(),!1,n).then(function(){r()}):saveCode(t.getCodeTree()).then(function(){r()})},getInfo:function(){return this.info},info:{codeUserID:window.pageSpecific.codeUserID,itemID:window.pageSpecific.itemID,studentAssignmentID:window.pageSpecific.studentAssignmentID,moduleID:window.pageSpecific.moduleID,courseID:window.pageSpecific.courseID,sql_tables:window.pageSpecific.sql_tables},itemID:window.pageSpecific.itemID,moduleID:window.pageSpecific.moduleID,courseID:window.pageSpecific.courseID,stop:function(){window.CodeHSConsole.clear()},cleanNewLine:function(r){return r=r.replace(/\r\n/g,`
`),r=r.replace(/\r/g,`
`),r},abc:t.abc,wasShimmed:!0,runOnHub:!0,clearHighlightedLines:function(){},graderExec:(r,n,i)=>new Promise((a,s)=>{PubSub.trigger("utils:disableButton",".run_code"),PubSub.trigger("utils:disableButton","button.grade_code"),PubSub.trigger("utils:disableButton","#grading-unit-test-run"),PubSub.trigger("ProgramRun:create",{userId:i.codeUserID,itemId:i.itemID,usesHub:!0,startTime:Date.now()}),t.execWithExistingConnection(r,n).then(o=>{if(PubSub.trigger("utils:enableButton",".run_code"),PubSub.trigger("utils:enableButton","button.grade_code"),PubSub.trigger("utils:enableButton","#grading-unit-test-run"),PubSub.trigger("ProgramRun:successful",Date.now()),t.shim.typeTester.isJava()&&t.shim.javaErrorChecker){var c={name:"karel"},l=[];for(var f in n)if(n.hasOwnProperty(f)){var g={};g.name=f,g.contents=n[f],l.push(g)}c.contents=l,t.shim.javaErrorChecker.check(o.split(`
`),c)}a(ANSI.transform(o))})})};e.typeTester=new TypeTester(e),e.javaErrorChecker=new JavaErrors(e),window.Ed=e,t.shim=e}function setup(){setupTestCasesAIButton(),!window.pageSpecific.showTeacherSaveButton&&!window.pageSpecific.previewOnly&&setupAutosave(),window.pageSpecific.trackKeystrokes&&setupTrackingKeystrokes(),setupTrackingHeartbeat(),window.pageSpecific.onDropletModeSwitch=function(t,e){let r=t==="code"&&e==="blocks"?"Droplet Mode Switch: Code to Blocks":"Droplet Mode Switch: Blocks to Code";PubSub.trigger("eventtracking:track_event",{name:r,data:{itemID:window.pageSpecific.itemID,sectionID:window.pageSpecific.sectionID,studentAssignmentID:window.pageSpecific.studentAssignmentID,codeUserID:window.pageSpecific.codeUserID,viewerID:window.pageSpecific.viewerID}})};let permissions=groupsToPermissions(window.pageSpecific.groups);var assetImports=void 0;typeof window.pageSpecific.assetImports<"u"&&(assetImports=JSON.parse(window.pageSpecific.assetImports),assetImports=assetImports.map(function(t){return t.uploadDate=new Date(JSON.parse(t.uploadDate)),t}));var assetStore=void 0;typeof window.pageSpecific.assetStore<"u"&&(assetStore=JSON.parse(window.pageSpecific.assetStore),assetStore=assetStore.map(function(t){return t.uploadDate=new Date(JSON.parse(t.uploadDate)),t}));var viewerIsPageUser=window.pageSpecific.codeUserID===window.pageSpecific.viewerID,isAdmin=window.pageSpecific.isAdmin,isFacebookExperienceCourse=window.pageSpecific.teacherCourseID===58752||window.pageSpecific.teacherCourseID===43536||window.pageSpecific.courseID===4252||window.pageSpecific.courseID===4280||window.pageSpecific.courseID===4251,canRenameProject=window.pageSpecific.isSandbox&&window.pageSpecific.isAuthenticated&&viewerIsPageUser&&!window.pageSpecific.isCodeHSMeHomepage;window.pageSpecific.isBlockly&&eval(window.pageSpecific.block_definitions);let consoleThemeValue=window.pageSpecific.editorSettings.consoleTheme.value;consoleThemeValue==="System Default"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?consoleThemeValue="Dark":consoleThemeValue="Light");let editorSettings={theme:{value:window.pageSpecific.editorSettings.theme.value,choices:window.pageSpecific.editorSettings.theme.choices,displayName:window.pageSpecific.editorSettings.theme.displayName,category:window.pageSpecific.editorSettings.theme.category,type:"choice"},fontSize:{value:window.pageSpecific.editorSettings.fontSize.value,min:10,max:36,displayName:window.pageSpecific.editorSettings.fontSize.displayName,category:window.pageSpecific.editorSettings.fontSize.category,type:"numerical"},consoleFontSize:{value:window.pageSpecific.editorSettings.consoleFontSize.value,displayName:window.pageSpecific.editorSettings.consoleFontSize.displayName,category:window.pageSpecific.editorSettings.consoleFontSize.category,min:10,max:36,type:"numerical"},autoComplete:{value:window.pageSpecific.editorSettings.autocomplete.value,type:"switch",displayName:window.pageSpecific.editorSettings.autocomplete.displayName,category:window.pageSpecific.editorSettings.autocomplete.category,hidden:window.pageSpecific.editorEngine=="Monaco Editor"},wrapLines:{value:window.pageSpecific.editorSettings.wrapLines.value,type:"switch",displayName:window.pageSpecific.editorSettings.wrapLines.displayName,category:window.pageSpecific.editorSettings.wrapLines.category,hidden:window.pageSpecific.editorEngine=="Monaco Editor"},consoleTheme:{value:consoleThemeValue,choices:window.pageSpecific.editorSettings.consoleTheme.choices,displayName:window.pageSpecific.editorSettings.consoleTheme.displayName,category:window.pageSpecific.editorSettings.consoleTheme.category,type:"choice"}};window.pageSpecific.sharedProgramID&&window.pageSpecific.isAuthenticated&&viewerIsPageUser&&window.pageSpecific.editorSettings.sharedProgramDroplet?editorSettings.sharedProgramDroplet={value:window.pageSpecific.editorSettings.sharedProgramDroplet.value,type:"switch",displayName:window.pageSpecific.editorSettings.sharedProgramDroplet.displayName,category:window.pageSpecific.editorSettings.sharedProgramDroplet.category,blocksDisabled:window.pageSpecific.editorSettings.sharedProgramDroplet.blocksDisabled}:window.pageSpecific.isSandbox||(editorSettings.defaultBlocks={value:window.pageSpecific.editorSettings.defaultBlocks.value,type:"switch",displayName:window.pageSpecific.editorSettings.defaultBlocks.displayName,category:window.pageSpecific.editorSettings.defaultBlocks.category});let abacusOptions={uuid:"outer",projectName:htmlDecode(window.pageSpecific.itemTitle),linkProjectName:window.pageSpecific.isHomepage,linkedProjectName:htmlDecode(window.pageSpecific.baseItemTitle),projectType:window.pageSpecific.abacusProjectType,displayMode:window.pageSpecific.displayMode,dockerImage:window.pageSpecific.dockerImage,root:"root",useBlockly:JSON.parse(window.pageSpecific.showBlocks),helperCode:window.pageSpecific.helper_code,customToolbox:JSON.parse(window.pageSpecific.custom_toolbox),staticUrl:window.CHS.GULP_URL+"abacus/",showFileTree:JSON.parse(window.pageSpecific.showFileTree),leftTabsMinimized:window.pageSpecific.isBlockly||window.pageSpecific.isSandbox&&!JSON.parse(window.pageSpecific.hasMultipleFiles),hideSettingsButton:window.pageSpecific.isBlockly,showAssetList:viewerIsPageUser&&isFacebookExperienceCourse&&isAdmin,readOnly:window.pageSpecific.readOnly||!1,hideCode:window.pageSpecific.hideCode,hideLeftPanel:window.pageSpecific.hideLeftPanel,files:mapAbacusFiles(window.pageSpecific.files,function(t){return Object.assign(t,{text:htmlDecode(t.text)})}),activeFilePathString:getQueryParams().filepath,assetImports,assetStore,onSave:window.pageSpecific.codeUserID===window.pageSpecific.viewerID||window.pageSpecific.viewingNoneUsersSharedProgramAsNoneUser||window.pageSpecific.allowCollaboration&&window.pageSpecific.isAuthenticated?onAbacusEditorSave:void 0,onCanvasPopulated:window.pageSpecific.uploadResultImage?onCanvasPopulated:void 0,onAssetUpload:window.pageSpecific.codeUserID===window.pageSpecific.viewerID?uploadAsset:void 0,onAssetChange:window.pageSpecific.codeUserID===window.pageSpecific.viewerID?saveAssets:void 0,onFileRename:window.pageSpecific.codeUserID===window.pageSpecific.viewerID?fileRename:void 0,onProjectConfigurationChange,onFileSelected:function(t){updateQueryString({filepath:t})},onComment,editorSettings,canRenameMainFile:window.pageSpecific.isSandbox||window.pageSpecific.allowRenameMainFile,canRenameProject,codeServerUrl:window.pageSpecific.codeServerUrl,onSettingsChange:function(t,e,r){t==="projectName"?Ajax.send({method:"set_item_title",app:"library",data:{itemId:window.pageSpecific.itemID,title:e},success:function(n){n.status==="ok"&&(PubSub.trigger("editor:sandboxItemTitleChange",n.URLTitle),shareURL=n.URLTitle[0])}}):Ajax.send({method:"user_settings_change",app:"editor",data:{setting:t,value:e,user_id:window.pageSpecific.viewerID,shared_program_id:window.pageSpecific.sharedProgramID,editor_engine:r}})},onFileIOChange:function(t){Ajax.send({method:"set_file_io",app:"editor",data:{value:t,item_id:window.pageSpecific.itemID}})},onCodeServerConnectionTrack:function(t,e){var r=window.pageSpecific.codeServerConnectionTrackingSampleRate||0;return r<=0||Math.random()>r?Promise.resolve():new Promise(function(n,i){Ajax.send({method:"track_code_server_connection",app:"editor",data:{status:t,duration_ms:e},success:function(a){n(a)},error:function(a,s,o){i(o)}})})},baseHtmlProgramUrl:window.pageSpecific.baseHtmlProgramUrl,externalProgramURL:window.pageSpecific.externalProgramURL,slurpHTML:window.pageSpecific.slurpHTML,frameSrcCSPDirective:window.pageSpecific.frameSrcCSPDirective,iframeDocs:!window.pageSpecific.hideDocsTab,iframeDocsURL:window.pageSpecific.BASE_URL+"/documentation/item/"+window.pageSpecific.itemID+"/embed?section_id="+window.pageSpecific.sectionID,allowUploads:window.pageSpecific.isSandbox||window.pageSpecific.explicitlyAllowUploads,processFiles:function(t){return new Promise(function(e,r){$.ajax({url:"/core/ajax/abacus_upload",type:"POST",data:t,processData:!1,dataType:"JSON",contentType:!1}).then(function(n){if(n.status!="ok"&&n.msg){window.toastr.error(n.msg);return}switch(n.type){case"file_contents":e(n.file_text);break;case"file_tree":e(n.file_tree);break;case"asset_url":var i=BASE_URL+n.url;e(i);break}})})},socketIOTransportType:window.pageSpecific.socketIOTransportType||"polling",allowCollaboration:window.pageSpecific.allowCollaboration,onCollaborationEnabled:window.pageSpecific.allowCollaboration&&onCollaborationEnabled,onCollaborationDisabled:window.pageSpecific.allowCollaboration&&onCollaborationDisabled,onCollabModeChanged:window.pageSpecific.allowCollaboration&&onCollabModeChanged,onCollabIdentifierReset:window.pageSpecific.allowCollaboration&&onCollabIdentifierReset,collaborateVisible:window.pageSpecific.collaborateVisible,showCollabTab:window.pageSpecific.allowCollaboration&&window.pageSpecific.collaborateVisible,showCollabControls:window.pageSpecific.showCollabControls&&window.pageSpecific.collaborateVisible,isTeacher:window.pageSpecific.teacherForAssignment,canUseAssignmentCollaborate:window.pageSpecific.useAssignmentCollab,assignmentCollabMode:window.pageSpecific.assignmentCollabMode,collaborateIdentifier:window.pageSpecific.allowCollaboration&&window.pageSpecific.collaborateIdentifier,collaborationEnabled:window.pageSpecific.allowCollaboration&&window.pageSpecific.collaborationEnabled,isHost:window.pageSpecific.codeUserID===window.pageSpecific.viewerID,canChangeProjectConfigurations:window.pageSpecific.isSandbox,projectConfigurations:window.pageSpecific.transitions,initialProjectConfigurationName:window.pageSpecific.initialProjectConfigurationName,showChat:permissions.canUseChat||window.pageSpecific.isAdmin,canUseMonaco:!window.pageSpecific.isCollaborate,canToggleFileTabBar:!0,showFileTabBar:window.pageSpecific.displayMode!=="practice",canChangeIFrameTemplate:permissions.canChangeIFrameTemplate,preventCopyPaste:window.pageSpecific.preventCopyPaste,preventChangingEditor:window.pageSpecific.preventChangingEditor,initialLayoutOverride:window.pageSpecific.isSandbox?{}:{left:{width:"21%",minimized:!1}},canToggleAutoRefresh:permissions.canToggleAutoRefresh,canAutoFormat:window.pageSpecific.language=="javascript",showSpriteEditor:permissions.showSpriteEditor,showLayoutConfig:!0,showSaveButton:window.pageSpecific.codeUserID===window.pageSpecific.viewerID&&!window.pageSpecific.previewOnly,collaborators:window.pageSpecific.collaborators,canComment:permissions.canComment,editorEngine:window.pageSpecific.editorEngine,showRecordButton:window.pageSpecific.isAuthenticated&&window.pageSpecific.beatsUnlockedContestID!==0,onAudioDataReceived,onSendAudioText,watchCodeServer:window.pageSpecific.watchCodeServer,showTimeSpent:window.pageSpecific.showTimeSpent,showMiscBetaIDEFeatures:permissions.showMiscBetaIDEFeatures,launchTemplate:window.pageSpecific.launchTemplate,useNewBlockly:window.pageSpecific.useNewBlockly,block_definitions:window.pageSpecific.block_definitions||"",useBlocklyJSON:window.pageSpecific.useNewBlockly&&window.pageSpecific.itemType==C.ItemType.SANDBOX,enableProxyDomainCheck:window.pageSpecific.enableProxyDomainCheck??!1,proxyDomains:window.pageSpecific.proxyDomains??[]};if(window.pageSpecific.abacusProjectType==="html")if(window.pageSpecific.useServiceWorkerVFS)abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{evaluationIFrames:[{shortName:"Default",template:window.pageSpecific.blockCodeHSMe?window.pageSpecific.baseHtmlProgramUrl+"/__codehs__/codehs_me_error.html":window.pageSpecific.baseHtmlProgramUrl+"/__codehs__/sw_html.html",hideRunBar:!1,autoRun:!1,active:!1},{shortName:"Show URL Bar",template:window.pageSpecific.blockCodeHSMe?window.pageSpecific.baseHtmlProgramUrl+"/__codehs__/codehs_me_error.html":window.pageSpecific.baseHtmlProgramUrl+"/__codehs__/sw_show_url_bar.html",hideRunBar:!0,autoRun:!0,active:!0}]}});else if(window.pageSpecific.isAuthenticated){let t=window.pageSpecific.baseHtmlProgramUrl?window.pageSpecific.baseHtmlProgramUrl+"/__codehs__/html_url_bar/index.html":"evaluation/htmlUrlBar/index.html";var evaluationIFrames=[{shortName:"Default",template:"evaluation/html.html",hideRunBar:!1,autoRun:!1,active:!1},{shortName:"Show URL Bar",template:t,description:"Replaces the standard Run bar with one for navigating URLs.This can only be used if your HTML program is hosted on CodeHS.",hideRunBar:!0,autoRun:!0,active:!0}];abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{evaluationIFrames}})}else abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{evaluationIFrames:[{shortName:"Default",template:"evaluation/html.html",hideRunBar:!1,autoRun:!1,active:!0}]}});else window.pageSpecific.abacusProjectType==="python3"?new URLSearchParams(window.location.search).has("python3.11")&&(abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{spawnCommand:({installCommand:e,mainFileName:r,debugMode:n})=>n?`${e?e+"&& ":""}python3.11 -m pdb ${r}`:`${e?e+"&& ":""}python3.11 -B ${r}`}})):window.pageSpecific.abacusProjectType==="java"&&new URLSearchParams(window.location.search).has("java17")&&(abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{spawnCommand:({filesToCompile:e,jarNames:r,mainClass:n,debugMode:i})=>{let a=r?`-classpath .:${r}`:"";return i?`jenv local 17 &&                            javac -g ${a} ${e} &&                            jdb -launch ${a} ${n}`:`jenv local 17 &&                            javac ${a} ${e} &&                            java ${a} ${n}`}}}));window.pageSpecific.isBlockly&&!["turtle","turtle-blocks"].includes(window.pageSpecific.abacusProjectType)&&(abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{evaluationIFrames:[{shortName:"Default",template:"evaluation/js/javascript-graphics.html",autoRun:!1,hideRunBar:!1,active:!0}]}})),window.pageSpecific.shouldUseStopifyWhenAvailable&&window.pageSpecific.abacusProjectType==="javascript-console"&&(abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{evaluationIFrames:[{shortName:"Default",template:"evaluation/js/beta/javascript-console-new-js-lib.html",autoRun:!1,description:"Use the newest vesion of the JavaScript library.",hideRunBar:!1,active:!1},{shortName:"Legacy JavaScript Library",template:"evaluation/js/javascript-console.html",hideRunBar:!1,autoRun:!1,active:!1},{shortName:"Stopify",template:"evaluation/js/javascript-console-stopify.html",description:"Stopify introduces non-blocking input and safe evaluation of infinite loops to JavaScript. For more, see stopify.org",hideRunBar:!1,active:!0}]}})),window.pageSpecific.itemType==C.ItemType.PRACTICE&&window.pageSpecific.hidePracticeScratchpad&&(abacusOptions||(abacusOptions={}),abacusOptions.projectConfigurationOverrides||(abacusOptions.projectConfigurationOverrides={}),abacusOptions.projectConfigurationOverrides.runBar||(abacusOptions.projectConfigurationOverrides.runBar={}),window.pageSpecific.displayMode!=="practice"&&(abacusOptions.projectConfigurationOverrides.runBar.buttonsType=4)),window.pageSpecific.displayMode==="practice"&&window.pageSpecific.abacusProjectType===C.AbacusProjectType.JS_CONSOLE&&(abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{outputComponents:[{relatedProcess:"browser-runner",layoutID:"browser-runner",type:"iframe",template:"evaluation/js/beta/javascript-practice-console.html",hidden:!0},{layoutID:"console",relatedProcess:"console",type:"console",focusOnRun:!0}],evaluationIFrames:[{shortName:"Default",template:"evaluation/js/beta/javascript-practice-console.html",autoRun:!1,description:"",hideRunBar:!1,active:!0}]}})),window.pageSpecific.newEditorSettings&&(abacusOptions=deriveAbacusSettings({pageSpecific,viewerIsPageUser,isFacebookExperienceCourse,isAdmin,onAbacusEditorSave,uploadAsset,fileRename,onProjectConfigurationChange,permissions,canRenameProject,newResolvedSettings:window.pageSpecific.newEditorSettings,onSettingsChange:function(t,e,r){t==="projectName"?Ajax.send({method:"set_item_title",app:"library",data:{itemId:window.pageSpecific.itemID,title:e},success:function(n){n.status==="ok"&&(PubSub.trigger("editor:sandboxItemTitleChange",n.URLTitle),shareURL=n.URLTitle[0])}}):Ajax.send({method:"user_settings_change",app:"editor",data:{setting:t,value:e,user_id:window.pageSpecific.viewerID,shared_program_id:window.pageSpecific.sharedProgramID,editor_engine:r}})},onFileIOChange:function(t){Ajax.send({method:"set_file_io",app:"editor",data:{value:t,item_id:window.pageSpecific.itemID}})},onCodeServerConnectionTrack:function(t,e){var r=window.pageSpecific.codeServerConnectionTrackingSampleRate||0;return r<=0||Math.random()>r?Promise.resolve():new Promise(function(n,i){Ajax.send({method:"track_code_server_connection",app:"editor",data:{status:t,duration_ms:e},success:function(a){n(a)},error:function(a,s,o){i(o)}})})},processFiles:function(t){return new Promise(function(e,r){$.ajax({url:"/core/ajax/abacus_upload",type:"POST",data:t,processData:!1,dataType:"JSON",contentType:!1}).then(function(n){if(n.status!="ok"&&n.msg){window.toastr.error(n.msg);return}switch(n.type){case"file_contents":e(n.file_text);break;case"file_tree":e(n.file_tree);break;case"asset_url":var i=BASE_URL+n.url;e(i);break}})})},onCollaborationEnabled,onCollaborationDisabled,onCollabIdentifierReset,onAudioDataReceived,onSendAudioText})),window.myAbacus=new window.Abacus(abacusOptions),loadHistory(window.myAbacus,window.pageSpecific.codeUserID,window.pageSpecific.itemID,window.pageSpecific.studentAssignmentID,window.pageSpecific.viewerID),window.pageSpecific.studentAssignmentURLs.length&&window.myAbacus.addTitleBarElement(function(t){let e=window.pageSpecific.studentAssignmentURLs,r=window.pageSpecific.codeUserID,n=window.pageSpecific.codeUserName;var i=null;if(e.length>0){let a,s=e.filter(([l,f])=>f.includes("student/"+r));s.length>0?a=s[0][1]:(a=window.location.href,e.push([n,a]));let o=l=>{window.location.assign(l.target.value)},c=e.map(([l,f])=>html.option({value:f,selected:f===a},[l]));i=html.select({className:"student-dropdown"},[c]),t.appendChild(i),i.onchange=o}}),shimAbacusForModules(window.myAbacus),window.myAbacus.shim.typeTester.isSQL()&&(window.myAbacus.shim.runner=new RunnerFactory(window.myAbacus.shim).create(),window.myAbacus.shim.runner.setupDBExplorer(1));var editorInstructions=new EditorInstructions({itemID:window.pageSpecific.itemID,isGraphics:window.pageSpecific.isGraphics,isBlockly:window.pageSpecific.isBlockly,itemType:window.pageSpecific.itemType,noInstructions:window.pageSpecific.noInstructions});mostRecentSavedCode=window.myAbacus.getCodeTree(),$(".sidebar-canvas").each(function(){KarelWorld.quickDraw($(this),$(this).attr("data-world"),$(this).attr("data-width"),!0)}),window.Sk.TurtleGraphics={},window.Sk.configure({read:builtinRead}),setTimeout(function(){var t=new URLSearchParams(window.location.search),e=t.get("collaborate");e&&window.pageSpecific.unauthenticated&&!window.pageSpecific.allowUnauthenticatedCollaboration&&modalAlert({header:"Unable to collaborate",message:`It looks like you're trying to collaborate on this program.
To collaborate, you need to log in.`,cancel_callback:function(){var r=new URL(window.location.origin+"/login");r.searchParams.set("next",window.location.pathname),r.searchParams.set("collaborate",e),window.location.href=r.href},cancelButton:!0,buttonClass:"btn-main-green",button:"View Program",cancelButtonText:"Log In",cancelButtonClass:"btn-main-blue"})},0);function getReactCode(){return expoIntegrationUtils.userCodeToReactCode(getCurrentCodeText(),window.location.hostname)}function getCurrentCodeText(){var t=flattenAbacusFiles(window.myAbacus.getCodeTree())[0].text;window.pageSpecific.showBlocks&&(t=xmlToCodeHeadless(t,window.pageSpecific.language.split("-")[0]));var e=(window.pageSpecific.helper_code?window.pageSpecific.helper_code+`
`:"")+t;return window.pageSpecific.showBlocks&&window.pageSpecific.isGraphics&&(e="var start = function(){"+e+"};"),e}function getFileList(){return flattenAbacusFiles(window.myAbacus.getCodeTree())}function getFileContent(t,e){var r=t[e].text;window.pageSpecific.showBlocks&&(r=xmlToCodeHeadless(r,window.pageSpecific.language.split("-")[0]));var n=(window.pageSpecific.helper_code?window.pageSpecific.helper_code+`
`:"")+r;return window.pageSpecific.showBlocks&&window.pageSpecific.isGraphics&&(n="var start = function(){"+n+"};"),n}function xmlToCodeHeadless(t,e){var r=new window.Blockly.Workspace,n=window.Blockly.Xml.textToDom(t);switch(window.Blockly.Xml.domToWorkspace(n,r),e){case"javascript":return window.Blockly.JavaScript.workspaceToCode(r);case"python":return window.Blockly.Python.workspaceToCode(r);case"html":return window.Blockly.HTML.workspaceToCode(r);default:return window.Blockly.Python.workspaceToCode(r)}}var expoSnackSessionPromise=null;if(window.pageSpecific.showPhoneTab)try{var expoArgs={hostname:window.location.hostname,codeTitle:htmlDecode(window.pageSpecific.itemTitle),codeDescription:window.pageSpecific.codeUserFirstNameLastInitial,userProgramID:window.pageSpecific.userProgramID};expoSnackSessionPromise=expoIntegrationUtils.sessionPromise(getReactCode(),expoArgs)}catch(t){console.error("Error creating expo snack session",t)}function onCanvasPopulated(t){t.image&&(window.resultImageURL=t.image)}function onAbacusEditorSave(t,e){return e==="mainFileChanged"?new Promise(function(r,n){var i=flattenAbacusFiles(t),a=i.filter(function(s){return s.main})[0]||i[0];Ajax.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:a.name},success:function(s){if(s.status=="ok")return r();n()}})}):(expoSnackSessionPromise&&expoSnackSessionPromise.then(function(r){expoIntegrationUtils.updateCode(getReactCode(),r,expoIntegrationUtils.SNACK_SESSION_QR_DOM)}),saveCode(t,!1,e))}if(!window.pageSpecific.isSandbox){var tabName;if(window.pageSpecific.isExample?tabName="Example":window.pageSpecific.studentAssignmentID?tabName="Assignment":tabName="Exercise",(()=>{let t="#course-search",e="#search-results",r=".js-search-item",n="#sidebar-content-tab",i="#content-listing",a=null,s=null,o=()=>(s||(s=new Promise((m,y)=>{a?m(a):Ajax.send({method:"get_sidebar_content",app:"editor",data:{userId:window.pageSpecific.codeUserID,itemId:window.pageSpecific.itemID,moduleId:window.pageSpecific.moduleID,courseId:window.pageSpecific.courseID,studentAssignmentId:window.pageSpecific.studentAssignmentID||0}}).then(x=>{let I=x.text;a=I,m(I)})})),s),c=function(){let m=$(e),y=$(r);var I=$(t).val();I.length>=3?(m.show(),y.each(function(){var A=$(this),F=A.data("item-title");F.toLowerCase().indexOf(I)!==-1?A.show():A.hide()})):m.hide()},l=function(){var m=$(this);$(this).hasClass("closed")?($(".module-progress.open").length?$(".module-progress.open").next().slideUp(400,function(){$(this).prev().addClass("closed").removeClass("open").attr("aria-expanded","false"),g(m)}):g(m),$(this).addClass("open").removeClass("closed").attr("aria-expanded","true")):$(this).next().slideUp("slow",function(){m.addClass("closed").removeClass("open").attr("aria-expanded","false")})},f=function(){if($(this).next().slideToggle("fast"),$(this).toggleClass("closed").toggleClass("open"),$(this).hasClass("open")){var m=$(i).scrollTop()-$(i).offset().top;$(i).animate({scrollTop:$(this).offset().top+m},"slow"),$(this).attr("aria-expanded","true")}else $(this).attr("aria-expanded","false")},g=function(m){m.next().slideDown(400,function(){var y=$(i).scrollTop()-$(i).offset().top;$(i).animate({scrollTop:m.offset().top+y},400)})};(window.pageSpecific.studentAssignmentID||window.pageSpecific.courseID)&&window.myAbacus.addTab({title:'<span class="chs-icon chs-icon-calendar" style="font-size:19px;margin:auto;width:100%;"></span>',side:"left",tooltipText:"Course",id:"course-tab",index:0,tabClass:"js-course-sidebar-lazy"},function(y){y.innerHTML='<div><div class="less-important-js-loading"><div class="loader"></div></div></div>',$(".js-course-sidebar-lazy").one("mouseover",function(){o().then(x=>{y.innerHTML='<div id="course-sidebar" style="padding-top:0; width:100%;"><div id="sidebar-content-tab" class="tab-pane">'+x+"</div></div>",$(y).find(t).on("keyup",c),$(y).find(".module-progress").on("click",l),$(y).find(".lesson-item.current").parent().slideDown().prev().removeClass("closed").addClass("open").attr("aria-expanded","true"),$(y).find(".module-lesson").on("click",f);var I=$(y).find(".module-progress.current-module");I.length&&$(y).find(i).scrollTop(I.offset().top),PubSub.trigger("main:setupTooltips",n)})})},function(y){$(y).find(t).off("keyup",c),$(y).find(".module-progress").off("click",l),$(y).find(".module-lesson").off("click",f)})})(),window.myAbacus.addTab({title:'<span class="chs-icon chs-icon-map" style="font-size:19px;margin:auto;width:100%;"></span>',side:"left",tooltipText:"Assignment",id:"assignment-tab",index:0},function(t){t.innerHTML=window.pageSpecific.overviewTab.text,editorInstructions.setupReShowPopup(),PubSub.trigger("CHS.Utils.markdown:setup"),window.myAbacus.shim.typeTester.isSQL()&&window.myAbacus.shim.runner.showResultColumns(),$("#turtle-objective-world").each(function(){this.style.display="inline-block",turtleQuickDraw({code:htmlDecode(window.pageSpecific.solution),target:"turtle-objective-world",oldTarget:"python-canvas",height:200,width:200,animate:!1,canvasCoordinates:[-200,-200,200,200]})})}),window.pageSpecific.showAIChatTab&&window.myAbacus.addTab({title:'<span class="chs-icon chs-icon-forum" style="font-size:19px;margin:auto;width:100%;"></span>',side:"left",tooltipText:"Chat",id:"chat-tab",index:5,tabClass:"js-chat-sidebar-lazy"},function(e){e.innerHTML='<div><div class="less-important-js-loading"><div class="loader"></div></div></div>',$(".js-chat-sidebar-lazy").one("mouseover",function(){if(!window.pageSpecific.studentAssignmentID){e.innerHTML='<div class="alert alert-warning">No assignment context found</div>';return}Ajax.send({method:"get_ai_chat_thread",app:"editor",data:{userId:window.pageSpecific.codeUserID,studentAssignmentId:window.pageSpecific.studentAssignmentID},success:function(r){r.status==="ok"?(e.innerHTML=r.text,window.getFileList=getFileList,window.getFileContent=getFileContent,PubSub.trigger("ai:chat:setup")):e.innerHTML='<div class="alert alert-danger">Error: '+(r.msg||"Failed to load chat")+"</div>"},error:function(){e.innerHTML='<div class="alert alert-danger">Failed to load chat thread</div>'}})})},function(e){$(e).find(".chat-quick-btn").off("click")}),window.myAbacus.selectTabWithIdentifier("leftTabs","files"),window.myAbacus.addTab({title:tabName,side:"right",isMore:!1,id:"content-tab",index:2},function(t){var e={item_id:window.pageSpecific.itemID,course_id:window.pageSpecific.courseID,result_world:window.pageSpecific.resultWorld,code_user_id:window.pageSpecific.codeUserID,module_id:window.pageSpecific.moduleID};window.pageSpecific.studentAssignmentID&&(e.student_assignment_id=window.pageSpecific.studentAssignmentID),registerAjaxTabRequest("exercise tab",e).then(r=>{if(r.status=="ok"){t.innerHTML=r.text;var n=window.pageSpecific.itemDescription;$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}),PubSub.trigger("CHS.Utils.markdown:setup"),window.pageSpecific.allowCopyPasteCodeHSOnly&&t.addEventListener("copy",function(){window.localStorage.setItem("codehsCopy",window.getSelection().toString())}),window.myAbacus.shim.typeTester.isSQL()&&window.myAbacus.shim.runner.setupDBExplorer(2),$(AI_EASIER_BUTTON).on("click",function(){PubSub.trigger("utils:disableButton",$(AI_EASIER_BUTTON)),$(AI_CHALLENGE_BUTTON).attr("disabled","disabled"),Ajax.send({method:"change_difficulty",app:"ai",data:{difficulty:"decrease",description:n},success:function(s){$(AI_CHALLENGE_BUTTON).removeAttr("disabled"),PubSub.trigger("utils:enableButton",$(AI_EASIER_BUTTON)),s.status=="ok"?($(".markdown-ai-exercise-description").removeClass("hidden"),$(".markdown-ai-exercise-description").attr("data-markdown",s.new_description),PubSub.trigger("CHS.Utils.markdown:setup")):window.toastr.error(s.msg)}})}),$(AI_CHALLENGE_BUTTON).on("click",function(){PubSub.trigger("utils:disableButton",$(AI_CHALLENGE_BUTTON)),$(AI_EASIER_BUTTON).attr("disabled","disabled"),Ajax.send({method:"change_difficulty",app:"ai",data:{difficulty:"increase",description:n},success:function(s){$(AI_EASIER_BUTTON).removeAttr("disabled"),PubSub.trigger("utils:enableButton",$(AI_CHALLENGE_BUTTON)),s.status=="ok"?($(".markdown-ai-exercise-description").removeClass("hidden"),$(".markdown-ai-exercise-description").attr("data-markdown",s.new_description),PubSub.trigger("CHS.Utils.markdown:setup")):window.toastr.error(s.msg)}})});var i=window.pageSpecific.itemDescription,a=window.pageSpecific.isQuill;QuillCustom.chooseEditor([{qlTarget:"#quill-exercise-description",mdTarget:".markdown-exercise-description",content:i}],a)}})}),!window.pageSpecific.isExample&&window.pageSpecific.showGradingTab?window.myAbacus.addTab({title:window.pageSpecific.studentAssignmentID?"Test&nbsp;Cases":"Grading",side:"right",id:"test-tab",isMore:!1,index:1},function(t){registerAjaxTabRequest("autograder tab",{item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID,code_user_id:window.pageSpecific.codeUserID,student_assignment_id:window.pageSpecific.studentAssignmentID}).then(e=>{if(e.status=="ok"){t.innerHTML='<div class="grading-tab" id="grading-tab">'+e.text+'<pre hidden id="console"></pre><canvas width="400" height="480" class="codehs-editor-canvas" hidden></canvas></div>',$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}).addClass("editor-tab-content"),window.myAbacus.shim.runner=new RunnerFactory(window.myAbacus.shim).create();let r=new GradingTab(window.myAbacus.shim);PubSub.trigger("ajaxui:setup",".grading-tab"),PubSub.trigger("main:setupTooltips",".grading-tab"),$(".switch").bootstrapSwitch(),window.pageSpecific.displayMode!=="practice"&&window.myAbacus.addExternalRunBarDefinition({className:"button",onClick:()=>{window.myAbacus.selectTabWithIdentifier("rightTabs","test-tab"),r.gradeCode()},label:"Check Code",color:"#9e1e62",hoverIndicator:{background:{color:"#77194f"}}})}})}):$("body").append('<pre hidden id="console"></pre><canvas width="400" height="480" class="codehs-editor-canvas" hidden></canvas></div>'),window.pageSpecific.isAuthenticated&&window.pageSpecific.studentAssignmentID&&window.myAbacus.addTab({title:"Grade",side:"right",id:"grade-tab",isMore:!1,index:4},function(t){registerAjaxTabRequest("lms grading tab",{code_user_id:window.pageSpecific.codeUserID,item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID,student_assignment_id:window.pageSpecific.studentAssignmentID}).then(e=>{e.status=="ok"&&(t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}),$(t).find("select").selectpicker(),new LMSGradingTab(window.myAbacus.shim),PubSub.trigger("ajaxui:setup","#lms-grading-tab"),window.pageSpecific.showAIGrade&&(window.myAbacus.selectTabWithIdentifier("rightTabs","grade-tab"),$("#ai-grade").trigger("click")))})}),window.pageSpecific.canViewSolutionTab&&window.myAbacus.addTab({title:"Solution",side:"right",id:"solution-tab",isMore:!0},function(t){var e={item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID,code_user_id:window.pageSpecific.codeUserID};window.pageSpecific.studentAssignmentID&&(e.student_assignment_id=window.pageSpecific.studentAssignmentID),registerAjaxTabRequest("solution tab",e).then(r=>{r.status=="ok"&&(t.innerHTML=r.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}),PubSub.trigger("CHS.Utils.markdown:setup"),setupLoadCodeButtons())})}),window.pageSpecific.textbookUrl&&window.myAbacus.addTab({title:"Textbook",side:"right",id:"textbook-tab",isMore:!0,tabClass:"js-textbook-lazy-load"},function(t){$(".js-textbook-lazy-load").one("mouseover",function(){$(t).append($("<iframe>").attr({src:window.pageSpecific.textbookUrl,id:"textbook-tab-iframe"}))})}),window.myAbacus.addTab({title:"Video",side:"right",id:"video-tab",isMore:!0,tabClass:"js-video-slides-lazy-load"},function(t){var e={course_id:window.pageSpecific.courseID,module_id:window.pageSpecific.moduleID,item_id:window.pageSpecific.itemID,code_user_id:window.pageSpecific.codeUserID};window.pageSpecific.studentAssignmentID&&(e.student_assignment_id=window.pageSpecific.studentAssignmentID),registerAjaxTabRequest("video tab",e).then(r=>{if(r.status=="ok"){t.innerHTML=r.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"});var n=function(a){!a||!window.pageSpecific.isAuthenticated||$(".js-video-slides-lazy-load").one("click",function(){$(".ql-toolbar").show();var s=$("#ql-notepad-container").data("notes"),o=QuillCustom.createEditor("#ql-notepad-container",s);$("#ql-notepad-container").height(200);var c=$("#ql-notepad-container");if(!$("#abacus-video-notes-save").length){var l=$('<button id="abacus-video-notes-save" class="btn btn-main-blue btn-sm" type="button">Save</button>');c.after(l),l.on("click",function(){$("#save-status").text("Saving...");var f=c.find(".ql-editor").html();i(f,a)})}c.on("blur",".ql-editor",function(f){var g=f.relatedTarget;if(!(g&&g.id==="abacus-video-notes-save")){$("#save-status").text("Saving...");var m=$(this).html();i(m,a)}})})},i=function(a,s){Ajax.send({method:"save_user_notes",app:"editor",data:{notes:a,item_id:s},success:function(o){$("#save-status").text("Saved")},error:function(o){$("#save-status").text("Error! Please try again.")}})};n(window.pageSpecific.videoID),PubSub.trigger("CHS.Utils.markdown:setup"),$(".js-video-slides-lazy-load").one("mouseover",function(){var a=$("#video-tab-slides-iframe");if(!a.attr("src")){var s=a.data("src");a.attr("src",s)}})}})}),!window.pageSpecific.previewOnly&&window.pageSpecific.showHelpTab&&window.pageSpecific.isAuthenticated&&(!window.pageSpecific.studentAssignmentID||window.pageSpecific.showConversationTab)){var showConversationTabOnLeft=window.pageSpecific.showConversationTabOnLeft,conversationTabLabel=window.pageSpecific.studentAssignmentID?"Conversation":"Help";window.myAbacus.addTab({title:showConversationTabOnLeft?conversationTabIcon:conversationTabLabel,tooltipText:showConversationTabOnLeft?conversationTabLabel:void 0,side:showConversationTabOnLeft?"left":"right",id:"convo-tab",isMore:!!window.pageSpecific.studentAssignmentID},function(t){registerAjaxTabRequest("help tab",{item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID,code_user_id:window.pageSpecific.codeUserID,student_assignment_id:window.pageSpecific.studentAssignmentID}).then(e=>{if(e.status=="ok"){if(t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}).addClass("help-tab").attr("id","help-tab"),window.pageSpecific.studentAssignmentID){if(new ConversationTab(window.myAbacus.shim),showConversationTabOnLeft){var r='.__abacus_left-tab div[aria-label*="Conversation"]';$(r).on("click",function(){window.myAbacus.resizeLeftPanel(30)});var n='.__abacus_left-tab :not(div[aria-label*="Conversation"])';$(n).on("click",function(){window.myAbacus.resizeLeftPanel(21)})}}else new HelpTab(window.myAbacus.shim);window.pageSpecific.helpTabActive&&window.myAbacus.selectTabWithIdentifier("rightTabs","convo-tab"),PubSub.trigger("ajaxui:setup",".help-tab"),$(".switch").bootstrapSwitch(),setupFavoriteStar()}})})}}window.pageSpecific.showMusicLibraryTab&&window.pageSpecific.isAuthenticated&&!window.pageSpecific.viewingOthersSharedProgram&&window.myAbacus.addTab({title:"Music Library",side:"right",id:"music-tab",isMore:!0},function(t){registerAjaxTabRequest("music library tab",{item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID,code_user_id:window.pageSpecific.codeUserID}).then(e=>{if(e.status=="ok"){var r=C.BlocklyMusicSettings.SONG_SAMPLES;t.innerHTML=e.text;var n=new window.Tone.Players,i=setInterval(function(){updateSeeker(r,n)},500);TIMERS.push(i),r.forEach(function(a){var s=a[3],o='<block type="instrument_custom" x="31" y="167"><field name="INSTRUMENT">https://codehs.com/uploads/'+s+"</field></block>",c=window.Blockly.Xml.textToDom(o);$("#info-"+s+" .copy-btn").off("click"),$("#info-"+s+" .copy-btn").on("click",function(){window.Blockly.mainWorkspace.paste(c),window.Blockly.clipboardXml_=c}),n.add(s,"https://codehs.com/uploads/"+s,function(){initializeButtons(s,n)})})}})}),window.pageSpecific.abacusProjectType===C.AbacusProjectType.REACT_NATIVE&&window.myAbacus.addTab({title:"Components",side:"right",id:"components-tab",isMore:!1},function(t){registerAjaxTabRequest("components tab",{}).then(e=>{e.status=="ok"&&(t.innerHTML=e.text,$(t).css({padding:"10px 15px",overflowY:"auto"}),PubSub.trigger("main:setupClickToCopy","#components-container"))})});function initializeButtons(t,e){var r="#controls-"+t,n=e.get(t);$(r+" .tracker").val(0),$(r+" .play-btn").removeClass("icon-spinner"),$(r+" .play-btn").removeClass("icon-spin"),$(r+" .play-btn").addClass("icon-play"),$(r+" .tracker").removeClass("hidden"),$(r+" .play-btn").off("click"),$(r+" .play-btn").on("click",function(){e.stopAll(),$(".play-btn").removeClass("hidden"),$(".pause-btn").addClass("hidden"),$(".info").removeClass("playing-color"),$(r+" .play-btn").addClass("hidden"),$(r+" .pause-btn").removeClass("hidden"),$("#info-"+t).addClass("playing-color");var i=$(r+" .tracker").val();n.toMaster().start(window.Tone.now(),i)}),$(r+" .pause-btn").off("click"),$(r+" .pause-btn").on("click",function(){$(r+" .play-btn").removeClass("hidden"),$(r+" .pause-btn").addClass("hidden"),$("#info-"+t).removeClass("playing-color"),n.toMaster().stop(window.Tone.now())}),$(r+" .tracker").attr("max",n.buffer.duration),$(r+" .tracker").data("mousedown",!1),$(r+" .tracker").on("click",function(){n.toMaster().seek($(this).val(),window.Tone.now())}),$(r+" .tracker").on("mousedown",function(){$(this).data("mousedown",!0)}),$(r+" .tracker").on("mouseup",function(){$(this).data("mousedown",!1)})}function updateSeeker(t,e){t.forEach(function(r){var n=r[3],i=e.get(n);if(i&&i.state=="started"){var a=$("#controls-"+n+" .tracker");a.data("mousedown")||a.val(i.position);return}})}window.pageSpecific.hideCode||window.myAbacus.addTab({title:"Download",side:"right",id:"download-tab",isMore:!0},function(t){registerAjaxTabRequest("download tab",{course_id:window.pageSpecific.courseID,module_id:window.pageSpecific.moduleID,item_id:window.pageSpecific.itemID,code_user_id:window.pageSpecific.codeUserID}).then(e=>{e.status=="ok"&&(t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}))})}),window.myAbacus.addTab({title:"About",side:"right",id:"about-tab",isMore:!0},function(t){registerAjaxTabRequest("about tab",{item_id:window.pageSpecific.itemID,code_user_id:window.pageSpecific.codeUserID}).then(e=>{e.status=="ok"&&(t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}).attr("id","about-tab"),$(t).find("[rel=tooltip]").tooltip({container:"body"}),PubSub.trigger("ajaxui:setup","#about-tab"))})}),window.pageSpecific.showPasteTab&&window.myAbacus.addTab({title:"Import From Assignment",side:"right",id:"paste-tab",isMore:!0},function(t){Ajax.send({app:"editor",method:"get_paste_tab",data:{code_user_id:window.pageSpecific.codeUserID,assignment_id:window.pageSpecific.assignmentID,section_id:window.pageSpecific.sectionID},success:function(e){if(e.status=="ok"){t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}).attr("id","paste-tab"),$(t).find("[rel=tooltip]").tooltip({container:"body"}),PubSub.trigger("ajaxui:setup","#paste-tab");var r=$("#assignment_id").val(),n=$("#assignment_id option"),i=n.index(n.filter("[value="+r+"]"));i>0&&$("#assignment_id").prop("selectedIndex",i-1);var a=!0;$("#paste-code").on("click",function(){var s=$(this);confirmPasteFromAssignment(a).then(()=>{s.attr("disabled",!0);var o=flattenAbacusFiles(window.myAbacus.getCodeTree()),c=o.reduce(function(f,g){if(g.shouldSave&&!g.hidden){var m=g.name,y=_.trimRight(g.text);f[m]=y}return f},{}),l=JSON.stringify(c);Ajax.send({app:"editor",method:"paste_code",data:{file_json:l,item_id:window.pageSpecific.itemID,pasted_assignment:$("#assignment_id").val(),student_id:window.pageSpecific.codeUserID,student_assignment_id:window.pageSpecific.studentAssignmentID,section_id:window.pageSpecific.sectionID},success:function(f){if(s.attr("disabled",!1),f.status==="nochange")f.message?window.toastr.info(f.message):window.toastr.info("There was an issue importing the code. Please try again.");else if(f.status!=="ok")f.message?window.toastr.error(f.message):window.toastr.error("There was an issue importing the code. Please try again.");else if(f.message&&window.toastr.success(f.message),f.files){var g=Object.entries(f.files).map(function(m,y){return{name:m[0],text:m[1],main:y==0}});window.myAbacus.setCodeTree(g)}}})}).catch(()=>{s.attr("disabled",!1)})})}}})}),window.pageSpecific.isAdmin&&window.myAbacus.addTab({title:"Admin",side:"right",id:"admin-tab",isMore:!0},function(t){registerAjaxTabRequest("admin tab",{course_id:window.pageSpecific.courseID,module_id:window.pageSpecific.moduleID,item_id:window.pageSpecific.itemID,code_user_id:window.pageSpecific.codeUserID,student_assignment_id:window.pageSpecific.studentAssignmentID}).then(e=>{e.status=="ok"&&(t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}).attr("id","admin-tab"),setupResetButtons(),setupLoadCodeButtons(),PubSub.trigger("ajaxui:setup","#admin-tab"),PubSub.trigger("main:setupIframeModals","#admin-tab"),PubSub.trigger("main:setupTooltips","#admin-tab"),PubSub.trigger("internal:genericNote:setupNotes"),setupFavoriteStar())})}),window.pageSpecific.isAdmin&&window.myAbacus.addTab({title:"Embed",side:"right",id:"embed-tab",isMore:!0},function(t){registerAjaxTabRequest("embedding tab",{item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID,code_user_id:window.pageSpecific.codeUserID}).then(e=>{if(e.status=="ok"){t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}),$("#display-options").selectpicker();var r=$("#dynamic-content").data("sharedprogram");$("#embed-display-options input, #embed-display-options select").on("change",function(){var n="/?";$("#read-only").prop("checked")&&(n.length>2?n+="&read_only=True":n+="read_only=True"),$("#show-file-tree").prop("checked")||(n.length>2?n+="&show_file_tree=False":n+="show_file_tree=False");var i=$("#display-options").find(":selected").val();n.length>2?n+="&display_option="+i:n+="display_option="+i;var a,s;$("#iframe-width").val()?a=$("#iframe-width").val():a="850",$("#iframe-height").val()?s=$("#iframe-height").val():s="500";var o='width="'+a+'" height="'+s+'"',c='<div id="dynamic-content" class="prettyprint" data-sharedprogram="'+r+'">&lt;iframe '+o+' src="https://codehs.com/editor/share_abacus/'+r+n+'" frameborder="0" allowfullscreen class="video-iframe"&gt;&lt;iframe&gt;</div>';$("#dynamic-embed").html(c),$("#dynamic-content").css("overflow","auto")})}})}),window.pageSpecific.isTeacher&&!window.pageSpecific.previewOnly&&window.myAbacus.addTab({title:"Teacher",side:"right",id:"teacher-tab",isMore:!0},function(t){registerAjaxTabRequest("teacher tab",{course_id:window.pageSpecific.courseID,module_id:window.pageSpecific.moduleID,item_id:window.pageSpecific.itemID,code_user_id:window.pageSpecific.codeUserID,student_assignment_id:window.pageSpecific.studentAssignmentID}).then(e=>{e.status=="ok"&&(t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}).attr("id","teacher-tab").addClass("js-teacher-tab"),PubSub.trigger("ajaxui:setup","#teacher-tab"),PubSub.trigger("share:setup","#teacher-tab"),PubSub.trigger("editor:setupResetButtons","#teacher-tab"),PubSub.trigger("main:setupClickToCopy"),$('input[name="next_url"]').val(window.location.href))})});var publishedExpoUrlPromise=new Promise(function(t,e){window.pageSpecific.showPhoneTab&&window.pageSpecific.isAuthenticated?window.myAbacus.addTab({title:"Run on Phone",side:"right",id:"phone-tab",isMore:!0},function(r){registerAjaxTabRequest("phone tab",{item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID,code_user_id:window.pageSpecific.codeUserID,shared_program_id:window.pageSpecific.sharedProgramID}).then(n=>{if(n.status=="ok"){r.innerHTML=n.text;var i=n.published_expo_url;t(i),$(r).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}).attr("id","abacus-phone-tab"),PubSub.trigger("ajaxui:setup","#abacus-phone-tab"),expoSnackSessionPromise&&expoSnackSessionPromise.then(function(a){return Promise.resolve(expoIntegrationUtils.updateCode(getReactCode(),a,expoIntegrationUtils.SNACK_SESSION_QR_DOM).then(function(){return a}))}).then(function(a){$("#expo-update-code-button").on("click",function(s){expoIntegrationUtils.updateCode(getReactCode(),a,expoIntegrationUtils.SNACK_SESSION_QR_DOM)}),$(".expo-option-checkbox").on("change",function(s){expoIntegrationUtils.checkboxChange(s,getReactCode(),expoArgs,a)})}),new PhoneTab}else e()})}):e()});window.pageSpecific.isAuthenticated&&!window.pageSpecific.viewingOthersSharedProgram&&window.pageSpecific.showShareTab&&window.myAbacus.addTab({title:"Share",side:"right",isMore:!0},function(t){registerAjaxTabRequest("share tab",{item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID,code_user_id:window.pageSpecific.codeUserID}).then(e=>{var r={hostname:window.location.hostname,codeTitle:htmlDecode(window.pageSpecific.itemTitle),codeDescription:window.pageSpecific.codeUserFirstNameLastInitial,userProgramID:window.pageSpecific.userProgramID};e.status=="ok"&&(t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}),new ShareTab(window.pageSpecific.shareBaseURL)),expoSnackSessionPromise&&(expoSnackSessionPromise.then(function(n){$("#publish-button").on("click",function(){expoIntegrationUtils.publishCode(getReactCode(),r,n,!1)})}),publishedExpoUrlPromise.then(function(n){n!==null&&expoIntegrationUtils.writeQRCode(n,expoIntegrationUtils.PUBLISH_QR_DOM)}))})}),window.pageSpecific.isAuthenticated&&window.myAbacus.addTab({title:"Upload",side:"right",id:"upload-tab",isMore:!0},function(t){registerAjaxTabRequest("upload tab",{item_id:window.pageSpecific.itemID,module_id:window.pageSpecific.moduleID,course_id:window.pageSpecific.courseID,code_user_id:window.pageSpecific.codeUserID}).then(e=>{e.status=="ok"&&(t.innerHTML=e.text,$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}),window.pageSpecific.allowCopyPasteCodeHSOnly&&t.addEventListener("copy",function(){window.localStorage.setItem("codehsCopy",window.getSelection().toString())}),new UploadTab)})}),window.pageSpecific.isAuthenticated&&!window.pageSpecific.hideCode&&window.myAbacus.addTab({title:"Print",side:"right",id:"print-tab",isMore:!0},function(t){t.innerHTML='<h3 class="spacing-top">Print Your Code</h3><button id="abacus-print-button">Print</button><br><button id="abacus-print-button-noname">Print without name</button>',$("#abacus-print-button").css({"margin-left":"5px","min-width":"60px",margin:"10%"}).addClass("btn-main-blue"),$("#abacus-print-button").parent().css("text-align","center"),$("#abacus-print-button").on("click",function(){var e="";window.pageSpecific.assignmentID?(e="/editor/print_assignment_code/"+window.pageSpecific.assignmentID+"/"+window.pageSpecific.codeUserID,window.pageSpecific.sectionID&&(e+="?section_id="+window.pageSpecific.sectionID)):e="/editor/print/"+window.pageSpecific.itemID+"/"+window.pageSpecific.codeUserID+"/"+window.pageSpecific.moduleID+"/"+window.pageSpecific.courseID;var r=window.open(e,"_blank");r?r.focus():alert("Please allow popups for this website")}),$("#abacus-print-button-noname").css({"margin-left":"5px","min-width":"60px",margin:"10%"}).addClass("btn-main-blue"),$("#abacus-print-button-noname").parent().css("text-align","center"),$("#abacus-print-button-noname").on("click",function(){var e="";window.pageSpecific.assignmentID?(e="/editor/print_assignment_code/"+window.pageSpecific.assignmentID+"/"+window.pageSpecific.codeUserID+"?noname",window.pageSpecific.sectionID&&(e+="&section_id="+window.pageSpecific.sectionID)):e="/editor/print/"+window.pageSpecific.itemID+"/"+window.pageSpecific.codeUserID+"/"+window.pageSpecific.moduleID+"/"+window.pageSpecific.courseID+"?noname";var r=window.open(e,"_blank");r?r.focus():alert("Please allow popups for this website")})}),fetchAjaxTabRequests();var shareView=window.Handlebars.compile(SHARE_MODAL_TEMPLATE);function shareAlert(t){var e=t.shareId,r=t.shareIdentifier,n=t.shareURL;n.endsWith("/run")&&(n=n.slice(0,-4));var i=t.itemTitle,a=window.pageSpecific.itemID;shareImageURL=t.shareImageURL;var s=window.pageSpecific.itemImageUrl;window.pageSpecific.beatsUnlockedContestID&&PubSub.trigger("eventtracking:track_event",{name:"Clicked Share Beats Unlocked",data:{sectionID:window.pageSpecific.sectionID}});var o=".js-share-modal-copy",c="#share-program",l="#share-modal-show-code-switch",f="#share-tab-show-code-switch",g="#share-modal-active-switch",m="#share-tab-active-switch",y="#share-modal-forkable-switch",x="#share-tab-forkable-switch",I="#share-modal-ide-dropdown",A="#share-modal #share-modal-share-link",F="#share-modal-edit-description",X="#share-modal-display-mode-dropdown",de="#share-options",N="#embed-options",H="#assign-options",z="#embed-opt-display-type",Y="#embed-opt-width",G="#embed-opt-height",ie="#embed-opt-read-only",fe="#embed-opt-show-tree",Ne="#share-modal-image";function ye(){$(z).on("change",He),$(Y).on("input",function(Ze){Ze.target.value=Ze.target.value.replace(/\D/g,""),He()}),$(G).on("input",function(Ze){Ze.target.value=Ze.target.value.replace(/\D/g,""),He()}),$(ie).on("change",He),$(fe).on("change",He)}function He(){var Ze=$(z).val(),ce="850",tt="500";$(Y).val()&&(ce=$(Y).val()),$(G).val()&&(tt=$(G).val());var ft=$(ie).prop("checked"),pt=$(fe).prop("checked"),Ye='width="'+ce+'" height="'+tt+'"',xt="/?display_mode="+Ze;ft&&(xt+="&read_only=True"),pt||(xt+="&show_file_tree=False");var Ut="<iframe "+Ye+' src="'+n+"/embed"+xt+'" frameborder="0" allowfullscreen class="video-iframe"></iframe>';$(A).val(Ut)}function Re(Ze){Ze===g?$(g).is(":checked")?($("#share-modal-public-link").removeClass("hidden"),$("#share-public-copy").removeClass("hidden"),$("#share-modal-public-link").val(n+"/run"),$("#share-modal-public-link").attr("href",n+"/run")):($("#share-modal-public-link").addClass("hidden"),$("#share-public-copy").addClass("hidden")):Ze===l&&($(l).is(":checked")?($("#share-modal-copy-link").removeClass("hidden"),$("#share-code-copy").removeClass("hidden"),$("#share-modal-copy-link").val(n),$("#share-modal-copy-link").attr("href",n)):($("#share-modal-copy-link").addClass("hidden"),$("#share-code-copy").addClass("hidden")))}alertModal({header:"Share Your Program",button:"Close",useShareTemplate:!0,rawHtml:shareView({shareId:e,shareIdentifier:r,shareURL:n,shareImageURL,itemTitle:i,isLoggedOut:!window.pageSpecific.isAuthenticated,showCode:t.showCode,isActive:t.isActive,forkable:t.isForkable,showForkOption:t.showForkOption,itemID:a,itemImageUrl:s,isOriginal:window.pageSpecific.IDE==0,isAbacus:window.pageSpecific.IDE==1,isInherit:window.pageSpecific.IDE==2,displayModeDisplayOnly:window.pageSpecific.displayMode==="displayOnly",displayModeDefault:window.pageSpecific.displayMode==="default",displayModeEditorOnly:window.pageSpecific.displayMode==="editorOnly",showIdentifierURL:window.pageSpecific.showIdentifierURL,showIDEDropdown:window.pageSpecific.isAdmin&&!window.pageSpecific.onlyAbacus,itemDescription:window.pageSpecific.itemDescription,activeTeacherCourses:window.pageSpecific.activeTeacherCourses,canBeAssigned:window.pageSpecific.canBeAssigned,showSocialMedia:window.pageSpecific.showContestModal,showCollaborateTab:t.showCollaborateTab,showEditWarning:window.pageSpecific.viewingNoneUsersSharedProgramAsNoneUser,C}),on_load_callback:function(){ce(),window.pageSpecific.isAuthenticated||($(".share-tab-checkbox").prop("disabled",!0),$("#share-modal-share-link").prop("disabled",!1)),window.myAbacus.collaborationEnabled()?($("#collab-enabled-section").removeClass("hidden"),$("#collab-disabled-section").addClass("hidden"),$("#share-modal-collab-link").val(window.location.href)):($("#collab-enabled-section").addClass("hidden"),$("#collab-disabled-section").removeClass("hidden")),$("#share-type-switch").on("click",function(Ye){var xt=Ye.target,Ut=xt.value;if(Ut){xt.classList.add("active"),$(xt).siblings().each(function(tr,Ke){Ke.classList.remove("active")});var Pt=$(A);$("#share-modal-contents").removeClass("hidden"),$("#collab-container").addClass("hidden"),$("#advanced-settings-container").removeClass("hidden"),$("#logged-out-edit-warning").removeClass("hidden"),$("#logged-out-banner-message").text("change the share settings for this program."),Pt.addClass("hidden"),$(".share-modal-btn").removeClass("hidden"),$(".js-share-modal-copy").addClass("hidden"),$(de).hasClass("hidden")&&($(de).removeClass("hidden"),$(N).addClass("hidden"),$(H).addClass("hidden")),Ut==="Code"?(Pt.addClass("hidden"),$(".share-modal-btn").addClass("hidden"),Re(l),Re(g),$(H).addClass("hidden")):(Pt.removeClass("hidden"),$(".js-share-modal-copy").removeClass("hidden"),Ut==="Embed"?($(N).removeClass("hidden"),$(de).addClass("hidden"),$(H).addClass("hidden"),He()):Ut==="Collaborate"?(Pt.addClass("hidden"),$(".js-share-modal-copy").addClass("hidden"),$(N).addClass("hidden"),$(de).addClass("hidden"),$(H).addClass("hidden"),$("#collab-container").removeClass("hidden"),$("#advanced-settings-container").addClass("hidden")):($(H).removeClass("hidden"),$("#share-modal-contents").addClass("hidden")))}}),$("#enable-collab-button").on("click",function(){$(g).prop("checked",!0),$(l).prop("checked",!0),Ajax.send({method:"set_share_active",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,activeStatus:!0}}),Ajax.send({method:"set_share_code",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,showCodeStatus:!0}}),$("#collab-enabled-section").removeClass("hidden"),$("#collab-disabled-section").addClass("hidden"),window.myAbacus.enableCollaboration(window.pageSpecific.collaborateIdentifier||""),window.myAbacus.selectCollabTab()}),$(".js-share-modal-collab-copy").on("click",function(){navigator.clipboard.writeText(window.location.href),window.toastr.success("Copied the collaboration link")}),$(F).on("keyup",function(){var Ye=$(F).val();$("#preview-description-text").empty().attr("data-markdown",Ye),PubSub.trigger("CHS.Utils.markdown:setup")}),$(F).on("blur",Ze);function Ze(){var Ye=$(F).val();Ajax.send({method:"save_item",app:"library",data:{itemId:window.pageSpecific.itemID,description:Ye},success:function(xt){if(xt.status=="ok"){var Ut=$(".description-label").find(".chs-icon");Ut.removeClass("hidden"),setTimeout(function(){Ut.addClass("hidden")},1e3)}else window.toastr.error(xt.msg)}})}function ce(){$(".item-type-select").selectpicker(),$(".course-select").selectpicker();var Ye=$(".course-select option:selected");tt(Ye),$(".course-select").on("change",function(){Ye=$(".course-select option:selected"),tt(Ye)}),$("#share-modal-assign-btn").on("click",function(){ft($(".course-select option:selected").val())})}function tt(Ye){if(Ye.hasClass("assigned")){PubSub.trigger("utils:disableButton",$("#share-modal-assign-btn")),$("#share-modal-assign-btn").html("Assigned");var xt=Ye.val(),Ut=Ye.data("assignment-id");pt(xt,Ut)}else PubSub.trigger("utils:enableButton",$("#share-modal-assign-btn")),$("#links-section").addClass("hidden"),$("#share-modal-assign-btn").html("Assign")}function ft(Ye){PubSub.trigger("utils:disableButton",$("#share-modal-assign-btn"));var xt={};xt.assignmentType="activity",xt.itemId=window.pageSpecific.itemID,xt.itemType=$(".item-type-select option:selected").data("type"),xt.teacherCourseId=Ye,xt.addToLatestLesson=!0,Ajax.send({method:"add_new_assignment",app:"lms",data:xt,success:function(Ut){Ut.status=="ok"?($("#share-modal-assign-btn").html('<span class="chs-icon chs-icon-check"><span>'),$(".course-select option:selected").addClass("assigned"),$(".course-select option:selected").data("assignment-id",Ut.assignment.id),pt(Ye,Ut.assignment.id)):window.toastr.error(Ut.msg)}})}function pt(Ye,xt){var Ut="/lms/assignments/"+Ye+"?activity="+xt;$(".view-link").attr("href",Ut),$("#links-section").removeClass("hidden")}$(c).on("change",f,function(){showCode=$(this).is(":checked"),$(l).prop("checked",$(this).is(":checked"))}),$(c).on("change",m,function(){isActive=$(this).is(":checked"),$(g).prop("checked",$(this).is(":checked"))}),$(c).on("change",x,function(){isForkable=$(this).is(":checked"),$(y).prop("checked",$(this).is(":checked"))}),$(l).on("change",function(){showCode=$(this).is(":checked"),Ajax.send({method:"set_share_code",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,showCodeStatus:showCode}}),$(f).prop("checked",showCode),Re(l)}),$(g).on("change",function(){isActive=$(this).is(":checked"),Ajax.send({method:"set_share_active",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,activeStatus:isActive}}),$(m).prop("checked",isActive),Re(g)}),$(y).on("change",function(){isForkable=$(this).is(":checked"),Ajax.send({method:"set_share_forkable",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,forkableStatus:isForkable}}),$(x).prop("checked",isForkable)}),$(I).on("change",function(){var Ye=$(this).val();Ajax.send({method:"set_share_ide",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,sharedProgramID:window.pageSpecific.sharedProgramID,IDE:Ye}})}),$(X).on("change",function(){var Ye=$(this).val();Ajax.send({method:"set_share_abacus_display_mode",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID,itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,displayMode:Ye}})}),$(o).on("click",function(){$(this).siblings("input").trigger("select"),document.execCommand("copy"),window.toastr.success("Copied the share link")}),Re(l),Re(g),$(Ne).on("load",function(){var Ye=$(this).attr("src");shareImageURL=Ye}),ye(),PubSub.trigger("ajaxui:setup","#share-alert-modal")}})}var contestView=window.Handlebars.compile(CONTEST_MODAL_TEMPLATE);function contestAlert(t){var e=t.shareIdentifier,r="#submit-to-contest-btn",n="#contest-id-input",i="#contest-user-name-input",a="#contest-user-email-input",s="#contest-contact-me-input",o="#contest-just-submitted",c="#contest-already-submitted",l=".contest-not-submitted",f="#contest-past-submissions",g=".contest-past-submissions-container";function m(){var y=$(n).val(),x=$(i).val();x===""&&(x=window.pageSpecific.codeUserFirstNameLastInitial);var I="";if($(s).is(":checked"))if(I=$(a).val(),validEmail(I))$(a).removeClass("error");else{$(a).addClass("error"),window.toastr.error("Please enter a valid email address.");return}PubSub.trigger("utils:disableButton",r),Ajax.send({method:"submit",app:"contest",data:{shared_program_identifier:e,contest_identifier:y,user_name:x,user_email:I}}).then(function(A){PubSub.trigger("utils:enableButton",r),A.status=="ok"?A.new_submission?($(o).hasClass("hidden")&&$(o).removeClass("hidden"),$(c).hasClass("hidden")||$(c).addClass("hidden"),$(l).hasClass("hidden")||$(l).addClass("hidden"),$(g).hasClass("hidden")||$(g).addClass("hidden"),$(o+" .contest-url-link").attr("href",A.contest_url),$(o+" .contest-url-link").text(A.contest_name),submittedToContest[A.contest_identifier]=A.contest_name,$(f).append('<li><a href="/contest/'+A.contest_identifier+'">'+A.contest_name+"</a></li>")):($(o).hasClass("hidden")||$(o).addClass("hidden"),$(c).hasClass("hidden")&&$(c).removeClass("hidden"),$(l).hasClass("hidden")||$(l).addClass("hidden"),$(g).hasClass("hidden")||$(g).addClass("hidden"),$(c+" .contest-url-link").attr("href",A.contest_url),$(c+" .contest-url-link").text(A.contest_name)):(window.toastr.error(A.msg),A.error=="contest_id"?$(n).addClass("error"):$(n).removeClass("error"),$(o).hasClass("hidden")||$(o).addClass("hidden"),$(c).hasClass("hidden")||$(c).addClass("hidden"),$(l).hasClass("hidden")&&$(l).removeClass("hidden"),!$.isEmptyObject(submittedToContest)&&$(g).hasClass("hidden")&&$(g).removeClass("hidden"))},function(){PubSub.trigger("utils:enableButton",r),window.toastr.error("There was an error submitting to the contest. Please try again.")})}alertModal({header:"Submit to a Contest!",button:"Close",rawHtml:contestView({shareIdentifier:e,submittedTo:submittedToContest}),on_load_callback:function(){$(r).on("click",m),$.isEmptyObject(submittedToContest)||($(g).removeClass("hidden"),Object.keys(submittedToContest).forEach(function(y){$(f).append('<li><a href="/contest/'+y+'">'+submittedToContest[y]+"</a></li>")}))}})}var buContestView=window.Handlebars.compile(BU_CONTEST_MODAL_TEMPLATE);function buContestAlert(t){var e=t.shareIdentifier,r="#submit-to-fb-contest-btn",n="#submit-to-section-contest-btn",i="#fb-contest-just-submitted",a="#fb-contest-already-submitted",s="#fb-contest-not-submitted",o="#section-contest-just-submitted",c="#section-contest-already-submitted",l="#section-contest-not-submitted";function f(g){var m,y,x,I;g?(m=t.contestId,y=o,x=c,I=l):(m=C.Contest.BEATS_UNLOCKED_CONTEST,y=i,x=a,I=s);var A=window.userData.username,F=window.userData.email;return function(){PubSub.trigger("utils:disableButton",r),PubSub.trigger("utils:disableButton",n),Ajax.send({method:"submit",app:"contest",data:{shared_program_identifier:e,contest_id:m,user_name:A,user_email:F,student_assignment_id:window.myAbacus.shim.studentAssignmentID}}).then(function(X){PubSub.trigger("utils:enableButton",r),PubSub.trigger("utils:enableButton",n),$(y+" .contest-name").text(X.contest_name),$(x+" .contest-name").text(X.contest_name),$(I+" .contest-name").text(X.contest_name),X.status=="ok"?X.new_submission?($(y).removeClass("hidden"),$(x).addClass("hidden"),$(I).addClass("hidden"),submittedToContest[X.contest_identifier]=X.contest_name):($(y).addClass("hidden"),$(x).removeClass("hidden"),$(I).addClass("hidden")):(window.toastr.error(X.msg),$(y).addClass("hidden"),$(x).addClass("hidden"),$(I).removeClass("hidden"))},function(){PubSub.trigger("utils:enableButton",r),PubSub.trigger("utils:enableButton",n),window.toastr.error("There was an error submitting to the contest. Please try again.")})}}alertModal({header:"Submit your beat!",button:"Close",rawHtml:buContestView({shareIdentifier:e,submittedTo:submittedToContest}),on_load_callback:function(){$(r).on("click",f(!1)),$(n).on("click",f(!0))}})}var shareId=null,shareIdentifier=null,shareURL=null,isActive=null,showCode=null,isForkable=null,showForkOption=null,sharedCode=null,shareImageURL=null;if(!window.pageSpecific.hocLoggedOutPlaylistEditor&&(viewerIsPageUser||window.pageSpecific.codeUserID==C.User.NONE_USER_ID)&&(isFacebookExperienceCourse||window.pageSpecific.isBlockly||window.pageSpecific.showShareModal)&&window.myAbacus.addTopBarButton("Share",function(t){function e(i){Ajax.send({method:"get_or_create_share_info",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,codeTree:JSON.stringify(i),shareIdentifier}}).then(function(a){if(PubSub.trigger("utils:enableButton",r),shareId=a.shareId,shareIdentifier=a.shareIdentifier,shareImageURL=a.shareImageURL,shareURL=a.shareURL,isActive=a.isActive,showForkOption=a.showForkOption,isForkable=a.forkable,sharedCode=i,shareAlert({shareId,shareIdentifier,shareURL,shareImageURL,itemTitle:htmlDecode(window.pageSpecific.itemTitle),showCode:window.pageSpecific.showCode,showForkOption,isActive,isForkable,showCollaborateTab:window.pageSpecific.showCollaborateTab}),!a.shareImageURL&&window.pageSpecific.shouldScreenshotOnShare){var s=$(".__abacus_runButton");s&&s.trigger("click"),setTimeout(function(){try{var o=document.querySelector("iframe#browser-runner").contentWindow;o.postMessage({type:"screenshot_data",data:{}},"*")}catch{return}},SHARE_SCREENSHOT_WAIT_TIME)}},function(){PubSub.trigger("utils:enableButton",r),shareIdentifier=null,alertModal({header:"An error occurred",button:"Try again",message:"There was an error sharing your program. Please try again."})})}var r=t.target,n;shareIdentifier!==null&&shareURL!==null?window.pageSpecific.codeUserID==C.User.NONE_USER_ID?(n=getCodeForAdminTab(),sharedCode!=n?(PubSub.trigger("utils:disableButton",r),e(n)):shareAlert({shareId,shareIdentifier,shareURL,shareImageURL,itemTitle:htmlDecode(window.pageSpecific.itemTitle),showCode,showForkOption,isActive,isForkable,showCollaborateTab:window.pageSpecific.showCollaborateTab})):shareAlert({shareId,shareIdentifier,shareURL,shareImageURL,itemTitle:htmlDecode(window.pageSpecific.itemTitle),showCode,showForkOption,isActive,isForkable,showCollaborateTab:window.pageSpecific.showCollaborateTab}):(PubSub.trigger("utils:disableButton",r),window.pageSpecific.codeUserID==C.User.NONE_USER_ID&&(shareIdentifier=window.pageSpecific.shareIdentifier),n=getCodeForAdminTab(),e(n))}),(viewerIsPageUser||window.pageSpecific.codeUserID==C.User.NONE_USER_ID)&&(isFacebookExperienceCourse||window.pageSpecific.showContestModal)){var buttonText=isFacebookExperienceCourse?"Submit Your Beat!":"Submit to Contest";window.myAbacus.addTopBarButton(buttonText,function(t){function e(i){Ajax.send({method:"get_or_create_share_info",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,codeTree:JSON.stringify(i),shareIdentifier,getContestInfo:window.pageSpecific.showContestModal}}).then(function(a){PubSub.trigger("utils:enableButton",r),shareIdentifier=a.shareIdentifier,submittedToContest=a.submittedTo,window.pageSpecific.beatsUnlockedContestID?buContestAlert({shareIdentifier,contestId:window.pageSpecific.beatsUnlockedContestID}):contestAlert({shareIdentifier})})}var r=t.target,n=getCodeForAdminTab();PubSub.trigger("utils:disableButton",r),e(n)})}!window.pageSpecific.previewOnly&&(window.pageSpecific.codeUserID===window.pageSpecific.viewerID&&window.pageSpecific.isGradable||window.pageSpecific.showSubmitButton)?window.myAbacus.addTopBarButton("Submit + Continue",function(t){PubSub.on("autograder:testingComplete",function(){e.disabled=!1,e.innerHTML="Submit + Continue",PubSub.trigger("utils:enableButton",RUN_BUTTON),PubSub.trigger("utils:enableButton",GRADE_CODE_BUTTON),PubSub.trigger("utils:enableButton",SUBMIT_BUTTON),PubSub.trigger("utils:enableButton",GRADING_TAB_CHECK_BUTTON)});var e=t.target;e.disabled=!0,e.innerHTML="Grading...";var r=$(".error-box"),n=$(".error-container");r.exists()&&n.exists()&&(r.hide(),n.html("")),PubSub.trigger("utils:disableButton",SUBMIT_BUTTON),window.HOC_LOGGED_OUT_PLAYLIST_EDITOR?C.ItemTypeConfig.CONFIGS[window.myAbacus.itemType].autograder?PubSub.trigger("autograder:run",window.myAbacus.getCode(),window.myAbacus.info,self,{displayPopup:!0}):goToNext():window.Ed.save(function(){if(C.ItemTypeConfig.CONFIGS[window.myAbacus.shim.itemType].autograder&&!window.pageSpecific.isSandbox)PubSub.trigger("autograder:run",window.myAbacus.shim.getCode(),window.myAbacus.shim.info,window.myAbacus.shim,{displayPopup:!0});else{var i={};if(window.myAbacus.shim.studentAssignmentID?i={student_assignment_id:window.myAbacus.shim.studentAssignmentID}:i={item_id:window.myAbacus.shim.itemID,module_id:window.myAbacus.shim.moduleID,course_id:window.myAbacus.shim.courseID,correct:!0},window.myAbacus.shim.typeTester.isGradeAndRespond()){var a=window.myAbacus.shim.gradeAndRespond.validateData();if(_.isEmpty(a))return;i.response=a.response,i.grade=a.grade}submit(i,goToNext)}},"submit")}):(window.pageSpecific.codeUserID!==window.pageSpecific.viewerID&&!window.pageSpecific.isSandbox||window.pageSpecific.showContinueButton)&&!window.pageSpecific.previewOnly&&window.myAbacus.addTopBarButton("Next",function(t){if(window.pageSpecific.codeUserID!==window.pageSpecific.viewerID)goToNext();else{var e={};window.myAbacus.shim.studentAssignmentID?e={student_assignment_id:window.myAbacus.shim.studentAssignmentID}:e={item_id:window.myAbacus.shim.itemID,module_id:window.myAbacus.shim.moduleID,course_id:window.myAbacus.shim.courseID,correct:!0},saveCode(window.myAbacus.getCodeTree(),!0,"submit").then(function(){submit(e,goToNext)})}}),$(document).on("click",SUBMIT_CORRECT_BUTTON,function(){var t={};window.myAbacus.shim.studentAssignmentID?t={student_assignment_id:window.myAbacus.shim.studentAssignmentID}:t={item_id:window.myAbacus.shim.itemID,module_id:window.myAbacus.shim.moduleID,course_id:window.myAbacus.shim.courseID,correct:!0},submit(t,goToNext)}),window.pageSpecific.showForkButton&&window.myAbacus.addTopBarButton("Fork",function(t){alertModal({header:"Fork to Your Sandbox",button:"Done",rawHtml:window.Handlebars.compile(FORK_MODAL_TEMPLATE)({STATIC_URL:window.CHS.STATIC_URL,shareIdentifier:window.pageSpecific.shareIdentifier,itemTitle:htmlDecode(window.pageSpecific.baseItemTitle),itemOwnerUsername:window.pageSpecific.sharedProgramOwnerUsername,sharedProgramOwnerAttribution:window.pageSpecific.sharedProgramOwnerAttribution,progTypeString:window.pageSpecific.progTypeString}),on_load_callback:function(){$("#abacus-fork-submit").on("click.fork-submit-handler",function(e){var r=$(this);r.attr("disabled",!0),r.html("<i class='icon-spinner icon-spin'></i>"),Ajax.send({method:"fork_shared_program",app:"editor",data:{shared_program_id:window.pageSpecific.sharedProgramID,forking_user_id:window.pageSpecific.viewerID,shared_program_owner_id:window.pageSpecific.codeUserID,shared_program_item_id:window.pageSpecific.itemID,forked_title:$(".sandbox-program-title").text().trim()},success:function(n){if(n.status==="ok"){var i=n.forked_url;r.replaceWith('<a class="btn btn-main-green" href="'+i+'">View Your Program!</a>'),r.off("click.fork-submit-handler")}else n.message?window.toastr.error(n.message):window.toastr.error("There was an issue forking the program. Send an email to support@codehs.com with the URL."),r.html("Fork!");r.attr("disabled",!1)}})})}})}),window.pageSpecific.showTeacherSaveButton&&!window.pageSpecific.previewOnly&&window.myAbacus.addTopBarButton("Save",function(t){var e=t.target;e.disabled=!0,e.innerHTML="<i class='icon-spinner icon-spin'></i>";var r=flattenAbacusFiles(window.myAbacus.getCodeTree()),n=r.reduce(function(a,s){if(s.shouldSave&&!s.hidden){var o=s.name,c=_.trimRight(s.text);a[o]=c}return a},{}),i=JSON.stringify(n);i.split("\\n",CODE_LINE_LIMIT).length>=CODE_LINE_LIMIT?window.toastr.error("Your file is too large to save. Please shorten and try again.","Code Error"):Ajax.send({method:"save_teacher_revision",app:"editor",data:{file_json:i,item_id:window.pageSpecific.itemID,student_id:window.pageSpecific.codeUserID,student_assignment_id:window.pageSpecific.studentAssignmentID},success:function(s){e.innerHTML="Save",e.disabled=!1,s.status!=="ok"?s.message?window.toastr.error(s.message):window.toastr.error("There was an issue saving the program. Send an email to support@codehs.com with the URL."):s.should_show_banner?$("#teacher-revision-banner").show():$("#teacher-revision-banner").hide()}})}),window.pageSpecific.showTextToCodeButton&&window.myAbacus.addTopBarButton("Text->Code",function(t){var e=t.target;e.disabled=!0,e.innerHTML="<i class='icon-spinner icon-spin'></i>";var r=flattenAbacusFiles(window.myAbacus.getCodeTree()),n=r.reduce(function(a,s){if(s.shouldSave&&!s.hidden){var o=s.name,c=_.trimRight(s.text);a[o]=c}return a},{}),i=JSON.stringify(n);i.split("\\n",CODE_LINE_LIMIT).length>=CODE_LINE_LIMIT?window.toastr.error("Your file is too large for AI. Please shorten and try again.","Code Error"):Ajax.send({method:"get_ai_text_to_code",app:"editor",data:{file_json:i,item_id:window.pageSpecific.itemID,student_id:window.pageSpecific.codeUserID,student_assignment_id:window.pageSpecific.studentAssignmentID},success:function(s){if(e.innerHTML="Text->Code",e.disabled=!1,s.status!=="ok")s.message?window.toastr.error(s.message):window.toastr.error("There was an issue making the AI program. Send an email to support@codehs.com with the URL.");else if(s.message&&window.toastr.success(s.message),s.files){var o=Object.entries(s.files).map(function(c,l){return{name:c[0],text:c[1],main:l==0}});window.myAbacus.setCodeTree(o)}}})}),setupTimeTracking()}function builtinRead(t){if(Sk.builtinFiles===void 0||Sk.builtinFiles.files[t]===void 0)throw new Error("File not found: '"+t+"'");return Sk.builtinFiles.files[t]}function turtleQuickDraw(t){t=_.defaults(t,{width:400,height:400,oldTarget:"python-canvas",animate:!0,canvasCoordinates:[]});var e=window.Sk.TurtleGraphics.width||400,r=window.Sk.TurtleGraphics.height||400;window.Sk.TurtleGraphics.target=t.target,window.Sk.TurtleGraphics.width=t.width,window.Sk.TurtleGraphics.height=t.height,window.Sk.TurtleGraphics.animate=t.animate;var n=template(turtleTemplate,{coords:t.canvasCoordinates.join(", ")});let i=template(turtleInputOerrideTemplate);var a=n+i+t.code,s=window.Sk.misceval.asyncToPromise(function(){return window.Sk.importMainWithBody("<stdin>",!1,a,!0)});s.then(function(){window.Sk.TurtleGraphics.target=t.oldTarget,window.Sk.TurtleGraphics.width=e,window.Sk.TurtleGraphics.height=r,window.Sk.TurtleGraphics.animate=!0})}function uploadAsset(t){return new Promise(function(e,r){$.ajax({url:"/core/ajax/upload_asset",type:"POST",data:t,processData:!1,dataType:"JSON",contentType:!1}).then(function(n){if(n.status==="error")r();else{var i=BASE_URL+n.url,a=n.url,s=t.get("file").name,o=new Date(JSON.parse(n.uploadDate));e({mimeType:t.get("file").type,url:i,name:s,hashName:a,uploadDate:o})}})})}function onProjectConfigurationChange(t){return new Promise((e,r)=>{Ajax.send({method:"abacus_project_configuration_change",app:"editor",data:{itemID:window.pageSpecific.itemID,name:t},success:function(n){n.status==="ok"?e():r()},error:function(){r()}})})}function saveAssets(t){return new Promise(function(e,r){var n={itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID};Ajax.send({method:"asset_imports_save",app:"editor",data:{info:n,assetImports:JSON.stringify(t)},success:function(i){i.status==="ok"?e():r()},error:function(){r()}})})}var UPDATE_TIME_INTERVAL=5e3,INACTIVE_THRESHOLD=3e4,timeTrackSeconds=0,timeTrackIntervalId=null;function setupTimeTracking(){timeTrackSeconds=0,$.idleTimer(INACTIVE_THRESHOLD),timeTrackIntervalId=setInterval(function(){$.idleTimer("isIdle")||(timeTrackSeconds+=UPDATE_TIME_INTERVAL/1e3)},UPDATE_TIME_INTERVAL)}function saveCode(t,e,r){let n=flattenAbacusFiles(window.myAbacus.getCodeTree()).filter(i=>i.name===".settings.json")?.[0];return t=flattenAbacusFiles(t),window.pageSpecific.codeUserID!==window.pageSpecific.viewerID&&!window.pageSpecific.viewingNoneUsersSharedProgramAsNoneUser&&!window.pageSpecific.collaborationEnabled?(e&&goToNext(),Promise.resolve()):_.isEqual(mostRecentSavedCode,t)?(e&&goToNext(),new Promise(function(i,a){setTimeout(i,500)})):new Promise(function(i,a){var s={itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,isAbacus:!0,isSandbox:window.pageSpecific.isSandbox},o=t.reduce(function(g,m){if(m.shouldSave){var y=m.name,x=_.trimRight(m.text);g[y]=x}return g},{}),c=JSON.stringify(o);if(c.split("\\n",CODE_LINE_LIMIT).length>=CODE_LINE_LIMIT)window.toastr.error("Your file is too large to save. Please shorten and try again.","Code Error"),i();else{var l=window.myAbacus.getCollaboratorIDs().filter(function(m){return m!==window.pageSpecific.codeUserID}).join(",");try{getSolutionCode,s.isTemp=!0}catch{s.isTemp=!1}var f=timeTrackSeconds;timeTrackSeconds=0;let g=window.pageSpecific.codeUserID!==window.pageSpecific.viewerID?window.pageSpecific.viewerID:null;Ajax.send({method:"save_editor",app:"editor",data:{info:s,fileJson:JSON.stringify(o),settingsJSONFile:n?.text,seconds:f||0,collaboratorIds:l,studentAssignmentID:window.pageSpecific.studentAssignmentID,reason:r,collaboratorSave:g},success:function(m){m.status=="ok"?(mostRecentSavedCode=t,i(),e&&goToNext()):(a(),m.msg&&window.toastr.error(m.msg))}})}})}function setupAutosave(){if(window.pageSpecific.viewerID===window.pageSpecific.codeUserID){var t=setInterval(function(){saveCode(window.myAbacus.getCodeTree(),!1,"autosave").then(function(){window.myAbacus.forceSnapshot()},!1)},6e4);TIMERS.push(t)}}function setupTrackingHeartbeat(){var t=6e5,e=setInterval(function(){fetch("/usertracking/heartbeat")},t);TIMERS.push(e)}function setupTrackingKeystrokes(){let t=[],e={file:null,authorID:null};function r(i,a,s){e.authorID=a,e.file&&e.file!==s&&n(),e.file=s,t.push(i)}window.pageSpecific.storeKeystroke=r;function n(){if(t.length){let i=t.splice(0,t.length);Ajax.send({method:"save_keystroke",app:"editor",data:{keystrokes:JSON.stringify(i),studentAssignmentID:window.pageSpecific.studentAssignmentID,studentID:window.pageSpecific.studentID,...e}})}}$(window).one("beforeunload",function(i){n()}),$(document).one("turbolinks:before-visit",function(i){n()}),setInterval(function(){n()},1e4)}function fileRename(t){var e=t.newFilename,r=t.main;return new Promise(function(n,i){r?Ajax.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:e},success:function(a){a.status=="ok"?n():i()}}):n()})}function onComment(t){return new Promise(function(e,r){Ajax.send({method:"add_editor_comment",app:"library",type:"POST",data:{studentAssignmentId:window.pageSpecific.studentAssignmentID,filePath:t.filePath,lineNumber:t.lineNumber,content:t.content},success:function(n){n.status=="ok"?e():r()}})})}function goToNext(){window.location.href=window.pageSpecific.nextURL}function showProModal(){alertModal({message:"The ability to reset a problem for a student, as well as many other teacher tools and resources is only available on CodeHS Pro. To upgrade, get in touch.",rawHtml:'<a href="/learnmore" class="btn btn-main-green">Learn More About Pro</a>'})}function resetItem(t,e){if(t.hasClass("not-pro")&&!window.pageSpecific.isAdmin)showProModal();else{var r="Are you sure? Clicking Ok will reset this student's ";e==="reset_item"?r+="progress on this activity. ":r+="activity back to the starter code. ",r+="The code won't actually be deleted and you can see it in the snapshots",alertModal({message:r,rawHtml:"<b>User To Be Affected: "+t.data("name")+"</b>",cancelButton:!0,ok_callback:function(){Ajax.send({method:e,app:"editor",data:{codeUserId:window.pageSpecific.codeUserID,itemId:window.pageSpecific.itemID,studentAssignmentId:window.pageSpecific.studentAssignmentID},success:function(n){location.reload(!0)}})}})}}function setupFavoriteStar(){$(FAVORITE_PROGRAM_STAR).exists()&&$(FAVORITE_PROGRAM_STAR).on("click",function(){var t=$(this),e=$(this).attr("data-userprogram");Ajax.send({method:"toggle_favorite",app:"editor",data:{program:e},success:function(r){r.fav?t.addClass("selected"):t.removeClass("selected")}})})}function getCodeForAdminTab(){var t=flattenAbacusFiles(window.myAbacus.getCodeTree()),e=t.reduce(function(r,n){var i=n.name,a=n.text;return r[i]=a,r},{});return e}function setupLoadCodeButtons(){function t(){var r=htmlDecode(window.pageSpecific.solutionCode);window.myAbacus.updateCodeTree(r)}function e(){var r=htmlDecode(window.pageSpecific.starterCode);window.myAbacus.updateCodeTree(r)}$(".js-load-solution-code-to-editor").off("click.loadSolutionCode"),$(".js-load-starter-code-to-editor").off("click.loadStarterCode"),$(".js-load-solution-code-to-editor").on("click.loadSolutionCode",t),$(".js-load-starter-code-to-editor").on("click.loadStarterCode",e)}function setupResetButtons(){$(".js-admin-create-item").on("click",function(){var r=getCodeForAdminTab(),n=encodeURIComponent(Object.values(r)[0]),i="?code="+n;window.location.href=$(this).data("href")+i});var t=$(".js-reset-to-starter").first();t.on("click",function(){resetItem(t,"reset_to_starter_code")});var e=$(".js-set-starter").first();e.on("click",function(){alertModal({message:"Are you sure? Clicking Ok will overwrite the starter for all users.",cancelButton:!0,ok_callback:function(){var r=getCodeForAdminTab();Ajax.send({method:"set_starter_code",app:"editor",data:{code:JSON.stringify(r),itemId:window.pageSpecific.itemID},success:function(n){n.status==="ok"?window.toastr.success("Starter code was successfully set","Starter Code Set"):window.toastr.error("Something went wrong.","Error occurred")}})}})}),$("[data-ui=select]").selectpicker(),$(".add-tag-form").on("submit",function(r){r.preventDefault();var n=$(this),i=$("#tags-input"),a=i.val(),s=n.data("item");addRemoveTag(s,a,"add")}),$(".tag-list").on("click",".chs-icon-cancel",function(r){r.preventDefault();var n=$(this),i=$(".add-tag-form").data("item"),a=n.parent().text();addRemoveTag(i,a,"remove")})}function cleanup(){$(document).off("click",SUBMIT_CORRECT_BUTTON);for(var t=0;t<TIMERS.length;t++)clearInterval(TIMERS[t]);clearInterval(timeTrackIntervalId),$.idleTimer("destroy"),cleanupTabRequests(),window.myAbacus.cleanup()}function addRemoveTag(t,e,r){Ajax.send({method:"add_remove_item_tag",app:"library",data:{item_id:t,tag_name:e,action:r},success:function(n){n.status==="ok"&&($(".tag-list").html(""),n.tags.forEach(function(i){$("<span>").addClass("badge").text(i).append($('<span class="chs-icon-cancel">')).appendTo($(".tag-list"))}),$("#tags-input").val(""))}})}function confirmPasteFromAssignment(t){return new Promise((e,r)=>{t?alertModal({rawHtml:"<h3>Are you sure you want to import the code from the following assignment?</h3><h3><b>"+$("#assignment_id option:selected").text()+"</b></h3><p>This will overwrite any code in the current assignment that conflicts with the assignment you are importing.</p>",cancelButton:!0,cancelButtonText:"Cancel",button:"Import",header:"Import Code",ok_callback:e,cancel_callback:r}):e()})}var setupTestCasesAIButton=()=>{$(document).on("click",".btn-ai-hint",function(){if($(this).tooltip("hide"),$(".tooltip").remove(),$(this).prop("disabled"))return!1;if(window.myAbacus&&typeof window.myAbacus.selectTabWithIdentifier=="function"){if(window.myAbacus.abc?.current?.props?.store?.getState?.()?.layout?.left?.minimized){let l={type:"TOGGLE_PANEL",data:{id:"left"}};window.myAbacus.abc?.current?.props?.store?.dispatch?.(l)}window.myAbacus.selectTabWithIdentifier("leftTabs","chat-tab")}let t=$(".js-chat-sidebar-lazy");t.length&&t.trigger("mouseover");let e=$(this).attr("id").replace("grading-unit-test-ai-hint-",""),n=`Can I get help with test case: \`${window.testcases[e].test}\`?
`,i=()=>{let c=$("#hidden-ai-hint-btn");return c.length&&!c.prop("disabled")?(c.data("msg",n),c.trigger("click"),$(this).tooltip("hide"),$(".tooltip").remove(),!0):!1};if(i())return;let a=0,s=20,o=()=>{a++,!i()&&a<s&&setTimeout(o,500)};setTimeout(o,100)})};PubSub.on("abacusEditor:setup",setup);PubSub.on("abacusEditor:cleanup",cleanup);module.exports={shimAbacusForModules}});var t8=R((exports,module)=>{var PubSub=Er(),expoIntegrationUtils=j0(),mapAbacusFiles=Ri().mapAbacusFiles,groupsToPermissions=Ri().groupsToPermissions,htmlDecode=ip().htmlDecode,loadHistory=ip().loadHistory;function setup(){let abacusOptions={projectName:htmlDecode(window.pageSpecific.itemTitle),projectType:window.pageSpecific.abacusProjectType,root:"root",staticUrl:window.CHS.GULP_URL+"abacus/",files:mapAbacusFiles(window.pageSpecific.files,function(t){return Object.assign(t,{text:htmlDecode(t.text)})}),slurpHTML:window.pageSpecific.slurpHTML,frameSrcCSPDirective:window.pageSpecific.frameSrcCSPDirective,dockerImage:window.pageSpecific.dockerImage,history:[],hideSettingsButton:!0,showFileTree:window.pageSpecific.showFileTree,displayMode:window.pageSpecific.viewType=="Display Only"?"displayOnly":"default",readOnly:!window.pageSpecific.editable,useBlockly:JSON.parse(window.pageSpecific.showBlocks),helperCode:window.pageSpecific.helper_code,customToolbox:JSON.parse(window.pageSpecific.custom_toolbox),codeServerUrl:window.pageSpecific.codeServerUrl,baseHtmlProgramUrl:window.pageSpecific.baseHtmlProgramUrl,externalProgramURL:window.pageSpecific.externalProgramURL,showSaveButton:window.pageSpecific.codeUserID===window.pageSpecific.viewerID,launchTemplate:window.pageSpecific.launchTemplate};window.pageSpecific.abacusProjectType==="html"&&window.pageSpecific.useServiceWorkerVFS&&window.pageSpecific.baseHtmlProgramUrl&&(abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{evaluationIFrames:[{shortName:"Default",template:window.pageSpecific.blockCodeHSMe?window.pageSpecific.baseHtmlProgramUrl+"/__codehs__/codehs_me_error.html":window.pageSpecific.baseHtmlProgramUrl+"/__codehs__/sw_html.html",hideRunBar:!1,autoRun:!1,active:!0}]}})),window.pageSpecific.isBlockly&&(abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{evaluationIFrames:[{shortName:"Default",template:"evaluation/js/javascript-graphics.html",hideRunBar:!1,autoRun:!1,active:!0}]}})),$("#view-on-phone-btn").prop("disabled",!0),eval(window.pageSpecific.block_definitions),window.myAbacus=new window.Abacus(abacusOptions);var expoArgs={hostname:window.location.hostname,codeTitle:htmlDecode(window.pageSpecific.itemTitle),codeDescription:window.pageSpecific.codeUserFirstNameLastInitial,userProgramID:window.pageSpecific.userProgramID};function getReactCode(){return expoIntegrationUtils.userCodeToReactCode(getCurrentCodeText(),window.location.hostname)}window.pageSpecific.showHistory&&loadHistory(window.myAbacus,window.pageSpecific.codeUserID,window.pageSpecific.itemID,window.pageSpecific.studentAssignmentID,window.pageSpecific.viewerID);function getCurrentCodeText(){var t=window.myAbacus.getCodeTree()[0].text;window.pageSpecific.showBlocks&&(t=xmlToCodeHeadless(t,window.pageSpecific.language.split("-")[0]));var e=(window.pageSpecific.helper_code?window.pageSpecific.helper_code+`
`:"")+t;return window.pageSpecific.showBlocks&&window.pageSpecific.isGraphics&&(e="var start = function(){"+e+"};"),e}function xmlToCodeHeadless(t,e){var r=new window.Blockly.Workspace,n=window.Blockly.Xml.textToDom(t);switch(window.Blockly.Xml.domToWorkspace(n,r),e){case"javascript":return window.Blockly.JavaScript.workspaceToCode(r);case"python":return window.Blockly.Python.workspaceToCode(r);case"html":return window.Blockly.HTML.workspaceToCode(r);default:return window.Blockly.Python.workspaceToCode(r)}}var expoSnackSessionPromise=expoIntegrationUtils.sessionPromise(getReactCode(),expoArgs);expoSnackSessionPromise.then(function(t){$("#view-on-phone-btn").prop("disabled",!1),$("#view-on-phone-btn").on("click",function(e){var r=$("#view-on-phone-btn").attr("data-expo-url");if(r){var n=$("#view-on-phone-btn").data("expo-url");expoIntegrationUtils.writeQRCode(n,expoIntegrationUtils.SNACK_SESSION_QR_DOM)}else expoIntegrationUtils.updateCode(getReactCode(),t,expoIntegrationUtils.SNACK_SESSION_QR_DOM)})}),$(".__abacus_tab-bar").css("display","none"),$(".__abacus_abacus").css("width","100%")}PubSub.on("abacusShareProgramEditor:setup",setup)});var r8=R((exports,module)=>{"use strict";var Ajax=ui(),PubSub=Er(),RunnerFactory=xy(),GradingTab=Vv(),flattenAbacusFiles=Ri().flattenAbacusFiles,shimAbacusForModules=H0().shimAbacusForModules,getQueryParams=Pi().getQueryParams,mapAbacusFiles=Ri().mapAbacusFiles,C=Rr(),BASE_URL=C.Uploads.UPLOADS_PROXY_BASE_URL,{fetchAjaxTabRequests,registerAjaxTabRequest,deriveAbacusSettings}=ip();function htmlDecode(t){var e=new DOMParser().parseFromString(t,"text/html");return e.documentElement.textContent}function setup(){if(window.pageSpecific.programIsActive){var hideLeftPanel=window.pageSpecific.hideLeftPanel;window.pageSpecific.skipBlockDefinitions||eval(window.pageSpecific.block_definitions);let abacusOptions={editorEngine:window.pageSpecific.editorEngine,autoRun:window.pageSpecific.autorun,projectName:htmlDecode(window.pageSpecific.itemTitle),projectType:window.pageSpecific.abacusProjectType,root:"root",slurpHTML:window.pageSpecific.slurpHTML,frameSrcCSPDirective:window.pageSpecific.frameSrcCSPDirective,useBlockly:JSON.parse(window.pageSpecific.showBlocks),dockerImage:window.pageSpecific.dockerImage,hideSettingsButton:window.pageSpecific.isTutorial||window.pageSpecific.isBlockly,leftTabsMinimized:JSON.parse(window.pageSpecific.leftTabsMinimized),helperCode:window.pageSpecific.helper_code,customToolbox:JSON.parse(window.pageSpecific.custom_toolbox),staticUrl:window.CHS.GULP_URL+"abacus/",hideNewFileButton:window.pageSpecific.hideNewFileButton,readOnly:window.pageSpecific.readOnly,displayMode:window.pageSpecific.displayMode,files:mapAbacusFiles(window.pageSpecific.files,function(t){return Object.assign(t,{text:htmlDecode(t.text)})}),canvasDimensions:window.pageSpecific.canvasDimensions,autoFocus:!1,projectConfigurationOverrides:{inDebugMode:window.pageSpecific.inDebugMode},editorSettings:{theme:{value:window.pageSpecific.editorSettings.theme.value,choices:window.pageSpecific.editorSettings.theme.choices,displayName:window.pageSpecific.editorSettings.theme.displayName,category:window.pageSpecific.editorSettings.theme.category},fontSize:{value:window.pageSpecific.editorSettings.fontSize.value,displayName:window.pageSpecific.editorSettings.fontSize.displayName,category:window.pageSpecific.editorSettings.fontSize.category,type:"numerical"},consoleFontSize:{value:window.pageSpecific.editorSettings.consoleFontSize.value,displayName:window.pageSpecific.editorSettings.consoleFontSize.displayName,category:window.pageSpecific.editorSettings.consoleFontSize.category,type:"numerical"},defaultBlocks:{value:window.pageSpecific.editorSettings.defaultBlocks.value,displayName:window.pageSpecific.editorSettings.defaultBlocks.displayName,category:window.pageSpecific.editorSettings.defaultBlocks.category,type:"switch"},autoComplete:{value:window.pageSpecific.editorSettings.autocomplete.value,displayName:window.pageSpecific.editorSettings.autocomplete.displayName,category:window.pageSpecific.editorSettings.autocomplete.category,type:"switch"},wrapLines:{value:window.pageSpecific.editorSettings.wrapLines.value,displayName:window.pageSpecific.editorSettings.wrapLines.displayName,category:window.pageSpecific.editorSettings.wrapLines.category,type:"switch"}},allowUploads:!0,processFiles:function(t){return new Promise(function(e,r){$.ajax({url:"/core/ajax/abacus_upload",type:"POST",data:t,processData:!1,dataType:"JSON",contentType:!1}).then(function(n){if(n.status!="ok"&&n.msg){window.toastr.error(n.msg);return}switch(n.type){case"file_contents":e(n.file_text);break;case"file_tree":e(n.file_tree);break;case"asset_url":var i=BASE_URL+n.url;e(i);break}})})},onSettingsChange:function(t,e,r){window.pageSpecific.viewerID&&Ajax.send({method:"user_settings_change",app:"editor",data:{setting:t,value:e,user_id:window.pageSpecific.viewerID,editor_engine:r}})},onFileRename:function(t){var e=t.newFilename,r=t.main;return new Promise(function(n,i){r?Ajax.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:e},success:function(a){a.status=="ok"?n():i()}}):n()})},onSave:function(t,e){return e==="mainFileChanged"?new Promise(function(r,n){var i=flattenAbacusFiles(t),a=i.filter(function(s){return s.main})[0]||i[0];Ajax.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:a.name},success:function(s){if(s.status=="ok")return r();n()}})}):Promise.resolve()},activeFilePathString:getQueryParams().filepath,codeServerUrl:window.pageSpecific.codeServerUrl,history:[],hideTabContainerTopBar:!1,hideTopBar:!0,hideLeftPanel,canRenameMainFile:!0,baseHtmlProgramUrl:window.pageSpecific.baseHtmlProgramUrl,externalProgramURL:window.pageSpecific.externalProgramURL,isEmbedded:!0,showSaveButton:window.pageSpecific.codeUserID===window.pageSpecific.viewerID,watchCodeServer:window.pageSpecific.watchCodeServer};window.pageSpecific.abacusProjectType==="html"&&window.pageSpecific.useServiceWorkerVFS&&window.pageSpecific.baseHtmlProgramUrl&&(abacusOptions=Object.assign(abacusOptions,{projectConfigurationOverrides:{evaluationIFrames:[{shortName:"Default",template:window.pageSpecific.blockCodeHSMe?window.pageSpecific.baseHtmlProgramUrl+"/__codehs__/codehs_me_error.html":window.pageSpecific.baseHtmlProgramUrl+"/__codehs__/sw_html.html",hideRunBar:!1,autoRun:!1,active:!0}]}})),window.pageSpecific.newEditorSettings?window.myAbacus=new window.Abacus(deriveAbacusSettings({pageSpecific,autoFocus:!1,projectConfigurationOverrides:{inDebugMode:window.pageSpecific.inDebugMode},explicitlyAllowUploads:!0,hideTabContainerTopBar:!1,hideTopBar:!0,isEmbedded:!0,canRenameMainFile:!0,newResolvedSettings:window.pageSpecific.newEditorSettings,permissions:{},processFiles:function(t){return new Promise(function(e,r){$.ajax({url:"/core/ajax/abacus_upload",type:"POST",data:t,processData:!1,dataType:"JSON",contentType:!1}).then(function(n){if(n.status!="ok"&&n.msg){window.toastr.error(n.msg);return}switch(n.type){case"file_contents":e(n.file_text);break;case"file_tree":e(n.file_tree);break;case"asset_url":var i=BASE_URL+n.url;e(i);break}})})},onSettingsChange:function(t,e,r){window.pageSpecific.viewerID&&Ajax.send({method:"user_settings_change",app:"editor",data:{setting:t,value:e,user_id:window.pageSpecific.viewerID,editor_engine:r}})},onFileRename:function(t){var e=t.newFilename,r=t.main;return new Promise(function(n,i){r?Ajax.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:e},success:function(a){a.status=="ok"?n():i()}}):n()})},onSave:function(t,e){return e==="mainFileChanged"?new Promise(function(r,n){var i=flattenAbacusFiles(t),a=i.filter(function(s){return s.main})[0]||i[0];Ajax.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:a.name},success:function(s){if(s.status=="ok")return r();n()}})}):Promise.resolve()},showSaveButton:window.pageSpecific.codeUserID===window.pageSpecific.viewerID})):window.myAbacus=new window.Abacus(abacusOptions),$(".__abacus_tab-bar").css("display","none"),window.pageSpecific.showGradingTab&&$("#right-tab-bar.__abacus_tab-bar").css("display","flex"),$(".js-load-starter-code-to-editor").on("click",function(){let t=JSON.parse(window.pageSpecific.starterCodeJson),e=Object.values(t);window.Ed.setCode(e)})}else $("#change-active-embed-switch").on("change",function(){var t=$(this).is(":checked");Ajax.send({method:"set_share_active",app:"editor",data:{itemID:window.pageSpecific.itemID,codeUserID:window.pageSpecific.codeUserID,activeStatus:t},success:function(e){$("#container").css("display","none"),window.location.reload()}})});shimAbacusForModules(window.myAbacus),window.pageSpecific.showGradingTab?window.myAbacus.addTab({title:"Test&nbsp;Cases",isMore:!1},function(t){registerAjaxTabRequest("autograder tab",{item_id:window.pageSpecific.itemID,code_user_id:window.pageSpecific.codeUserID}).then(e=>{e.status=="ok"&&(t.innerHTML='<div class="grading-tab" id="grading-tab">'+e.text+'<pre hidden id="console"></pre><canvas width="400" height="500" class="codehs-editor-canvas" hidden></canvas></div>',$(t).css({"flex-flow":"column",padding:"10px 10px 50px 10px",overflow:"auto"}).addClass("editor-tab-content"),window.myAbacus.shim.runner||(window.myAbacus.shim.runner=new RunnerFactory(window.myAbacus.shim).create()),new GradingTab(window.myAbacus.shim),PubSub.trigger("ajaxui:setup",".grading-tab"),$(".switch").bootstrapSwitch())})}):$("body").append('<pre hidden id="console"></pre><canvas width="400" height="500" class="codehs-editor-canvas" hidden></canvas></div>'),fetchAjaxTabRequests()}PubSub.on("embeddedAbacusSharedProgram:setup",setup)});var s8=R(()=>{"use strict";var Rf=ui(),G_e=Er(),i8=Ri().flattenAbacusFiles,z_e=H0().shimAbacusForModules,V_e=Pi().getQueryParams,W_e=Ri().mapAbacusFiles,K_e=Rr(),n8=K_e.Uploads.UPLOADS_PROXY_BASE_URL,{fetchAjaxTabRequests:X_e,deriveAbacusSettings:Y_e}=ip();function a8(t){var e=new DOMParser().parseFromString(t,"text/html");return e.documentElement.textContent}function J_e(t){let e=Math.round(t/1e3),r=Math.floor(e/86400),n=Math.floor(e%86400/3600),i=Math.floor(e%3600/60),a=e%60,s=[];return r>0&&s.push(r.toString().padStart(2,"0")),(r>0||n>0)&&s.push(n.toString().padStart(2,"0")),s.push(i.toString().padStart(2,"0")),s.push(a.toString().padStart(2,"0")),s.join(":")}function Q_e(){var t=window.pageSpecific.keystrokes;let e=window.pageSpecific.authorNames||{};t.unshift(null),window.keystrokes=t;var r=window.pageSpecific.starterCode,n,i,a=$("#start-replay"),s=$("#pause-replay"),o=$("#reset-replay"),c=$("#step-back"),l=$("#step-forward"),f=$("#replay-time"),g=$("#replay-scrubber"),m=$("#top-bar"),y=null,x=0,I=0;t.length>1&&(I=t[1].timestamp),n=window.pageSpecific.editorRef?.current?.editor,i=n?.session,n.setValue(r,-1);let A={},F={},X=["#FFE5E5","#E5F3FF","#FFF9E5","#FFE5F3","#F3E5FF","#E5E8FF","#E5FFF3","#FFF5E5"],de=0,N=[],H=[],z={};if(t.forEach(function(Re){Re&&Re.author_id&&!z[Re.author_id]&&(z[Re.author_id]=!0,F[Re.author_id]=e[Re.author_id]||"User "+Re.author_id)}),Object.keys(z).length>1){for(let Ze in z)A[Ze]||(A[Ze]=X[de%X.length],de++);for(let Ze in z)if(!document.getElementById("author-style-"+Ze)){let ce=document.createElement("style");ce.id="author-style-"+Ze,ce.innerHTML=".ace_marker-layer .author-"+Ze+" { background-color: "+A[Ze]+"; position: absolute; z-index: 4; border-radius: 0; }",document.head.appendChild(ce)}let Re='<span style="margin-right: 10px; font-weight: bold;">Authors:</span>';for(let Ze in z)Re+='<span style="margin-right: 10px; padding: 2px 8px; background-color: '+A[Ze]+'; border-radius: 3px;">'+F[Ze]+"</span>";$("#author-legend").html(Re)}else $("#author-legend").html("");function Y(Re){Re.preventDefault(),Re.stopImmediatePropagation()}function G(){a.attr("disabled",!1),s.attr("disabled",!0),n.container.removeEventListener("click",Y,!0),n.container.removeEventListener("mousedown",Y,!0),y&&clearTimeout(y)}function ie(){y&&clearTimeout(y);function Re(){if(x==0&&(x=1),!(x>=t.length)){var Ze=fe(x,!0);if(Ne(),Ze<t.length){var ce=t[Ze].timestamp-t[x].timestamp;ce>750&&(ce=750),x=Ze,y=setTimeout(Re,ce)}else G()}}t.length&&(x>0&&(He(x),x++),Re())}function fe(Re,Ze){if(Re>0){var ce=t[Re];if(ce.action=="i"||ce.action=="p"){let tt=ce.lines.join(`
`),ft=ce.start.row+ce.lines.length-1,pt;ce.lines.length===1?pt=ce.start.column+ce.lines[0].length:pt=ce.lines[ce.lines.length-1].length,i.insert(ce.start,tt),n.moveCursorTo(ft,pt),ce.author_id&&H.push({startRow:ce.start.row,startCol:ce.start.column,endRow:ft,endCol:pt,authorId:ce.author_id,keystrokeIndex:Re}),ce.action=="p"&&Ze?($(".paste").removeClass("hidden"),m.removeClass("paste-flash"),setTimeout(function(){m.addClass("paste-flash")},0)):$(".paste").addClass("hidden")}else ce.action=="r"&&(i.remove(new window.ace.Range(ce.start.row,ce.start.column,ce.end.row,ce.end.column)),n.moveCursorTo(ce.start.row,ce.start.column),H=H.filter(tt=>tt.keystrokeIndex<Re));Ze&&g.val(Re),f.text(J_e(ce.timestamp-I))}return Re+1}let Ne=()=>{ye(),H.forEach(Re=>{if(A[Re.authorId]){let Ze=new window.ace.Range(Re.startRow,Re.startCol,Re.endRow,Re.endCol),ce=i.addMarker(Ze,"author-"+Re.authorId,"text");N.push(ce)}})},ye=()=>{N.forEach(Re=>i.removeMarker(Re)),N=[]};function He(Re){x=0,ye(),H=[],n.setValue(r,-1);function Ze(){var ce=fe(x,!1);ce<=Re&&(x=ce,Ze())}Ze(),Ne(),Re>0&&t[Re].action=="p"?($(".paste").removeClass("hidden"),m.removeClass("paste-flash"),setTimeout(function(){m.addClass("paste-flash")},0)):$(".paste").addClass("hidden")}a.on("click",function(){n.container.addEventListener("click",Y,!0),n.container.addEventListener("mousedown",Y,!0),$(this).attr("disabled",!0),s.attr("disabled",!1),x>=t.length-1&&He(0),n&&i&&ie()}),s.on("click",function(){G()}),o.on("click",function(){G(),x=0,g.val(0),ye(),H=[],n.setValue(r,-1)}),g.on("input",function(){G();var Re=parseInt($(this).val());He(Re)}),c.on("click",function(){G(),x>0&&(g.val(x-1),He(x-1))}),l.on("click",function(){G(),x<t.length-1&&(g.val(x+1),He(x+1))})}function Z_e(){var t=window.pageSpecific.hideLeftPanel;let e={editorEngine:window.pageSpecific.editorEngine,autoRun:window.pageSpecific.autorun,projectName:a8(window.pageSpecific.itemTitle),projectType:window.pageSpecific.abacusProjectType,root:"root",slurpHTML:window.pageSpecific.slurpHTML,frameSrcCSPDirective:window.pageSpecific.frameSrcCSPDirective,useBlockly:!1,dockerImage:window.pageSpecific.dockerImage,hideSettingsButton:window.pageSpecific.isTutorial||window.pageSpecific.isBlockly,leftTabsMinimized:!0,helperCode:window.pageSpecific.helper_code,staticUrl:window.CHS.GULP_URL+"abacus/",hideNewFileButton:window.pageSpecific.hideNewFileButton,readOnly:window.pageSpecific.readOnly,displayMode:window.pageSpecific.displayMode,files:W_e(window.pageSpecific.files,function(r){return Object.assign(r,{text:a8(r.text)})}),autoFocus:!1,projectConfigurationOverrides:{inDebugMode:window.pageSpecific.inDebugMode},editorSettings:{theme:{value:window.pageSpecific.editorSettings.theme.value,choices:window.pageSpecific.editorSettings.theme.choices,displayName:window.pageSpecific.editorSettings.theme.displayName,category:window.pageSpecific.editorSettings.theme.category},fontSize:{value:window.pageSpecific.editorSettings.fontSize.value,displayName:window.pageSpecific.editorSettings.fontSize.displayName,category:window.pageSpecific.editorSettings.fontSize.category,type:"numerical"},consoleFontSize:{value:window.pageSpecific.editorSettings.consoleFontSize.value,displayName:window.pageSpecific.editorSettings.consoleFontSize.displayName,category:window.pageSpecific.editorSettings.consoleFontSize.category,type:"numerical"},defaultBlocks:{value:window.pageSpecific.editorSettings.defaultBlocks.value,displayName:window.pageSpecific.editorSettings.defaultBlocks.displayName,category:window.pageSpecific.editorSettings.defaultBlocks.category,type:"switch"},autoComplete:{value:window.pageSpecific.editorSettings.autocomplete.value,displayName:window.pageSpecific.editorSettings.autocomplete.displayName,category:window.pageSpecific.editorSettings.autocomplete.category,type:"switch"},wrapLines:{value:window.pageSpecific.editorSettings.wrapLines.value,displayName:window.pageSpecific.editorSettings.wrapLines.displayName,category:window.pageSpecific.editorSettings.wrapLines.category,type:"switch"}},allowUploads:!0,processFiles:function(r){return new Promise(function(n,i){$.ajax({url:"/core/ajax/abacus_upload",type:"POST",data:r,processData:!1,dataType:"JSON",contentType:!1}).then(function(a){if(a.status!="ok"&&a.msg){window.toastr.error(a.msg);return}switch(a.type){case"file_contents":n(a.file_text);break;case"file_tree":n(a.file_tree);break;case"asset_url":var s=n8+a.url;n(s);break}})})},onSettingsChange:function(r,n,i){window.pageSpecific.viewerID&&Rf.send({method:"user_settings_change",app:"editor",data:{setting:r,value:n,user_id:window.pageSpecific.viewerID,editor_engine:i}})},onFileRename:function(r){var n=r.newFilename,i=r.main;return new Promise(function(a,s){i?Rf.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:n},success:function(o){o.status=="ok"?a():s()}}):a()})},onSave:function(r,n){return n==="mainFileChanged"?new Promise(function(i,a){var s=i8(r),o=s.filter(function(c){return c.main})[0]||s[0];Rf.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:o.name},success:function(c){if(c.status=="ok")return i();a()}})}):Promise.resolve()},activeFilePathString:V_e().filepath,codeServerUrl:window.pageSpecific.codeServerUrl,history:[],hideTabContainerTopBar:!1,hideTopBar:!0,hideLeftPanel:t,canRenameMainFile:!0,baseHtmlProgramUrl:window.pageSpecific.baseHtmlProgramUrl,isEmbedded:!0,showSaveButton:window.pageSpecific.codeUserID===window.pageSpecific.viewerID};window.pageSpecific.newEditorSettings?window.myAbacus=new window.Abacus(Y_e({pageSpecific,autoFocus:!1,projectConfigurationOverrides:{inDebugMode:window.pageSpecific.inDebugMode},explicitlyAllowUploads:!0,hideTabContainerTopBar:!1,hideTopBar:!0,isEmbedded:!0,canRenameMainFile:!0,newResolvedSettings:window.pageSpecific.newEditorSettings,permissions:{},processFiles:function(r){return new Promise(function(n,i){$.ajax({url:"/core/ajax/abacus_upload",type:"POST",data:r,processData:!1,dataType:"JSON",contentType:!1}).then(function(a){if(a.status!="ok"&&a.msg){window.toastr.error(a.msg);return}switch(a.type){case"file_contents":n(a.file_text);break;case"file_tree":n(a.file_tree);break;case"asset_url":var s=n8+a.url;n(s);break}})})},onSettingsChange:function(r,n,i){window.pageSpecific.viewerID&&Rf.send({method:"user_settings_change",app:"editor",data:{setting:r,value:n,user_id:window.pageSpecific.viewerID,editor_engine:i}})},onFileRename:function(r){var n=r.newFilename,i=r.main;return new Promise(function(a,s){i?Rf.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:n},success:function(o){o.status=="ok"?a():s()}}):a()})},onSave:function(r,n){return n==="mainFileChanged"?new Promise(function(i,a){var s=i8(r),o=s.filter(function(c){return c.main})[0]||s[0];Rf.send({method:"update_main_class",app:"library",type:"POST",data:{item_id:window.pageSpecific.itemID,filename:o.name},success:function(c){if(c.status=="ok")return i();a()}})}):Promise.resolve()},showSaveButton:window.pageSpecific.codeUserID===window.pageSpecific.viewerID})):window.myAbacus=new window.Abacus(e),$(".__abacus_tab-bar").css("display","none"),window.pageSpecific.showGradingTab&&$("#right-tab-bar.__abacus_tab-bar").css("display","flex"),z_e(window.myAbacus),X_e(),window.pageSpecific.keystrokes.length&&($("#start-replay").attr("disabled",!1),$("#reset-replay").attr("disabled",!1),$("#replay-scrubber").attr("disabled",!1),Q_e())}G_e.on("codeReplay:setup",Z_e)});var o8=R(()=>{var ewe=Er(),twe=Zl(),rwe=function(){var t=window.pageSpecific.description,e=window.pageSpecific.isQuill;twe.chooseEditor([{qlTarget:"#quill-note",mdTarget:"#markdown-note",content:t}],e),$(".notes-wrap a").attr("target","_blank")};ewe.on("editor:viewnote:setup",rwe)});var c8=R((JPe,u8)=>{var Il=Rr(),lx=Rc();function iwe(t){var e=[];switch(t.language){case Il.ProgrammingLanguage.JAVASCRIPT:switch(t.progType){case Il.ProgramType.KAREL:e=lx.getBuiltIns(!1,!1);break;case Il.ProgramType.SUPER_KAREL:e=lx.getBuiltIns(!0,!1);break;case Il.ProgramType.ULTRA_KAREL:e=lx.getBuiltIns(!1,!0);break;case Il.ProgramType.CONSOLE:e=[];break;case Il.ProgramType.GRAPHICS:e=[];break}break}return e}function nwe(t){return{browser:!0,es6:!1,for:!0,white:!0,this:!0}}function awe(t){return t.filter(function(e){var r=e.code==="unexpected_a"&&e.message!=="Unexpected 'var'."&&e.message!=="Unexpected 'else'."&&e.message!=="Unexpected 'new'."&&e.message!=="Unexpected 'const'."&&e.message!=="Unexpected 'let'.";return r||e.code==="naked_block"||e.code==="expected_a_b_from_c_d"})}u8.exports.lint=function(t,e){var r,n,i,a;return e.language!==Il.ProgrammingLanguage.JAVASCRIPT?{hasError:!1}:(r=iwe(e),n=nwe(e),i=jslint(t,n,r),a=awe(i.warnings),a&&a.length?(a[0].code==="expected_a_b_from_c_d"&&(a[0].message=a[0].message.replace(/\d+/,function(s){return++s})),{hasError:!0,message:a[0].message,lineNumber:a[0].line+1}):{hasError:!1})}});var vx=R((QPe,v8)=>{"use strict";var To=Rr(),f8=Pi().fileHasImageExtension,Nf=".editor-wrap",Lf="#codehs-editor",swe="#left .action",owe=".quiz-wrap",uwe="#right .nav-tabs",hx="#tab-bar",cwe=50,p8="#left",dx="#right",Dl="#problem-sidebar",fx="#content-listing",gx=300,lwe=400,dwe=".toggle-sidebar",G0="#editor-full-size",mx="#history-preview",fwe=8,px=250,l8=60,pwe=530,hwe=.7,h8=gx;function Ss(t,e){this.editor=t,e=e||{},this.options=_.defaults(e,{isQuiz:!1}),this.sidebarOpen=!$(fx).hasClass("gone"),this.fullSize=$(p8).width()===0,this.setup()}Ss.prototype.isSidebarOpen=function(){return this.sidebarOpen};Ss.prototype.toggleSidebar=function(){var t=this;this.sidebarOpen?(d8(),$(Dl).animate({width:l8+"px"},400,function(){$("#open-toggle").animate({width:"toggle"},"fast"),$(fx).addClass("gone")}),$(Nf).animate({"padding-left":l8+"px"},400,function(){t.editor.aceEditor.resize()}),$(Dl+"-tabs").animate({height:"100%"},400),$("#close-toggle").hide()):($(fx).removeClass("gone"),$("#open-toggle").animate({width:"toggle"},"fast",function(){$(Dl).animate({width:px+"px"},400,function(){$("#close-toggle").animate({width:"toggle"},"fast")}),$(Nf).animate({"padding-left":px+"px"},250,function(){t.editor.aceEditor.resize()}),$(Dl+"-tabs").animate({height:"44px"},400,function(){d8()})})),this.sidebarOpen=!this.sidebarOpen};function d8(){$("#problem-sidebar-tabs").toggleClass("nav-justified").toggleClass("nav-stacked"),$(Dl).toggleClass("minimized")}Ss.prototype.setupSharedEditor=function(){var t=$("#shared-program").height();$(Lf).css("height",t+"px")};Ss.prototype.setupEditorHeight=function(){var t=this,e=$(p8).height(),r=$(swe).height(),n=$("#grading-quiz").outerHeight(!0)||0,i=$("#grading-box").outerHeight(!0)||0,a=$("#code-edit-alert").outerHeight(!0)||0,s=$(".lti-launch-banner").outerHeight(!0)||0,o=$("#logged-out-editor-banner").outerHeight(!0)||0,c=e-r-fwe-n-i-a-o-s;t.editor.codeEditorType===To.EditorType.DROPLET_EDITOR&&(c-=26),$(Lf).css("height",c+"px");var l=e-cwe-$(uwe).height();if(l<pwe){var f=$('canvas[data-type="superkarel"], canvas[data-type="karel"], canvas[data-type="ultrakarel"]');f&&l>0&&f.css("height",l*hwe)}$(mx).css({"max-height":$(hx).height()-30})};Ss.prototype.setupSidebarContentTab=function(){var t=this;$(Nf).one("shown.bs.tab",'a[href="#sidebar-content-tab"]',function(){t.editor.editorSidebarContent.setup()})};Ss.prototype.setupRightSidebarResize=function(){var t=this;$(dx).resizable({maxWidth:g8(),minWidth:gx,handles:"w",resize:function(e,r){$(Nf).css({"padding-right":r.size.width}),$(mx).width($(hx).width()-20-100)},stop:function(e,r){h8=r.size.width,$(".right-col-tabs").outerHeight()>50?$(".right-col-tabs").addClass("wrapped"):$(".right-col-tabs").removeClass("wrapped"),t.editor.aceEditor.resize()}})};function g8(){var t=$(window).width()-px-lwe;return t<gx?null:t}Ss.prototype.setupFileList=function(t){var e=this,r=e.editor.code,n=$(".file-list"),i=$.Deferred();if(e.editor.getItemType()===To.ItemType.UNIT_TEST){var a=e.editor.getInfo();window.PRACTICE_LOGGED_OUT_EDITOR?$.ajax({url:"/editor/ajax/unit_test_to_practice_code",type:"GET",dataType:"json",data:{itemID:a.itemID},success:function(s){Object.assign(e.editor.breakpoints,Object.keys(s.code).reduce(function(o,c){return o[c]=[],o},{})),e.editor.code=$.extend(r,s.code),e.editor.breakpoints["Scratchpad.java"]={},i.resolve()}}):$.ajax({url:"/editor/ajax/unit_test_to_runnable_code",type:"GET",dataType:"json",data:{userID:a.codeUserID,itemID:a.itemID,studentAssignmentID:a.studentAssignmentID},success:function(s){Object.assign(e.editor.breakpoints,Object.keys(s.code).reduce(function(o,c){return o[c]=[],o},{})),e.editor.code=$.extend(r,s.code),i.resolve()}})}else i.resolve();i.then(function(){n.length&&e.createFileList(r,t)})};Ss.prototype.createFileList=function(t,e){var r=this;e=typeof e<"u"?e:!0;var n=[],i=$(".file-list");i.html("");var a;if(e){if(a=Object.keys(t)[0],r.editor.language===To.ProgrammingLanguage.JAVA&&r.editor.getItemType()!==To.ItemType.UNIT_TEST)a=r.editor.mainClass+To.ProgrammingLanguage.FILE_SUFFIX[r.editor.language];else if(r.editor.getItemType()==To.ItemType.FREE_RESPONSE){var s=To.ProgrammingLanguage.FILE_SUFFIX[r.editor.language];r.editor.mainClass.endsWith(s)?a=r.editor.mainClass:a=r.editor.mainClass+s}else r.editor.mainClass!==void 0&&(a=r.editor.mainClass);r.editor.activeFile=a}if(Object.keys(t).forEach(function(c){var l=c.lastIndexOf("/"),f=c.substring(0,l),g=c.substring(l+1);m8(f,n),f!==""&&(i=document.getElementById(f));var m='data-filename="'+c+'"',y=$('<a href="javascript:void(0);" class="file" role="button"'+m+">").append(g).data("filename",c),x=r.editor.mainClass+To.ProgrammingLanguage.FILE_SUFFIX[r.editor.language];(x===c||c===a)&&(y.addClass("active"),y.attr("aria-selected",!0),_.size(t)>1&&r.editor.getItemType()!==To.ItemType.UNIT_TEST&&y.prepend($('<span class="icon icon-play-circle" rel="tooltip" title="This is the main file that runs when you click the run button.">'))),y.prepend($('<span class="icon icon-file">'));var I;g=="."||g==""?I=$('<li class="gone">').append(y):I=$('<li class="file-list-file">').append(y),$(i).append(I),$("[rel=tooltip]").tooltip({container:"body"}),i=$(".file-list")}),$(".file-list").off("click"),$(".file-list").on("click",".file",function(){if(r.editor.firepad&&!r.editor.firepad.isLeader()){window.toastr.error("You can't switch files while collaborating");return}r.activateFile(this)}),$(".folder").off("click"),$(".folder").on("click",function(){var c=$(this).attr("class"),l=c.lastIndexOf(" "),f=c.substring(l+1),g=$(document.getElementById(f));g.attr("style")==="display: none;"?(g.show(),$(this).find(".icon-folder-close-alt").addClass("icon-folder-open-alt"),$(this).find(".icon-folder-close-alt").removeClass("icon-folder-close-alt")):(g.hide(),$(this).find(".icon-folder-open-alt").addClass("icon-folder-close-alt"),$(this).find(".icon-folder-open-alt").removeClass("icon-folder-open-alt"))}),r.editor.firepad&&!r.editor.firepad.isLeader()){$("#create-new-file").addClass("gone");var o=$(".file-list");o.find('a.right[data-target="#create-new-file-modal"]').addClass("gone")}};Ss.prototype.activateFile=function(t){var e=this;if($(t).length){var r=e.editor.code,n=e.editor.currentCode;n[e.editor.activeFile]=e.editor.getCode(),r[e.editor.activeFile]=e.editor.getCode(),$(".file-list .file.active").removeClass("active");var i=$(t).data("filename");$(t).addClass("active"),$(".powered-by-firepad").css("display","block"),f8(i)?($("#codehs-editor").hide(),$("#image-asset img").attr("src",r[i]),$("#image-asset").css("display","flex"),$(".powered-by-firepad").css("display","none"),e.editor.setCode(r[i]),e.editor.activeFile=i):i.endsWith(".jar")?($("#image-asset").css("display","none"),$("#codehs-editor").show(),e.editor.setCode(e.editor.getJarASCII()),e.editor.activeFile=i):($("#image-asset").css("display","none"),$("#codehs-editor").show(),e.editor.setCode(r[i]),e.editor.activeFile=i,i==="Unit Test"&&(i=i+To.ProgrammingLanguage.FILE_SUFFIX[e.editor.language]),e.editor.aceEditor.refreshModeStringNative(i),e.editor.clearHighlightedLines(),$("li.error-entry").each(function(){var a=$(this).data("line"),s=$(this).data("filename");e.editor.highlightLine(a,!1,s)})),e.editor.refreshBreakpoints(),e.editor.firepad&&e.editor.firepad.isLeader()&&e.editor.firepad.updateFiles()}};Ss.prototype.activateFileFirepad=function(t){var e=this;f8(t)?($("#codehs-editor").hide(),$("#image-asset img").attr("src",e.editor.code[t]),$("#image-asset").css("display","flex"),$(".powered-by-firepad").css("display","none")):($("#image-asset").css("display","none"),$("#codehs-editor").show(),$(".powered-by-firepad").css("display","block")),$(".file-list .file.active").removeClass("active"),$('.file[data-filename="'+t+'"]').addClass("active")};function m8(t,e){if(t!==""&&e.indexOf(t)===-1){e.push(t);var r=t.lastIndexOf("/"),n=t.substring(r+1),i=t.substring(0,r);$("#new-file-folder-name").append('<option name="'+t+'">'+t+"</option>"),$("#new-folder-folder-name").append('<option name="'+t+'">'+t+"</option>"),$(".location-select").removeClass("gone"),m8(i,e),gwe(i,t,n)}}function gwe(t,e,r){var n=document.getElementById(t);n===null&&(n=$(".file-list"));var i=$('<ul class="folder" id="'+e+'">');$(n).append($("<li>").append($('<a href="javascript:void(0);" role="button"  class="folder '+e+'">').append('<span class="icon icon-folder-open-alt"></span>').append(r)).append('<a href="javascript:void(0);" class="right" data-toggle="modal" role="button" aria-haspopup="dialog"data-target="#create-new-file-modal" data-location="'+e+'"><span class="fas fa-plus-square folder-add-file" title="Add to this folder"></span></a>').append('<div class="clear"></div>').append(i))}Ss.prototype.setup=function(){var t=this;if(t.editor&&t.editor.isSharedProgram){t.editor.aceEditor.getEditor().renderer.setShowGutter(!1),$(Lf).bind("copy paste",function(o){o.preventDefault()}),$(Lf).on("contextmenu",function(o){return!1});var e=!1,r=17,n=91,i=86,a=67;$(Lf).on("keydown",function(o){(o.keyCode==r||o.keyCode==n)&&(e=!0)}).on("keyup",function(o){(o.keyCode==r||o.keyCode==n)&&(e=!1)}),$(Lf).on("keydown",function(o){if(e&&(o.keyCode==i||o.keyCode==a))return!1}),window.pageSpecific.readOnly&&t.editor.aceEditor.editor.setReadOnly(!0),t.setupSharedEditor()}else t.options.isQuiz||t.setupEditorHeight();t.setupSidebarContentTab(),t.options.isQuiz||t.setupFileList(),t.options.isQuiz||$(window).on("resize",function(){t.editor.isSharedProgram?t.setupSharedEditor():($(dx).resizable("option","maxWidth",g8()),t.setupEditorHeight())}),$(dwe).on("click",function(){t.toggleSidebar()});var s=Nf;t.options.isQuiz&&(s=owe),$(s).on("click","#problem-sidebar.minimized .sidebar-nav-tab",function(){$($(this).attr("href")).tab("show"),t.toggleSidebar()}),$(s).on("click","#problem-sidebar .sidebar-nav-tab",function(){$('#problem-sidebar .sidebar-nav-tab[aria-selected="true"]').each(function(){$(this).attr("aria-selected",!1)}),$(this).attr("aria-selected",!0)}),$(s).on("click",".file-list-file .file",function(){$('.file-list-file .file[aria-selected="true"]').each(function(){$(this).attr("aria-selected",!1)}),$(this).attr("aria-selected",!0)}),$(".js-editor-bottombar").length&&$(".js-editor-bottombar .module-name").on("click",function(o){if($(Dl).length){var c=$('.sidebar-nav-tab[href="#sidebar-content-tab"]');c.hasClass("active")||($("#problem-sidebar-tabs .active").removeClass("active"),c.parent().addClass("active")),t.isSidebarOpen()||t.toggleSidebar()}}),document.getElementsByClassName("sandbox-demo-try-it-button").forEach(function(o){o.addEventListener("click",function(){window.Ed.save(function(){window.Ed.setCodeFromJSON(JSON.parse(o.dataset.starterCode),{mainClass:o.dataset.main})})})}),$(G0).on("click",function(){(t.sidebarOpen&&!t.fullSize||!t.sidebarOpen&&t.fullSize)&&$(Dl).exists()&&t.toggleSidebar();var o;t.fullSize?o=h8:o=0,$(Nf).animate({"padding-right":o},250,function(){t.editor.aceEditor.resize(),$(G0).toggleClass("expanded")}),$(dx).animate({width:"toggle"}),t.fullSize=!t.fullSize,t.fullSize?$(G0).attr("aria-label","Exit editor fullscreen"):$(G0).attr("aria-label","Activate editor fullscreen")}),t.setupRightSidebarResize(),$(mx).width($(hx).width()-20-100),t.options.isQuiz||t.editor.aceEditor.resize(),window.innerWidth<960&&t.toggleSidebar()};v8.exports=Ss});var yx=R((ZPe,b8)=>{var mwe=ui(),vwe=Er(),ywe="#course-search",bwe="#search-results",_we=".js-search-item",Vs="#sidebar-content-tab",wwe=function(t,e){return e===!0||mwe.send({method:"get_sidebar_content",app:"editor",data:{userId:t,itemId:window.pageSpecific.itemID,moduleId:window.pageSpecific.moduleID,courseId:window.pageSpecific.courseID,studentAssignmentId:window.pageSpecific.studentAssignmentID||0},success:function(r){if(!(r.status!=="ok"||e)){e=!0;var n=$(r.text);$(Vs).prepend(n);var i=$(ywe),a=$(bwe),s=$(_we);if(i.on("keyup",function(){var l=i.val();l.length>=3?(a.show(),s.each(function(){var f=$(this),g=f.data("item-title");g.toLowerCase().indexOf(l)!==-1?f.show():f.hide()})):a.hide()}),$(".module-progress").on("click",function(){var l=$(this);$(this).hasClass("closed")?($(".module-progress.open").length?$(".module-progress.open").next().slideUp(400,function(){$(this).prev().addClass("closed").removeClass("open").attr("aria-expanded","false"),y8(l)}):y8(l),$(this).addClass("open").removeClass("closed").attr("aria-expanded","true")):$(this).next().slideUp("slow",function(){l.addClass("closed").removeClass("open").attr("aria-expanded","false")})}),$(".lesson-item.current").parent().slideDown().prev().removeClass("closed").addClass("open").attr("aria-expanded","true"),$(".module-lesson").on("click",function(){if($(this).next().slideToggle("fast"),$(this).toggleClass("closed").toggleClass("open"),$(this).hasClass("open")){var l=$(Vs).scrollTop()-$(Vs).offset().top;$(Vs).animate({scrollTop:$(this).offset().top+l},"slow"),$(this).attr("aria-expanded","true")}else $(this).attr("aria-expanded","false")}),$("#problem-sidebar").length){var o=".module-progress.current-module",c=$(Vs).offset().top;$(o).length&&$(Vs).scrollTop($(o).offset().top-c)}vwe.trigger("main:setupTooltips",Vs)}},error:function(){$(Vs).prepend("Oops. Something didn't work. Try refreshing.")}}),!0};function y8(t){t.next().slideDown(400,function(){var e=$(Vs).scrollTop()-$(Vs).offset().top;$(Vs).animate({scrollTop:t.offset().top+e},400)})}b8.exports=wwe});var w8=R((e2e,_8)=>{"use strict";var yg=Rr(),Swe=Er(),Twe=ui();function Cwe(t,e){var r;if(e==yg.QuizQuestion.MULTIPLE_CHOICE||e==yg.QuizQuestion.MULTIPLE_CHOICE_GRADING){r=$("input[name=question"+t+"]:checked");var n=r.attr("data-idx");return n}else if(e==yg.QuizQuestion.SHORT_ANSWER){r=$("#text_"+t);var i=r.val();return i}else return null}function Ewe(t){t=t||0;var e=$(".question-submit-button"),r=$(".question-submit");$("#submit-button").hide(),$("#save-button").hide(),$("#settings-button").hide(),$("td").each(function(a,s){$(this).addClass("gradingquiz-answer")});for(var n=e.length,i=0;i<n-1;i++)$(e[i]).removeClass("question-submit-button").addClass("gradingquiz-button").hide();$(e[n-1]).removeClass("question-submit-button").addClass("gradingquiz-button").addClass("gradingquiz-submit-button"),$(".gradingquiz-submit-button").on("click",function(){$(".gradingquiz-button").each(function(a,s){var o=$(this).attr("data-qid"),c=parseInt($(this).attr("data-qtype")),l=parseInt($(this).attr("data-atype")),f=Cwe(o,c);f&&(l==yg.QuizQuestion.SINGLE_RESPONSE&&($(this).attr("disabled","disabled"),$(this).html("Answered"),c==yg.QuizQuestion.SHORT_ANSWER&&$("#text_"+o).attr("disabled","disabled")),Twe.send({method:"answer_question",app:"quiz",data:{quizID:t,questionID:o,questionType:c,answer:f},success:function(g){Swe.trigger("quiz:answeredQuestion",{response:g,questionID:o})}}))})})}_8.exports=Ewe});var V8=R((t2e,z8)=>{"use strict";var O8=vx(),P8=yx(),si=Rr(),fi=Er(),Co=Yl(),Mi=ui(),Ff=Jl(),R8=WV().setupFirebase,eb=KV().selectableMarkdown,xwe=w8(),Pl=Ql(),xo=".num-answered",$f=".num-correct",Awe="#quiz-info",kwe="quiz-completed",Ix="#quiz-reset",In="#next-button",Ks=".check-answer-button",Rl=".answer-checked-button",Mf=".check-answer-button, .multiple-choice-option, #next-button",S8=".table-clickable-rows tr",X0="YYYY-MM-DD HH:mm:ss",Iwe="#start-quiz-modal",Dx="#quiz-timer-toggle",Dwe="#quiz-timer-content",z0,bx,$r,Au,wx,T8,L8,N8,Ts,Sx="True",C8,E8,x8,V0,as,bc;function W0(){return $r>=Au?($(In).removeAttr("disabled"),fi.trigger("utils:turnButtonGreen",In),$(Awe).addClass(kwe),!0):!1}function Y0(t,e,r){var n=$("#q-"+t+" .question-answers tr")[e];$(n).addClass(r)}function A8(t,e,r){r==si.QuizQuestion.CHECK_BOXES?(e=JSON.parse(e),$.each(e,function(n,i){Y0(t,i,"correct")})):Y0(t,e,"correct")}function Owe(t,e,r,n){if(n==si.QuizQuestion.CHECK_BOXES){e=JSON.parse(e),r=JSON.parse(r);var i=JSON.stringify(_.difference(e,r));$.each(JSON.parse(i),function(a,s){Y0(t,s,"incorrect")})}else Y0(t,e,"incorrect")}function Pwe(t,e){$("#q-"+t+" .question-answers tr").each(function(){$(this).prop("onclick",null).off("click"),$(this).removeClass("hoverable"),e==si.QuizQuestion.CHECK_BOXES?$(this).find("td input:checkbox").attr("disabled",!0):$(this).find("td input:radio").attr("disabled",!0)})}function Ox(t){var e=parseInt(t.response.questionID),r=parseInt(t.response.questionType),n=parseInt(t.response.answerType),i,a;if(r==parseInt(si.QuizQuestion.CHECK_BOXES)){i=t.response.userAnswer.replace(" ",""),a=t.response.correctAnswer.replace(" ","");var s=JSON.parse(t.response.reason);$.each(s,function(c,l){$(".reasons-"+e).append('<p data-qid="'+e+'" data-markdown="'+l+'"></p>')}),fi.trigger("CHS.Utils.markdown:setup")}else i=parseInt(t.response.userAnswer),a=parseInt(t.response.correctAnswer),$(".reasons-"+e).append('<p data-qid="'+e+'" data-markdown="'+t.response.reason+'"></p>'),fi.trigger("CHS.Utils.markdown:setup");if(r!=parseInt(si.QuizQuestion.SHORT_ANSWER)?(Pwe(t.questionID,r),i===a?(Ts++,$r++,$($f).html(Ts),A8(t.questionID,a,r),$("button[data-qid="+e+"]").attr("disabled","disabled")):(Owe(t.questionID,i,a,r),n==si.QuizQuestion.SINGLE_RESPONSE&&($r++,A8(t.questionID,a,r),$("button[data-qid="+e+"]").attr("disabled","disabled")))):($r++,Sx="False",$("button[data-qid="+e+"]").attr("disabled","disabled")),$(xo).html($r),W0()){var o=G8();Pl(o?{student_assignment_id:o}:{item_id:$x(),module_id:Bx(),course_id:qx(),auto_grade:Sx})}}fi.on("quiz:answeredQuestion",function(t){Ox(t)});function Rwe(t,e){var r,n;if(e===si.QuizQuestion.MULTIPLE_CHOICE||e===si.QuizQuestion.MULTIPLE_CHOICE_GRADING||e===si.QuizQuestion.CHECK_BOXES){if(r=$("input[name=question"+t+"]:checked"),e==si.QuizQuestion.CHECK_BOXES){var i=[];$.each(r,function(s,o){i.push(parseInt($(o).attr("data-idx")))}),n=JSON.stringify(i)}else n=r.attr("data-idx");return n}else if(e==si.QuizQuestion.SHORT_ANSWER){r=$("#text_"+t);var a=r.val();return a}else return null}function Lwe(t,e){bx=bx||window.Markdown.getSanitizingConverter();function r(){var n=$(t).val(),i=bx.makeHtml(n);$(e).html(i)}$(t).on("keypress",r),r()}function F8(t){if(t=t||{},z0=t.quizID||0,$r=t.numAnswered||0,Au=t.numQuestions||0,Ts=t.numCorrect||0,wx=t.itemID||0,L8=t.moduleID||0,N8=t.courseID||0,T8=t.itemType||0,C8=t.makeEditorColumns||!1,E8=t.pageUserID||0,x8=t.pageUserName||"",V0=t.studentAssignmentID,W0(),$("#refresh").on("click",function(){window.location.reload()}),$(S8).on("mouseenter",function(){$(this).parents(".question").attr("data-answered")==="True"&&$(this).removeClass("hoverable")}),$(S8).on("click",function(r){$(this).parents(".question").attr("data-answered")!=="True"&&$(this).find("td input:radio").prop("checked",!0)}),$(In).on("click",function(r){if(W0()){var n=G8();Pl(n?{student_assignment_id:n}:{item_id:$x(),module_id:Bx(),course_id:qx(),auto_grade:Sx})}}),$(Ix).on("click",function(){var r,n,i;V0?(r={studentAssignmentId:V0},n="reset_assignment",i="lms"):(r={user_id:E8,quiz_id:z0,item_id:wx},n="reset_quiz",i="quiz"),Ff({message:"Warning: This is will reset the entire quiz for "+x8+".",button:"Reset",cancelButton:!0,ok_callback:function(){Mi.send({method:n,app:i,data:r,success:function(a){a.status==="ok"&&location.reload()}})}})}),$(".question-submit-button").on("click",function(){if(!$(this).hasClass("gradingquiz-button")){var r=$(this).attr("data-qid"),n=parseInt($(this).attr("data-qtype")),i=parseInt($(this).attr("data-atype")),a=Rwe(r,n);a&&(i==si.QuizQuestion.SINGLE_RESPONSE&&($(this).attr("disabled","disabled"),$(this).html("Answered"),n===si.QuizQuestion.SHORT_ANSWER&&$("#text_"+r).attr("disabled","disabled")),Mi.send({method:"answer_question",app:"quiz",data:{quizID:z0,questionID:r,questionType:n,answer:a},success:function(s){s.status==="existed"&&Ff({message:"Looks like you already answered that question",button:"OK",cancelButton:!1,ok_callback:function(){}}),Ox({response:s,questionID:r})},error:function(s){Ff({message:"There was an error answering the question. Try refreshing the page, then if the problem continues, contact support@codehs.com",button:"OK",cancelButton:!1,ok_callback:function(){}})}}))}}),parseInt(T8)===si.ItemType.GRADING_QUIZ&&(W0()||$(In).attr("disabled","disabled"),xwe(z0)),C8){var e=new O8(null,{isQuiz:!0});e.toggleSidebar()}window.pageSpecific.loaded=!1,$('#open-toggle, a[href="#sidebar-content-tab"]').on("click",function(){window.pageSpecific.loaded||(window.pageSpecific.loaded=P8(window.pageSpecific.codeUserID||window.pageSpecific.pageUserID,window.pageSpecific.loaded))})}function Nwe(){if($r=window.pageSpecific.numAnswered,Au=window.pageSpecific.numQuestions,$(Dx).on("click",Nx),as=window.pageSpecific.timeLimit,window.pageSpecific.endTime&&(bc=window.moment.tz(window.pageSpecific.endTime,X0,window.pageSpecific.codehsTimezone)),window.pageSpecific.ownPage&&window.pageSpecific.activeAttempt){if(as&&!bc){var t=$("#quiz-start-countdown-modal");t.on("hidden.bs.modal",function(){Tx()}).modal({backdrop:"static",show:!0}),_g();var e=4,r=setInterval(function(){e<=0?(clearInterval(r),t.modal("hide")):e<3&&$(".quiz-start-countdown-count").html(e),e--},1e3)}else as&&bc?Tx():(k8(),Px(),Rx());window.pageSpecific.isCertExam&&!window.pageSpecific.allowQuestionFeedback&&($(document).on("copy cut contextmenu",function(n){n.stopPropagation(),n.preventDefault()}),$(document).on("keydown",function(n){if((n.ctrlKey||n.metaKey)&&n.which==83){n.stopPropagation(),n.preventDefault();return}var i=[65,67,69,73,74,75,84,85,90],a=[116,118,120,123];if((n.ctrlKey||n.metaKey)&&i.indexOf(n.which)!=-1||a.indexOf(n.which)!=-1){n.stopPropagation(),n.preventDefault();return}return!0})),_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay)&&$8()}else k8();$(Ix).on("click",function(){var n=$(this);n.prop("disabled",!0),Ff({message:"Are you sure you want to reset this quiz?",button:"Reset",cancelButton:!0,ok_callback:function(){Mi.send({method:"reset_assignment",app:"lms",header:"Reset Quiz",data:{studentAssignmentId:window.pageSpecific.studentAssignmentID},success:function(i){i.status==="ok"?(Co.success("Quiz reset successful, page will refresh momentarily."),location.reload()):(Co.error("Could not reset quiz, please try again."),n.prop("disabled",!1))},error:function(){Co.error("Something went wrong, please refresh and try again.")}})}})})}function Fwe(){$r=window.pageSpecific.numAnswered,Au=window.pageSpecific.numQuestions,window.pageSpecific.ownPage&&window.pageSpecific.activeAttempt&&(as&&bc?Tx():(Px(),Rx()),_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay)&&$8()),$(Ks).on("click",function(){var t=$(this).data("questionId");U8(t)}),$(Ix).on("click",function(){var t=$(this);t.prop("disabled",!0),Ff({message:"Are you sure you want to reset this quiz?",button:"Reset",cancelButton:!0,ok_callback:function(){Mi.send({method:"reset_assignment",app:"lms",header:"Reset Quiz",data:{studentAssignmentId:window.pageSpecific.studentAssignmentID},success:function(e){e.status==="ok"?(Co.success("Quiz reset successful, page will refresh momentarily."),location.reload()):(Co.error("Could not reset quiz, please try again."),t.prop("disabled",!1))},error:function(){Co.error("Something went wrong, please refresh and try again.")}})}})})}function Mwe(){$r=window.pageSpecific.numAnswered,Au=window.pageSpecific.numQuestions,$(".multiple-choice-option").on("change",function(){var t=$(this).data("questionId");_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay)?$("#check-"+t+"-button").removeAttr("disabled"):($r=$(".multiple-choice-option:checked").length,$(xo).html($r))}),_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay)?$(Ks).on("click",function(){var t=$(this).data("questionId"),e=M8(t);$(this).removeClass(Ks.replace(".","")).addClass(Rl.replace(".","")).text("Answered").closest("li").children(".question-correctness-indicator").addClass(e?"correct":e==null?"unanswered":"incorrect")}):$(".score-container").hide(),window.pageSpecific.embeddedQuiz?$(In).one("click",rb):$(In).on("click",tb)}function M8(t){var e=null;Fx(t);var r=$("input[id^=qq"+t+"-answer]:checked"),n=window.pageSpecific.questionToData[t];r.closest("li").addClass("selected-answer"),r.length&&r.val()!=n.answer?(r.parent().addClass("incorrect-answer"),e=!1):r.length&&(e=!0),$("#qq"+t+"-answer"+n.answer).parent().addClass("correct-answer");var i=n["reason"+r.val()];return i&&($("#check-"+t+"-button").siblings(".answer-reason").removeClass("gone").text(i).attr("data-markdown",""),fi.trigger("CHS.Utils.markdown:setup")),$r=$(".multiple-choice-option:checked").length,$(xo).html($r),Ts=$r-$(".incorrect-answer").length,$($f).html(Ts),e}function Uwe(){$r=window.pageSpecific.numAnswered,Au=window.pageSpecific.numQuestions,$(".multiple-choice-option").on("change",function(){var t=$(this).data("questionId");_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay)?$("#check-"+t+"-button").removeAttr("disabled"):($r=$(".multiple-choice-option:checked").length,$(xo).html($r))}),_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay)?$(Ks).on("click",function(){var t=$(this).data("questionId");qwe(t),U8(t),$(this).removeClass(Ks.replace(".","")).addClass(Rl.replace(".","")).text("Answered")}):$(".score-container").hide(),window.pageSpecific.embeddedQuiz?$(In).one("click",rb):$(In).on("click",tb)}function $we(t){var e=$(t),r=$(".qotd-stats-display");e.insertAfter(r)}function Bwe(t){t&&($(".streak").removeClass("hidden"),$(".streak-num").text(t),t==1?$(".streak").attr("title","You've correctly answered "+t+" day in a row!").tooltip("fixTitle"):$(".streak").attr("title","You've correctly answered "+t+" days in a row!").tooltip("fixTitle"))}function U8(t){var e=$("input[id^=qq"+t+"-answer]:checked"),r=window.pageSpecific.questionToData[t];Mi.send({method:"record_stats",app:"quiz",data:{selected_answer:e.val(),assignment_id:window.pageSpecific.assignmentID,question_id:t,qotd_user_identifier:window.pageSpecific.QOTDUserIdentifier},success:function(n){$we(n.html),Bwe(n.streak),fi.trigger("utils:charts:setup")},error:function(n){window.toastr.error("Something went wrong, refresh and try again.")}})}function qwe(t){Fx(t);var e=$("input[id^=qq"+t+"-answer]:checked"),r=window.pageSpecific.questionToData[t];e.closest("li").addClass("selected-answer"),e.val()!=r.answer?(e.parent().addClass("incorrect-answer"),$(".question-correctness-indicator").addClass("incorrect")):$(".question-correctness-indicator").addClass("correct"),$("#qq"+t+"-answer"+r.answer).parent().addClass("correct-answer");var n=r["reason"+e.val()];n&&($("#check-"+t+"-button").siblings(".answer-reason").removeClass("gone").text(n).attr("data-markdown",""),fi.trigger("CHS.Utils.markdown:setup")),$r=$(".multiple-choice-option:checked").length,$(xo).html($r),Ts=$r-$(".incorrect-answer").length,$($f).html(Ts)}function jwe(){$(".multiple-choice-option:checked").attr("checked",!1),$(".correct-answer").removeClass("correct-answer"),$(".incorrect-answer").removeClass("incorrect-answer"),$(".selected-answer").removeClass("selected-answer"),$(".correct").removeClass("correct"),$(".incorrect").removeClass("incorrect"),$(".unanswered").removeClass("unanswered"),$(".answer-reason").addClass("gone").empty(),$(".multiple-choice-option:checked").prop("checked",!1),$(xo).html(0),$($f).html(0),$r=0,Ts=0,$(In).removeClass("btn-main-orange").addClass("btn-main").text("Submit"),window.pageSpecific.embeddedQuiz?$(In).one("click",rb):$(In).on("click",tb),$(Rl).addClass(Ks.replace(".","")).removeClass(Rl.replace(".","")).text("Check"),_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay)||$(".score-container").hide(),B8()}function Px(){$(".multiple-choice-option").on("change",function(){var t=$(this),e=t.data("questionId"),r=t.is(":focus");$(Mf).filter(":not([disabled])").addClass("loading").attr("disabled",!0),Mi.send({method:"track_quiz_answer",app:"quiz",data:{attempt_id:window.pageSpecific.assignmentAttemptID,question_id:e,answer_idx:t.val()},success:function(n){$(Mf).filter(".loading").removeClass("loading").removeAttr("disabled"),r&&t.trigger("focus"),n.status!="ok"?(window.toastr.error(n.msg),t.prop("checked",!1)):_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay)?$("#check-"+e+"-button").removeAttr("disabled"):($r=$(".multiple-choice-option:checked").length,$(xo).html($r))},error:function(n){$(Mf).filter(".loading").removeClass("loading").removeAttr("disabled"),window.toastr.error("Something went wrong, refresh and try again."),t.prop("checked",!1)}})})}function k8(){var t=$(".prism-highlight.code-select").find(".line-numbers");t.each(function(e,r){var n=$(r),i=n.closest(".prism-highlight.code-select"),a=i.data("questionId"),s=i.data("selectedAnswer"),o=i.data("correct"),c=i.data("blockRanges")||"",l=[];c&&(l=c.split(",").map(function(x){var I=x.trim().split("-");return I.length===2?{start:parseInt(I[0]),end:parseInt(I[1])}:{start:parseInt(I[0]),end:parseInt(I[0])}})),eb(n,l,"radio");var f=n.find("code");if(s>=0){var g=f.find(".code-block").eq(s).attr("aria-checked","true").addClass("selected-block").attr("tabindex","0");o!=null&&g.addClass(o?"correct-answer":"incorrect-answer")}else f.find(".code-block").first().attr("tabindex","0");var m=null;f.on("focus",".code-block",function(){m=this}),f.on("focusin",function(x){var I=f.find(".code-block"),A=I.filter('[aria-checked="true"]');if(x.relatedTarget&&!n[0].contains(x.relatedTarget)){var F=A.length?A.last():I.last();I.attr("tabindex","-1"),F.attr("tabindex","0").trigger("focus")}}),f.on("click",".code-block",function(x){var I=f.find(".code-block"),A=$(this);I.attr("aria-checked","false").attr("tabindex","-1").removeClass("selected-block"),A.attr("aria-checked","true").attr("tabindex","0").addClass("selected-block"),m=this,I8(A.data("blockIndex"),a)});var y=_.debounce(function(x,I){I8(x,I)},250);f.on("keydown",".code-block",function(x){var I=$(this),A=f.find(".code-block"),F=A.index(I),X;switch(x.key){case"ArrowUp":case"ArrowLeft":F===0?X=A.eq(A.length-1):X=A.eq(F-1);break;case"ArrowDown":case"ArrowRight":F===A.length-1?X=A.eq(0):X=A.eq(F+1);break;case" ":case"Enter":I.trigger("click"),x.preventDefault();return}X&&X.length&&(A.attr("tabindex","-1").attr("aria-checked","false").removeClass("selected-block"),X.attr("tabindex","0").attr("aria-checked","true").addClass("selected-block").trigger("focus"),y(X.data("blockIndex"),a),x.preventDefault())})})}function I8(t,e){Mi.send({method:"track_quiz_answer",app:"quiz",data:{attempt_id:window.pageSpecific.assignmentAttemptID,question_id:e,answer_idx:t},success:function(r){r.status!="ok"?window.toastr.error(r.msg):_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay)?$("#check-"+e+"-button").removeAttr("disabled"):($r=$('.code-block[aria-checked="true"]').length,$(xo).html($r))},error:function(r){window.toastr.error("Something went wrong, refresh and try again.")}})}function $8(){$(Ks).on("click",function(){var t=$(this),e=t.data("questionId");t.addClass("spinning"),Fx(e),$(Mf).filter(":not([disabled])").addClass("loading").attr("disabled",!0);var r,n;Mi.send({method:"finalize_quiz_answer",app:"quiz",data:{attempt_id:window.pageSpecific.assignmentAttemptID,question_id:e},success:function(i){if(t.removeClass("spinning"),$(Mf).filter(".loading").removeClass("loading").removeAttr("disabled"),i.status=="ok"){if(t.removeClass(Ks.replace(".","")).addClass(Rl.replace(".","")).text("Answered"),i.reason&&(t.siblings(".answer-reason").removeClass("gone").text(i.reason).attr("data-markdown",""),fi.trigger("CHS.Utils.markdown:setup")),$r=$(Rl).length,$(xo).html($r),r=$("#qq"+e+"-answer"+i.selectedAnswer).parent(),n=$("#qq"+e+"-label"),i.correct){r.addClass("correct-answer"),n.find(".selected-block").addClass("correct-answer");var a=t.closest("li").find(".question-correctness-indicator");if(a.length){a.addClass("correct");var s=a[0].getBoundingClientRect();dSe(s)}}else{r.addClass("incorrect-answer"),n.find(".selected-block").addClass("incorrect-answer");var o=t.closest("li").find(".question-correctness-indicator");o.length&&o.addClass("incorrect"),i.correctAnswer!=null&&$("#qq"+e+"-answer"+i.correctAnswer).parent().addClass("correct-answer")}n.addClass("finalized-qq").find(".code-block").attr({tabindex:-1,"aria-disabled":"true"}),r.parent("li").addClass("selected-answer"),t.closest("li").children(".question-correctness-indicator").addClass(i.correct?"correct":"incorrect"),Ts=$r-$(".incorrect-answer").length,$($f).html(Ts),i.finishedQuiz&&Pl({student_assignment_id:window.pageSpecific.studentAssignmentID,assignment_attempt_id:window.pageSpecific.assignmentAttemptID,submission_type:si.AssignmentAttempt.QUESTIONS_COMPLETED},function(){var c={href:window.pageSpecific.nextUrl};$.each($(In)[0].attributes,function(f,g){c[g.nodeName]=g.nodeValue});var l=$("<a>",c).append($(In).contents());$(In).off("click",Lx).replaceWith(l)})}else Wwe(e),window.toastr.error(i.msg)},error:function(i){t.removeClass("spinning"),$(Mf).filter(".loading").removeClass("loading").removeAttr("disabled"),window.toastr.error("Something went wrong, refresh and try again.")}})})}function Rx(){$(In).on("click",Lx)}function Hwe(){$("#student-retake").on("click",function(){var t=$(this);t.attr("disabled","disabled"),Mi.send({method:"create_retake",app:"quiz",data:{student_assignment_id:window.pageSpecific.studentAssignmentID},success:function(e){e.status=="ok"?window.location.reload():(Co.error("Could not create a retake!"),t.removeAttr("disabled"))},error:function(){Co.error("Something went wrong!"),t.removeAttr("disabled")}})})}function tb(t){Lx(t,!0)}function Lx(t,e){var r="<p><strong>Are you sure you want to submit?</strong></p>";$r<Au&&(r+="<p>You have answered "+$r+" out of "+Au+" questions.</p>"),r+="<p>No further changes will be allowed and all questions will graded as is.</p>";var n={header:"Confirm Submit",rawHtml:r,button:"Submit",cancelButton:!0};e?n.ok_callback=function(){rb()}:n.ok_callback=function(){_g(),Pl({student_assignment_id:window.pageSpecific.studentAssignmentID,assignment_attempt_id:window.pageSpecific.assignmentAttemptID,submission_type:si.AssignmentAttempt.CLICKED_SUBMIT},function(){window.location.reload()})},Ff(n)}function rb(){var t=_.includes(si.AssignmentAttempt.SCORE_SHOWN_IMMEDIATELY,window.pageSpecific.quizResultDisplay);Object.keys(window.pageSpecific.questionToData).forEach(function(e){var r;(!t||$("#check-"+e+"-button"+Ks).length)&&(r=M8(e),$("#qq"+e+"-correctness-indicator").addClass(r?"correct":r==null?"unanswered":"incorrect"))}),Ts=$(".correct-answer .multiple-choice-option:checked").length,$($f).html(Ts),$(xo).html(Au),$(".score-container").show(),$(Ks).removeClass(Ks.replace(".","")).addClass(Rl.replace(".","")).text("Answered"),$(In).removeClass("btn-main").addClass("btn-main-orange").text("Reset").one("click",jwe).off("click",tb)}function Gwe(){if($("#problem-sidebar").length){var t=new O8(null,{isQuiz:!0});t.toggleSidebar(),$("body").on("click","#problem-sidebar.minimized .sidebar-nav-tab",function(){$($(this).attr("href")).tab("show"),t.toggleSidebar()});var e=!1;$('#open-toggle, a[href="#sidebar-content-tab"]').on("click",function(){e=P8(window.pageSpecific.pageUserID,e)})}}function zwe(){$(Iwe).modal({backdrop:"static",show:!0}),$(".start-quiz-btn").on("click",function(){var t=$(this);fi.trigger("utils:disableButton",t),Mi.send({method:"exit_waiting_room",app:"quiz",data:{attempt_id:window.pageSpecific.assignmentAttemptID,start_time:window.moment.tz(window.pageSpecific.codehsTimezone).format(X0)},success:function(e){e.status=="ok"?location.reload():(fi.trigger("utils:enableButton",t),window.toastr.error(e.msg))},error:function(e){window.toastr.error("Something went wrong, refresh and try again.")}})})}function Nx(t,e){var r=$(Dwe),n=$(Dx);e&&(n.off("click",Nx).hide(),!r.is(":hidden"))||r.toggle({width:"toggle",complete:function(){n.toggleClass("collapsed",r.is(":hidden"))}})}function Tx(){B8(),$(".timed-quiz").addClass("quiz-started"),Px(),Rx(),bc||Vwe();var t,e=setInterval(function(){t=Cx(),t<=0&&(clearInterval(e),_g(),Pl({student_assignment_id:window.pageSpecific.studentAssignmentID,assignment_attempt_id:window.pageSpecific.assignmentAttemptID,submission_type:si.AssignmentAttempt.TIME_LIMIT_REACHED},function(){window.location.reload()}))},1e3)}function Vwe(){var t=window.moment.tz(window.pageSpecific.codehsTimezone);bc=t.clone().add(as,"minutes"),Cx(),Mi.send({method:"set_end_time",app:"quiz",data:{attempt_id:window.pageSpecific.assignmentAttemptID,start_time:t.format(X0),end_time:bc.format(X0)},success:function(e){e.status=="ok"?Cx():(_g(),$(".timed-quiz").removeClass("quiz-started"),window.toastr.error("Issue starting quiz, refreshing momentarily"),setTimeout(window.location.reload(),2e3))},error:function(){_g(),$(".timed-quiz").removeClass("quiz-started"),window.toastr.error("Issue starting quiz, refreshing momentarily"),setTimeout(window.location.reload(),2e3)}})}function Cx(){var t=window.moment.tz(window.pageSpecific.codehsTimezone),e=window.moment.duration(bc.diff(t)),r,n,i;return e.asSeconds()<0?(r=0,n=0,i=0):(r=e.seconds(),n=e.minutes(),i=e.hours()),i==0&&(n==1&&r==0||n==0)?Nx(null,!0):$(Dx).show(),$(".timer-secs").html(("0"+r).slice(-2)),$(".timer-mins").html(("0"+n).slice(-2)),$(".timer-hrs").html(i),$("#quiz-timer").show(),e}function _g(){$(".quiz-question-answers label").addClass("disabled").children("input[type=radio]").attr("disabled","disabled"),$(In).attr("disabled","disabled")}function B8(){$(".quiz-question-answers label").removeClass("disabled").children("input[type=radio]").removeAttr("disabled"),$(In).removeAttr("disabled")}function Fx(t){$("#check-"+t+"-button").attr("disabled","disabled"),$("input[id^=qq"+t+"-answer]").attr("disabled","disabled").parent().addClass("disabled")}function Wwe(t){$("#check-"+t+"-button").removeAttr("disabled"),$("input[id^=qq"+t+"-answer]").removeAttr("disabled").parent().removeClass("disabled")}function Kwe(){var t={itemID:window.pageSpecific.itemID,moduleID:window.pageSpecific.moduleID,courseID:window.pageSpecific.courseID,quizID:window.pageSpecific.quizID,numAnswered:window.pageSpecific.numAnswered,numQuestions:window.pageSpecific.numQuestions,numCorrect:window.pageSpecific.numCorrect,makeEditorColumns:window.pageSpecific.makeEditorColumns,pageUserID:window.pageSpecific.pageUserID,pageUserName:window.pageSpecific.pageUserName,studentAssignmentID:window.pageSpecific.studentAssignmentID};F8(t)}var ns,yc,Eo,_c,Uf,Ws=!1,K0,Ex=!1,J0=null,Q0=null;function Xwe(){var t;window.useWindowFirebase?t=yc.root.child(".info/connected"):t=yc.root().child(".info/connected"),t.on("value",function(e){var r=Ws;Ws=e.val()===!0,Ws&&!r?(console.log("Firebase connected - quiz game can receive updates"),$(".firebase-connection-error").remove(),bg()):!Ws&&r&&(console.warn("Firebase disconnected - quiz game updates may be delayed"),xx(),bg())}),K0=setInterval(function(){yc&&!Ws&&yc.once("value",function(e){Ws||(console.log("Firebase connection restored via periodic check"),Ws=!0,$(".firebase-connection-error").remove(),bg())},function(e){console.error("Firebase periodic check failed:",e),Ws&&(Ws=!1,xx(),bg())})},1e4)}function xx(){$(".firebase-connection-error").remove();var t='<div class="firebase-connection-error alert alert-warning" style="margin: 10px; text-align: center;"><strong>Connection Issue:</strong> Unable to connect to quiz game server. The quiz may not start automatically. <button class="btn btn-sm btn-primary" onclick="location.reload()">Refresh Page</button></div>';$(".quiz-game-waiting-room").prepend(t)}function bg(){if($(".firebase-connection-status").remove(),Ws){var t='<div class="firebase-connection-status" style="position: absolute; top: 10px; right: 10px; background: #d4edda; color: #155724; padding: 5px 10px; border-radius: 3px; font-size: 12px; border: 1px solid #c3e6cb;"><span class="glyphicon glyphicon-ok-sign"></span> Connected</div>';$(".quiz-game-waiting-room").append(t)}else{var t='<div class="firebase-connection-status" style="position: absolute; top: 10px; right: 10px; background: #f8d7da; color: #721c24; padding: 5px 10px; border-radius: 3px; font-size: 12px; border: 1px solid #f5c6cb;"><span class="glyphicon glyphicon-exclamation-sign"></span> Disconnected</div>';$(".quiz-game-waiting-room").append(t)}}function q8(){K0&&(clearInterval(K0),K0=null)}function Ywe(){Zwe(),lSe($(".bee-container .bee")),Uf=!1,yc=R8("/gametime/timer",window.pageSpecific.isLocal,window.pageSpecific.sectionID,!1),Xwe(),setTimeout(function(){bg()},1e3),yc.on("value",function(t){if(!t.val()||t.val().assignment_id!=window.pageSpecific.assignmentID){Ex=!0;return}if(t.val().start_time)Eo=t.val().question_id,!ns||_c!=t.val().start_time?(_c=t.val().start_time,as=parseInt(t.val().time_limit),window.pageSpecific.previewDelay<=0&&Ll(),Ux(),$(".quiz-game-waiting-room").addClass("hidden"),$(".quiz-header").removeClass("hidden"),$("#editor-bottombar-nav").hide()):t.val().time_limit!=as&&(as=parseInt(t.val().time_limit),Ll()),t.val().students&&window.pageSpecific.isTeacher&&eSe(t.val().students.num_answered,t.val().students.num_joined);else if(t.val().stopped)Mx();else if(t.val().show_leaderboard&&(!window.pageSpecific.isTeacher||!$("#leaderboard").is(":visible"))){var e=t.val().quiz_completed;kx(!1,e,function(){$("#leaderboard").fadeIn(),$(".quiz-game-waiting-room").addClass("hidden"),$("#quiz-question-div").addClass("hidden"),$("#answer-status").addClass("hidden"),$(".quiz-header").removeClass("hidden"),e&&($("#quiz-completed").removeClass("hidden"),$("#next-assignment").removeClass("hidden"),$("#editor-bottombar-nav").fadeIn(750))})}}),$("#start-game").on("click",function(){var t=$(this).data("quiz-completed"),e=$(this).data("show-leaderboard");if(e){$("#answer-breakdown").addClass("hidden"),$("#answer-status").addClass("hidden"),$("#leaderboard").hide(),kx(!0,t,function(){$("#leaderboard").fadeIn(),$("#start-game").data("show-leaderboard",!1),$("#quiz-question-div").addClass("hidden"),t&&($("#next-assignment").removeClass("hidden"),$("#quiz-completed").removeClass("hidden"),$("#start-game").addClass("hidden"),$("#top-bar-next-question").addClass("hidden"),$("#section-leaderboard").removeClass("hidden"),$("#editor-bottombar-nav").fadeIn(750),fi.trigger("eventtracking:track_event",{name:"Completed QuizBuzz"}))});return}Ex=!1,Eo=$(this).data("question-id"),$(".quiz-teacher-controls").addClass("hidden"),$(".quiz-game-waiting-room").addClass("hidden"),$(".quiz-header").removeClass("hidden"),$("#editor-bottombar-nav").hide(),tSe(),Ax(),fi.trigger("eventtracking:track_event",{name:"Started QuizBuzz"})}),$("#add-time").on("click",function(){$(this).trigger("blur"),j8()}),$("#push-to-students").on("click",function(){Ax(!0)}),window.pageSpecific.isTeacher?Jwe():Qwe()}function Ax(t){Mi.send({method:"push_quiz_game_to_students",app:"quiz",data:{assignment_id:window.pageSpecific.assignmentID,section_id:window.pageSpecific.sectionID,reset_timer:t}})}function Jwe(){$(".start-quiz-game-btn").on("click",function(){$("#start-game").trigger("click")}),$("#top-bar-next-question").on("click",function(){$(this).trigger("blur"),ns?Mi.send({method:"start_quiz_game_timer",app:"quiz",data:{question_id:Eo,section_id:window.pageSpecific.sectionID,assignment_id:window.pageSpecific.assignmentID,time_limit:0,start_time:_c}}):$("#start-game").trigger("click")});var t={},e=R8("/gametime/"+window.pageSpecific.assignmentID+"/student_activity",window.pageSpecific.isLocal,window.pageSpecific.sectionID,!1);function r(){var a=$("#active-students").children(".student-name").length,s=$(".total-students-count"),o=parseInt(s.text());!isNaN(o)&&a>o&&s.text(a),$(".active-students-count").text(a)}e.on("value",function(a){a.val()&&(Object.entries(a.val()).forEach(function(s){var o=s[0],c=s[1];c.is_active=c.is_active&&c.timestamp>=xu()-60*1e3;var l=t[o]!==void 0&&t[o].is_active;s[1].is_active!=l&&(s[1].is_active?$("#active-students").append('<div class="student-name" data-student-id="'+o+'"><img src="'+c.profile_picture_url+'">'+c.name+"</div>"):$("#active-students").find('.student-name[data-student-id="'+o+'"]').remove()),t[o]=c}),r())});var n=setInterval(function(){Object.entries(t).forEach(function(a){var s=a[0],o=a[1];o.is_active&&o.timestamp<xu()-60*1e3&&(o.is_active=!1,$("#active-students").find('.student-name[data-student-id="'+s+'"]').remove())}),r()},60*1e3);function i(){yc.off("value"),e.off("value"),clearInterval(n),q8(),$("#editor-bottombar-nav").show(),window.removeEventListener("beforeunload",i),$(document).off("turbolinks:before-render",i)}window.addEventListener("beforeunload",i),$(document).on("turbolinks:before-render",i)}function Qwe(){function t(){Mi.send({method:"ping_student_activity",app:"quiz",data:{section_id:window.pageSpecific.sectionID,assignment_id:window.pageSpecific.assignmentID}})}var e=setInterval(t,30*1e3);t();var r=window.pageSpecific.sectionID,n=window.pageSpecific.assignmentID;function i(){yc.off("value"),clearInterval(e),q8(),$("#editor-bottombar-nav").show(),window.removeEventListener("beforeunload",i),$(document).off("turbolinks:before-render",i),Mi.send({method:"ping_student_activity",app:"quiz",data:{section_id:r,assignment_id:n,is_active:!1}})}window.addEventListener("beforeunload",i),$(document).on("turbolinks:before-render",i)}function Zwe(){var t=performance.now();Mi.send({method:"server_time_ms",app:"quiz",data:{},success:function(e){var r=performance.now(),n=r-t,i=e.server_ms+n/2;J0=i,Q0=r},error:function(){J0=null,Q0=null}})}function xu(){return J0!=null&&Q0!=null?J0+(performance.now()-Q0):Date.now()}function eSe(t,e){$("#num-students").text(t+" out of "+e+" students answered"),$("#num-students").removeClass("hidden")}function kx(t,e,r){Mi.send({method:"get_quiz_game_leaderboard",app:"quiz",data:{section_id:window.pageSpecific.sectionID,assignment_id:window.pageSpecific.assignmentID,full_leaderboard:window.pageSpecific.showFullLeaderboard,push_leaderboard:t,quiz_completed:e},success:function(n){$("#leaderboard").html(n.html),r&&r()}})}function tSe(){Mi.send({method:"start_quiz_game_timer",app:"quiz",data:{question_id:Eo,section_id:window.pageSpecific.sectionID,assignment_id:window.pageSpecific.assignmentID,time_limit:window.pageSpecific.timeLimit,start_time:xu()/1e3+window.pageSpecific.previewDelay}})}function j8(){as+=5,Ll(),Mi.send({method:"start_quiz_game_timer",app:"quiz",data:{question_id:Eo,section_id:window.pageSpecific.sectionID,assignment_id:window.pageSpecific.assignmentID,time_limit:as,start_time:_c}})}function Ll(){var t=as*1e3,e=_c*1e3;$(".game-timer-js").removeClass("hidden"),H8(function(){rSe(e+t-xu())},e+t)}function rSe(t){if(t>0){var e=Math.ceil(t/1e3);if(e>60){var r=Math.floor(e/60),n=e%60;$("#timer .timer-text").html(r+":"+("0"+n).slice(-2))}else $("#timer .timer-text").html(e+"s")}else Mx()}function Mx(){ns&&(clearInterval(ns),ns=null),iSe(),$(".game-timer-js").addClass("hidden"),$("#num-students").addClass("hidden")}function H8(t,e){ns&&(clearInterval(ns),ns=null);var r=e-xu();if(r>0){var n=r%1e3;n>0?ns=setInterval(function(){clearInterval(ns),ns=setInterval(t,1e3),t()},n):ns=setInterval(t,1e3)}t()}function iSe(){Mi.send({method:"get_quiz_game_answer",app:"quiz",data:{question_id:Eo,attempt_id:window.pageSpecific.assignmentAttemptID,show_answer_breakdown:window.pageSpecific.isTeacher,save_leaderboard:window.pageSpecific.isTeacher,section_id:window.pageSpecific.sectionID,question_ids:window.pageSpecific.questionIDs,question_answered:Uf,is_demo:window.pageSpecific.isDemo,assignment_id:window.pageSpecific.assignmentID},success:function(t){$("#quiz-question-div").html(t.html);var e=$("#leaderboard").hide();window.pageSpecific.isDemo||e.html("");var r=$(".quiz-game-question"),n=r.data("question-number"),i=r.data("num-questions");if(n&&i){$(".quiz-header .question-counter").text(n+" / "+i);var a=n/i*100;$(".quiz-header .progress-bar-inner").css("width",a+"%")}fi.trigger("CHS.Utils.markdown:setup"),setTimeout(function(){Z0()},100);var s=$(".prism-highlight.code-select").find(".line-numbers");s.each(function(){var o=$(this).closest(".prism-highlight"),c=o.data("blockRanges"),l=[],f=o.data("correctAnswer");Array.isArray(c)&&c.length&&(l=c.map(function(g){var m=g.trim().split("-");return m.length===2?{start:parseInt(m[0]),end:parseInt(m[1])}:{start:parseInt(m[0]),end:parseInt(m[0])}})),eb(o,l,"highlight"),o.find(".code-block").each(function(g,m){$(m).addClass("block-color-"+(g%4+1)),g==f&&$(m).addClass("chs-icon-check correct-answer")}),o.find("code").addClass("annotate-with-icon")}),$("#start-game").data("show-leaderboard",!0),t.next_question_id?($("#start-game").html('<i class="fas fa-step-forward spacing-right-sm"></i> Next'),$("#start-game").data("question-id",t.next_question_id),$("#next-assignment").addClass("hidden"),$("#quiz-completed").addClass("hidden"),window.pageSpecific.isTeacher&&!window.pageSpecific.isDemo&&!Ex&&Ax()):($("#start-game").html('<i class="fas fa-step-forward spacing-right-sm"></i> Finish').data("quiz-completed",!0),window.pageSpecific.isTeacher&&!window.pageSpecific.isDemo&&nSe()),$(".quiz-teacher-controls").removeClass("hidden"),$("#your-points").removeClass("hidden"),$("#answer-status").removeClass("hidden")}})}function nSe(){Mi.send({method:"submit_quiz_game_assignments_for_section",app:"quiz",data:{assignment_id:window.pageSpecific.assignmentID,section_id:window.pageSpecific.sectionID}})}function Ux(t){t=t||0;var e=3;Ws||(console.warn("Attempting to load quiz question while Firebase is disconnected"),xx()),Uf=!1;var r=$("#leaderboard").hide();window.pageSpecific.isDemo||r.html(""),$("#answer-breakdown").addClass("hidden"),$("#answer-status").addClass("hidden"),$("#correct-answer").addClass("hidden"),$("#incorrect-answer").removeClass("hidden"),$("#quiz-question-div").removeClass("hidden").html(""),Mi.send({method:"get_quiz_game_question",app:"quiz",data:{question_id:Eo,section_id:window.pageSpecific.sectionID,attempt_id:window.pageSpecific.assignmentAttemptID,question_number:window.pageSpecific.questionIDs.indexOf(Eo)+1,num_questions:window.pageSpecific.numQuestions,is_demo:window.pageSpecific.isDemo,assignment_id:window.pageSpecific.assignmentID},success:function(n){$("#quiz-question-div").html(n.html),D8($(".bee-circle-container .bee"),4);var i=$(".quiz-game-question"),a=i.data("question-number"),s=i.data("num-questions");if(a&&s){$(".quiz-header .question-counter").text(a+" / "+s);var o=a/s*100;$(".quiz-header .progress-bar-inner").css("width",o+"%")}if(fi.trigger("CHS.Utils.markdown:setup"),setTimeout(function(){Z0()},100),window.pageSpecific.isTeacher?window.pageSpecific.isDemo?$(".quiz-question-answer").on("click",function(){Mx()}).on("keydown",function(f){(f.code==="Enter"||f.code==="Space")&&(f.preventDefault(),$(this).trigger("click"))}):$(".quiz-question-answer").on("click",function(){Co.info("You cannot answer questions as a teacher.")}).on("keydown",function(f){(f.code==="Enter"||f.code==="Space")&&(f.preventDefault(),$(this).trigger("click"))}):(aSe(),$("#your-points").addClass("hidden")),n.question_answered&&(Uf=!0,n.points&&($("#points-added").text("+"+n.points+" points"),$("#correct-answer").removeClass("hidden"),$("#incorrect-answer").addClass("hidden")),n.total_score&&$("#points").text(n.total_score)),window.pageSpecific.previewDelay>0){var c=_c*1e3;if(c>xu()){$(".quiz-question-answer").hide(),$(".quiz-question-answers").addClass("hidden"),$("#top-bar-next-question").hide(),H8(function(){if(c>xu()){var f=Math.ceil((c-xu())/1e3),g;if(f>60){var m=Math.floor(f/60),y=f%60;g=m+":"+("0"+y).slice(-2)}else g=f;var x=$(".js-preview-countdown .timer");x.text(g),x.addClass("fade-out"),setTimeout(function(){x.removeClass("fade-out")},500)}else{var I=$(".quiz-question-description.code-select").length>0;I||($(".quiz-question-answer").show(),$(".quiz-question-answers").removeClass("hidden")),$("#top-bar-next-question").show(),$(".js-preview-countdown").hide(),cSe(),_x(),Ll(),Z0()}},c),$(".js-preview-countdown").show();var l=$(".js-preview-countdown .bee");D8(l,window.pageSpecific.previewDelay),l.removeClass("hidden")}else _x(),Ll()}else _x()},error:function(n,i,a){if(console.error("Failed to load quiz question:",a),t<e){console.log("Retrying loadQuizGameQuestion (attempt "+(t+1)+")");var s=2e3*(t+1);setTimeout(function(){Ux(t+1)},s)}else console.error("All retry attempts failed for loadQuizGameQuestion"),$("#quiz-question-div").html('<div class="quiz-error-message" style="text-align: center; padding: 20px;"><h3>Unable to load question</h3><p>There was a problem loading the quiz question. Please try refreshing the page.</p><button class="btn btn-primary" onclick="location.reload()">Refresh Page</button></div>'),$(".quiz-game-waiting-room").addClass("hidden"),$(".quiz-header").removeClass("hidden"),Co.error("Failed to load quiz question after multiple attempts. Please refresh the page.")}})}function aSe(){$(".quiz-question-answer").on("click",function(){$(".quiz-question-answers").addClass("hidden"),$(".answered-spinner").removeClass("hidden");var t=_c*1e3;Uf=!0,Mi.send({method:"finalize_quiz_game_answer",app:"quiz",data:{question_id:Eo,attempt_id:window.pageSpecific.assignmentAttemptID,answer_idx:$(this).data("answer-idx"),time_taken:(xu()-t)/1e3,section_id:window.pageSpecific.sectionID,student_assignment_id:window.pageSpecific.studentAssignmentID,assignment_id:window.pageSpecific.assignmentID},success:function(e){$("#points").text(e.total_score),e.points_earned&&($("#points-added").text("+"+e.points_earned+" points"),$("#correct-answer").removeClass("hidden"),$("#incorrect-answer").addClass("hidden"))}})}).on("keydown",function(t){(t.code==="Enter"||t.code==="Space")&&(t.preventDefault(),$(this).trigger("click"))})}function _x(){var t=$(".prism-highlight.code-select").find(".line-numbers");t.each(function(){var e=$(this).closest(".prism-highlight"),r=e.data("blockRanges"),n=[];Array.isArray(r)&&r.length&&(n=r.map(function(i){var a=i.trim().split("-");return a.length===2?{start:parseInt(a[0]),end:parseInt(a[1])}:{start:parseInt(a[0]),end:parseInt(a[0])}})),eb(e,n,"button"),e.find(".code-block").each(function(i,a){$(a).addClass("block-color-"+(i%4+1))}),$(".code-block").on("click",function(){$(".quiz-question-answer").eq($(this).data("blockIndex")).trigger("click")}).on("keydown",function(i){(i.code==="Enter"||i.code==="Space")&&(i.preventDefault(),$(".quiz-question-answer").eq($(this).data("blockIndex")).trigger("click"))})})}function sSe(){Uf=!1,$(".start-quiz-game-btn").on("click",function(){$("#start-game").trigger("click")}),$("#start-game").on("click",function(){var e=$(this).data("show-leaderboard"),r=$(this).data("quiz-completed");if(e){oSe(),r&&($("#quiz-completed").removeClass("hidden"),$("#start-game").addClass("hidden"),$("#top-bar-next-question").addClass("hidden"),$("#demo-completed").removeClass("hidden"));return}Eo=$(this).data("question-id"),$(".quiz-teacher-controls").addClass("hidden"),$(".quiz-game-waiting-room").addClass("hidden"),$(".quiz-header").removeClass("hidden"),_c=Date.now()/1e3+window.pageSpecific.previewDelay,as=window.pageSpecific.timeLimit,window.pageSpecific.previewDelay<=0&&Ll(),Ux()}),$("#add-time").on("click",function(){$(this).trigger("blur"),j8()}),$("#top-bar-next-question").on("click",function(){$(this).trigger("blur"),ns?(as=0,Ll()):$("#start-game").trigger("click")});var t;$(window).on("resize",function(){clearTimeout(t),t=setTimeout(function(){$(".quiz-game-question").length&&Z0()},250)})}function oSe(){var t,e;$("#leaderboard").find(".quiz-game-leaderboard-entry").each(function(){e=$(this).find(".leaderboard-score"),t=parseInt(e.text()),t+=Math.floor(Math.random()*1e3),e.text(t)});var r=$("#leaderboard").find(".quiz-game-leaderboard-entry");r.sort(function(n,i){var a=parseInt($(n).find(".leaderboard-score").text()),s=parseInt($(i).find(".leaderboard-score").text());return s-a}),r.each(function(n){var i=$(this).find(".fa-trophy");if(n<3){i.remove();var a=$('<i class="fas fa-trophy spacing-right trophy-'+(n+1)+'"></i>');$(this).find(".leaderboard-score").before(a)}else i.remove()}),$("#leaderboard").find(".quiz-game-leaderboard").append(r),$("#leaderboard").fadeIn(),$("#start-game").data("show-leaderboard",!1),$("#quiz-question-div").addClass("hidden")}function uSe(){$(".control-button").on("click",function(){var e=$(".quiz-game-question.active").removeClass("active");$(this).hasClass("prev")?e=e.prev(".quiz-game-question"):$(this).hasClass("next")&&(e=e.next(".quiz-game-question")),e.addClass("active"),$(".current-question-number").text($(".quiz-game-question").index(e)+1),e.prev(".quiz-game-question").length===0?$(".control-button.prev").prop("disabled",!0):$(".control-button.prev").prop("disabled",!1),e.next(".quiz-game-question").length===0?$(".control-button.next").prop("disabled",!0):$(".control-button.next").prop("disabled",!1)});var t=$(".prism-highlight.code-select").find(".line-numbers");t.each(function(){var e=$(this).closest(".prism-highlight"),r=e.data("blockRanges"),n=[],i=e.data("correctAnswer");Array.isArray(r)&&r.length&&(n=r.map(function(a){var s=a.trim().split("-");return s.length===2?{start:parseInt(s[0]),end:parseInt(s[1])}:{start:parseInt(s[0]),end:parseInt(s[0])}})),eb(e,n,"highlight"),e.find(".code-block").each(function(a,s){$(s).addClass("block-color-"+(a%4+1)),a==i&&$(s).addClass("chs-icon-check correct-answer")}),e.find("code").addClass("annotate-with-icon")})}fi.on("quiz:setup",Kwe);fi.on("quiz:attemptSetup",Nwe);fi.on("quiz:qotdSetup",Fwe);fi.on("quiz:qotdLoggedOutAttemptSetup",Uwe);fi.on("quiz:mockAttemptSetup",Mwe);fi.on("quiz:waitingRoomSetup",zwe);fi.on("quiz:setupQuizSidebar",Gwe);fi.on("quiz:setupStudentRetake",Hwe);fi.on("quiz:setupQuizGame",Ywe);fi.on("quiz:setupDemoQuizGame",sSe);fi.on("quiz:quizGameLeaderboard",kx);fi.on("quiz:setupQuizGamePreviewSidepeek",uSe);function $x(){return wx}function Bx(){return L8}function qx(){return N8}function G8(){return V0}function Z0(){var t=$(".quiz-question-description"),e=$(".quiz-question-answers"),r=$(".quiz-question-answer");if(!t.length||!e.length)return;var n=window.innerHeight,i=60,a=70,s=n-i-a;function o(){var A=t[0].scrollHeight,F=e[0].scrollHeight,X=A+F+25;return X<=s}if(!o())for(var c=3.5,l=2.5,f=2,g=1.5;!o()&&c>f;){c-=.2;var m=18,y=Math.max(m,c*10);t.css("font-size","clamp("+m+"px, "+c+"vmin, "+y+"px)"),l=Math.max(g,c-.5);var x=16,I=Math.max(x,l*10);$(".quiz-question-wrapper .quiz-question-answer").each(function(){$(this).css("font-size","clamp("+x+"px, "+l+"vmin, "+I+"px)")})}setTimeout(function(){r.each(function(){var A=$(this);if(A[0].scrollWidth>A[0].clientWidth)for(var F=2.5,X=1.2,de=16;A[0].scrollWidth>A[0].clientWidth&&F>X;){F-=.2;var N=Math.max(de,F*10);A.css("font-size","clamp("+de+"px, "+F+"vmin, "+N+"px)"),A.find("code, pre").css("font-size","clamp("+de+"px, "+F+"vmin, "+N+"px)")}})},150)}var Ol=null;function D8(t,e){e=e||1;var r=Date.now(),n=100,i=3,a=15,s=.06;Ol&&(cancelAnimationFrame(Ol),Ol=null);function o(){var c=(Date.now()-r)/1e3,l=c/e*Math.PI*2%(Math.PI*2),f=(c/e+s)*Math.PI*2%(Math.PI*2),g=n+Math.sin(l*i)*a,m=Math.sin(l)*g,y=-Math.cos(l)*g,x=n+Math.sin(f*i)*a,I=Math.sin(f*i)*i*a,A=Math.cos(f)*x+Math.sin(f)*I,F=Math.sin(f)*x-Math.cos(f)*I,X=Math.atan2(F,A)+Math.PI/2;t.css({transform:"translate3d("+m+"px, "+y+"px, 0) rotate("+X+"rad)"}),Ol=requestAnimationFrame(o)}o()}function cSe(){Ol&&(cancelAnimationFrame(Ol),Ol=null)}function lSe(t){var e=50,r=50,n=(Math.random()-.5)*.3,i=(Math.random()-.5)*.3,a=90;function s(){e+=n,r+=i,n+=(Math.random()-.5)*.04,i+=(Math.random()-.5)*.04,n=Math.max(Math.min(n,.4),-.4),i=Math.max(Math.min(i,.4),-.4),(e<=5||e>=95)&&(n*=-.9,e=Math.max(5,Math.min(e,95))),(r<=10||r>=90)&&(i*=-.9,r=Math.max(10,Math.min(r,90)));var o=Math.atan2(i,n)*(180/Math.PI)+90,c=o-a;c>180&&(c-=360),c<-180&&(c+=360),a+=c*.05,t.css({left:e+"%",top:r+"%",transform:"rotate("+a+"deg)"}),requestAnimationFrame(s)}requestAnimationFrame(s)}function dSe(t){for(var e=50,r=["#8cc63e","#27a9e1","#fbaf3f","#ffdd17","#ff99c6"],n=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop,a=0;a<e;a++){var s=document.createElement("div");s.className="confetti";var o=Math.random()*10+5;s.style.width=o+"px",s.style.height=Math.random()*5+3+"px",s.style.backgroundColor=r[Math.floor(Math.random()*r.length)];var c=60,l=Math.random()*c-c/2;s.style.left=t.left+n+t.width*.5+l+"px",s.style.top=t.top+i-10-Math.random()*20+"px",s.style.transform="rotate("+Math.random()*360+"deg)";var f=Math.random()*2+1.5;s.style.animationDuration=f+"s";var g=Math.floor(Math.random()*3);s.classList.add("confetti-swing-"+g),s.style.opacity=Math.random()*.3+.7,document.body.appendChild(s),setTimeout(function(m){return function(){m.parentNode&&m.parentNode.removeChild(m)}}(s),f*1e3)}}z8.exports={setup:F8,preview:Lwe,getItemId:$x,getModuleId:Bx,getCourseId:qx,answeredQuestion:Ox}});var K8=R((r2e,W8)=>{"use strict";var fSe=Ri().removeComments,pSe=Lc();function wc(t,e){this.editor=t,this.code=e.code||""}wc.prototype.checkForLoopFormat=function(t,e){var r=this,n=/for\s*\((.*)\)/gi,i=/\s*int\s+.*/g,a=t.match(n),s;if(a){var o=a[0];if(!o.match(i))return s="For loop requires `int` at the start of the initialization field",r.createError(s,e),!0}return!1};wc.prototype.checkFunctionDeclare=function(t,e){var r=this,n=/function (.*?\(.*?\))/,i=t.match(n),a;return i?(a="Don't declare your method with `function`. Use `private void` instead.",r.createError(a,e),!0):!1};wc.prototype.checkFunctionReturnType=function(t,e){var r=this,n=/(private|public|protected) *?(\w*?) *?\w*?\(.*?\)/,i=t.match(n);if(i&&i[2]===""){var a="You for got the return type, usually it's `void`such as `public void myFunction()`.";return r.createError(a,e),!0}return!1};wc.prototype.checkVarDeclare=function(t,e){var r=this,n=/(\s*?var\s+?\w*?(|=\s*?.*?)|for\s*?\(\s*?var\s*?)/,i=t.match(n);if(i){var a="Don't declare your variable with `var`. Use a primitive like `int` instead.";return r.createError(a,e),!0}return!1};wc.prototype.checkClassExtend=function(t){var e=this,r=!1,n=/.*?public class .*?\{/g,i=/extends ((|Super|Ultra)Karel)/,a=/extends (Super|Ultra)Karel/,s=/\s*?turn(Around|Right)\(\)/,o=/void\s*?turn(Around|Right)\(\)/,c=t.match(n);if(c)for(var l=0;l<c.length;l++){var f=c[l],g;if(f.match(i)||(g="You need extend you class with `Karel`, e.g. `extends Karel`",e.createError(g,l),r=!0),!f.match(a)){var m=t.match(s),y=t.match(o);m&&!y&&(g="You need to extend `SuperKarel` to use `turnRight` and `turnAround`",e.createError(g,l))}}return r};wc.prototype.createError=function(t,e){e=e+1,pSe.show({editor:this.editor,message:t,lineNumber:e,progtype:"java-karel",langType:"java",errorDisplay:"errorList",log:!1})};wc.prototype.hasErrors=function(){var t=this,e=!1,r=fSe(this.code);t.checkClassExtend(r)&&(e=!0),r=r.split(`
`);for(var n=0;n<r.length;n++){var i=r[n],a=n;(t.checkForLoopFormat(i,a)||t.checkFunctionDeclare(i,a)||t.checkVarDeclare(i,a)||t.checkFunctionReturnType(i,a))&&(e=!0)}return e};W8.exports=wc});var Y8=R((i2e,X8)=>{var hSe=Pi().fileHasImageExtension;function ku(t){var e=this;e.editor=t;var r={apiKey:"AIzaSyDZ7uKqDiym4LLCffAITm-IcYpQie3i3Ew",authDomain:"chs-collab.firebase.com",databaseURL:"https://collaborate-fcd82.firebaseio.com/"};window.firebase=firebase;var n=firebase.apps.filter(function(a){return a.name.startsWith("karel-collaborate")});if(n.length)e.firebaseInstance=n[0];else{var i="karel-collaborate-"+(window.pageSpecific.itemID||0)+Math.floor(Math.random()*1e5).toString();e.firebaseInstance=window.firebase.initializeApp(r,i)}e.initialized=!1}ku.prototype.getRef=function(t){var e=window.firebase.database(this.firebaseInstance).ref();return t?e=e.child(t):e=e.push(),e};ku.prototype.initialize=function(t,e){var r=this;r.firepadRef=r.getRef(e),r.fileRef=r.firepadRef.child("files"),r.ace=t;var n=window.userData.id,i=window.pageSpecific.codeUserID.toString(),a=t.editor.getValue();t.editor.setValue(""),r.firepad=Firepad.fromACE(r.firepadRef,t.editor,{userId:n,defaultText:""}),this.firepadRef.child("history").once("value",function(s){s.val()===null&&(t.editor.setValue(a,1),t.editor.session.getUndoManager().reset())}),n!==i&&t.editor.on("change",function(s){var o=s.lines.join(`
`),c=o===r.prevContents&&s.action==="remove";c||(r.editor.code[r.activeFilename]=t.editor.getValue(),r.activeFilename&&hSe(r.activeFilename)&&$("#image-asset img").attr("src",t.editor.getValue())),r.prevContents=t.editor.getValue()}),e&&n===i?r.fileRef.once("value",function(s){var o=s.val();if(o){var c=o.filter(function(l){return l.active})[0];r.editor.activeFile=c.name,r.editor.editorColumns.activateFileFirepad(c.name)}r.initialized=!0,r.showUserList(),r.setupFiles()}):(r.initialized=!0,r.showUserList(),r.setupFiles()),this.setupCursorObserver(),$(".powered-by-firepad").remove()};ku.prototype.isLeader=function(){return window.pageSpecific.codeUserID==window.userData.id};ku.prototype.setupFiles=function(){var t=this;t.isLeader()?t.updateFiles():t.fileRef.on("value",function(e){var r=e.val();if(r){for(var n=r.filter(function(o){return o.active})[0],i={},a=0;a<r.length;a++){var s=r[a];i[s.name]=s.active,s.active&&(t.activeFilename=s.name)}t.editor.editorColumns.createFileList(i),t.editor.editorColumns.activateFileFirepad(n.name)}})};ku.prototype.updateFiles=function(){var t=this,e=t.editor.code,r=[];Object.keys(e).forEach(function(n){var i=n.endsWith("/.")?n.slice(0,-1):n;r.push({name:i,active:n===t.editor.activeFile})}),t.fileRef.set(r)};ku.prototype.showUserList=function(){this.avatars||(this.avatars=gSe.fromDiv(this.firepadRef.child("users"),document.getElementById("firepad-avatar-container"),window.userData.id,window.userData.firstName))};ku.prototype.setupCursorObserver=function(){var t=this,e="other-client-cursor-";function r(a){a.forEach(function(s){var o=s.target;o.classList.forEach(function(c){if(c.startsWith(e)){var l=c.replace(e,"#"),f=t.avatars.cursorLabels;Object.values(f).forEach(function(g){g.userData.color===l&&g.update(o)})}})})}var n=$(".ace_layer.ace_marker-layer")[0],i={attributes:!0,subtree:!0};t.cursorObserver=new MutationObserver(r),t.cursorObserver.observe(n,i)};ku.prototype.dispose=function(){this.initialized=!1,this.avatars.dispose(),this.avatars=null,this.firepad.dispose(),$("#firepad-avatar-container").html("")};function wg(t){this.userData=t,this.fadeTimeout=null,this.element=$('<div class="cursor-label">'+t.name+"</div>"),this.element.css("background-color",t.color);var e=this.userData.color.replace("#","");this.cursorSelector=".other-client-cursor-"+e;var r=$(".ace_layer.ace_marker-layer");this.backMarkerLayer=r[0],this.frontMarkerLayer=r[1],this.frontMarkerLayer.appendChild(this.element[0]),this.visible=!0,this.hide()}wg.prototype.hide=function(){this.visible&&(this.element.addClass("label-hidden"),this.element.removeClass("label-visible"),this.visible=!1)};wg.prototype.show=function(){var t=this;clearTimeout(this.fadeTimeout),t.fadeTimeout=setTimeout(function(){t.hide()},2e3),t.visible||(t.element.addClass("label-visible"),t.element.removeClass("label-hidden"),t.visible=!0)};wg.prototype.updatePosition=function(t){var e=!1,r=parseInt(t.getPropertyValue("top")),n=parseInt(t.getPropertyValue("height")),i=parseInt(t.getPropertyValue("left"));if(r=isNaN(n)?r:r+n,!isNaN(r)){var a=r.toString()+"px";this.element.css("top")!==a&&(e=!0,this.element.css("top",a))}if(!isNaN(i)){var s=i.toString()+"px";this.element.css("left")!==s&&(e=!0,this.element.css("left",s))}return e};wg.prototype.update=function(t){t?(this.element.parent()[0]!==this.frontMarkerLayer&&this.frontMarkerLayer.appendChild(this.element[0]),this.updatePosition(t.style)&&this.show()):this.hide()};var gSe=function(){function t(l,f,g,m){var y=this;if(!(y instanceof t))return new t(l,f,g,m);y._ref=l,y._userId=g,y._collaboratorIds=new Set,y._place=f,y._displayName=m,y._firebaseCallbacks=[],y._firebaseOn(l.root.child(".info/connected"),"value",function(x){if(x.val()===!0&&y._displayName){var I=l.child(y._userId);I.onDisconnect().remove(),g===window.pageSpecific.codeUserID.toString()&&l.parent.onDisconnect().remove(),I.child("name").set(y._displayName)}}),y._avatars=y._makeAvatarList(),f.appendChild(y._avatars)}t.fromDiv=t,t.prototype.dispose=function(){this._removeFirebaseCallbacks(),this._ref.child(this._userId).remove(),this._place.removeChild(this._avatars)},t.prototype._makeAvatarList=function(){var l=this,f=r("div",[],{class:"firepad-avatar-list"}),g={};l.cursorLabels={};var m=[],y=null,x=null,I="https://static1.codehs.com/img/logo.png";l._userId!=window.pageSpecific.codeUserID&&A(!0);function A(H){var z=$("#collab-banner");H?z.removeClass("gone"):z.addClass("gone")}function F(H,z){var Y=H.key;if(!isNaN(Y)){var G=H.child("color").val();e(G)||(G="#ffb");var ie=H.child("name").val()||"Guest",fe=r("img",null,{class:"firepad-avatar",src:H.child("avatarURL").val()||I,style:"border-color: "+G+";",title:ie});if($(fe).data("toggle","tooltip"),$(fe).data("placement","bottom"),$(fe).tooltip(),g[Y]=fe,Y!=l._userId){var Ne={id:Y,color:G,name:ie};l.cursorLabels[Y]=new wg(Ne)}if(window.userData&&window.userData.id.toString()===Y&&window.userData.avatarURL){var ye=window.userData.avatarURL;fe.src=ye,l._ref.child(Y).child("avatarURL").set(ye)}if(Y!==l._userId&&l._collaboratorIds.add(Y),Object.keys(g).length>5)if(m.length===0){var He=f.lastChild;He.remove(),m.push(He),m.push(fe),y=r("span","+"+m.length,{class:"firepad-avatar",src:H.child("avatarURL").val()||I,title:m.length+" more",style:"display: inline-flex; align-items: center; justify-content: center; color: #878787;"}),y.onclick=de,$(y).data("toggle","tooltip"),$(y).data("placement","bottom"),$(y).tooltip(),f.append(y)}else m.push(fe),y.innerHTML="+"+m.length,y.dataset.originalTitle=m.length+" more",$(y).tooltip();else f.append(fe);Y==window.pageSpecific.codeUserID&&A(!1)}}function X(){x&&(x.remove(),$(y).data("toggle","tooltip"))}function de(H){x=r("div",[r("div",null,{class:"arrow"}),m.map(function(z){return r("span",[z,r("span",z.attributes["data-original-title"].value,{})],{class:"firepad-overflow-entry"})})].flat(),{class:"firepad-overflow-list"}),document.addEventListener("click",function(z){X()},{once:!0}),$(y).data("toggle",null),f.append(x),H.stopPropagation(),H.preventDefault()}function N(H,z){var Y=H.key,G=g[Y],ie=H.child("color").val(),fe=H.child("name").val()||"Guest";e(ie)||(ie="#ffb"),G&&(G.src=H.child("avatarURL").val(),G.style="border-color: "+ie+";",$(G).tooltip("destroy"),G.title=fe,$(G).tooltip())}return l._firebaseOn(l._ref,"child_added",F),l._firebaseOn(l._ref,"child_changed",N),l._firebaseOn(l._ref,"child_moved",N),l._firebaseOn(l._ref,"child_removed",function(H){var z=H.key,Y=g[z];if(Y){if(delete g[z],l._collaboratorIds.delete(z),$.contains(f,Y))try{f.removeChild(Y)}catch{console.log("Error removing user from userlist")}else m.indexOf(Y)>-1&&(m=m.filter(function(G){return G!==Y}),y.innerHTML="+"+m.length,y.dataset.originalTitle=m.length+" more",$(y).tooltip());Object.entries(g).length===5&&(y.remove(),m.forEach(function(G){f.append(G)}),m=[],X())}z==window.pageSpecific.codeUserID&&A(!0)}),f},t.prototype._firebaseOn=function(l,f,g,m){return this._firebaseCallbacks.push({ref:l,eventType:f,callback:g,context:m}),l.on(f,g,m),g},t.prototype._firebaseOff=function(l,f,g,m){l.off(f,g,m);for(var y=0;y<this._firebaseCallbacks.length;y++){var x=this._firebaseCallbacks[y];if(x.ref===l&&x.eventType===f&&x.callback===g&&x.context===m){this._firebaseCallbacks.splice(y,1);break}}},t.prototype._removeFirebaseCallbacks=function(){for(var l=0;l<this._firebaseCallbacks.length;l++){var f=this._firebaseCallbacks[l];f.ref.off(f.eventType,f.callback,f.context)}this._firebaseCallbacks=[]},t.prototype.getCollaboratorIds=function(){return Array.from(this._collaboratorIds).join(",")};function e(l){return typeof l=="string"&&(l.match(/^#[a-fA-F0-9]{3,6}$/)||l=="transparent")}function r(l,f,g){var m=document.createElement(l);if(typeof f=="string")n(m,f);else if(f)for(var y=0;y<f.length;++y)m.appendChild(f[y]);for(var x in g||{})g.hasOwnProperty(x)&&m.setAttribute(x,g[x]);return m}function n(l,f){l.innerHTML="",l.appendChild(document.createTextNode(f))}function i(l,f,g){l.addEventListener?l.addEventListener(f,g,!1):l.attachEvent&&l.attachEvent("on"+f,g)}function a(l,f,g){l.removeEventListener?l.removeEventListener(f,g,!1):l.detachEvent&&l.detachEvent("on"+f,g)}function s(l){l.preventDefault?l.preventDefault():l.returnValue=!1}function o(l){l.stopPropagation?l.stopPropagation():l.cancelBubble=!0}function c(l){s(l),o(l)}return t}();X8.exports=ku});var eG=R(()=>{"use strict";var J8=Er(),jx,Hx,Gx,Q8=function(){jx=$.Deferred(),Hx=$.Deferred(),Gx=$.Deferred(),$.when(jx,Hx,Gx).done(function(t,e,r){var n=(r-e)/1e3;Z8({method:"PATCH",data:{was_successful:!0,running_time:n,id:t}})})};Q8();var Z8=function(t){_.defaults(t,{method:"GET",data:{},success:function(){}});var e=t.data.id?t.data.id+"/":"";$.ajax({url:"/api/programrun/"+e,method:t.method,data:JSON.stringify(t.data),success:t.success,contentType:"application/json; charset=utf-8"})};J8.on("ProgramRun:create",function(t){Q8(),Hx.resolve(t.startTime),Z8({method:"POST",data:{item:t.itemId,user:t.userId,hub_server:t.usesHub},success:function(e){jx.resolve(e.id)}})});J8.on("ProgramRun:successful",function(t){Gx.resolve(t)})});var nG=R(()=>{"use strict";var mSe=Er(),ib=Lc(),vSe=Pi(),Sg={LINTER:"linter",EVAL:"eval",SKULPT:"skulpt",INFINITE_LOOP:"infinite_loop",REACT_NATIVE:"react_native"};function ySe(t,e){switch(e){case Sg.LINTER:break;case Sg.EVAL:t.name==="InfiniteLoop"?tG(t):wSe(t);break;case Sg.SKULPT:_Se(t);break;case Sg.INFINITE_LOOP:tG(t);break;case Sg.REACT_NATIVE:bSe(t);break}}function bSe(t){ib.show({editor:window.Ed,message:t.message,lineNumber:t.lineNumber?t.lineNumber:-1,progtype:window.Ed.getProgramType(),editorError:!0,log:!1}),$(".stack").html(t.stack),$(".stack").show()}function _Se(t){t.preprocess||(t.traceback[0].lineno=rG(t.traceback[0].lineno)),ib.show({editor:window.Ed,message:t.toString(),lineNumber:t.traceback.length?t.traceback[0].lineno:-1,progtype:window.Ed.getProgramType(),editorError:!0,log:!1})}function tG(t){vSe.alert({header:"Proceed with caution!",message:"There might be infinite loop on line "+t.lineNumber+` in your code.
Running this program may cause the browser to crash.`,cancel_callback:function(){window.Ed.externalRun({overrideInfiniteLoops:!0})},cancelButton:!0,buttonClass:"btn-main-green",exitButton:!1,button:"Exit Program Safely",enterToClose:!1,cancelButtonText:"Run anyway",cancelButtonClass:"btn-main-red"}),ib.show({editor:window.Ed,message:t.message,lineNumber:t.lineNumber,progtype:window.Ed.getProgramType(),editorError:!0,log:!1})}function wSe(t){var e,r,n=-1,i="";t.line?n=t.line:t.lineNumber?n=t.lineNumber:(e=window.printStackTrace({e:t}),r=e.join(`
`),n=TSe(r)),n=rG(n),i=SSe(t),ib.show({editor:window.Ed,message:i,lineNumber:n>0?n:-1,progtype:window.Ed.getProgramType(),editorError:!0,log:!1})}function rG(t){return t-iG()}function iG(){var t=64,e=6,r=15,n=214,i=7,a=58,s=100,o=82,c=25,l=window.pageSpecific.helper_code?window.pageSpecific.helper_code:"",f=l.split(`
`).length;l===""&&(f=0);var g=186+f,m=0;return window.Ed.typeTester.isKarel()&&(m+=t,window.Ed.typeTester.isSuperKarel()?m+=e:window.Ed.typeTester.isUltraKarel()&&(m+=r),window.Ed.typeTester.isPython()&&(m+=n,window.Ed.typeTester.isSuperKarel()&&(m+=i),window.Ed.typeTester.isUltraKarel()&&(m+=a))),window.Ed.typeTester.isGraphics()&&(m+=s),window.Ed.typeTester.isPixel()&&(m+=o),window.Ed.typeTester.isTurtle()&&(m+=g),window.Ed.typeTester.isConsole()&&(m+=c),m}function SSe(t){return"Uncaught "+t.name+": "+t.message}function TSe(t){var e=-1;return t.replace(/<anonymous>:(.*):/gm,function(r,n,i,a){e==-1&&(e=parseInt(n),e<iG()&&(e=-1))}),e}mSe.on("editorError:handle",function(t,e){ySe(t,e)})});var oG=R((u2e,sG)=>{"use strict";var CSe=ui(),aG=".favorite-program-star";function ESe(){$(aG).exists()&&$(aG).on("click",function(){var t=$(this),e=$(this).attr("data-userprogram");CSe.send({method:"toggle_favorite",app:"editor",data:{program:e},success:function(r){r.fav?t.addClass("selected"):t.removeClass("selected")}})})}sG.exports={setup:ESe}});var dG=R((c2e,lG)=>{"use strict";var Sc=Rr(),xSe=Jl(),ASe="#FFFF00";function yn(t,e){this.chsEditor=t,this.highlightedLines=[],this.init()}function uG(t){return new RegExp("^(https?://)?([a-z\\d-]+\\.)+[a-z]{2,6}/?[-a-z\\d/%_.~+=&]*\\??[-a-z\\d%_.~+=&]*$","i").test(t)}function cG(t){return t.type==="paste"&&t.clipboardData.getData("text")===window.localStorage.getItem("codehsCopy")}yn.prototype.init=function(){var t=this,e;function r(){return e?e.session.getTextRange(e.selection.getRange()):""}if(t.chsEditor.preventCopyPaste?["copy","paste","cut"].forEach(function(y){document.querySelector("#codehs-editor").addEventListener(y,function(x){var I=x.clipboardData.getData("text"),A=window.pageSpecific.allowPastingUrls&&uG(I),F=window.pageSpecific.allowCopyPasteCodeHSOnly&&cG(x),X=window.pageSpecific.allowCopyPasteCodeHSOnly&&(x.type=="copy"||x.type=="cut");if(!A&&!F&&!X&&(x.stopPropagation(),x.preventDefault()),X){var de=r();return window.localStorage.setItem("codehsCopy",de,e),de}},!0)}):document.querySelector("#codehs-editor").addEventListener("paste",function(){t.chsEditor.isOwnPage()&&t.chsEditor.save(function(){},"paste")},!1),t.chsEditor.codeEditorType===Sc.EditorType.DROPLET_EDITOR&&Sc.EditorType.DROPLET_CONFIG.hasOwnProperty(t.chsEditor.progType)){var n=t.chsEditor.dropletCustomBlocks;n?e=new window.droplet.Editor($("#codehs-editor")[0],JSON.parse(n)):e=new window.droplet.Editor($("#codehs-editor")[0],Sc.EditorType.DROPLET_CONFIG[t.chsEditor.progType]),e.setEditorState(!0),e.aceEditor.getSession().setTabSize(4),e.aceEditor.getSession().setUseWrapMode(!0),t.editor=e,t.editor.fixingEditorCode=!1,e.on("change",function(){if(t.editor.currentlyUsingBlocks&&!t.editor.currentlyAnimating&&!t.editor.fixingEditorCode){var y=this.getValue(),x=y.replace(/while \(\((.*?)\)\) \{/g,"while ($1) {");x!==y&&(t.editor.fixingEditorCode=!0,this.setValue(x),t.editor.fixingEditorCode=!1)}}),e.on("parseerror",function(){xSe({message:"We cannot switch to Block View because there is a syntax error in your code",header:"Syntax error",button:"OK"})}),$("#droplet-code-toggle").on("click",function(){t.toggleBlocks()}),t.chsEditor.defaultBlocks||t.toggleBlocks();var i,a,s,o,c,l;$(e.wrapperElement).on("touchstart",function(y){y.originalEvent&&(y=y.originalEvent),i=y.touches[0].pageX,a=y.touches[0].pageY,s=i,o=a}).on("touchmove",function(y){y.originalEvent&&(y=y.originalEvent);var x=y.touches[0].pageX,I=y.touches[0].pageY;c=s-x,l=o-I,e.aceEditor.session.setScrollTop(e.aceEditor.session.getScrollTop()+l),e.aceEditor.session.setScrollLeft(e.aceEditor.session.getScrollLeft()+c),s=x,o=I}).on("touchend",function(y){if(y.originalEvent&&(y=y.originalEvent),Math.abs(o-a)<5&&Math.abs(s-i)<5){var x=e.aceEditor.renderer.screenToTextCoordinates(i,a);e.aceEditor.moveCursorToPosition(x)}if(e.aceEditor.isFocused())return y.preventDefault(),!1})}else{e=window.ace.edit("codehs-editor"),e.setOptions({showFoldWidgets:!window.useAccessibilityMode,showGutter:!window.useAccessibilityMode});var f={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(F){F.blur(),F.renderer.content.focus()},readOnly:!0},g=function(F){F.target==this.renderer.content&&F.key==="Enter"&&(F.stopPropagation(),F.preventDefault(),this.focus())};e.textInput.getElement().setAttribute("tabindex",-1),e.renderer.content.setAttribute("tabindex",0),e.renderer.content.setAttribute("aria-label","Editor, press Enter key to start editing, press Escape key to exit"),window.useAccessibilityMode&&e.renderer.content.addEventListener("focus",function(){window.toastr.info("Press Enter key to start editing, press Escape key to exit","",{positionClass:"toast-top-center"})}),e.renderer.content.addEventListener("keyup",g.bind(e)),e.commands.addCommand(f),e.getSession().setUseWorker(!1),t.editor=e;var m=t.getModeString();t.editor.getSession().setMode("ace/mode/"+m),m==="text"&&t.editor.getSession().setUseWrapMode(!0);var i,a,c,l;$(e.container).on("touchstart",function(F){F.originalEvent&&(F=F.originalEvent),i=F.touches[0].pageX,a=F.touches[0].pageY}).on("touchmove",function(F){F.originalEvent&&(F=F.originalEvent);var X=F.touches[0].pageX,de=F.touches[0].pageY;c=i-X,l=a-de,e.session.setScrollTop(e.session.getScrollTop()+l),e.session.setScrollLeft(e.session.getScrollLeft()+c),i=X,a=de}),t.chsEditor.preventCopyPaste&&(e.$toDestroy.filter(function(F){return F.type==="input"}).forEach(function(F){var X=F.elem,de=F.callback;X.removeEventListener("input",de,{useCapture:!1}),X.addEventListener("input",function(N){if(N.inputType==="insertFromPaste")return N.stopPropagation(),N.preventDefault(),N.target.value="","";de(N)},!1)}),e.$toDestroy.filter(function(F){return F.type==="copy"}).forEach(function(F){var X=F.elem,de=F.callback;X.removeEventListener("copy",de,{useCapture:!1}),X.addEventListener("copy",function(N){if(window.pageSpecific.allowCopyPasteCodeHSOnly){var H=r();return window.localStorage.setItem("codehsCopy",H,e),de(N)}else return N.stopPropagation(),N.preventDefault(),!1},!1)}),e.$toDestroy.filter(function(F){return F.type==="paste"}).forEach(function(F){var X=F.elem,de=F.callback;X.removeEventListener("paste",de,{useCapture:!1}),X.addEventListener("paste",function(N){var H=N.clipboardData.getData("text"),z=window.pageSpecific.allowCopyPasteCodeHSOnly&&cG(N),Y=window.pageSpecific.allowPastingUrls&&uG(H);return!Y&&!z?(N.stopPropagation(),N.preventDefault(),""):(de(N),H)},!1)}),e.$toDestroy.filter(function(F){return F.type==="drop"}).forEach(function(F){var X=F.elem,de=F.callback;X.removeEventListener("drop",de,!1)}))}};yn.prototype.toggleBlocks=function(){var t=this;t.editor.toggleBlocks(),!t.editor.currentlyUsingBlocks&&t.editor.currentlyAnimating?$("#droplet-code-toggle").html("Switch to Block View"):t.editor.currentlyUsingBlocks&&t.editor.currentlyAnimating&&$("#droplet-code-toggle").html("Switch to Code View")};yn.prototype.getModeString=function(){return this.chsEditor.typeTester.isHTML()?"html":this.chsEditor.typeTester.isPython()||this.chsEditor.typeTester.isUnitTestPython()||this.chsEditor.typeTester.isPython2()||this.chsEditor.typeTester.isPython3()||this.chsEditor.typeTester.isPythonGraphics()||this.chsEditor.typeTester.isUnitTestPython3()||this.chsEditor.typeTester.isPygame()||this.chsEditor.typeTester.isPythonProcessing()||this.chsEditor.typeTester.isPythonLanguage()?"python":this.chsEditor.typeTester.isJava()?"java":this.chsEditor.typeTester.isScheme()?"scheme":this.chsEditor.typeTester.isBash()?"sh":this.chsEditor.typeTester.isSQL()?"sql":this.chsEditor.typeTester.isElm()?"elm":this.chsEditor.typeTester.isReactNative()?"jsx":this.chsEditor.typeTester.isCpp()?"c_cpp":this.chsEditor.typeTester.isSwift()?"swift":this.chsEditor.typeTester.isJavascript()?"javascript":Sc.ItemTypeConfig.CONFIGS[this.chsEditor.getItemType()].normal_text_editor?"text":"javascript"};yn.prototype.setModeString=function(t){var e=this.getEditor();e.getSession().setMode("ace/mode/"+t)};yn.prototype.getValue=function(){var t=this.getEditor(),e=t.getValue();return e.match(/\n$/)||(e=e+`
`),e};yn.prototype.refreshModeStringNative=function(t){var e=ace.require("ace/ext/modelist");this.getEditor().getSession().setMode(e.getModeForPath(t).mode)};yn.prototype.setValue=function(t){var e=this.getEditor();this.chsEditor.codeEditorType===Sc.EditorType.DROPLET_EDITOR&&this.editor.setValue(t),e.session.setValue(t)};yn.prototype.clearSelection=function(){var t=this.getEditor();t.clearSelection()};yn.prototype.addBreakpoint=function(t){var e=this.getEditor(),r=e.getSession();r.setBreakpoint(t-1," breakpoint")};yn.prototype.removeBreakpoint=function(t){var e=this.getEditor(),r=e.getSession();r.clearBreakpoint(t-1)};yn.prototype.clearBreakpoints=function(t){var e=this.getEditor(),r=e.getSession();r.clearBreakpoints()};yn.prototype.gotoLine=function(t){var e=this.getEditor();e.gotoLine(t)};yn.prototype.highlightLine=function(t,e){if(e===void 0&&(e=!0),e&&this.clearHighlightedLines(),!(t===""||typeof t>"u"||t<=0)){var r=t-1;if(!this.isLineHighlighted(r)){var n=this.getEditor(),i=n.getSession(),a=i.highlightLines(r,r);if(this.chsEditor.codeEditorType===Sc.EditorType.DROPLET_EDITOR){var s={color:ASe};this.editor.markLine(r,s)}var o={lineNumber:r,markerId:a.id};this.highlightedLines.push(o)}}};yn.prototype.isLineHighlighted=function(t){for(var e=0;e<this.highlightedLines.length;e++)return this.highlightedLines[e].lineNumber==t};yn.prototype.clearHighlightedLines=function(){for(;this.highlightedLines.length>0;){var t=this.highlightedLines.shift();this.clearHighlightedLine(t)}};yn.prototype.clearHighlightedLine=function(t){if(t.lineNumber>=0){var e=this.getEditor();e.getSession().removeMarker(t.markerId),this.chsEditor.codeEditorType===Sc.EditorType.DROPLET_EDITOR&&this.editor.unmarkLine(t.lineNumber)}};yn.prototype.resize=function(){this.editor.resize()};yn.prototype.getEditor=function(){return this.chsEditor.codeEditorType===Sc.EditorType.DROPLET_EDITOR?this.editor.aceEditor:this.editor};lG.exports=yn});var mG=R((l2e,gG)=>{"use strict";var kSe=rp(),ISe=ui(),DSe=im(),OSe=Zl(),pG=".start-ex-button",ab="#directions-modal",fG=".program-demo-canvas",PSe=".demo-run-button",RSe=".demo-stop-button",hG=".dark-screen",LSe=".modal-canvas",nb;function Cs(t){this.editor=t;try{this.setup()}catch{console.log("editor instructions initialization error")}this.demo_graphics,this.demo_solution}Cs.prototype.usingGraphics=function(){return this.editor.typeTester.isGraphics()&&this.editor.needsPopup()};Cs.prototype.setupLetsGoButton=function(){$(pG).on("click",this.hideInstructions)};Cs.prototype.hideInstructions=function(){var t=this;$("#close-button").removeAttr("tabindex"),$(ab).off("focus.directions.modal").addClass("fly-out").on("animationend",function(){$(this).removeClass("fly-out").hide(),nb&&(nb.trigger("focus"),nb=null),$(document).off("keydown.directions.modal").off("keydown.directions.modal.initial")}),$(hG).fadeOut()};Cs.prototype.setupDemoRunButton=function(){var t=this;$(PSe).on("click",function(){t.usingGraphics()&&t.demo_graphics.fullReset();var e=t.demo_solution;e=e.replace(/&gt;/g,">"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&amp;/g,"&"),e=e.replace(/&nbsp;/g,""),t.usingGraphics()&&t.demo_graphics.runCode(e)})};Cs.prototype.setupDemoStopButton=function(){var t=this;$(RSe).on("click",function(){t.usingGraphics()&&t.demo_graphics.fullReset()})};Cs.prototype.setupReShowPopup=function(){var t=this;$("#show-editor-instructions").on("click",function(e){nb=$(e.target),t.showInstructions()})};Cs.prototype.showInstructions=function(){$(hG).show(),$(ab).show().addClass("fly-in").on("animationend",function(){$(this).removeClass("fly-in").show()}).trigger("focus"),this.setupKeyboardAccessibility()};Cs.prototype.modalHidden=function(){return $("#directions-modal").css("display")=="none"};Cs.prototype.setupKeyboardAccessibility=function(){var t=this,e=$(ab).find(":tabbable:visible"),r=$(e[e.length-1]),n=$(e[0]);r.on("keydown.directions.modal",function(i){i.key==="Tab"&&!(i.shiftKey|i.ctrlKey|i.metaKey|i.altKey)&&(i.preventDefault(),n.trigger("focus"))}),n.on("keydown.directions.modal",function(i){i.key==="Tab"&&i.shiftKey&&(i.preventDefault(),r.trigger("focus"))}),$(document).on("keydown.directions.modal",function(i){i.key==="Escape"&&(i.preventDefault(),t.hideInstructions())})};Cs.prototype.setup=function(){var t=this;if($(pG).exists()){var e=$(ab).find(":tabbable:visible"),r=$(e[e.length-1]),n=$(e[0]);$(document).on("keydown.directions.modal.initial",function(s){s.key==="Tab"&&s.shiftKey?(s.preventDefault(),r.trigger("focus"),$(document).off("keydown.directions.modal.initial")):s.key==="Tab"&&!(s.shiftKey|s.ctrlKey|s.metaKey|s.altKey)&&(s.preventDefault(),n.trigger("focus"),$(document).off("keydown.directions.modal.initial"))}),t.setupKeyboardAccessibility(),ISe.send({type:"GET",method:"get_solution_code",app:"editor",data:{gulpUrl:CHS.GULP_URL,itemID:t.editor.itemID},success:function(s){if(s.status==="ok"){var o=JSON.parse(s.solutionCodeJson.split("").map(function(c,l){var f=CHS.GULP_URL[l%CHS.GULP_URL.length],g=String.fromCharCode((c.charCodeAt(0)-f.charCodeAt(0))%256);return g}).join(""));t.demo_solution=o}else t.demo_solution=""}}),this.setupLetsGoButton(),this.setupReShowPopup(),this.setupDemoRunButton(),this.setupDemoStopButton(),$(LSe).each(function(){kSe.quickDraw($(this),$(this).attr("data-world"),$(this).attr("data-width"),!0)}),this.usingGraphics()&&$(fG).length&&(this.demo_graphics=new DSe.CodeHSGraphics({canvas:$(fG)}));var i=window.pageSpecific.itemDescription,a=window.pageSpecific.isQuill;OSe.chooseEditor([{qlTarget:"#quill-description",mdTarget:"#markdown-description",content:i}],a),a||($("#markdown-description").find("table").addClass("table"),$(".result > .left-exercise").find("table").addClass("table")),$(".directions a").attr("target","_blank")}};Cs.prototype.setupObjective=function(){var t=Ay(),e=t+this.editor.solutionCode["main.py"];if(this.editor.typeTester.isTurtle()&&$("#turtle-objective-world").length){var r=this.editor.resultImage;r?$("#turtle-objective-world").append('<img src="https://static1.codehs.com/img/exercises/end/'+r+'" rel="popover" data-placement="bottom" data-trigger="hover" data-content="This is what the world should look like after your program has run."/>'):this.editor.runner.quickDraw({code:e,target:"turtle-objective-world",oldTarget:"python-canvas",height:200,width:200,animate:!1,canvasCoordinates:[-200,-200,200,200]})}};gG.exports=Cs});var _G=R((d2e,bG)=>{"use strict";var NSe=Rr(),vG=ui(),yG=NSe.EditorThemes.STRINGS;function zx(t){this.editor=t,this.setup()}zx.prototype.getFontSizeInPx=function(){var t=this.editor.getEditor().getFontSize();if(typeof t=="number")return t;var e=parseInt(t.split("px")[0]);return e};zx.prototype.setup=function(){var t=this,e=this.editor,r=this.editor.getEditor();r.setFontSize(this.editor.fontSize);var n=yG[this.editor.themeID],i="ace/theme/"+n;r.setTheme(i),r.setBehavioursEnabled(this.editor.autocompleteEnabled);var a=r.getFontSize();$("#editor-font-size").html(a),$("#console").length&&(this.editor.consoleFontSize&&(a=this.editor.consoleFontSize+"px",$("#console").css("font-size",a),$(".jqconsole").css("font-size",a)),$("#console-font-size").html($("#console").css("font-size")),$(".console-font-larger").on("click",function(){var s=parseInt($("#console").css("font-size"));s++;var o=s+"px";$("#console").css("font-size",o),$(".jqconsole").css("font-size",o),$("#console-font-size").html(o)}),$(".console-font-smaller").on("click",function(){var s=parseInt($("#console").css("font-size"));s--;var o=s+"px";$("#console").css("font-size",o),$(".jqconsole").css("font-size",o),$("#console-font-size").html(o)})),$("#console-font-size").html(),$(".editor-font-larger").on("click",function(){var s=t.getFontSizeInPx();s++;var o=s+"px";r.setFontSize(o),$("#editor-font-size").html(o)}),$(".editor-font-smaller").on("click",function(){var s=t.getFontSizeInPx();s--;var o=s+"px";r.setFontSize(o),$("#editor-font-size").html(o)}),$("#editor-theme-selector").on("change",function(){var s=$(this).find(":selected"),o=$(s).attr("data-value"),c=yG[o],l="ace/theme/"+c;r.setTheme(l)}),$(".editor-autocomplete-toggle").on("change",function(){$(this).find(".switch-on").length!==0?r.setBehavioursEnabled(!0):r.setBehavioursEnabled(!1)}),$("#karel-celebration-selector").on("change",function(){var s=$(this).find(":selected"),o=$(s).data("value");e.karelCelebration=o}),$("#editor-settings-shared-program-blocks-switch").prop("checked",window.pageSpecific.collaborateBlockedByDroplet),$("#editor-settings-shared-program-blocks-switch").on("change",function(s){var o=$(s.target);o.prop("checked")?vG.send({method:"toggle_shared_program_blocks_on",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID},success:function(c){c.status!=="ok"&&window.toastr.error(c.msg)}}):vG.send({method:"toggle_shared_program_blocks_off",app:"editor",data:{sharedProgramID:window.pageSpecific.sharedProgramID},success:function(c){c.status!=="ok"&&window.toastr.error(c.msg)}})})};bG.exports=zx});var TG=R((f2e,SG)=>{"use strict";var FSe=yx();function wG(t){var e=this;e.LOADED=!1,e.editor=t}wG.prototype.setup=function(){var t=this;t.LOADED||(t.LOADED=FSe(window.pageSpecific.codeUserID,t.LOADED))};SG.exports=wG});var EG=R((p2e,CG)=>{"use strict";var sb=Rr(),MSe=Er();function USe(){VSe()}var Vx={"shift+p":jSe,"shift+r":GSe,"shift+f":HSe,"shift+n":zSe,"shift+a":qSe,"shift+h":BSe,"shift+s":$Se};function $Se(){window.Ed.save()}function BSe(t){t.preventDefault(),window.Ed.stop(),MSe.trigger("utils:switchToTab","#help-tab",".right-col-tabs","editor-tab-content"),$("#wmd-input").trigger("focus")}function qSe(){window.Ed.externalRun()}function jSe(){window.Ed.codeReview({info:window.Ed.getInfo(),reviewGrade:sb.GradingStatus.PASSED})}function HSe(){window.Ed.codeReview({info:window.Ed.getInfo(),reviewGrade:sb.GradingStatus.NEEDS_WORK})}function GSe(){window.Ed.codeReview({info:window.Ed.getInfo(),reviewGrade:sb.GradingStatus.NEEDS_WORK})}function zSe(){window.Ed.codeReview({info:window.Ed.getInfo(),reviewGrade:sb.GradingStatus.NEEDS_WORK})}function VSe(){for(var t in Vx)$("#dummy").bind("keypress",t,Vx[t]),$(document).bind("keypress",t,Vx[t]);function e(){$("#dummy").trigger("focus")}for(var r=1;r<20;r++)setTimeout(e,r*100)}CG.exports=USe});var kG=R((g2e,AG)=>{"use strict";var h2e=ey(),xG=Ri(),WSe=Rc(),Wx=[],KSe=100,XSe=2e3;function Tc(t){this.editor=t,this.setUpRealtimeErrors()}Tc.prototype.shouldCheckKarelErrors=function(){return this.editor.typeTester.isJsKarel()&&this.editor.numLines()<=KSe};Tc.prototype.shouldCheckMissingSemicolons=function(){return this.editor.typeTester.isConsole()||this.editor.typeTester.isGraphics()};Tc.prototype.clearErrors=function(){for(var t=this.editor.getEditor().getSession(),e=0;e<Wx.length;e++){var r=Wx[e],n=r.line,i=r.klass;t.removeGutterDecoration(n-1,i);var a=$(".ace_gutter-cell")[n-1];$(a).popover("destroy")}};Tc.prototype.getTabMessage=function(t){var e=t>0?"back ":"forward ";t=Math.abs(t);var r=t>1?" times.":" time.",n="You should indent this line "+e+t+r;return t===0&&(n="Make sure you use a consistent style with",n+="<code>{</code> and <code>}</code>"),n};Tc.prototype.addGutterNote=function(t){var e=this.editor.getEditor().getSession();Wx.push({line:t.lineNumber,klass:t.klass}),e.addGutterDecoration(t.lineNumber-1,t.klass);var r=$(".ace_gutter-cell")[t.lineNumber-1];$(r).popover({placement:"right",container:"body",title:t.title,content:t.content,trigger:"hover",html:!0})};Tc.prototype.checkLineErrors=function(){this.clearErrors();var t=this.editor.getCode(),e;if(this.shouldCheckKarelErrors()){for(var r=xG.testIndentation(t),n=0;n<r.length;n++){e=r[n].line;var i=this.getTabMessage(r[n].tab_difference);this.addGutterNote({lineNumber:e,klass:"warning",title:"Indentation Error",content:i})}for(var a=t.split(`
`),n=0;n<a.length;n++)if(e=`
`+a[n]+`
`,e.indexOf("function")==-1){var s=WSe.testCommandStyle(e);if(!s.isValid){var o="You wrote: <code>"+e+"</code><br/>Should be: <code>"+s.validCommand+"</code>";this.addGutterNote({lineNumber:n+1,klass:"error",title:o,content:s.reason})}}}if(this.shouldCheckMissingSemicolons())for(var c=xG.linesWithoutSemicolons(t),n=0;n<c.length;n++)e=c[n],this.addGutterNote({lineNumber:e,klass:"warning",title:"Missing Semicolon",content:"You need a semicolon at the end of the line."})};Tc.prototype.setUpRealtimeErrors=function(){var t=this,e=this.editor.getCode();this.checkLineErrors(),setInterval(function(){var r=t.editor.getCode();r!=e&&(t.checkLineErrors(),e=r)},XSe)};AG.exports=Tc});var LG=R((m2e,RG)=>{"use strict";var IG=Rr(),Cc=Er(),YSe=ui(),JSe=tm(),DG=Yl(),OG=1e4,Bf="#save-button";function PG(t){this.editor=t,this.latestCodeSave=JSON.stringify(this.editor.currentCode)}PG.prototype.saveCode=function(t,e){t=t||function(){},this.editor.getItemType()==IG.ItemType.FREE_RESPONSE&&this.editor.activeFile==".txt"&&(this.editor.activeFile="default.txt"),Cc.trigger("utils:disableButton",Bf);var r=this.editor.currentCode;this.editor.activeFile&&!this.editor.activeFile.endsWith(".jar")&&(r[this.editor.activeFile]=JSe.trimRight(this.editor.getCode()));var n=JSON.stringify(r);if(n===this.latestCodeSave)return setTimeout(function(){Cc.trigger("utils:enableButton",Bf)},1e3),t();var i=this.editor.getInfo();if(this.editor.typeTester.isGradingQuiz()||this.editor.typeTester.isGradeAndRespond())return t();if(n.split("\\n",OG).length>=OG){Cc.trigger("editorError:handle",{message:`Your file is too large to save. Please shorten and try again.
Think this is a mistake? <a href="mailto:support@codehs.com">Contact us!</a>`,name:"code error"},"eval");return}var a=this,s=a.editor.studentAssignmentID,o=a.editor.firepad&&a.editor.firepad.avatars?a.editor.firepad.avatars.getCollaboratorIds():"";YSe.send({method:"save_editor",app:"editor",data:{info:i,fileJson:n,seconds:a.editor.timeTrackSeconds||0,studentAssignmentID:s,isSandbox:a.editor.getItemType()==IG.ItemType.SANDBOX&&!s,collaboratorIds:o,reason:e},success:function(c){c.status=="ok"?(a.latestCodeSave=n,$(Bf).html("<span class='chs-icon-check'></span>"),a.editor.timeTrackSeconds=0,a.editor.editorHistory.addListing(n),c.just_started_time&&($("#start-time-text").html(c.just_started_time),$("#started-time").show()),setTimeout(function(){Cc.trigger("utils:enableButton",Bf)},1e3),t()):(Cc.trigger("editorError:handle",{message:c.msg+'Think this is a mistake? <a href="mailto:support@codehs.com">Contact us!</a>',name:"code error"},"eval"),DG.error("There was an error saving your code! Please try again before moving on."),setTimeout(function(){Cc.trigger("utils:enableButton",Bf)},1e3))},error:function(){Cc.trigger("editorError:handle",{message:"There was an error saving your code! Please try again before moving on.",name:"code error"},"eval"),DG.error("There was an error saving your code! Please try again before moving on."),setTimeout(function(){Cc.trigger("utils:enableButton",Bf)},1e3)}})};RG.exports=PG});var FG=R((v2e,NG)=>{"use strict";var QSe=Er(),ZSe=jV();function Kx(t){this.editor=t,this.loadSavedCode()}Kx.prototype.loadSavedCode=function(){try{for(var t=JSON.parse(window.localStorage.savedCode),e=t.length-1;e>=0;e--){var r=t[e];if(r.info.itemID==this.editor.getInfo().itemID){this.editor.setCode(r.code);return}}}catch{return}};Kx.prototype.saveCode=function(t){t=t||function(){};var e=this.editor.getCode(),r=this.editor.getInfo(),n;try{n=JSON.parse(window.localStorage.savedCode)}catch{n=[]}var i=n[n.length-1];(i==null||e!=i.code||r.itemID!=i.info.itemID)&&(n.push({code:e,info:r,timestamp:ZSe().unix()}),window.localStorage.savedCode=JSON.stringify(n)),QSe.trigger("signup:setupLocalStorageData"),t()};NG.exports=Kx});var UG=R((y2e,MG)=>{"use strict";var eTe=rp(),ob=206,Tg=".sidebar-canvas",Es="#edit-solution-world";function Xx(t){this.editor=t}Xx.prototype.setupCanvas=function(t){if(this.editor.typeTester.isTurtle()){var e=Ay(),r=e+this.editor.solutionCode["main.py"];if($("#turtle-result-world").length&&this.editor.isOwnPage()){var n=this.editor.resultImage;n?$("#turtle-result-world").append('<img src="https://static1.codehs.com/img/exercises/end/'+n+'" rel="popover" data-placement="bottom" data-trigger="hover" data-content="This is what the world should look like after your program has run."/>'):this.editor.runner.quickDraw({code:r,target:"turtle-result-world",animate:!1})}}else{if(t===void 0){var i=$("#karelworld").find(":selected").attr("data-world");t=this.editor.runner.loadWorldById(i)}var a=this.editor.worlds.length+this.editor.user_worlds.length,s;if(t==-1||t>=a){this.hideCanvas();return}else if(t<this.editor.worlds.length)s=this.editor.worlds[t];else{var o=t-this.editor.worlds.length;s=this.editor.user_worlds[o]}var c="/karel/worlds/0/";if(!s||s.solution_world===void 0){this.hideCanvas(),c+="duplicate/"+s.id+"?solution_item="+this.editor.itemID,$(Es).text("Add Solution World"),$(Es).addClass("add-world"),$(Es).css("top",(ob-$(Es).innerHeight())/2+4),$(Es).attr("href",c),$(Es).attr("data-original-title","Add a solution for the current world"),$(Es).show();return}if(s){c+="edit/"+s.solution_id+"?solution_item="+this.editor.itemID,$(Es).text("Edit Solution World"),$(Es).removeClass("add-world"),$(Es).attr("data-original-title","Edit the solution for the current world"),$(Es).attr("href",c),$(Es).css("display","inline-block");var l=JSON.stringify(s.solution_world);$(Tg).each(function(){$(".hideable-title").css("opacity",1),eTe.quickDraw($(this),l,ob,!0)})}}};Xx.prototype.hideCanvas=function(){$(".hideable-title").css("opacity",0),$(Tg).css("opacity",0),$(Tg).attr("rel",""),$(Tg).attr("width",ob),$(Tg).attr("height",ob)};MG.exports=Xx});var BG=R((b2e,$G)=>{"use strict";var tTe=Er(),rTe=ui(),iTe="#submit-button",Ao="#grading-problem-reason";function Yx(t){this.editor=t}Yx.prototype.validateData=function(){var t=$(".grading-problem-btn.active"),e=t.find("input").val(),r=$("#grade-and-respond-text").val(),n=this.editor.needsResponse;return $(Ao).css("visibility","hidden"),r=r||"",e===void 0||n&&r.trim()===""?(n?$(Ao).text("Please supply a grade and response."):$(Ao).text("Please grade this submission."),$(Ao).addClass("alert-danger").css("visibility","visible"),tTe.trigger("utils:enableButton",iTe),{}):{grade:e,response:r}};Yx.prototype.showAnswer=function(t,e){$(Ao).css("visibility","hidden"),!this.editor.needsResponse&&rTe.send({method:"save_grade_and_respond",app:"editor",data:{grade:e,response:"",item_id:t},success:function(r){r.status=="ok"&&($(Ao).text(r.msg).css("visibility","visible"),$(".grading-problem-btn").addClass("disabled"),r.correct?($(Ao).removeClass("alert-danger").addClass("alert-success"),r.msg.trim()===""&&$(Ao).text("Correct!")):($(Ao).removeClass("alert-success").addClass("alert-danger"),r.msg.trim()===""&&$(Ao).text("Sorry, that's incorrect.")))}})};$G.exports=Yx});var jG=R((_2e,qG)=>{var nTe=ui(),aTe=".run_code",sTe=".js-embed-identifier";function Jx(t){this.editor=t,this.removeViews(),this.setupRunButton()}Jx.prototype.removeViews=function(){var t=".editor-id-"+this.editor.editorInstanceId+" #right";$(t+" .nav-tabs").remove(),$(".action :not(.editor-title)").remove(),$("#karelworld optgroup").remove()};Jx.prototype.setupRunButton=function(){$(aTe).on("click",function(){nTe.send({method:"update_embed_run_count",app:"editor",data:{identifier:$(sTe).data("embed-identifier")}})})};qG.exports=Jx});var zG=R((w2e,GG)=>{"use strict";function HG(t){this.editor=t,this.removeViews()}HG.prototype.removeViews=function(){var t=".editor-id-"+this.editor.editorInstanceId+" #right";$(t+" .nav-tabs").remove(),$("#karelworld").hide(),$(".action").remove()};GG.exports=HG});var YG=R((S2e,XG)=>{"use strict";var VG=Er(),oTe="#docs-color-picker-input",uTe="#docs-color-picker-value";function WG(t){this.editor=t,this.setup()}WG.prototype.setup=function(){var t=this;t.editor.typeTester.isHTML()&&KG()};function KG(){var t=$(oTe),e=$(uTe);t.on("input",function(){e.val(t.val())}),t.on("change",function(){e.val(t.val())}),e.on("change",function(){t.val(e.val())})}function cTe(){window.pageSpecific.allowCopyPasteCodeHSOnly&&document.addEventListener("copy",function(){var t=window.getSelection().toString();window.parent.localStorage.setItem("codehsCopy",t)})}VG.on("editor:setupColorPicker",KG);VG.on("editor:setupCopyDocsTab",cTe);XG.exports=WG});var ZG=R((T2e,QG)=>{"use strict";var lTe="wss://code.codehs.com:443/",dTe="output",fTe="stdin",Qx="waiting",JG="processing";function pTe(t,e,r){var n=new WebSocket(lTe+t),i="",a=Qx,s;n.onmessage=function(c){var l=JSON.parse(c.data),f=l.name,g=l.data;f===dTe&&a===JG&&(r(g)?(i+=e(g),s.resolve(i),i="",a=Qx):i+=e(g))};function o(c){if(a===Qx)return s=$.Deferred(),a=JG,n.send(JSON.stringify({name:fTe,data:c})),s}return{stdin:o}}QG.exports=pTe});var tz=R((C2e,ez)=>{"use strict";var hTe=ZG();ez.exports=function(){var t="elm-repl",e=hTe(t,function(r){return r.replace(/(\|\s*)+$/,"").replace(/>\s*$/,"")},function(r){return/>\s*$/.test(r)});return function(r){return e.stdin(r)}}});var iz=R((E2e,rz)=>{"use strict";var Zx="__END_OF_OUTPUT__";function gTe(t){var e=new RegExp("\\s*print"),r=new RegExp("\\s*import"),n=new RegExp("def.*|class.*"),i=/^((\s*\(\s*(\s*((\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*)|(\s*\(\s*(\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*,)*\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*\)\s*))\s*,)*\s*((\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*)|(\s*\(\s*(\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*,)*\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*\)\s*))\s*\)\s*)|(\s*\s*(\s*((\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*)|(\s*\(\s*(\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*,)*\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*\)\s*))\s*,)*\s*((\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*)|(\s*\(\s*(\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*,)*\s*((\s*[_a-zA-Z]\w*\s*)|(\s*\(\s*(\s*[_a-zA-Z]\w*\s*,)*\s*[_a-zA-Z]\w*\s*\)\s*))\s*\)\s*))\s*\s*))=/,a=t.split(`
`),s=-1,o=0;return a.length===1&&!i.test(a[0])&&!n.test(a[0])&&!r.test(a[0])&&a[0].length>0&&(e.test(a[0])||(a.push("evaluationresult = "+a.pop()),a.push("if not evaluationresult == None: print repr(evaluationresult)"))),a}function mTe(t){t.push('print("'+Zx+'")')}rz.exports=function(){return function(t){var e=$.Deferred(),r="";window.Sk.configure({output:function(i){i.indexOf(Zx)!==-1?(i=i.replace(Zx,""),r+=i,e.resolve(r),r=""):r+=i},read:function(i){if(window.Sk.builtinFiles===void 0||window.Sk.builtinFiles.files[i]===void 0)throw"File not found: '"+i+"'";return window.Sk.builtinFiles.files[i]},retainglobals:!0});var n=gTe(t);mTe(n);try{!n||/^\s*$/.test(n)?e.resolve(""):window.Sk.importMainWithBody("<stdin>",!1,n.join(`
`))}catch(i){e.resolve(i.toString())}return e}}});var az=R((x2e,nz)=>{"use strict";nz.exports=function(){return function(t){var e=$.Deferred(),r=eval;try{e.resolve(""+r(t))}catch(n){e.resolve(""+n)}return e}}});var oz=R((A2e,sz)=>{var tA=Rr(),vTe=tz(),yTe=iz(),bTe=az(),eA=hl();function _Te(t){return t.getProgrammingLanguage()===tA.ProgrammingLanguage.ELM}function wTe(t){return t.getProgrammingLanguage()===tA.ProgrammingLanguage.PYTHON}function STe(t){return t.getProgrammingLanguage()===tA.ProgrammingLanguage.JAVASCRIPT&&!t.typeTester.isJsKarel()}sz.exports=function(t){var e,r;if(_Te(t))e=vTe(),r=eA({welcomeString:["Welcome to the Elm REPL! Type a \\ character to write","multiline expressions."].join(" "),multlineCb:function(n){return n.trim().search(/\\$/)===-1?!1:0}});else if(wTe(t))e=yTe(),r=eA({welcomeString:["Welcome to the Python REPL! Press Shift+Enter to write","multiline expressions."].join(" ")});else if(STe(t))e=bTe(),r=eA({welcomeString:["Welcome to the JavaScript REPL! Press Shift+Enter to write","multiline expressions."].join(" ")});else return;(function n(){r.promptForInput(function(i){e(i).then(function(a){r.writeToConsole(a.trim()),n()})})})()}});var uz=R((k2e,TTe)=>{TTe.exports=`<div id="js-bit-interpreter" class="bit-interpreter">

    <div class="controls-wrapper">

        <div class="control-header">Metadata</div>

        <div id="js-editor-controls" class="interpreter-controls codehs-form center">
            <div class="control-wrapper {{#if showInterpretSelect}}{{else}}gone{{/if}}">
                <label for="interpretbits" class="control-elem">Interpret As:</label>
                <select name="interpretbits" id="js-interpret-bits" class="control-elem">

                    {{#if isBW}}
                    <option value="{{SELECT_OPTIONS.INTERPRET.BLACKWHITE}}">B &amp; W</option>
                    {{else}}
                        {{#if isColor}}
                        <option value="{{SELECT_OPTIONS.INTERPRET.BLACKWHITE}}">B &amp; W</option>
                        {{/if}}
                    {{/if}}

                    {{#if isColor}}
                    <option value="{{SELECT_OPTIONS.INTERPRET.COLOR}}">Color</option>
                    {{/if}}

                    {{#if isText}}
                    <option value="{{SELECT_OPTIONS.INTERPRET.ASCII}}">ASCII</option>
                    {{/if}}

                    {{#if isCustom}}
                    <option value="{{SELECT_OPTIONS.INTERPRET.CUSTOM_TEXT}}">Custom</option>
                    {{/if}}
                </select>
            </div>

            <div id="js-display-bits-wrapper" class="control-wrapper {{#if isCustom}}gone{{/if}}">
                <label for="js-display-bits" class="control-elem">Display As:</label>
                <select name="displaybits" id="js-display-bits" class="control-elem">
                    <option value="{{SELECT_OPTIONS.DISPLAY.BINARY}}">Binary</option>
                    <option value="{{SELECT_OPTIONS.DISPLAY.HEXADECIMAL}}">Hexadecimal</option>
                </select>
            </div>

            <div id="js-rows-cols-control">
                <div class="control-wrapper">
                    <label for="numrows" class="control-elem">Rows:</label>
                    <input name="numrows" class="control-elem" id="js-num-rows" type="number" min="1" max="255" value="8">
                </div>
                <div class="control-wrapper">
                    <label for="numcols" class="control-elem">Columns:</label>
                    <input name="numcols" class="control-elem" id="js-num-cols" type="number" min="1" max="255" value="8">
                </div>
            </div>

            <div id="js-encoding-table" class="control-wrapper encoding-table-container"></div>

        </div>

        <div class="format-bits-wrapper">
            <button id="js-format-pretty" class="btn btn-main-silver format-bits-btn">Pretty</button
            ><div style="width:10%; display:inline-block"></div
            ><button id="js-format-raw" class="btn btn-main-slate format-bits-btn">Raw</button>
        </div>
    </div><div id="js-editor-textarea" class="interpreter-textarea"></div>

</div>
`});var cz=R((I2e,CTe)=>{CTe.exports=`<div class="text-center encoding-header">{{title}}:</div>
{{#if isColor}}
<div style="padding-bottom:5px;">
    <input class="js-color-picker-container"></input>
</div>
<div class="encoding-table table-responsive" style="max-height:275px">
<table class="table">
    <col style="width:90px">
    <tr>
        <th><div>Key<div></th>
        <th><div>Value<div></th>
    </tr>
    <tr>
        <td class="js-color-picker-display color-picker-display"></td>
        <td><div class="js-color-picker-color color-picker-color"></div></td>
    </tr>
</table>
</div>
{{else}}
<div class="encoding-table table-responsive" style="max-height:275px">
<table class="table">
    <col style="width:50%">
    <col style="width:50%">
    <tr>
        <th><div>Key<div></th>
        <th><div>Value<div></th>
    </tr>
    {{#each encodings}}
    <tr>
        <td style="font-family: monospace;">{{key}}</td>
        <td>{{value}}</td>
    </tr>
    {{/each}}
</table>
</div>
{{/if}}
`});var lz=R((D2e,ETe)=>{ETe.exports=`<div class="text-center encoding-header">Custom Encoding:</div>
<div class="num-bits-wrapper">
    <div class="num-bits-label">Bits in Encoding: <span class="js-num-bits-num">{{numBits}}</span></div>
    <span class="num-bit-slider-value">1</span>
    <div id="js-num-bits" class="num-bits-slider"></div>
    <span class="num-bit-slider-value">24</span>
</div>
<div class="encoding-table">
<table class="table">
    <col style="width:90px">
    <col>
    <col style="width:20%">
    <tr>
        <th><div>Key<div></th>
        <th><div>Value<div></th>
        <th><div>Edit<div></th>
    </tr>
    {{#each encodingForNumBits}}
    <tr>
        <td style="font-family: monospace;">{{@key}}</td>
        <td>{{this}}</td>
        <td><button data-key="{{@key}}" class="js-remove-encoding btn btn-main-orange encoding-btn"><span class="chs-icon-cancel"></span></button></td>
    </tr>
    {{/each}}
</table>
</div>

<div class="encoding-input-box">
    <div class="input-wrapper">
        <input id="js-encoding-key" placeholder="{{numBits}} Bits" type="text" class="encoding-input" name="encoding-key"></input>
        <input id="js-encoding-value" placeholder="Value" type="text" class="encoding-input" name="encoding-value"></input>
    </div>
    <div class="add-btn-wrapper">
        <button id="js-add-encoding" class="btn btn-main-green encoding-btn"><span class="icon icon-plus"></span></button>
    </div>
</div>
{{#if errorMessages.length}}
<div class="bg-red encoding-error-box">
    {{#each errorMessages}}
    <div>{{this}}</div>
    {{/each}}
</div>
{{/if}}
`});var fz=R((O2e,dz)=>{var xTe=qV(),ATe=Handlebars.compile(lz()),vr={encodings:_.range(1,25).reduce(function(t,e){return t[e]={},t},{}),numBits:8,key:"",value:"",errorMessages:[]},Cg=new xTe,kTe="#js-add-encoding",ITe=".js-remove-encoding",DTe="#js-encoding-key",OTe="#js-encoding-value",PTe="#js-num-bits",RTe=".js-num-bits-num";function rA(t){return t.replaceAll("<","&lt;").replaceAll(">","&gt;")}function LTe(t,e,r){var n=[{passed:e.length,message:"Key must have a value."},{passed:t.length===r.numBits,message:"Key must be "+r.numBits+" bits long."},{passed:!/[^10]/.test(t),message:"Key must only include 1's and 0's."},{passed:!r.encodings[r.numBits][t],message:"Key must not already exist."}];return _.chain(n).reject("passed").map("message").value()}var Ec;function NTe(t){return Object.entries(vr.encodings[vr.numBits]).reduce(function(e,r){var n=r[0],i=r[1];return e[n]=rA(i),e},{})}function Eg(t){var e=$(t);vr.encodings=Object.entries(vr.encodings).reduce(function(c,l){var f=l[0],g=l[1];return c[f]=NTe(g),c}),vr.encodingForNumBits=vr.encodings[vr.numBits],Ec=$(ATe(vr));var r=Ec.find(ITe),n=Ec.find(kTe),i=Ec.find(DTe),a=Ec.find(OTe),s=Ec.find(PTe),o=Ec.find(RTe);i.val(vr.key),a.val(rA(vr.value)),s.slider({orientation:"horizontal",range:"min",min:1,max:24,value:vr.numBits,change:function(c,l){vr.numBits=l.value,vr.key=i.val(),vr.value=a.val(),vr.errorMessages=[],Eg(t),Cg.emit("change")},slide:function(c,l){o.text(l.value)}}),n.on("click",function(){var c=i.val(),l=rA(a.val()),f=LTe(c,l,vr);f.length?(vr.key=c,vr.value=l,vr.errorMessages=f):(vr.key="",vr.value="",vr.encodings[vr.numBits][c]=l,vr.errorMessages=f),Eg(t),Cg.emit("change")}),r.on("click",function(){var c=$(this);delete vr.encodings[vr.numBits][c.data("key")],vr.key=i.val(),vr.value=a.val(),Eg(t),Cg.emit("change")}),e.html(Ec)}dz.exports=function(t){return Eg(t),{getEncodings:function(){return vr.encodings[vr.numBits]},getAllEncodings:function(){return vr.encodings},updateEncodings:function(e){_.assign(vr.encodings,e)},setEncodings:function(e){vr.encodings=e},getNumBits:function(){return vr.numBits},setNumBits:function(e){vr.numBits=e},change:Cg.addListener.bind(Cg,"change"),show:function(){Eg(t,vr)}}}});var _z=R((R2e,bz)=>{var xg=Rr(),P2e=Er(),FTe=Handlebars.compile(uz()),iA=Handlebars.compile(cz()),MTe=fz(),UTe="#js-editor-controls",$Te="#js-interpret-bits",BTe="#js-format-pretty",qTe="#js-format-raw",jTe="#js-display-bits-wrapper",HTe="#js-display-bits",GTe="#js-rows-cols-control",zTe="#js-num-rows",VTe="#js-num-cols",WTe="#js-encoding-table",KTe=".js-color-picker-container",pz=".js-color-picker-display",hz=".js-color-picker-color",Ag="metadata.json",gz="_",XTe="CCCCCC",YTe="FFDDDD",Sr={INTERPRET:{BLACKWHITE:"blackwhite",COLOR:"color",ASCII:"ascii",CUSTOM_TEXT:"custom-text"},DISPLAY:{BINARY:"binary",HEXADECIMAL:"hex"},FORMAT:{RAW:"raw",PRETTY:"pretty"}},ss=function(t,e,r){return r=typeof r>"u"?!0:r,r?e.match(new RegExp(".{"+t+"}","g"))||[]:e.match(new RegExp(".{1,"+t+"}","g"))||[]},JTe=function(t,e,r,n,i){return i=i.replace(/\s/g,""),t===Sr.DISPLAY.BINARY?e===Sr.INTERPRET.BLACKWHITE?i=ss(r,i,!1).join(`
`):e===Sr.INTERPRET.COLOR?i=ss(24,i,!1).map(function(a){return ss(8,a,!1).join(`
`)}).join(`

`):e===Sr.INTERPRET.ASCII?i=ss(8,i,!1).join(`
`):e===Sr.INTERPRET.CUSTOM_TEXT&&(i=ss(n,i,!1).join(`
`)):t===Sr.DISPLAY.HEXADECIMAL&&(e===Sr.INTERPRET.BLACKWHITE?i=ss(Math.floor(r/4),i,!1).join(`
`):e===Sr.INTERPRET.COLOR?i=ss(6,i,!1).join(`
`):e===Sr.INTERPRET.ASCII?i=ss(2,i,!1).join(`
`):e===Sr.INTERPRET.CUSTOM_TEXT&&(i=ss(Math.floor(n/4),i,!1).join(`
`))),i},vz=_.range(256).map(function(t){return _.padLeft(rCe(t),8,"0")}).reduce(function(t,e){return t.push({key:e,value:yz(e)}),t},[]).map(function(t){return/[^\x20-\x7E]/.test(t.value)&&/[^\xA1-\xFF]/.test(t.value)&&t.key!=="00001010"||t.key==="10101101"?(t.value="Can't Display",t):t.key==="00100000"?(t.value="space",t):(t.key==="00001010"&&(t.value="newline"),t)}).filter(function(t){return t.value!=="Can't Display"}),QTe=_.map(vz,function(t){var e={};return e.key=nA(t.key),e.value=t.value,e}),ZTe=[{key:"0",value:"black"},{key:"1",value:"white"}],eCe=function(t){return _.map(t,function(e){return e==="1"?"w":"b"})},tCe=_.range(16).map(function(t){return{key:mz(t),value:eCe(kg(mz(t)))}});function nA(t){return ss(4,t,!1).reduce(function(e,r){return e+parseInt(_.padRight(r,4,"0"),2).toString(16)},"")}function kg(t){return t.split("").reduce(function(e,r){return e+_.padLeft(parseInt(r,16).toString(2),4,"0")},"")}function rCe(t){return t.toString(2)}function mz(t){return t.toString(16)}function yz(t){return String.fromCharCode(parseInt(t,2))}function iCe(t){return t==="<"?"&lt;":t===">"?"&gt;":t}function nCe(t,e,r,n){var i=Math.min(t/e,t/r),a=Math.abs(e-r);return{fill:n.fill,x:n.x+(e>r?a*i/2:0),y:n.y+(e<r?a*i/2:0),width:n.width,height:n.width}}function aCe(t,e,r,n){var i=Math.min(t/e,t/r),a=i/50;return{fill:n.fill,x:n.x+a,y:n.y+a,width:n.width-a*2,height:n.width-a*2}}function sCe(t,e,r,n,i){var a=Math.min(t/e,t/r);return{fill:"#"+n,x:i%r*a,y:Math.floor(i/r)*a,width:a,height:a}}function oCe(t,e){t.fillStyle=e.fill,t.fillRect(e.x,e.y,e.width,e.height)}function uCe(t,e,r,n,i,a,s,o){var c=e===Sr.INTERPRET.COLOR;e===Sr.INTERPRET.COLOR||e===Sr.INTERPRET.BLACKWHITE?(o.clearRect(0,0,o.canvas.width,o.canvas.height),o.fillStyle="#"+XTe,o.fillRect(0,0,o.canvas.width,o.canvas.height),_.chain(t).trunc({length:r*n*(c?24:1),omission:""}).padRight(r*n*(c?24:1),gz).thru(ss.bind(null,c?24:1)).forEach(function(l,f){var g;_.includes(l,gz)?g=YTe:g=c?nA(l):l==="0"?"000000":"FFFFFF";var m=sCe(i,r,n,g,f);m=aCe(i,r,n,m),m=nCe(i,r,n,m),oCe(o,m)}).value()):e===Sr.INTERPRET.ASCII?_.chain(t).thru(ss.bind(null,8)).reduce(function(l,f){return l+iCe(yz(f))},"").tap(function(l){o.text(l)}).value():e===Sr.INTERPRET.CUSTOM_TEXT&&_.chain(t).thru(ss.bind(null,s)).reduce(function(l,f){var g='<span class="chs-icon-bug text-red" data-toggle="tooltip" title="No encoding for '+f+'"></span>';return l+(a[f]?a[f]:g)},"").tap(function(l){var f=$("<div>"+l+"</div>");f.find('[data-toggle="tooltip"]').tooltip(),o.html(f)}).value()}bz.exports=function(t,e,r,n){var i=xg.ProgramType.BIT_INTERPRETER_ALL===e,a=xg.ProgramType.BIT_INTERPRETER_BW===e||i,s=xg.ProgramType.BIT_INTERPRETER_COLOR===e||i,o=xg.ProgramType.BIT_INTERPRETER_TEXT===e||i,c=xg.ProgramType.BIT_INTERPRETER_TEXT_CUSTOM===e;r.aceEditor.getEditor().getSession().setUseWrapMode(!0);var l=$(FTe({isBW:a,isColor:s,isText:o,isCustom:c,showInterpretSelect:i||s,SELECT_OPTIONS:Sr})),f=$('<canvas style="display: block;margin: auto;border: 1px solid #CCCCCC;"></canvas>'),g=$('<pre style="display: block;margin: auto;border: 1px solid #CCCCCC;font-size:14px;word-wrap: normal;word-break: normal;"></pre>'),m=$(n),y=l.find(UTe),x=l.find(qTe),I=l.find(BTe),A=y.find($Te),F=y.find(jTe),X=y.find(HTe),de=y.find(GTe),N=y.find(zTe),H=y.find(VTe),z=y.find(WTe),Y=MTe(z);f.attr({height:t,width:t}),g.css({height:t,width:t});function G(){var ce=Sr.DISPLAY.HEXADECIMAL===X.val(),tt=Sr.INTERPRET.COLOR===A.val()||Sr.INTERPRET.BLACKWHITE===A.val(),ft=r.aceEditor.getValue().replace(/\s/g,"");uCe(ce?kg(ft):ft,A.val(),parseInt(N.val(),10),parseInt(H.val(),10),t,Y.getEncodings(),Y.getNumBits(),tt?f.get(0).getContext("2d"):g)}function ie(){var ce=A.val(),tt=X.val();z.html(""),ce===Sr.INTERPRET.CUSTOM_TEXT?Y.show():ce===Sr.INTERPRET.ASCII?(z.html(iA({encodings:tt===Sr.DISPLAY.BINARY?vz:QTe,title:"ASCII Encoding"})),$(".encoding-table").scrollTop(2500)):ce===Sr.INTERPRET.BLACKWHITE?z.html(iA({encodings:tt===Sr.DISPLAY.BINARY?ZTe:tCe,title:"B & W Encoding"})):ce===Sr.INTERPRET.COLOR&&(z.html(iA({title:"Color Encoding",isColor:!0})),$(KTe).spectrum({showButtons:!1,flat:!0,show:function(ft){var pt=X.val()===Sr.DISPLAY.BINARY,Ye=ft.toHexString().substring(1),xt=kg(Ye);$(pz).text(pt?xt:Ye),$(hz).css("background-color","#"+Ye)},move:function(ft){var pt=X.val()===Sr.DISPLAY.BINARY,Ye=ft.toHexString().substring(1),xt=kg(Ye);$(pz).text(pt?xt:Ye),$(hz).css("background-color","#"+Ye)}}))}function fe(){var ce=Sr.INTERPRET.COLOR===A.val()||Sr.INTERPRET.BLACKWHITE===A.val();ce?m.html(f):m.html(g)}function Ne(){var ce=Sr.INTERPRET.COLOR===A.val()||Sr.INTERPRET.BLACKWHITE===A.val();ce?de.show():de.hide()}function ye(){function ce(tt,ft){var pt=JSON.parse(r.currentCode[Ag]);pt[tt]=ft,r.currentCode[Ag]=JSON.stringify(pt)}Y.change(function(){ce("encodings",Y.getAllEncodings()),ce("numBits",Y.getNumBits()),r.save(),G()}),x.on("click",function(){r.aceEditor.setValue(r.aceEditor.getValue().replace(/\s/g,""))}),I.on("click",function(){r.aceEditor.setValue(JTe(X.val(),A.val(),parseInt(H.val(),10),parseInt(Y.getNumBits(),10),r.aceEditor.getValue()))}),A.on("change",function(){ce("interpretAs",A.val()),ie(),fe(),Ne(),G()}),X.on("change",function(){ce("displayAs",X.val());var tt=r.aceEditor.getValue().replace(/[\s]/g,"");tt=Sr.DISPLAY.BINARY===X.val()?kg(tt):nA(tt),r.aceEditor.setValue(tt),I.trigger("click"),ie()}),N.on("change",function(){ce("rows",N.val()),G()}),H.on("change",function(){ce("cols",H.val()),G()}),r.aceEditor.getEditor().on("change",G),setInterval(function(){var tt=/[^01\s]/;X.val()===Sr.DISPLAY.BINARY?tt=/[^01\s]/:X.val()===Sr.DISPLAY.HEXADECIMAL&&(tt=/[^0123456789abcdefABCDEF\s]/),r.aceEditor.getEditor().replaceAll("",{needle:tt,regex:!0})})}function He(){try{JSON.parse(r.currentCode[Ag])}catch{r.currentCode[Ag]="{}"}var ce=JSON.parse(r.currentCode[Ag]);ce.interpretAs&&A.val(ce.interpretAs),ce.displayAs&&X.val(ce.displayAs),ce.rows&&N.val(ce.rows),ce.cols&&H.val(ce.cols),ce.encodings&&Y.updateEncodings(ce.encodings),ce.numBits&&Y.setNumBits(ce.numBits)}function Re(){He(),ye(),ie(),fe(),Ne(),G()}function Ze(){ie()}return{editor:l,setup:Re,resize:Ze}}});var wz=R((L2e,cCe)=>{cCe.exports=`<div style="width:100%; height:calc(100% - 49px)">

    <div style="padding:5px; gap: 5px;" class="flex flex-wrap">
        <span class="form-group has-float-label flex-unit" style="margin-bottom: 0; min-width: 75px">
            <input id="js-gslide-input" placeholder="Google Slide ID" type="text" style="height: 30px; width: 100%;"></input>
            <label for="js-gslide-input">Google Slide ID</label>
        </span>
        <button id="js-gslide-edit-btn" class="btn btn-main-orange" style="flex-basis:100px; height:30px;">Edit</button
        ><button id="js-gslide-present-btn" class="btn btn-main-green" style="flex-basis:100px; height:30px;">Present</button>
    </div>

    <iframe id="js-gslide-iframe" style="border:none; width:100%; height:calc(100% - 40px)" title="Embed of slides for assignment"></iframe>
    <div id="js-gslide-error" aria-live="polite" style="padding: 140px 75px 0 75px; border:none; width:100%; height:calc(100% - 40px)">
        <div style="font-size:32px; text-align:center;">We could not load the Google Slide with that id</div>
    </div>
    <div id="js-gslide-welcome" style="padding: 140px 75px 0 75px; border:none; width:100%; height:calc(100% - 40px)">
        <div style="font-size:32px; text-align:center;">Please input the Google Slide id</div>
    </div>

</div>
`});var Az=R((N2e,xz)=>{var lCe=wz(),dCe="#js-gslide-input",fCe="#js-gslide-edit-btn",pCe="#js-gslide-present-btn",ub="#js-gslide-iframe",Sz="#js-gslide-error",Tz="#js-gslide-welcome",Cz="default.txt",hCe="https://docs.google.com/presentation/d/${slideId}/${type}?rm=minimal",cb={PRESENT:"embed",EDIT:"edit"};function Ez(t,e){return hCe.replace("${slideId}",t).replace("${type}",e)}xz.exports=function(t){var e=$(lCe),r=e.find(dCe),n=e.find(fCe),i=e.find(pCe),a=e.find(ub),s=e.find(Sz),o=e.find(Tz);function c(f){[a,s,o].forEach(function(g){g.is(f)?f===ub?g.on("load",function(){g.show()}):g.show():g.hide()})}function l(f){var g=r.val(),m=Ez(g,f);$.get(m).done(function(){a.attr("src",m),t.activeFile||(t.activeFile=Cz),t.setCode(g),t.save(),c(ub)}).fail(function(){c(Sz)})}return n.on("click",function(){l(cb.EDIT)}),i.on("click",function(){l(cb.PRESENT)}),r.on("change",function(){l(cb.PRESENT)}),function(){var g=t.currentCode[Cz],m=Ez(g,cb.PRESENT);$.get(m).done(function(){a.attr("src",m),r.val(g),c(ub)}).fail(function(){c(Tz)})}(),e}});var kz=R((F2e,gCe)=>{gCe.exports=`<div style="width:100%; height:100%; text-align:center; overflow-y:auto">
    <h2>{{title}}</h2>
    <div style="height: 600px; width: 600px; margin:auto;" id="js-run-tab-container"></div>
    <button style="position:fixed; right: 20px; bottom: 60px" id="js-continue-btn" class="btn btn-main-green">Continue</button>
</div>
`});var Dz=R((M2e,Iz)=>{var mCe=Ql(),vCe=Handlebars.compile(kz()),yCe="#js-continue-btn";Iz.exports=function(t){var e=$(vCe({title:t.itemTitle})),r=e.find(yCe);return r.on("click",function(){mCe({item_id:t.itemID,module_id:t.moduleID,course_id:t.courseID,correct:!0,auto_grade:!0},t.goToNext)}),e}});var aA=R((U2e,bCe)=>{bCe.exports=`import java.util.*;

public class ConsoleProgram{

    private Scanner scanner;
    private ArrayList<String> inputs;
    private int curInputIndex = 0;

    public static void main(String[] args){
        // Assume the class name is passed in as the first argument.

        if(args.length == 0){
            System.out.println("Please provide the name of the main class as an argument.");
            return;
        }

        String mainClassName = args[0];

        try{
            Class mainClass = Class.forName(mainClassName);
            Object obj = mainClass.newInstance();
            ConsoleProgram program = (ConsoleProgram)obj;
            program.run();
        } catch (IllegalAccessException ex) {
            System.out.println("Error in program. Make sure you extend ConsoleProgram");
        } catch (InstantiationException ex) {
            System.out.println("Error in program. Make sure you extend ConsoleProgram");
        } catch (ClassNotFoundException ex) {
            System.out.println("Error in program. Make sure you extend ConsoleProgram");
        }
    }

    public void run(){
        /* Overridden by subclass */
    }

    public ConsoleProgram(){
        scanner = new Scanner(System.in);

    }

    /**
     * Allows you to set all inputs at once as strings.
     * @param inputStrings Array of strings to be inputs
     */
    public void setInputs(String[] inputStrings)
    {
        inputs = new ArrayList<String>(Arrays.asList(inputStrings));
    }

    /**
     * Allows you to add an input to your inputs.
     * @param s String to add
     */
    public void addInput(String s)
    {
        if (inputs == null)
        {
            inputs = new ArrayList<String>();
        }
        inputs.add(s);
    }

    public String readLine(String prompt){
        System.out.print(prompt);
        return scanner.nextLine();
    }

    public boolean readBoolean(String prompt){

        while(true){
            String input = readLine(prompt);

            if(input.equalsIgnoreCase("true")){
                return true;
            }

            if(input.equalsIgnoreCase("false")){
                return false;
            }
        }
    }

    public double readDouble(String prompt){

        while(true){
            String input = readLine(prompt);
            try {
                double n = Double.valueOf(input).doubleValue();
                return n;
            } catch (NumberFormatException e){

            }
        }
    }

    // Allow the user to get an integer.
    public int readInt(String prompt){

        while(true){
            String input = readLine(prompt);
            try {
                int n = Integer.parseInt(input);
                return n;
            } catch (NumberFormatException e){

            }
        }
    }

    /**
     * Allows us to use a shorthand version for System.out.println()
     */
    public void println() {
        System.out.println();
    }

    /**
     * Allows us to use a shorthand version for System.out.println(String s)
     */
    public void println(String s) {
        System.out.println(s);
    }

    /**
     * Allows us to use a shorthand version for System.out.println(boolean x)
     */
    public void println(boolean x) {
        System.out.println(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.println(char x)
     */
    public void println(char x) {
        System.out.println(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.println(char[] x)
     */
    public void println(char[] x) {
        System.out.println(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.println(int x)
     */
    public void println(int x) {
        System.out.println(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.println(long x)
     */
    public void println(long x) {
        System.out.println(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.println(float x)
     */
    public void println(float x) {
        System.out.println(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.println(double x)
     */
    public void println(double x) {
        System.out.println(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.println(Object o)
     */
    public void println(Object o) {
        System.out.println(o);
    }

    /**
     * Allows us to use a shorthand version for System.out.print()
     */
    public void print() {
        System.out.print("");
    }

    /**
     * Allows us to use a shorthand version for System.out.print(String s)
     */
    public void print(String s) {
        System.out.print(s);
    }

    /**
     * Allows us to use a shorthand version for System.out.print(boolean x)
     */
    public void print(boolean x) {
        System.out.print(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.print(char x)
     */
    public void print(char x) {
        System.out.print(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.print(char[] x)
     */
    public void print(char[] x) {
        System.out.print(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.print(int x)
     */
    public void print(int x) {
        System.out.print(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.print(long x)
     */
    public void print(long x) {
        System.out.print(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.print(float x)
     */
    public void print(float x) {
        System.out.print(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.print(double x)
     */
    public void print(double x) {
        System.out.print(x);
    }

    /**
     * Allows us to use a shorthand version for System.out.print(Object o)
     */
    public void print(Object o) {
        System.out.print(o);
    }
}
`});var Oz=R(($2e,_Ce)=>{_Ce.exports=`#ifndef _util
#define _util

#include <iostream>
#include <vector>

using  namespace std;

void Error(string message);

string readLine(const string prompt = "?");

int readInt(const string prompt = "?", string reprompt = "");
int readInt(const int low, const int high, const string prompt = "?", string reprompt = "");

double readDouble(const string prompt = "?", string reprompt = "");
double readDouble(const double low, const double high, const string prompt = "?", string reprompt = "");

vector<string> splitLine(string input, char delimeter = ' ');

string toUpperCase(string s);
string toLowerCase(string s);

void setSeed(int seed);
int randInt();
int randInt(int min, int max);

#endif`});var Pz=R((B2e,wCe)=>{wCe.exports=`#include "util.h"
#include <iostream>
#include <sstream>
#include <ctime>

using namespace std;

void Error(string message) {
    cerr << "Error: " << message << endl;
    exit(-1);
}

string readLine(const string prompt)
{
    cout << prompt;
    string line;
    getline(cin, line);
    return line;
}

double readDouble(const string prompt, string reprompt) {
    if (reprompt == "") reprompt = prompt;

    double value = 0;
    cout << prompt;
    while (true) {
        string line;
        try {
            if (!getline(cin, line)) {
                throw "getInteger: End of input reached while waiting for integer value.";
            }
        }
        catch (const char *c) {
            cerr << c << endl;
            exit (EXIT_FAILURE);
        }

        istringstream stream(line);
        stream >> value;
        if (!stream.fail() && stream.eof()) {
            break;
        }

        cout<<  reprompt;
    }
    return value;
}

double readDouble(const double low, const double high, const string prompt, string reprompt) {
    if (reprompt == "") reprompt = prompt;
    double value = readDouble(prompt, reprompt);

    while (value < low || value > high) {
        value = readDouble(reprompt);
    }

    return value;
}

int readInt(const string prompt, string reprompt) {
    if (reprompt == "") reprompt = prompt;

    int value = 0;
    cout << prompt;
    while (true) {
        string line;
        try {
            if (!getline(cin, line)) {
                throw "getInteger: End of input reached while waiting for integer value.";
            }
        }
        catch (const char *c) {
            cerr << c << endl;
            exit (EXIT_FAILURE);
        }

        istringstream stream(line);
        stream >> value;
        if (!stream.fail() && stream.eof()) {
            break;
        }

        cout<<  reprompt;
    }
    return value;
}

int readInt(const int low, const int high, const string prompt, string reprompt) {
    if (reprompt == "") reprompt = prompt;
    int value = readInt(prompt, reprompt);

    while (value < low || value > high) {
        value = readInt(reprompt);
    }

    return value;
}

vector<string> splitLine(string input, char delimeter) {

    vector<string> output;
    istringstream stream(input);
    string token;

    while(getline(stream, token, delimeter)) {
        output.push_back(token);
    }
    return output;
}

string toUpperCase(string s) {
    string result;
    for (int i = 0; i < (int)s.length(); i++) {
        result += toupper(s[i]);
    }
    return result;
}

string toLowerCase(string s){
    string result;
    for (int i = 0; i < (int)s.length(); i++) {
        result += tolower(s[i]);
    }
    return result;
}

static void initRandomSeed() {
    static bool initialized = false;
    if (!initialized) {
        srand(int(time(0)));
        rand();
        initialized = true;
    }
}

void setSeed(int seed) {
    initRandomSeed();
    srand(seed);
}

int randInt(){
    initRandomSeed();
    return rand();
}

int randInt(int min, int max) {
    initRandomSeed();
    return rand() % (max - min + 1) + min;
}
`});var Rz=R((q2e,SCe)=>{SCe.exports=`import java.util.*;

public class GraphicsProgram extends ConsoleProgram
{

    // These are the defaults
    double width = 400;
    double height = 480;

    public void add(Thing thing)
    {
        System.out.println("js:add(" + thing.name + ");");
    }

    public double getWidth()
    {
        return width;
    }

    public double getHeight()
    {
        return height;
    }

    public void setSize(double width, double height)
    {
        this.width = width;
        this.height = height;
        System.out.println("js:setSize(" + width + "," + height + ");");
    }

    public void setSize(int width, int height)
    {
        this.width = (double)width;
        this.height = (double)height;
        System.out.println("js:setSize(" + width + "," + height + ");");
    }
}
`});var Lz=R((j2e,TCe)=>{TCe.exports=`import java.util.Random;

public class Randomizer{

    public static Random theInstance = null;

    public Randomizer(){

    }

    public static Random getInstance(){
        if(theInstance == null){
            theInstance = new Random();
        }
        return theInstance;
    }

    /**
     * Return a random boolean value.
     * @return True or false value simulating a coin flip.
     */
    public static boolean nextBoolean(){
        return Randomizer.getInstance().nextBoolean();
    }

    /**
     * This method simulates a weighted coin flip which will return
     * true with the probability passed as a parameter.
     *
     * @param   probability The probability that the method returns true, a value between 0 to 1 inclusive.
     * @return True or false value simulating a weighted coin flip.
     */
    public static boolean nextBoolean(double probability){
        return Randomizer.nextDouble() < probability;
    }

    /**
     * This method returns a random integer.
     * @return A random integer.
     */
    public static int nextInt(){
        return Randomizer.getInstance().nextInt();
    }

    /**
     * This method returns a random integer between 0 and n, exclusive.
     * @param n The maximum value for the range.
     * @return A random integer between 0 and n, exclusive.
     */
    public static int nextInt(int n){
        return Randomizer.getInstance().nextInt(n);
    }

    /**
     * Return a number between min and max, inclusive.
     * @param min   The minimum integer value of the range, inclusive.
     * @param max   The maximum integer value in the range, inclusive.
     * @return A random integer between min and max.
     */
    public static int nextInt(int min, int max){
        return min + Randomizer.nextInt(max - min + 1);
    }

    /**
     * Return a random double between 0 and 1.
     * @return A random double between 0 and 1.
     */
    public static double nextDouble(){
        return Randomizer.getInstance().nextDouble();
    }

    /**
     * Return a random double between min and max.
     * @param min The minimum double value in the range.
     * @param max The maximum double value in the rang.
     * @return A random double between min and max.
     */
    public static double nextDouble(double min, double max){
        return min + (max - min) * Randomizer.nextDouble();
    }

    /**
     * Return a random color.
     * @return A random hex string that represents a color.
     */
    public static String nextColor(){
        String randomNum = Integer.toHexString(Randomizer.nextInt(0, 16777216));
        return "'#" + randomNum + "'";
    }


}
`});var Nz=R((H2e,CCe)=>{CCe.exports=`public class Color
{

    public static String black = "Color.black";
    public static String red = "Color.red";
    public static String blue = "Color.blue";
    public static String green = "Color.green";
    public static String yellow = "Color.yellow";
    public static String orange = "Color.orange";
    public static String gray = "Color.gray";
    public static String grey = "Color.gray";
    public static String cyan = "Color.cyan";
    public static String purple = "Color.purple";

    public static String BLACK = "Color.black";
    public static String RED = "Color.red";
    public static String BLUE = "Color.blue";
    public static String GREEN = "Color.green";
    public static String YELLOW = "Color.yellow";
    public static String ORANGE = "Color.orange";
    public static String GRAY = "Color.gray";
    public static String GREY = "Color.gray";
    public static String CYAN = "Color.cyan";
    public static String PURPLE = "Color.purple";
}
`});var Fz=R((G2e,ECe)=>{ECe.exports=`public class Thing
{

    public static int numThings = 0;

    double x = 0;
    double y = 0;
    String color = "Color.black";
    String name;
    String type = "Thing";

    public void setPosition(int x, int y)
    {
        this.x = (double)x;
        this.y = (double)y;
        System.out.println("js:" + name + ".setPosition(" + x + "," + y + ");");
    }

    public void setPosition(double x, double y)
    {
        this.x = x;
        this.y = y;
        System.out.println("js:" + name + ".setPosition(" + x + "," + y + ");");
    }

    public void move(int dx, int dy)
    {
        this.x += (double)dx;
        this.y += (double)dy;
        System.out.println("js:" + name + ".move(" + dx + "," + dy + ");");
    }

    public void move(double dx, double dy)
    {
        this.x += dx;
        this.y += dy;
        System.out.println("js:" + name + ".move(" + dx + "," + dy + ");");
    }

    public double getX()
    {
        return x;
    }

    public double getY()
    {
        return y;
    }

    public void setColor(String color)
    {
        if (color.charAt(0) == '#')
        {
            // So you can just enter a hex string in addition to Color.___
            color = "'" + color + "'";
        }
        this.color = color;
        System.out.println("js:" + name + ".setColor(" + this.color + ");");
    }

    public String getColor()
    {
        return color;
    }
}
`});var Mz=R((z2e,xCe)=>{xCe.exports=`public class Circle extends Thing
{

    double radius = 10;

    public Circle(int radius)
    {
        this.radius = (double)radius;
        this.type = "Circle";
        this.name = "thing" + Thing.numThings++;
        System.out.println("js:var " + name + " = new Circle(" + radius + ");");
    }

    public Circle(double radius)
    {
        this.radius = radius;
        this.name = "thing" + Thing.numThings++;
        System.out.println("js:var " + name + " = new Circle(" + radius + ");");
    }

    public void setRadius(int radius)
    {
        this.radius = (double)radius;
        System.out.println("js:" + name + ".setRadius(" + radius + ");");
    }

    public void setRadius(double radius)
    {
        this.radius = radius;
        System.out.println("js:" + name + ".setRadius(" + radius + ");");
    }

    public double getRadius()
    {
        return radius;
    }
}
`});var Uz=R((V2e,ACe)=>{ACe.exports=`public class Rectangle extends Thing
{

    double width = 10;
    double height = 10;

    public Rectangle(int width, int height)
    {
        this.width = (double)width;
        this.height = (double)height;
        this.type = "Rectangle";
        this.name = "thing" + Thing.numThings++;
        System.out.println("js:var " + name + " = new Rectangle(" + width + "," + height +  ");");
    }

    public Rectangle(double width, double height)
    {
        this.width = width;
        this.height = height;
        this.name = "thing" + Thing.numThings++;
        System.out.println("js:var " + name + " = new Rectangle(" + width + "," + height +  ");");
    }

    public double getWidth()
    {
        return width;
    }

    public double getHeight()
    {
        return height;
    }
}
`});var $z=R((W2e,kCe)=>{kCe.exports=`public class Line extends Thing
{

    double x2 = 10;
    double y2 = 10;
    double lineWidth = 2;

    public Line(int x1, int y1, int x2, int y2)
    {
        this.x = (double)x1;
        this.y = (double)y1;
        this.x2 = (double)x2;
        this.y2 = (double)y2;
        this.type = "Line";
        this.name = "thing" + Thing.numThings++;
        System.out.println("js:var " + name + " = new Line(" + this.x + "," + this.y + "," + this.x2 + "," + this.y2 +  ");");
    }

    public Line(double x1, double y1, double x2, double y2)
    {
        this.x = x1;
        this.y = y1;
        this.x2 = x2;
        this.y2 = y2;
        this.name = "thing" + Thing.numThings++;
        System.out.println("js:var " + name + " = new Line(" + x1 + "," + y1 + "," + x2 + "," + y2 +  ");");
    }

    public void setEndpoint(int x, int y)
    {
        this.x2 = (double)x;
        this.y2 = (double)y;
        System.out.println("js:" + name + ".setEndpoint(" + this.x2 + "," + this.y2 + ");");
    }

    public void setEndpoint(double x, double y)
    {
        this.x2 = x;
        this.y2 = y;
        System.out.println("js:" + name + ".setEndpoint(" + this.x2 + "," + this.y2 + ");");
    }

    public void setLineWidth(double width)
    {
        this.lineWidth = width;
        System.out.println("js:" + name + ".setLineWidth(" + this.lineWidth + ");");
    }

    public double getEndX()
    {
        return x2;
    }

    public double getEndY()
    {
        return y2;
    }
}
`});var Bz=R((K2e,ICe)=>{ICe.exports=`public class Text extends Thing
{

    String text = "";
    String font = "30pt Arial";

    public Text(String text)
    {
        this.text = text;
        this.type = "Text";
        this.name = "thing" + Thing.numThings++;
        System.out.println("js:var " + name + " = new Text('" + text + "');");
    }

    public Text(String text, String font)
    {
        this.text = text;
        this.type = "Text";
        this.font = font;
        this.name = "thing" + Thing.numThings++;
        System.out.println("js:var " + name + " = new Text('" + text + "','" + font + "');");
    }

    public String getText()
    {
        return text;
    }

    public void setText(String text)
    {
        this.text = text;
        System.out.println("js:" + name + ".setText('" + text + "');");
    }

    public void setFont(String font)
    {
        this.font = font;
        System.out.println("js:" + name + ".setFont('" + font + "');");
    }
}
`});var Qz=R((X2e,Jz)=>{"use strict";var Du=tm(),Xt=Rr(),xa=Er(),DCe=Xt.Uploads.UPLOADS_PROXY_BASE_URL,OCe=c8(),dA=Ql(),PCe=V8(),RCe=Ri().getPrettyCode,LCe=K8(),fA=Lc();ZV();var NCe=YS().displayModal,zz=VS(),FCe=mC(),MCe=xy(),UCe=Y8();eG();nG();var $Ce=e9(),BCe=Pi().getAndApplyTemplate,Iu=ui(),qCe=oG(),jCe=Pi().mock,HCe=Pi().validateFilename,GCe=Pi().validateFolderName,zCe=Pi().fileHasImageExtension,VCe=Pi().getQueryParams,qz=Pi().alert,WCe=Pi().LOCAL_URL,Hn=j0(),KCe=hl(),Vz=Zl(),oA=Yl(),jz=0,lb="#submit-button",Wz="#submit-correct",XCe="#inline-submit-button",YCe="#check-program",Kz="#next-button",JCe="#inline-next-button",Xz="#save-button",QCe="#fork-modal",Ig="#pause-button",ZCe="#forward-button",eEe="#backward-button",tEe="#stop",Nl="#add-code-file",uA=".publish-to-class",rEe="#for-loop-vars",Hz="#view-html",iEe=".editor-wrap",nEe=".ace_text-input",Yz=".run_code",aEe=".install_packages",sEe=".grading-problem-btn",cA=".error-box",lA=".error-container",oEe=1e6,uEe=["typeTester","aceEditor"],cEe=[["typeTester",YA()],["aceEditor",dG()],["editorInstructions",mG()],["editorSettings",_G()],["editorHistory",JV()],["editorSidebarContent",TG()],["editorKeyboardShortcuts",EG()],["editorColumns",vx()],["editorLineErrors",kG()],["codeSaver",LG()],["localStorageCodeSaver",FG()],["sidebar",UG()],["gradeAndRespond",BG()],["helpTab",dT()],["conversationTab",XA()],["embeddableEditor",jG()],["hourOfCodeEditor",zG()],["gradingTab",Vv()],["shareTab",aT()],["uploadTab",hT()],["pythonTutor",TT()],["docsTab",YG()],["phoneTab",gT()],["lmsGradingTab",oT()]],lEe={modules:["editorInstructions","editorSettings","editorHistory","editorSidebarContent","editorKeyboardShortcuts","editorColumns","editorLineErrors","codeSaver","sidebar","gradeAndRespond","helpTab","gradingTab","shareTab","uploadTab","pythonTutor","docsTab","phoneTab"],configs:{}},dEe={modules:["editorInstructions","editorSettings","editorHistory","editorSidebarContent","editorKeyboardShortcuts","editorColumns","editorLineErrors","codeSaver","sidebar","gradeAndRespond","conversationTab","gradingTab","shareTab","uploadTab","pythonTutor","docsTab","phoneTab","lmsGradingTab"],configs:{}},fEe={modules:["editorInstructions","editorColumns","editorLineErrors","embeddableEditor"],configs:{}},pEe={modules:["editorInstructions","editorLineErrors","localStorageCodeSaver","sidebar","hourOfCodeEditor"],configs:{}},hEe={modules:["editorLineErrors","hourOfCodeEditor"],configs:{}},gEe={modules:[],configs:{}};function Dt(t){t=t||{},t.editorFontSize?t.fontSize=t.editorFontSize+"px":t.info.font&&(t.fontSize=t.info.font+"px"),t=Du.defaults(t,{language:Xt.ProgrammingLanguage.JAVASCRIPT,code:"",mainClass:"",progType:Xt.ProgramType.KAREL,progTypeString:Xt.ProgramType.STRINGS[Xt.ProgramType.KAREL],aceElemID:"codehs-editor",fontSize:"15px",highlight:!0,itemType:Xt.ItemType.EXERCISE,itemTypeStr:Xt.ItemType.STRINGS[Xt.ItemType.EXERCISE],themeID:0,editorType:"regular",autograderCode:"{}",solutionCode:{},isSharedProgram:!1,codeEditorType:Xt.EditorType.ACE_EDITOR,runOnHub:window.pageSpecific.runOnHub});var e=this;Object.keys(t).forEach(function(r){e[r]=t[r]}),e.editorInstanceId=jz,jz++,e.paused=!1,e.isRunning=!1,e.saveIntervalId=null,e.numLoops=0,e.defaultBlocks=t.defaultBlocks,e.preventCopyPaste=t.preventCopyPaste,e.breakpoints={},$(iEe).addClass("editor-id-"+e.editorInstanceId),e.setup(t)}Dt.prototype.setup=function(t){var e=this,r=window.pageSpecific.itemDescription,n=window.pageSpecific.isQuill;Vz.chooseEditor([{qlTarget:"#quill-exercise-description",mdTarget:".markdown-exercise-description",content:r}],n),n?$("#quill-exercise-description a").attr("target","_blank"):($(".markdown-exercise-description a").attr("target","_blank"),$(".markdown-exercise-description").children("table").addClass("table")),bEe(window.pageSpecific.videoID),e.editorType!=="hourofcode"?e.loadCode(t).done(function(i){if(i.status==="ok"){var a=JSON.parse(i.solutionCode.split("").map(function(c,l){var f=CHS.GULP_URL[l%CHS.GULP_URL.length],g=String.fromCharCode((c.charCodeAt(0)-f.charCodeAt(0))%256);return g}).join(""));e.code=i.studentCode,e.currentCode=i.studentCode,e.solutionCode=a,window.editorData.startWithSolutionCode&&(e.currentCode=a),e.autograderCode=i.autograderCode,e.helperCode=i.helperCode,e.dropletCustomBlocks=i.dropletCustomBlocks,e.setupTimeTrack(),e.setupSaveInterval(),e.setupHeartbeatInterval(),e.setupModules(),e.setupActiveTab(),e.setupCollaborateTab(),e.setupLazyLoadIframeTabs(),(e.codeEditorType===Xt.EditorType.DROPLET_EDITOR||window.pageSpecific.onlyDisplayingDemosTab||window.pageSpecific.hideLeftPanel)&&$("#close-toggle").trigger("click"),e.typeTester.isPresentation()&&e.setupPresentationEditor(),e.typeTester.isDemo()&&e.setupDemoEditor(),e.typeTester.isBitInterpreter()&&e.setupBitInterpreterEditor(),e.typeTester.isDataExplorer()&&e.setupDataExplorer(),e.typeTester.isGraphics()&&(e.runner.helperCode=e.helperCode);var s;!e.typeTester.isHTML()&&!e.typeTester.isUnitTest()&&t.mainClass?(s=t.mainClass+Xt.ProgrammingLanguage.FILE_SUFFIX[e.language],e.activeFile=s):t.mainClass?(s=t.mainClass,e.activeFile=s):(s=Xt.ProgrammingLanguage.DEFAULT_FILENAME[e.language],e.activeFile=s),Du.has(e.currentCode,s)||(s=Object.keys(e.currentCode)[0],e.activeFile=s),Object.keys(e.currentCode).forEach(function(c){e.breakpoints[c]={}}),e.runner.supportsBreakpoints()&&e.setupBreakpointClicks(),e.activeFile&&e.activeFile.endsWith(".jar")?e.setCode(e.getJarASCII()):e.setCode(e.currentCode[s]),e.typeTester.isGradingQuiz()&&e.setupQuizzes(),e.setupEditorEvents(),e.setupExpo(),e.setupBackspaceCheck(),qCe.setup(),e.runner.init&&e.runner.init(),e.itemType==Xt.ItemType.REPL&&oz()(e);var o=VCe().collaborate;o&&window.pageSpecific.collaborateBlockedByDroplet?qz({header:"Unable to collaborate",rawHtml:`<p>It looks like you're trying to collaborate on a Block coding program.
To collaborate, the program's owner will need to switch this program to use text, not blocks.</p>
<a target="_blank" href="/toggling-block-coding">Learn more about blocks settings</a>`,buttonClass:"btn-main-green",button:"View Program"}):t.useFirepad&&o?e.setupFirepad(o):window.pageSpecific.unauthenticated&&o&&qz({header:"Unable to collaborate",message:`It looks like you're trying to collaborate on this program.
To collaborate, you need to log in.`,cancel_callback:function(){var c=new URL(window.location.origin+"/login");c.searchParams.set("next",window.location.pathname),c.searchParams.set("collaborate",o),window.location.href=c.href},cancelButton:!0,buttonClass:"btn-main-green",button:"View Program",cancelButtonText:"Log In",cancelButtonClass:"btn-main-blue"})}}):(e.setupModules(),e.setupActiveTab(),e.setupLazyLoadIframeTabs(),e.typeTester.isGradingQuiz()&&e.setupQuizzes(),e.setupEditorEvents(),e.setupBackspaceCheck(),e.runner.init&&e.runner.init())};Dt.prototype.setupFirepad=function(t){var e=this;e.firepad||(e.firepad=new UCe(e)),e.firepad.initialize(e.aceEditor,t)};Dt.prototype.teardownFirepad=function(){var t=this;t.firepad&&t.firepad.firepad.dispose()};Dt.prototype.setupSaveInterval=function(){var t=this;t.saveIntervalId=setInterval(function(){t.save(function(){},"autosave")},6e4)};Dt.prototype.setupHeartbeatInterval=function(){var t=this,e=1e3*60*10;t.heartbeatIntervalId=setInterval(function(){fetch("/usertracking/heartbeat")},e)};Dt.prototype.setupTimeTrack=function(){var t=this,e=5e3,r=3e4;t.timeTrackSeconds=0,$.idleTimer(r),t.timeTrackIntervalId=setInterval(function(){$.idleTimer("isIdle")||(t.timeTrackSeconds+=e/1e3)},e)};Dt.prototype.loadCode=function(t){return window.HOC_LOGGED_OUT_PLAYLIST_EDITOR||window.PRACTICE_LOGGED_OUT_EDITOR?Iu.send({method:"get_code_files",app:"editor",type:"GET",data:{gulpUrl:CHS.GULP_URL,item_id:t.itemID}}):Iu.send({method:"get_editor_setup_code",app:"editor",type:"GET",data:{gulpUrl:CHS.GULP_URL,item_id:t.itemID,user_id:t.codeUserID,student_assignment_id:t.studentAssignmentID}})};Dt.prototype.setupBitInterpreterEditor=function(){var t=this,e=_z()(400,t.getProgramType(),t,"#output");$("#run-tab > .buttons").remove(),$("#game").remove();var r=$("#codehs-editor");$("#codehs-editor").replaceWith(e.editor),e.editor.find("#js-editor-textarea").append(r),e.setup(),$("#close-toggle").trigger("click"),t.runner.run=function(){return t.currentCode},t.aceEditor.resize=function(){t.aceEditor.editor.resize(),e.resize()}};Dt.prototype.setupDataExplorer=function(){var t=this;$("#run-tab > .buttons").remove(),$("#game").remove();var e="https://docs.google.com/spreadsheets/d/"+t.resourceGdoc,r=e+"/pubhtml?widget=true",n=e+"/gviz/tq?headers=1&sheet=Sheet1",i=$(document.createElement("iframe")).width("100%").css("height","calc(100% - 52px)").attr("frameBorder",0).attr("src",r);$("#codehs-editor").replaceWith(i);var a="#right",s=$(a).resizable("option","start");$(a).resizable("option","start",function(l,f){i.css("pointer-events","none"),Du.isFunction(s)&&s(l,f)});var o=$(a).resizable("option","stop");$(a).resizable("option","stop",function(l,f){i.css("pointer-events","auto"),Du.isFunction(o)&&o(l,f)});var c=$(document.createElement("button")).text("Select Chart");$("#output").after(c),google.charts.setOnLoadCallback(function(){var l=new google.visualization.ChartWrapper({chartType:"Table",dataSourceUrl:n,containerId:"output"});l.draw();var f=new google.visualization.ChartEditor;google.visualization.events.addListener(f,"ok",function(){f.getChartWrapper().draw(document.getElementById("output"))}),c.on("click",function(){f.openDialog(l,{})})}),$("#close-toggle").trigger("click")};Dt.prototype.setupExpo=function(){var t=this,e=t.getExpoCode();if(e!==null){var r=KCe({welcomeString:"",promptLabel:""}),n={replConsole:r,hostname:window.location.hostname,codeTitle:window.pageSpecific.itemTitle,codeDescription:window.pageSpecific.codeUserFirstNameLastInitial,userProgramID:window.pageSpecific.userProgramID};t.expoSnackSessionPromise=Hn.sessionPromise(e,n),t.isSharedProgram?t.setupExpoForSharedProgram(n):t.typeTester.isGraphics()?t.setupExpoForGraphics(n):t.typeTester.isReactNative()&&t.setupExpoForReactNative(n)}};Dt.prototype.getExpoCode=function(){var t=this;return t.typeTester.isGraphics()?Hn.userCodeToReactCode(t.aceEditor.getValue(),window.location.hostname):t.typeTester.isReactNative()?t.aceEditor.getValue():null};Dt.prototype.setupExpoForSharedProgram=function(t){var e=this;e.expoSnackSessionPromise.then(function(r){var n=e.getExpoCode();$("#view-on-phone-btn").prop("disabled",!1),$("#view-on-phone-btn").on("click",function(i){var a=$("#view-on-phone-btn").attr("data-expo-url");if(a){var s=$("#view-on-phone-btn").data("expo-url");Hn.writeQRCode(s,Hn.SNACK_SESSION_QR_DOM)}else Hn.updateCode(n,r,Hn.SNACK_SESSION_QR_DOM)})})};Dt.prototype.setupExpoForReactNative=function(t){var e=this;e.expoSnackSessionPromise.then(function(r){var n=e.getExpoCode();Hn.updateCode(n,r,Hn.SNACK_SESSION_QR_DOM),$("#publish-button").on("click",function(){n=e.getExpoCode(),Hn.publishCode(n,t,r,!1)}),e.reactNativeRunner=new FCe(e)})};Dt.prototype.setupExpoForGraphics=function(t){var e=this;e.expoSnackSessionPromise.then(function(r){var n=e.getExpoCode();Hn.updateCode(n,r,Hn.SNACK_SESSION_QR_DOM),$(Xz+", "+Yz).on("click",function(i){n=e.getExpoCode(),Hn.updateCode(n,r,Hn.SNACK_SESSION_QR_DOM)}),$(".expo-option-checkbox").on("change",function(i){n=e.getExpoCode(),Hn.checkboxChange(i,n,t,r)}),$("#publish-button").on("click",function(){n=e.getExpoCode(),Hn.publishCode(n,t,r,!1)})})};Dt.prototype.updateReactNativeQR=function(t){var e=this;e.expoSnackSessionPromise.then(function(r){Hn.updateCode(t,r,Hn.SNACK_SESSION_QR_DOM)})};Dt.prototype.setupPresentationEditor=function(){var t=this,e=Az();$("#codehs-editor").replaceWith(e(t)),$("#close-toggle").trigger("click")};Dt.prototype.setupDemoEditor=function(){var t=this,e=Dz()(t);e.find("#js-run-tab-container").append($("#run-tab")),$("#wrapper").css("padding-right",0).append(e),$("#left").hide(),$("#right").hide(),$("#output").css({"text-align":"initial",width:"400px",margin:"auto",height:"550px"}),$("#close-toggle").trigger("click")};Dt.prototype.setupActiveTab=function(){if(pageSpecific.helpTabActive)xa.trigger("utils:switchToTab","#help-tab");else{var t=Xt.ItemTypeConfig.CONFIGS[this.getItemType()].active_tab;Xt.ProgramType.NO_RUN_TAB_PROG_TYPES.indexOf(this.getProgramType())!=-1&&(t="#exercise-tab"),xa.trigger("utils:switchToTab",t)}};Dt.prototype.setupCollaborateTab=function(){var t=this;$("#add-collaborator-btn").on("click",function(){var e=$("#collab-email").val().trim();e!=""&&Iu.send({method:"add_item_collaborator",app:"library",data:{item_id:t.itemID,user_id:t.codeUserID,collaborator_email:e},success:function(r){r.status=="ok"?($("#collaborator-list").append("<span>"+r.collaborator+"</span><br>"),$("#collab-email").val("")):oA.error("No user with that email could be found.")}})})};Dt.prototype.setupModules=function(){var t;this.editorType=="regular"?this.studentAssignmentID?t=dEe:t=lEe:this.editorType=="hourofcode"?t=pEe:this.editorType=="lite"?t=hEe:this.editorType=="nocode"?t=gEe:t=fEe;var e=uEe.concat(t.modules);Du.each(cEe,(function(r){var n=r[0];Du.contains(e,r[0])?this[n]=new r[1](this):this[n]=new(jCe(r[1]))(this)}).bind(this)),this.runner=new MCe(this).create(),window.pageSpecific.collaboratePortalID&&this.teletype.TeletypePackage.joinPortal(window.pageSpecific.collaboratePortalID).then(function(r){r?window.toastr.success("Joined room!"):alert("There was an issue joining the room. Confirm the URL with your friend!")})};Dt.prototype.setupQuizzes=function(){PCe.setup({itemID:this.itemID,moduleID:this.moduleID,courseID:this.courseID,itemType:this.itemType,quizID:this.quizID,numAnswered:this.num_answered,numQuestions:this.questions})};Dt.prototype.getInfo=function(){return{itemType:this.itemType,itemTypeStr:this.itemTypeStr,progType:this.progType,progTypeString:this.progTypeString,itemID:this.itemID,moduleID:this.moduleID,courseID:this.courseID,codeUserID:this.codeUserID,isSandbox:this.isSandbox,studentAssignmentID:this.studentAssignmentID}};Dt.prototype.getItemID=function(){return this.itemID};Dt.prototype.isOwnPage=function(){return this.editorType=="hourofcode"?!0:this.codeUserID==this.viewerID};Dt.prototype.isHourOfCode=function(){return this.editorType=="hourofcode"};Dt.prototype.clearHighlightedLines=function(){this.highlight&&this.aceEditor.clearHighlightedLines()};Dt.prototype.highlightLine=function(t,e,r){r=r||this.activeFile,r==this.activeFile&&this.highlight&&(e===void 0&&(e=!0),this.aceEditor.highlightLine(t,e))};Dt.prototype.getCurrentCode=function(){return this.currentCode};Dt.prototype.getCode=function(t){t=t||!1;var e=this.activeFile&&this.activeFile.endsWith(".jar"),r=this.aceEditor.getValue();return t&&this.currentCode[this.mainClass]!==void 0&&(r=this.currentCode[this.mainClass]),e&&(r=this.currentCode[this.activeFile]),this.cleanNewLine(r)};Dt.prototype.getReactNativeEmbedCode=function(){var t=this.aceEditor.getValue(),e=$("#show-buttons-switch").prop("checked"),r=$("#start-immediately-switch").prop("checked"),n=$("#full-screen-switch").prop("checked"),i=HV(),a;window.location.hostname==="localhost"?a=WCe:a=CHS.GULP_URL;var s={showButtons:e,startImmediately:r,fullScreen:n,placeholderCode:t,GULP_URL:a},o=BCe(i,s);return o};Dt.prototype.setCode=function(t){this.aceEditor.setValue(t),this.aceEditor.clearSelection()};Dt.prototype.getProgramType=function(){return this.progType};Dt.prototype.getItemType=function(){return this.itemType};Dt.prototype.getProgrammingLanguage=function(){return this.language};Dt.prototype.needsPopup=function(){return this.itemType==Xt.ItemType.EXERCISE||this.itemType==Xt.ItemType.CHALLENGE};Dt.prototype.setupBackspaceCheck=function(){$(document).on("keydown",function(t){var e=t.target.nodeName.toLowerCase();if((e!="input"&&e!="textarea"&&!$(t.target).hasClass("ql-editor")||$(t.target).attr("readonly")||t.target.getAttribute("type")==="checkbox")&&t.keyCode===8)return t.preventDefault(),!1})};Dt.prototype.infiniteLoopDetector=function(){this.counter=oEe,this.dec=function(){if(this.counter--,this.counter<=0)throw new Error("Infinite loop detected.");return this.counter>0}};Dt.prototype.showForLoopVars=function(t){$(rEe).html(t)};Dt.prototype.turnNextButtonGreen=function(){this.turnButtonGreen(Kz)};Dt.prototype.turnSubmitButtonGreen=function(){this.turnButtonGreen(lb)};Dt.prototype.turnButtonGreen=function(t){$(t).switchClass("btn-main-silver","btn-main-green",700)};Dt.prototype.togglePauseButton=function(){this.paused=!this.paused,this.setPauseButton(this.paused),this.paused?this.runner.pause():this.runner.restart()};Dt.prototype.finishedProgram=function(t){var e=!1;t!==void 0&&(e=t.success||!1);var r=this;e&&r.editorType=="hourofcode"&&r.itemType==Xt.ItemType.EXERCISE?setTimeout(function(){r.setRunButtonText("Run!"),r.isRunning=!1,xa.trigger("autograder:run",r.getCode(),r.info,r)},1500):(r.setRunButtonText("Run!"),r.isRunning=!1)};Dt.prototype.setRunButtonText=function(t){$(".run-button-text").text(t)};Dt.prototype.save=function(t,e){var r=this;if(this.isOwnPage()&&(this.codeSaver.saveCode(t,e),this.localStorageCodeSaver.saveCode(t)),Xt.ProgramType.SCHEME==r.progType){var n;r.currentCode[r.activeFile]=r.getCode(),n=JSON.parse(JSON.stringify(r.currentCode)),n=r.cleanFiles(n),r.runner.transfer(n)}};Dt.prototype.setPauseButton=function(t){var e=this;e.paused=t,e.paused?($(Ig).addClass("active"),$(Ig).attr("title","Unpause").tooltip("fixTitle")):($(Ig).removeClass("active"),$(Ig).attr("title","Pause").tooltip("fixTitle"))};Dt.prototype.cleanFiles=function(t){var e=this;return Object.keys(t).forEach(function(r){t[r]=e.cleanNewLine(t[r])}),t};Dt.prototype.cleanNewLine=function(t){return t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`),t};Dt.prototype.run=function(t){window.CodeHSConsole.clear(),fA.hide(),this.aceEditor.clearHighlightedLines();var e=this;window.HOC_LOGGED_OUT_PLAYLIST_EDITOR||window.PRACTICE_LOGGED_OUT_EDITOR?sA(e,t):e.isOwnPage()?e.save(function(){sA(e,t)},"run"):sA(e,t)};function sA(t,e){var r;if(e=e||{},t.getItemType()===Xt.ItemType.UNIT_TEST&&$("[data-filename]").filter(function(){var l=$(this).data("filename")||"";return Du.includes(l.toLowerCase(),"scratchpad")}).trigger("click"),e.installPackages){if(Xt.ProgramType.PYTHON_TYPES.indexOf(t.progType)!=-1){t.currentCode[t.activeFile]=t.getCode(),a=JSON.parse(JSON.stringify(t.currentCode));var n;try{n=a["requirements.txt"],r=t.runner.run({"requirements.txt":n},{installPackages:!0,itemID:t.itemID,codeUserID:t.codeUserID})}catch{return}}else if(Xt.ProgramType.NODE==t.progType){t.currentCode[t.activeFile]=t.getCode(),a=JSON.parse(JSON.stringify(t.currentCode));var i;try{i=a["package.json"],r=t.runner.run({"package.json":i},{installPackages:!0,itemID:t.itemID,codeUserID:t.codeUserID})}catch{return}}return}var a;Xt.ProgramType.JAVA_SERVER_TYPES.indexOf(t.progType)!=-1||Xt.ProgramType.C===t.progType||Xt.ProgramType.CPP===t.progType||Xt.ProgramType.PYTHON2===t.progType||Xt.ProgramType.PYTHON3===t.progType||Xt.ProgramType.SCHEME==t.progType||Xt.ProgramType.BASH==t.progType||Xt.ProgramType.PYTHON_GRAPHICS==t.progType||Xt.ProgramType.PYGAME==t.progType||Xt.ProgramType.PYTHON3_FUNCTION==t.progType||Xt.ProgramType.CPP_FUNCTION==t.progType||Xt.ProgramType.PYTHON_PROCESSING==t.progType||Xt.ProgramType.NODE==t.progType||t.typeTester.isPythonDataScience()?(t.currentCode[t.activeFile]=t.getCode(),a=JSON.parse(JSON.stringify(t.currentCode)),a=t.cleanFiles(a)):a=t.getCode();var s=[];if((t.progType===Xt.ProgramType.JAVA_CONSOLE||t.progType===Xt.ProgramType.JAVA_METHOD||t.progType===Xt.ProgramType.JAVA_METHOD_MAIN)&&(s=t.progType===Xt.ProgramType.JAVA_METHOD||t.progType===Xt.ProgramType.JAVA_METHOD_MAIN?["Scratchpad"]:[t.mainClass],delete a["Unit Test"],a["ConsoleProgram.java"]=aA()),t.progType===Xt.ProgramType.CPP&&(a["util.h"]=Oz(),a["util.cpp"]=Pz()),t.progType===Xt.ProgramType.JAVA_GRAPHICS&&(s=[t.mainClass],a["ConsoleProgram.java"]=aA(),a["GraphicsProgram.java"]=Rz(),a["Randomizer.java"]=Lz(),a["Color.java"]=Nz(),a["Thing.java"]=Fz(),a["Circle.java"]=Mz(),a["Rectangle.java"]=Uz(),a["Line.java"]=$z(),a["Text.java"]=Bz()),t.typeTester.isJavaKarel()){e={code:a};var o=new LCe(t,e).hasErrors();if(o)return;a=new zz("java","js").translate(a)}t.typeTester.isHTML()?a=t.currentCode:t.progType===Xt.ProgramType.PYTHON_FUNCTION?a=t.currentCode["scratchpad.py"]:t.progType===Xt.ProgramType.JAVASCRIPT_FUNCTION&&(a=t.currentCode["scratchpad.js"]);var c=OCe.lint(a,{language:t.getProgrammingLanguage(),progType:t.getProgramType()});if(c.hasError){fA.show({editor:t,message:c.message,lineNumber:c.lineNumber,progtype:t.getProgramType(),editorError:!0,log:!1});return}r=t.runner.run(a,{grading:!1,isRunning:t.isRunning,mainClass:t.progType===Xt.ProgramType.JAVA_METHOD||t.progType===Xt.ProgramType.JAVA_METHOD_MAIN?"Scratchpad":t.mainClass,arguments:s,itemID:t.itemID,codeUserID:t.codeUserID,overrideInfiniteLoops:e.overrideInfiniteLoops,javaDebugger:e.javaDebugger,pythonDebugger:e.pythonDebugger}),t.typeTester.isKarel()&&(r.hasError?(t.isRunning=!1,t.setRunButtonText("Run!")):(t.isRunning=!0,t.setRunButtonText("Continue")))}var mEe=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;Dt.prototype.stop=function(){this.aceEditor.clearHighlightedLines(),window.CodeHSConsole.clear(),fA.hide(),this.isRunning=!1,this.runner.stop&&this.runner.stop(),!this.typeTester.isGraphics()&&!mEe()&&$(nEe).first().trigger("focus")};Dt.prototype.setupBreakpointClicks=function(){var t=this.getEditor(),e=this;t.on("guttermousedown",function(r){var n=r.domEvent.target;if(n.className.indexOf("ace_gutter-cell")!=-1){var i=r.getDocumentPosition().row;e.toggleLineBreakpoint(i+1),r.stop()}})};Dt.prototype.toggleLineBreakpoint=function(t){this.breakpoints[this.activeFile].hasOwnProperty(t)?this.removeBreakpoint(t):this.addBreakpoint(t)};Dt.prototype.addBreakpoint=function(t){this.breakpoints[this.activeFile].hasOwnProperty(t)||(this.breakpoints[this.activeFile][t]={timesHit:0,justSeen:!1},this.aceEditor.addBreakpoint(t))};Dt.prototype.removeBreakpoint=function(t){delete this.breakpoints[this.activeFile][t],this.aceEditor.removeBreakpoint(t)};Dt.prototype.clearBreakpoints=function(t){var e=this;Object.keys(e.breakpoints).forEach(function(r){e.breakpoints[r]={}}),e.aceEditor.clearBreakpoints()};Dt.prototype.getBreakpoints=function(){return this.breakpoints};Dt.prototype.refreshBreakpoints=function(){var t=this;t.aceEditor.clearBreakpoints(),Object.keys(t.breakpoints[t.activeFile]).forEach(function(e){t.aceEditor.addBreakpoint(e)})};Dt.prototype.reindent=function(){var t=RCe({code:this.getCode()});this.setCode(t)};Dt.prototype.numLines=function(t){t=t!==void 0?t:this.getCode();var e=t.split(`
`);return e.length-1};Dt.prototype.externalRun=function(t){this.setPauseButton(!1),xa.trigger("utils:switchToTab","#run-tab",".right-col-tabs",".editor-tab-content"),this.run(t)};Dt.prototype.installPackages=function(t){xa.trigger("utils:switchToTab","#run-tab",".right-col-tabs",".editor-tab-content"),this.run({installPackages:!0})};Dt.prototype.getEditor=function(){return this.aceEditor.getEditor()};Dt.prototype.goToLine=function(t){this.aceEditor.gotoLine(t)};Dt.prototype.goToNext=function(){window.location.href=$("#next-url").data("url")};Dt.prototype.setupSubmitButton=function(){var t=this;$(lb+","+XCe).on("click",function(){var e=$(cA),r=$(lA);e.exists()&&r.exists()&&(e.hide(),r.html("")),xa.trigger("utils:disableButton",lb),window.HOC_LOGGED_OUT_PLAYLIST_EDITOR||window.PRACTICE_LOGGED_OUT_EDITOR?Xt.ItemTypeConfig.CONFIGS[t.itemType].autograder?(t.activeFile&&(t.currentCode[t.activeFile]=t.getCode()),xa.trigger("autograder:run",t.getCode(),t.info,t,{displayPopup:!0})):t.goToNext():window.Ed.save(function(){if(Xt.ItemTypeConfig.CONFIGS[t.itemType].autograder&&!t.isSandbox)xa.trigger("autograder:run",t.getCode(),t.info,t,{displayPopup:!0});else if(window.pageSpecific.freeResponseAutograder)xa.trigger("autograder:run",t.getCode(),t.info,t,{displayPopup:!0});else{if(t.typeTester.isFreeResponse()){var n=t.getCode();if(!n||n.trim()===""){NCe({tests:[],isOwnPage:t.isOwnPage(),isHourOfCode:t.isHourOfCode(),hasError:!0,blankFreeResponse:!0}),xa.trigger("utils:enableButton",lb);return}}var i={};if(t.studentAssignmentID?i={student_assignment_id:t.studentAssignmentID}:i={item_id:t.itemID,module_id:t.moduleID,course_id:t.courseID,correct:!0},t.typeTester.isGradeAndRespond()){var a=t.gradeAndRespond.validateData();if(Du.isEmpty(a))return;i.response=a.response,i.grade=a.grade}dA(i,t.goToNext)}},"submit")})};Dt.prototype.setupNextButton=function(){var t=this;$(Kz+","+JCe).on("click",function(){if(!t.isOwnPage()&&this.editorType!="hourofcode"){t.goToNext();return}xa.trigger("utils:disableButton",$(this));var e={};t.studentAssignmentID?e={student_assignment_id:t.studentAssignmentID}:e={item_id:t.itemID,module_id:t.moduleID,course_id:t.courseID},t.save(function(){xa.trigger("editor:sr:statusUpdate","Code Saved Successfully, submitting code now"),dA(e,t.goToNext)},"submit")})};Dt.prototype.setupEditorEvents=function(){var t=this;$(Hz).on("click",function(n){var i=this.href;event.preventDefault(),t.isOwnPage()?t.save(function(){window.open(i,"_blank")}):window.open(i,"_blank")});function e(){if(t.firepad&&!t.firepad.isLeader()){window.toastr.error("You can't upload files while collaborating");return}var n=new FormData($("#left-js-upload-form")[0]);$.ajax({url:"/core/ajax/upload_image",type:"POST",data:n,processData:!1,dataType:"JSON",contentType:!1,statusCode:{400:function(i){var a="Failed to upload image.";try{var s=i.responseJSON||JSON.parse(i.responseText);s&&s.msg&&(a=s.msg)}catch{i.responseText&&i.responseText.length<500&&(a=i.responseText.trim())}window.toastr.error(a)},500:function(i){var a="Failed to upload image.";try{var s=i.responseJSON||JSON.parse(i.responseText);s&&s.msg&&(a=s.msg)}catch{i.responseText&&i.responseText.length<500&&(a=i.responseText.trim())}window.toastr.error(a)}},success:function(i,a,s){if(!i||i.status!=="ok"){var o=i&&i.msg?i.msg:"Failed to upload image.";window.toastr.error(o);return}var c=DCe+i.url,l=$("#file-name").val().trim(),f=t.currentCode;t.save(function(){Iu.send({method:"add_code_file",app:"library",data:{item_id:window.pageSpecific.itemID,user_id:t.codeUserID,code:JSON.stringify(f),filename:l},success:function(g){if(g.status==="ok"){$("#create-new-file-modal").modal("hide"),t.code[l]=c,t.breakpoints[l]={},$(".file-list").html(""),t.editorColumns.setupFileList(!1);var m=$('[data-filename="'+l+'"]');t.editorColumns.activateFile(m),$("#file-name").val(""),$(Nl).removeAttr("disabled"),$(Nl).html("Add")}$("#save-code-btn").removeAttr("disabled")}})},"newFile")},error:function(i,a,s){if(!(i.status===400||i.status===500)){var o="Failed to upload image.";if(i&&i.responseJSON&&i.responseJSON.msg)o=i.responseJSON.msg;else if(i&&i.responseText)try{var c=JSON.parse(i.responseText);c&&c.msg&&(o=c.msg)}catch{i.responseText.length<500&&i.responseText.trim().length>0&&(o=i.responseText.trim())}window.toastr.error(o)}}})}$("body").on("change","#left-file-upload",e),$('a[data-target="#create-new-file-modal"]').on("click",function(n){if(t.firepad&&!t.firepad.isLeader()){n.stopPropagation(),window.toastr.error("You can't create new files while collaborating");return}}),$("#create-new-file").on("click",function(n){if($("#create-new-file-modal").appendTo("#wrapper"),t.firepad&&!t.firepad.isLeader()){n.stopPropagation(),window.toastr.error("You can't create new files while collaborating");return}}),$("#create-new-file-modal").on("shown.bs.modal",function(n){var i=$(n.relatedTarget).data("location");$("#new-file-folder-name").val(i),$("#new-file-folder-name-label").html(i),i?$(".location-select").show():$(".location-select").hide(),$("#file-name").trigger("focus")}),$("#add-file-switch").on("click",function(n){var i=n.target,a=i.value;i.classList.add("active"),$(i).siblings().each(function(s,o){o.classList.remove("active")}),a==="Folder"?$('input[name="add-file-type"]').val("folder"):$('input[name="add-file-type"]').val("file")}),$(Nl).on("click",function(){if(t.firepad&&!t.firepad.isLeader()){window.toastr.error("You can't create new files while collaborating");return}$("#filename-error").hide(),$(this).attr("disabled","disabled");var n=($("#file-name").val()||$("input#file-name").val()).trim(),i=$("#new-file-folder-name").val();i&&(n=i+"/"+n);var a=$(this).data("id"),s=t.currentCode;$(Nl).html("<i class='icon-spinner icon-spin'></i>");var o;$('input[name="add-file-type"]').val()=="folder"?(o=GCe(n,s),n=n+"/."):o=HCe(n,s),o.isValid&&zCe(n)?$("#left-file-upload").trigger("click"):n.endsWith(".jar")?($("#left-file-upload").trigger("click"),t.breakpoints[n]={}):o.isValid?t.save(function(){Iu.send({method:"add_code_file",app:"library",data:{item_id:a,user_id:t.codeUserID,code:JSON.stringify(s),filename:n},success:function(c){c.status==="ok"&&($("#create-new-file-modal").modal("hide"),t.code[n]="",t.breakpoints[n]={},$(".file-list").html(""),$(".location-select").addClass("gone"),$("#new-file-folder-name").html(""),$("#new-file-folder-name").val(""),$("#new-file-folder-name-label").html(""),$("#new-file-folder-name").append('<option name=""></option>'),$("#new-folder-folder-name").html(""),$("#new-folder-folder-name").append('<option name=""></option>'),t.editorColumns.setupFileList(!1),$('[data-filename="'+n+'"]').trigger("click"),$("#file-name").val(""),$(Nl).removeAttr("disabled"),$(Nl).html("Add"),t.firepad&&t.firepad.isLeader()&&t.firepad.updateFiles()),$("#save-code-btn").removeAttr("disabled")}})},"newFile"):(vEe(o.message),$(this).removeAttr("disabled"),$(Nl).html("Add"))}),$(uA).on("click",function(n){yEe({programID:t.itemID})}),$(Yz).on("click",function(n){n.preventDefault(),t.typeTester.isExample()&&t.turnNextButtonGreen();var i=$(cA),a=$(lA);i.exists()&&a.exists()&&(i.hide(),a.html("")),t.externalRun()}),$(aEe).on("click",function(n){n.preventDefault();var i=$(cA),a=$(lA);i.exists()&&a.exists()&&(i.hide(),a.html("")),t.externalRun({installPackages:!0})}),$("#phone-display").on("click",function(){$(this).hasClass("ios")?($(this).removeClass("ios"),$(this).addClass("android")):($(this).removeClass("android"),$(this).addClass("ios")),t.runner.runWebPlayer(t.getCode(),!0)}),$(Ig).on("click",function(n){n.preventDefault(),t.togglePauseButton()}),$(ZCe).on("click",function(n){n.preventDefault();var i=t.getCode();t.typeTester.isJavaKarel()&&(i=new zz("java","js").translate(i)),t.runner.stepForward(i)}),$(eEe).on("click",function(n){n.preventDefault(),t.runner.stepBackward()}),$(tEe).on("click",function(n){n.preventDefault(),t.setPauseButton(!1),t.stop()}),t.setupSubmitButton(),t.setupNextButton(),$("#edit-username-modal").on("hide.bs.modal",function(n){var i=$("#username-edit-field").text(),a=/^[A-Za-z][A-Za-z0-9]+$/;if(!a.test(i))$("#edit-username-warning").show(),n.preventDefault();else{var s=i+"."+window.pageSpecific.codehsMeDomain,o=$('<a class="editor-title" target="_blank">').attr("href","http://"+s).text(s);$(".editor-title").replaceWith(o),$(Hz).attr("href","http://"+s),$(document).prop("title",s+" | CodeHS")}}).modal("show"),$(QCe).find("#fork-submit").on("click.fork-submit-handler",function(n){var i=$(this);i.attr("disabled",!0),i.html("<i class='icon-spinner icon-spin'></i>"),Iu.send({method:"fork_shared_program",app:"editor",data:{shared_program_id:window.pageSpecific.sharedProgramID,forking_user_id:window.pageSpecific.viewerID,shared_program_owner_id:window.pageSpecific.codeUserID,shared_program_item_id:window.pageSpecific.itemID,forked_title:$(".sandbox-program-title").text().trim()},success:function(a){if(a.status==="ok"){var s=a.forked_url;i.replaceWith('<a class="btn btn-main-green" href="'+s+'">View Your Program!</a>'),i.off("click.fork-submit-handler")}else a.message?oA.error(a.message):oA.error("There was an issue forking the program. Send an email to support@codehs.com with the URL."),i.html("Fork!");i.attr("disabled",!1)}})}),$(document).on("click",Wz,function(){if(window.HOC_LOGGED_OUT_PLAYLIST_EDITOR||window.PRACTICE_LOGGED_OUT_EDITOR)t.goToNext();else{var n={};t.studentAssignmentID?n={student_assignment_id:t.studentAssignmentID}:n={item_id:t.itemID,module_id:t.moduleID,course_id:t.courseID,correct:!0},dA(n,t.goToNext)}}),$(YCe).on("click",function(){xa.trigger("autograder:run",t.getCode(),t.info,t,{displayPopup:!0})}),$(Xz).on("click",function(){xa.trigger("editor:sr:statusUpdate","Saving code..."),t.save(function(){xa.trigger("editor:sr:statusUpdate","Code Saved Successfully")},"save")}),$(sEe).on("click",function(){var n=$(this).find("input").val();t.gradeAndRespond.showAnswer(t.itemID,n)});var r=t.runner;t.typeTester.isPythonKarel()&&(r=r.karelRunner),r.on("updateCanvas",(function(n){this.sidebar.setupCanvas(n&&n.canvasId),this.editorInstructions.setupObjective()}).bind(t)),$("#save-exercise-edits").on("click",function(){$(this).attr("disabled","disabled");var n=$("#exercise-edit-modal").find("textarea").val(),i=$(this).data("id");Iu.send({method:"edit_item_info",app:"library",data:{exercise:i,field:"exercise",new_val:n},success:function(a){a.status==="ok"?($("#exercise-edit-modal").modal("hide"),$("#exercise-edit-modal error-text").css("visibility","hidden")):$("#exercise-edit-modal error-text").css("visibility","visible"),$("#save-exercise-edits").removeAttr("disabled")}})}),$Ce(t),$(".js-playback-tab").length&&$(function(){var n=$("#snapshot-history-listings").find(".snapshot-full"),i=n.length,a=i-1,s=0;function o(){var c=$(n[a]).html();c=c.replace(/&lt;/g,"<"),c=c.replace(/&gt;/g,">"),c=c.replace(/&amp;/g,"&");for(var l=Object.keys(c),f=0;f<l.length;f++)t.code[l[f]]=c[l[f]],t.currentCode[l[f]]=c[l[f]];t.setCode(c[t.activeFile]),t.aceEditor.editor.selection.clearSelection(),a--,s++;var g=s/i*100;g=g+"%",$(".playback.progress-bar").css("width",g),!(a<0)&&setTimeout(o,1e3)}$(".js-playback-code").on("click",function(){a=i-1,s=0,o()})})};Dt.prototype.getFileMode=function(t){t==="Unit Test"&&(t=t+Xt.ProgrammingLanguage.FILE_SUFFIX[this.language]);var e=/[^.]*$/,r=t.match(e)[0].toLowerCase();switch(r){case"js":return"javascript";case"txt":return"text";case"cpp":case"h":case"c":return"c_cpp";case"sh":return"bash";case"md":return"markdown";case"py":return"python";case"java":return"java";case"scm":return"scheme";case"sql":return"sql";case"elm":return"elm";case"jsx":return"jsx";case"html":return"html";case"css":return"css";default:return"javascript"}};Dt.prototype.cleanup=function(){var t=this;$(document).off("click",Wz),clearInterval(t.saveIntervalId),clearInterval(t.heartbeatIntervalId),clearInterval(t.timeTrackIntervalId),$.idleTimer("destroy")};Dt.prototype.setupLazyLoadIframeTabs=function(){$("#textbook-tab-container").on("click",function(){var t=$("#textbook-tab-iframe");if(!t.attr("src")){var e=t.data("src");t.attr("src",e)}}),$("#video-tab-container").on("click",function(){var t=$("#video-tab-slides-iframe");if(!t.attr("src")){var e=t.data("src");t.attr("src",e)}})};function vEe(t){$("#filename-error").text(t),$("#filename-error").show()}function yEe(t){var e=t.programID;Iu.send({method:"publish_to_class",app:"library",data:{program:e},success:function(r){if(r.status=="ok"){$(uA).toggleClass("published"),$(uA).toggleClass("unpublished");var n=$("#edit-in-cms");n.attr("style")==="display: none;"?n.show():n.hide()}}})}function bEe(t){t&&$('[href="#video-tab"]').one("click",function(){$(".ql-toolbar").show();var e=$("#ql-notepad-container").data("notes"),r=Vz.createEditor("#ql-notepad-container",e);$("#ql-notepad-container").height(200);var n=$("#ql-notepad-container");if(!$("#video-notes-save").length){var i=$('<button id="video-notes-save" class="btn btn-main-blue btn-sm" type="button">Save</button>');n.after(i),i.on("click",function(){$("#save-status").text("Saving...");var a=n.find(".ql-editor").html();Gz(a,t)})}n.on("blur",".ql-editor",function(a){var s=a.relatedTarget;if(!(s&&s.id==="video-notes-save")){$("#save-status").text("Saving...");var o=$(this).html();Gz(o,t)}})})}function Gz(t,e){Iu.send({method:"save_user_notes",app:"editor",data:{notes:t,item_id:e},success:function(r){$("#save-status").text("Saved")},error:function(r){$("#save-status").text("Error! Please try again.")}})}Dt.prototype.updateCodeExternally=function(t){var e=t.filename,r=t.data;this.code[e]=r,$(".file-list").html(""),$(".location-select").addClass("gone"),$("#new-file-folder-name").html(""),$("#new-file-folder-name").val(""),$("#new-file-folder-name-label").html(""),$("#new-file-folder-name").append('<option name=""></option>'),$("#new-folder-folder-name").html(""),$("#new-folder-folder-name").append('<option name=""></option>'),this.editorColumns.setupFileList(!1)};Dt.prototype.setCodeFromJSON=function(t,e){var r=this,n=JSON.parse(t);r.code=n,r.currentCode=n;var i;!r.typeTester.isHTML()&&!r.typeTester.isUnitTest()&&e.mainClass?(i=e.mainClass+Xt.ProgrammingLanguage.FILE_SUFFIX[r.language],r.activeFile=i):e.mainClass?(i=e.mainClass,r.activeFile=i):(i=Xt.ProgrammingLanguage.DEFAULT_FILENAME[r.language],r.activeFile=i),Du.has(n,i)||(i=Object.keys(n)[0],r.activeFile=i),r.setCode(n[i])};Dt.prototype.getJarASCII=function(){return`     )))
    (((
  +-----+
  |     |]
  \`-----'
___________
\`---------'
This is a .jar file, which would be very hard to read.`};Jz.exports=Dt});var Dg=Er();QA();ZA();e1();t1();window.stringify=pI();wL();xL();DL();OL();FL();YS();H0();t8();r8();s8();o8();window.CodeHSEditor=Qz();window.SimpleEditor=YV();Dg.on("editor:setup",function(){window.editorSpecific.itemOutput&&window.CodeHSConsole.setSolution(window.editorSpecific.itemOutput),window.editorSpecific.hideDarkScreen&&$(".dark-screen").hide(),window.HOC_LOGGED_OUT_PLAYLIST_EDITOR=window.editorSpecific.HOC_LOGGED_OUT_PLAYLIST_EDITOR,window.IS_PRACTICE=window.editorSpecific.IS_PRACTICE,window.PRACTICE_LOGGED_OUT_EDITOR=window.editorSpecific.PRACTICE_LOGGED_OUT_EDITOR,window.Ed=new window.CodeHSEditor(window.editorData),window.editorSpecific.simpleEditorData&&(window.SimpleEd=new window.SimpleEditor(window.editorSpecific.simpleEditorData)),window.editorSpecific.isMultiFile&&$(".error-container").selectable({selected:function(t,e){var r=$(e.selected).data("line"),n=$(e.selected).data("column")-1;if(window.editorSpecific.shouldSelectFile){var i=$(e.selected).data("filename"),a=$('a.file[data-filename="'+i+'"]');a.trigger("click")}window.Ed.aceEditor.editor.gotoLine(r,n,!0),window.Ed.aceEditor.editor.focus()}}),window.editorSpecific.isEmbeddable&&$("#embed-tab-container").on("click",function(){var t=$("#embed-textarea"),e=t.val();t.val(e.replace("//placeholder-code",window.Ed.aceEditor.getValue()))}),window.editorSpecific.isFreeResponse&&Dg.trigger("utils:switchToTab","#exercise-tab"),window.pageSpecific.allowCopyPasteCodeHSOnly&&$("#documentation-tab, #exercise-tab, #upload-tab").on("copy",function(){window.localStorage.setItem("codehsCopy",window.getSelection().toString())})});Dg.on("editor:other:setup",function(){window.CodeHSConsole.setSolution(""),$(".dark-screen").hide(),window.Ed=new window.CodeHSEditor(window.editorData)});Dg.on("editor:sr:statusUpdate",function(t){var e=$("#editor-sr-status-msg");e&&e.html(t)});function _Ee(t){var e=["https://static1.codehs.com","http://localhost:8000","https://staticflare.codehs.com","https://devstaticflare.codehs.com"];e.includes(t.origin)&&t.data&&t.data.name==="react-native-player-error"&&Dg.trigger("editorError:handle",{lineNumber:t.data.lineNumber,stack:t.data.stack,message:t.data.message},"react_native")}window.addEventListener("message",_Ee,!1);
/*! Bundled license information:

keycode/index.js:
  (*!
   * Programatically add the following
   *)

@videojs/xhr/lib/index.js:
  (**
   * @license
   * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
   * Copyright (c) 2014 David Bjrklund
   * Available under the MIT license
   * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
   *)

m3u8-parser/dist/m3u8-parser.cjs.js:
  (*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 *)

mpd-parser/dist/mpd-parser.cjs.js:
  (*! @name mpd-parser @version 0.22.1 @license Apache-2.0 *)

video.js/dist/video.cjs.js:
  (**
   * @license
   * Video.js 7.21.7 <http://videojs.com/>
   * Copyright Brightcove, Inc. <https://www.brightcove.com/>
   * Available under Apache License Version 2.0
   * <https://github.com/videojs/video.js/blob/main/LICENSE>
   *
   * Includes vtt.js <https://github.com/mozilla/vtt.js>
   * Available under Apache License Version 2.0
   * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
   *)
  (*! @name @videojs/http-streaming @version 2.16.3 @license Apache-2.0 *)
  (*! @name pkcs7 @version 1.0.4 @license Apache-2.0 *)
  (*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 *)

browser-split/index.js:
  (*!
   * Cross-Browser Split 1.1.1
   * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
   * Available under the MIT License
   * ECMAScript compliant, uniform cross-browser split method
   *)

json3/lib/json3.js:
  (*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org *)

wtf-8/wtf-8.js:
  (*! https://mths.be/wtf8 v1.0.0 by @mathias *)

pubnub/dist/web/pubnub.min.js:
  (*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** *)
  (*! lil-uuid - v0.1 - MIT License - https://github.com/lil-js/uuid *)

diff/dist/diff.js:
  (*!
  
   diff v4.0.1
  
  Software License Agreement (BSD License)
  
  Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>
  
  All rights reserved.
  
  Redistribution and use of this software in source and binary forms, with or without modification,
  are permitted provided that the following conditions are met:
  
  * Redistributions of source code must retain the above
    copyright notice, this list of conditions and the
    following disclaimer.
  
  * Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the
    following disclaimer in the documentation and/or other
    materials provided with the distribution.
  
  * Neither the name of Kevin Decker nor the names of its
    contributors may be used to endorse or promote products
    derived from this software without specific prior
    written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
  IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
  FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
  IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  @license
  *)
*/
